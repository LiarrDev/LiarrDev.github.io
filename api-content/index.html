{"posts":[{"title":"ä½¿ç”¨ mp3agic è¯»å†™ MP3 çš„ ID3 æ ‡ç­¾","content":"èƒŒæ™¯ æ•°å¹´å‰ä¸ºäº†åº”å¯¹å„éŸ³ä¹å¹³å°çš„ç‰ˆæƒå‰²æ®ï¼Œæˆ‘å¼€å§‹å»ºç«‹è‡ªå·±çš„ç¦»çº¿éŸ³ä¹åº“ã€‚åªæ˜¯å½“å¹´çš„æˆ‘æ²¡æœ‰æ„è¯†åˆ°ï¼Œå®ƒä¼šåºå¤§åˆ°å°†è¿‘ 6 åƒé¦–æ­Œâ€”â€”è¿™è¿˜æ˜¯åœ¨æˆ‘è¿‘å‡ å¹´éƒ½æ²¡æœ‰ç»´æŠ¤çš„æƒ…å†µä¸‹ã€‚ ä¸ºäº†æ¸…æ™°ç®¡ç†ï¼Œåº“å»ºç«‹ä¹‹åˆæˆ‘å°±é‡‡ç”¨äº†ç»Ÿä¸€çš„æ–‡ä»¶å‘½åæ ¼å¼ï¼šæ­Œæ‰‹ - æ­Œæ›².mp3ã€‚ ç»ˆäºæœ‰ä¸€å¤©æˆ‘é¢å¯¹ç€è¿™ä¸ª 20 å‡  GB çš„æ–‡ä»¶å¤¹æ‰‹è¶³æ— æªæ—¶ï¼Œæˆ‘æ„è¯†åˆ°ï¼Œå®ƒè¿˜éœ€è¦è¿›ä¸€æ­¥æ•´ç†ã€‚ æˆ‘çš„æƒ³æ³•æ˜¯è¿™æ ·çš„ï¼Œä¸ºäº†æ–¹ä¾¿ç´¢å¼•ï¼Œæˆ‘åº”è¯¥ä¸ºæ­Œæ‰‹å»ºç«‹ä¸€ä¸ªç›®å½•ï¼Œç„¶åæ­Œæ‰‹ä¸‹å†å»ºç«‹ä¸“è¾‘å­ç›®å½•ï¼Œæœ€åæŠŠæ¯é¦–æ­Œæ›²å½’ç±»åˆ°å¯¹åº”çš„ä¸“è¾‘ä¸­å»ã€‚ Music â”œâ”€â”€ Singer 1 â”‚ â”œâ”€â”€ Album 1 â”‚ â”‚ â”œâ”€â”€ Song 1 â”‚ â”‚ â”œâ”€â”€ Song 2 â”‚ â”‚ â””â”€â”€ Â·Â·Â· â”‚ â”œâ”€â”€ Album 2 â”‚ â”‚ â”œâ”€â”€ Song 1 â”‚ â”‚ â”œâ”€â”€ Song 2 â”‚ â”‚ â””â”€â”€ Â·Â·Â· â”‚ â””â”€â”€ Â·Â·Â· â”œâ”€â”€ Singer 2 â”‚ â”œâ”€â”€ Album 1 â”‚ â”‚ â”œâ”€â”€ Song 1 â”‚ â”‚ â”œâ”€â”€ Song 2 â”‚ â”‚ â””â”€â”€ Â·Â·Â· â”‚ â”œâ”€â”€ Album 2 â”‚ â”‚ â”œâ”€â”€ Song 1 â”‚ â”‚ â”œâ”€â”€ Song 2 â”‚ â”‚ â””â”€â”€ Â·Â·Â· â”‚ â””â”€â”€ Â·Â·Â· â””â”€â”€ Â·Â·Â· æ­Œæ‰‹åå­—å’Œæ­Œæ›²åå­—éƒ½å¥½è¯´ï¼Œå¾—ç›Šäºæˆ‘è§„èŒƒçš„å‘½åï¼Œç›´æ¥è§£ææ–‡ä»¶åå°±å¯ä»¥æ‹¿åˆ°ï¼Œé‚£ä¹ˆä¸“è¾‘ååº”è¯¥å¦‚ä½•è·å–å‘¢ï¼Ÿ ç‚¹å¼€ MP3 æ–‡ä»¶çš„å±æ€§ï¼Œå¯ä»¥çœ‹åˆ°å®ƒå†…éƒ¨å°±å­˜å‚¨äº†æ ‡é¢˜ã€æ­Œæ‰‹ã€ä¸“è¾‘ç­‰ä¿¡æ¯ï¼Œè¿™æ°å¥½èƒ½å¤Ÿæ»¡è¶³æˆ‘çš„éœ€è¦ã€‚ é¦–å…ˆéœ€è¦äº†è§£è¿™äº›å…ƒæ•°æ®çš„å­˜å‚¨æ–¹å¼ã€‚MP3 æ–‡ä»¶çš„å…ƒæ•°æ®é€šå¸¸éµå¾ª ID3 æ ‡å‡†ï¼Œä¸»è¦åˆ†ä¸º ID3v1 å’Œ ID3v2 ä¸¤ç§ã€‚ ID3v1ï¼šä½äºæ–‡ä»¶å°¾éƒ¨ï¼Œé•¿åº¦ä¸º 128 å­—èŠ‚ï¼Œå¦‚æœ MP3 æ–‡ä»¶ä¸­æœ‰ APE æ ¼å¼ä¿¡æ¯ï¼Œåˆ™åœ¨ APE ä¿¡æ¯ä¹‹åã€‚ä¸æ”¯æŒå°é¢å’Œä¸€äº›ç‰¹æ®Šå­—ç¬¦ï¼Œå…¼å®¹æ€§è¾ƒå¥½ï¼Œä½†ä¿¡æ¯å®¹é‡æœ‰é™ã€‚ ID3v2ï¼šä½äºæ–‡ä»¶å¤´éƒ¨ï¼Œå¯ä»¥åŒ…å«å°é¢å’Œç‰¹æ®Šå­—ç¬¦ç­‰ï¼Œé•¿åº¦ä»»æ„ï¼Œæ˜¯ç›®å‰æœ€å¸¸ç”¨çš„æ ‡å‡†ã€‚å®ƒç”±ä¸€ä¸ªæ ‡ç­¾å¤´å’Œå¤šä¸ªå¸§ï¼ˆFrameï¼‰ç»„æˆã€‚ ID3v2 å½“å‰æœ€æ–°ç‰ˆæœ¬æ˜¯ ID3v2.4ï¼Œä½†ä¸€äº›è€è®¾å¤‡æˆ–è½¯ä»¶å¯èƒ½åªæ”¯æŒ ID3v2.3ã€‚ ID3v2.4 å¯¹ ID3v2.3 åšäº†ä¸€äº›æ”¹è¿›ï¼š å®¹é‡å’Œé™åˆ¶ï¼šID3v2.4 ç›¸æ¯” ID3v2.3 æœ‰æ›´å¥½çš„æ‰©å±•æ€§ï¼Œå¯ä»¥æ”¯æŒæ›´å¤§å®¹é‡çš„æ–‡ä»¶ã€‚ æ ‡ç­¾å¤§å°ï¼šID3v2.4 æ–°å¢äº† 16 ä½å’Œ 32 ä½çš„å¤§å°å­—æ®µï¼Œå¯ä»¥è¡¨ç¤ºæ›´å¤§çš„æ ‡ç­¾å°ºå¯¸ã€‚ æ–‡æœ¬ç¼–ç ï¼šID3v2.4 å¼ºåˆ¶ä½¿ç”¨ UTF-16 ç¼–ç ï¼Œè€Œ ID3v2.3 åˆ™é»˜è®¤ä½¿ç”¨ ISO-8859-1 ç¼–ç ã€‚ å¸§ç±»å‹ï¼šID3v2.4 åºŸå¼ƒäº†ä¸€äº›è¿‡æ—¶çš„å¸§ç±»å‹ï¼Œå¹¶å¼•å…¥äº†æ–°çš„å¸§ç±»å‹ï¼Œå¦‚ï¼šç”¨æˆ·è‡ªå®šä¹‰æ–‡æœ¬ä¿¡æ¯ç­‰ã€‚ æ—¢ç„¶çŸ¥é“äº†å…ƒæ•°æ®å­˜å‚¨çš„ä½ç½®ï¼Œå¦‚ä½•è¯»å–å‘¢ï¼Ÿç›´æ¥è§£ææ–‡ä»¶çš„ ByteArray æ˜¯ä¸€ç§æ–¹æ¡ˆï¼Œä½†æ˜¯è¿™ç§æ–¹æ³•è¿‡äºç¡¬æ ¸ï¼Œä½¿ç”¨å°è£…è¿‡çš„ä¸‰æ–¹åº“æ˜¾ç„¶æ›´åŠ ç®€å•æ˜“ç”¨ã€‚ ä½¿ç”¨ mp3agic æˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªåä¸º mp3agic çš„åº“ï¼Œå°½ç®¡è¯¥ä»“åº“ä¸Šä¸€æ¬¡æäº¤å·²ç»æ˜¯ 2022 å¹´ï¼Œå¹¶ä¸”åœ¨ 2024 å¹´å·²æ ‡æ³¨ä¸ºä¸å†ç§¯æç»´æŠ¤ï¼Œä½†æˆ‘å®é™…æµ‹è¯•ä¸‹æ¥ï¼Œä»èƒ½å¤Ÿæ»¡è¶³æˆ‘çš„éœ€æ±‚ã€‚ å…ˆæ¥çœ‹çœ‹ä½¿ç”¨æ–¹æ³•ã€‚ å¼•å…¥ä¾èµ–ï¼š dependencies { implementation(&quot;com.mpatric:mp3agic:0.9.1&quot;) } è¯»å– MP3 æ–‡ä»¶ï¼š fun open(file: File) { val mp3File = Mp3File(it) val length = mp3File.lengthInSeconds val bitrate = mp3File.bitrate val sampleRate = mp3File.sampleRate // ... } æ”¯æŒç›´æ¥ä½¿ç”¨è·¯å¾„æˆ–è€… File å®ä¾‹æ„å»º Mp3Fileã€‚ ç§»é™¤ ID3 æˆ–è€…è‡ªå®šä¹‰ Tagï¼š fun deleteTag(mp3File: Mp3File, savePath: String) { if (mp3File.hasId3v1Tag()) { mp3File.removeId3v1Tag() } if (mp3File.hasId3v2Tag()) { mp3File.removeId3v2Tag() } if (mp3File.hasCustomTag()) { mp3File.removeCustomTag() } mp3File.save(savePath) } éœ€è¦ç•™æ„çš„æ˜¯ä¿®æ”¹åè°ƒç”¨ save() ä¿å­˜æ—¶ï¼Œä¸èƒ½ç›´æ¥è¦†ç›–åŸæ–‡ä»¶ï¼Œéœ€è¦æä¾›ä¸€ä¸ªæ–°çš„ä¿å­˜è·¯å¾„ï¼Œå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ è·å– ID3v1 çš„å€¼ï¼š fun getId3v1(mp3File: Mp3File) { if (mp3File.hasId3v1Tag()) { val v1Tag = mp3File.id3v1Tag val track = v1Tag.track val artist = v1Tag.artist val album = v1Tag.album val title = v1Tag.title val year = v1Tag.year val genre = v1Tag.genre val genreDesc = v1Tag.genreDescription val comment = v1Tag.comment val version = v1Tag.version // ... } } è®¾ç½® ID3v1 çš„å€¼ï¼š fun setId3v1(mp3File: Mp3File, savePath: String) { val v1Tag = if (mp3File.hasId3v1Tag()) { mp3File.id3v1Tag } else { ID3v1Tag().also { mp3File.id3v1Tag = it } } v1Tag.track = &quot;5&quot; v1Tag.artist = &quot;An Artist&quot; v1Tag.title = &quot;The Title&quot; v1Tag.album = &quot;The Album&quot; v1Tag.year = &quot;2001&quot; v1Tag.genre = 12 v1Tag.comment = &quot;Some comment&quot; // ... mp3File.save(savePath) } å…¶å®å°±æ˜¯ç®€å•çš„è°ƒç”¨ Getter å’Œ Setterã€‚ è·å– ID3v2 çš„å€¼ï¼š fun getId3v2(mp3File: Mp3File) { if (mp3File.hasId3v2Tag()) { val v2Tag = mp3File.id3v2Tag val track = v2Tag.track val artist = v2Tag.artist val album = v2Tag.album val title = v2Tag.title val year = v2Tag.year val genre = v2Tag.genre val genreDesc = v2Tag.genreDescription val comment = v2Tag.comment val version = v2Tag.version val lyrics = v2Tag.lyrics val composer = v2Tag.composer val publisher = v2Tag.publisher val origArtist = v2Tag.originalArtist val albumArtist = v2Tag.albumArtist val copyright = v2Tag.copyright val url = v2Tag.url val encoder = v2Tag.encoder val albumImage = v2Tag.albumImage if (albumImage != null) { val mime = v2Tag.albumImageMimeType // Write image to file - can determine appropriate file extension from the mime type val file = RandomAccessFile(&quot;album-artwork&quot;, &quot;rw&quot;) file.write(albumImage); file.close(); } // ... } } å› ä¸º ID3v2 æ”¯æŒè®¾ç½®ä¸“è¾‘å°é¢ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è·å–åˆ°å°é¢å›¾ç‰‡ã€‚ è®¾ç½® ID3v2 çš„å€¼ï¼š fun setId3v2(mp3File: Mp3File, savePath: String) { val v2Tag = if (mp3File.hasId3v2Tag()) { mp3File.id3v2Tag } else { ID3v24Tag().also { mp3File.id3v2Tag = it } } v2Tag.track = &quot;5&quot; v2Tag.artist = &quot;An Artist&quot; v2Tag.title = &quot;The Title&quot; v2Tag.album = &quot;The Album&quot; v2Tag.year = &quot;2001&quot; v2Tag.genre = 12 v2Tag.comment = &quot;Some comment&quot; v2Tag.lyrics = &quot;Some lyrics&quot; v2Tag.composer = &quot;The Composer&quot; v2Tag.publisher = &quot;A Publisher&quot; v2Tag.originalArtist = &quot;Another Artist&quot; v2Tag.albumArtist = &quot;An Artist&quot; v2Tag.copyright = &quot;Copyright&quot; v2Tag.url = &quot;http://foobar&quot; v2Tag.encoder = &quot;The Encoder&quot; v2Tag.setAlbumImage(byteArray, mime) // ... mp3File.save(&quot;MyMp3File.mp3&quot;) } Mp3File æ”¯æŒåˆ›å»º ID3v2.2ã€ID3v2.3ã€ID3v2.4ï¼Œå¯ä»¥æŒ‰éœ€åˆ›å»ºã€‚ ç¼–å†™æ•´ç†è„šæœ¬ æœ‰äº†ä¸Šé¢çš„å·¥å…·ï¼Œä¸‹é¢å°±å¯ä»¥å†™ä¸€ä¸ªç¬¦åˆæˆ‘é¢„æœŸçš„è„šæœ¬äº†ï¼š object MusicScript { private const val SOURCE_DIR = &quot;/Users/Liarr/mp3-source&quot; private const val RESULT_DIR = &quot;/Users/Liarr/mp3-result&quot; private const val FIXED_DIR = &quot;/Users/Liarr/mp3-fixed&quot; fun group() { val dir = File(SOURCE_DIR) dir.listFiles()?.forEach { if (it.name.endsWith(&quot;.mp3&quot;)) { // é¿å…è¯»åˆ°æœ¬åœ° .DS_Store ç­‰é MP3 æ–‡ä»¶ val regex = &quot;&quot;&quot;(.*) - (.*)\\.mp3&quot;&quot;&quot;.toRegex() val matchResult = regex.find(it.name) val fileArtist = matchResult?.groupValues?.get(1) val fileTitle = matchResult?.groupValues?.get(2) if (fileArtist == null || fileTitle == null) { return@forEach } val singerDir = File(RESULT_DIR, fileArtist) if (singerDir.exists().not()) { singerDir.mkdirs() // æ­Œæ‰‹æ–‡ä»¶å¤¹ä¸å­˜åœ¨ï¼Œå…ˆåˆ›å»º } val mp3File = Mp3File(it) if (mp3File.hasId3v2Tag()) { val v2Tag = mp3File.id3v2Tag // ID3v2 Tag é‡Œé¢çš„æ•°æ®å’Œæ–‡ä»¶åè§£æå‡ºæ¥çš„ä¸ä¸€è‡´ï¼Œå¤§æ¦‚ç‡æ˜¯ä¹±ç äº†ï¼Œå°è¯•ä¿®æ­£ if (fileArtist != v2Tag.artist || fileTitle != v2Tag.title) { val tagArtist = v2Tag.artist.correctCharset() val tagTitle = v2Tag.title.correctCharset() val tagAlbum = v2Tag.album.correctCharset() if (tagArtist == fileArtist &amp;&amp; tagTitle == fileTitle) { // è½¬ç æ­£ç¡®ï¼Œé‡è®¾ ID3v2 v2Tag.artist = tagArtist v2Tag.title = tagTitle v2Tag.album = tagAlbum // save æ–¹æ³•ä¸å…è®¸è¦†ç›–åŸæ–‡ä»¶ï¼Œå…ˆå­˜åˆ°å•ç‹¬æ–‡ä»¶å¤¹ï¼Œåé¢å†å¤„ç† mp3File.save(FIXED_DIR + File.separator + it.name) return@forEach } else { // è½¬ç åä¹Ÿä¸åŒ¹é…ï¼Œå°è¯•è¯»å– ID3v1 if (mp3File.hasId3v1Tag().not()) { return@forEach } val v1Tag = mp3File.id3v1Tag if (fileArtist != v1Tag.artist || fileTitle != v1Tag.title) { return@forEach } // ID3v1 é‡Œé¢çš„æ•°æ®æ­£ç¡®ï¼Œé‡è®¾ ID3v2 v2Tag.artist = v1Tag.artist v2Tag.title = v1Tag.title v2Tag.album = v1Tag.album // save æ–¹æ³•ä¸å…è®¸è¦†ç›–åŸæ–‡ä»¶ï¼Œå…ˆå­˜åˆ°å•ç‹¬æ–‡ä»¶å¤¹ï¼Œåé¢å†å¤„ç† mp3File.save(FIXED_DIR + File.separator + it.name) return@forEach } } if (v2Tag.album.isBlank().not()) { val albumDir = File(singerDir, v2Tag.album) if (albumDir.exists().not()) { albumDir.mkdirs() } val f = File(albumDir, it.name) it.renameTo(f) } } } } } private fun String.correctCharset() = String(this.toByteArray(Charsets.ISO_8859_1), Charset.forName(&quot;gbk&quot;)) } æ€»ç»“ä¸€ä¸‹æˆ‘çš„å®ç°æ€è·¯ï¼š å®šä¹‰ä¸‰ä¸ªç›®å½•ï¼šæºæ–‡ä»¶å¤¹ã€è¾“å‡ºæ–‡ä»¶å¤¹ã€ä¿®å¤æ–‡ä»¶å¤¹ã€‚ éå†æºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰ MP3 æ–‡ä»¶ï¼ˆé˜²æ­¢è¯»å–åˆ°æ¯”å¦‚ .DS_Store ç­‰é MP3 æ–‡ä»¶ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Media Type æ ¡éªŒæ–‡ä»¶ç±»å‹ï¼‰ã€‚ è§£ææ–‡ä»¶åå¾—åˆ°æ­Œæ‰‹å’Œæ­Œæ›²åï¼Œåœ¨è¾“å‡ºæ–‡ä»¶å¤¹ä¸­åˆ›å»ºæ­Œæ‰‹æ–‡ä»¶å¤¹ã€‚ è¯»å– MP3 çš„ ID3v2 æ ‡ç­¾ï¼Œæ£€æŸ¥æ ‡ç­¾ä¸­çš„æ­Œæ‰‹å’Œæ­Œæ›²æ˜¯å¦ä¸æ–‡ä»¶åä¸€è‡´ã€‚ å¦‚æœæ ‡ç­¾ä¸­çš„ä¿¡æ¯ä¸æ–‡ä»¶åä¸€è‡´ï¼Œä¸”ä¸“è¾‘åä¸ä¸ºç©ºï¼Œåˆ™å°†è¯¥æ–‡ä»¶ç§»åŠ¨åˆ°è¾“å‡ºæ–‡ä»¶å¤¹ä¸‹å¯¹åº”çš„ æ­Œæ‰‹/ä¸“è¾‘ å­ç›®å½•ä¸­ã€‚ å¦‚æœæ ‡ç­¾ä¸­çš„ä¿¡æ¯ä¸æ–‡ä»¶åä¸ä¸€è‡´ï¼Œå°è¯•å°†å…¶è½¬æ¢ä¸º GBK ç¼–ç ï¼Œè‹¥è½¬æ¢ååŒ¹é…ï¼Œåˆ™ä¿®æ­£æ ‡ç­¾å¹¶ä¿å­˜åˆ°ä¿®å¤æ–‡ä»¶å¤¹ï¼Œä»ä¸åŒ¹é…åˆ™å°è¯•è¯»å– ID3v1 æ ‡ç­¾ï¼Œå¦‚æœ ID3v1 çš„ä¿¡æ¯ä¸æ–‡ä»¶åä¸€è‡´ï¼Œåˆ™å°†å…¶å†™å…¥åˆ° ID3v2ï¼Œå¹¶ä¿å­˜åˆ°ä¿®å¤æ–‡ä»¶å¤¹ä¸­ã€‚ ä¸ºä»€ä¹ˆè¦åšæ–‡ä»¶åå’Œ ID3v2 çš„åŒ¹é…åˆ¤æ–­å‘¢ï¼Œå› ä¸ºè·‘è„šæœ¬çš„è¿‡ç¨‹ä¸­æˆ‘å‘ç°ï¼Œä¸€äº› MP3 æ–‡ä»¶è§£æå‡ºæ¥çš„ç»“æœæ˜¯ä¹±ç ï¼Œç³»ç»Ÿæ’­æ”¾å™¨ä¹Ÿä¸èƒ½æ­£å¸¸è¯†åˆ«ï¼š è¿™ç§æƒ…å†µä¸‹å¤§æ¦‚ç‡å°±æ˜¯ä¸Šæ–‡ä¸­æåˆ°çš„ ID3v2.3 é»˜è®¤ä½¿ç”¨ ISO-8859-1 ç¼–ç å¯¼è‡´çš„ï¼Œæ‰€ä»¥ä¼šå‡ºç°è·Ÿæ–‡ä»¶åè·Ÿ ID3v2 ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œå°è¯•å°†å…¶è½¬æ¢ä¸º GBK ç¼–ç ã€‚ æ‰§è¡Œè„šæœ¬åï¼Œè¾“å‡ºæ–‡ä»¶å¤¹ä¸­å°±å½’ç±»äº†æœ¬æ¥å°±ç¬¦åˆè¦æ±‚çš„ MP3 æ–‡ä»¶ï¼Œä¿®å¤æ–‡ä»¶å¤¹ä¸­åˆ™å¾—åˆ°äº†ç»è¿‡å¤„ç†çš„ MP3 æ–‡ä»¶ï¼Œæ­¤æ—¶å¯ä»¥æ‰‹åŠ¨æ£€æŸ¥ä¿®å¤æ–‡ä»¶å¤¹ä¸­çš„æ–‡ä»¶ï¼Œç¡®è®¤æ— è¯¯åæ›¿æ¢æºæ–‡ä»¶ï¼Œå†æ¬¡è¿è¡Œè„šæœ¬å³å¯ã€‚è¿™æ ·æ—¢ä¿è¯äº†è‡ªåŠ¨åŒ–æ•ˆç‡ï¼Œåˆç•™æœ‰äººå·¥å¤æ ¸çš„ç©ºé—´ã€‚ äºŒæ¬¡æ‰§è¡Œè„šæœ¬ä¹‹åå‰©ä¸‹çš„å°±æ˜¯æ— æ³•æ ¹æ®æˆ‘ä»¬å®šä¹‰çš„è§„åˆ™å¤„ç†çš„æ–‡ä»¶ï¼Œé‚£å°±éœ€è¦æ‰‹åŠ¨å¤„ç†äº†ã€‚ é‡åˆ°çš„å°æ’æ›² ç¬¬ä¸€æ¬¡è¿è¡Œè„šæœ¬æ—¶ï¼Œå‘ç°è®¸å¤šæ–‡ä»¶æ— æ³•ç§»åŠ¨ï¼Œè°ƒè¯•åˆ° renameTo() æ–¹æ³•è¿”å›äº† falseï¼Œæ’æŸ¥å‘ç°æ˜¯æƒé™é—®é¢˜ï¼Œè¿™äº›æ— æ³•è¢«ç§»åŠ¨çš„æ–‡ä»¶éƒ½è¢«è®¾ç½®äº† uchg æ ‡å¿—ï¼Œä¼°è®¡æ˜¯å¤šå¹´å‰ä¸ºäº†é˜²æ­¢æ„å¤–ä¿®æ”¹è€Œè®¾ç½®çš„åªè¯»å±æ€§ã€‚ æ‰§è¡Œå‘½ä»¤ï¼š âœ ls -lO &quot;/Users/Liarr/mp3-source&quot; # -rwxr-xr-x 1 hugecore staff uchg 4199728 Jan 24 2017 é™ˆå¥•è¿… - å¤©ä¸‹æ— åŒ.mp3 # ... å¯ä»¥çœ‹åˆ°è¯¥ç›®å½•ä¸‹è¾“å‡ºçš„æ–‡ä»¶ä¿¡æ¯ä¸­éƒ½åŒ…å« uchg æ ‡å¿—ï¼ˆå³ user immutableï¼‰ï¼Œæœ‰è¿™ä¸ªæ ‡å¿—çš„æ–‡ä»¶æ— æ³•é€šè¿‡è„šæœ¬è¿›è¡Œä¿®æ”¹ã€åˆ é™¤ã€é‡å‘½åã€ç§»åŠ¨ç­‰æ“ä½œï¼Œæ‰€ä»¥éœ€è¦å…ˆæ‰§è¡Œå‘½ä»¤è§£é™¤ uchg æ ‡å¿—ï¼š âœ sudo chflags -R nouchg &quot;/Users/Liarr/mp3-source&quot; è¾“å…¥å¯†ç åå³å¯è§£é™¤ï¼Œåé¢è·‘è„šæœ¬å°±æ²¡æœ‰é—®é¢˜äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Reading-and-Manipulating-MP3-ID3-Tags-with-mp3agic/"},{"title":" Jetpack Glance åŠ©åŠ› Compose AppWidget å¼€å‘","content":"èƒŒæ™¯ ä¹‹å‰ã€ä¸º Android åº”ç”¨æ„å»º Widgetã€ä¸€æ–‡ä»‹ç»è¿‡åœ¨ Android ä¸­ Widget çš„å¼€å‘æµç¨‹ï¼Œæ–‡ä¸­çš„ç¤ºä¾‹æ˜¯åŸºäºã€Android Studioã€æä¾›çš„é»˜è®¤æ¨¡ç‰ˆï¼Œä¹Ÿå°±æ˜¯ RemoteViews æ¥æ„å»ºçš„ï¼Œå½“æ—¶çš„æ–‡ç« åå“ä¸é”™ï¼Œä¹Ÿå¼•å‘äº†ä¸å°‘è¯»è€…çš„è®¨è®ºï¼Œå…¶ä¸­æœ‰ä¸å°‘è¯»è€…æœŸå¾…åœ¨ Jetpack Compose ä¸­ä½¿ç”¨æ›´åŠ ä¼˜é›…çš„è§£å†³æ–¹æ¡ˆï¼Œä»Šå¤©å®ƒæ¥äº†ã€‚ Google å¼€å‘äº†ä¸€ä¸ªæ„å»ºåœ¨ Jetpack Compose Runtime ä¹‹ä¸Šçš„æ¡†æ¶ï¼Œåä¸º Glanceï¼Œå¸®åŠ©ä½ ç”¨æ›´å°‘çš„ä»£ç å¿«é€Ÿæ„å»ºå“åº”å¼ Widgetã€‚ äº‹å…ˆå£°æ˜ï¼Œå¾—ç›Šäº Android è‰¯å¥½çš„å…¼å®¹æ–¹æ¡ˆï¼Œä¹‹å‰çš„ RemoteViews ä¾ç„¶å¯ç”¨ï¼Œä¸å¿…ä¸ºå…¶æ˜¯å¦éœ€è¦è¿ç§»æ„Ÿåˆ°ç„¦è™‘ã€‚ å®è·µ åŸºæœ¬é…ç½® ã€Android Studioã€çš„é»˜è®¤åˆ›å»ºæ¨¡ç‰ˆä¹‹å‰çš„æ–‡ç« ä¸­å·²ç»ä»‹ç»è¿‡äº†ï¼Œå®ƒä¸ Glance çš„é…ç½®å¤§ç›¸å¾„åº­ï¼Œæ‰€ä»¥æœ¬æ¬¡æˆ‘ä»¬å°†æ‰‹åŠ¨å®Œæˆé…ç½®ã€‚ é¦–å…ˆç¡®ä¿å½“å‰é¡¹ç›®çš„ Compose ç¯å¢ƒå·²ç»é…ç½®å®Œæˆï¼ŒCompose çš„é…ç½®æµç¨‹æœ¬æ–‡ä¸å†èµ˜è¿°ï¼Œè¯»è€…å¯ä»¥è‡ªè¡Œæœç´¢ã€‚ æ¥ä¸‹æ¥æ·»åŠ ä¾èµ–ï¼š dependencies { // For AppWidgets support implementation &quot;androidx.glance:glance-appwidget:1.1.1&quot; // For interop APIs with Material 3 implementation &quot;androidx.glance:glance-material3:1.1.1&quot; // For interop APIs with Material 2 implementation &quot;androidx.glance:glance-material:1.1.1&quot; } æŒ‰éœ€æ·»åŠ å³å¯ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒGlance çš„ç‰ˆæœ¬å’Œå½“å‰ Compose çš„ç‰ˆæœ¬ä¹Ÿæ˜¯æœ‰å…³è”çš„ï¼Œå¦‚æœä¸å…¼å®¹å¯èƒ½ä¼šç¼–è¯‘å‡ºé”™ï¼Œä¿®æ”¹ç‰ˆæœ¬å·ä¸ºå¯¹åº”çš„ç‰ˆæœ¬å³å¯ã€‚ ç„¶åç¼–å†™ä¸€ä¸ªç»§æ‰¿è‡ª GlanceAppWidget çš„ç±»ï¼Œæˆ‘ä»¬çš„ Widget æ ·å¼å°†åœ¨è¿™é‡Œæ¸²æŸ“ï¼š class MyAppWidget : GlanceAppWidget() { override suspend fun provideGlance(context: Context, id: GlanceId) { provideContent { GlanceTheme { MyContent() } } } @Composable private fun MyContent() { ... } } å®ç° provideGlance() æ–¹æ³•ï¼Œå¹¶åœ¨ provideContent() å†…åˆ›å»ºä½ çš„ Compose è§†å›¾ã€‚ æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š provideGlance() æ–¹æ³•è¿è¡Œåœ¨ä¸»çº¿ç¨‹ï¼Œæ‰€ä»¥è€—æ—¶æ“ä½œå»ºè®®ä½¿ç”¨åç¨‹å¤„ç†ã€‚ è™½ç„¶è¡¨é¢ä¸Šçœ‹å®ƒæ˜¯ä½¿ç”¨ Compose ç¼–å†™ UIï¼Œä½†å®é™…ä¸Š Glance å†…éƒ¨é‡æ–°æ„å»ºäº†ä¸€å¥—ä¸ Jetpack Compose ç±»ä¼¼çš„ç»„ä»¶åº“ï¼Œæ³¨æ„ä¸è¦å¯¼é”™åŒ…ã€‚ Glance åªæ”¯æŒ Boxã€Columnã€Rowã€Spacerã€Textã€Buttonã€Imageã€LazyColumnã€Scaffold ç­‰ï¼Œå°½ç®¡éšç€ç‰ˆæœ¬æ›´æ–°è¿˜æ‹“å±•äº†ä¸€äº›å…¶ä»–çš„ç»„ä»¶ï¼Œä½†ä»ä¸ RemoteViews çš„é™åˆ¶å¤§åŒå°å¼‚ï¼Œäº‹å®ä¸Šï¼ŒGlance åªæ˜¯æä¾›äº† Compose-Style çš„å†™æ³•ï¼Œå®ƒä¾ç„¶ä¼šç¿»è¯‘æˆ RemoteViews å¯ç”¨çš„æ–¹æ¡ˆã€‚ å¦‚æœæœŸæœ› Glance èƒ½å¤Ÿçªç ´ç»„ä»¶é™åˆ¶çš„å¯ä»¥åŠé€€äº†ğŸ˜‚ã€‚ ç»§ç»­åˆ›å»ºä¸€ä¸ª GlanceAppWidgetReceiver ç”¨äºè·å–åˆšåˆšçš„ GlanceAppWidgetï¼š class MyAppWidgetReceiver : GlanceAppWidgetReceiver() { override val glanceAppWidget = MyAppWidget() } çœ‹åˆ°è¿™ä¸ªåå­—ç›¸ä¿¡ä½ å·²ç»å¯Ÿè§‰åˆ°äº†ï¼Œæˆ‘ä»¬ä¹‹å‰ä¼ ç»Ÿçš„æ„å»ºæ–¹å¼ä¹Ÿéœ€è¦æ³¨å†Œä¸€ä¸ªå¹¿æ’­ï¼Œæ‰’å¼€å®ƒçš„ç¥ç§˜é¢çº±ç…ä¸€çœ¼ï¼š abstract class GlanceAppWidgetReceiver : AppWidgetProvider() { ... abstract val glanceAppWidget: GlanceAppWidget } å¥½å®¶ä¼™ï¼Œè¿˜æ˜¯åŸºäºåŸæ¥çš„ AppWidgetProvider å°è£…çš„ã€‚ Glance æ³¨å†Œè¿˜éœ€è¦ä¸€ä¸ª AppWidgetProviderInfo å…ƒæ•°æ®ï¼Œè¿™ä¹Ÿæ˜¯è€æ¼”å‘˜äº†ï¼Œéœ€è¦ç•™æ„çš„æ˜¯ï¼ŒGlance æ²¡æœ‰é»˜è®¤çš„åˆå§‹å¸ƒå±€ï¼Œä½ å¯ä»¥ä½¿ç”¨å®ƒå†…éƒ¨å®šä¹‰çš„ï¼š &lt;appwidget-provider ... android:initialLayout=&quot;@layout/glance_default_loading_layout&quot; /&gt; æœ€åå°±æ˜¯åœ¨ AndroidManifest.xml ä¸­æ³¨å†Œäº†ï¼ŒåŒä¹‹å‰ä¸€æ ·ï¼š &lt;manifest ...&gt; &lt;application ...&gt; ... &lt;receiver android:name=&quot;.widget.MyAppWidgetReceiver&quot; android:exported=&quot;false&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt; &lt;/intent-filter&gt; &lt;meta-data android:name=&quot;android.appwidget.provider&quot; android:resource=&quot;@xml/my_app_widget_info&quot; /&gt; &lt;/receiver&gt; &lt;/application&gt; &lt;/manifest&gt; æ›´æ–° Widget Glance å®˜æ–¹æ–‡æ¡£ä¸­å…³äºæ›´æ–° Widget çš„å†…å®¹æˆ‘è®¤ä¸ºæè¿°å¾—ä¸å¤Ÿè¯¦ç»†ï¼Œå®ƒåªå‘Šè¯‰ä½ è°ƒç”¨ updateAll() æ–¹æ³•å³å¯ï¼š object MyAppWidgetManager { fun updateAll(context: Context) { GlobalScope.launch { MyAppWidget().updateAll(context) } } } åˆæˆ–è€…è°ƒç”¨ update()ï¼š object MyAppWidgetManager { fun updateAll(context: Context) { GlobalScope.launch { val manager = GlanceAppWidgetManager(context) val widget = MyAppWidget() val glanceIds = manager.getGlanceIds(widget.javaClass) glanceIds.forEach { glanceId -&gt; widget.update(context, glanceId) } } } } ç”±äºè¿™ä¸¤ä¸ªæ–¹æ³•éƒ½ä½¿ç”¨ suspend ä¿®é¥°ï¼Œæ‰€ä»¥å»ºè®®åœ¨éä¸»çº¿ç¨‹ä¸­è°ƒç”¨ã€‚ å¦‚æœä½¿ç”¨ä¼ ç»Ÿå¼€å‘ Widget çš„æ€ç»´ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³• Widget ä¾¿ä¼šæ‰§è¡Œåˆ·æ–°ï¼Œä½†æ˜¯å®é™…æ•ˆæœå´å¹¶ä¸èƒ½æ­£ç¡®æ‰§è¡Œï¼Œè¯·ä¸è¦è®¤ä¸ºåœ¨ä»»ä½•æ—¶å€™è°ƒç”¨è¿™ä¸ªæ–¹æ³•ä¼šè§¦å‘ provideGlance()ã€‚ å› ä¸º GlanceAppWidget çš„æ›´æ–°æ˜¯é€šè¿‡çŠ¶æ€ç®¡ç†çš„ï¼Œæ¯”å¦‚å®˜æ–¹çš„ä¾‹å­ï¼š class DestinationAppWidget : GlanceAppWidget() { ... @Composable fun MyContent() { val repository = remember { DestinationsRepository.getInstance() } val destinations by repository.destinations.collectAsState(State.Loading) when (destinations) { is State.Loading -&gt; { // show loading content } is State.Error -&gt; { // show widget error content } is State.Completed -&gt; { // show the list of destinations } } } } ä½†æˆ‘ä»¬é‡ç”Ÿå¼€å‘å´å¾ˆå°‘ä½¿ç”¨è¿™ç§çŠ¶æ€ï¼Œæ¯”å¦‚ç›´æ¥ä» SharedPreferences é‡Œé¢è¯»å–å€¼æ¥å±•ç¤ºï¼š class MyAppWidget : GlanceAppWidget() { override suspend fun provideGlance(context: Context, id: GlanceId) { provideContent { val foo = fetchFromPreferences() GlanceTheme { if (foo != null) { MyContent(foo) } else { DefaultContent() } } } } @Composable private fun MyContent(foo: Foo) { ... } @Composable private fun DefaultContent() { ... } } è¿™ç§å†™æ³•ä¼šå¯¼è‡´è°ƒç”¨ update() åˆ¤æ–­ä¸åˆ°çŠ¶æ€çš„å˜æ›´ï¼Œå¯¼è‡´ä¸ä¼šåˆ·æ–°ï¼Œå½“ç„¶é‡ç”Ÿå†™æ³•ä¹Ÿå¯ä»¥æ‰‹åŠ¨ç»™å®ƒæä¸€ä¸ªçŠ¶æ€ï¼š object MyAppWidgetManager { const val KEY_NOW = &quot;now&quot; fun updateAll(context: Context) { GlobalScope.launch { val glanceIds = GlanceAppWidgetManager(context).getGlanceIds(MyAppWidget::class.java) glanceIds.forEach { id -&gt; updateAppWidgetState(context, id) { it[longPreferencesKey(KEY_NOW)] = System.currentTimeMillis() // è®¾ç½®çŠ¶æ€ } MyAppWidget().update(context, id) } } } } æ¯æ¬¡è°ƒç”¨ update() æ–¹æ³•å‰ï¼Œéƒ½æ›´æ–°ä¸€æ¬¡ Widget çš„çŠ¶æ€ï¼Œå³å¯åˆ·æ–°ï¼š class MyAppWidget : GlanceAppWidget() { override suspend fun provideGlance(context: Context, id: GlanceId) { provideContent { val now = currentState&lt;Preferences&gt;()[longPreferencesKey(MyAppWidgetManager.KEY_NOW)] // è¯»å–çŠ¶æ€ val foo = fetchFromPreferences() GlanceTheme { if (foo != null) { MyContent(foo) } else { DefaultContent() } } } } ... } ä» Widget ä¸­å¯åŠ¨åº”ç”¨ æˆ‘ä»¬çŸ¥é“ï¼ŒWidget è¿è¡Œåœ¨è¿œç¨‹è¿›ç¨‹ä¸­ï¼Œåœ¨ä¹‹å‰çš„ RemoteViews æ–¹æ¡ˆï¼Œæˆ‘ä»¬é€šè¿‡ PendingIntents æ¥å¯åŠ¨åº”ç”¨ï¼Œè€Œ Glance æä¾›äº†æ›´ä¼˜é›…çš„å®ç°æ–¹æ¡ˆã€‚ class MyAppWidget : GlanceAppWidget() { ... @Composable private fun MyContent() { Column { Button(text = &quot;Home&quot;, onClick = actionStartActivity&lt;MainActivity&gt;()) Text(text = &quot;Settings&quot;, modifier = GlanceModifier.clickable(actionStartActivity&lt;SettingsActivity&gt;())) } } } Glance é€šè¿‡ Action æ¥ç®€åŒ–å¤„ç†ç”¨æˆ·äº’åŠ¨çš„æµç¨‹ï¼ŒAction æ˜¯ä¸€ä¸ªæ¥å£ï¼Œåœ¨ä¸åŒçš„å¯åŠ¨åœºæ™¯ä¸­æœ‰ä¸åŒçš„å®ç°ã€‚ åœ¨éœ€è¦å¯åŠ¨ Activity æ—¶ï¼Œæˆ‘ä»¬åªéœ€è¦è°ƒç”¨ actionStartActivity() æ–¹æ³•æŒ‡å®šç›®æ ‡ Activity å³å¯ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª StartActivityActionï¼ŒStartActivityAction ä¹Ÿæ˜¯ä¸€ä¸ªæ¥å£ï¼Œä¼ é€’ä¸åŒçš„å‚æ•°ç”± StartActivityClassActionã€StartActivityComponentActionã€StartActivityIntentAction ç­‰å…·ä½“å®ç°ã€‚ Button å¯ä»¥é€šè¿‡ onClick æ¥æ”¶ Actionï¼Œå…¶ä»– @Composable ä¹Ÿå¯ä»¥é€šè¿‡ GlanceModifier.clickable() æ¥æ”¶ Actionã€‚ å¯åŠ¨çš„æ—¶å€™éœ€è¦ä¼ é€’å‚æ•°æ€ä¹ˆåŠï¼Œæˆ‘ä»¬çœ‹åˆ° actionStartActivity() æ–¹æ³•æœ‰ä¸ª Bundle å‚æ•°ï¼Œåƒä¸‡ä¸è¦è¢«è¿·æƒ‘äº†ï¼ @ExperimentalGlanceApi inline fun &lt;reified T : Activity&gt; actionStartActivity( parameters: ActionParameters = actionParametersOf(), activityOptions: Bundle? = null, ): Action = actionStartActivity(T::class.java, parameters, activityOptions) @ExperimentalGlanceApi fun &lt;T : Activity&gt; actionStartActivity( activity: Class&lt;T&gt;, parameters: ActionParameters = actionParametersOf(), activityOptions: Bundle? = null, ): Action = StartActivityClassAction(activity, parameters, activityOptions) å¯åŠ¨ Activity æ‰€éœ€çš„å‚æ•°å¹¶ä¸æ˜¯åœ¨è¿™ä¸ª Bundle ä¸­ä¼ é€’çš„ï¼Œè€Œæ˜¯é€šè¿‡ ActionParameters ä¼ é€’çš„ã€‚å°½ç®¡ ActionParameters å’Œ Bundle ä¸€æ ·åº•å±‚å®ç°éƒ½æ˜¯ Mapï¼Œä½†ä¸åŒäº Bundle çš„é”®æ˜¯ String ç±»å‹ï¼ŒActionParameters çš„é”®æ˜¯å†åšäº†ä¸€å±‚å°è£…çš„ ActionParameters.Keyï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬éœ€è¦å†åšä¸€å±‚è½¬æ¢ï¼Œå¥½å¤„æ˜¯ä¸æ€•ä¼ é€’åˆ°é”™è¯¯çš„ç±»å‹ã€‚ private val destinationKey = ActionParameters.Key&lt;String&gt;(NavigationActivity.KEY_DESTINATION) class MyAppWidget : GlanceAppWidget() { ... @Composable private fun MyContent() { Button( text = &quot;Home&quot;, onClick = actionStartActivity&lt;NavigationActivity&gt;(actionParametersOf(destinationKey to &quot;home&quot;)) ) } } ActionParameters.Key ä¸­çš„æ³›å‹æŒ‡å®šä¸ºè¦ä¼ é€’çš„å€¼çš„ç±»å‹ï¼Œç„¶åä¼ å…¥æˆ‘ä»¬ Activity ä¸­å®šä¹‰çš„é”®åæ„é€ å®ä¾‹ã€‚é€šè¿‡ actionParametersOf() æ„é€  ActionParameters å¯¹è±¡ï¼Œå®ƒå†…éƒ¨å¯ä»¥å¡«å……å¤šç»„ Pair å¯¹åº”æˆ‘ä»¬è¦ä¼ é€’çš„å‚æ•°ã€‚å°†æ„å»ºå¥½çš„ ActionParameters å¯¹è±¡ä¼ é€’ç»™ actionStartActivity() æ–¹æ³•å³å¯ã€‚ ç›®æ ‡ Activity æ— éœ€åšå¤šä½™çš„ä¿®æ”¹ï¼Œè¿˜æ˜¯ä½¿ç”¨ getIntent() è¯»å–ï¼š class NavigationActivity : ComponentActivity() { override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) val destination = intent.getStringExtra(KEY_DESTINATION) ... } companion object { const val KEY_DESTINATION = &quot;destination&quot; } } å…¶ä»–çš„æ“ä½œæ¯”å¦‚å¯åŠ¨ Service æˆ–è€…å‘é€å¹¿æ’­åŒæ ·æ˜¯é€šè¿‡ Action æ¥å®ç°ï¼Œè‡ªå®šä¹‰æ“ä½œä¹Ÿæ˜¯å¦‚æ­¤ï¼Œå¤§åŒå°å¼‚ï¼Œå‚ç…§æ–‡æ¡£å³å¯ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ RemoteViews å…œåº• åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¯èƒ½éœ€è¦ä½¿ç”¨ XML å’Œ RemoteViews æ¥æä¾›è§†å›¾ã€‚æ¯”å¦‚å·²ç»åœ¨ä¸ä½¿ç”¨ Glance çš„æƒ…å†µä¸‹å®ç°äº†æŸé¡¹åŠŸèƒ½ï¼Œæˆ–è€…è¯¥åŠŸèƒ½åœ¨å½“å‰ Glance API å°šæœªæä¾›æˆ–æ— æ³•ä½¿ç”¨ã€‚å¯¹äºè¿™ç§æƒ…å†µ Glance æä¾›äº† AndroidRemoteViewsï¼Œè¿™æ˜¯ä¸€ä¸ªäº’æ“ä½œæ€§ APIã€‚ä¸éš¾çœ‹å‡ºï¼Œå®ƒæä¾›äº†ä¸ Compose ä¸­ AndroidView ç±»ä¼¼çš„åŠŸèƒ½ã€‚ AndroidRemoteViews å…è®¸å°† RemoteViews ä¸å…¶ä»– @Composable æ­é…ä½¿ç”¨ï¼š class MyAppWidget : GlanceAppWidget() { ... @Composable private fun MyContent() { val packageName = LocalContext.current.packageName Column(modifier = GlanceModifier.fillMaxSize()) { Text(&quot;Isn't that cool?&quot;) AndroidRemoteViews(RemoteViews(packageName, R.layout.example_layout)) } } } å°† @Composable æ”¾åœ¨ AndroidRemoteViews åŒæ ·å¯è¡Œï¼š class MyAppWidget : GlanceAppWidget() { ... @Composable private fun MyContent() { val packageName = LocalContext.current.packageName AndroidRemoteViews( remoteViews = RemoteViews(packageName, R.layout.my_container_view), containerViewId = R.id.example_view ) { Column(modifier = GlanceModifier.fillMaxSize()) { Text(&quot;My title&quot;) Text(&quot;Maybe a long content...&quot;) } } } } è¦æ³¨æ„çš„æ˜¯è¿™é‡Œéœ€è¦ä¼ é€’å¸ƒå±€å’Œå®¹å™¨ IDï¼Œæ„å‘³ç€è¿™ä¸ªå®¹å™¨å¿…é¡»æ˜¯ ViewGroupï¼ŒåŒæ—¶è¯¥ ViewGroup å†…çš„æ‰€æœ‰å­ View éƒ½å°†è¢«ç§»é™¤ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯åœ¨æ­¤ AndroidRemoteViews ä¸­å¡«å……çš„å†…å®¹ã€‚ä¸è¦å¿˜è®°ï¼Œæä¾›çš„ ViewGroup å¿…é¡»å— RemoteViews æ”¯æŒã€‚ å†™åœ¨æœ€å è¿™ç¯‡æ–‡ç« è™½ç„¶ä¸»è¦æ˜¯ä»‹ç» Glanceï¼Œä½†å®é™…ä¸Šæ˜¯å¯¹ã€ä¸º Android åº”ç”¨æ„å»º Widgetã€ä¸€æ–‡çš„è¡¥å……ï¼Œå› ä¸º Glance ä»æ˜¯å¯¹ä¼ ç»Ÿå®ç° Widget çš„å°è£…ï¼Œæä¾›äº† Compose-Style çš„å†™æ³•ï¼Œå¹¶ä¸ä¼šè¶…è„±åŸæœ‰ Widget çš„é™åˆ¶ã€‚ Glance æ˜¯ä¸€ä¸ªå¾ˆæ–°çš„åº“ï¼Œç›®å‰è¿˜åœ¨å®éªŒé˜¶æ®µï¼Œä½†å·²åŸºæœ¬å¯ç”¨ï¼Œè€Œä¸”å®ƒå’Œ Compose çš„ç»“åˆéå¸¸ç´§å¯†ï¼Œä½¿ç”¨èµ·æ¥éå¸¸æ–¹ä¾¿ã€‚å¦‚æœä½ æ­£åœ¨ä½¿ç”¨ Composeï¼Œé‚£ä¹ˆä¸å¦¨å°è¯•ä¸€ä¸‹ Glanceï¼Œç›¸ä¿¡ä½ ä¼šçˆ±ä¸Šå®ƒçš„ã€‚ ä¸è¿‡æˆ‘éœ€è¦åœ¨è¿™é‡Œæ‰“ä¸ªé¢„é˜²é’ˆï¼Œç»è¿‡æˆ‘ä»¬å®é™…åœ¨ä¼ä¸šé¡¹ç›®çš„éªŒè¯ï¼Œç›®å‰ Glance åœ¨ vivo è®¾å¤‡ä¸Šä¼šå‡ºç°ä¸€ä¸ª IllegalStateExceptionã€‚ å †æ ˆä¿¡æ¯å¦‚ä¸‹ï¼š Fatal Exception: java.lang.IllegalStateException: Broadcast already finished at android.content.BroadcastReceiver$PendingResult.sendFinished(BroadcastReceiver.java:283) at android.content.BroadcastReceiver$PendingResult$1.run(BroadcastReceiver.java:256) at android.app.QueuedWork.processPendingWork(QueuedWork.java:265) at android.app.QueuedWork.-$$Nest$smprocessPendingWork() at android.app.QueuedWork$QueuedWorkHandler.handleMessage(QueuedWork.java:285) at android.os.Handler.dispatchMessage(Handler.java:106) at android.os.Looper.loopOnce(Looper.java:223) at android.os.Looper.loop(Looper.java:324) at android.os.HandlerThread.run(HandlerThread.java:67) æˆ‘è¿½è¸ªåˆ°åœ¨ Google IssueTracker ä¸Šä» 2022 å¹´å¼€å§‹å°±æœ‰è¿™ä¸ªé—®é¢˜ï¼Œå¹¶ä¸”è‡³ä»Šä»æœªè¢«ä¿®å¤ï¼Œå°šä¸æ˜ç¡®åˆ°åº•æ˜¯ Glance çš„ Bug è¿˜æ˜¯ vivo OriginOS çš„é”…ã€‚ å‚è€ƒå†…å®¹ Jetpack Glance | Jetpack Compose | Android Developers androidx.glance.layout | Android Developers Android Jetpack Glance 1.0.0 : problems updating widget - Stack Overflow Unlock the Secret: Real-Time Updates for Glance Widgets on Android! | by Fabio Chiarani | Medium ","link":"https://LiarrDev.github.io/post/Empowers-Compose-AppWidget-with-Jetpack-Glance /"},{"title":"HarmonyOS ArkWeb æœ‰çº¿è°ƒè¯•","content":"æˆ‘ä»¬åœ¨è¿›è¡Œ Android å¼€å‘æ—¶ï¼Œå¦‚æœè¦è°ƒè¯• WebViewï¼Œé€šå¸¸åªéœ€è¦è¿æ¥ adbï¼Œç„¶åå°±å¯ä»¥æ‰“å¼€ Chrome DevTools è¿›è¡Œè°ƒè¯•ã€‚ è€Œåœ¨ HarmonyOS ä¸Šï¼Œè™½ç„¶æœ‰ç±»ä¼¼ adb çš„å·¥å…·ï¼šhdcï¼Œä½†æ˜¯è°ƒè¯• ArkWeb å´å¹¶ä¸æ–¹ä¾¿ã€‚ é¦–å…ˆéœ€è¦åœ¨éœ€è¦æ‰“å¼€è°ƒè¯•çš„é¡µé¢å¼€å¯å…è®¸è°ƒè¯•çš„å¼€å…³ï¼š @Entry(storage) @Component struct Index { ... aboutToAppear(): void { webview.WebviewController.setWebDebuggingAccess(BuildProfile.DEBUG) } } è¿™ä¸€æ­¥ä¸ Android æ— å¼‚ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ BuildProfile.DEBUG å¾ˆæ–¹ä¾¿åœ°åˆ¤æ–­å½“å‰æ˜¯å¦ä¸º DEBUG åŒ…ï¼Œå°±ä¸éœ€è¦åœ¨ä¸Šçº¿æ—¶å†å°†å…¶é‡ç½®ä¸º false äº†ã€‚ ç„¶åé€šè¿‡ hdc è¿æ¥è®¾å¤‡ï¼Œå¹¶è¿›å…¥ Shellï¼š âœ hdc shell æ¥ç€æŸ¥æ‰¾ç›¸å…³è¿›ç¨‹ï¼š âœ hdc shell âœ cat /proc/net/unix | grep devtools # 0: 00000002 0 10000 1 1 49902021 @webview_devtools_remote_32259 æ‰§è¡Œå‘½ä»¤åä¼šè¾“å‡º ArkWeb æ‰€åœ¨ Domain Socket ç«¯å£ã€‚ é€€å‡º Shellï¼š âœ hdc shell âœ exit å½“ç„¶æˆ‘ä»¬ä¹Ÿæœ‰å…¶ä»–æ–¹å¼èƒ½å¤ŸæŸ¥è¯¢åˆ° Domain Socketï¼Œæ¯”å¦‚é€šè¿‡åŒ…åï¼š âœ hdc shell ps -ef | grep &quot;com.example.app&quot; # 20020109 32259 652 0 12:48:30 ? 00:09:04 com.example.app è¾“å‡ºçš„ç¬¬äºŒä¸ªå‚æ•°å°±æ˜¯æŸ¥è¯¢åˆ°çš„è¿›ç¨‹ IDã€‚ å°†æŸ¥è¯¢åˆ°çš„ Domain Socket è½¬å‘è‡³ç”µè„‘çš„ TCP 9222 ç«¯å£ï¼š âœ hdc fport tcp:9222 localabstract:webview_devtools_remote_32259 # Forwardport result:OK ä¸€èˆ¬è¾“å‡º OK å°±ä»£è¡¨è½¬å‘æˆåŠŸäº†ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨ä¸‹é¢çš„å‘½ä»¤æ£€æŸ¥ä¸€ä¸‹ âœ hdc fport ls # FMR0223A24001263 tcp:9222 localabstract:webview_devtools_remote_32259 [Forward] æœ€åå°±å¯ä»¥åœ¨ç†Ÿæ‚‰çš„ Chrome DevTools ä¸Šè¿›è¡Œè°ƒè¯•äº†ã€‚ ç”±äºæ­¥éª¤æ¯”è¾ƒç¹çï¼Œå®˜æ–¹ä¹Ÿæä¾›äº†ä¾¿æ·è„šæœ¬æ”¯æŒä¸€é”®è¿è¡Œï¼Œæœ‰éœ€è¦çš„æœ‹å‹å¯ä»¥å‰å¾€å®˜æ–¹æ–‡æ¡£è‡ªè¡Œä¸‹è½½ã€‚ ä» API version 20 å¼€å§‹ï¼Œå®˜æ–¹ä¹Ÿæ”¯æŒæŒ‡å®šç«¯å£å·æ— çº¿è°ƒè¯•ï¼Œç®€åŒ–è°ƒè¯•æµç¨‹ã€‚ ","link":"https://LiarrDev.github.io/post/Debug-HarmonyOS-ArkWeb-via-HDC/"},{"title":"Android åŸºäº WebKit çš„ Hybrid äº¤äº’æ–¹æ¡ˆ","content":"èƒŒæ™¯ ä¹‹å‰ã€Android WebView å’Œ JavaScript äº¤äº’ã€ä¸€æ–‡ä»‹ç»äº†æ™®é Hybrid å¼€å‘åœºæ™¯ä¸‹ Android å’Œ JavaScript çš„é€šä¿¡æ–¹å¼ï¼Œç›¸ä¿¡ç»å¤§å¤šæ•°é¡¹ç›®éƒ½æ˜¯ä½¿ç”¨è¿™ç§æ–¹å¼è¿›è¡Œäº¤äº’çš„ï¼Œä½†æ˜¯è¿™ç§æ–¹æ¡ˆå­˜åœ¨ä¸€äº›å®‰å…¨å’Œæ€§èƒ½é—®é¢˜ã€‚ è€Œ JetPack ç»™æˆ‘ä»¬å¸¦æ¥çš„ WebKit åº“æä¾›äº†ä¸€ç§æ–°çš„äº¤äº’æ–¹æ¡ˆã€‚ å¯¼å…¥ä¾èµ– dependencies { implementation(&quot;androidx.webkit:webkit:1.14.0&quot;) } Android å‘ JavaScript å‘é€æ¶ˆæ¯ Android ç«¯ä»£ç å¦‚ä¸‹ï¼š class MainActivity : AppCompatActivity() { ... private fun postMessage(msg: String) { if (WebViewFeature.isFeatureSupported(WebViewFeature.POST_WEB_MESSAGE)) { WebViewCompat.postWebMessage( binding.webview, WebMessageCompat(msg), HOST.toUri() ) } } companion object { const val HOST = &quot;http://192.168.1.108:5500&quot; } } å…ˆåˆ¤æ–­ WebView æ˜¯å¦æ”¯æŒæ­¤æ–¹å¼å‘é€æ¶ˆæ¯ï¼Œç„¶åè°ƒç”¨ WebViewCompat çš„ postWebMessage() å‘é€ï¼Œè¯¥å‡½æ•°æ¥æ”¶ 3 ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ WebViewï¼Œä¸ç”¨èµ˜è¿°ï¼Œç¬¬äºŒä¸ªæ˜¯æ¶ˆæ¯çš„åŒ…è£…ç±» WebMessageCompatï¼Œæˆ‘ä»¬ä¼ ä¸€ä¸ª String ç±»å‹çš„æ¶ˆæ¯å³å¯ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ç”¨äºé™åˆ¶å“ªä¸ªç«™æºå¯ä»¥æ¥æ”¶æˆ‘ä»¬çš„æ¶ˆæ¯ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼ è‡ªæœ‰çš„åŸŸåï¼Œä¸é™åˆ¶çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨é€šé…ç¬¦ &quot;*&quot; ä»£æ›¿ã€‚ åœ¨ H5 ç«¯ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•ç›‘å¬ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... window.addEventListener(&quot;message&quot;, function (event) { console.log(&quot;æ”¶åˆ°æ¶ˆæ¯:&quot;, event.data) }, false) &lt;/script&gt; ... &lt;/html&gt; é™¤äº†ç®€å•çš„ String ç±»å‹ï¼Œå®ƒè¿˜æ”¯æŒå­—èŠ‚æµï¼Œè¿™åœ¨æ–‡ä»¶ä¼ è¾“ä¸­ååˆ†æœ‰ç”¨ã€‚ ä¿®æ”¹ Android ç«¯ä»£ç å¦‚ä¸‹ï¼š class MainActivity : AppCompatActivity() { ... private fun postArrayBuffer(arrayBuffer: ByteArray) { if (WebViewFeature.isFeatureSupported(WebViewFeature.POST_WEB_MESSAGE)) { if (WebViewFeature.isFeatureSupported(WebViewFeature.WEB_MESSAGE_ARRAY_BUFFER)) { WebViewCompat.postWebMessage( binding.webview, WebMessageCompat(arrayBuffer), HOST.toUri() ) } } } companion object { const val HOST = &quot;http://192.168.1.108:5500&quot; } } éœ€è¦æ³¨æ„ï¼Œå‘é€å­—èŠ‚æµéœ€è¦åˆ¤æ–­æ˜¯å¦æ”¯æŒ WebViewFeature.WEB_MESSAGE_ARRAY_BUFFERã€‚ å‡å¦‚ä¼ é€ä¸€ä¸ªå›¾ç‰‡ï¼ŒH5 ç«¯ç›‘å¬åå¯ä»¥è§£æï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... window.addEventListener(&quot;message&quot;, function (event) { ... if (data instanceof ArrayBuffer) { const blob = new Blob([data], { type: &quot;image/png&quot; }); const url = URL.createObjectURL(blob); const img = new Image(); img.src = url; document.body.appendChild(img); } }, false) &lt;/script&gt; ... &lt;/html&gt; JavaScript å‘ Android ç«¯å‘é€æ¶ˆæ¯ Android ç«¯è®¾ç½®ç›‘å¬ï¼š class MainActivity : AppCompatActivity() { ... private fun addWebMessageListener() { if (WebViewFeature.isFeatureSupported(WebViewFeature.WEB_MESSAGE_LISTENER)) { WebViewCompat.addWebMessageListener(binding.webview, &quot;Android&quot;, setOf(HOST)) { view, message, sourceOrigin, isMainFrame, replyProxy -&gt; Log.e(&quot;moji&quot;, &quot;Android ç«¯æ”¶åˆ°æ¶ˆæ¯ï¼š${message.data}&quot;) // æ”¶åˆ°æ¶ˆæ¯åå¯ä»¥å›å¤ replyProxy.postMessage(&quot;got the message @ ${System.currentTimeMillis()}&quot;) } } } companion object { const val HOST = &quot;http://192.168.1.108:5500&quot; } } é¦–å…ˆåŒæ ·éœ€è¦åˆ¤æ–­æ˜¯å¦æ”¯æŒç›‘å¬ï¼Œç„¶åè°ƒç”¨ WebViewCompat çš„ addWebMessageListener() æ–¹æ³•æ·»åŠ ç›‘å¬ï¼Œè¯¥å‡½æ•°æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ WebViewï¼Œä¸ç”¨èµ˜è¿°ï¼Œç¬¬äºŒä¸ªæ˜¯æ³¨å…¥ JS å¯¹è±¡çš„åç§°ï¼Œè¿™é‡Œå‘½åä¸º Androidï¼Œä¸‹é¢ä¼šç”¨åˆ°ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ç”¨æ¥æŒ‡å®šå“ªäº›ç«™æºä¼šæ³¨å…¥è¿™ä¸ªå¯¹è±¡ï¼Œç¬¬å››ä¸ªå‚æ•°å°±æ˜¯å›è°ƒæ¥å£ã€‚ æ”¶åˆ°æ¶ˆæ¯æˆ‘ä»¬å¯ä»¥è°ƒç”¨ JavaScriptReplyProxy å¯¹è±¡çš„ postMessage() ç»™ H5 ç«¯å‘ä¸ªå›å¤ã€‚ ç„¶å H5 ç«¯å°±å¯ä»¥å‘é€æ¶ˆæ¯äº†ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... function postMessage(message) { if (typeof Android !== &quot;undefined&quot;) { Android.postMessage(message); // æ¥æ”¶æ¥è‡ªå®¢æˆ·ç«¯çš„å›å¤ Android.onmessage = function (event) { console.log(&quot;Android.onmessage received: &quot;, event); } } } &lt;/script&gt; ... &lt;/html&gt; å…¶ä¸­ Android å°±æ˜¯ä¸Šæ–¹æˆ‘ä»¬æ³¨å…¥å¯¹è±¡çš„åç§°ï¼Œè°ƒç”¨ postMessage() å‘é€æ¶ˆæ¯å³å¯ï¼Œå‡å¦‚ Android ç«¯æä¾›äº†å›å¤ï¼Œé‚£ä¹ˆå¯ä»¥ç”¨ onmessage æ¥ç›‘å¬ã€‚ åŒæ ·æ”¯æŒå­—èŠ‚æµï¼ŒAndroid ç«¯ä¿®æ”¹å¦‚ä¸‹ï¼š class MainActivity : AppCompatActivity() { ... private fun addWebMessageListener() { if (WebViewFeature.isFeatureSupported(WebViewFeature.WEB_MESSAGE_LISTENER)) { WebViewCompat.addWebMessageListener(binding.webview, &quot;Android&quot;, setOf(HOST)) { view, message, sourceOrigin, isMainFrame, replyProxy -&gt; if (message.type == WebMessageCompat.TYPE_ARRAY_BUFFER) { val imageData = message.arrayBuffer ... } } } } companion object { const val HOST = &quot;http://192.168.1.108:5500&quot; } } é€šè¿‡ getType() åˆ¤æ–­å¦‚æœæ˜¯å­—èŠ‚æµï¼Œå°±ç›´æ¥ä» WebMessageCompat ä¸­å–å‡ºæ•°æ®å³å¯ã€‚ H5 ç«¯ä½¿ç”¨åŒæ ·çš„æ–¹å¼å‘é€å­—èŠ‚æµå°±å¯ä»¥ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... function postArrayBuffer(buffer) { if (typeof Android !== &quot;undefined&quot;) { Android.postMessage(buffer); } } &lt;/script&gt; ... &lt;/html&gt; æ€»ç»“ è¿™ç§æ–¹å¼å®‰å…¨ï¼Œä½†æ˜¯éœ€è¦åˆ¤æ–­æ˜¯å¦æ”¯æŒï¼ˆé—æ†¾çš„æ˜¯å›½å†…å¤§å¤šæ•°ç³»ç»Ÿ WebView å‡çº§è¿›åº¦æ‹–æ²“ï¼‰ï¼Œä¸€æ¥æ¯”è¾ƒç¹çï¼ŒäºŒæ¥åœ¨ä¸æ”¯æŒçš„è®¾å¤‡ä¸Šä»è¦å¯»æ±‚å…¶ä»–è§£å†³æ–¹æ¡ˆï¼Œå¢åŠ ç»´æŠ¤æˆæœ¬ã€‚ ä¸è¿‡ç›®å‰å…¶ä»–å¼€å‘å¹³å°æ¯”å¦‚ iOSã€HarmonyOSã€Flutter ç­‰äº¦é‡‡ç”¨ç±»ä¼¼çš„æ–¹æ¡ˆè¿›è¡Œé€šä¿¡ï¼Œä¸éš¾çœ‹å‡ºè¿™ç±»æ–¹æ¡ˆå°†ä¼šæˆä¸ºä¸»æµã€‚ ","link":"https://LiarrDev.github.io/post/Android-WebKit-Based-Hybrid-Interaction-Solution/"},{"title":"å¦‚ä½•è¿½è¸ª Android ä¾èµ–æ¥æº","content":"ç›¸ä¿¡åœ¨æ—¥å¸¸å¼€å‘ä¸­ä½ å·²ç»å‘ç°ï¼Œå½“æˆ‘ä»¬æ·»åŠ æŸä¸ªåº“çš„ä¾èµ–æ—¶ï¼Œå®ƒä¼šå¸®åŠ©æˆ‘ä»¬åŒæ­¥å®ƒæ‰€ä¾èµ–çš„åº“ï¼Œæ¯”å¦‚æˆ‘ä»¬å¸¸ç”¨çš„ç½‘ç»œè¯·æ±‚åº“ OkHttp å°±ä¾èµ–äº† Okioï¼Œä½†æˆ‘ä»¬ä¾èµ– OkHttp æ—¶å¹¶ä¸éœ€è¦æŠŠ Okio çš„ä¾èµ–ä¹Ÿæ·»åŠ è¿›å»ï¼Œè¿™æ˜¯ç”± POM å£°æ˜çš„ã€‚ è¿™ç§æ–¹æ¡ˆèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬å±è”½æ‰ä¸€äº›å¤šä½™çš„ä¿¡æ¯ï¼Œé™ä½ä¸Šæ‰‹é—¨æ§›ï¼Œä½†æœ‰æ—¶å€™å´ä¸åˆ©äºè¿½è¸ªã€‚ è¿½è¸ª AAR / JAR ä¾èµ– å¥½åœ¨ Android å®˜æ–¹å·²ç»å¸®æˆ‘ä»¬å‡†å¤‡å¥½ä¸€ä¸ª Gradle ä»»åŠ¡ç”¨äºåˆ†æé¡¹ç›®ä¸­çš„ä¾èµ–å…³ç³»ï¼Œæˆ‘ä»¬åªéœ€è¦ä¸€è¡Œå‘½ä»¤å°±å¯ä»¥æŸ¥è¯¢ã€‚ âœ ./gradlew app:dependencies æ§åˆ¶å°ä¸­ä¼šè¾“å‡ºæ•´ä¸ªé¡¹ç›®çš„ä¾èµ–æ ‘ï¼š +--- androidx.appcompat:appcompat:1.7.1 | +--- androidx.activity:activity:1.8.0 -&gt; 1.10.1 | | +--- androidx.annotation:annotation:1.8.1 | | | \\--- androidx.annotation:annotation-jvm:1.8.1 | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.7.10 -&gt; 1.8.22 | | | +--- org.jetbrains.kotlin:kotlin-stdlib-common:1.8.22 | | | \\--- org.jetbrains:annotations:13.0 -&gt; 23.0.0 | | +--- androidx.core:core-ktx:1.13.0 | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | +--- androidx.core:core:1.13.0 | | | | +--- androidx.annotation:annotation:1.6.0 -&gt; 1.8.1 (*) | | | | +--- androidx.annotation:annotation-experimental:1.4.0 | | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.7.10 -&gt; 1.8.22 (*) | | | | +--- androidx.lifecycle:lifecycle-runtime:2.6.2 | | | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | | +--- androidx.arch.core:core-common:2.2.0 | | | | | | \\--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 | | | | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4 -&gt; 1.7.3 | | | | | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-core:1.7.3 | | | | | | | | \\--- org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:1.7.3 | | | | | | | | +--- org.jetbrains:annotations:23.0.0 | | | | | | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-bom:1.7.3 | | | | | | | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3 (c) | | | | | | | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-core-jvm:1.7.3 (c) | | | | | | | | | \\--- org.jetbrains.kotlinx:kotlinx-coroutines-core:1.7.3 (c) | | | | | | | | +--- org.jetbrains.kotlin:kotlin-stdlib-common:1.8.20 -&gt; 1.8.22 | | | | | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.20 -&gt; 1.8.22 | | | | | | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.22 (*) | | | | | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib-jdk7:1.8.22 | | | | | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.8.22 (*) | | | | | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-bom:1.7.3 (*) | | | | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib-jdk8:1.8.20 -&gt; 1.8.22 (*) | | | | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 (c) | | | | | | +--- androidx.lifecycle:lifecycle-runtime:2.6.2 (c) | | | | | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.2 (c) | | | | | | +--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.6.2 (c) | | | | | | \\--- androidx.lifecycle:lifecycle-livedata:2.6.2 (c) | | | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 (c) | | | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 (c) | | | | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.2 (c) | | | | | +--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.6.2 (c) | | | | | \\--- androidx.lifecycle:lifecycle-livedata:2.6.2 (c) | | | | +--- androidx.versionedparcelable:versionedparcelable:1.1.1 | | | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | | \\--- androidx.collection:collection:1.0.0 -&gt; 1.1.0 | | | | | \\--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.8.22 (*) | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.8.22 (*) | | +--- androidx.core:core-viewtree:1.0.0 | | | +--- org.jetbrains.kotlin:kotlin-stdlib -&gt; 1.8.22 (*) | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.8.22 (c) | | +--- androidx.lifecycle:lifecycle-common:2.6.1 -&gt; 2.6.2 (*) | | +--- androidx.lifecycle:lifecycle-runtime:2.6.1 -&gt; 2.6.2 (*) | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.1 -&gt; 2.6.2 | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-runtime:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.6.2 (c) | | | \\--- androidx.lifecycle:lifecycle-livedata:2.6.2 (c) | | +--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.6.1 -&gt; 2.6.2 | | | +--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | | +--- androidx.core:core-ktx:1.2.0 -&gt; 1.13.0 (*) | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 | | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 (*) | | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 (c) | | | | +--- androidx.lifecycle:lifecycle-runtime:2.6.2 (c) | | | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.2 (c) | | | | +--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.6.2 (c) | | | | \\--- androidx.lifecycle:lifecycle-livedata:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.2 (*) | | | +--- androidx.savedstate:savedstate:1.2.1 | | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | +--- org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4 -&gt; 1.7.3 (*) | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-runtime:2.6.2 (c) | | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.2 (c) | | | \\--- androidx.lifecycle:lifecycle-livedata:2.6.2 (c) | | +--- androidx.savedstate:savedstate:1.2.1 (*) | | +--- org.jetbrains.kotlin:kotlin-stdlib -&gt; 1.8.22 (*) | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.8.22 (c) | +--- androidx.annotation:annotation:1.3.0 -&gt; 1.8.1 (*) | +--- androidx.appcompat:appcompat-resources:1.7.1 | | +--- androidx.annotation:annotation:1.2.0 -&gt; 1.8.1 (*) | | +--- androidx.core:core:1.6.0 -&gt; 1.13.0 (*) | | +--- androidx.vectordrawable:vectordrawable:1.1.0 | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | +--- androidx.core:core:1.1.0 -&gt; 1.13.0 (*) | | | \\--- androidx.collection:collection:1.1.0 (*) | | +--- androidx.vectordrawable:vectordrawable-animated:1.1.0 | | | +--- androidx.vectordrawable:vectordrawable:1.1.0 (*) | | | +--- androidx.interpolator:interpolator:1.0.0 | | | | \\--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | | \\--- androidx.collection:collection:1.1.0 (*) | | \\--- androidx.appcompat:appcompat:1.7.1 (c) | +--- androidx.core:core:1.13.0 (*) | +--- androidx.cursoradapter:cursoradapter:1.0.0 | | \\--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | +--- androidx.drawerlayout:drawerlayout:1.0.0 -&gt; 1.1.1 | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | +--- androidx.core:core:1.2.0 -&gt; 1.13.0 (*) | | \\--- androidx.customview:customview:1.1.0 | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | \\--- androidx.core:core:1.3.0 -&gt; 1.13.0 (*) | +--- androidx.fragment:fragment:1.5.4 | | +--- androidx.activity:activity:1.5.1 -&gt; 1.10.1 (*) | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | +--- androidx.annotation:annotation-experimental:1.0.0 -&gt; 1.4.0 (*) | | +--- androidx.collection:collection:1.1.0 (*) | | +--- androidx.core:core-ktx:1.2.0 -&gt; 1.13.0 (*) | | +--- androidx.lifecycle:lifecycle-livedata-core:2.5.1 -&gt; 2.6.2 (*) | | +--- androidx.lifecycle:lifecycle-viewmodel:2.5.1 -&gt; 2.6.2 (*) | | +--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.5.1 -&gt; 2.6.2 (*) | | +--- androidx.loader:loader:1.0.0 | | | +--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | | +--- androidx.core:core:1.0.0 -&gt; 1.13.0 (*) | | | +--- androidx.lifecycle:lifecycle-livedata:2.0.0 -&gt; 2.6.2 | | | | +--- androidx.arch.core:core-runtime:2.1.0 -&gt; 2.2.0 | | | | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | | | | \\--- androidx.arch.core:core-common:2.2.0 (*) | | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 (*) | | | | +--- org.jetbrains.kotlin:kotlin-stdlib:1.8.10 -&gt; 1.8.22 (*) | | | | +--- androidx.lifecycle:lifecycle-common:2.6.2 (c) | | | | +--- androidx.lifecycle:lifecycle-livedata-core:2.6.2 (c) | | | | +--- androidx.lifecycle:lifecycle-runtime:2.6.2 (c) | | | | +--- androidx.lifecycle:lifecycle-viewmodel:2.6.2 (c) | | | | \\--- androidx.lifecycle:lifecycle-viewmodel-savedstate:2.6.2 (c) | | | \\--- androidx.lifecycle:lifecycle-viewmodel:2.0.0 -&gt; 2.6.2 (*) | | +--- androidx.savedstate:savedstate:1.2.0 -&gt; 1.2.1 (*) | | +--- androidx.viewpager:viewpager:1.0.0 | | | +--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | | +--- androidx.core:core:1.0.0 -&gt; 1.13.0 (*) | | | \\--- androidx.customview:customview:1.0.0 -&gt; 1.1.0 (*) | | \\--- org.jetbrains.kotlin:kotlin-stdlib:1.6.21 -&gt; 1.8.22 (*) | +--- androidx.savedstate:savedstate:1.2.1 (*) | \\--- androidx.appcompat:appcompat-resources:1.7.1 (c) +--- com.google.android.material:material:1.12.0 | +--- androidx.activity:activity:1.8.0 -&gt; 1.10.1 (*) | +--- androidx.annotation:annotation:1.2.0 -&gt; 1.8.1 (*) | +--- androidx.appcompat:appcompat:1.6.1 -&gt; 1.7.1 (*) | +--- androidx.cardview:cardview:1.0.0 | | \\--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | +--- androidx.coordinatorlayout:coordinatorlayout:1.1.0 | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | +--- androidx.core:core:1.1.0 -&gt; 1.13.0 (*) | | +--- androidx.customview:customview:1.0.0 -&gt; 1.1.0 (*) | | \\--- androidx.collection:collection:1.0.0 -&gt; 1.1.0 (*) | +--- androidx.constraintlayout:constraintlayout:2.0.1 -&gt; 2.2.1 | +--- androidx.core:core:1.6.0 -&gt; 1.13.0 (*) | +--- androidx.drawerlayout:drawerlayout:1.1.1 (*) | +--- androidx.dynamicanimation:dynamicanimation:1.0.0 | | +--- androidx.core:core:1.0.0 -&gt; 1.13.0 (*) | | +--- androidx.collection:collection:1.0.0 -&gt; 1.1.0 (*) | | \\--- androidx.legacy:legacy-support-core-utils:1.0.0 | | +--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | +--- androidx.core:core:1.0.0 -&gt; 1.13.0 (*) | | +--- androidx.documentfile:documentfile:1.0.0 | | | \\--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | +--- androidx.loader:loader:1.0.0 (*) | | +--- androidx.localbroadcastmanager:localbroadcastmanager:1.0.0 | | | \\--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | | \\--- androidx.print:print:1.0.0 | | \\--- androidx.annotation:annotation:1.0.0 -&gt; 1.8.1 (*) | +--- androidx.annotation:annotation-experimental:1.0.0 -&gt; 1.4.0 (*) | +--- androidx.fragment:fragment:1.2.5 -&gt; 1.5.4 (*) | +--- androidx.lifecycle:lifecycle-runtime:2.0.0 -&gt; 2.6.2 (*) | +--- androidx.recyclerview:recyclerview:1.0.0 -&gt; 1.1.0 | | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | | +--- androidx.core:core:1.1.0 -&gt; 1.13.0 (*) | | +--- androidx.customview:customview:1.0.0 -&gt; 1.1.0 (*) | | \\--- androidx.collection:collection:1.0.0 -&gt; 1.1.0 (*) | +--- androidx.resourceinspection:resourceinspection-annotation:1.0.1 | +--- androidx.transition:transition:1.5.0 | | +--- androidx.annotation:annotation:1.2.0 -&gt; 1.8.1 (*) | | \\--- androidx.core:core:1.13.0 (*) | +--- androidx.vectordrawable:vectordrawable:1.1.0 (*) | \\--- androidx.viewpager2:viewpager2:1.0.0 | +--- androidx.annotation:annotation:1.1.0 -&gt; 1.8.1 (*) | +--- androidx.fragment:fragment:1.1.0 -&gt; 1.5.4 (*) | +--- androidx.recyclerview:recyclerview:1.1.0 (*) | +--- androidx.core:core:1.1.0 -&gt; 1.13.0 (*) | \\--- androidx.collection:collection:1.1.0 (*) +--- androidx.activity:activity:1.10.1 (*) +--- androidx.constraintlayout:constraintlayout:2.2.1 è¿½è¸ª SO ä¾èµ– åœ¨æ·»åŠ çš„ AAR ä¾èµ–ä¸­è¿˜å¯èƒ½å­˜åœ¨ SO åº“ï¼Œè¿™è¿½è¸ªèµ·æ¥å°±ç›¸å¯¹éº»çƒ¦ä¸€äº›ï¼Œç›¸ä¿¡è¿‘æœŸé€‚é… Android 16KB Page Size çš„å°ä¼™ä¼´å¯èƒ½æ·±æœ‰ä½“ä¼šã€‚ æˆ‘ç›®å‰æ²¡æ‰¾åˆ°å®˜æ–¹æœ‰ç±»ä¼¼çš„ä»»åŠ¡ä¾›æˆ‘ä»¬ä¸€é”®è°ƒç”¨ï¼Œæ‰€ä»¥å†™äº†ä¸ªä»»åŠ¡ï¼š def variantName = &quot;dokitDebug&quot; def soName = &quot;librtmp-jni.so&quot; android.applicationVariants.all { variant -&gt; if (variant.name != variantName) return // åªå¤„ç†ä½ å…³å¿ƒçš„å˜ä½“ tasks.register(&quot;findSoOwner${variant.name.capitalize()}&quot;) { group = &quot;verification&quot; description = &quot;æŸ¥æ‰¾ ${soName} æ¥è‡ªå“ªä¸ª AAR&quot; def artifacts = variant.runtimeConfiguration.incoming.artifacts doLast { artifacts.artifacts.each { artifact -&gt; def file = artifact.file if (file.name.endsWith(&quot;.aar&quot;)) { new java.util.zip.ZipFile(file).withCloseable { zf -&gt; zf.entries().each { entry -&gt; if (entry.name.endsWith(soName)) { println &quot;Found ${soName} in ${artifact.id.componentIdentifier} (${file.name})&quot; } } } } } } } } å°†æœ€å¼€å§‹çš„ä¸¤ä¸ªå˜é‡è¦ä¿®æ”¹ä¸ºè‡ªå·±å®é™…é¡¹ç›®ä¸­çš„å†…å®¹ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±åœ¨ä¸€ä¸ªåä¸º dokitDebug çš„å˜ä½“ä¸‹æŸ¥è¯¢ librtmp-jni.so è¿™ä¸ª SO çš„æ¥æºï¼Œåªéœ€åœ¨ç»ˆç«¯ä¸­æ‰§è¡Œå‘½ä»¤ï¼š âœ ./gradlew :app:findSoOwner å°±å¯ä»¥å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š &gt; Task :app:findSoOwnerDokitDebug Found librtmp-jni.so in io.antmedia:rtmp-client:3.2.0 (rtmp-client-3.2.0.aar) Found librtmp-jni.so in io.antmedia:rtmp-client:3.2.0 (rtmp-client-3.2.0.aar) Found librtmp-jni.so in io.antmedia:rtmp-client:3.2.0 (rtmp-client-3.2.0.aar) Found librtmp-jni.so in io.antmedia:rtmp-client:3.2.0 (rtmp-client-3.2.0.aar) æˆ‘ä»¬å¯ä»¥åœ¨ç»“æœä¸­çœ‹åˆ°æŸ¥æ‰¾çš„ SO åº“æ¥æºäºå“ªä¸ªä¾èµ–ï¼Œç»“æœå¯èƒ½ä¼šè¾“å‡ºå¤šæ¬¡ã€‚ æŸ¥è¯¢åˆ°çš„ä¾èµ–ä¹Ÿè®¸å¹¶ä¸æ˜¯ä½ è‡ªå·±æ·»åŠ çš„ï¼Œè¿™æ—¶å€™åªéœ€å†ä½¿ç”¨ä¸Šä¸€èŠ‚æåˆ°çš„å‘½ä»¤æ‰“å°ä¾èµ–æ ‘ï¼Œå°±å¯ä»¥è¿½è¸ªåˆ°æ ¹ä¾èµ–äº†ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Trace-Android-Dependency-Sources/"},{"title":"ç”¨ DataStore å°†ä½ æ‹‰å‡º SharedPreferences æ³¥æ½­","content":"ç®€ä»‹ DataStore æ˜¯ä¸€ç§æ•°æ®å­˜å‚¨è§£å†³æ–¹æ¡ˆï¼Œå…è®¸æ‚¨ä½¿ç”¨ ProtoBuf å­˜å‚¨é”®å€¼å¯¹æˆ–ç±»å‹åŒ–å¯¹è±¡ï¼Œç”± Android å®˜æ–¹åœ¨ 2020 å¹´æ¨å‡ºï¼Œå¹¶åœ¨ 2021 å¹´æ­£å¼å‘å¸ƒçš„åº“ï¼Œæ—¨åœ¨æ›¿ä»£æœå½¹å¤šå¹´çš„ SharedPreferencesã€‚ SharedPreferences çš„ç¼ºé™· æ–‡ä»¶æ•°æ®çš„è¯»å–åŠ é”ï¼Œå¦‚æœ SharedPreferences æ–‡ä»¶æœªè¢«åŠ è½½æˆ–è§£æåˆ°å†…å­˜ä¸­ï¼Œè¯»å†™æ“ä½œéƒ½éœ€è¦ç­‰å¾…ï¼Œå¯èƒ½ä¼šå¯¹ UI çº¿ç¨‹æµç•…åº¦é€ æˆä¸€å®šå½±å“ï¼Œç”šè‡³ANR. åœ¨ä¿å­˜æ•°æ®æ—¶ï¼Œæ— è®ºæ˜¯ commit() è¿˜æ˜¯ apply() éƒ½æœ‰å¯èƒ½å¼•å‘ ANR é—®é¢˜ã€‚ æ²¡æœ‰é”™è¯¯æç¤ºæœºåˆ¶ã€‚ DataStore çš„ä¼˜ç‚¹ åŸºäº Flow å®ç°ï¼Œä¿è¯ä¸»çº¿ç¨‹çš„å®‰å…¨æ€§ã€‚ ä»¥äº‹åŠ¡æ–¹å¼å¤„ç†æ›´æ–°æ•°æ®ã€‚ å¯ä»¥ç›‘å¬åˆ°æ“ä½œæˆåŠŸæˆ–è€…å¤±è´¥ç»“æœã€‚ å¤šè¿›ç¨‹ä½¿ç”¨ã€‚ Preferences DataStore å’Œ Proto DataStore DataStore æä¾›ä¸¤ç§ä¸åŒçš„å®ç°ï¼šPreferences DataStore å’Œ Proto DataStoreã€‚ Preferences DataStore ä½¿ç”¨é”®å­˜å‚¨å’Œè®¿é—®æ•°æ®ã€‚æ­¤å®ç°ä¸éœ€è¦é¢„å®šä¹‰çš„æ¶æ„ï¼Œä¹Ÿä¸ç¡®ä¿ç±»å‹å®‰å…¨ã€‚ Proto DataStore å°†æ•°æ®ä½œä¸ºè‡ªå®šä¹‰æ•°æ®ç±»å‹çš„å®ä¾‹è¿›è¡Œå­˜å‚¨ã€‚æ­¤å®ç°è¦æ±‚æ‚¨ä½¿ç”¨ ProtoBuf æ¥å®šä¹‰æ¶æ„ï¼Œä½†å¯ä»¥ç¡®ä¿ç±»å‹å®‰å…¨ã€‚ Preferences DataStore Preferences DataStore ç”¨äºå­˜å‚¨é”®å€¼å¯¹ï¼Œç›¸å½“äº SharedPreferences çš„æ”¹è‰¯ç‰ˆã€‚ dependencies { implementation(&quot;androidx.datastore:datastore-preferences:1.1.0&quot;) } å®ä¾‹ï¼š // At the top level of your kotlin file: val Context.dataStore: DataStore&lt;Preferences&gt; by preferencesDataStore(name = &quot;settings&quot;) è¯»å–ï¼š val EXAMPLE_COUNTER = intPreferencesKey(&quot;example_counter&quot;) val exampleCounterFlow: Flow&lt;Int&gt; = context.dataStore.data.map { preferences -&gt; // No type safety. preferences[EXAMPLE_COUNTER] ?: 0 } æ”¯æŒçš„ç±»å‹åŸºæœ¬ä¸ SharedPreferences ä¸€è‡´ã€‚ å†™å…¥ï¼š suspend fun incrementCounter() { context.dataStore.edit { settings -&gt; val currentCounterValue = settings[EXAMPLE_COUNTER] ?: 0 settings[EXAMPLE_COUNTER] = currentCounterValue + 1 } } è½¬æ¢å—ä¸­çš„æ‰€æœ‰ä»£ç å‡è¢«è§†ä¸ºå•ä¸ªäº‹åŠ¡ã€‚ Proto DataStore Proto DataStore ç”¨äºå­˜å‚¨ç±»å‹åŒ–å¯¹è±¡ï¼Œç›¸å½“äº SharedPreferences çš„å‡çº§ç‰ˆã€‚å®ƒä½¿ç”¨äº† Protocol Buffersã€‚ dependencies { implementation(&quot;androidx.datastore:datastore:1.1.0&quot;) } åœ¨ app/src/main/proto/ ç›®å½•ä¸‹é¢„å®šä¹‰ï¼š // Settings.proto syntax = &quot;proto3&quot;; option java_package = &quot;com.example.application&quot;; option java_multiple_files = true; message Settings { int32 example_counter = 1; } ç”¨äºå‘ŠçŸ¥ DataStore å¦‚ä½•è¯»å–å’Œå†™å…¥æ•°æ®çš„åºåˆ—åŒ–å™¨ï¼š object SettingsSerializer : Serializer&lt;Settings&gt; { override val defaultValue: Settings = Settings.getDefaultInstance() override suspend fun readFrom(input: InputStream): Settings { try { return Settings.parseFrom(input) } catch (e: InvalidProtocolBufferException) { throw CorruptionException(&quot;Cannot read proto.&quot;, e) } } override suspend fun writeTo(t: Settings, output: OutputStream) = t.writeTo(output) } å®ä¾‹ï¼š // At the top level of your kotlin file: val Context.settingsDataStore: DataStore&lt;Settings&gt; by dataStore( fileName = &quot;settings.pb&quot;, serializer = SettingsSerializer ) è¯»å–ï¼š val exampleCounterFlow: Flow&lt;Int&gt; = context.settingsDataStore.data.map { settings -&gt; // The exampleCounter property is generated from the proto schema. settings.exampleCounter } å†™å…¥ï¼š suspend fun incrementCounter() { context.settingsDataStore.updateData { it.toBuilder() .setExampleCounter(it.exampleCounter + 1) .build() } } åŒæ ·ä»¥äº‹åŠ¡æ–¹å¼æ›´æ–°æ•°æ®ã€‚ ä» SharedPreferences ä¸­è¿ç§» private val Context.migrationDataStore: DataStore&lt;Preferences&gt; by preferencesDataStore( name = PREF_FILE_NAME, produceMigrations = { listOf(SharedPreferencesMigration(it, PREF_FILE_NAME)) } ) æ•°æ®çš„è¿ç§»åœ¨åˆ›å»º DataStore çš„è¿‡ç¨‹ä¸­è‡ªåŠ¨å®Œæˆï¼Œè¿ç§»å®Œæˆåï¼ŒåŸ SharedPreferences çš„ XML æ–‡ä»¶ä¼šè¢«åˆ é™¤ã€‚ å¯¹æ¯” MMKV MMKV æ˜¯å¾®ä¿¡å›¢é˜Ÿå¼€æºçš„åŸºäº mmap å†…å­˜æ˜ å°„çš„ Key-Value ç»„ä»¶ï¼Œåº•å±‚åºåˆ—åŒ–ä¸ååºåˆ—åŒ–åŒæ ·ä½¿ç”¨ ProtoBufï¼Œæ€§èƒ½é«˜ï¼Œç¨³å®šæ€§å¼ºã€‚ è™½ç„¶ MMKV çš„åˆè¡·å¹¶ä¸æ˜¯æ›¿ä»£ SharedPreferencesï¼Œä½†æ˜¯åŒæ ·ä½œä¸º Key-Value ç»„ä»¶ï¼Œå¤§å¤šæ•°äººéƒ½å°† MMKV è§†ä¸º SharedPreferences çš„æ›¿ä»£å“ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­ä¹Ÿå¯¹ MMKV å’Œ SharedPreferences çš„æ€§èƒ½è¿›è¡Œäº†å¯¹æ¯”ï¼š äº‹å®ä¸Šï¼ŒMMKV å¹¶ä¸æ˜¯ä»»ä½•æ—¶å€™éƒ½æ›´å¼ºã€‚ç”±äºå†…å­˜æ˜ å°„è¿™ç§æ–¹æ¡ˆæ˜¯è‡ªè¡Œç®¡ç†ä¸€å—ç‹¬ç«‹çš„å†…å­˜ï¼Œæ‰€ä»¥å®ƒåœ¨å°ºå¯¸çš„ä¼¸ç¼©ä¸Šé¢å°±æ¯”è¾ƒå—é™ï¼Œè¿™å°±å¯¼è‡´å®ƒåœ¨å†™å¤§ä¸€ç‚¹çš„æ•°æ®æ—¶ï¼Œé€Ÿåº¦ä¼šæ…¢ã€‚ å¦ä¸€æ–¹é¢ï¼Œè¯¥å†™å…¥è€—æ—¶å¯¹äºæ­£å¸¸å¼€å‘æ¥è¯´å¹¶éç‰¹åˆ«é‡è¦ï¼Œç•Œé¢çš„æµç•…åº¦æ›´åœ¨æ„ä¸»çº¿ç¨‹çš„è€—æ—¶ï¼Œè€Œ SharedPreferences æœ¬èº«ä¹Ÿæä¾›äº†å¼‚æ­¥å†™å…¥çš„ APIï¼Œæ‰€ä»¥å®ƒä»¬éƒ½è¶³å¤Ÿå¿«äº†ã€‚ä½† MMKV çš„è¯ç”Ÿåœºæ™¯å†³å®šäº†ï¼Œå®ƒæ›´åœ¨æ„åŒæ­¥å¤„ç†æœºåˆ¶ä¸‹çš„è€—æ—¶ã€‚ MMKV è¿˜æœ‰ä¸€ä¸ªç¼ºé™·â€”â€”ä¸¢æ•°æ®ã€‚æ“ä½œç³»ç»Ÿåœ¨å¾€ç£ç›˜å†™æ•°æ®çš„è¿‡ç¨‹ä¸­å‘ç”Ÿæ„å¤–éƒ½ä¼šå¯¼è‡´æ–‡ä»¶æŸåï¼Œè¿™ç§é—®é¢˜ä¸å¯é¿å…ã€‚MMKV è™½ç„¶ç”±äºåº•å±‚æœºåˆ¶çš„åŸå› ï¼Œåœ¨ç¨‹åºå´©æºƒçš„æ—¶å€™ä¸ä¼šå½±å“æ•°æ®å¾€ç£ç›˜çš„å†™å…¥ï¼Œä½†æ–­ç”µå…³æœºä¹‹ç±»çš„æ“ä½œç³»ç»Ÿçº§åˆ«çš„å´©æºƒï¼ŒMMKV å°±æ²¡åŠæ³•äº†ï¼Œæ–‡ä»¶ç…§æ ·ä¼šæŸåã€‚ å¯¹äºè¿™ç§æ–‡ä»¶æŸåï¼ŒSharedPreferences å’Œ DataStore çš„åº”å¯¹æ–¹å¼æ˜¯åœ¨æ¯æ¬¡å†™å…¥æ–°æ•°æ®ä¹‹å‰éƒ½å¯¹ç°æœ‰æ–‡ä»¶åšä¸€æ¬¡è‡ªåŠ¨å¤‡ä»½ï¼Œè¿™æ ·åœ¨å‘ç”Ÿäº†æ„å¤–å‡ºç°äº†æ–‡ä»¶æŸåä¹‹åï¼Œå®ƒä»¬å°±ä¼šæŠŠå¤‡ä»½çš„æ•°æ®æ¢å¤è¿‡æ¥ã€‚ è€Œ MMKVï¼Œæ²¡æœ‰è¿™ç§è‡ªåŠ¨çš„å¤‡ä»½å’Œæ¢å¤ï¼Œé‚£ä¹ˆå½“æ–‡ä»¶å‘ç”Ÿäº†æŸåï¼Œæ•°æ®å°±ä¸¢äº†ï¼Œä¹‹å‰ä¿å­˜çš„å„ç§ä¿¡æ¯åªèƒ½è¢«é‡ç½®ã€‚æ®å®˜æ–¹ç»Ÿè®¡ï¼ŒiOS å¾®ä¿¡å¹³å‡çº¦æœ‰ 70 ä¸‡æ—¥æ¬¡çš„æ•°æ®æ ¡éªŒä¸é€šè¿‡ã€‚ å› æ­¤ MMKV æ›´é€‚åˆåŒæ­¥é«˜é¢‘å†™å…¥éé‡è¦ä¿¡æ¯çš„åœºæ™¯ã€‚ å‚è€ƒå†…å®¹ åº”ç”¨æ¶æ„ï¼šæ•°æ®å±‚ - DataStore - Android å¼€å‘è€… | App architecture | Android Developers ","link":"https://LiarrDev.github.io/post/DataStore-Pull-You-Out-of-SharedPreferences-Quagmire/"},{"title":"åœ¨ Android ä¸­ä½¿ç”¨ Protocol Buffers","content":"ç®€ä»‹ Protocol Buffersï¼ˆç®€ç§° Protobufï¼‰æ˜¯ Google å¼€å‘çš„ä¸€ç§ç‹¬ç«‹äºè¯­è¨€å’Œå¹³å°çš„ç»“æ„åŒ–æ•°æ®åºåˆ—åŒ–å¯æ‰©å±•æœºåˆ¶ã€‚å®ƒä¸ JSON ç±»ä¼¼ï¼Œåªæ˜¯ä½“ç§¯æ›´å°ã€é€Ÿåº¦æ›´å¿«ï¼Œè€Œä¸”èƒ½ç”Ÿæˆæœ¬åœ°è¯­è¨€ç»‘å®šã€‚æ‚¨åªéœ€å®šä¹‰ä¸€æ¬¡æ•°æ®çš„ç»“æ„åŒ–æ–¹å¼ï¼Œç„¶åå°±å¯ä»¥ä½¿ç”¨ç‰¹æ®Šç”Ÿæˆçš„æºä»£ç ï¼Œä½¿ç”¨å„ç§è¯­è¨€è½»æ¾åœ°å°†ç»“æ„åŒ–æ•°æ®å†™å…¥å„ç§æ•°æ®æµæˆ–ä»å„ç§æ•°æ®æµä¸­è¯»å–ç»“æ„åŒ–æ•°æ®ã€‚ Google æä¾›äº†å¤šç§è¯­è¨€çš„å®ç°ï¼Œæ¯ä¸€ç§å®ç°éƒ½åŒ…å«äº†ç›¸åº”è¯­è¨€çš„ç¼–è¯‘å™¨ä»¥åŠåº“æ–‡ä»¶ã€‚ç”±äºå®ƒæ˜¯ä¸€ç§äºŒè¿›åˆ¶çš„æ ¼å¼ï¼Œæ¯”ä½¿ç”¨ XML è¿›è¡Œæ•°æ®äº¤æ¢å¿«è®¸å¤šï¼ˆä½“ç§¯å° 3ï½10 å€ï¼Œé€Ÿåº¦å¿« 20ï½100 å€ï¼‰ã€‚ä½œä¸ºä¸€ç§æ•ˆç‡å’Œå…¼å®¹æ€§éƒ½å¾ˆä¼˜ç§€çš„äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“æ ¼å¼ï¼Œå¯ä»¥ç”¨äºè¯¸å¦‚ç½‘ç»œä¼ è¾“ã€é…ç½®æ–‡ä»¶ã€æ•°æ®å­˜å‚¨ç­‰è¯¸å¤šé¢†åŸŸã€‚ å®ƒæœ‰ä¸€ä¸ªéå¸¸æ£’çš„ç‰¹æ€§ï¼Œå³â€œå‘åâ€å…¼å®¹æ€§å¥½ï¼Œäººä»¬ä¸å¿…ç ´åå·²éƒ¨ç½²çš„ã€ä¾é â€œè€â€æ•°æ®æ ¼å¼çš„ç¨‹åºå°±å¯ä»¥å¯¹æ•°æ®ç»“æ„è¿›è¡Œå‡çº§ã€‚è¿™æ ·æ‚¨çš„ç¨‹åºå°±å¯ä»¥ä¸å¿…æ‹…å¿ƒå› ä¸ºæ¶ˆæ¯ç»“æ„çš„æ”¹å˜è€Œé€ æˆçš„å¤§è§„æ¨¡çš„ä»£ç é‡æ„æˆ–è€…è¿ç§»çš„é—®é¢˜ã€‚å› ä¸ºæ·»åŠ æ–°çš„æ¶ˆæ¯ä¸­çš„ field å¹¶ä¸ä¼šå¼•èµ·å·²ç»å‘å¸ƒçš„ç¨‹åºçš„ä»»ä½•æ”¹å˜ã€‚ Protobuf ä¸ XML å’Œ JSON ç›¸æ¯”ä¹Ÿæœ‰ä¸è¶³ä¹‹å¤„ã€‚ç”±äº XML å’Œ JSON å…·æœ‰æŸç§ç¨‹åº¦ä¸Šçš„è‡ªè§£é‡Šæ€§ï¼Œå®ƒå¯ä»¥è¢«äººç›´æ¥è¯»å–ç¼–è¾‘ï¼Œåœ¨è¿™ä¸€ç‚¹ä¸Š Protobuf ä¸è¡Œï¼Œå®ƒä»¥äºŒè¿›åˆ¶çš„æ–¹å¼å­˜å‚¨ã€‚ è¯­æ³• syntax = &quot;proto3&quot;; message SearchRequest { string query = 1; int32 page_number = 2; int32 results_per_page = 3; } ç¬¬ä¸€è¡Œè¯´æ˜ä½¿ç”¨çš„æ˜¯ proto3 è¯­æ³•ï¼šå¦‚æœä¸è¿™æ ·åšï¼ŒProtobuf ç¼–è¯‘å™¨ä¼šè®¤ä¸ºä½¿ç”¨çš„æ˜¯ proto2ã€‚è¿™å¿…é¡»æ˜¯æ–‡ä»¶ä¸­ç¬¬ä¸€è¡Œéç©ºã€éæ³¨é‡Šçš„å†…å®¹ã€‚ SearchRequest æŠ¥æ–‡å®šä¹‰æŒ‡å®šäº†ä¸‰ä¸ªå­—æ®µï¼ˆåç§°/å€¼å¯¹ï¼‰ï¼Œæ¯ä¸ªå­—æ®µä»£è¡¨ä¸€æ¡è¦åŒ…å«åœ¨æ­¤ç±»æŠ¥æ–‡ä¸­çš„æ•°æ®ã€‚æ¯ä¸ªå­—æ®µéƒ½æœ‰åç§°å’Œç±»å‹ã€‚ é¡»ä¸ºä¿¡æ¯å®šä¹‰ä¸­çš„æ¯ä¸ªå­—æ®µèµ‹äºˆä¸€ä¸ªä»‹äº 1 åˆ° 536,870,911ï¼ˆ229âˆ’12^{29} -1229âˆ’1ï¼‰ä¹‹é—´çš„æ•°å­—ï¼Œåœ¨è¯¥æŠ¥æ–‡ä¸­å¿…é¡»å”¯ä¸€ï¼Œç¼–å· 19,000 è‡³ 19,999 ä¿ç•™ç»™ Protocol Buffers å®ç°ã€‚ ä¸èƒ½ä½¿ç”¨ä»»ä½•å…ˆå‰ä¿ç•™çš„ç¼–å·ã€‚æ›´æ”¹å­—æ®µç¼–å·ç›¸å½“äºåˆ é™¤è¯¥å­—æ®µï¼Œç„¶ååˆ›å»ºä¸€ä¸ªç±»å‹ç›¸åŒä½†ç¼–å·ä¸åŒçš„æ–°å­—æ®µã€‚åˆ é™¤å­—æ®µå®šä¹‰æ—¶å¿…é¡»ä¿ç•™å·²åˆ é™¤çš„å­—æ®µç¼–å·ï¼Œå¦‚æœä¸ä¿ç•™å­—æ®µç¼–å·ï¼Œå¼€å‘äººå‘˜å°†æ¥æœ‰å¯èƒ½é‡æ–°ä½¿ç”¨è¯¥ç¼–å·ã€‚ ä½¿ç”¨ libs.versions.toml å®šä¹‰ç‰ˆæœ¬ï¼š [libraries] protobuf-protoc = { group = &quot;com.google.protobuf&quot;, name = &quot;protoc&quot;, version.ref = &quot;protobuf&quot; } protobuf-javalite = { group = &quot;com.google.protobuf&quot;, name = &quot;protobuf-javalite&quot;, version.ref = &quot;protobuf&quot; } [plugins] googleProtobuf = { id = &quot;com.google.protobuf&quot;, version.ref = &quot;protobufPlugin&quot; } é¡¹ç›®çš„ build.gradle.ktsï¼š plugins { // ... alias(libs.plugins.googleProtobuf) apply false } app çš„ build.gradle.ktsï¼š import com.google.protobuf.gradle.proto plugins { // ... alias(libs.plugins.googleProtobuf) } android { //... sourceSets { getByName(&quot;main&quot;).java.srcDir(&quot;src/main/java&quot;) getByName(&quot;main&quot;).proto { srcDir(&quot;src/main/proto&quot;) include(&quot;**/*.proto&quot;) } } } protobuf { protoc { artifact = libs.protoc.get().toString() } plugins { generateProtoTasks { all().forEach { it.builtins { create(&quot;java&quot;) { option(&quot;lite&quot;) } } } } } } dependencies { // ... implementation(libs.protobuf.protoc) implementation(libs.protobuf.javalite) } æ··æ·†é…ç½®ï¼š -keep class * extends com.google.protobuf.GeneratedMessageLite { *; } åœ¨ app/src/main/proto ç›®å½•ä¸­åˆ›å»º proto æ–‡ä»¶ï¼š å†…å®¹å¦‚ä¸‹ï¼š syntax = &quot;proto3&quot;; // å£°æ˜ proto åè®®ç‰ˆæœ¬ package com.example.proto; // å®šä¹‰ Protobuf è‡ªåŠ¨ç”Ÿæˆç±»çš„åŒ…å option java_package = &quot;com.example.proto&quot;; // Java ç±»æ‰€åœ¨çš„åŒ…å option java_outer_classname= &quot;SearchRequestProto&quot;; // å®šä¹‰ Protobuf è‡ªåŠ¨ç”Ÿæˆç±»çš„ç±»å message SearchRequest { string query = 1; int32 page_number = 2; int32 results_per_page = 3; } Build é¡¹ç›®ï¼Œä¼šåœ¨ app/build/generated/source/proto ä¸­ç”Ÿæˆå¯¹åº”çš„ Java æ–‡ä»¶ï¼š ç”Ÿæˆçš„ Java æ–‡ä»¶å†…å®¹å¤ªé•¿ï¼Œå°±ä¸è´´åœ¨è¿™é‡Œäº†ï¼Œä½†æ˜¯ç»“æ„ç®€å•ï¼Œæ— éå°±æ˜¯ä¸€å † Getter å’Œ Setter ä»¥åŠä¸€äº›è§£ææ–¹æ³•ï¼Œç›¸ä¿¡ä½ ä¹Ÿå¯ä»¥è½»æ˜“è¯»æ‡‚ã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨ä»£ç ä¸­è°ƒç”¨å®ƒï¼š @Test fun proto() { // åºåˆ—åŒ– val request = SearchRequestProto.SearchRequest.newBuilder() .setQuery(&quot;Proto&quot;) .setPageNumber(1) .setResultsPerPage(10) .build() val bytes = request.toByteArray() // ååºåˆ—åŒ– try { val result = SearchRequestProto.SearchRequest.parseFrom(bytes) val query = result.query val pageNumber = result.pageNumber val resultPerPage = result.resultsPerPage } catch (e: Exception) { e.printStackTrace() } } åºåˆ—åŒ–åˆ©ç”¨çš„æ˜¯ Builder æ¨¡å¼ï¼Œæ„å»ºæˆä¸€ä¸ª SearchRequest å¯¹è±¡åï¼Œå†å°†å…¶è½¬æ¢æˆ ByteArrayã€‚ååºåˆ—åŒ–åˆ™åˆ©ç”¨ parseFrom() æ–¹æ³•å°† ByteArray æˆ–è€… InputStream è½¬æˆ SearchRequest å¯¹è±¡ï¼ŒparseFrom() æ–¹æ³•å°±æ˜¯åœ¨ä¸Šæ–¹ç”Ÿæˆçš„ Java æ–‡ä»¶ä¸­è‡ªåŠ¨å¸®æˆ‘ä»¬æ’å…¥çš„æ–¹æ³•ã€‚ å‚è€ƒå†…å®¹ Language Guide (proto 3) | Protocol Buffers Documentation ","link":"https://LiarrDev.github.io/post/Protocol-Buffers-Usage-on-Android/"},{"title":"Design Pattern: Builder","content":"å»ºé€ è€…æ¨¡å¼ï¼ˆBuilder Patternï¼Œä¹Ÿå«ç”Ÿæˆå™¨æ¨¡å¼ï¼‰æ˜¯æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒä¸ä¹‹å‰ä»‹ç»çš„ã€Design Pattern: Singletonã€å’Œã€Design Pattern: Factoryã€éƒ½å±äºåˆ›å»ºç±»å‹çš„è®¾è®¡æ¨¡å¼ã€‚ å®ƒå¯ä»¥å°†å¤æ‚å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹æŠ½è±¡å‡ºæ¥ï¼Œä½¿è¿™ä¸ªæŠ½è±¡è¿‡ç¨‹çš„ä¸åŒå®ç°æ–¹æ³•å¯ä»¥æ„é€ å‡ºä¸åŒè¡¨ç°ï¼ˆå±æ€§ï¼‰çš„å¯¹è±¡ã€‚ åœ¨è®² Builder æ¨¡å¼å®ç°ä¹‹å‰ï¼Œå…ˆçœ‹çœ‹ä¹‹å‰æˆ‘ä»¬æ„å»ºå¤æ‚å¯¹è±¡æ—¶æ˜¯å¦‚ä½•ç¼–å†™çš„ã€‚ æ„é€ å™¨é‡è½½ï¼ˆTelescoping Constructor anti-patternï¼‰ public class Article { private String title; private String content; private String author; private Date date; public Article(String title, String content) { ... } public Article(String title, String content, String author) { ... } public Article(String title, String content, Date date) { ... } public Article(String title, String content, String author, Date date) { ... } } é€šè¿‡åœ¨æ„é€ å™¨ä¸­ä¼ é€’ä¸åŒæ•°é‡çš„å‚æ•°ï¼Œä»è€Œå®ç°æ„å»ºä¸åŒå±æ€§ç»„åˆçš„å¯¹è±¡ã€‚è¿™ç§æ–¹æ³•ç®€å•ç›´è§‚ï¼Œä½†éšç€å±æ€§å¢åŠ ï¼Œæ„é€ å™¨çš„å‚æ•°ç»„åˆå‘ˆæŒ‡æ•°çº§å¢é•¿ï¼Œä½ å°±å¾ˆéš¾è®°ä½å‚æ•°çš„é¡ºåºä»¥åŠåœ¨ç‰¹å®šæƒ…å†µä¸‹ä½ å¯èƒ½éœ€è¦çš„ç‰¹å®šæ„é€ å‡½æ•°ï¼Œéš¾ä»¥ç»´æŠ¤å’Œç†è§£ã€‚ Kotlin çš„å‡ºç°å€’æ˜¯å¾ˆå¤§ç¨‹åº¦ä¸Šè§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼š data class Article( val title: String = &quot;&quot;, val content: String = &quot;&quot;, val author: String = &quot;&quot;, val date: Date = Date() ) å°½ç®¡å¦‚æ­¤ï¼Œå®ƒåœ¨æ‰©å±•æ€§ä¸Šè¿˜æ˜¯ç¨æœ‰æ¬ ç¼ºï¼Œæ¯”å¦‚åŒä¸€å±æ€§ä¸åŒç±»å‹çš„æ„é€ ï¼Œè¿™æ—¶å€™è¿˜æ˜¯è¦å›åˆ°æ„é€ å‡½æ•°é‡è½½çš„æ–¹æ¡ˆã€‚ data class Article( val title: String = &quot;&quot;, val content: String = &quot;&quot;, val author: String = &quot;&quot;, val date: Date = Date() ) { constructor( title: String = &quot;&quot;, content: String = &quot;&quot;, author: String = &quot;&quot;, millis: Long = System.currentTimeMillis() ) : this(title, content, author, Date(millis)) } Setter Setter æ–¹æ³•å¯ä»¥å¾ˆå¥½åœ°è§£å†³æ„é€ å‡½æ•°è†¨èƒ€çš„é—®é¢˜ï¼Œåªéœ€æ·»åŠ å¯¹åº”çš„é‡è½½æ–¹æ³•å³å¯ï¼š class Article { private var title: String = &quot;&quot; private var content: String = &quot;&quot; private var author: String = &quot;&quot; private var date: Date = Date() fun setTitle(title: String) { ... } fun setContent(content: String) { ... } fun setAuthor(author: String) { ... } fun setDate(date: Date) { this.date = date } fun setDate(millis: Long) { this.date = Date(millis) } } ä½¿ç”¨ Setter é€ä¸ªè®¾ç½®å±æ€§çš„å€¼ï¼Œçµæ´»æ€§è¾ƒå¼ºï¼Œä½†ä¹Ÿå¯èƒ½å¯¼è‡´å¯¹è±¡åœ¨æ„å»ºè¿‡ç¨‹ä¸­å¤„äºä¸å®Œæ•´çŠ¶æ€ï¼Œå¯å˜æ€§å¸¦æ¥çš„çº¿ç¨‹å®‰å…¨æ€§é—®é¢˜ï¼Œæ— æ³•ä¿è¯å¯¹è±¡çš„ä¸å˜æ€§ã€‚ å»ºé€ è€…æ¨¡å¼ å»ºé€ è€…æ¨¡å¼é€šè¿‡ä¸€ä¸ªç‹¬ç«‹çš„ Builder ç±»è´Ÿè´£æ„å»ºå¯¹è±¡ï¼Œå¯ä»¥ç¡®ä¿å¯¹è±¡åœ¨æ„å»ºæ—¶å¤„äºåˆæ³•çŠ¶æ€ã€‚ å»ºé€ è€…æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š Builderï¼šæŠ½è±¡å»ºé€ è€… ConcreteBuilderï¼šå…·ä½“å»ºé€ è€… Directorï¼šæŒ‡æŒ¥è€… Productï¼šäº§å“è§’è‰² ä¸‹é¢æ˜¯ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š /** &quot;Product&quot; */ data class Pizza(var dough: String = &quot;&quot;, var sauce: String = &quot;&quot;, var topping: String = &quot;&quot;) /** &quot;Abstract Builder&quot; */ abstract class PizzaBuilder { lateinit var pizza: Pizza private set fun createPizza() { pizza = Pizza() } abstract fun buildDough() abstract fun buildSauce() abstract fun buildTopping() } /** &quot;Concrete Builder&quot; */ class HawaiianPizzaBuilder : PizzaBuilder() { override fun buildDough() { pizza.dough = &quot;cross&quot; } override fun buildSauce() { pizza.sauce = &quot;mild&quot; } override fun buildTopping() { pizza.topping = &quot;ham + pineapple&quot; } } /** &quot;Concrete Builder&quot; */ class SpicyPizzaBuilder : PizzaBuilder() { override fun buildDough() { pizza.dough = &quot;pan baked&quot; } override fun buildSauce() { pizza.sauce = &quot;hot&quot; } override fun buildTopping() { pizza.topping = &quot;pepperoni + salami&quot; } } /** &quot;Director&quot; */ class Chef { lateinit var pizzaBuilder: PizzaBuilder fun getPizza() = pizzaBuilder.pizza fun constructPizza() { pizzaBuilder.createPizza() pizzaBuilder.buildDough() pizzaBuilder.buildSauce() pizzaBuilder.buildTopping() } } fun main() { val chef = Chef() val hawaiianBuilder = HawaiianPizzaBuilder() val spicyPizzaBuilder = SpicyPizzaBuilder() chef.pizzaBuilder = hawaiianBuilder chef.constructPizza() val pizza = chef.getPizza() } è¿™é‡Œæ„å»ºäº†ä¸€ä¸ªå¨å¸ˆåšæŠ«è¨äº†ä¾‹å­ï¼ŒChef å¹¶ä¸ä¼šç›´æ¥æ„å»º Pizza å¯¹è±¡ï¼Œå› ä¸ºè¿™ä¸ªè¿‡ç¨‹å¾ˆå®¹æ˜“å‡ºé”™ï¼Œè€Œæ˜¯æ ¹æ®èœè°±ï¼Œä¹Ÿå°±æ˜¯ Builder å®ä¾‹æ¥åˆ¶ä½œï¼ŒPizzaBuilder æ˜¯ä¸ªæŠ½è±¡ç±»ï¼Œç”±å­ç±»æ¥å®ç°å…·ä½“çš„åˆ¶ä½œè¿‡ç¨‹ä¸­æ‰€éœ€çš„ææ–™ï¼ŒChef æ— é¡»å…³å¿ƒåšè¿™ä¸ªæŠ«è¨éœ€è¦è èè¿˜æ˜¯ç«è…¿ï¼Œè¿™ä¸ªç”± PizzaBuilder æ„å»ºï¼ŒChef æ‹¿åˆ°èœè°±ï¼ŒæŒ‰ç…§ä¸Šé¢çš„æ­¥éª¤æ‰§è¡Œå³å¯ã€‚ ä»¥ä¸Šè¿™ä¸ªå°±æ˜¯å»ºé€ è€…æ¨¡å¼æ¯”è¾ƒå®˜æ–¹çš„ä¾‹å­ã€‚ æŠ½è±¡çš„å¼•å…¥ä¼¼ä¹å¾ˆå®¹æ˜“ä¼šä¸ä¹‹å‰ä»‹ç»çš„å·¥å‚æ¨¡å¼æ··æ·†ï¼Œå·¥å‚æ¨¡å¼çš„ç›®çš„æ˜¯å®ç°å¤šæ€æ€§ï¼Œè€Œå»ºé€ è€…æ¨¡å¼çš„ç›®çš„æ˜¯æ‰¾åˆ°ä¸€ç§è§£å†³ä¼¸ç¼©æ„é€ å™¨åæ¨¡å¼çš„æ–¹æ³•ï¼Œå®ƒä½¿ç”¨ä¸€ä¸ªæ„é€ å™¨ï¼Œé€æ­¥æ¥æ”¶æ¯ä¸ªåˆå§‹åŒ–å‚æ•°ï¼Œç„¶åä¸€æ¬¡æ€§è¿”å›æ‰€æ„é€ çš„å¯¹è±¡ã€‚ ç®€å•æ¥è¯´ï¼Œä¸¤è€…éƒ½å¯ä»¥åˆ›å»ºå¤æ‚çš„å¯¹è±¡ï¼Œä¸»è¦åŒºåˆ«æ˜¯å·¥å‚æ¨¡å¼ç€é‡äºå¤šä¸ªäº§å“å¯¹è±¡ï¼Œä¸”äº§å“å¯¹è±¡æ˜¯ç«‹å³è¿”å›çš„ï¼Œè€Œå»ºé€ è€…æ¨¡å¼ç€é‡äºä¸€æ­¥æ­¥æ„é€ ä¸€ä¸ªå¤æ‚å¯¹è±¡ï¼Œäº§å“åœ¨æœ€åçš„ä¸€æ­¥è¿”å›ã€‚ å¦ä¸€æ–¹é¢ï¼Œè™½ç„¶åˆ©ç”¨å»ºé€ è€…æ¨¡å¼å¯ä»¥åˆ›å»ºå‡ºä¸åŒç±»å‹çš„äº§å“ï¼Œä½†æ˜¯å¦‚æœäº§å“ä¹‹é—´çš„å·®å¼‚å·¨å¤§ï¼Œåˆ™éœ€è¦ç¼–å†™å¤šä¸ªå»ºé€ è€…ç±»æ‰èƒ½å®ç°ï¼Œå¦‚æœè¿™æ—¶ç»“åˆå·¥å‚æ¨¡å¼ä¼šæ˜¯ä¸€ä¸ªæ›´å¥½çš„é€‰æ‹©ã€‚ ä¸ºäº†æ›´å¥½åœ°ç†è§£å»ºé€ è€…æ¨¡å¼ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªå¯¹äº Android å¼€å‘è€…æ¥è¯´æ›´å¸¸è§çš„ä¾‹å­ï¼ŒOkHttp ç½‘ç»œè¯·æ±‚åº“å†…éƒ¨å°±å¤§é‡åº”ç”¨äº†å»ºé€ è€…æ¨¡å¼ï¼Œä»¥åˆ›å»º Request ä¸ºä¾‹ï¼š object HttpUtils { private val client = OkHttpClient() fun doRequest(url: String) { val request = Request.Builder().url(url).build() client.newCall(request).enqueue(object : Callback { ... }) } } Request çš„æ„é€ æ–¹æ³•ä¸€å…± 5 ä¸ªå‚æ•°ï¼Œè¿˜æœ‰å…¶ä»–æˆå‘˜å˜é‡ï¼Œæˆ‘ä»¬é€šè¿‡å®ƒçš„é™æ€å†…éƒ¨ç±» Builder æŒ‰éœ€è®¾ç½®å®ƒçš„ url å’Œ method ç­‰å‚æ•°ï¼Œæœ€åè°ƒç”¨ build() æ–¹æ³•ï¼ŒBuilder ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬æ„å»º Request å¯¹è±¡ã€‚ å¯ä»¥ç®€å•çœ‹çœ‹ Request çš„æºç ï¼š class Request internal constructor( @get:JvmName(&quot;url&quot;) val url: HttpUrl, @get:JvmName(&quot;method&quot;) val method: String, @get:JvmName(&quot;headers&quot;) val headers: Headers, @get:JvmName(&quot;body&quot;) val body: RequestBody?, internal val tags: Map&lt;Class&lt;*&gt;, Any&gt; ) { ... open class Builder { internal var url: HttpUrl? = null internal var method: String internal var headers: Headers.Builder internal var body: RequestBody? = null internal var tags: MutableMap&lt;Class&lt;*&gt;, Any&gt; = mutableMapOf() ... constructor() { this.method = &quot;GET&quot; this.headers = Headers.Builder() } open fun url(url: HttpUrl): Builder = apply { this.url = url } open fun url(url: String): Builder { val finalUrl: String = when { url.startsWith(&quot;ws:&quot;, ignoreCase = true) -&gt; { &quot;http:${url.substring(3)}&quot; } url.startsWith(&quot;wss:&quot;, ignoreCase = true) -&gt; { &quot;https:${url.substring(4)}&quot; } else -&gt; url } return url(finalUrl.toHttpUrl()) } open fun build(): Request { return Request( checkNotNull(url) { &quot;url == null&quot; }, method, headers.build(), body, tags.toImmutableMap() ) } } } æˆ‘ä»¬è®¾ç½®çš„å‚æ•°ç»è¿‡å¤„ç†åé¦–å…ˆå­˜å‚¨åœ¨ Builder ä¸­ï¼Œè°ƒç”¨ build() æ–¹æ³•åˆ›å»º Request å¯¹è±¡æ—¶ç”¨å…¶æ„å»ºå®ä¾‹ï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰é…ç½®åˆ™ä½¿ç”¨ Builder ä¸­è®¾å®šçš„é»˜è®¤å€¼ã€‚ åœ¨è¿™é‡Œï¼ŒBuilder åŒæ—¶æ‰®æ¼”äº†ä¸Šæ–‡ä¸­æåˆ°çš„ Builderã€ConcreteBuilder è§’è‰²ï¼Œåœ¨ Builder æ¨¡å¼ä¸­å¦‚æœ ConcreteBuilder åªæœ‰ä¸€ä¸ªï¼Œæˆ‘ä»¬éƒ½å¯ä»¥ä½¿ç”¨è¿™ç§å†™æ³•ï¼Œçœç•¥æŠ½è±¡ï¼Œç®€åŒ– Builder æ¨¡å¼çš„è®¾è®¡ã€‚ åŒæ—¶ï¼Œå› ä¸º Builder é‡Œçš„æ¯ä¸€ä¸ª Setter æ–¹æ³•éƒ½è¿”å›äº† Builder å¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è°ƒç”¨çš„æ—¶å€™å°±å¯ä»¥ä½¿ç”¨é“¾å¼å†™æ³•ï¼Œæ›´åŠ ç®€æ´ã€‚ åœ¨ Android SDK ä¸­ä¹Ÿæ—¶å¸¸å¯ä»¥è§åˆ°å»ºé€ è€…æ¨¡å¼çš„èº«å½±ï¼Œæ¯”å¦‚å¸¸ç”¨çš„ AlertDialogã€Notification ç­‰ï¼Œç”±äºå…¶æ¶‰åŠåˆ° UI ç›¸å…³çš„å¤„ç†é€»è¾‘ï¼Œä»£ç é‡è¾ƒå¤§ï¼Œå°±ä¸åœ¨è¿™é‡Œå±•å¼€äº†ï¼Œå¯è‡ªè¡Œé˜…è¯»æºç ç†è§£ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ æé«˜å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§ï¼šé€šè¿‡ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œä»£ç çš„å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§å¾—åˆ°æé«˜ã€‚å»ºé€ è€…æ¨¡å¼å…è®¸å¼€å‘è€…åœ¨ä»£ç ä¸­æ¸…æ™°åœ°çœ‹åˆ°å¯¹è±¡çš„æ„å»ºè¿‡ç¨‹ï¼Œä»è€Œæ›´å®¹æ˜“ç†è§£å’Œä¿®æ”¹ä»£ç ã€‚æ­¤å¤–ï¼Œå¯ä»¥ä½¿ç”¨é“¾å¼è°ƒç”¨ï¼Œä»£ç çš„ç»„ç»‡ç»“æ„æ›´åŠ æ¸…æ™°ï¼Œæ˜“äºé˜…è¯»å’Œç¼–å†™ã€‚ å¢å¼ºå¯¹è±¡çš„ä¸å¯å˜æ€§ï¼šå»ºé€ è€…æ¨¡å¼é€šå¸¸ä¸ä¸å¯å˜å¯¹è±¡ï¼ˆImmutable Objectsï¼‰ä¸€èµ·ä½¿ç”¨ã€‚é€šè¿‡ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå¯ä»¥åœ¨å¯¹è±¡åˆ›å»ºè¿‡ç¨‹ä¸­è®¾ç½®æ‰€æœ‰å¿…è¦çš„å±æ€§ï¼Œå¹¶åœ¨å¯¹è±¡æ„å»ºå®Œæˆåå°†å…¶è®¾ç½®ä¸ºä¸å¯å˜ï¼Œä»è€Œç¡®ä¿å¯¹è±¡çš„ä¸€è‡´æ€§å’Œçº¿ç¨‹å®‰å…¨æ€§ï¼Œè¿™æ˜¯ä¸€ç§ä¿æŠ¤æœºåˆ¶ï¼Œä¹Ÿæ˜¯å»ºé€ è€…æ¨¡å¼çš„ç‰¹æ€§ã€‚ å¤„ç†å¯é€‰å‚æ•°ï¼šæŸäº›å¯¹è±¡å¯èƒ½å…·æœ‰è®¸å¤šå¯é€‰å‚æ•°ï¼Œè€Œä¸æ˜¯æ‰€æœ‰å‚æ•°éƒ½éœ€è¦åœ¨æ¯æ¬¡åˆ›å»ºå¯¹è±¡æ—¶æä¾›ã€‚ä½¿ç”¨å»ºé€ è€…æ¨¡å¼ï¼Œå¯ä»¥é€šè¿‡æä¾›ä¸€äº›è®¾ç½®æ–¹æ³•æ¥è®¾ç½®å¯é€‰å‚æ•°ï¼Œè€Œä¸æ˜¯åœ¨æ„é€ å‡½æ•°ä¸­ä½¿ç”¨å¤§é‡çš„å‚æ•°ã€‚è¿™ä½¿å¾—ä»£ç æ›´åŠ ç®€æ´ï¼Œé¿å…äº†é•¿å‚æ•°åˆ—è¡¨çš„é—®é¢˜ã€‚ æ›´å¥½çš„æ‰©å±•æ€§ï¼šå¯ä»¥é€šè¿‡æ‰©å±• Builder ç±»æ¥æ”¯æŒæ–°çš„æ„å»ºæ­¥éª¤ï¼Œæˆ–è€…é€šè¿‡å¼•å…¥ä¸åŒçš„å…·ä½“ Builder ç±»æ¥æ„å»ºä¸åŒçš„å¯¹è±¡å˜ç§ã€‚ ç¼ºç‚¹ ä»£ç é‡å¢åŠ ï¼šä½¿ç”¨å»ºé€ è€…æ¨¡å¼é€šå¸¸ä¼šå¼•å…¥é¢å¤–çš„ä»£ç ï¼ŒåŒ…æ‹¬ Builder ç±»æœ¬èº«ä»¥åŠç›®æ ‡ç±»ä¸­çš„ Setter æ–¹æ³•ã€‚ å¯èƒ½å¯¼è‡´è¿‡å¤šçš„ç±»ï¼šå¦‚æœæ¯ä¸ªç±»éƒ½éœ€è¦ä¸€ä¸ªç‹¬ç«‹çš„å»ºé€ è€…ï¼Œå¯èƒ½ä¼šå¯¼è‡´ç±»çš„æ•°é‡æ¿€å¢ï¼Œå¢åŠ äº†ç±»çš„ç®¡ç†å’Œç»´æŠ¤çš„å¤æ‚æ€§ã€‚ å¯¹è±¡çŠ¶æ€åˆ†æ•£ï¼šåœ¨å»ºé€ è€…æ¨¡å¼ä¸­ï¼Œå¯¹è±¡çš„çŠ¶æ€å¯èƒ½åˆ†æ•£åœ¨æ„é€ å™¨å’Œç›®æ ‡ç±»ä¸­ï¼Œè¿™ä½¿å¾—å¯¹è±¡çš„çŠ¶æ€åˆ†æ•£ï¼Œå¯èƒ½å¯¼è‡´ç»´æŠ¤å’Œä¿®æ”¹ä»£ç æ›´åŠ å›°éš¾ã€‚ ","link":"https://LiarrDev.github.io/post/Design-Pattern-Builder/"},{"title":"Android TextView HTML è¶…æ–‡æœ¬è·³è½¬","content":"ä¹‹å‰åœ¨ã€Android æ”¹å˜ TextView å†…å±€éƒ¨æ ·å¼ã€ä¸­ä»‹ç»è¿‡åˆ©ç”¨ HTML æ ‡ç­¾æ¥è®¾ç½®æ ·å¼ï¼Œä½¿ç”¨æ—¶ä½ å¯èƒ½ä¼šé‡åˆ°è¶…æ–‡æœ¬è·³è½¬çš„éœ€æ±‚ï¼Œå¾ˆå®¹æ˜“ä½ å°±èƒ½æƒ³åˆ°ç»™ HTML å­—ç¬¦ä¸²æ·»åŠ  &lt;a&gt; æ ‡ç­¾ï¼š class MainActivity : AppCompatActivity() { // ... override fun onCreate(savedInstanceState: Bundle?) { // ... val content = Html.fromHtml( &quot;è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ï¼š&lt;a href='https://google.com'&gt;Google&lt;/a&gt;&quot;, Html.FROM_HTML_MODE_LEGACY ) binding.textView.text = content } } TextView ç¡®å®å‡ºç°äº†è¶…æ–‡æœ¬çš„æ˜¾ç¤ºæ•ˆæœï¼Œä½†æ˜¯å´ä¸èƒ½å¤Ÿå“åº”ç‚¹å‡»ã€‚ æˆ‘ä»¬è¿˜éœ€è¦å¯¹å…¶åšè¿›ä¸€æ­¥å¤„ç†ã€‚è¿™é‡ŒåŒæ ·ç”¨åˆ°äº†ã€Android æ”¹å˜ TextView å†…å±€éƒ¨æ ·å¼ã€ä¸­ä»‹ç»çš„å¦ä¸€ç§æ–¹å¼ï¼Œä¹Ÿå°±æ˜¯ SpannableStringï¼Œä»£ç å¦‚ä¸‹ï¼š class MainActivity : AppCompatActivity() { // ... override fun onCreate(savedInstanceState: Bundle?) { // ... val content = Html.fromHtml( &quot;è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ï¼š&lt;a href='https://google.com'&gt;Google&lt;/a&gt;&quot;, Html.FROM_HTML_MODE_LEGACY ) binding.textView.text = content handleHtmlClick(binding.textView) } private fun handleHtmlClick(textView: TextView) { textView.movementMethod = LinkMovementMethod.getInstance() val text = textView.text if (text is Spannable) { val end = text.length val spans = text.getSpans(0, end, URLSpan::class.java) val sb = SpannableStringBuilder(text) sb.clearSpans() for (span in spans) { sb.setSpan( URLSpan(span.url), text.getSpanStart(span), text.getSpanEnd(span), Spanned.SPAN_EXCLUSIVE_INCLUSIVE ) } textView.text = sb } } } é€šè¿‡ Spanned.getSpans() æ–¹æ³•æå–åˆ°å¯ç‚¹å‡»çš„ URLSpanï¼Œå¹¶é‡æ–°æ„é€  URLSpan å†æ·»åŠ åˆ° SpannableString ä¸­å³å¯ã€‚URLSpan æ˜¯ ClickableSpan çš„å®ç°ï¼Œå½“ç‚¹å‡»å…¶ä¸­è®¾ç½®äº† Span çš„æ–‡æœ¬æ—¶ï¼ŒURLSpan å°†å°è¯•é€šè¿‡å¯åŠ¨å¸¦æœ‰ Intent.ACTION_VIEW çš„ Activity æ¥æ‰“å¼€ URLã€‚ ä¸Šé¢ä»£ç çš„æ•ˆæœå°±æ˜¯è·³è½¬åˆ°æµè§ˆå™¨æ‰“å¼€è¶…é“¾æ¥ã€‚ é™¤äº†æˆ‘ä»¬å¸¸è§çš„ç½‘é¡µè¶…é“¾æ¥å¤–ï¼Œè¶…æ–‡æœ¬å…¶å®è¿˜åŒ…å«å…¶ä»–åœºæ™¯çš„åº”ç”¨ï¼Œè€Œä¸Šé¢è¯´åˆ° URLSpan å°è¯•é€šè¿‡å¯åŠ¨å¸¦æœ‰ Intent.ACTION_VIEW çš„ Activity æ¥æ‰“å¼€ URLï¼Œè¿™è®©æˆ‘ä»¬å¾ˆå®¹æ˜“å°±æƒ³èµ·ä¹‹å‰ä»‹ç»è¿‡çš„å‘é€é‚®ä»¶ã€‚å¯ä»¥è¿™ä¹ˆå†™ï¼š class MainActivity : AppCompatActivity() { // ... override fun onCreate(savedInstanceState: Bundle?) { // ... val content = Html.fromHtml( &quot;å‘é‚®ä»¶ç»™ &lt;a href='mailto:foo@bar.com'&gt;foo@bar.com&lt;/a&gt;&quot;, Html.FROM_HTML_MODE_LEGACY ) binding.textView.text = content handleHtmlClick(binding.textView) } private fun handleHtmlClick(textView: TextView) { textView.movementMethod = LinkMovementMethod.getInstance() val text = textView.text if (text is Spannable) { val end = text.length val spans = text.getSpans(0, end, URLSpan::class.java) val sb = SpannableStringBuilder(text) sb.clearSpans() for (span in spans) { sb.setSpan( URLSpan(span.url), text.getSpanStart(span), text.getSpanEnd(span), Spanned.SPAN_EXCLUSIVE_INCLUSIVE ) } textView.text = sb } } } å®ƒä¹Ÿä¼šç›´æ¥æ‹‰èµ·æ‰‹æœºçš„é‚®ä»¶åº”ç”¨ï¼š å¦‚æœå¸Œæœ›æ¥ç®¡ç‚¹å‡»åçš„é€»è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªè¡Œå®ç° ClickableSpanï¼š class MainActivity : AppCompatActivity() { // ... override fun onCreate(savedInstanceState: Bundle?) { // ... val content = Html.fromHtml( &quot;è¿™æ˜¯ä¸€ä¸ªè¶…é“¾æ¥ï¼š&lt;a href='https://google.com'&gt;Google&lt;/a&gt;&quot;, Html.FROM_HTML_MODE_LEGACY ) binding.textView.text = content handleHtmlClick(binding.textView) } private fun handleHtmlClick(textView: TextView) { textView.movementMethod = LinkMovementMethod.getInstance() val text = textView.text if (text is Spannable) { val end = text.length val spans = text.getSpans(0, end, URLSpan::class.java) val sb = SpannableStringBuilder(text) sb.clearSpans() for (span in spans) { sb.setSpan( HypertextSpan(this, span.url), text.getSpanStart(span), text.getSpanEnd(span), Spanned.SPAN_EXCLUSIVE_INCLUSIVE ) } textView.text = sb } } } class HypertextSpan(private val context: Context, private val url: String) : ClickableSpan() { override fun onClick(widget: View) { // å¤„ç†ç‚¹å‡»é€»è¾‘ } } æˆ‘ä»¬æ„é€ ä¸€ä¸ª HypertextSpan æ¥æ¥ç®¡ç‚¹å‡»é€»è¾‘ï¼Œåªéœ€å°†ä¸Šä¸€æ­¥çš„ URLSpan æ›¿æ¢å³å¯ï¼Œæ„é€ æ–¹æ³•ä¸­ä¼ å…¥ Context å’Œ URL å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬å¤„ç†åˆ¤æ–­åŠè·³è½¬ã€‚ æ¯”å¦‚åœ¨åº”ç”¨å†…æ‰“å¼€ç½‘é¡µï¼š ","link":"https://LiarrDev.github.io/post/Handle-Android-Textview-Html-Hypertext-Action/"},{"title":"Android è°ƒç”¨é‚®ç®±å®¢æˆ·ç«¯å‘é€é‚®ä»¶","content":"åšå•†ä¸šé¡¹ç›®çš„æ—¶å€™ï¼Œåº”ç”¨å¾€å¾€éœ€è¦æä¾›ä¸€äº›ç”¨æˆ·çš„åé¦ˆæ¸ é“ï¼Œå°½ç®¡ç°åœ¨æœ‰å¾®ä¿¡å…¬ä¼—å·ã€å¾®åšç­‰ç­‰æ–¹ä¾¿å¿«æ·çš„é€”å¾„å¯ä»¥ä¸åº”ç”¨å¼€å‘è€…å–å¾—è”ç³»ï¼Œä½†é‚®ç®±ä¹Ÿæ˜¯ä¸å¯æˆ–ç¼ºçš„ä¸€ç§åé¦ˆé€”å¾„ã€‚ åœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬æ—¶å¸¸ä¼šæ‹‰èµ·é‚®ç®±åº”ç”¨æ¥å®Œæˆå‘é€é‚®ä»¶çš„æ“ä½œï¼ŒåŒæ—¶è¿˜ä¼šè‡ªåŠ¨å¸®ç”¨æˆ·å¡«å†™éƒ¨åˆ†ä¿¡æ¯ï¼Œå‡å°‘ç”¨æˆ·çš„æ“ä½œæ­¥éª¤ï¼Œä»Šå¤©å°±æ•™å¤§å®¶åœ¨ Android å¼€å‘ä¸­å¦‚ä½•å®ç°è¿™ä¸€æ“ä½œã€‚ å‰ææ˜¯æ‰‹æœºéœ€è¦å®‰è£…å¹¶ç™»å½•é‚®ç®±å®¢æˆ·ç«¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€äº›é‚®ç®±æœåŠ¡å•†æä¾›çš„å®˜æ–¹åº”ç”¨ï¼Œæ¯”å¦‚ã€Gmailã€ã€ã€QQMailã€ç­‰ç­‰ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨æ‰‹æœºå†…ç½®çš„é‚®ç®±åº”ç”¨ï¼Œå…·ä½“é…ç½®æ“ä½œå¯å‚è€ƒã€ç”¨å¥½æ‰‹æœºç³»ç»Ÿè‡ªå¸¦çš„é‚®ä»¶å®¢æˆ·ç«¯ã€ã€‚ æœ€ç®€å•çš„åœºæ™¯ï¼Œæˆ‘ä»¬åªéœ€è¦ç»™æŒ‡å®šçš„å®˜æ–¹é‚®ç®±å‘é€ä¸€äº›æ–‡æœ¬å†…å®¹ï¼Œå¯ä»¥è¿™ä¹ˆå†™ï¼š object EmailSender { fun mailToOne(context: Context) { val intent = Intent(Intent.ACTION_SENDTO, Uri.parse(&quot;mailto:foo@bar.com&quot;)) intent.putExtra(Intent.EXTRA_SUBJECT, &quot;è¿™æ˜¯ä¸»é¢˜&quot;) intent.putExtra(Intent.EXTRA_TEXT, &quot;è¿™æ˜¯å†…å®¹&quot;) context.startActivity(intent); } } è¿™é‡Œç”¨åˆ°äº† Activity çš„éšå¼å¯åŠ¨ï¼Œé¦–å…ˆéœ€è¦æŠŠ Intent çš„ action è®¾ç½®ä¸º Intent.ACTION_SENDTOï¼Œå†å°† data è®¾ç½®ä¸º mailto: å¼€å¤´çš„ Uriï¼Œå¹¶åœ¨åé¢æ‹¼æ¥é‚®ç®±åœ°å€ï¼Œè¿™æ ·å°±åªæœ‰é‚®ç®±åº”ç”¨æ‰èƒ½å¤Ÿå“åº”æˆ‘ä»¬çš„ Intentã€‚å¦‚æœéœ€è¦è®¾ç½®ä¸»é¢˜å’Œå†…å®¹ï¼Œå¯ä»¥å¡«å…… Intent.EXTRA_SUBJECT å’Œ Intent.EXTRA_TEXT è¿™ä¸¤ä¸ªå­—æ®µã€‚ æ•ˆæœå¦‚ä¸‹ï¼š é‚®ä»¶ä¸ä»…æ”¯æŒå‘é€ç»™å•ä¸€æ”¶ä»¶äººï¼Œæˆ‘ä»¬å¯ä»¥æŒ‡å®šå¤šä¸ªæ”¶ä»¶äººï¼Œè¿˜æ”¯æŒæŠ„é€ã€å¯†é€ã€‚ object EmailSender { fun mailToMultiple(context: Context) { val intent = Intent(Intent.ACTION_SENDTO) intent.setData(Uri.parse(&quot;mailto:&quot;)) intent.putExtra(Intent.EXTRA_EMAIL, arrayOf(&quot;foo@bar.com&quot;, &quot;bar@foo.com&quot;)) intent.putExtra(Intent.EXTRA_CC, arrayOf(&quot;cc@bar.com&quot;)) // æŠ„é€ intent.putExtra(Intent.EXTRA_BCC, arrayOf(&quot;bcc@bar.com&quot;)) // å¯†é€ intent.putExtra(Intent.EXTRA_SUBJECT, &quot;è¿™æ˜¯ä¸»é¢˜&quot;) intent.putExtra(Intent.EXTRA_TEXT, &quot;è¿™æ˜¯å†…å®¹&quot;) context.startActivity(intent) } } action çš„é…ç½®ä¸ä¸Šæ–‡ä¸€è‡´ï¼Œä½†æ˜¯ data ä¸éœ€è¦æ‹¼æ¥æ”¶ä»¶äººçš„é‚®ç®±åœ°å€ï¼Œè€Œæ˜¯æ”¹æˆåœ¨ Intent.EXTRA_EMAIL å­—æ®µä¼ å…¥ï¼ŒæŠ„é€å’Œå¯†é€çš„é‚®ç®±åœ°å€åˆ™åˆ†åˆ«åœ¨ Intent.EXTRA_CC å’Œ Intent.EXTRA_BCC å­—æ®µä¼ å…¥ï¼Œè¿™ä¸‰ä¸ªå­—æ®µéƒ½æ¥æ”¶å­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ï¼Œä¹Ÿå°±æ„å‘³ç€æˆ‘ä»¬å¯ä»¥å¡«å……å¤šä¸ªé‚®ç®±åœ°å€ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š é‚®ä»¶åŒæ—¶è¿˜èƒ½ä¸Šä¼ é™„ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥è¿™ä¹ˆå†™ï¼š object EmailSender { fun mailAttachments(context: Context) { val file = File(PathUtils.getInternalAppFilesPath(), &quot;screenshot.png&quot;) val intent = Intent(Intent.ACTION_SEND_MULTIPLE) intent.selector = Intent(Intent.ACTION_SENDTO, Uri.parse(&quot;mailto:&quot;)) intent.addFlags(Intent.FLAG_GRANT_READ_URI_PERMISSION) intent.putExtra(Intent.EXTRA_EMAIL, arrayOf(&quot;foo@bar.com&quot;)) intent.putExtra(Intent.EXTRA_SUBJECT, &quot;è¿™æ˜¯ä¸»é¢˜&quot;) intent.putExtra(Intent.EXTRA_STREAM, arrayListOf(UriUtils.file2Uri(file))) context.startActivity(intent) } } è¿™é‡Œå°† action æ”¹æˆ Intent.ACTION_SEND_MULTIPLEï¼Œå¦‚æœä»…ä»…æ˜¯è¿™æ ·ä¿®æ”¹ï¼Œé™¤äº†é‚®ç®±åº”ç”¨å¤–ï¼Œè®¸å¤šåº”ç”¨éƒ½èƒ½å¤Ÿå“åº”æˆ‘ä»¬çš„ Intentï¼Œå› æ­¤è¿˜éœ€è¦è°ƒç”¨ setSelector() æ–¹æ³•ï¼Œä¸ºæ­¤ Intent è®¾ç½®é€‰æ‹©å™¨ã€‚æœ€åå†å‘ Intent.EXTRA_STREAM å­—æ®µä¼ å…¥é™„ä»¶çš„ Uriï¼Œå®ƒä¹Ÿæ¥æ”¶æ•°ç»„ï¼Œæ„å‘³ç€æˆ‘ä»¬å¯ä»¥ä¼ è¾“å¤šä¸ªé™„ä»¶ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š ","link":"https://LiarrDev.github.io/post/Android-Calling-Email-App-to-Send-Email/"},{"title":"ViewPager2 æ¨ªå‘åµŒå¥—æ»šåŠ¨","content":"ä¹‹å‰ã€TabLayout &amp; ViewPager2 å¿«é€Ÿæ‰“é€ é€‰é¡¹å¡åˆ‡æ¢æ•ˆæœ]ã€ä¸€æ–‡ä»‹ç»äº†å¦‚ä½•å®ç°ä¸€ä¸ªç®€å•çš„é¡µé¢æ»‘åŠ¨åˆ‡æ¢æ•ˆæœï¼Œéšç€å¼€å‘çš„æ·±å…¥ï¼Œä½ å¯èƒ½ä¼šé‡åˆ° ViewPager2 åµŒå¥—æ»‘åŠ¨çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯å½“ ViewPager2 å†…æœ‰ä¸€ä¸ªå¯ä»¥åŒæ–¹å‘æ»šåŠ¨çš„ Viewï¼Œæ¯”å¦‚ RecyclerViewï¼Œå®ƒå¹¶ä¸èƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸå·¥ä½œã€‚ åµŒå¥—ï¼Ÿä¹‹å‰æˆ‘ä»¬ç”¨ NestedScrollView è§£å†³ Android åµŒå¥—æ»šåŠ¨é—®é¢˜ï¼Œè¿™æ¬¡èƒ½ä¸èƒ½ä¾è‘«èŠ¦ç”»ç“¢ï¼Ÿ å¾ˆæ˜¾ç„¶ï¼Œå¹¶ä¸é€‚åˆã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬èƒ½å¦é€šè¿‡ä¿®æ”¹ ViewPager2 çš„äº‹ä»¶åˆ†å‘é€»è¾‘ï¼Œä½¿å…¶æ ¹æ®æˆ‘ä»¬çš„éœ€è¦è¿›è¡Œåˆ†å‘ï¼Ÿ å¾ˆé—æ†¾ï¼ŒViewPager2 è¢«æ ‡è®°ä¸º finalï¼Œæˆ‘ä»¬æ— æ³•ç»§æ‰¿ä¿®æ”¹ã€‚ public final class ViewPager2 extends ViewGroup { ... } RecyclerView æ€»è¯¥ä¸ä¼šè¢«æ ‡è®°ä¸º final å§ï¼Œæˆ‘ä»¬é‡å†™ RecyclerView æ˜¯å¦è¡Œå¾—é€šï¼Ÿ æˆ‘ä»¬æ¢ä¸ªè§’åº¦æ€è€ƒè¿™ä¸ªé—®é¢˜ï¼Œè¿™æ¬¡æˆ‘ä»¬é‡å†™ RecyclerViewï¼Œå‡å¦‚è¯´ä¸‹æ¬¡æˆ‘ä»¬éœ€è¦å¾€ ViewPager2 é‡ŒåµŒå¥—ä¸€ä¸ª ScrollView æˆ–è€…å…¶ä»–ä»»æ„å¯æ»šåŠ¨çš„ Viewï¼Œå²‚ä¸æ˜¯æ¯ä¸€ä¸ªéƒ½è¦é‡å†™ï¼Ÿæœ‰æ²¡æœ‰ä¸€åŠ³æ°¸é€¸çš„æ–¹æ³•ï¼Ÿ å…¶å®å¯ä»¥å•ç‹¬è‡ªå®šä¹‰ä¸€ä¸ª ViewGroup ç”¨äºå¤„ç† ViewPager2 å†…çš„äº‹ä»¶åˆ†å‘ï¼Œå½“æ·»åŠ äº†éœ€è¦å¤„ç†åµŒå¥—æ»‘åŠ¨é—®é¢˜çš„ View æ—¶ï¼Œåªéœ€è¦åœ¨è¯¥ View å¤–é¢åŒ…ä¸€å±‚æˆ‘ä»¬è‡ªå®šä¹‰çš„ ViewGroupï¼Œå°±å¯ä»¥å®ç°å¯¹åµŒå¥—æ»‘åŠ¨äº‹ä»¶çš„å¤„ç†ã€‚ class ViewPager2NestedFrameLayout @JvmOverloads constructor(context: Context, attrs: AttributeSet? = null) : FrameLayout(context, attrs) { private val parentViewPager: ViewPager2? get() { var v: View? = parent as? View while (v != null &amp;&amp; v !is ViewPager2) { v = v.parent as? View } return v as? ViewPager2 } override fun dispatchTouchEvent(ev: MotionEvent?): Boolean { when (ev?.action) { MotionEvent.ACTION_DOWN -&gt; { parentViewPager?.isUserInputEnabled = false } MotionEvent.ACTION_UP, MotionEvent.ACTION_CANCEL -&gt; { parentViewPager?.isUserInputEnabled = true } } return super.dispatchTouchEvent(ev) } } æˆ‘ä»¬ç»§æ‰¿ FrameLayout æ¥å®ç°ï¼Œä¸€èˆ¬æƒ…å†µä¸‹è¯¥ ViewGroup ä»…ä¼šåŒ…è£¹æˆ‘ä»¬éœ€è¦åµŒå¥—æ»šåŠ¨çš„ Viewï¼Œæ‰€ä»¥ FrameLayout å¯¹åŸæœ‰ä»£ç çš„å…¥ä¾µæ€§æœ€å°ï¼ŒåŒæ—¶æ€§èƒ½ä¹Ÿæœ€ä¼˜ã€‚ è¿™å…¶ä¸­ä¸€ä¸ªå…³é”®ç‚¹æ˜¯å¦‚ä½•è·å– ViewPager2 çš„å®ä¾‹ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥é€šè¿‡å¤–éƒ¨ä¼ å…¥ï¼Œä½†è¿™æ ·æ¯æ¬¡ä½¿ç”¨æ—¶éƒ½éœ€è¦æ‰‹åŠ¨è®¾ç½®ä¸€éï¼Œéå¸¸éº»çƒ¦ã€‚äºæ˜¯è¿™é‡Œé‡‡ç”¨å¦ä¸€ç§æ–¹å¼ï¼Œé€šè¿‡ View çš„ getParent() æ–¹æ³•è·å–å…¶çˆ¶ Viewï¼Œç„¶ååˆ¤æ–­å…¶æ˜¯å¦ä¸º ViewPager2ï¼Œå¦‚æœæ˜¯åˆ™è¿”å›ï¼Œå¦åˆ™ç»§ç»­å‘ä¸ŠæŸ¥æ‰¾ã€‚ æ‹¿åˆ° ViewPager2 çš„å®ä¾‹å°±å¥½åŠäº†ï¼Œå½“æ¥æ”¶åˆ° ACTION_DOWN äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬è°ƒç”¨ setUserInputEnabled() è®¾ç½®ä¸º falseï¼Œç¦æ­¢ ViewPager2 æ»šåŠ¨ï¼Œå½“æ¥æ”¶åˆ° ACTION_UP æˆ– ACTION_CANCEL äº‹ä»¶æ—¶ï¼Œæˆ‘ä»¬è®¾ç½®ä¸º trueï¼Œå…è®¸ ViewPager2 æ»šåŠ¨ã€‚ ä½¿ç”¨æ–¹æ³•æ­£å¦‚æˆ‘ä»¬å‰é¢æ‰€è¿°ï¼ŒåŒ…è£¹åœ¨éœ€è¦åµŒå¥—æ»‘åŠ¨çš„ View å¤–å³å¯ï¼š &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;.NestedFragment&quot;&gt; ... &lt;com.example.nested.ViewPager2NestedFrameLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot;&gt; &lt;androidx.recyclerview.widget.RecyclerView android:id=&quot;@+id/recycler_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;horizontal&quot; app:layoutManager=&quot;androidx.recyclerview.widget.LinearLayoutManager&quot; /&gt; &lt;/com.example.nested.ViewPager2NestedFrameLayout&gt; &lt;/FrameLayout&gt; æ•ˆæœå¦‚ä¸‹ï¼š æ­£å¦‚æˆ‘ä»¬æ‰€æœŸæœ›çš„é‚£æ ·å·¥ä½œï¼Œç”±äºèŒƒå›´ä»…é™åˆ¶åœ¨è¯¥ ViewGroup èŒƒå›´å†…ï¼Œæ‰€ä»¥è§¦æ‘¸è¯¥ ViewGroup ä»¥å¤–çš„åŒºåŸŸä»èƒ½å¤Ÿä½¿ ViewPager2 æ­£å¸¸æ»‘åŠ¨ã€‚ ","link":"https://LiarrDev.github.io/post/ViewPager2-Horizontal-Nested-Scroll/"},{"title":"ArkUI è‡ªå®šä¹‰ç»„ä»¶ï¼šKeyCap å®è·µ","content":"ä¹‹å‰åœ¨ã€ã€ŒMOJiKanaã€ä¸­æ¨¡ä»¿å®ä½“æŒ‰é”®çš„åŠ¨æ•ˆæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿã€ä¸€æ–‡ä¸­ä»‹ç»äº† Android å¹³å° View ä½“ç³»ä»¥åŠ Compose ä½“ç³»å…³äº KeyCap çš„å¼€å‘å®è·µã€‚æ–‡ä¸­æˆ‘é¡ºå˜´æäº†ä¸€å¥ ArkUI çš„å®ç°æ–¹å¼ï¼Œä½†å¹¶æœªç»™å‡ºå®é™…ä»£ç ï¼Œä»Šå¤©å•ç‹¬æ¥è®²ä¸‹ ArkUI ä¸­çš„å®ç°æ–¹å¼ã€‚ å› ä¸º Android å¹³å°æ— è®ºæ˜¯ View è¿˜æ˜¯ Compose é»˜è®¤æƒ…å†µä¸‹éƒ½ä¸æ”¯æŒå•ç‹¬è®¾ç½®æŸä¸€æ–¹å‘ä¸Šçš„è¾¹æ¡†ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡‡ç”¨ä¸¤ä¸ªå›¾å±‚å åŠ çš„æ–¹å¼æ¥æ¨¡æ‹Ÿã€‚é‡‡ç”¨ä¸¤ä¸ªå›¾å±‚æœ‰ä¸ªå°ç¼ºé™·ï¼Œå°±æ˜¯å½“ä¸¤ä¸ªå›¾å±‚ä¹‹é—´çš„é—´éš”è¿‡é«˜æ—¶ï¼Œè§†è§‰æ•ˆæœå°±ä¸å†åƒæ˜¯ä¸€ä¸ªå®ä½“æŒ‰é”®äº†ã€‚ å½“ç„¶ï¼Œè¿™æ—¢å¯ä»¥å½’å’ä¸ºä½¿ç”¨ä¸å½“ï¼Œä¹Ÿå¯ä»¥è¯´æ˜¯æˆ‘è®¾è®¡çš„æ—¶å€™å¹¶æ²¡æœ‰å…¼å®¹ï¼Œå…¶å®åªéœ€è¦å°†åº•éƒ¨å›¾å±‚çš„é«˜åº¦æ’‘æ»¡æ•´ä¸ªçˆ¶å¸ƒå±€å°±å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ ä½†æ˜¯åƒ ArkUI å°±å¯ä»¥ä½¿ç”¨å•è¾¹ border æ¥è§„é¿è¿™ç§é—®é¢˜ã€‚ @Component export struct KeyCap { keyFlatColor: ResourceColor = Color.Transparent keyShadowColor: ResourceColor = Color.Transparent keyStroke: Length = 0 keyCapRadius: Length = 0 @BuilderParam child: () =&gt; void = this.customBuilder @State private pressed: boolean = false @Builder customBuilder() { } build() { RelativeContainer() { Stack({ alignContent: Alignment.Center }) { this.child() } .width('100%') .backgroundColor(this.keyFlatColor) .margin({ top: this.pressed ? this.keyStroke : 0 }) .borderRadius(this.keyCapRadius) .borderColor(this.keyShadowColor) .borderWidth({ bottom: this.pressed ? 0 : this.keyStroke }) .alignRules({ top: { anchor: '__container__', align: VerticalAlign.Top }, bottom: { anchor: '__container__', align: VerticalAlign.Bottom } }) }.onTouch((event: TouchEvent) =&gt; { if (event.type == TouchType.Down) { this.pressed = true } else if (event.type == TouchType.Up || event.type == TouchType.Cancel) { this.pressed = false } }) } } å±æ€§è¿˜æ˜¯è·Ÿä¹‹å‰ä¸€æ ·ï¼Œå¯ä»¥çœ‹åˆ°è¿™é‡Œå°‘äº†ä¸€å±‚ç»„ä»¶ï¼Œé€šè¿‡åˆ¤æ–­æ˜¯å¦æŒ‰å‹æ¥è°ƒèŠ‚åº•éƒ¨è¾¹æ¡†å®½åº¦ä»¥åŠé¡¶éƒ¨è¾¹è·ï¼Œæ•´ä½“ä»£ç é‡åˆç®€æ´äº†ä¸å°‘ã€‚ è™½è¯´è¿™ç§æ–¹å¼å€¼çš„ä¸€å¤¸ï¼Œä½†ä¼—æ‰€å‘¨çŸ¥ï¼ŒArkUI ä»ä¸ç»å¤¸ã€‚åœ¨è‡ªå®šä¹‰ç»„ä»¶ä¸­ï¼Œå¦‚æœéœ€è¦æ·»åŠ å­ç»„ä»¶ï¼Œæˆ‘ä»¬æ— æ³•åƒ Compose ä¸€æ ·é‡‡ç”¨é«˜é˜¶å‡½æ•°ï¼Œç”šè‡³ç”±äºç³»ç»Ÿç»„ä»¶æ— æ³•æŸ¥çœ‹å…·ä½“å®ç°ï¼Œæˆ‘ä»¬æ²¡åŠæ³•æ¨¡æ‹Ÿå‡ºè¿™ç§é—­åŒ…çš„å†™æ³•ï¼Œåªèƒ½å°†å­ç»„ä»¶é€šè¿‡å±æ€§ä¼ é€’ã€‚ å­ç»„ä»¶éœ€è¦é€šè¿‡ @BuilderParam ä¼ é€’ï¼Œå®ƒç”¨æ¥æ‰¿æ¥ @Builder å‡½æ•°ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬è¿˜éœ€è¦å•ç‹¬å†™ä¸€ä¸ª @Builder å‡½æ•°æ¥å®ç°å­ç»„ä»¶ï¼š @Entry @Component struct MainPage { Stack({ alignContent: Alignment.Center }) { KeyCap({ keyFlatColor: Color.Brown, keyShadowColor: Color.Orange, keyStroke: 6, keyCapRadius: 60, child: this.keyCapChildBuilder }) .width(120) .height(54) .onClick(() =&gt; {}) } @Builder keyCapChildBuilder() { Text() // å­ç»„ä»¶å®ç° } } è¿™ç§è®¾è®¡éå¸¸è ¢ï¼Œä»¿ä½› View Tree å±‚æ¬¡ç¼ºå¤±ï¼Œä¸åˆ©äºé˜…è¯»ã€‚ åˆèƒ½æ€ä¹ˆæ ·å‘¢ï¼Œç”©ç”©æ‰‹ä¸Šçš„å±ç»§ç»­å†™å‘—ã€‚ ","link":"https://LiarrDev.github.io/post/ArkUI-Custom-Components-KeyCap/"},{"title":"Design Pattern: Factory","content":"å‰è¨€ å·¥å‚æ¨¡å¼ï¼ˆFactory Patternï¼‰æ˜¯æœ€å¸¸ç”¨çš„è®¾è®¡æ¨¡å¼ä¹‹ä¸€ï¼Œå®ƒä¸ä¹‹å‰ä»‹ç»çš„ã€Design Pattern: Singletonã€éƒ½å±äºåˆ›å»ºç±»å‹çš„è®¾è®¡æ¨¡å¼ã€‚ å®ƒåœ¨åˆ›å»ºå¯¹è±¡æ—¶æä¾›äº†ä¸€ç§å°è£…æœºåˆ¶ï¼Œå°†å®é™…åˆ›å»ºå¯¹è±¡çš„ä»£ç ä¸ä½¿ç”¨ä»£ç åˆ†ç¦»ã€‚åœ¨åˆ›å»ºå¯¹è±¡æ—¶ä¸ä¼šå¯¹å®¢æˆ·ç«¯æš´éœ²åˆ›å»ºé€»è¾‘ï¼Œè€Œæ˜¯ä½¿å…¶åˆ›å»ºè¿‡ç¨‹å»¶è¿Ÿåˆ°å­ç±»è¿›è¡Œï¼Œå¹¶ä¸”é€šè¿‡ä¸€ä¸ªå…±åŒçš„æ¥å£æ¥æŒ‡å‘æ–°åˆ›å»ºçš„å¯¹è±¡ã€‚å®ƒä¸»è¦è§£å†³æ¥å£é€‰æ‹©çš„é—®é¢˜ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå·¥å‚æ¨¡å¼æœ‰ä¸‰ç§å®ç°ï¼šç®€å•å·¥å‚æ¨¡å¼ï¼ˆSimple Factoryï¼‰ã€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆFactory Methodï¼‰ã€æŠ½è±¡å·¥å‚æ¨¡å¼ï¼ˆAbstract Factoryï¼‰ã€‚ è¿™ä¸‰ç§æ¨¡å¼ä»ä¸Šåˆ°ä¸‹é€æ­¥æŠ½è±¡ï¼Œä¸è¿‡å€¼å¾—ä¸€æçš„æ˜¯ï¼Œç®€å•å·¥å‚æ¨¡å¼å¹¶ä¸åœ¨ GoF 23 ç§è®¾è®¡æ¨¡å¼ä¹‹åˆ—ã€‚ ä¸‹é¢æˆ‘ä»¬é€ä¸€ä»‹ç»è¿™ä¸‰ç§å®ç°ã€‚ å®ç° å‡è®¾æˆ‘ä»¬éœ€è¦ç”Ÿäº§ä¸¤æ¬¾æ‰‹æœºï¼ˆä»¥ Apple å’Œ Samsung ä¸ºä¾‹ï¼‰ï¼Œåœ¨ä¸ä½¿ç”¨è®¾è®¡æ¨¡å¼çš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šè¿™ä¹ˆå†™ï¼š class Apple(val screen: String, val usb: String) { fun hardware() = println(&quot;[Apple] screen: $screen, usb: $usb&quot;) } class Samsung(val screen: String, val usb: String) { fun hardware() = println(&quot;[Samsung] screen: $screen, usb: $usb&quot;) } fun main() { val apple = Apple(&quot;LCD&quot;, &quot;Lightning&quot;) apple.hardware() val samsung = Samsung(&quot;OLed&quot;, &quot;Type-C&quot;) samsung.hardware() } å³ç”±ç”¨æˆ·æ‰‹åŠ¨å»åˆ›å»ºå®é™…çš„å¯¹è±¡ï¼Œåœ¨ä¸Šé¢è¿™ä¸ªä¾‹å­ä¸­ï¼Œç”¨æˆ·éœ€è¦çŸ¥é“å¦‚ä½•åˆ›å»ºä¸€å°æ‰‹æœºï¼Œéœ€è¦çŸ¥é“ä»€ä¹ˆæ‰‹æœºä½¿ç”¨ä»€ä¹ˆå±å¹•å’Œä»€ä¹ˆç±»å‹çš„ USB æ’å£ï¼Œç”¨æˆ·å’Œæ‰‹æœºçš„ç”Ÿäº§å°±è€¦åˆåœ¨ä¸€èµ·äº†ã€‚ ä¸ºäº†é™ä½è€¦åˆæ€§ï¼Œæˆ‘ä»¬å¼•å…¥å·¥å‚æ¨¡å¼ï¼ŒæŠŠæ‰‹æœºçš„ç”Ÿäº§ç»†èŠ‚æ”¾åˆ°å·¥å‚é‡Œï¼Œç”¨æˆ·æ— éœ€å…³å¿ƒè¿™å°æ‰‹æœºä½¿ç”¨ä»€ä¹ˆå±å¹•å’Œ USB æ’å£ï¼Œç›´æ¥è°ƒç”¨å·¥å‚çš„åˆ›å»ºæ–¹æ³•ï¼Œä¸å¿…çŸ¥é“åˆ›å»ºçš„ç»†èŠ‚ã€‚ Simple Factory ç®€å•å·¥å‚æ¨¡å¼ ç®€ä»‹ ç®€å•å·¥å‚æ¨¡å¼åˆå«ä½œé™æ€å·¥å‚æ–¹æ³•æ¨¡å¼ï¼ˆStatic Factory Methodï¼‰ã€‚å®ƒå°†å¯¹è±¡çš„åˆ›å»ºé€»è¾‘å°è£…åœ¨ä¸€ä¸ªå·¥å‚ç±»ä¸­ï¼Œå®¢æˆ·ç«¯é€šè¿‡è°ƒç”¨å·¥å‚ç±»çš„é™æ€æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ã€‚ ç®€å•å·¥å‚æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š Factoryï¼šå·¥å‚è§’è‰²ï¼Œè´Ÿè´£å®ç°åˆ›å»ºæ‰€æœ‰å®ä¾‹çš„å†…éƒ¨é€»è¾‘ã€‚ AbstractProductï¼šæŠ½è±¡äº§å“è§’è‰²ï¼Œæ˜¯åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹çš„å…¬å…±æ¥å£ã€‚ Productï¼šå…·ä½“äº§å“è§’è‰²ï¼Œå³åˆ›å»ºç›®æ ‡ï¼Œæ‰€æœ‰åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯è¯¥è§’è‰²ã€‚ abstract class Phone { abstract fun hardware() } class Apple(val screen: String, val usb: String) : Phone() { override fun hardware() = println(&quot;[Apple] screen: $screen, usb: $usb&quot;) } class Samsung(val screen: String, val usb: String) : Phone() { override fun hardware() = println(&quot;[Samsung] screen: $screen, usb: $usb&quot;) } object PhoneFactory { fun createPhone(type: String): Phone? { return when (type) { &quot;Apple&quot; -&gt; Apple(&quot;LCD&quot;, &quot;Lightning&quot;) &quot;Samsung&quot; -&gt; Samsung(&quot;OLed&quot;, &quot;Type-C&quot;) else -&gt; null } } } fun main() { val apple: Phone? = PhoneFactory.createPhone(&quot;Apple&quot;) apple?.hardware() val samsung: Phone? = PhoneFactory.createPhone(&quot;Samsung&quot;) samsung?.hardware() } åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒPhone å°±å……å½“äº†æŠ½è±¡äº§å“è§’è‰²ï¼ŒApple å’Œ Samsung éƒ½æ˜¯å…·ä½“äº§å“ï¼Œå·¥å‚æä¾›äº†é™æ€æ–¹æ³•ç”¨äºåˆ›å»ºå…·ä½“äº§å“ï¼Œç”¨æˆ·åªéœ€è¦ä¼ å…¥æ‰‹æœºçš„å“ç‰Œå³å¯è·å–æ‰‹æœºå®ä¾‹ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šç®€å•å·¥å‚æ¨¡å¼æä¾›ä¸“é—¨çš„å·¥å‚ç±»ç”¨äºåˆ›å»ºå¯¹è±¡ï¼Œå®ç°äº†å¯¹è±¡åˆ›å»ºå’Œä½¿ç”¨çš„èŒè´£åˆ†ç¦»ï¼Œå®¢æˆ·ç«¯ä¸éœ€çŸ¥é“æ‰€åˆ›å»ºçš„å…·ä½“äº§å“ç±»çš„ç±»åä»¥åŠåˆ›å»ºè¿‡ç¨‹ï¼Œåªéœ€è¦çŸ¥é“å…·ä½“äº§å“ç±»æ‰€å¯¹åº”çš„å‚æ•°å³å¯ã€‚é€šè¿‡å¼•å…¥é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥åœ¨ä¸ä¿®æ”¹ä»»ä½•å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹æ›´æ¢å’Œå¢åŠ æ–°çš„å…·ä½“äº§å“ç±»ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šæé«˜äº†ç³»ç»Ÿçš„çµæ´»æ€§ã€‚ ç¼ºç‚¹ï¼šä¸ç¬¦åˆè®¾è®¡æ¨¡å¼çš„å¼€é—­åŸåˆ™ï¼ˆå¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­ï¼‰ï¼Œæ¯æ¬¡æ·»åŠ æ–°çš„äº§å“å°±éœ€è¦ä¿®æ”¹å·¥å‚ç±»ã€‚åœ¨äº§å“ç±»å‹è¾ƒå¤šæ—¶ï¼Œæœ‰å¯èƒ½é€ æˆå·¥å‚é€»è¾‘è¿‡äºå¤æ‚ï¼Œä¸åˆ©äºç³»ç»Ÿçš„æ‰©å±•ç»´æŠ¤ã€‚ Factory Method å·¥å‚æ–¹æ³•æ¨¡å¼ ç®€ä»‹ å·¥å‚æ–¹æ³•æ¨¡å¼åˆè¢«ç§°ä¸ºè™šæ‹Ÿæ„é€ å­æ¨¡å¼ï¼ˆVirtual Constructorï¼‰æˆ–è€…å¤šæ€å·¥å‚æ¨¡å¼ï¼ˆPolymorphic Factoryï¼‰ã€‚å·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ç›®æ ‡æ˜¯å®šä¹‰ä¸€ä¸ªåˆ›å»ºäº§å“å¯¹è±¡çš„å·¥å‚æ¥å£ï¼Œå°†å®é™…åˆ›å»ºå·¥ä½œæ¨è¿Ÿåˆ°å­ç±»ä¸­ã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š AbstractFactoryï¼šæŠ½è±¡å·¥å‚è§’è‰²ï¼Œä¸åº”ç”¨ç¨‹åºæ— å…³ï¼Œä¸»è¦åœ¨åˆ›å»ºæ¨¡å¼ä¸­è§„èŒƒå’Œäº§å“å¯¹åº”çš„å·¥å‚å¯¹è±¡çš„æ ‡å‡†åŒ–å®šä¹‰ã€‚ Factoryï¼šå…·ä½“å·¥å‚è§’è‰²ï¼Œå’Œç”¨æˆ·ç›´æ¥äº¤äº’çš„å…·ä½“å®ç°ï¼Œç”¨æˆ·åˆ›å»ºäº§å“å¯¹è±¡ã€‚ AbstractProductï¼šæŠ½è±¡äº§å“è§’è‰²ï¼Œæ˜¯åˆ›å»ºçš„æ‰€æœ‰å¯¹è±¡çš„çˆ¶ç±»ï¼Œè´Ÿè´£æè¿°æ‰€æœ‰å®ä¾‹çš„å…¬å…±æ¥å£ã€‚ Productï¼šå…·ä½“äº§å“è§’è‰²ï¼Œå³åˆ›å»ºç›®æ ‡ï¼Œæ‰€æœ‰åˆ›å»ºçš„å¯¹è±¡éƒ½æ˜¯è¯¥è§’è‰²ã€‚ abstract class Phone { abstract fun hardware() } class Apple(val screen: String, val usb: String) : Phone() { override fun hardware() = println(&quot;[Apple] screen: $screen, usb: $usb&quot;) } class Samsung(val screen: String, val usb: String) : Phone() { override fun hardware() = println(&quot;[Samsung] screen: $screen, usb: $usb&quot;) } interface PhoneFactory { fun createPhone(): Phone } class AppleFactory : PhoneFactory { override fun createPhone(): Phone = Apple(&quot;LCD&quot;, &quot;Lightning&quot;) } class SamsungFactory : PhoneFactory { override fun createPhone(): Phone = Samsung(&quot;OLed&quot;, &quot;Type-C&quot;) } fun main() { val factory: PhoneFactory = AppleFactory() val phone: Phone = factory.createPhone() phone.hardware() } å·¥å‚æ–¹æ³•æ¨¡å¼åœ¨ç®€å•å·¥å‚æ¨¡å¼çš„åŸºç¡€ä¸ŠæŠ½è±¡äº†å·¥å‚ç±»ï¼Œå³å°†å…·ä½“çš„æ‰‹æœºåˆ›å»ºè¿‡ç¨‹äº¤ç»™ä¸“é—¨çš„å·¥å‚å­ç±»å»å®Œæˆã€‚ å·¥å‚æ–¹æ³•æ¨¡å¼ä¹‹æ‰€ä»¥åˆè¢«ç§°ä¸ºå¤šæ€å·¥å‚æ¨¡å¼ï¼Œæ˜¯å› ä¸ºæ‰€æœ‰çš„å…·ä½“å·¥å‚ç±»éƒ½å…·æœ‰åŒä¸€æŠ½è±¡çˆ¶ç±»ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šæœ€ç›´æ¥çš„ä¼˜ç‚¹å°±æ˜¯åœ¨æ»¡è¶³å¼€é—­åŸåˆ™çš„åŸºç¡€ä¸Šå®ç°åŠŸèƒ½çš„æ‰©å±•ï¼Œæ ¸å¿ƒå·¥å‚ç±»ä¸å†è´Ÿè´£æ‰€æœ‰äº§å“çš„æ„å»ºï¼Œè€Œæ˜¯å°†å…·ä½“çš„å·¥ä½œäº¤ç»™å·¥å‚å­ç±»å®ç°ï¼Œéœ€è¦å¢åŠ æ–°äº§å“æ—¶ï¼Œæ— é¡»ä¿®æ”¹å·²æœ‰çš„æŠ½è±¡æˆ–å…·ä½“çš„å·¥å‚æˆ–äº§å“ï¼Œåªè¦æ·»åŠ ä¸€ä¸ªå…·ä½“å·¥å‚å’Œå…·ä½“äº§å“å°±å¯ä»¥ã€‚ ç¼ºç‚¹ï¼šç”±äºåœ¨æ·»åŠ æ–°äº§å“æ—¶éœ€è¦ç¼–å†™æ–°çš„äº§å“ç±»å’Œå·¥å‚ç±»ï¼Œç³»ç»Ÿä¸­ç±»çš„ä¸ªæ•°å°†æˆå¯¹å¢åŠ ï¼Œåœ¨ä¸€å®šç¨‹åº¦ä¸Šå¢åŠ äº†å¤æ‚åº¦ï¼Œæœ‰æ›´å¤šçš„ç±»éœ€è¦ç¼–è¯‘å’Œè¿è¡Œï¼Œä¹Ÿä¼šç»™ç³»ç»Ÿå¸¦æ¥ä¸€äº›é¢å¤–å¼€é”€ã€‚ Abstract Factory æŠ½è±¡å·¥å‚æ¨¡å¼ ç®€ä»‹ æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯å·¥å‚æ–¹æ³•æ¨¡å¼çš„å‡çº§ç‰ˆæœ¬ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼åªç”Ÿäº§ä¸€ä¸ªç­‰çº§çš„äº§å“ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼å¯ç”Ÿäº§å¤šä¸ªç­‰çº§çš„äº§å“ã€‚ ä¸ºäº†æ›´æ¸…æ™°åœ°ç†è§£å·¥å‚æ–¹æ³•æ¨¡å¼ï¼Œéœ€è¦å…ˆå¼•å…¥ä¸¤ä¸ªæ¦‚å¿µï¼š äº§å“ç­‰çº§ç»“æ„ï¼šäº§å“ç­‰çº§ç»“æ„å³äº§å“çš„ç»§æ‰¿ç»“æ„ï¼Œå¦‚ä¸€ä¸ªæŠ½è±¡ç±»æ˜¯ç”µè§†æœºï¼Œå…¶å­ç±»æœ‰æµ·å°”ç”µè§†æœºã€æµ·ä¿¡ç”µè§†æœºã€ç´¢å°¼ç”µè§†æœºï¼Œåˆ™æŠ½è±¡ç”µè§†æœºä¸å…·ä½“å“ç‰Œçš„ç”µè§†æœºä¹‹é—´æ„æˆäº†ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼ŒæŠ½è±¡ç”µè§†æœºæ˜¯çˆ¶ç±»ï¼Œè€Œå…·ä½“å“ç‰Œçš„ç”µè§†æœºæ˜¯å…¶å­ç±»ã€‚ äº§å“æ—ï¼šåœ¨æŠ½è±¡å·¥å‚æ¨¡å¼ä¸­ï¼Œäº§å“æ—æ˜¯æŒ‡ç”±åŒä¸€ä¸ªå·¥å‚ç”Ÿäº§çš„ï¼Œä½äºä¸åŒäº§å“ç­‰çº§ç»“æ„ä¸­çš„ä¸€ç»„äº§å“ï¼Œå¦‚æµ·å°”ç”µå™¨å·¥å‚ç”Ÿäº§çš„æµ·å°”ç”µè§†æœºã€æµ·å°”ç”µå†°ç®±ï¼Œæµ·å°”ç”µè§†æœºä½äºç”µè§†æœºäº§å“ç­‰çº§ç»“æ„ä¸­ï¼Œæµ·å°”ç”µå†°ç®±ä½äºç”µå†°ç®±äº§å“ç­‰çº§ç»“æ„ä¸­ã€‚ å½“ç³»ç»Ÿæ‰€æä¾›çš„å·¥å‚æ‰€éœ€ç”Ÿäº§çš„å…·ä½“äº§å“å¹¶ä¸æ˜¯ä¸€ä¸ªç®€å•çš„å¯¹è±¡ï¼Œè€Œæ˜¯å¤šä¸ªä½äºä¸åŒäº§å“ç­‰çº§ç»“æ„ä¸­å±äºä¸åŒç±»å‹çš„å…·ä½“äº§å“æ—¶éœ€è¦ä½¿ç”¨æŠ½è±¡å·¥å‚æ¨¡å¼ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼æ˜¯æ‰€æœ‰å½¢å¼çš„å·¥å‚æ¨¡å¼ä¸­æœ€ä¸ºæŠ½è±¡å’Œæœ€å…·ä¸€èˆ¬æ€§çš„ä¸€ç§å½¢æ€ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼ä¸å·¥å‚æ–¹æ³•æ¨¡å¼æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼é’ˆå¯¹çš„æ˜¯ä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼Œè€ŒæŠ½è±¡å·¥å‚æ¨¡å¼åˆ™éœ€è¦é¢å¯¹å¤šä¸ªäº§å“ç­‰çº§ç»“æ„ï¼Œä¸€ä¸ªå·¥å‚ç­‰çº§ç»“æ„å¯ä»¥è´Ÿè´£å¤šä¸ªä¸åŒäº§å“ç­‰çº§ç»“æ„ä¸­çš„äº§å“å¯¹è±¡çš„åˆ›å»º ã€‚å½“ä¸€ä¸ªå·¥å‚ç­‰çº§ç»“æ„å¯ä»¥åˆ›å»ºå‡ºåˆ†å±äºä¸åŒäº§å“ç­‰çº§ç»“æ„çš„ä¸€ä¸ªäº§å“æ—ä¸­çš„æ‰€æœ‰å¯¹è±¡æ—¶ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æ¯”å·¥å‚æ–¹æ³•æ¨¡å¼æ›´ä¸ºç®€å•ã€æœ‰æ•ˆç‡ã€‚ æŠ½è±¡å·¥å‚æ¨¡å¼åŒ…å«å¦‚ä¸‹è§’è‰²ï¼š AbstractFactoryï¼šæŠ½è±¡å·¥å‚è§’è‰²ï¼Œä¸åº”ç”¨ç¨‹åºæ— å…³ï¼Œä¸»è¦åœ¨åˆ›å»ºæ¨¡å¼ä¸­è§„èŒƒå’Œäº§å“å¯¹åº”çš„å·¥å‚å¯¹è±¡çš„æ ‡å‡†åŒ–å®šä¹‰ã€‚ Factoryï¼šå…·ä½“å·¥å‚è§’è‰²ï¼Œç”¨äºç”Ÿäº§ä¸åŒçš„äº§å“æ—ã€‚ AbstractProductï¼šæŠ½è±¡äº§å“è§’è‰²ï¼Œå®šä¹‰äº†äº§å“çš„è§„èŒƒï¼Œæè¿°äº†äº§å“çš„å…±åŒä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ŒæŠ½è±¡å·¥å‚æ¨¡å¼æœ‰å¤šä¸ªæŠ½è±¡äº§å“ã€‚ Productï¼šå…·ä½“äº§å“è§’è‰²ï¼Œç”±ä¸“é—¨çš„å…·ä½“å·¥å‚æ¥åˆ›å»ºï¼Œå…·ä½“äº§å“å’Œå…·ä½“å·¥å‚ä¹‹é—´å¾€å¾€ä¸€ä¸€å¯¹åº”ã€‚ interface Tablet { fun play() } interface Earphone { fun play() } class iPad : Tablet { override fun play() = println(&quot;Apple iPad play game&quot;) } class Tab : Tablet { override fun play() = println(&quot;Samsung Tab play game&quot;) } class AirPods : Earphone { override fun play() = println(&quot;Apple AirPods play music&quot;) } class Buds : Earphone { override fun play() = println(&quot;Samsung Buds play music&quot;) } interface Factory { fun createTablet(): Tablet fun createEarphone(): Earphone } class AppleFactory : Factory { override fun createTablet(): Tablet = iPad() override fun createEarphone(): Earphone = AirPods() } class SamsungFactory : Factory { override fun createTablet(): Tablet = Tab() override fun createEarphone(): Earphone = Buds() } fun main() { val appleFactory: Factory = AppleFactory() appleFactory.createTablet().play() appleFactory.createEarphone().play() val samsungFactory: Factory = SamsungFactory() samsungFactory.createTablet().play() samsungFactory.createEarphone().play() } è¿™é‡Œå®šä¹‰äº†å¹³æ¿å’Œè€³æœºä¸¤ç±»äº§å“ï¼Œå„ä¸ºä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ï¼ŒApple å’Œ Samsung éƒ½ç”Ÿäº§è¿™ä¸¤ç±»äº§å“ï¼Œæ‰€ä»¥æ——ä¸‹çš„äº§å“å¯è§†ä¸ºäº§å“æ— æŠ½è±¡å·¥å‚å¯ä»¥é€šè¿‡å¤šæ€ï¼Œæ¥åŠ¨æ€è®¾ç½®ä¸åŒçš„å·¥å‚ï¼Œç”Ÿäº§ä¸åŒçš„äº§å“ï¼ŒåŒæ—¶æ¯ä¸ªå·¥å‚ä¸­çš„äº§å“åˆä¸å±äºåŒä¸€ä¸ªäº§å“ç­‰çº§ç»“æ„ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ï¼šå¯ä»¥åœ¨ç±»çš„å†…éƒ¨å¯¹äº§å“æ—ä¸­ç›¸å…³è”çš„å¤šç­‰çº§äº§å“å…±åŒç®¡ç†ï¼Œè€Œä¸å¿…ä¸“é—¨å¼•å…¥å¤šä¸ªæ–°çš„ç±»æ¥è¿›è¡Œç®¡ç†ã€‚å¢åŠ æ–°çš„å…·ä½“å·¥å‚å’Œäº§å“æ—å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºä¸€ä¸ªå…·ä½“çš„å·¥å‚å®ç°ä»£è¡¨çš„æ˜¯ä¸€ä¸ªäº§å“æ—ï¼Œæ— é¡»ä¿®æ”¹å·²æœ‰ç³»ç»Ÿï¼Œç¬¦åˆå¼€é—­åŸåˆ™ã€‚ ç¼ºç‚¹ï¼šå¼€é—­åŸåˆ™çš„å€¾æ–œæ€§ã€‚å¢åŠ æ–°çš„å·¥å‚å’Œäº§å“æ—å®¹æ˜“ï¼Œå¢åŠ æ–°çš„äº§å“ç­‰çº§ç»“æ„å´æ¯”è¾ƒéº»çƒ¦ï¼Œè¿™æ˜¯å› ä¸ºåœ¨æŠ½è±¡å·¥å‚è§’è‰²ä¸­è§„å®šäº†æ‰€æœ‰å¯èƒ½è¢«åˆ›å»ºçš„äº§å“é›†åˆï¼Œè¦æ”¯æŒæ–°ç§ç±»çš„äº§å“å°±æ„å‘³ç€è¦å¯¹è¯¥æ¥å£è¿›è¡Œæ‰©å±•ï¼Œè€Œè¿™å°†æ¶‰åŠåˆ°å¯¹æŠ½è±¡å·¥å‚è§’è‰²åŠå…¶æ‰€æœ‰å­ç±»çš„ä¿®æ”¹ï¼Œæ˜¾ç„¶ä¼šå¸¦æ¥è¾ƒå¤§çš„ä¸ä¾¿ã€‚ ","link":"https://LiarrDev.github.io/post/Design-Pattern-Factory/"},{"title":"ã€MOJiKanaã€ä¸­æ¨¡ä»¿å®ä½“æŒ‰é”®çš„åŠ¨æ•ˆæ˜¯å¦‚ä½•å®ç°çš„ï¼Ÿ","content":"åœ¨ã€MOJiKanaã€ä¸­ä½ å¯ä»¥çœ‹åˆ°æˆ‘ä»¬å¤§é‡ä½¿ç”¨äº†æ¨¡ä»¿å®ä½“æŒ‰é”®çš„æŒ‰å‹åŠ¨æ•ˆï¼š ä¸€å¼€å§‹è¿™ç§åŠ¨æ•ˆä»…åœ¨äº”åéŸ³åˆ—è¡¨ä¸­ä½¿ç”¨åˆ°ï¼Œæˆ‘ä»¬åªéœ€åœ¨ Adapter ä¸­å¯¹å­é¡¹è¿›è¡Œå¤„ç†å³å¯ï¼Œéšç€ç‰ˆæœ¬çš„è¿­ä»£ï¼Œè¯¥åŠ¨æ•ˆå¼€å§‹å¹¿æ³›åº”ç”¨åˆ°å…¶ä»–æŒ‰é’®è®¾è®¡ä¸­ï¼Œå¦‚æœé’ˆå¯¹æ¯ä¸ªæŒ‰é’®éƒ½åšè¿™ç§åŠ¨æ•ˆå¤„ç†ï¼Œé¡¹ç›®ä¸­ä¼šå­˜åœ¨å¤§é‡çš„å†—ä½™ä»£ç ï¼Œä¸æ˜“äºç»´æŠ¤ï¼Œæ‰€ä»¥æˆ‘è€ƒè™‘å°†å…¶å°è£…æˆä¸€ä¸ªç»„ä»¶ï¼Œè®©æ¯ä¸ªéœ€è¦ç”¨åˆ°çš„åœ°æ–¹éƒ½å°½å¯èƒ½ç®€å•åœ°æ¥å…¥ã€‚ å…ˆæ¥çœ‹çœ‹åŸç†ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œæˆ‘ä»¬åªéœ€è¦é€šè¿‡å åŠ ä¸¤ä¸ªå›¾å±‚ï¼Œä¸Šé¢çš„å›¾å±‚é‡‡ç”¨è¾ƒæµ…çš„é¢œè‰²ï¼Œä¸‹é¢çš„å›¾å±‚é‡‡ç”¨è¾ƒæ·±çš„é¢œè‰²ï¼Œå¹¶åœ¨ä¸Šä¸‹ä¸¤ä¸ªå›¾å±‚çš„åº•éƒ¨åˆ¶é€ ä¸€ä¸ªé—´è·ï¼Œå³å¯åœ¨è§†è§‰ä¸Šå½¢æˆä¸€ä¸ªå®ä½“æŒ‰é”®çš„æ•ˆæœã€‚ å½“æŒ‰é’®è¢«æŒ‰ä¸‹æ—¶ï¼Œæˆ‘ä»¬å–æ¶ˆä¸¤ä¸ªå›¾å±‚åº•éƒ¨çš„é—´è·ï¼Œä½¿åº•éƒ¨çš„æ·±è‰²å›¾å±‚è¢«è¦†ç›–éšè—ï¼Œå†ç»™å›¾å±‚ä¸çˆ¶å¸ƒå±€é¡¶éƒ¨æ·»åŠ åŒæ ·çš„é—´è·ï¼Œå°±èƒ½å¤Ÿæ¨¡ä»¿å‡ºå®ä½“æŒ‰é”®è¢«æŒ‰ä¸‹çš„æ•ˆæœã€‚ ä½¿ç”¨ä¸¤ä¸ªå›¾å±‚å…¶å®æ˜¯ Android çš„èƒ½åŠ›é™åˆ¶ï¼Œåƒ ArkUI ä¸­æˆ‘ä»¬å®é™…ä¸Šåªé‡‡ç”¨ä¸€ä¸ªå›¾å±‚ï¼Œç„¶åé€šè¿‡è°ƒæ•´åº•éƒ¨è¾¹æ¡†çš„å®½åº¦æ¥å®ç°çš„ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå®ç°æ€è·¯å¤§ä½“ä¸€è‡´ã€‚ çŸ¥é“äº†åŸç†ï¼Œä¸‹é¢å¼€å§‹ç¼–ç ã€‚ è€ƒè™‘åˆ°éœ€è¦å°è£…æˆé€šç”¨ç»„ä»¶ï¼Œæˆ‘ä»¬æŠŠå‡ ä¸ªé‡è¦çš„å±æ€§æå–å‡ºæ¥ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;resources&gt; &lt;declare-styleable name=&quot;KeyCapLayout&quot;&gt; &lt;attr name=&quot;keyCapFlatColor&quot; format=&quot;color&quot; /&gt; &lt;attr name=&quot;keyCapShadowColor&quot; format=&quot;color&quot; /&gt; &lt;attr name=&quot;keyStroke&quot; format=&quot;dimension&quot; /&gt; &lt;attr name=&quot;keyCapRadius&quot; format=&quot;dimension&quot; /&gt; &lt;/declare-styleable&gt; &lt;/resources&gt; æˆ‘æŠŠè¿™ä¸ªç»„ä»¶å‘½åä¸º KeyCapLayoutï¼Œå› ä¸ºå®ƒå¾ˆåƒæˆ‘ä»¬é”®ç›˜ä¸­çš„é”®å¸½ã€‚keyCapFlatColor è¡¨ç¤ºçš„æ˜¯æŒ‰é”®è¡¨é¢çš„é¢œè‰²ï¼Œä¹Ÿå°±æ˜¯åŸç†ä¸­ä¸Šé¢å›¾å±‚çš„é¢œè‰²ï¼ŒkeyCapShadowColor è¡¨ç¤ºçš„æ˜¯æŒ‰é”®çš„ä¾§é¢é˜´å½±é¢œè‰²ï¼Œä¹Ÿå°±æ˜¯åŸç†ä¸­ä¸‹é¢å›¾å±‚çš„é¢œè‰²ï¼ŒkeyStroke è¡¨ç¤ºçš„æ˜¯æŒ‰é”®çš„åšåº¦ï¼Œä¹Ÿå¯ä»¥ç†è§£ä¸ºåœ¨æœºæ¢°é”®ç›˜ä¸­æˆ‘ä»¬å¸¸è¯´çš„é”®ç¨‹ï¼ŒkeyCapRadius è¡¨ç¤ºçš„æ˜¯æŒ‰é”®çš„åœ†è§’åŠå¾„ï¼Œæˆ‘è¿™é‡Œæ²¡æœ‰åŒºåˆ†ä¸Šä¸‹ä¸¤ä¸ªå›¾å±‚çš„åŠå¾„ï¼Œè€Œæ˜¯é‡‡ç”¨åŒæ ·çš„å¤§å°ï¼Œè¯»è€…å¯æŒ‰éœ€æ·»åŠ ã€‚ æ¥ä¸‹æ¥å°è£…ç»„ä»¶ï¼š class KeyCapLayout @JvmOverloads constructor( context: Context, attrs: AttributeSet? = null, defStyle: Int = 0 ) : FrameLayout(context, attrs, defStyle) { private val keyCapFlat: QMUIFrameLayout // é”®ç›˜é¡¶éƒ¨ private val keyCapShadow: QMUIFrameLayout // é”®ç›˜ä¾§é¢ private val tagFlat = &quot;keyCapFlat&quot; private val tagShadow = &quot;keyCapShadow&quot; private var keystroke = 0 // é”®ç¨‹ init { val a = context.obtainStyledAttributes(attrs, R.styleable.KeyCapLayout) val flat = a.getColor(R.styleable.KeyCapLayout_keyCapFlatColor, Color.YELLOW) val shadow = a.getColor(R.styleable.KeyCapLayout_keyCapShadowColor, Color.GRAY) keystroke = a.getDimension(R.styleable.KeyCapLayout_keyStroke, 4.dp.toFloat()).toInt() val radius = a.getDimension(R.styleable.KeyCapLayout_keyCapRadius, 8.dp.toFloat()).toInt() a.recycle() keyCapFlat = QMUIFrameLayout(context).apply { layoutParams = LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT) tag = tagFlat } keyCapShadow = QMUIFrameLayout(context).apply { layoutParams = LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT) tag = tagShadow } setKeyCapFlatColor(flat) setKeyCapShadowColor(shadow) setKeyCapRadius(radius) setKeyStroke(keystroke) addView(keyCapShadow) addView(keyCapFlat) } /** * è®¾ç½®é”®å¸½é¢œè‰² */ fun setKeyCapFlatColor(@ColorInt color: Int) { keyCapFlat.setBackgroundColor(color) } /** * è®¾ç½®ç«–é¢é˜´å½±è‰² */ fun setKeyCapShadowColor(@ColorInt color: Int) { keyCapShadow.setBackgroundColor(color) } /** * è®¾ç½®åœ†è§’ */ fun setKeyCapRadius(radius: Int) { keyCapFlat.radius = radius keyCapShadow.radius = radius } /** * è®¾ç½®é”®ç¨‹ */ fun setKeyStroke(height: Int) { val lp = keyCapFlat.layoutParams as LayoutParams lp.setMargins(0, 0, 0, height) keyCapFlat.layoutParams = lp } /** * å¤„ç†æŒ‰å‹ * @param press æ˜¯å¦æŒ‰å‹ */ private fun handlePress(press: Boolean) { val lpFlat = keyCapFlat.layoutParams as LayoutParams val lpShadow = keyCapShadow.layoutParams as LayoutParams if (press) { lpFlat.setMargins(0, keystroke, 0, 0) lpShadow.setMargins(0, keystroke, 0, 0) } else { lpFlat.setMargins(0, 0, 0, keystroke) lpShadow.setMargins(0) } keyCapFlat.layoutParams = lpFlat } override fun onTouchEvent(event: MotionEvent?): Boolean { when (event?.action) { MotionEvent.ACTION_DOWN -&gt; { handlePress(true) } MotionEvent.ACTION_UP -&gt; { handlePress(false) performClick() } MotionEvent.ACTION_CANCEL -&gt; { handlePress(false) } } return true } override fun addView(child: View?) { if (child?.tag == tagFlat || child?.tag == tagShadow) { super.addView(child) } else { keyCapFlat.addView(child) } } override fun addView(child: View?, index: Int) { if (child?.tag == tagFlat || child?.tag == tagShadow) { super.addView(child, index) } else { keyCapFlat.addView(child, index) } } override fun addView(child: View?, params: ViewGroup.LayoutParams?) { if (child?.tag == tagFlat || child?.tag == tagShadow) { super.addView(child, params) } else { keyCapFlat.addView(child, params) } } override fun addView(child: View?, index: Int, params: ViewGroup.LayoutParams?) { if (child?.tag == tagFlat || child?.tag == tagShadow) { super.addView(child, index, params) } else { keyCapFlat.addView(child, index, params) } } override fun addView(child: View?, width: Int, height: Int) { if (child?.tag == tagFlat || child?.tag == tagShadow) { super.addView(child, width, height) } else { keyCapFlat.addView(child, width, height) } } } KeyCapLayout ç»§æ‰¿è‡ª FrameLayoutï¼Œæ— è®ºæ˜¯ç®€å•çš„æ–‡å­—å›¾ç‰‡ï¼Œæˆ–æ˜¯å¤æ‚çš„è‡ªå®šä¹‰è§†å›¾ï¼Œéƒ½å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¾€é‡Œé¢æ·»åŠ ã€‚ åŸç†ä¸­æåˆ°çš„ä¸Šä¸‹ä¸¤ä¸ªå›¾å±‚ï¼Œä¸ºäº†æ–¹ä¾¿åœ†è§’çš„è®¾ç½®ï¼Œæˆ‘é‡‡ç”¨äº† @Tencent/QMUI_Android è¿™ä¸ªåº“çš„ QMUIFrameLayout æ¥ä½œå®¹å™¨ï¼Œä½ ä¹Ÿå¯ä»¥é‡‡ç”¨å…¶ä»–çš„åœ†è§’æ–¹æ¡ˆã€‚ å†™ XML å¸ƒå±€æ—¶ï¼Œå¦‚æœæˆ‘ä»¬ç›´æ¥åœ¨ KeyCapLayout ä¸­æ·»åŠ å­è§†å›¾ï¼Œå­è§†å›¾é»˜è®¤ä¼šè¢«æ’å…¥åˆ° KeyCapLayout ä¸­ï¼Œè¿™æ ·åœ¨å¤„ç†æŒ‰å‹æ•ˆæœæ—¶è¿˜éœ€è¦é¢å¤–å¤„ç†å­è§†å›¾çš„ä¸Šä¸‹åç§»ï¼Œå¦‚æœæˆ‘ä»¬èƒ½å¤Ÿå°†å®ƒæ’å…¥åˆ°ä¸Šå›¾å±‚ä¸­ï¼Œå®ƒå°±ä»¿ä½›å°åœ¨æŒ‰é”®è¡¨é¢ä¸€æ ·ï¼Œè·Ÿéšå›¾å±‚ä¸Šä¸‹åç§»ï¼Œæ‰€ä»¥æˆ‘ä»¬é‡å†™ addView() æ–¹æ³•ï¼Œå°†å­è§†å›¾æ·»åŠ åˆ°ä¸Šå›¾å±‚ä¸­ã€‚ å› ä¸ºæˆ‘ä»¬é¦–å…ˆéœ€è¦è°ƒç”¨ addView() æŠŠä¸Šä¸‹ä¸¤ä¸ªå›¾å±‚æ·»åŠ åˆ° KeyCapLayout ä¸­ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…é€’å½’æ­»å¾ªç¯ï¼Œæˆ‘ä»¬ç»™ä¸Šä¸‹å›¾å±‚åˆ†åˆ«é…ç½® Tagï¼ŒaddView() æ—¶åˆ¤æ–­ä¸æ˜¯è¿™ä¸¤ä¸ªä¸Šä¸‹å›¾å±‚åˆ™æ·»åŠ åˆ°ä¸Šå›¾å±‚ä¸­ã€‚ æŒ‰å‹æ•ˆæœå°±é‡å†™è§¦æ‘¸äº‹ä»¶ onTouchEvent() å¤„ç†ï¼Œä¸Šé¢çš„åŸç†å·²ç»ä»‹ç»è¿‡äº†ï¼Œä¸å†é‡å¤ã€‚ è°ƒç”¨æ—¶åªéœ€åŒ…è£¹åœ¨æˆ‘ä»¬çš„å†…å®¹ä¸Šå³å¯ï¼š &lt;com.example.banner.KeyCapLayout android:layout_width=&quot;120dp&quot; android:layout_height=&quot;56dp&quot; app:keyCapFlatColor=&quot;#595959&quot; app:keyCapRadius=&quot;56dp&quot; app:keyCapShadowColor=&quot;#404040&quot; app:keyStroke=&quot;6dp&quot;&gt; &lt;TextView android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_gravity=&quot;center&quot; android:textStyle=&quot;bold&quot; android:textColor=&quot;@color/white&quot; android:textSize=&quot;18sp&quot; android:text=&quot;Button&quot; /&gt; &lt;/com.example.banner.KeyCapLayout&gt; ç‚¹å‡»äº‹ä»¶ä¹Ÿæ˜¯ç›´æ¥è°ƒç”¨ KeyCapLayout çš„ setOnClickListener() æ–¹æ³•ï¼Œæˆ‘ä»¬åœ¨ onTouchEvent() ä¸­å¤„ç†äº†ç›¸å…³é€»è¾‘ï¼Œå½“æ¥æ”¶åˆ° MotionEvent.ACTION_UP äº‹ä»¶æ—¶ï¼Œä¼šè‡ªåŠ¨è§¦å‘ onClick() æ–¹æ³•ã€‚ ã€MOJiKanaã€ä¸­åŒæ—¶ä¹Ÿä½¿ç”¨äº† Jetpack Compose æŠ€æœ¯ï¼Œä¸ºäº†å¤ç”¨ä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä¸å¾—ä¸æ¯æ¬¡éƒ½ä½¿ç”¨ AndroidView è¿›è¡ŒåŒ…è£¹ï¼Œå¹¶åœ¨å†…éƒ¨å®Œæˆæ•´ä¸ª KeyCapLayout çš„åˆ›å»ºã€é…ç½®ï¼Œè¿˜è¦åˆ›å»ºå®ƒçš„å­ View å†æ·»åŠ åˆ°å…¶ä¸­ã€‚æ¯”å¦‚ï¼š @Preview @Composable private fun KeyCapLayoutPreview() { Box( modifier = Modifier .fillMaxSize() .background(color = Color.White), contentAlignment = Alignment.Center ) { AndroidView(factory = { context -&gt; KeyCapLayout(context).apply { layoutParams = ViewGroup.LayoutParams(SizeUtils.dp2px(120f), SizeUtils.dp2px(54f)) setKeyCapFlatColor(context.getColor(R.color.color_595959)) setKeyCapShadowColor(context.getColor(R.color.color_404040)) setKeyCapRadius(SizeUtils.dp2px(60f)) setKeyStroke(SizeUtils.dp2px(6f)) val imageView = ImageView(context).apply { layoutParams = ViewGroup.LayoutParams(SizeUtils.dp2px(24f), SizeUtils.dp2px(24f)) setImageResource(R.drawable.ic_common_complete) } addView( imageView, FrameLayout.LayoutParams(FrameLayout.LayoutParams.WRAP_CONTENT, FrameLayout.LayoutParams.WRAP_CONTENT).apply { gravity = Gravity.CENTER } ) setOnClickListener { // do something... } } }) } } éšç€é¡¹ç›®ä¸­ä½¿ç”¨çš„åœºæ™¯é€æ¸å¢åŠ ï¼Œè¿™ç§èƒ¶æ°´ä»£ç ä¹Ÿåœ¨æ…¢æ…¢è†¨èƒ€ã€‚ç»ˆäºåˆ°äº†æ— æ³•å¿å—ä¹‹é™…ï¼Œæˆ‘åˆé¡ºæ‰‹æ“äº†ä¸ª Compose ç‰ˆæœ¬ï¼š @Composable fun KeyCap( modifier: Modifier = Modifier, keyFlatColor: Color = Color.Transparent, keyShadowColor: Color = Color.Transparent, keyStroke: Dp = 0.dp, keyCapRadius: Dp = 0.dp, content: @Composable BoxScope.() -&gt; Unit ) { var pressed by remember { mutableStateOf(false) } Box(modifier = modifier.pointerInput(pressed) { awaitPointerEventScope { if (pressed) { waitForUpOrCancellation() pressed = false } else { awaitFirstDown(false) pressed = true } } }) { Box( modifier = Modifier .padding(top = keyStroke) .fillMaxSize() .clip(RoundedCornerShape(size = keyCapRadius)) .background(keyShadowColor) ) Box( modifier = Modifier .padding( top = if (pressed) keyStroke else 0.dp, bottom = if (pressed) 0.dp else keyStroke ) .fillMaxSize() .clip(RoundedCornerShape(size = keyCapRadius)) .background(color = keyFlatColor), contentAlignment = Alignment.Center ) { content() } } } å±æ€§ä¾ç„¶æ˜¯é‚£å‡ ä¸ªå±æ€§ï¼Œä¸å†èµ˜è¿°ã€‚ è§¦æ‘¸äº‹ä»¶åœ¨ awaitPointerEventScope() å†…å¤„ç†ï¼Œä½¿ç”¨ä¸€ä¸ªçŠ¶æ€æ¥æ ‡è®°æŒ‰é’®æ˜¯å¦è¢«æŒ‰ä¸‹ã€‚ å¾—ç›Šäº Jetpack Compose çš„å£°æ˜å¼ç†å¿µï¼Œæ— éœ€å†è€ƒè™‘ä¸Šè¿°åŸå§‹ View ä½“ç³»ä¸­ addView() çš„é—®é¢˜ï¼Œè€Œæ˜¯ç›´æ¥æ·»åŠ åˆ°å¯¹åº”çš„ç»„ä»¶ä¸­å³å¯ã€‚ä¸ºäº†ç¬¦åˆ Compose çš„ç¼–å†™æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥å‚è€ƒå…¶ä»–ç»„ä»¶çš„è®¾è®¡ï¼Œåœ¨æœ€åä¸€ä¸ªå‚æ•°ä¼ å…¥ @Composable æ–¹æ³•å³å¯ã€‚ ä½¿ç”¨æ–¹å¼ä¹Ÿå¾ˆç®€å•ï¼š @Preview @Composable fun KeyCapPreview() { val interactionSource = remember { MutableInteractionSource() } Box( modifier = Modifier .fillMaxSize() .background(color = Color.White), contentAlignment = Alignment.Center ) { KeyCap( keyFlatColor = colorResource(R.color.color_595959), keyShadowColor = colorResource(R.color.color_404040), keyStroke = 6.dp, keyCapRadius = 60.dp, modifier = Modifier .size(120.dp, 54.dp) .clickableWithoutRipple(interactionSource) { // å»é™¤é»˜è®¤çš„ç‚¹å‡»æ•ˆæœ // do something... } ) { Text( text = stringResource(id = R.string.confirm), color = Color.White ) } } } éœ€è¦ç•™æ„çš„æ˜¯ï¼ŒCompose é»˜è®¤æƒ…å†µä¸‹ä¼šç»™ç»„ä»¶æ·»åŠ ä¸€ä¸ªç‚¹å‡»çš„ Ripple æ•ˆæœï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯é€šè¿‡ç»„åˆè§†å›¾æ¥å®ç°ï¼Œå¹¶ä¸”è¿˜æœ‰åœ†è§’ï¼Œæ‰€ä»¥è¿™ä¸ªé»˜è®¤çš„ç‚¹å‡»æ•ˆæœåè€Œä¼šå½±å“ä½“éªŒï¼Œè¦æŠŠå®ƒå»é™¤ã€‚ å»é™¤ç‚¹å‡»æ•ˆæœçš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼ŒCompose å®˜æ–¹ä¹Ÿåœ¨åç»­çš„ç‰ˆæœ¬ä¸­åšäº†æ›´æ–°ï¼Œå› ä¸ºæˆ‘ç›®å‰ä½¿ç”¨çš„ç‰ˆæœ¬è¿˜æ¯”è¾ƒä½ï¼Œæ‰€ä»¥æˆ‘ä½¿ç”¨æ‰©å±•æ–¹æ³•æ¥æ”¯æŒï¼Œå…¶ä»–å®ç°æ–¹å¼å¯ä»¥è‡ªè¡Œæœç´¢ã€‚ fun Modifier.clickableWithoutRipple( interactionSource: MutableInteractionSource, onClick: () -&gt; Unit ) = composed( factory = { this.then( Modifier.clickable( interactionSource = interactionSource, indication = null, onClick = { onClick() } ) ) } ) æœ€åæµ…æµ…åæ§½ä¸€ä¸‹ï¼Œè™½ç„¶è¿™ä¸ªè®¾è®¡æŒºæœ‰æ„æ€ï¼Œä½†æ˜¯æˆ‘ä¸ªäººè§‰å¾—å…¶å®è¿åäº†é€è§†åŸç†ã€‚ å› ä¸ºè§†è§‰ä¸Šè¿‘å¤§è¿œå°ï¼Œæ‰€ä»¥æŒ‰é’®ä¸Šçš„æ–‡å­—æˆ–å›¾ç‰‡æŒ‰é“ç†æ¥è¯´ä¹Ÿåº”å½“è¢«æ‹‰ä¼¸ï¼Œå·¦å³ä¸¤ä¾§çš„å»¶é•¿çº¿æœ€ç»ˆä¼šåœ¨æ¶ˆå¤±ç‚¹ç›¸äº¤ã€‚å³ä½¿è¿™ä¸ªå˜æ¢å¹¶ä¸éš¾å®ç°ï¼Œå¯æ˜¯ç”±äºæŒ‰é’®çš„å¤§å°æ˜¯åŠ¨æ€é…ç½®çš„ï¼Œå¯¼è‡´å˜æ¢çš„è§’åº¦ä»¥åŠæ¶ˆå¤±ç‚¹å°±ä¸å¤ªå¥½ç¡®å®šï¼Œå› æ­¤æˆ‘ä»¬æœ€ç»ˆå¹¶æ²¡æœ‰å®ç°è¿™ä¸ªæ•ˆæœã€‚ ","link":"https://LiarrDev.github.io/post/MOJiKana-Physical-Button-Motion-Effect/"},{"title":"FastScroller & AlphabetIndexer æ„å»º Android å­—æ¯ç´¢å¼•å™¨","content":"ä¹‹å‰æˆ‘åœ¨ã€ArkUI AlphabetIndexer çœŸé¦™ã€ä¸€æ–‡ä¸­æåˆ°ï¼ŒAndroid å¹³å°ä¹Ÿè‡ªå¸¦äº†ä¸€ä¸ª AlphabetIndexerï¼Œä¸å°‘ Android å¼€å‘è€…éƒ½è¡¨ç¤ºæ²¡è§è¿‡è¿™ç©æ„å„¿ã€‚ Android ä¸­çš„å­—æ¯ç´¢å¼•å™¨çš„ UI å…¶å®åº”è¯¥å« FastScrollerï¼Œå³ã€Œå¿«é€Ÿæ»‘åŠ¨å—ã€ï¼Œè€Œ AlphabetIndexer è¿™ä¸ªç±»ä¹Ÿç¡®å®å­˜åœ¨ï¼Œåªä¸è¿‡å®ƒæ˜¯ä½œä¸ºè¾…åŠ©ç±»æ¥å¤„ç†é€»è¾‘ï¼ŒFastScroller æ‰æ˜¯å¤„ç†æ»‘å—çš„æ˜¾ç¤ºã€‚ å› ä¸ºä½¿ç”¨èµ·æ¥ä¸æ–¹ä¾¿åˆæˆ–è€…æ˜¯æ ·å¼ä¸ç¬¦åˆå›½äººä½¿ç”¨ä¹ æƒ¯ç­‰åŸå› ï¼Œåœ¨å›½å†…çš„ App ä¸­éƒ½ä¸å¸¸è§ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆçœ‹çœ‹å®ƒçš„æ•ˆæœï¼š ä»Šå¤©å°±æ¥èŠèŠæ€ä¹ˆå®ç°ï¼Œè™½ç„¶æ—¥å¸¸åŸºæœ¬ä¸ä¼šä½¿ç”¨ï¼Œå°±å½“æ¶¨æ¶¨è§è¯†ã€‚ é¦–å…ˆæ¥çœ‹çœ‹å¸ƒå±€ï¼Œåˆ—è¡¨çš„å­é¡¹å°±ä¸€ä¸ª TextViewï¼Œæ²¡ä»€ä¹ˆå¥½è¯´çš„ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;TextView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:id=&quot;@+id/tv_contact&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:padding=&quot;16dp&quot; android:textSize=&quot;16sp&quot; android:textStyle=&quot;bold&quot; /&gt; é¡µé¢åˆ™ä½¿ç”¨ä¸€ä¸ª ListView æ¥åšå±•ç¤ºã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot;&gt; &lt;com.google.android.material.appbar.MaterialToolbar android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;@android:color/holo_purple&quot; app:title=&quot;Contacts&quot; /&gt; &lt;ListView android:id=&quot;@+id/list_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:fastScrollEnabled=&quot;true&quot; tools:listitem=&quot;@layout/item_contact&quot; /&gt; &lt;/LinearLayout&gt; æ³¨æ„è¿™é‡Œè¦é…ç½® android:fastScrollEnabled å±æ€§ã€‚ ä¸ä½¿ç”¨ RecyclerView çš„åŸå› æ˜¯å®ƒè¿˜éœ€è¦é…ç½®å…¶ä»–å±æ€§ï¼Œç›¸å¯¹æ¥è¯´æ›´åŠ å¤æ‚ï¼Œåç»­åæœºä¼šå†å•ç‹¬ä»‹ç»ã€‚ æ¥ä¸‹æ¥ç¼–å†™é€‚é…å™¨ï¼š class ContactAdapter( context: Context, cursor: Cursor, data: List&lt;Map&lt;String, String&gt;&gt;, @LayoutRes resource: Int, from: Array&lt;String&gt;, @IdRes to: IntArray ) : SimpleAdapter(context, data, resource, from, to), SectionIndexer { private val indexer = AlphabetIndexer(cursor, 0, &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ&quot;) override fun getSections(): Array&lt;Any&gt; { return indexer.sections } override fun getPositionForSection(sectionIndex: Int): Int { return indexer.getPositionForSection(sectionIndex) } override fun getSectionForPosition(position: Int): Int { return indexer.getSectionForPosition(position) } } å‰é¢çš„å¸ƒå±€ä¸­å¯ä»¥çœ‹åˆ°æ ·å¼ååˆ†ç®€å•ï¼Œæ‰€ä»¥è¿™é‡Œç›´æ¥ç»§æ‰¿ SimpleAdapterï¼ŒåŒæ—¶å®ç° SectionIndexerï¼Œè¿™é‡Œååˆ†å…³é”®ã€‚ æ„å»º AlphabetIndexerï¼Œéœ€è¦ç”¨åˆ° Cursorï¼Œæˆ‘ä»¬ä»ä¸Šä¸€å±‚ä¼ å…¥ï¼Œå¹¶å°† 26 ä¸ªå­—æ¯ä½œä¸ºç´¢å¼•ã€‚ AlphabetIndexer æœ¬èº«ä¹Ÿæ˜¯ SectionIndexer çš„å­ç±»ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬å®ç°çš„ SectionIndexer çš„æ¥å£ä¸­è°ƒç”¨ AlphabetIndexer çš„å¯¹åº”æ–¹æ³•è¿”å›ã€‚ æåˆ° Cursorï¼Œæˆ‘ä»¬æœ€å…ˆæƒ³åˆ°å¯ä»¥ç›´æ¥æŸ¥è¯¢æœ¬åœ°é€šè®¯å½•çš„æ•°æ®ï¼Œå®ƒä¼šç»™æˆ‘ä»¬è¿”å›ä¸€ä¸ª Cursor å¯¹è±¡ï¼Œå°±ä¸ç”¨æˆ‘ä»¬æ‰‹åŠ¨å°è£…æ•°æ®æºäº†ï¼š class MainActivity : AppCompatActivity() { private val binding by lazy { ActivityMainBinding.inflate(layoutInflater) } override fun onCreate(savedInstanceState: Bundle?) { super.onCreate(savedInstanceState) setContentView(binding.root) val cursor = contentResolver.query( ContactsContract.Contacts.CONTENT_URI, arrayOf(ContactsContract.Contacts.DISPLAY_NAME_PRIMARY), null, null, ContactsContract.Contacts.DISPLAY_NAME_PRIMARY ) startManagingCursor(cursor) cursor?.let { val list = getData(it) val adapter = ContactAdapter( this, it, list, R.layout.item_contact, arrayOf(ContactsContract.Contacts.DISPLAY_NAME_PRIMARY), intArrayOf(R.id.tv_contact) ) binding.listView.adapter = adapter } } private fun getData(cursor: Cursor): List&lt;Map&lt;String, String&gt;&gt; { val list = mutableListOf&lt;Map&lt;String, String&gt;&gt;() if (cursor.moveToFirst()) { do { val column = cursor.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME_PRIMARY) val name = cursor.getString(column) list.add(mapOf(ContactsContract.Contacts.DISPLAY_NAME_PRIMARY to name)) } while (cursor.moveToNext()) } return list } } Cursor æ•°æ®å–å‡º ContactsContract.Contacts.DISPLAY_NAME_PRIMARY è¿™ä¸€åˆ—ç”¨äºç»„è£…å­é¡¹ï¼Œå†å°† Cursor ä¼ å…¥åˆšåˆšçš„ ContactAdapter ä¸­æ„å»º AlphabetIndexerã€‚ è·å–è”ç³»äººè¿˜éœ€è¦åŠ¨æ€ç”³è¯·æƒé™ï¼Œè¿™éƒ¨åˆ†ä»£ç æ²¡æœ‰ç»™å‡ºï¼Œè‡ªè¡Œå¤„ç†å³å¯ã€‚ æœ‰äº›æœ‹å‹æ•²å®Œä¹‹åå¯èƒ½ä¼šå‘ç°ä¾§è¾¹çš„ç´¢å¼•å™¨å‡ºä¸æ¥ï¼Œå…¶å®ä¸æ˜¯ä»£ç çš„é—®é¢˜ï¼Œåªæ˜¯æ•°æ®é‡ä¸å¤Ÿå¯¼è‡´çš„ï¼Œä½ å¯ä»¥é…ç½® android:fastScrollAlwaysVisible å±æ€§è®©å®ƒä¿æŒæ˜¾ç¤ºï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout ...&gt; ... &lt;ListView ... android:fastScrollAlwaysVisible=&quot;true&quot; android:fastScrollEnabled=&quot;true&quot; /&gt; &lt;/LinearLayout&gt; å¦‚æœä¸é…ç½®è¯¥å±æ€§ï¼Œé»˜è®¤æƒ…å†µä¸‹åªæœ‰å½“å†…å®¹å¤§äº 4 é¡µæ—¶ï¼ŒListView æ‰ä¼šæ˜¾ç¤ºç´¢å¼•å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æºç ä¸­å¾—å‡ºè¿™ä¸ªç»“è®ºã€‚ ListView çš„çˆ¶ç±» AbsListView çš„æ„é€ æ–¹æ³•ä¸­æœ‰ android:fastScrollEnabled è¿™ä¸ªå±æ€§çš„é…ç½®ï¼š public abstract class AbsListView extends AdapterView&lt;ListAdapter&gt; implements TextWatcher, ViewTreeObserver.OnGlobalLayoutListener, Filter.FilterListener, ViewTreeObserver.OnTouchModeChangeListener, RemoteViewsAdapter.RemoteAdapterConnectionCallback { @UnsupportedAppUsage(maxTargetSdk = Build.VERSION_CODES.P, trackingBug = 123768941) private FastScroller mFastScroll; public AbsListView(Context context, AttributeSet attrs, int defStyleAttr, int defStyleRes) { ... final TypedArray a = context.obtainStyledAttributes(attrs, R.styleable.AbsListView, defStyleAttr, defStyleRes); setFastScrollEnabled(a.getBoolean(R.styleable.AbsListView_fastScrollEnabled, false)); setFastScrollStyle(a.getResourceId(R.styleable.AbsListView_fastScrollStyle, 0)); setFastScrollAlwaysVisible(a.getBoolean(R.styleable.AbsListView_fastScrollAlwaysVisible, false)); ... } public void setFastScrollEnabled(final boolean enabled) { if (mFastScrollEnabled != enabled) { mFastScrollEnabled = enabled; if (isOwnerThread()) { setFastScrollerEnabledUiThread(enabled); } else { post(new Runnable() { @Override public void run() { setFastScrollerEnabledUiThread(enabled); } }); } } } private void setFastScrollerEnabledUiThread(boolean enabled) { if (mFastScroll != null) { mFastScroll.setEnabled(enabled); } else if (enabled) { mFastScroll = new FastScroller(this, mFastScrollStyle); mFastScroll.setEnabled(true); } resolvePadding(); if (mFastScroll != null) { mFastScroll.updateLayout(); } } } å¯ä»¥çœ‹åˆ° ListView çš„å¿«é€Ÿæ»‘åŠ¨å—æ˜¯é€šè¿‡ FastScroller ç±»å®ç°çš„ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ FastScroller çš„åˆ›å»ºæµç¨‹ï¼š /** * Helper class for AbsListView to draw and control the Fast Scroll thumb */ class FastScroller { /** Minimum number of pages to justify showing a fast scroll thumb. */ private static final int MIN_PAGES = 4; /** * @return Whether the fast scroll thumb is enabled. */ public boolean isEnabled() { return mEnabled &amp;&amp; (mLongList || mAlwaysShow); } /** * Called when one of the variables affecting enabled state changes. * * @param peekIfEnabled whether the thumb should peek, if enabled */ private void onStateDependencyChanged(boolean peekIfEnabled) { if (isEnabled()) { if (isAlwaysShowEnabled()) { setState(STATE_VISIBLE); } else if (mState == STATE_VISIBLE) { postAutoHide(); } else if (peekIfEnabled) { setState(STATE_VISIBLE); postAutoHide(); } } else { stop(); } mList.resolvePadding(); } private void updateLongList(int childCount, int itemCount) { final boolean longList = childCount &gt; 0 &amp;&amp; itemCount / childCount &gt;= MIN_PAGES; if (mLongList != longList) { mLongList = longList; onStateDependencyChanged(false); } } ... } ä¸éš¾ç†è§£ï¼Œå½“å¼€å¯ android:fastScrollEnabled é…ç½®æ—¶ï¼Œæœ‰ä¸¤ç§æ¡ä»¶å¯ä»¥æ˜¾ç¤ºå¿«é€Ÿæ»‘åŠ¨å—ï¼Œä¸€æ˜¯é•¿åˆ—è¡¨ï¼ŒäºŒæ˜¯ android:fastScrollAlwaysVisible ä¹Ÿä¸º trueï¼Œé•¿åˆ—è¡¨çš„åˆ¤æ–­æ¡ä»¶æ˜¯æ•°æ®é‡å¤§äºç­‰äº MIN_PAGESï¼Œå³ 4 é¡µã€‚ ä»¥ä¸Šå°±æ˜¯ Android å­—æ¯ç´¢å¼•çš„ç®€å•å®ç°ï¼Œå…³äºè‡ªå®šä¹‰ç­‰å…¶ä»–ç”¨æ³•å°±ä¸å±•å¼€ä»‹ç»äº†ï¼Œæ¯•ç«Ÿä½¿ç”¨ç‡ä¸é«˜ï¼Œä»¥åæœ‰æœºä¼šå†èŠã€‚ ","link":"https://LiarrDev.github.io/post/Android-FastScroller-AlphabetIndexer/"},{"title":"æµ…æ EPUB ç»“æ„","content":"ä»€ä¹ˆæ˜¯ EPUB EPUBï¼ˆElectronic Publicationï¼‰æ˜¯ä¸€ç§ç”µå­å›¾ä¹¦æ ‡å‡†ï¼Œç”±å›½é™…æ•°å­—å‡ºç‰ˆè®ºå›ï¼ˆIDPFï¼‰æå‡ºï¼Œå±äºä¸€ç§å¯ä»¥â€œè‡ªåŠ¨é‡æ–°æ’ç‰ˆâ€çš„å†…å®¹ï¼›ä¹Ÿå°±æ˜¯æ–‡å­—å†…å®¹å¯ä»¥æ ¹æ®é˜…è¯»è®¾å¤‡çš„ç‰¹æ€§ï¼Œä»¥æœ€é€‚äºé˜…è¯»çš„æ–¹å¼æ˜¾ç¤ºã€‚å®ƒçš„æ–‡ä»¶æ‰©å±•åä¸º .epubã€‚ EPUB çš„ç»„æˆ EPUB æ–‡ä»¶å†…éƒ¨ä½¿ç”¨äº† XHTML æˆ– DTBookï¼ˆä¸€ç§ç”± DAISY Consortium æå‡ºçš„ XML æ ‡å‡†ï¼‰æ¥å±•ç°æ–‡å­—ï¼Œå¹¶ä»¥ ZIP å‹ç¼©æ ¼å¼æ¥æ‰“åŒ…æ–‡ä»¶å†…å®¹ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è§£å‹ç¼©çš„æ–¹å¼æ¥äº†è§£ EPUB çš„æ„æˆã€‚ ä¸‹é¢è¿™ä¸ªæ˜¯æˆ‘ä»æŸç”µå­ä¹¦ç½‘ç«™ä¸‹è½½çš„ä¸¤ä¸ª EPUB æ–‡ä»¶è§£å‹å›¾ï¼š EPUB çš„æ ‡å‡†å’Œè§„èŒƒä¸€ç›´åœ¨è¿­ä»£ï¼Œç›®å½•ä¹Ÿæœ‰æ‰€å·®å¼‚ï¼Œä½†æ–‡ä»¶ç»„æˆæ˜¯å¤§åŒå°å¼‚çš„ï¼Œä¸‹é¢å°†é€ä¸€ä»‹ç»å„æ–‡ä»¶çš„ä½œç”¨ã€‚ MIMETYPE å®ƒçš„æ–‡ä»¶åå°±æ˜¯ mimetypeï¼Œæ— æ–‡ä»¶æ‰©å±•åï¼Œç”¨äºæè¿° EPUB çš„ MIMEï¼Œæ‰€ä»¥å®ƒçš„å†…å®¹åªæœ‰ä¸€è¡Œï¼š application/epub+zip META-INF ç”¨äºå­˜æ”¾ç‰¹å®šæ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹é‡Œé¢åªæœ‰ä¸€ä¸ª container.xml æ–‡ä»¶ï¼Œç”¨äºæè¿° OPF çš„å­˜æ”¾ä½ç½®ã€‚ç”±äº EPUB çš„åˆ¶ä½œå·®å¼‚ï¼ŒMETA-INF æ–‡ä»¶å¤¹è¿˜å¯èƒ½åŒ…å«æ•°å­—ç­¾åå’ŒåŠ å¯†ä¿¡æ¯ç­‰æ–‡ä»¶ï¼ŒJava å¼€å‘è€…å¯¹è¿™ä¸ªç›®å½•åº”è¯¥ä¸é™Œç”Ÿã€‚ container.xml æ–‡ä»¶å¦‚ä¸‹ï¼š &lt;?xml version=&quot;1.0&quot;?&gt; &lt;container version=&quot;1.0&quot; xmlns=&quot;urn:oasis:names:tc:opendocument:xmlns:container&quot;&gt; &lt;rootfiles&gt; &lt;rootfile full-path=&quot;content.opf&quot; media-type=&quot;application/oebps-package+xml&quot;/&gt; &lt;/rootfiles&gt; &lt;/container&gt; è¯¥æ–‡ä»¶æ˜¯å¿…å®šå­˜åœ¨çš„ï¼Œå®ƒç›¸å½“äºæ˜¯ EPUB ç³»ç»Ÿçš„æŒ‡è·¯ç‰Œã€‚ OPF OPF æ–‡ä»¶æ˜¯ EPUB è§„èŒƒä¸­æœ€å¤æ‚çš„å…ƒæ•°æ®ï¼Œå®ƒç”¨æ¥å®šä¹‰ OPS ä¸€ç³»åˆ—å†…å®¹ç»„åˆåˆ°ä¸€èµ·çš„æœºåˆ¶ã€‚ å¸¸ç”¨çš„æ–‡ä»¶åæ˜¯ content.opfï¼Œå½“ç„¶ä¹Ÿå¯ä»¥æ˜¯å…¶ä»–ï¼Œä½†æ–‡ä»¶æ‰©å±•åå¿…é¡»æ˜¯ .opfï¼Œå®ƒå†…éƒ¨å…¶å®æ˜¯ä¸€ä¸ªæ ‡å‡†çš„ XMLï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ &lt;?xml version='1.0' encoding='utf-8'?&gt; &lt;package xmlns=&quot;http://www.idpf.org/2007/opf&quot; version=&quot;2.0&quot; unique-identifier=&quot;uuid_id&quot;&gt; &lt;metadata xmlns:opf=&quot;http://www.idpf.org/2007/opf&quot; xmlns:dc=&quot;http://purl.org/dc/elements/1.1/&quot;&gt; &lt;dc:title&gt;ä¸è¿ç»­æ€äººäº‹ä»¶&lt;/dc:title&gt; &lt;dc:creator&gt;å‚å£å®‰å¾&lt;/dc:creator&gt; &lt;dc:description&gt;ä¸è¿ç»­æ€äººäº‹ä»¶&lt;/dc:description&gt; &lt;dc:language&gt;zh-cn&lt;/dc:language&gt; &lt;dc:date&gt;&lt;/dc:date&gt; &lt;dc:contributor&gt;COAY.COM [http://www.coay.com]&lt;/dc:contributor&gt; &lt;dc:publisher&gt;COAY.COM&lt;/dc:publisher&gt; &lt;dc:identifier id=&quot;uuid_id&quot; opf:scheme=&quot;uuid&quot;&gt;8337&lt;/dc:identifier&gt; &lt;dc:subject&gt;ä¸è¿ç»­æ€äººäº‹ä»¶&lt;/dc:subject&gt; &lt;/metadata&gt; &lt;manifest&gt; &lt;item href=&quot;article_381876.html&quot; id=&quot;id381876&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381877.html&quot; id=&quot;id381877&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381878.html&quot; id=&quot;id381878&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381879.html&quot; id=&quot;id381879&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381880.html&quot; id=&quot;id381880&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381881.html&quot; id=&quot;id381881&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381882.html&quot; id=&quot;id381882&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381883.html&quot; id=&quot;id381883&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381884.html&quot; id=&quot;id381884&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381885.html&quot; id=&quot;id381885&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381886.html&quot; id=&quot;id381886&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;article_381887.html&quot; id=&quot;id381887&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;catalog.html&quot; id=&quot;catalog&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;cover.jpg&quot; id=&quot;cover&quot; media-type=&quot;image/jpeg&quot;/&gt; &lt;item href=&quot;coay.jpg&quot; id=&quot;ad&quot; media-type=&quot;image/jpeg&quot;/&gt; &lt;item href=&quot;stylesheet.css&quot; id=&quot;css&quot; media-type=&quot;text/css&quot;/&gt; &lt;item href=&quot;titlepage.xhtml&quot; id=&quot;titlepage&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;page.xhtml&quot; id=&quot;page&quot; media-type=&quot;application/xhtml+xml&quot;/&gt; &lt;item href=&quot;toc.ncx&quot; media-type=&quot;application/x-dtbncx+xml&quot; id=&quot;ncx&quot;/&gt; &lt;/manifest&gt; &lt;spine toc=&quot;ncx&quot;&gt; &lt;itemref idref=&quot;titlepage&quot;/&gt; &lt;itemref idref=&quot;page&quot;/&gt; &lt;itemref idref=&quot;catalog&quot;/&gt; &lt;itemref idref=&quot;id381876&quot;/&gt; &lt;itemref idref=&quot;id381877&quot;/&gt; &lt;itemref idref=&quot;id381878&quot;/&gt; &lt;itemref idref=&quot;id381879&quot;/&gt; &lt;itemref idref=&quot;id381880&quot;/&gt; &lt;itemref idref=&quot;id381881&quot;/&gt; &lt;itemref idref=&quot;id381882&quot;/&gt; &lt;itemref idref=&quot;id381883&quot;/&gt; &lt;itemref idref=&quot;id381884&quot;/&gt; &lt;itemref idref=&quot;id381885&quot;/&gt; &lt;itemref idref=&quot;id381886&quot;/&gt; &lt;itemref idref=&quot;id381887&quot;/&gt; &lt;itemref idref=&quot;page&quot;/&gt; &lt;/spine&gt; &lt;guide&gt; &lt;reference href=&quot;titlepage.xhtml&quot; type=&quot;cover&quot; title=&quot;å°é¢&quot;/&gt; &lt;reference href=&quot;catalog.html&quot; type=&quot;toc&quot; title=&quot;ç›®å½•&quot;/&gt; &lt;/guide&gt; &lt;/package&gt; å®ƒç”±å››ä¸ªéƒ¨åˆ†ç»„æˆï¼š &lt;metadata&gt;ï¼šå…ƒæ•°æ®ä¿¡æ¯ã€‚åŒ…å«ä¹¦åã€ä½œè€…ã€å‡ºç‰ˆç¤¾ç­‰ä¿¡æ¯ï¼Œå…¶ä¸­ &lt;dc:title&gt; å’Œ &lt;dc:identifier&gt; è¿™ä¸¤ä¸ªæ•°æ®æ˜¯å¿…é¡»çš„ã€‚æŒ‰ç…§ EPUB è§„èŒƒï¼Œ&lt;dc:identifier&gt; ç”±æ•°å­—å›¾ä¹¦çš„åˆ›å»ºè€…å®šä¹‰ï¼Œå¿…é¡»å”¯ä¸€ï¼Œå¯¹äºå›¾ä¹¦å‡ºç‰ˆå•†æ¥è¯´ï¼Œè¿™ä¸ªå­—æ®µä¸€èˆ¬åŒ…æ‹¬ ISBN æˆ–è€… Library of Congress ç¼–å·ã€‚ &lt;manifest&gt;ï¼šæ–‡ä»¶åˆ—è¡¨ã€‚åˆ—å‡ºç”µå­ä¹¦ä¸­åŒ…å«çš„èµ„æºæ–‡ä»¶ï¼ˆHTMLã€CSSã€NCXã€å›¾ç‰‡ç­‰ï¼‰ï¼Œå®ƒçš„æ¯ä¸€å­é¡¹éƒ½åŒ…å«äº†æ–‡ä»¶ IDã€ç›¸å¯¹è·¯å¾„ä»¥åŠåª’ä½“ç±»å‹ã€‚ &lt;spine&gt;ï¼šæ–‡æ¡£çº¿æ€§é˜…è¯»é¡ºåºã€‚å…¶ä¸­ toc å±æ€§æŒ‡å‘ &lt;manifest&gt; ä¸­ .ncx æ–‡ä»¶çš„ idï¼Œå­é¡¹çš„ idref å±æ€§åŒæ ·æŒ‡å‘ &lt;manifest&gt; ä¸­çš„æ–‡ä»¶ idã€‚ &lt;guide&gt;ï¼šç”µå­ä¹¦æŒ‡å¼•é¡µã€‚æ¯”å¦‚å°é¢ã€ç›®å½•ã€åºè¨€ç­‰ï¼Œé€šè¿‡ href å±æ€§æŒ‡å‘æ–‡ä»¶è·¯å¾„ã€‚ NCX NCX å®šä¹‰äº†æ•°å­—å›¾ä¹¦çš„ç›®å½•è¡¨ï¼Œå¤æ‚çš„å›¾ä¹¦ä¸­ï¼Œç›®å½•è¡¨é€šå¸¸é‡‡ç”¨å±‚æ¬¡ç»“æ„ï¼ŒåŒ…æ‹¬åµŒå¥—çš„å†…å®¹ã€ç« èŠ‚ç­‰ã€‚ å®ƒçš„æ–‡ä»¶åé€šå¸¸æ˜¯ toc.ncxï¼Œæ˜¯ä¸€ä¸ªé€»è¾‘ç›®å½•ï¼Œå†…éƒ¨ä¹Ÿæ˜¯ä¸€ä¸ªæ ‡å‡†çš„ XMLï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªä¾‹å­ã€‚ &lt;?xml version='1.0' encoding='utf-8'?&gt; &lt;ncx xmlns=&quot;http://www.daisy.org/z3986/2005/ncx/&quot; version=&quot;2005-1&quot;&gt; &lt;head&gt; &lt;meta name=&quot;dtb:uid&quot; content=&quot;coay_8337&quot;/&gt; &lt;meta name=&quot;dtb:depth&quot; content=&quot;2&quot;/&gt; &lt;meta name=&quot;dtb:generator&quot; content=&quot;COAY.COM [http://www.coay.com]&quot;/&gt; &lt;meta name=&quot;dtb:totalPageCount&quot; content=&quot;0&quot;/&gt; &lt;meta name=&quot;dtb:maxPageNumber&quot; content=&quot;0&quot;/&gt; &lt;/head&gt; &lt;docTitle&gt;&lt;text&gt;ä¸è¿ç»­æ€äººäº‹ä»¶&lt;/text&gt;&lt;/docTitle&gt; &lt;docAuthor&gt;&lt;text&gt;å‚å£å®‰å¾&lt;/text&gt;&lt;/docAuthor&gt; &lt;navMap&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381876&quot; playOrder=&quot;1&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬ä¸€ç«  ä¸‘æ¶ä¸‡åˆ†çš„äººé™…å…³ç³»ï¼ˆ1ï¼‰&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381876.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381877&quot; playOrder=&quot;2&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬ä¸€ç«  ä¸‘æ¶ä¸‡åˆ†çš„äººé™…å…³ç³»ï¼ˆ2ï¼‰&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381877.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381878&quot; playOrder=&quot;3&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬äºŒç«  æ„å¤–çš„è®¿å®¢&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381878.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381879&quot; playOrder=&quot;4&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬ä¸‰ç«  ä¸é€Ÿä¹‹å®¢&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381879.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381880&quot; playOrder=&quot;5&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬å››ç«  ç¬¬ä¸€ä½è¢«å®³è€…&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381880.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381881&quot; playOrder=&quot;6&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬äº”ç«  çŒ« é“ƒï¼ˆ1ï¼‰&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381881.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381882&quot; playOrder=&quot;7&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬äº”ç«  çŒ« é“ƒï¼ˆ2ï¼‰&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381882.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381883&quot; playOrder=&quot;8&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬å…­ç«  ç¬¬äºŒæ¡©æ¡ˆä»¶&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381883.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381884&quot; playOrder=&quot;9&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬ä¸ƒç«  èº«ä¸ºä¾¦æ¢å°è¯´è¿·çš„è€æ”¿å®¢&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381884.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381885&quot; playOrder=&quot;10&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬å…«ç«  å”¯ä¸€çš„ä¸åœ¨åœºè¯æ˜&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381885.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381886&quot; playOrder=&quot;11&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬ä¹ç«  ç«è‘¬å½’é€”&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381886.html&quot;/&gt; &lt;/navPoint&gt; &lt;navPoint class=&quot;chapter&quot; id=&quot;article_381887&quot; playOrder=&quot;12&quot;&gt; &lt;navLabel&gt;&lt;text&gt;ç¬¬åç«  ç–¯å­å¤§é›†åˆ&lt;/text&gt;&lt;/navLabel&gt; &lt;content src=&quot;article_381887.html&quot;/&gt; &lt;/navPoint&gt; &lt;/navMap&gt; &lt;/ncx&gt; å®ƒæœ‰å¦‚ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š &lt;head&gt;ï¼šè¯¥æ ‡ç­¾å†…ä¸»è¦åŒ…å«å››ä¸ª &lt;meta&gt; å…ƒç´ ï¼š dtb:uidï¼šæ•°å­—å›¾ä¹¦å”¯ä¸€ IDã€‚ä¸€èˆ¬å’Œ OPF ä¸­çš„ &lt;dc:identifier&gt; å¯¹åº”ã€‚ dtb:depthï¼šåæ˜ ç›®å½•è¡¨ä¸­çš„å±‚æ¬¡æ·±åº¦ã€‚ dtb:totalPageCountï¼šä»…ç”¨äºçº¸è´¨å›¾ä¹¦ï¼Œä¿ç•™ 0 å³å¯ã€‚ dtb:maxPageNumberï¼šä»…ç”¨äºçº¸è´¨å›¾ä¹¦ï¼Œä¿ç•™ 0 å³å¯ã€‚ &lt;docTitle&gt;ï¼šå›¾ä¹¦æ ‡é¢˜ã€‚ä¸€èˆ¬å’Œ OPF ä¸­çš„ &lt;dc:title&gt; å¯¹åº”ã€‚ &lt;docAuthor&gt;ï¼šå›¾ä¹¦ä½œè€…ã€‚ä¸€èˆ¬å’Œ OPF ä¸­çš„ &lt;dc:creator&gt; å¯¹åº”ã€‚ &lt;navMap&gt;ï¼šå›¾ä¹¦ç›®å½•ã€‚åŒ…å«å¤šä¸ª &lt;navPoint&gt;ï¼Œå†…éƒ¨åˆåŒ…å«ä¸‹åˆ—å…ƒç´ ï¼š playOrderï¼šæ–‡æ¡£é˜…è¯»é¡ºåºã€‚å’Œ OPF ä¸­ &lt;spine&gt; çš„å­é¡¹é¡ºåºç›¸åŒã€‚ &lt;navLabel&gt;ï¼šç« èŠ‚æ ‡é¢˜ã€‚ &lt;content&gt;ï¼šæŒ‡å‘æ–‡ä»¶è·¯å¾„ã€‚å’Œ OPF ä¸­ &lt;manifest&gt; å­é¡¹é…ç½®çš„è·¯å¾„ä¸€è‡´ã€‚ èµ„æºæ–‡ä»¶ é™¤äº†ä¸Šé¢ä»‹ç»çš„å‡ ä¸ªé‡è¦æ–‡ä»¶å¤–ï¼Œå‰©ä¸‹çš„å‡ ä¹éƒ½æ˜¯èµ„æºæ–‡ä»¶ã€‚åŒ…æ‹¬ HTML/XHTMLã€CSSã€JPGã€PNGã€SVG ç­‰ç­‰ã€‚HTML/XHTML åˆ™æ˜¯ä¹¦ç±çš„å†…å®¹ï¼Œé‡Œé¢ä¼šå¼•ç”¨ CSS å’Œå›¾ç‰‡ç­‰ã€‚ è¿™äº›æ–‡ä»¶æ²¡æœ‰æ˜ç¡®çš„è·¯å¾„è¦æ±‚ï¼ˆäº‹å®ä¸Šé™¤äº† mimetype å’Œ container.xml ä¸¤ä¸ªæ–‡ä»¶æœ‰æ˜ç¡®çš„è¦æ±‚å¤–ï¼Œå…¶ä»–æ–‡ä»¶éƒ½æ²¡æœ‰æ˜ç¡®çš„è·¯å¾„è¦æ±‚ï¼‰ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæ–‡ç« å¼€å¤´çš„ä¸¤ä¸ª EPUB ç›®å½•ä¼šç›¸å·®è¿™ä¹ˆå¤§ã€‚ OPF &lt;spine&gt; å’Œ NCX &lt;navMap&gt; çš„åŒºåˆ« ä¸¤ä¸ªæ–‡ä»¶éƒ½æè¿°äº†æ–‡æ¡£çš„é¡ºåºå’Œå†…å®¹ï¼Œè¿™å¾ˆå®¹æ˜“æ··æ·†ã€‚ OPF &lt;spine&gt; æè¿°äº†ä¹¦ä¸­å„ä¸ªç« èŠ‚æ˜¯å¦‚ä½•å®é™…è¿æ¥èµ·æ¥çš„ï¼Œæ¯”æ–¹è¯´ç¿»è¿‡ç¬¬ä¸€ç« æœ€åä¸€é¡µå°±åˆ°ç¬¬äºŒç« ç¬¬ä¸€é¡µã€‚ NCX &lt;navMap&gt; åœ¨å›¾ä¹¦ä¸€å¼€å§‹æè¿°ç›®å½•ã€‚ç›®å½•è‚¯å®šä¼šåŒ…å«ä¹¦ä¸­ä¸»è¦çš„ç« èŠ‚ï¼Œä½†æ˜¯è¿˜å¯èƒ½åŒ…å«æ²¡æœ‰å•ç‹¬åˆ†é¡µçš„å°èŠ‚ã€‚ NCX åŒ…å«çš„ &lt;navPoint&gt; å…ƒç´ é€šå¸¸æ¯” OPF &lt;spine&gt; ä¸­çš„ itemref å…ƒç´ å¤šã€‚ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œ&lt;spine&gt; ä¸­çš„æ‰€æœ‰é¡¹éƒ½ä¼šå‡ºç°åœ¨ NCX ä¸­ï¼Œä½† NCX å¯èƒ½æ›´è¯¦ç»†ã€‚ å¼€å‘ åŸºäºä»¥ä¸ŠçŸ¥è¯†ï¼Œä½ å®Œå…¨å¯ä»¥è‡ªè¡Œæ„å»ºä¸€æœ¬ EPUB ç”µå­ä¹¦äº†ã€‚æ‰€ä»¥åœ¨æ­¤æˆ‘ä¸æ‰“ç®—ä»‹ç» EPUB çš„åˆ¶ä½œæµç¨‹ã€‚ ç®€å•è¯´ä¸€ä¸‹ EPUB é˜…è¯»å™¨çš„åˆ¶ä½œã€‚ ç”±ä¸Šé¢çš„ä»‹ç»å¾—çŸ¥ï¼ŒEPUB å†…å®¹æ˜¯ä¾é  HTML/XHTML æ¸²æŸ“çš„ï¼Œä»¥ Android ä¸ºä¾‹ï¼Œæˆ‘ä»¬å°±å¯ä»¥å€ŸåŠ© WebView åŠ è½½ã€‚ é¦–å…ˆéœ€è¦è§£å‹ EPUB æ–‡ä»¶ï¼Œå–å‡º META-INF ä¸­çš„ container.xml æ–‡ä»¶ï¼Œè§£æè·å– OPF æ–‡ä»¶è·¯å¾„ï¼Œå†å–å‡º OPF æ–‡ä»¶è¿›è¡Œè§£æï¼Œè·å–å…ƒæ•°æ®ã€èµ„æºã€é˜…è¯»é¡ºåºç­‰ä¿¡æ¯ï¼Œæœ€åå°† HTML/XHTML æŒ‰é¡ºåºäº¤ç»™ WebView åŠ è½½ã€‚ å› ä¸ºä¸Šé¢ä»‹ç»çš„é…ç½®æ–‡ä»¶åŸºæœ¬éƒ½æ˜¯ XMLï¼Œä½ å¯ä»¥å€ŸåŠ©ä¹‹å‰ä»‹ç»çš„ Dom4J å®Œæˆè§£æã€‚ å¦‚æœéœ€è¦äº¤äº’åŠŸèƒ½ï¼Œå¯ä»¥å‘ WebView ä¸­æ³¨å…¥ JavaScript æ¥å®Œæˆã€‚ ","link":"https://LiarrDev.github.io/post/EPUB-Structure/"},{"title":"ArkUI AlphabetIndexer çœŸé¦™","content":"æœ€è¿‘åœ¨ä¸ºå…¬å¸å¼€å‘ HarmonyOS NEXT çš„åº”ç”¨ï¼Œå¯¹ HarmonyOS NEXT æœ‰æ‰€äº†è§£çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼Œå®ƒä¸å½“å‰å¸‚é¢ä¸Šæ‰€æ­è½½çš„ HarmonyOS ç³»ç»Ÿçš„æ‰‹æœºä¸åŒï¼Œç°åœ¨å¸‚é¢ä¸Šçš„ HarmonyOS ä»åŸºäº Android å¹³å°ï¼Œåº”ç”¨ä¹Ÿå¤§å¤šæ•°æ˜¯åŸºäº Java/Kotlin å¼€å‘ï¼Œè€Œå³å°†å‘å¸ƒçš„ HarmonyOS NEXT ç‰ˆæœ¬ï¼Œå°†ä¸å†å…¼å®¹åŸæœ‰çš„ Android åº”ç”¨ï¼Œè€Œæ˜¯ä½¿ç”¨ä¸€å¥—åŸºäº ArkTS çš„å¼€å‘æ¡†æ¶ ArkUIã€‚ åœ¨å¼€å‘æœŸé—´æˆ‘ä¹Ÿæ·±æ·±åœ°æ„Ÿå—åˆ°ï¼Œä¸åŒä¸ºå£°æ˜å¼ UI æ¡†æ¶çš„ Jetpack Compose ç›¸æ¯”ï¼ŒArkUI ä»æ—§ååˆ†éš¾ç”¨ï¼Œä¸€éƒ¨åˆ†æ˜¯ ArkTS è¿™ä¸ªè¯­è¨€ä¸ Kotlin çš„å·®è·ï¼Œä¸€éƒ¨åˆ†æ˜¯ ArkUI è®¾è®¡è€…åœ¨å¼€å‘æ—¶è€ƒè™‘çš„åœºæ™¯æ¬ ç¼ºï¼Œä¸€éƒ¨åˆ†æ˜¯ä»£ç ç¼–è¾‘å™¨ DevEco Studio åŠŸèƒ½ä¸å®Œå–„ï¼Œå½“ç„¶è¿˜æœ‰ä¸€éƒ¨åˆ†æ˜¯æˆ‘å¯¹ ArkUI/ArkTS çš„ä¸ç†Ÿæ‚‰ã€‚ å°½ç®¡æ¯å¤©å¼€å‘æ—¶éƒ½åœ¨å£åè²èŠ±ï¼Œä½†æˆ‘ä¸å¾—ä¸è¯´ï¼ŒArkUI ç¡®å®æœ‰ä¸€ä¸ªç»„ä»¶æˆ‘å¾—å¹çˆ†å®ƒï¼Œå°±æ˜¯ AlphabetIndexerï¼Œç¿»è¯‘è¿‡æ¥å«å­—æ¯ç´¢å¼•å™¨ï¼Œå¤¸å®ƒçš„åŸå› ä¹Ÿå¾ˆç®€å•ï¼Œè™½ç„¶ Android ä¸­ä¹Ÿæœ‰ AlphabetIndexerï¼Œå¯æ˜¯å®ƒä»…æä¾›äº†ä¸€äº›åŸºç¡€æ¥å£ï¼Œå…·ä½“é€»è¾‘è¿˜éœ€è¦è‡ªå·±å®ç°ï¼Œè™½ç„¶æ‰©å±•æ€§é«˜ï¼Œä¸è¿‡å¯¹äºç›¸åŒçš„æ•ˆæœï¼Œæˆ‘ä»¬å¾€å¾€ä¼šé€‰æ‹©è‡ªå·±æ‰‹æ“æˆ–è€…ä½¿ç”¨ä¸‰æ–¹åº“ã€‚ å¯¹äºä¸çŸ¥é“ AlphabetIndexer æ˜¯ä»€ä¹ˆçš„æœ‹å‹ï¼Œæˆ‘å…ˆä¸Šä¸ªæ•ˆæœå›¾ï¼š å³è¾¹çš„å¯ä»¥ç‚¹å‡»æ»‘åŠ¨çš„å°±æ˜¯ AlphabetIndexerï¼Œå½“åˆ—è¡¨æ•°æ®éå¸¸å¤šæ—¶ï¼Œå®ƒèƒ½å¤Ÿå¿«é€Ÿå¸®æˆ‘ä»¬å®šä½åˆ°éœ€è¦å¯»æ‰¾çš„æ•°æ®é™„è¿‘ï¼Œåœ¨é€šè®¯å½•ä¸­ä¹Ÿå¾ˆå¸¸è§ã€‚ åºŸè¯äº†è¿™ä¹ˆä¹…ï¼Œå¼€æ•´ã€‚ é¦–å…ˆå®šä¹‰å¥½æˆ‘ä»¬çš„æ•°æ®ç±»ï¼Œæ•°æ®æœ‰ä¸¤ç§æ ¼å¼ï¼Œä¸€ç§æ˜¯åˆ†ç±»æ ‡é¢˜å­—æ¯ RegionAlphabetï¼Œåªéœ€åŒ…å«ä¸€ä¸ª string ç±»å‹çš„å­—æ®µï¼›ä¸€ç§æ˜¯æ•°æ®è¯¦æƒ… RegionDetailï¼Œéœ€è¦åŒ…å«ä¸€ä¸ª string ç±»å‹çš„åç§°å’Œä¸€ä¸ª number ç±»å‹çš„åŒºç ã€‚ export class RegionAlphabet { alphabet: string = &quot;&quot;; constructor(alphabet: string) { this.alphabet = alphabet } } export class RegionDetail { region: string = &quot;&quot;; code: number = 0; } export type BaseRegion = RegionAlphabet | RegionDetail å¦å¤–è¿˜å®šä¹‰äº†ä¸€ä¸ª BaseRegion ç±»å‹å…³è”è¿™ä¸¤ç§æ•°æ®ç±»ï¼Œæ–¹ä¾¿æˆ‘ä»¬åé¢çš„æ•°æ®å¤„ç†ã€‚ export class RegionViewModel { static alphabets: string[] = [ &quot;çƒ­&quot;, &quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;, &quot;E&quot;, &quot;F&quot;, &quot;G&quot;, &quot;H&quot;, &quot;I&quot;, &quot;J&quot;, &quot;K&quot;, &quot;L&quot;, &quot;M&quot;, &quot;N&quot;, &quot;O&quot;, &quot;P&quot;, &quot;Q&quot;, &quot;R&quot;, &quot;S&quot;, &quot;T&quot;, &quot;U&quot;, &quot;V&quot;, &quot;W&quot;, &quot;X&quot;, &quot;Y&quot;, &quot;Z&quot; ] static hotRegions: RegionDetail[] = [ { &quot;region&quot;: &quot;ä¸­å›½å¤§é™†&quot;, &quot;code&quot;: 86 }, { &quot;region&quot;: &quot;ä¸­å›½é¦™æ¸¯&quot;, &quot;code&quot;: 852 }, { &quot;region&quot;: &quot;ä¸­å›½æ¾³é—¨&quot;, &quot;code&quot;: 853 }, { &quot;region&quot;: &quot;ä¸­å›½å°æ¹¾&quot;, &quot;code&quot;: 886 }, { &quot;region&quot;: &quot;ç¾å›½&quot;, &quot;code&quot;: 1 }, { &quot;region&quot;: &quot;æ—¥æœ¬&quot;, &quot;code&quot;: 81 } ] private static regions: RegionDetail[] = [ { &quot;region&quot;: &quot;é˜¿å¯Œæ±—&quot;, &quot;code&quot;: 93 }, { &quot;region&quot;: &quot;é˜¿å°”å·´å°¼äºš&quot;, &quot;code&quot;: 355 }, { &quot;region&quot;: &quot;é˜¿å°”åŠåˆ©äºš&quot;, &quot;code&quot;: 213 }, { &quot;region&quot;: &quot;ç¾å±è¨æ‘©äºš&quot;, &quot;code&quot;: 1684 }, { &quot;region&quot;: &quot;å®‰é“å°”&quot;, &quot;code&quot;: 376 }, { &quot;region&quot;: &quot;å®‰å“¥æ‹‰&quot;, &quot;code&quot;: 244 }, ... } è¿™é‡Œæœ‰ 3 ä¸ªæ•°æ®æºï¼Œé¦–å…ˆæ˜¯æˆ‘ä»¬ AlphabetIndexer ç”¨åˆ°çš„å­—æ¯ç´¢å¼•åˆ—è¡¨ï¼Œé™¤äº†å¸¸è§„çš„ 26 ä¸ªå­—æ¯ï¼Œæˆ‘ä»¬è¿˜ä¼šåœ¨å‰é¢æ”¾ç½®å¸¸ç”¨çš„æ ‡ç­¾ï¼Œå‡å°‘ç”¨æˆ·çš„æ“ä½œæ­¥éª¤ã€‚ç¬¬äºŒä¸ªæ•°æ®æºå°±æ˜¯å¸¸ç”¨çš„æ•°æ®ï¼Œç¬¬ä¸‰ä¸ªç±»å‹æ˜¯æ€»æ•°æ®ï¼Œè¿™éƒ¨åˆ†æ•°æ®å¤ªå¤šï¼Œæˆ‘åªæˆªå–å°éƒ¨åˆ†æ•°æ®ç¤ºä¾‹ï¼Œè¯»è€…çŸ¥é“æ˜¯è¿™ç§æ ¼å¼å³å¯ã€‚ æˆ‘ä»¬è¿˜éœ€è¦å°†æ•°æ®æºç»Ÿä¸€æˆä¸€ä¸ªæ•°ç»„æš´éœ²å‡ºå»ï¼Œå¤„ç†ä¸€ä¸‹æ•°æ®ï¼š export class RegionViewModel { ... static getRegions(): BaseRegion[] { let groupBy = RegionViewModel.regions.sort((a, b) =&gt; { let pinyinA: string = pinyin4js.convertToPinyinString(a.region, '', pinyin4js.WITHOUT_TONE) let pinyinB: string = pinyin4js.convertToPinyinString(b.region, '', pinyin4js.WITHOUT_TONE) if (pinyinA &lt; pinyinB) { return -1 } else if (pinyinA &gt; pinyinB) { return 1 } else { return 0 } }).reduce((acc, curr) =&gt; { let firstLetter: string = pinyin4js.convertToPinyinString(curr.region, '', pinyin4js.WITHOUT_TONE) .charAt(0) .toUpperCase(); (acc[firstLetter] ??= []).push(curr); return acc; }, {} as Record&lt;string, RegionDetail[]&gt;) let list: BaseRegion[] = [] list.push(new RegionAlphabet(&quot;çƒ­é—¨&quot;)) list.push(...RegionViewModel.hotRegions) Object.keys(groupBy).forEach(key =&gt; { list.push(new RegionAlphabet(key)) list.push(...groupBy[key]) }) return list } } è¿™é‡Œä½¿ç”¨äº†ä¸€ä¸ªå®˜æ–¹åº“ @ohos/pinyin4jsï¼Œç”¨æ¥å°†æ±‰å­—è½¬ä¸ºæ‹¼éŸ³ï¼Œéœ€è¦å…ˆæå‰å®‰è£…ï¼š âœ ohpm install @ohos/pinyin4js ä¸Šé¢çš„ä»£ç è™½ç„¶æœ‰ç‚¹é•¿ï¼Œä½†åšçš„äº‹æƒ…ä¸å¤šã€‚é¦–å…ˆæ˜¯å°†æ•°ç»„å†…çš„ RegionDetail å…ƒç´ æŒ‰ç…§ region å±æ€§è½¬ä¸ºæ‹¼éŸ³çš„é¡ºåºè¿›è¡Œæ’åºï¼Œç„¶åæŒ‰ç…§å…¶æ‹¼éŸ³é¦–å­—æ¯è¿›è¡Œåˆ†ç»„ï¼Œè¿™æ ·å°±å¯ä»¥ä¸æˆ‘ä»¬å®šä¹‰çš„æ‹¼éŸ³ç´¢å¼•å¯¹åº”ï¼Œæœ€åå†æŒ‰ç»„é¡ºåºæ’å…¥åˆ°åˆ—è¡¨ä¸­ï¼Œè¿”å›ç»“æœã€‚ éœ€è¦æ³¨æ„ä¸€ä¸ªå‘çš„åœ°æ–¹ï¼Œç”±äº ArkTS çš„è¯­è¨€ç‰¹æ€§ï¼ŒRegionDetail æ•°æ®æ˜¯é€šè¿‡å¯¹è±¡è½¬æ¢è€Œæ¥çš„ï¼Œè€Œä¸æ˜¯ new å‡ºæ¥çš„å®ä¾‹ï¼Œæ‰€ä»¥å®é™…æ’å…¥åˆ°æ•°ç»„ä¸­æ˜¯ä¸€ä¸ª Objectï¼Œè€Œä¸æ˜¯ RegionDetailï¼Œåœ¨åé¢ä½¿ç”¨æ—¶éœ€è¦ç•™æ„ã€‚ æ•°æ®å‡†å¤‡å®Œæ¯•ï¼Œå¼€å§‹å†™ç•Œé¢ã€‚ @Entry @Component struct RegionPage { @State private selectedIndex: number = 0 @State private regions: BaseRegion[] = RegionViewModel.getRegions() private scroller: Scroller = new Scroller() build() { Column() { Toolbar({ title: 'Region' }) Stack({ alignContent: Alignment.End }) { List({ scroller: this.scroller }) { ForEach(this.regions, (item: BaseRegion) =&gt; { ListItem() { if (item instanceof RegionAlphabet) { Text(item.alphabet).fontColor(Color.Gray).fontSize(12).height(32) } else { Row() { Text((item as RegionDetail).region).fontWeight(FontWeight.Bold).fontSize(16).layoutWeight(1) Text(`+${(item as RegionDetail).code}`).fontSize(16).fontColor(Color.Gray) } .height($r('sys.float.titlebar_default_height')) .alignItems(VerticalAlign.Center) .onClick(() =&gt; router.back({ url: Routers.LOGIN_PAGE, params: { regionCode: (item as RegionDetail).code } })) } }.padding({ left: 24, right: 44 }) }) }.onScrollIndex(index =&gt; { let item = this.regions[index] if (item instanceof RegionAlphabet) { this.selectedIndex = RegionViewModel.alphabets.indexOf(item.alphabet) } else { if (index &lt; RegionViewModel.hotRegions.length + 1) { this.selectedIndex = 0 return } let region = (item as RegionDetail).region let alphabet: string = pinyin4js.convertToPinyinString(region, '', pinyin4js.WITHOUT_TONE) .charAt(0) .toUpperCase() this.selectedIndex = RegionViewModel.alphabets.indexOf(alphabet) } }) AlphabetIndexer({ arrayValue: RegionViewModel.alphabets, selected: 0 }) .selected(this.selectedIndex) .height('100%') .onSelect(index =&gt; { if (index == 0) { this.scroller.scrollToIndex(0) return } let letter = RegionViewModel.alphabets[index] let position = this.regions.findIndex(value =&gt; (value as RegionAlphabet).alphabet == letter) if (position &gt; 0) { this.scroller.scrollToIndex(position) } }) } } .height('100%') .width('100%') } } ç•Œé¢çš„å¸ƒå±€å°±ä¸å±•å¼€ä»‹ç»äº†ï¼Œéœ€è¦å…³æ³¨ä¸€ç‚¹æ˜¯åˆ—è¡¨æ•°æ®é¡¹çš„åˆ¤æ–­ï¼Œä¸Šæ–‡æåˆ°ï¼ŒRegionDetail åœ¨æ•°ç»„å†…ä»…ä»…æ˜¯ä¸€ä¸ª Objectï¼Œæ‰€ä»¥ä¸èƒ½åƒ RegionAlphabet é‚£æ ·é€šè¿‡ instanceof æ¥åˆ¤æ–­ï¼Œåªèƒ½ç­›é€‰å®Œ RegionAlphabet ä¹‹åå†é€šè¿‡ as æ¥å¼ºè½¬ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å…¶ä»–å†™æ³•æ¥è§„é¿è¿™ä¸ªé—®é¢˜ã€‚ é‡ç‚¹çœ‹ä¸‹å…³è”é€»è¾‘ã€‚ List ä¸­éœ€è¦ä¼ å…¥ä¸€ä¸ª Scrollerï¼Œåç»­åœ¨ AlphabetIndexer ä¸­å¯ä»¥ç”¨æ¥æ§åˆ¶æ»šåŠ¨ï¼ŒåŒæ—¶ List åœ¨æ»šåŠ¨æ—¶ä¹Ÿéœ€è¦é€šçŸ¥ AlphabetIndexer åˆ·æ–°çŠ¶æ€ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ªå˜é‡ selectedIndex æ¥è®°å½•é€‰ä¸­çš„ç´¢å¼•ã€‚ å½“ List æ»šåŠ¨æ—¶ä¼šé€šè¿‡ onScrollIndex() å›è°ƒç›‘å¬ã€‚å¦‚æœå½“å‰å¯è§çš„ç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹æ•°æ®æ˜¯ RegionAlphabet æ—¶ï¼ŒAlphabetIndexer é€‰ä¸­çš„å°±æ˜¯ RegionAlphabet å¯¹åº”åœ¨ç´¢å¼•æ•°æ®æºçš„ä¸‹æ ‡ï¼›å¦‚æœå½“å‰å¯è§çš„ç¬¬ä¸€ä¸ªåˆ—è¡¨é¡¹æ•°æ®ä¸æ˜¯ RegionAlphabetï¼Œåˆ¤æ–­è¯¥é¡¹åœ¨æ•°ç»„ä¸­çš„ä½ç½®æ˜¯å¦å°äº hotRegions çš„é•¿åº¦åŠ  1ï¼ˆåŠ  1 æ˜¯å› ä¸ºéœ€è¦åŠ ä¸Šç¬¬ä¸€ä¸ª RegionAlphabetï¼‰ï¼Œæ˜¯çš„è¯ç›´æ¥å°† AlphabetIndexer é€‰ä¸­çš„ä¸‹æ ‡ç½® 0ï¼Œå¦‚æœä¸æ˜¯çš„è¯ï¼Œå°†æ•°æ®é¡¹å¼ºè½¬ä¸º RegionDetailï¼Œå–å‡ºå…¶ region å­—æ®µçš„æ‹¼éŸ³é¦–å­—æ¯ï¼Œé€‰ä¸­è¯¥å­—æ¯åœ¨ç´¢å¼•æ•°æ®æºçš„ä¸‹æ ‡å³å¯ã€‚ ä½¿ç”¨ AlphabetIndexer é€‰ä¸­æ—¶ä¼šé€šè¿‡ onSelect()å›è°ƒç›‘å¬ã€‚å½“é€‰ä¸­ä¸‹æ ‡ä¸º 0 çš„é¡¹æ—¶ï¼Œç›´æ¥å°† List æ»šåˆ°é¡¶éƒ¨ï¼›å¦åˆ™è·å–é€‰ä¸­çš„å­—æ¯ï¼Œæ»šåŠ¨åˆ°å¯¹åº”çš„ RegionAlphabet æ‰€åœ¨çš„ä½ç½®ã€‚ æ•´ä¸ªæµç¨‹å°±æ˜¯è¿™ä¹ˆç®€å•ï¼Œè™½ç„¶ AlphabetIndexer åœ¨é¡¹ç›®ä¸­çš„ä½¿ç”¨ç‡ä¸é«˜ï¼Œä½†è¿™ä¸ªç»„ä»¶çš„å‡ºç°ç¡®å®æ–¹ä¾¿äº†æˆ‘ä»¬å¼€å‘ï¼Œæ ·å¼ä¹Ÿç¬¦åˆæˆ‘ä»¬çš„å¸¸è§åœºæ™¯ï¼ŒAndroid å¼€å‘è€…å®åç¾¡æ…•ã€‚ ","link":"https://LiarrDev.github.io/post/Wonderful-ArkUI-AlphabetIndexer/"},{"title":"TabLayout & ViewPager2 å¿«é€Ÿæ‰“é€ é€‰é¡¹å¡åˆ‡æ¢æ•ˆæœ","content":"å¤§å®¶ä½¿ç”¨ä¸€äº›å¸¸è§çš„ App æ—¶éƒ½èƒ½å‘ç° Tab å¡ç‰‡åˆ‡æ¢æ•ˆæœï¼Œæ¯”å¦‚ã€AppGalleryã€ã€Mi Homeã€ç­‰ï¼š è¿™ç§äº¤äº’å°†ä¸‹æ–¹å¡ç‰‡å’Œé¡¶éƒ¨ Tab è¿›è¡Œè”åŠ¨ï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡å·¦å³æ»‘åŠ¨å¡ç‰‡ï¼Œæˆ–è€…ç‚¹å‡» Tab åˆ‡æ¢å¡ç‰‡ï¼Œç‰¹åˆ«é€‚åˆå°†åŒä¸€æ¨¡ç»„ä¸åŒå†…å®¹çš„é¡µé¢åˆå¹¶å±•ç¤ºã€‚ å¾—ç›Šäº Android å®˜æ–¹çš„è‰¯å¥½å°è£…ï¼Œæˆ‘ä»¬è¦å®ç°è¿™ç§æ–¹å¼ä¹Ÿéå¸¸ç®€å•ã€‚ å…ˆæ¥çœ‹å¸ƒå±€ï¼š &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot;&gt; &lt;com.google.android.material.tabs.TabLayout android:id=&quot;@+id/tab_layout&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; /&gt; &lt;androidx.viewpager2.widget.ViewPager2 android:id=&quot;@+id/view_pager&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; /&gt; &lt;/LinearLayout&gt; æ‹†å¼€ä¸¤éƒ¨åˆ†æ¥çœ‹ï¼Œé¡¶éƒ¨å¿…ç„¶æ˜¯ä½¿ç”¨ TabLayout ç»„ä»¶ï¼Œä¸‹é¢åˆ™ä½¿ç”¨ ViewPager2 æ¥å®ç°ã€‚ æ—¢ç„¶æœ‰ ViewPager2ï¼Œé‚£ä¹‹å‰è‚¯å®šæœ‰ ViewPagerï¼Œè€ç‰ˆæœ¬çš„ ViewPager æ˜¯ç»§æ‰¿è‡ª ViewGroup è‡ªå®šä¹‰å®ç°çš„ï¼Œè€Œ ViewPager2 è™½ç„¶ä¹Ÿç»§æ‰¿è‡ª ViewGroupï¼Œä½†å´æ˜¯åŸºäº RecyclerView å°è£…çš„ï¼Œè§£å†³äº† ViewPager çš„å¤§éƒ¨åˆ†ç—›ç‚¹ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬ä¼˜å…ˆé€‰æ‹© ViewPager2 æ¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚ TabLayout å’Œ ViewPager2 éƒ½æœ‰è‡ªå·±çš„åˆ‡æ¢é€»è¾‘ï¼Œé‚£ä¹ˆæˆ‘ä»¬éœ€è¦åšçš„ï¼Œå°±æ˜¯å°†å®ƒä»¬å…³è”èµ·æ¥ï¼Œå®ç°è”åŠ¨çš„æ•ˆæœã€‚ class MainActivity : AppCompatActivity() { private val binding by lazy { ActivityMainBinding.inflate(layoutInflater) } override fun onCreate(savedInstanceState: Bundle?) { ... binding.viewPager.adapter = object : FragmentStateAdapter(this) { override fun getItemCount() = 2 override fun createFragment(position: Int) = when (position) { 0 -&gt; Fragment0() else -&gt; Fragment1() } } TabLayoutMediator(binding.tabLayout, binding.viewPager) { tab, position -&gt; when (position) { 0 -&gt; tab.text = &quot;Tab 0&quot; else -&gt; tab.text = &quot;Tab 1&quot; } }.attach() } } ç»™ ViewPager2 è®¾ç½®ä¸€ä¸ª adapterï¼Œå¹¶å®ç° FragmentStateAdapter æ¥å£ï¼Œé‡å†™ getItemCount() å’Œ createFragment() æ–¹æ³•ï¼Œåˆ†åˆ«è¿”å› ViewPager2 çš„é¡µé¢æ•°é‡å’Œå¯¹åº”ä½ç½®çš„ Fragmentã€‚è¿™éƒ¨åˆ†å±äº ViewPager2 çš„çŸ¥è¯†ï¼Œè¿™é‡Œä¸å†èµ˜è¿°ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª TabLayoutMediator å¯¹è±¡ï¼Œå¹¶è°ƒç”¨å®ƒçš„ attach() æ–¹æ³•ï¼Œå°† TabLayout å’Œ ViewPager2 å…³è”èµ·æ¥ã€‚åŒæ—¶è¿˜å¯ä»¥æ ¹æ®éœ€è¦ï¼Œå¯¹ TabLayout.Tab åšä¸€äº›è‡ªå®šä¹‰çš„å¤„ç†æ“ä½œã€‚ è¿™æ ·ï¼Œæˆ‘ä»¬å°±å®ç°äº† TabLayout å’Œ ViewPager2 è”åŠ¨ã€‚æ•ˆæœå¦‚ä¸‹ï¼š ","link":"https://LiarrDev.github.io/post/Tab-Switching-Effects-by-TabLayout-and-ViewPager2/"},{"title":"Reqable","content":"ä¹‹å‰ä»‹ç»äº†å¦‚ä½•ä½¿ç”¨ã€Fiddler Everywhereã€åœ¨æ‰‹æœºä¸Šè¿›è¡ŒæŠ“åŒ…ï¼Œå®ƒéœ€è¦ä½¿æ‰‹æœºä¸ç”µè„‘è¿æ¥åŒä¸€ä¸ªå±€åŸŸç½‘å®ŒæˆæŠ“åŒ…æ“ä½œï¼Œæˆ‘ç›¸ä¿¡è®¸å¤šå¼€å‘å°ä¼™ä¼´éƒ½é‡åˆ°è¿‡ä¸‹ç­å›å®¶è·¯ä¸Šçªç„¶æ”¶åˆ°æ¶ˆæ¯è¯´å‡ºç° Bug çš„æƒ…å†µï¼Œåœ¨åœ°é“ä¸Šçš„ä½ æ˜¯å¦ç„¦å¤´çƒ‚é¢åˆæ— èƒ½ä¸ºåŠ›ï¼Ÿ è¦æ˜¯æœ‰ä¸€æ¬¾èƒ½ç›´æ¥åœ¨æ‰‹æœºä¸Šè¿›è¡ŒæŠ“åŒ…çš„å·¥å…·é‚£è¯¥å¤šå¥½ï¼ ä¸æ…Œï¼å®ƒæ¥äº†ï¼ ã€Reqableã€æ˜¯ä¸€æ¬¾å…ˆè¿›çš„ API ç”Ÿäº§åŠ›å·¥å…·ï¼Œæ”¯æŒå…¨å¹³å°ï¼ˆWindowsã€macOSã€Linuxã€Androidã€iOSï¼‰ã€å…ç™»å½•ã€è½»é‡çº§ã€é«˜æ€§èƒ½ã€æ— å¹¿å‘Šï¼Œå®˜æ–¹å®£ç§°å®ƒæ˜¯ Fiddler + Charles + Postman çš„ç»“åˆã€‚ å®ƒçš„ä½œè€…æ˜¯ Megatron Kingï¼Œä»–åŒæ—¶ä¹Ÿæ˜¯ã€HttpCanaryã€çš„ä½œè€…ï¼Œç”¨è¿‡ã€HttpCanaryã€çš„æœ‹å‹åº”è¯¥å¯ä»¥ä»åº”ç”¨å›¾æ ‡çœ‹å‡ºï¼Œå…¶æ­£æ˜¯ã€Reqableã€çš„å‰èº«ã€‚ å…ˆæ¥çœ‹çœ‹åœ¨æ‰‹æœºä¸Šçš„æŠ“åŒ…æ“ä½œã€‚ æ‰“å¼€ã€Reqableã€å¹¶ç‚¹å‡»å³ä¸‹è§’æŒ‰é’®å¯åŠ¨è°ƒè¯•ï¼Œç„¶åå°†å…¶é€€åˆ°åå°å³å¯ï¼Œã€Reqableã€ä¼šå¯åŠ¨ä¸€ä¸ªç”»ä¸­ç”»çª—å£ç”¨äºå±•ç¤ºï¼Œè®¾å¤‡ä¸Šæ‰€æœ‰çš„ç½‘ç»œè¯·æ±‚éƒ½ä¼šåœ¨å…¶ä¸­å±•ç¤ºã€‚ æ“ä½œå®Œæˆåï¼Œå›åˆ°ã€Reqableã€ï¼Œåˆ—è¡¨ä¼šå±•ç¤ºæ‰€æœ‰è¯·æ±‚ï¼Œå¯ä»¥é€šè¿‡æœç´¢ã€ç­›é€‰ã€æ’åºç­‰æ“ä½œæ‰¾åˆ°è‡ªå·±æƒ³è¦çš„è¯·æ±‚ã€‚ ç‚¹å‡»æŸ¥çœ‹å®Œæ•´çš„è¯·æ±‚å’Œå“åº”ã€‚ æ˜¯ä¸æ˜¯ååˆ†ç®€å•ï¼Ÿå¦‚æœå¸Œæœ›åœ¨ç”µè„‘ä¸ŠæŸ¥çœ‹æ‰‹æœºçš„è¯·æ±‚ï¼Œä¹Ÿä¸éœ€è¦ç¹ççš„ Wi-Fi ä»£ç†é…ç½®ï¼Œç›´æ¥æ‰«ä¸€æ‰«å°±å¯ä»¥è¿æ¥ã€‚ è¿æ¥æˆåŠŸåå°±å¯ä»¥åœ¨ç”µè„‘ä¸ŠæŸ¥çœ‹æ‰‹æœºçš„è¯·æ±‚ã€‚ ç‚¹å‡»æŸ¥çœ‹è¯·æ±‚å’Œå“åº”ä¹Ÿæ˜¯å¸¸è§„æ“ä½œã€‚ å½“ç„¶ï¼Œå¦‚æœä½ ä¸æƒ³åœ¨æ‰‹æœºä¸Šä¸‹è½½ã€Reqableã€ï¼Œä»…ä»…å¸Œæœ›é€šè¿‡ä¼ ç»Ÿçš„å±€åŸŸç½‘ Wi-Fi ä»£ç†è¿æ¥æ¥æŠ“åŒ…ï¼Œä¹Ÿæ˜¯å®Œå…¨æ²¡é—®é¢˜çš„ï¼Œåªéœ€åœ¨ç”µè„‘ä¸Šå®‰è£…ã€Reqableã€å³å¯ï¼Œæ­¥éª¤å’Œä¹‹å‰ä»‹ç»çš„ä½¿ç”¨ã€Fiddler Everywhereã€æŠ“åŒ…æ–¹æ³•å¤§åŒå°å¼‚ï¼Œè¿™é‡Œå°±ä¸å±•å¼€æè¿°äº†ã€‚ ä¸Šé¢ä»‹ç»çš„æŠ“åŒ…åªæ˜¯ã€Fiddlerã€å’Œã€Charlesã€å…·å¤‡çš„åŠŸèƒ½ï¼Œé‚£ä¹ˆã€Postmanã€å…·å¤‡çš„åŠŸèƒ½åœ¨å“ªé‡Œå‘¢ï¼Ÿ åªéœ€æ–°å»ºä¸€ä¸ªæ ‡ç­¾ï¼Œå³å¯è¿›è¡Œ API è°ƒè¯•ã€‚ åŒæ—¶å®ƒè¿˜æ”¯æŒè‡ªå®šä¹‰é‡å†™å’Œæ–­ç‚¹è§„åˆ™ï¼Œæˆ–è€…ç¼–å†™ Python è„šæœ¬ï¼Œæ‹¦æˆªå¤„ç†è¯·æ±‚æˆ–è€…å“åº”æ•°æ®ï¼Œä¿®æ”¹æˆ–è€…æ¨¡æ‹Ÿæ•°æ®ï¼Œæ»¡è¶³å„å¼å„æ ·çš„æµ‹è¯•åœºæ™¯ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œã€Reqableã€è¿˜æä¾›äº†å¤§é‡çš„å†…ç½®å¼€å‘å·¥å…·ï¼Œåœ¨æ­¤å°±ä¸ä¸€ä¸€ä»‹ç»äº†ã€‚ æ€»çš„æ¥è¯´ï¼Œã€Reqableã€æ˜¯ä¸€æ¬¾æ¯”è¾ƒå…¨é¢çš„å›½äº§æŠ“åŒ…å·¥å…·ï¼ŒåŠŸèƒ½ç›¸å¯¹å®Œå–„ï¼Œæ¯”è¾ƒé€‚åˆå›½äººçš„æ“ä½œä¹ æƒ¯ï¼Œç®€å•ä¾¿æ·ï¼ŒæŠ“åŒ…æ€§èƒ½ä¹Ÿæ¯”è¾ƒé«˜ï¼ŒåŸºäº Flutter å¼€å‘ï¼Œæ”¯æŒ HTTP3/QUICï¼Œå…¨å¹³å°å®¢æˆ·ç«¯ï¼Œä¸€ç³»åˆ—çš„ç‰¹ç‚¹éƒ½æ˜¯ä¼˜ç§€çš„è¯æ˜ï¼Œå€¼å¾—ä¸€è¯•ã€‚ ","link":"https://LiarrDev.github.io/post/Reqable/"},{"title":"è§£å†³ Tomcat 10 Servlet æ— æ³•è®¿é—®çš„é—®é¢˜","content":"ä¹‹å‰åœ¨ IntelliJ IDEA Community Edition é…ç½®å¥½äº† Tomcatï¼Œæ¥ä¸‹æ¥å°±è¦å¼€å§‹å†™æ¥å£äº†ï¼ŒSpring çš„æ¡†æ¶æš‚æ—¶è¿˜æ²¡ç”¨ä¸Šï¼Œå…ˆç®€å•å†™ä¸ª Servletã€‚ import javax.servlet.annotation.WebServlet import javax.servlet.http.HttpServlet import javax.servlet.http.HttpServletRequest import javax.servlet.http.HttpServletResponse @WebServlet(&quot;/hello&quot;) class HelloServlet: HttpServlet() { override fun doGet(req: HttpServletRequest?, resp: HttpServletResponse?) { println(&quot;HelloServlet doGet&quot;) resp?.writer?.write(&quot;Hello Servlet&quot;) } } éƒ¨ç½²ä¸Šå»å‘ç°ï¼Œæ ¹é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®ï¼Œä½†æ˜¯å´æ— æ³•è®¿é—® Servletã€‚ å…¶å®è¿™ä¸ªé—®é¢˜çš„ç­”æ¡ˆæ—©å·²å†™åœ¨ Apache Tomcat å®˜ç½‘ Tomcat 10 çš„ä¸‹è½½é¡µï¼Œåªä¸è¿‡å¤§å¤šæ•°äººåœ¨ä¸‹è½½çš„æ—¶å€™éƒ½æ²¡æœ‰æ³¨æ„åˆ°ï¼š Users of Tomcat 10 onwards should be aware that, as a result of the move from Java EE to Jakarta EE as part of the transfer of Java EE to the Eclipse Foundation, the primary package for all implemented APIs has changed from javax.* to jakarta.*. This will almost certainly require code changes to enable applications to migrate from Tomcat 9 and earlier to Tomcat 10 and later. Tomcat 10 åŠä»¥åç‰ˆæœ¬çš„ç”¨æˆ·åº”æ³¨æ„ï¼Œä½œä¸º Java EE å‘ Eclipse åŸºé‡‘ä¼šè½¬ç§»çš„ä¸€éƒ¨åˆ†ï¼ŒJava EE å·²ä» Java EE è¿ç§»åˆ° Jakarta EEï¼Œå› æ­¤æ‰€æœ‰å·²å®æ–½ API çš„ä¸»åŒ…å·²ä» javax.* å˜ä¸º jakarta.*ã€‚è¿™å‡ ä¹è‚¯å®šéœ€è¦ä¿®æ”¹ä»£ç ï¼Œä»¥ä½¿åº”ç”¨ç¨‹åºèƒ½ä» Tomcat 9 åŠæ›´æ—©ç‰ˆæœ¬è¿ç§»åˆ° Tomcat 10 åŠæ›´é«˜ç‰ˆæœ¬ã€‚ Java Servlet API æ˜¯ç”± Sun Microsystems / Oracle å¼€å‘å’Œç»´æŠ¤çš„ï¼Œå…¶åŒ…åä»¥ javax.servlet å¼€å¤´ã€‚ä» Java EE 8 å¼€å§‹ï¼ŒServlet API çš„ç»´æŠ¤æƒè½¬äº¤ç»™äº† Eclipse Foundation çš„ Jakarta EE ç¤¾åŒºï¼Œå› æ­¤ï¼Œåœ¨æœ€æ–°çš„ Jakarta EE ç‰ˆæœ¬ä¸­ï¼ŒServlet API çš„åŒ…åå·²ç»æ›´æ”¹ä¸º jakarta.servletã€‚ ä¹Ÿå°±æ˜¯è¯´ javax.servlet æ˜¯æ—§ç‰ˆæœ¬çš„åŒ…åï¼Œè€Œ jakarta.servlet æ˜¯æ–°ç‰ˆæœ¬çš„åŒ…åã€‚è¿™ä¸ªå˜åŒ–æ˜¯ä¸ºäº†åæ˜  Jakarta EE ä½œä¸ºä¸€ä¸ªç‹¬ç«‹çš„å¼€æºé¡¹ç›®ï¼Œå¹¶ä¸”å°†æ ‡å‡† Java æŠ€æœ¯è§„èŒƒçš„å‘å±•ç§»äº¤ç»™äº† Jakarta EE ç¤¾åŒºã€‚ æˆ‘ä»¬åªéœ€åœ¨é¡¹ç›®ä¸­æ›¿æ¢å¯¹åº”çš„ä¾èµ–åŠåŒ…åå³å¯ï¼š dependencies { // implementation(&quot;javax.servlet:javax.servlet-api:4.0.1&quot;) implementation(&quot;jakarta.servlet:jakarta.servlet-api:6.0.0&quot;) } // ä¿®æ”¹åŒ…å import jakarta.servlet.annotation.WebServlet import jakarta.servlet.http.HttpServlet import jakarta.servlet.http.HttpServletRequest import jakarta.servlet.http.HttpServletResponse @WebServlet(&quot;/hello&quot;) class HelloServlet: HttpServlet() { override fun doGet(req: HttpServletRequest?, resp: HttpServletResponse?) { println(&quot;HelloServlet doGet&quot;) resp?.writer?.write(&quot;Hello Servlet&quot;) } } é‡æ–°éƒ¨ç½²ï¼Œè®¿é—®æˆåŠŸï¼š å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™å‘ç°ç½‘ä¸Šå¾ˆå¤šåšä¸»é‡åˆ°è¯¥é—®é¢˜çš„æ—¶å€™éƒ½é‡‡ç”¨äº†é™çº§åˆ° Tomcat 9 çš„æ–¹å¼æ¥é¿å…è¯¥é—®é¢˜çš„å‘ç”Ÿï¼Œè¿™å®é™…ä¸Šæ˜¯ä¸€ç§æƒ°æ€§æ€ç»´ï¼Œå› ä¸ºä»–ä»¬å¹¶æ²¡æœ‰è§£å†³é—®é¢˜è€Œæ˜¯é€ƒé¿é—®é¢˜ã€‚ æˆ‘ç†è§£è®¸å¤šç¨‹åºå‘˜å› ä¸ºå¼€å‘ä»»åŠ¡ç¹é‡è€Œä¸å¾—ä¸é€‰æ‹©ä¸€ç§èƒ½å°½å¿«è®©é¡¹ç›®è¿è¡Œèµ·æ¥çš„æ–¹æ³•ï¼Œä½†ä¸€å®šä¸è¦å…»æˆæ”¾å¼ƒæ€è€ƒçš„ä¹ æƒ¯ã€‚ ","link":"https://LiarrDev.github.io/post/Fix-Tomcat-10-Servlet-Inaccessibility-Problems/"},{"title":"macOS å¹³å° IntelliJ IDEA ç¤¾åŒºç‰ˆ Tomcat é…ç½®ç¬”è®°","content":"å‰è¨€ ä»¥å‰è¯»ä¹¦çš„æ—¶å€™æµ…æµ…æ¥è§¦è¿‡ Java Web å¼€å‘ï¼Œå› ä¸ºæ°´åœŸä¸æœï¼Œæ‰€ä»¥åæ¥èµ°ä¸Šäº† Android å¼€å‘è¿™æ¡è·¯ã€‚æœ€è¿‘çªç„¶å…´èµ·ï¼Œæƒ³å†æ¬¡äº†è§£äº†è§£åç«¯å¼€å‘ï¼Œä»Šå¤©è¿ˆå‡ºç¬¬ä¸€æ­¥ï¼Œæ­å»ºå¼€å‘ç¯å¢ƒã€‚ æƒ³èµ·å½¼æ—¶ï¼ŒJetBrains çš„å¼€å‘å¥—ä»¶åœ¨å›½å†…ä¼¼ä¹è¿˜æœªæµè¡Œèµ·æ¥ï¼Œå¤§å¤šæ•°äººä»åœ¨ä½¿ç”¨ Eclipse å¼€å‘ï¼Œç¯å¢ƒçš„é…ç½®ä¹Ÿæ¯”è¾ƒç¹çã€‚ç°åœ¨åªéœ€ä¸‹è½½ IntelliJ IDEA Ultimateï¼Œå‡ ä¹ä¸éœ€è¦ä»€ä¹ˆé…ç½®ï¼Œå¼€ç®±å³ç”¨ã€‚ ä½†æ˜¯ä¼—æ‰€å‘¨çŸ¥ï¼ŒIntelliJ IDEA Ultimate éœ€è¦ä»˜è´¹ä½¿ç”¨ï¼Œæˆ‘ä½œä¸ºå­¦ä¹ éœ€è¦ï¼Œè¿˜ä¸å€¼å¾—èŠ±è¿™ç¬”é’±ï¼Œè€Œç½‘ä¸Šå„ç§ç ´è§£éƒ½ç”±äºç‰ˆæœ¬çš„è¿­ä»£å˜å¾—æ„ˆå‘ä¸ç¨³å®šï¼Œå› æ­¤å…è´¹çš„ IntelliJ IDEA Community Edition æ‰æ˜¯æ›´åŠ é€‚åˆæˆ‘çš„é€‰æ‹©ã€‚ ç”±æ­¤åˆäº§ç”Ÿäº†å¦ä¸€ä¸ªé—®é¢˜ï¼ŒIntelliJ IDEA Community Edition æ˜¯ä¸åŒ…å« Tomcat çš„ï¼Œæ‰€ä»¥è¿˜æ˜¯éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨é…ç½®ã€‚ é…ç½® å‰å¾€ Apache Tomcat å®˜ç½‘ ä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåè§£å‹è‡³ ~/Library/ ç›®å½•ï¼Œç»ˆç«¯è¿›å…¥ Tomcat ä¸‹çš„ bin ç›®å½•æ‰§è¡Œå‘½ä»¤ï¼š âœ sudo chmod 755 *.sh è¯¥å‘½ä»¤ç”¨äºæˆæƒè¯»å†™å’Œæ‰§è¡Œæƒé™ï¼Œæ¥ç€å°è¯•å¯åŠ¨ Tomcat æœåŠ¡ï¼š âœ sudo sh ./startup.sh ä¸çŸ¥é“å› ä¸ºä»€ä¹ˆåŸå› ï¼Œå³ä½¿å·²ç»é…ç½®è¿‡ç¯å¢ƒå˜é‡ï¼ŒTomcat æ— æ³•æ­£ç¡®è¯»å–æˆ‘çš„ JDK è·¯å¾„ï¼š è¿™å¹¶ä¸æ˜¯ä»€ä¹ˆå¤§é—®é¢˜ï¼Œå› ä¸ºæˆ‘ä»¬ç­‰ä¼šå¯ä»¥ç›´æ¥åœ¨ IntelliJ IDEA Community Edition ä¸­å¯åŠ¨å®ƒï¼Œä½ å¯ä»¥è·³è¿‡è¿™éƒ¨åˆ†çš„å†…å®¹ã€‚ ä¸è¿‡ä¸ºäº†èƒ½å¤Ÿåœ¨ç»ˆç«¯ç›´æ¥å¯åŠ¨ï¼Œæˆ‘ä»¬å¯ä»¥æ‰‹åŠ¨é…ç½®ä¸€ä¸‹ã€‚ å…ˆçœ‹çœ‹è¿™ä¸ªé—®é¢˜æ˜¯åœ¨å“ªé‡Œè§¦å‘çš„ã€‚ä¸Šæ–¹çš„å‘½ä»¤ä¼šå…ˆè¿›å…¥ startup.sh æ–‡ä»¶ï¼Œå†…éƒ¨ä¼šè°ƒç”¨ catalina.shï¼š PRGDIR=`dirname &quot;$PRG&quot;` EXECUTABLE=catalina.sh if $os400; then eval else if [ ! -x &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; ]; then echo &quot;Cannot find $PRGDIR/$EXECUTABLE&quot; echo &quot;The file is absent or does not have execute permission&quot; echo &quot;This file is needed to run this program&quot; exit 1 fi fi exec &quot;$PRGDIR&quot;/&quot;$EXECUTABLE&quot; start &quot;$@&quot; è€Œ catalina.sh å†…éƒ¨åˆ™ä¼šè°ƒç”¨ setclasspath.shï¼š # Get standard Java environment variables if $os400; then . &quot;$CATALINA_HOME&quot;/bin/setclasspath.sh else if [ -r &quot;$CATALINA_HOME&quot;/bin/setclasspath.sh ]; then . &quot;$CATALINA_HOME&quot;/bin/setclasspath.sh else echo &quot;Cannot find $CATALINA_HOME/bin/setclasspath.sh&quot; echo &quot;This file is needed to run this program&quot; exit 1 fi fi setclasspath.sh å†…éƒ¨æ‰¾ä¸åˆ° JAVA_HOME å’Œ JRE_HOME å°±ä¼šæŠ¥é”™ï¼š # Make sure prerequisite environment variables are set if [ -z &quot;$JAVA_HOME&quot; ] &amp;&amp; [ -z &quot;$JRE_HOME&quot; ]; then ... if [ -z &quot;$JAVA_HOME&quot; ] &amp;&amp; [ -z &quot;$JRE_HOME&quot; ]; then echo &quot;Neither the JAVA_HOME nor the JRE_HOME environment variable is defined&quot; echo &quot;At least one of these environment variable is needed to run this program&quot; exit 1 fi fi é‚£ä¹ˆæˆ‘å°±å¯ä»¥åœ¨ setclasspath.sh é¡¶éƒ¨å¼ºè¡Œå†™å…¥è·¯å¾„ï¼š # å†™å…¥ Java è·¯å¾„ï¼Œä»¥è‡ªå·±çš„å®‰è£…è·¯å¾„ä¸ºå‡† export JAVA_HOME=&quot;/Users/liarr/Applications/Android Studio.app/Contents/jbr/Contents/Home&quot; ä¿å­˜åå†æ¬¡å¯åŠ¨ï¼š æ²¡æœ‰é—®é¢˜ã€‚æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—® http://localhost:8080ï¼Œèƒ½æ­£å¸¸è®¿é—®ã€‚ å…³é—­ Tomcat æœåŠ¡ï¼š âœ sudo sh ./shutdown.sh æ¥ä¸‹æ¥è¿›å…¥ IntelliJ IDEA Community Edition è¿›è¡Œé…ç½®ã€‚é¦–å…ˆå®‰è£…ã€ŒSmart Tomcatã€æ’ä»¶ï¼š ç„¶ååœ¨ã€ŒTomcat Serverã€ä¸­æ·»åŠ æˆ‘ä»¬ä¸Šé¢å®‰è£…çš„ Tomcat è·¯å¾„ï¼š é…ç½®å®Œæˆåå°±å¯ä»¥åˆ›å»ºé¡¹ç›®ï¼Œä¸ºäº†çœå»æ‰‹åŠ¨åˆ›å»ºæ–‡ä»¶çš„æ­¥éª¤ï¼Œè¿™é‡Œæˆ‘ç›´æ¥é€‰æ‹©ã€ŒMaven Archetypeã€ï¼Œå½“ç„¶å¦‚æœä½ ç†Ÿæ‚‰é¡¹ç›®ç»“æ„çš„è¯ä¹Ÿå¯ä»¥ä½¿ç”¨ Gradle ç­‰å…¶ä»–æ„å»ºæ–¹å¼ã€‚ è¿›å…¥åä¿®æ”¹è¿è¡Œé…ç½®ï¼š åœ¨è¿™é‡Œæ·»åŠ ã€ŒSmart Tomcatã€ï¼š ç„¶åç›´æ¥è¿è¡Œï¼Œæ§åˆ¶å°ä¼šæ‰“å°å‡ºè®¿é—®åœ°å€ï¼š ç‚¹å‡»å³å¯åœ¨æµè§ˆå™¨è®¿é—®ï¼Œå®ƒæ‰€æ¸²æŸ“çš„æ˜¯ ./src/main/webapp/index.jsp çš„å†…å®¹ã€‚ è‡³æ­¤ï¼ŒåŸºäº IntelliJ IDEA Community Edition çš„ Tomcat é…ç½®å°±å·²å®Œæˆï¼Œå¯ä»¥æ„‰å¿«åœ°è¿›è¡Œä¸‹ä¸€æ­¥çš„å­¦ä¹ äº†ã€‚ å¦å¤–ï¼Œè¿™ç§æ–¹æ³•é€‚ç”¨äºæˆ‘ä»¬å¼€å‘å’Œè°ƒè¯•é˜¶æ®µï¼Œå¦‚æœéœ€è¦éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒï¼Œéœ€è¦æ‰“æˆ WAR åŒ…ï¼Œè¿™å±äºåè¯ã€‚ ","link":"https://LiarrDev.github.io/post/IntelliJ-IDEA-CE-Tomcat-Configuration-for-macOS/"},{"title":"ä¸€æ¬¡å®æˆ˜çˆ±ä¸Š Dom4J","content":"é¡¹ç›®å·¥ç¨‹ä¸­ä½¿ç”¨ XML ä½œä¸ºé…ç½®æ–‡ä»¶å¾ˆå¸¸è§ï¼Œæ¯”å¦‚ Android é¡¹ç›®ä¸­çš„ AndroidManifest.xml å’Œ Maven é¡¹ç›®ä¸­çš„ pom.xmlï¼Œæˆ‘ä»¬åœ¨ç¼–å†™è„šæœ¬å·¥å…·æ—¶ç»å¸¸éœ€è¦å¯¹è¿™ç±» XML æ–‡ä»¶è¿›è¡Œè¯»å†™æ“ä½œã€‚ XML çš„è§£ææœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œä½†æ€»ä½“æ¥è¯´éƒ½æ¯” JSON è¦å¤æ‚ã€‚ä»Šå¤©æ¥ä»‹ç»ä¸€ä¸ªæˆ‘å¸¸ç”¨çš„ XML è§£æåº“â€”â€”Dom4Jã€‚ ä¸ºäº†é¿å…å¼•èµ·é€»è¾‘ä¸Šçš„æ··ä¹±ï¼Œä¸‹é¢æˆ‘ä¼šåˆ†å‡ ä¸ªä¾‹å­ä»‹ç»å…¶ç”¨æ³•ã€‚ æ·»åŠ ä¾èµ–ï¼š dependencies { implementation(&quot;org.dom4j:dom4j:2.1.4&quot;) } é¦–å…ˆçœ‹å¦‚ä½•è¯»å– XMLï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬ä¼šè¯»å– XML æ–‡ä»¶ï¼š fun parseXml(file: File) { val document = SAXReader().read(file) // ... } SAXReader ä» SAX è§£æäº‹ä»¶åˆ›å»º Dom4J æ ‘ï¼Œé€šè¿‡ read() æ–¹æ³•è¯»å– XML å¹¶ç”Ÿæˆä¸€ä¸ª Document å¯¹è±¡ã€‚ read() ä¸ä»…æ”¯æŒ File ç±»å‹ï¼Œå…¶ä»–çš„å¦‚ URLã€InputStreamã€Reader ç­‰ä¹Ÿæ˜¯å¯ä»¥çš„ã€‚ å¦‚æœå¸Œæœ›ä»å­—ç¬¦ä¸²ä¸­è§£æï¼Œå¯ä»¥æ¢ä¸€ç§æ–¹å¼ï¼š fun parseXml(xml: String) { val document = DocumentHelper.parseText(xml) // ... } è¯»å– XML å†…å®¹åï¼Œæˆ‘ä»¬é€šè¿‡è¿™ä¸ª Document å¯¹è±¡ï¼Œå°±å¯ä»¥è·å–åˆ°é‡Œé¢çš„èŠ‚ç‚¹ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬è§£æå¦‚ä¸‹ XMLï¼š &lt;school&gt; &lt;student&gt; &lt;name&gt;Tom&lt;/name&gt; &lt;age&gt;18&lt;/age&gt; &lt;/student&gt; &lt;/school&gt; ä»£ç å¦‚ä¸‹ï¼š fun parseDocument(document: Document) { val rootElement = document.rootElement val student = rootElement.element(&quot;student&quot;) val name = student.elementText(&quot;name&quot;) val age = student.element(&quot;age&quot;).text // ... } é€šè¿‡ Document çš„ getRootElement() æ–¹æ³•æ‹¿åˆ°æ ¹èŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½æ˜¯ä¸€ä¸ª Element å¯¹è±¡ï¼Œè°ƒç”¨å…¶ element() æ–¹æ³•å¯ä»¥è·å–å­èŠ‚ç‚¹ã€‚æœ€å†…å±‚çš„èŠ‚ç‚¹ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹å¼è·å–å®ƒçš„å€¼ï¼Œä¸€ç§æ˜¯å¯¹è¯¥èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹è°ƒç”¨ elementText() æ–¹æ³•ï¼Œå¯ä»¥ç›´æ¥æ ¹æ®å­èŠ‚ç‚¹çš„åç§°è·å–åˆ°å€¼ï¼›å¦ä¸€ç§æ˜¯å…ˆè·å–åˆ°è¯¥å­èŠ‚ç‚¹ Element å¯¹è±¡å†è°ƒç”¨ getText() æ–¹æ³•è·å–å€¼ã€‚æ‰€è·å–åˆ°çš„å€¼éƒ½æ˜¯ String ç±»å‹ï¼ŒæŒ‰éœ€è½¬æ¢ã€‚ åœ¨ Android ä¸­æˆ‘ä»¬å¸¸è§çš„é…ç½®å¾€å¾€æ˜¯é€šè¿‡å±æ€§é…ç½®çš„ï¼Œæ¯”å¦‚ï¼š &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;TextView android:id=&quot;@+id/text&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;warp_content&quot; android:background=&quot;@color/white&quot; tools:background=&quot;@color/black&quot; /&gt; &lt;/FrameLayout&gt; è¿™æ˜¯ä¸€ä¸ªå¸ƒå±€æ–‡ä»¶ï¼Œè§£æå…¶å±æ€§çš„æ–¹æ³•å¦‚ä¸‹ï¼š fun parseDocument(document: Document) { val rootElement = document.rootElement val textView = rootElement.element(&quot;TextView&quot;) val id = textView.attributeValue(&quot;id&quot;) // ... } è·å–åˆ°å¯¹åº”å…ƒç´ çš„ Element åï¼Œè°ƒç”¨ attributeValue() æ–¹æ³•ä¼ å…¥å±æ€§åè·å–å¯¹åº”çš„å€¼ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè™½ç„¶è¯¥ XML ä¸­æ¯ä¸ªå±æ€§éƒ½æŒ‡å®šäº†å‘½åç©ºé—´ï¼Œä¹Ÿå°±æ˜¯å‰é¢çš„ android:ï¼Œä½†æˆ‘ä»¬å¹¶ä¸éœ€è¦ä¼ å…¥å®Œæ•´çš„ android:id æ‰èƒ½è·å–åˆ°è¯¥å±æ€§çš„å€¼ï¼Œæ°æ°ç›¸åï¼Œå¦‚æœæŠŠå‘½åç©ºé—´ä¹Ÿå†™ä¸Šåè€Œè·å–ä¸åˆ°ï¼Œè¿™æ˜¯å› ä¸ºå‘½åç©ºé—´éœ€è¦é¢å¤–é…ç½®ã€‚ ç›¸ä¿¡ä½ å·²ç»æ³¨æ„åˆ°ï¼Œä¸Šæ–¹å¯¹äº background å±æ€§ï¼Œæˆ‘åœ¨ä¸¤ä¸ªå‘½åç©ºé—´ä¸‹éƒ½æœ‰å®šä¹‰ï¼Œåˆ†åˆ«æ˜¯ android:background å’Œ tools:backgroundï¼Œå¦‚æœç›´æ¥è°ƒç”¨ attributeValue(&quot;background&quot;)ï¼Œä½ çŒœå®ƒä¼šè·å–åˆ°å“ªä¸ªå€¼ï¼Ÿ å®é™…ä¸Šï¼Œå“ªä¸ªå®šä¹‰æ’åœ¨å‰é¢ï¼Œå®ƒå°±ä¼šè·å–å“ªä¸ªå±æ€§çš„å€¼ã€‚ å¯¹äºä¸åŒå‘½åç©ºé—´çš„å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹æ³•è¿›è¡Œè·å–ï¼š fun parseDocument(document: Document) { val rootElement = document.rootElement val toolsNamespace = Namespace.get(&quot;tools&quot;, &quot;http://schemas.android.com/tools&quot;) val androidNamespace = Namespace.get(&quot;android&quot;, &quot;http://schemas.android.com/apk/res/android&quot;) val textView = rootElement.element(&quot;TextView&quot;) val toolsBackground = textView.attributeValue(QName.get(&quot;background&quot;, toolsNamespace)) val androidBackground = textView.attributeValue(QName.get(&quot;background&quot;, androidNamespace)) // ... } å…ˆä¼ å…¥å‰ç¼€å’Œå…¶ Uri æ„å»ºå¯¹åº”çš„å‘½åç©ºé—´ Namespaceï¼Œè·å–å±æ€§å€¼æ—¶ï¼Œæˆ‘ä»¬ä¸å†ç®€å•ç²—æš´åœ°ä¼ å…¥å±æ€§åï¼Œè€Œæ˜¯é€šè¿‡ Namespace æ„å»º QNameï¼ŒQName æ˜¯ XML å…ƒç´ æˆ–å±æ€§çš„é™å®šåç§°å€¼ï¼Œå®ƒèƒ½å¤Ÿå¸®åŠ©æˆ‘ä»¬æ ¹æ®å‘½åç©ºé—´è§£ææ­£ç¡®çš„å€¼ã€‚ å¯¹äºä¸€äº›ç›¸åŒæ ‡ç­¾çš„ç»„ï¼Œæˆ‘ä»¬æ— æ³•ç›´æ¥é€šè¿‡æ ‡ç­¾åç›´æ¥è·å–åˆ°æˆ‘ä»¬æƒ³è¦çš„å€¼ï¼Œå¯ä»¥ä¸€æ¬¡æ€§æŠŠè¿™ä¸ªç»„ä¸‹æ‰€æœ‰çš„æ ‡ç­¾éƒ½è·å–åˆ°ï¼Œå†æ ¹æ®æ¡ä»¶ç­›é€‰ã€‚ æ¯”å¦‚ Android ä¸­ç”¨åˆ°çš„ï¼š &lt;application xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;activity android:name=&quot;.MainActivity&quot; /&gt; &lt;activity android:name=&quot;.SplashActivity&quot; /&gt; &lt;activity android:name=&quot;.AboutActivity&quot; /&gt; &lt;/application&gt; é€šè¿‡ Element çš„ elements() å¯ä»¥è·å–å…¶æ‰€æœ‰çš„å­èŠ‚ç‚¹ã€‚ fun parseDocument(document: Document) { val rootElement = document.rootElement val activities = rootElement.elements() activities.forEach { if (it.attribute(&quot;name&quot;).text.contains(&quot;MainActivity&quot;)) { // ... } } } è·å–æ‰€æœ‰å±æ€§ä¹Ÿæ˜¯ä¸€æ ·çš„æ“ä½œï¼Œè°ƒç”¨ attributes() å³å¯ï¼Œä¸å†èµ˜è¿°ã€‚ å¦å¤–è¿˜å¯ä»¥é€šè¿‡ elementIterator() å’Œ attributeIterator() è·å–è¿­ä»£å™¨ï¼Œä½¿ç”¨è¿­ä»£å™¨éå†æ¥å®Œæˆæ“ä½œã€‚ ä»¥ä¸Šå°±æ˜¯ä½¿ç”¨ Dom4J å¯¹ XML çš„è¯»æ“ä½œï¼Œåœ¨è¿™å‡ ä¸ªä¾‹å­ä¸­æˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œä¸»è¦æ“ä½œçš„å‡ ä¸ªå¯¹è±¡æ— éå°±æ˜¯ Documentã€Element å’Œ Attributeï¼Œæ¥ä¸‹æ¥çš„å†™æ“ä½œå¤§åŒå°å¼‚ã€‚ fun createDocument(): Document { val document = DocumentHelper.createDocument() val root = document.addElement(&quot;root&quot;) val author = root.addElement(&quot;author&quot;) .addAttribute(&quot;location&quot;, &quot;UK&quot;) .addText(&quot;James Strachan&quot;) return document } èŠ‚ç‚¹ã€å±æ€§çš„æ·»åŠ ä¸ä¿®æ”¹ï¼Œéƒ½å¯ä»¥é€šè¿‡ addElement() å’Œ addAttribute() æ¥å®Œæˆï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ¶‰åŠåˆ°å‘½åç©ºé—´ï¼Œä¾æ—§è¦å€ŸåŠ© QNameã€‚ ä¸ºäº†æ–¹ä¾¿æ—¥å¿—æ‰“å°æˆ–å…¶ä»–æ“ä½œï¼Œå¯ä»¥å°† Document è½¬ä¸º XML å­—ç¬¦ä¸²ï¼š fun convertToXml(document: Document) { val text = document.asXML() // ... } ä½œä¸ºè„šæœ¬ï¼Œæœ€é‡è¦çš„å½“ç„¶æ˜¯å›å†™åˆ°æ–‡ä»¶ï¼š fun write(document: Document) { FileWriter(&quot;output.xml&quot;).use { val writer = XMLWriter(it) writer.write(document) writer.close() } } æ ¹æ®è·¯å¾„åˆ›å»º FileWriterï¼Œå†åˆ›å»ºå‡º XMLWriter å¹¶è°ƒç”¨ write() å°† Document å†™å…¥åˆ°è·¯å¾„æ‰€å¯¹åº”çš„æ–‡ä»¶ä¸­ï¼Œæœ€åä¸è¦å¿˜äº†è°ƒç”¨ close()ã€‚ é™¤äº†å†™å…¥åˆ°æ–‡ä»¶ä¸­å¤–ï¼Œè¿˜å¯ä»¥è¾“å‡ºåˆ°æ§åˆ¶å°ï¼š fun log(document: Document) { val format = OutputFormat.createPrettyPrint() val writer = XMLWriter(System.out, format) writer.write(document) writer.close() } è¿™é‡ŒåŒæ—¶è¿˜åˆ›å»ºäº†ä¸€ä¸ªæ ¼å¼ç¾åŒ–çš„ OutputFormatï¼Œåˆ›å»º XMLWriter ä¸å†å€ŸåŠ© FileWriterï¼Œè€Œæ˜¯ä¼ å…¥ System.outï¼Œç›¸ä¿¡ä»»ä½•ä¸€ä¸ª Java å¼€å‘è€…å¯¹è¿™ä¸ªéƒ½ä¸é™Œç”Ÿã€‚ ä»¥ä¸Šå°±æ˜¯ Dom4J çš„å¸¸è§ç”¨æ³•ï¼Œæ›´è¯¦ç»†çš„ä»‹ç»å¯ä»¥æŸ¥é˜…å®˜æ–¹æ–‡æ¡£ã€‚ ","link":"https://LiarrDev.github.io/post/Enjoy-Dom4J-in-One-Shot/"},{"title":"ä½¿ç”¨ Fiddler Everywhere åœ¨ Android ä¸ŠæŠ“åŒ…","content":"æŠ“åŒ…æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„è°ƒè¯•æ‰‹æ®µï¼Œå¯ä»¥å¿«é€Ÿåœ°å¸®åŠ©æˆ‘ä»¬å®šä½å‰åç«¯çš„é—®é¢˜ï¼Œè™½ç„¶æ–°ç‰ˆæœ¬çš„ Android Studio å·²ç»é…å¤‡äº†ã€ŒNetwork Inspectorã€ï¼Œä½†åœ¨æŸäº›åœºæ™¯æˆ–è€…ç‰¹æ®Šæœºå‹ä¸Šä»ä¸èƒ½å¾ˆå¥½èƒœä»»ï¼Œæ‰€ä»¥å¾€å¾€éœ€è¦å€ŸåŠ©ä¸€äº›ç¬¬ä¸‰æ–¹çš„å·¥å…·è¿›è¡ŒæŠ“åŒ…ã€‚ å¸¸è§çš„æŠ“åŒ…å·¥å…·æœ‰ã€Wiresharkã€ã€ã€Charlesã€å’Œã€Fiddlerã€ç­‰ç­‰ï¼Œæœ¬æ¬¡ä»‹ç»ä½¿ç”¨ã€Fiddler Everywhereã€åœ¨ Android è®¾å¤‡ä¸ŠæŠ“åŒ…ã€‚ ã€Fiddler Everywhereã€æ˜¯ã€Fiddlerã€çš„ä¸€ä¸ªåˆ†æ”¯ï¼Œæ”¯æŒ macOSã€Windows å’Œ Linuxã€‚ ä¸‹è½½å®Œæˆå¹¶ç™»å½•ï¼Œå¼€å§‹é…ç½®ã€‚ åœ¨ã€ŒCapture and Inspect Trafficã€ä¸­é€‰æ‹©ã€ŒRemote Devicesã€ï¼Œå¹¶é€‰æ‹© Android è®¾å¤‡ï¼š è¿›å…¥é…ç½®ç•Œé¢ï¼ŒæŒ‰ç…§æ­¥éª¤æ¥ã€‚ ç¬¬ä¸€æ­¥ï¼Œé»˜è®¤å³å¯ã€‚ ç¬¬äºŒæ­¥ï¼Œä¸‹è½½ CA è¯ä¹¦ã€‚ ç¡®ä¿æ‰‹æœºå’Œç”µè„‘è¿æ¥åŒä¸€ç½‘ç»œï¼Œæ‰‹æœºæ‰«æäºŒç»´ç æˆ–è€…æ‰“å¼€ä¸Šé¢çš„é“¾æ¥ï¼Œç‚¹å‡»ä¸‹è½½ã€‚ ç¬¬ä¸‰æ­¥ï¼Œå®‰è£… CA è¯ä¹¦ã€‚ è¯¥è®¾ç½®çš„ä½ç½®å¾€å¾€éšè—å¾—æ¯”è¾ƒæ·±ï¼Œè€Œä¸”ä¸åŒæ‰‹æœºä¸åŒç‰ˆæœ¬éƒ½ç•¥æœ‰å·®å¼‚ï¼Œå¯ä»¥å‚è€ƒæˆ‘ä»¥ä¸‹çš„ä½ç½®ã€‚ é€‰æ‹©ä¸Šä¸€æ­¥ä¸‹è½½çš„è¯ä¹¦æ–‡ä»¶è¿›è¡Œå®‰è£…ï¼Œå¯ä»¥ç»™è¯ä¹¦å‘½åï¼Œæ–¹ä¾¿æˆ‘ä»¬è¾¨è®¤ã€‚ å®‰è£…å®Œæˆåï¼Œå¯ä»¥åœ¨ã€Œç”¨æˆ·å‡­æ®ã€ä¸­æŸ¥çœ‹åˆšåˆšå®‰è£…çš„è¯ä¹¦ã€‚ ç¬¬å››æ­¥ï¼Œå¯¹ Wi-Fi è®¾ç½®ä»£ç†ã€‚ å‚è€ƒä¸Šé¢æä¾›çš„ä¸»æœºåå’Œç«¯å£å·ï¼Œåœ¨æ‰‹æœºä¸Šè®¾ç½®ã€‚ ç¬¬äº”æ­¥ï¼Œæµ‹è¯•è¿æ¥ã€‚ æ‰‹æœºæ‰«æäºŒç»´ç æˆ–ç›´æ¥è®¿é—®ä¸Šé¢çš„é“¾æ¥ï¼Œé¡µé¢æç¤ºè¿æ¥æˆåŠŸã€‚ é…ç½®å®Œæˆï¼Œä¸‹é¢å¯ä»¥å¼€å§‹æŠ“åŒ…ã€‚ ä½†éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”µè„‘ä¸Šä¹Ÿéœ€è¦ä¿¡ä»»è¯ä¹¦æ‰èƒ½å¯¹ HTTPS è¿›è¡ŒæŠ“åŒ…ã€‚ è®°å¾—æŠ“åŒ…è°ƒè¯•ç»“æŸåï¼Œå…³é—­ç¬¬å››æ­¥ä¸­å¯¹ Wi-Fi è®¾ç½®çš„ä»£ç†ã€‚ ","link":"https://LiarrDev.github.io/post/Capture-Traffic-on-Android-with-Fiddler-Everywhere/"},{"title":"Android WebView é€‰æ‹©æœ¬åœ°æ–‡ä»¶","content":"ç½‘é¡µå¼€å‘å¸¸å¸¸ä¼šé‡åˆ°é€‰æ‹©æœ¬åœ°æ–‡ä»¶çš„éœ€æ±‚ï¼Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸‹ï¼Œé¡µé¢å¯ä»¥å¾ˆè½»æ¾åœ°æ‹‰èµ·èµ„æºç®¡ç†å™¨ï¼Œè€Œåœ¨ Hybrid åº”ç”¨å¼€å‘ä¸­ï¼Œå¾€å¾€è¿˜éœ€è¦åšä¸€äº›é€‚é…ã€‚ ä½ ä¹Ÿè®¸è§‰å¾—è¯§å¼‚ï¼Œä¹‹å‰çš„ã€Android WebView å’Œ JavaScript äº¤äº’ã€æ‰€ä»‹ç»çš„æ–¹æ³•éš¾é“ä¸è¶³ä»¥å®Œæˆäº¤äº’å—ï¼Ÿ ç¡®å®ï¼Œä¹‹å‰ä»‹ç»çš„æ–‡ç« å·²ç»è¶³å¤Ÿæˆ‘ä»¬å®Œæˆä¸Šè¿°éœ€æ±‚ï¼ŒH5 é¡µé¢å“åº”ç‚¹å‡»äº‹ä»¶åè°ƒç”¨ Android ç«¯çš„æ–¹æ³•ï¼ŒAndroid ç«¯å®Œæˆæ–‡ä»¶é€‰æ‹©æ“ä½œï¼Œå†è°ƒç”¨ JavaScript æ–¹æ³•å°†æ•°æ®è¿”å›ã€‚åœ¨é€‰æ‹©æ–‡ä»¶è¿™ä¸ªéœ€æ±‚ä¸Šï¼Œä¼¼ä¹ä¸å¤Ÿä¼˜é›…ã€‚ æˆ‘ä»¬çœ‹çœ‹æµè§ˆå™¨ä¸Š H5 æ˜¯å¦‚ä½•é€‰æ‹©æ–‡ä»¶çš„ï¼š &lt;html&gt; &lt;input type=&quot;file&quot; /&gt; &lt;/html&gt; å¯ä»¥çœ‹åˆ°åªéœ€è¦ &lt;input/&gt; æ ‡ç­¾æŒ‡å®šæ–‡ä»¶å±æ€§å³å¯å®ç°ã€‚å¦‚æœä¸ºäº†å…¼å®¹ç§»åŠ¨å¹³å°è€Œä¿®æ”¹å¤§é‡ä»£ç çš„è¯ï¼Œå¤§å¯ä¸å¿…ã€‚ é‚£ä¹ˆåº”è¯¥å¦‚ä½•åšå‘¢ï¼Ÿ æˆ‘ä»¬å…ˆç®€å•å†™ä¸€ä¸ª HTML æ–‡ä»¶ç”¨äºæµ‹è¯•ï¼š &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;body&gt; &lt;input id=&quot;select_file&quot; type=&quot;file&quot; accept=&quot;image/*&quot; /&gt; &lt;img id=&quot;image&quot; src=&quot;&quot; style=&quot;width: 120px; height: auto; margin: 24px&quot; /&gt; &lt;script type=&quot;text/javascript&quot;&gt; var input = document.getElementById(&quot;select_file&quot;); var image = document.getElementById(&quot;image&quot;); input.onchange = function () { if (this.files.length &gt; 0) { var url = URL.createObjectURL(this.files[0]); image.src = url; } } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; è¿™é‡Œåªä½¿ç”¨äº† &lt;input/&gt; æ ‡ç­¾å’Œ &lt;img/&gt;ï¼Œäº¤äº’å°±æ˜¯é€‰æ‹©å›¾ç‰‡å¹¶å°†å…¶æ˜¾ç¤ºå‡ºæ¥ã€‚æˆ‘ç›®å‰å¯¹äºå‰ç«¯çš„æŠ€æœ¯å¹¶ä¸å¤ªç†Ÿæ‚‰ï¼Œåšå¾—æœ‰äº›ä¸‘é™‹è¯·å‹¿è§æ€ªã€‚æµè§ˆå™¨çš„æ•ˆæœå¦‚ä¸‹ï¼š å…¶å® Android ç«¯ WebView ä¹Ÿæä¾›äº†å¯¹æ–‡ä»¶ç±»å‹ &lt;input/&gt; çš„å¤„ç†æ–¹æ¡ˆï¼š class MainActivity : AppCompatActivity() { private var fileUploadCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;? = null private val launcher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { if (it.resultCode == RESULT_OK) { it.data?.dataString?.apply { fileUploadCallback?.onReceiveValue(arrayOf(Uri.parse(this))) fileUploadCallback = null } } } override fun onCreate(savedInstanceState: Bundle?) { ... webView.webChromeClient = object : WebChromeClient() { override fun onShowFileChooser(webView: WebView?, filePathCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;?, fileChooserParams: FileChooserParams?): Boolean { val intent = fileChooserParams?.createIntent() ?: return super.onShowFileChooser(webView, filePathCallback, fileChooserParams) fileUploadCallback = filePathCallback launcher.launch(intent) return true } } } } WebChromeClient æä¾›äº†ä¸€ä¸ª onShowFileChooser() æ–¹æ³•é€šçŸ¥å®¢æˆ·ç«¯æ˜¾ç¤ºæ–‡ä»¶é€‰æ‹©å™¨ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡Œå¤„ç†é€‰æ‹©æ–‡ä»¶çš„æ“ä½œï¼Œå…¶ä¸­ ValueCallback&lt;Uri[]&gt; ç±»å‹çš„å‚æ•°æ˜¯ä¸€ä¸ªå›è°ƒï¼Œä»¥æä¾›è¦ä¸Šä¼ çš„æ–‡ä»¶çš„è·¯å¾„åˆ—è¡¨ï¼Œæˆ‘ä»¬åœ¨æ–‡ä»¶é€‰æ‹©å®Œæˆåä½¿ç”¨å®ƒï¼›FileChooserParams ç”¨äºæè¿°è¦æ‰“å¼€çš„æ–‡ä»¶é€‰æ‹©å™¨çš„æ¨¡å¼ä»¥åŠä¸å…¶ä¸€èµ·ä½¿ç”¨çš„é€‰é¡¹ï¼Œè¿™ä¹ˆå¬èµ·æ¥å’Œ Intent æœ‰ç‚¹åƒï¼Œå®ƒä¹Ÿç¡®å®å¯ä»¥é€šè¿‡ createIntent() æ¥åˆ›å»ºï¼›è¿”å›å€¼æ˜¯å¸ƒå°”ç±»å‹ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ‰§è¡Œå›è°ƒï¼Œåˆ™è¿”å› trueï¼Œé»˜è®¤å¤„ç†åˆ™ä¸º falseã€‚ æ•ˆæœå¦‚ä¸‹ï¼š æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½éœ€è¦ä¸Šä¼ å¤šå¼ å›¾ç‰‡ï¼Œæˆ‘ä»¬ä¿®æ”¹ HTML æ–‡ä»¶ï¼š &lt;!DOCTYPE html&gt; &lt;html&gt; &lt;body&gt; &lt;input id=&quot;select_file&quot; type=&quot;file&quot; accept=&quot;image/*&quot; multiple /&gt; &lt;img id=&quot;image_0&quot; src=&quot;&quot; style=&quot;width: 120px; height: auto; margin: 24px&quot; /&gt; &lt;img id=&quot;image_1&quot; src=&quot;&quot; style=&quot;width: 120px; height: auto; margin: 24px&quot; /&gt; &lt;script type=&quot;text/javascript&quot;&gt; var input = document.getElementById(&quot;select_file&quot;); var image0 = document.getElementById(&quot;image_0&quot;); var image1 = document.getElementById(&quot;image_1&quot;); input.onchange = function () { if (this.files.length &gt; 0) { var url0 = URL.createObjectURL(this.files[0]); image0.src = url0; } if (this.files.length &gt; 1) { var url1 = URL.createObjectURL(this.files[1]); image1.src = url1; } } &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; ä¸»è¦æ˜¯ &lt;input/&gt; æ ‡ç­¾å¢åŠ äº† multiple å±æ€§ï¼Œæ”¯æŒåŒæ—¶é€‰æ‹©å¤šä¸ªæ–‡ä»¶ï¼Œç„¶å JavaScript ä¸­å¢åŠ äº†å¯¹ç¬¬äºŒå¼ å›¾ç‰‡çš„å¤„ç†ã€‚æµè§ˆå™¨æ•ˆæœå¦‚ä¸‹ï¼š Android ç«¯ä¹Ÿéœ€è¦åšç›¸åº”çš„å¤„ç†ï¼š class MainActivity : AppCompatActivity() { private var fileUploadCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;? = null private val launcher = registerForActivityResult(ActivityResultContracts.StartActivityForResult()) { if (it.resultCode == RESULT_OK) { var results = emptyArray&lt;Uri&gt;() it.data?.clipData?.apply { val list = mutableListOf&lt;Uri&gt;() for (i in 0 until itemCount) { list.add(getItemAt(i).uri) } results = list.toTypedArray() } it.data?.dataString?.apply { results = arrayOf(Uri.parse(this)) } fileUploadCallback?.onReceiveValue(results) fileUploadCallback = null } } override fun onCreate(savedInstanceState: Bundle?) { ... webView.webChromeClient = object : WebChromeClient() { override fun onShowFileChooser(webView: WebView?, filePathCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;?, fileChooserParams: FileChooserParams?): Boolean { val intent = fileChooserParams?.createIntent() ?: return super.onShowFileChooser(webView, filePathCallback, fileChooserParams) if (fileChooserParams.mode == FileChooserParams.MODE_OPEN_MULTIPLE) { intent.putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true) } fileUploadCallback = filePathCallback launcher.launch(intent) return true } } } } éœ€è¦æ³¨æ„ï¼Œå°½ç®¡ HTML å·²ç»é…ç½®äº† multiple å±æ€§ï¼Œä½†æ˜¯ createIntent() ä¼¼ä¹å¹¶ä¸ä¼šç»™ Intent æ·»åŠ  Intent.EXTRA_ALLOW_MULTIPLE æ ‡è®°ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ä» FileChooserParams ä¸­è°ƒç”¨ getModel() æ–¹æ³•åˆ¤æ–­å¹¶æ·»åŠ æ­¤æ ‡è®°ã€‚å®ƒæœ‰ 4 ä¸ªå€¼ï¼š public class WebChromeClient { ... public static abstract class FileChooserParams { /** Open single file. Requires that the file exists before allowing the user to pick it. */ public static final int MODE_OPEN = 0; /** Like Open but allows multiple files to be selected. */ public static final int MODE_OPEN_MULTIPLE = 1; /** Like Open but allows a folder to be selected. The implementation should enumerate all files selected by this operation. This feature is not supported at the moment. @hide */ public static final int MODE_OPEN_FOLDER = 2; /** Allows picking a nonexistent file and saving it. */ public static final int MODE_SAVE = 3; ... } } ä¸è¿‡ MODE_OPEN_FOLDER è¢«æ ‡è®°ä¸º @hideï¼Œæ‰€ä»¥æˆ‘ä»¬åªèƒ½ç”¨å…¶ä»–ä¸‰ä¸ªã€‚ æ–‡ä»¶é€‰æ‹©å®Œæˆåï¼Œæˆ‘ä»¬çš„å¤„ç†ä¹Ÿä¸ä¸Šæ–‡é€‰æ‹©å•ä¸ªæ–‡ä»¶æœ‰æ‰€ä¸åŒï¼Œå½“é€‰æ‹©å¤šä¸ªæ–‡ä»¶æ—¶ï¼ŒUri ä¼šé€šè¿‡ ClipData è¿”å›ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå½“é€‰æ‹©å•ä¸ªæ–‡ä»¶æ—¶ï¼ŒClipData ä¼šä¸ºç©ºï¼Œæ­¤æ—¶çš„å¤„ç†æ–¹æ¡ˆä¸ä¸Šæ–‡é€‰æ‹©å•ä¸ªæ–‡ä»¶ä¸€è‡´ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š è¿™æ ·æˆ‘ä»¬å°±å®ç°äº†Android ç«¯ WebView ä¸ Web ç«¯ &lt;input/&gt; é€‰æ‹©æ–‡ä»¶çš„ä¼˜é›…äº¤äº’ã€‚ å…¶å® Activity Result API è¿˜ç»™æˆ‘ä»¬æä¾›äº†é€‰æ‹©æ–‡ä»¶çš„ ActivityResultContractsï¼Œèƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿æˆ‘ä»¬è§£æç»“æœï¼Œä¸è¿‡å°±è¦å†™ä¸¤ä¸ª ActivityResultLauncher åˆ†åˆ«å¤„ç†ï¼š class MainActivity : AppCompatActivity() { private var fileUploadCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;? = null private val documentLauncher = registerForActivityResult(ActivityResultContracts.OpenDocument()) { it?.run { fileUploadCallback?.onReceiveValue(arrayOf(this)) fileUploadCallback = null } } private val documentsLauncher = registerForActivityResult(ActivityResultContracts.OpenMultipleDocuments()) { fileUploadCallback?.onReceiveValue(it.toTypedArray()) fileUploadCallback = null } override fun onCreate(savedInstanceState: Bundle?) { ... webView.webChromeClient = object : WebChromeClient() { override fun onShowFileChooser(webView: WebView?, filePathCallback: ValueCallback&lt;Array&lt;Uri&gt;&gt;?, fileChooserParams: FileChooserParams?): Boolean { fileUploadCallback = filePathCallback return when (fileChooserParams?.mode) { FileChooserParams.MODE_OPEN -&gt; { documentLauncher.launch(fileChooserParams.acceptTypes) true } FileChooserParams.MODE_OPEN_MULTIPLE -&gt; { documentsLauncher.launch(fileChooserParams.acceptTypes) true } else -&gt; super.onShowFileChooser(webView, filePathCallback, fileChooserParams) } } } } } è¿™ç§æ–¹æ³•ä¸éœ€è¦å°† FileChooserParams ç”Ÿæˆ Intentï¼ˆä½†æ˜¯è¦è®°å¾—é€šè¿‡ getAcceptTypes() å–å‡ºå¹¶è®¾ç½® MIME ç±»å‹ï¼‰ï¼ŒActivityResultContracts å·²ç»æ›¿æˆ‘ä»¬åšäº†ç›¸å…³çš„å¤„ç†ï¼Œæ–‡ä»¶é€‰æ‹©çš„ç»“æœä¹Ÿä¸éœ€è¦æ‰‹åŠ¨è§£æï¼Œç›´æ¥å°±å¯ä»¥æ‹¿åˆ° Uri è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œï¼Œæˆ‘ä¸ªäººæ˜¯è®¤ä¸ºæ¯”ä¸Šé¢çš„ç»Ÿä¸€å¤„ç†æ˜¯è¦æ¸…æ™°ä¸€äº›ã€‚ å¤§å¤šæ•°ä½¿ç”¨åœºæ™¯å…¶å®éƒ½æ˜¯ä¸Šä¼ å›¾ç‰‡ï¼Œå¯ä»¥é…åˆä¹‹å‰çš„æ–‡ç« ã€æµ…å° Android 13 Photo Picker æ— æƒ§æƒé™çƒ¦æ¼ã€ä¸€èµ·é£Ÿç”¨ã€‚ ","link":"https://LiarrDev.github.io/post/Select-Local-File-in-Android-Webview/"},{"title":"ä¸º Android åº”ç”¨æ„å»º Widget","content":"èƒŒæ™¯ åº”ç”¨ Widget æ˜¯å¯ä»¥åµŒå…¥åˆ°å…¶ä»–åº”ç”¨ï¼ˆå¦‚ä¸»å±å¹•ï¼‰å¹¶æ¥æ”¶å®šæœŸæ›´æ–°çš„å¾®å‹åº”ç”¨è§†å›¾ï¼ŒGoogle å®˜æ–¹çš„ç¿»è¯‘å«åšã€Œå¾®ä»¶ã€ï¼Œåœ¨å›½å†…çš„å«æ³•ä¹Ÿæœ‰è®¸å¤šï¼Œæ¯”å¦‚ã€Œå°ç»„ä»¶ã€ç­‰ã€‚ ä» Android 1.5ï¼ˆCupcakeï¼ŒAPI 3ï¼‰å¼€å§‹ï¼ŒWidget å°±å·²å­˜åœ¨ï¼Œåˆ°åæ¥ Android 4.0ï¼ˆIce Cream Sandwichï¼ŒAPI 14ï¼‰åˆ™é€æ¸æ”¹ç‰ˆè°ƒæ•´ï¼Œç›´åˆ° Android 6.0ï¼ˆMarshmallowï¼ŒAPI 23ï¼‰äº¤äº’æ‰ç¨³å®šä¸‹æ¥ã€‚ ä¸è¿‡ç”±äº Android çš„è‡ªç”±åº¦å¯¼è‡´ä¸åŒåº”ç”¨çš„ Widget è®¾è®¡é£æ ¼å„å¼‚ï¼Œå®˜æ–¹ä¹Ÿæ²¡æœ‰ä¸ºå¼€å‘è€…ä»¬æä¾›è®¾è®¡è§„èŒƒä»¥åŠç´ æï¼Œå †ç§¯çš„ Widget åè€Œä¼šè®©æ¡Œé¢å˜å¾—å‡Œä¹±ï¼Œæ—¢ä¸ç¾è§‚ä¹Ÿä¸å®ç”¨ï¼Œäºæ˜¯ Widget åœ¨ç»å†äº†çŸ­æš‚çš„ç¹è£ä¹‹åä¾¿æ—¥æ¸è¢«äººé—å¿˜ã€‚ æ²¡æƒ³åˆ° 2020 å¹´ iOS 14 çš„å‘å¸ƒåˆ™é‡æ–°å°†æ‰‹æœºç³»ç»Ÿä¸Šçš„æ¡Œé¢å°ç»„ä»¶åŠŸèƒ½æ‹‰å›äº†äººä»¬çš„è§†é‡ä¸­ï¼ˆiOS çš„å°ç»„ä»¶å‘å±•å²æœ¬æ–‡æŒ‰ä¸‹ä¸è¡¨ï¼Œæœ‰å…´è¶£çš„è¯»è€…å¯è‡ªè¡ŒæŸ¥é˜…èµ„æ–™ï¼‰ï¼ŒWidget åˆç„•å‘äº†ç¬¬äºŒæ˜¥ï¼Œé™¤äº†å®˜æ–¹ä¼˜åŒ–å¤–ï¼Œå›½å†…ç³»ç»Ÿæ¯”å¦‚ OriginOS ä¹Ÿäº¤å‡ºäº†é«˜åˆ†ç­”å·ã€‚ è¯´äº†è¿™ä¹ˆå¤šï¼Œæ¥ä¸‹æ¥å°±å†™ä¸ª Widget å®è·µä¸€ä¸‹ã€‚ å®è·µ åŸºæœ¬é…ç½® å¾—ç›Šäºã€Android Studioã€æä¾›çš„å„ç§èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥ä¸€é”®ç”Ÿæˆ Widget æ¨¡ç‰ˆã€‚ åˆ›å»ºä¹‹å‰æˆ‘ä»¬éœ€è¦å…ˆç®€å•é…ç½®ä¸€äº›ä¿¡æ¯ï¼Œæ¯”å¦‚æ”¾ç½®çš„ä½ç½®ã€å°ºå¯¸è°ƒæ•´æ¨¡å¼ã€æœ€å°å®½é«˜ç­‰ã€‚ è™½ç„¶å¯ä»¥è‡ªåŠ¨åˆ›å»ºï¼Œä½†æˆ‘ä»¬ä¹Ÿè¦çŸ¥é“å…¶åˆ›å»ºäº†å“ªäº›ä¸œè¥¿æ‰èƒ½å¤Ÿæ¥ç€å¼€å‘ã€‚ é¦–å…ˆæ˜¯ /res/xml/new_app_widget_info.xmlï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢é…ç½®çš„å¤§éƒ¨åˆ†ä¿¡æ¯ä¼šåœ¨è¿™é‡Œç”Ÿæˆï¼š &lt;appwidget-provider xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:description=&quot;@string/app_widget_description&quot; android:initialKeyguardLayout=&quot;@layout/new_app_widget&quot; android:initialLayout=&quot;@layout/new_app_widget&quot; android:minWidth=&quot;40dp&quot; android:minHeight=&quot;40dp&quot; android:previewImage=&quot;@drawable/example_appwidget_preview&quot; android:previewLayout=&quot;@layout/new_app_widget&quot; android:resizeMode=&quot;horizontal|vertical&quot; android:targetCellWidth=&quot;1&quot; android:targetCellHeight=&quot;1&quot; android:updatePeriodMillis=&quot;86400000&quot; android:widgetCategory=&quot;home_screen&quot; /&gt; å®ƒæ˜¯ä¸€ä¸ª AppWidgetProviderInfo å¯¹è±¡ï¼Œç”¨æ¥æè¿°åº”ç”¨ Widget çš„å…ƒæ•°æ®ï¼Œæ¯”å¦‚é¢„è§ˆã€å¸ƒå±€ã€æ›´æ–°é¢‘ç‡ç­‰ã€‚ è¿™é‡Œæœ‰å‡ ä¸ªå±æ€§éœ€è¦å…³æ³¨ï¼Œandroid:previewImage æ˜¯é¢„è§ˆå›¾ç‰‡ï¼Œä¼šåœ¨æ·»åŠ  Widget å‰å±•ç¤ºï¼Œè€Œåœ¨ Android 12ï¼ˆSï¼ŒAPI 31ï¼‰ä¹‹åï¼Œå®ƒæ”¯æŒé…ç½® android:previewLayout é¢„è§ˆå¸ƒå±€ï¼š android:updatePeriodMillis ç”¨æ¥æ§åˆ¶å®šæœŸæ›´æ–°çš„é¢‘ç‡ï¼Œä½†ä¸èƒ½ä¿è¯å®é™…æ›´æ–°æŒ‰æ­¤å€¼æ­£å¥½å‡†æ—¶å‘ç”Ÿï¼Œå…¶ä¸æ”¯æŒå°‘äº 30 åˆ†é’Ÿçš„å€¼ï¼Œå®˜æ–¹å»ºè®®å°½å¯èƒ½é™ä½æ›´æ–°é¢‘ç‡ï¼Œæ¯”å¦‚ä¸è¶…è¿‡æ¯å°æ—¶ä¸€æ¬¡ï¼Œä»¥èŠ‚çœç”µæ± ç”µé‡ã€‚ android:initialLayout æ˜¯ Widget çš„å¸ƒå±€ï¼Œå…¶åŸºäº RemoteViewsï¼Œæ‰€ä»¥å®ƒå¹¶ä¸æ”¯æŒæ‰€æœ‰çš„ View æˆ– ViewGroupï¼Œå°½ç®¡åœ¨ Android 12ï¼ˆSï¼ŒAPI 31ï¼‰ä¹‹åæ‰©å±•äº†æ”¯æŒã€‚å› æ­¤å°½é‡ä½¿ç”¨åŸºç¡€çš„è§†å›¾æ§ä»¶ï¼Œæˆ–è€…åœ¨ä½¿ç”¨å‰æŸ¥é˜…æ–‡æ¡£ã€‚ Widget å¿…é¡»å®šä¹‰ android:minWidth å’Œ android:minHeightï¼Œè¡¨ç¤ºé»˜è®¤æƒ…å†µä¸‹åº”å ç”¨çš„æœ€å°ç©ºé—´é‡ã€‚å½“ç”¨æˆ·å‘å…¶ä¸»å±å¹•æ·»åŠ å¾®ä»¶æ—¶ï¼ŒWidget å ç”¨çš„å®½åº¦å’Œé«˜åº¦é€šå¸¸ä¼šè¶…è¿‡æ‰€æŒ‡å®šçš„æœ€å°å€¼ã€‚è™½ç„¶å•å…ƒæ ¼çš„å®½åº¦å’Œé«˜åº¦ä»¥åŠåº”ç”¨åˆ° Widget çš„è‡ªåŠ¨å¤–è¾¹è·é‡å¯èƒ½ä¼šå› è®¾å¤‡è€Œå¼‚ï¼Œä½†å¯ä»¥ä½¿ç”¨ä¸‹è¡¨æ ¹æ®æ‰€éœ€å ç”¨çš„ç½‘æ ¼å•å…ƒæ ¼æ•°å¤§è‡´ä¼°ç®— Widget çš„æœ€å°å°ºå¯¸ï¼š å•å…ƒæ ¼æ•°é‡ï¼ˆåˆ—æ•°æˆ–è¡Œæ•°ï¼‰ å¯ç”¨å°ºå¯¸ (dp)ï¼ˆminWidth æˆ– minHeightï¼‰ 1 40dp 2 110dp 3 180dp 4 250dp â€¦ â€¦ n 70 Ã— n âˆ’ 30 æ¥ä¸‹æ¥çœ‹çœ‹ AndroidManifest.xmlï¼š &lt;manifest ...&gt; &lt;application ...&gt; ... &lt;receiver android:name=&quot;.widget.NewAppWidget&quot; android:exported=&quot;false&quot;&gt; &lt;intent-filter&gt; &lt;action android:name=&quot;android.appwidget.action.APPWIDGET_UPDATE&quot; /&gt; &lt;/intent-filter&gt; &lt;meta-data android:name=&quot;android.appwidget.provider&quot; android:resource=&quot;@xml/new_app_widget_info&quot; /&gt; &lt;/receiver&gt; &lt;/application&gt; &lt;/manifest&gt; ç”Ÿæˆæ¨¡ç‰ˆè‡ªåŠ¨ä¸ºæˆ‘ä»¬æ³¨å†Œäº†å¹¿æ’­æ¥æ”¶å™¨ï¼Œå¹¶å°†å‰æ–‡ä¸­çš„ AppWidgetProviderInfo å…ƒæ•°æ®é…ç½®åˆ°æ­¤å¤„ã€‚ æ ¹æ®æˆ‘ä»¬å·²æœ‰çš„è®¤çŸ¥ï¼Œä¸æ˜¯åªæœ‰å››å¤§ç»„ä»¶æ‰éœ€è¦æ³¨å†Œå—ï¼Ÿ æ²¡é”™ï¼Œå…¶å® Widget æœ¬èº«ä¹Ÿæ˜¯ä¸€ä¸ª BroadcastReceiverï¼Œæˆ‘ä»¬æ¥çœ‹å…¶å®ç°ç±»ï¼š class NewAppWidget : AppWidgetProvider() { ... } å¯ä»¥çœ‹åˆ°ï¼Œå…¶ç»§æ‰¿ AppWidgetProviderï¼Œè€Œ AppWidgetProvider çš„çˆ¶ç±»æ­£æ˜¯ BroadcastReceiverï¼š public class AppWidgetProvider extends BroadcastReceiver { ... } AppWidgetProvider ä½œä¸ºä¸€ä¸ªè¾…åŠ©ç±»æ¥å¤„ç† App Widget çš„å¹¿æ’­ï¼Œä»…æ¥æ”¶ä¸ Widget æœ‰å…³çš„å¹¿æ’­äº‹ä»¶ï¼Œä¾‹å¦‚å½“æ›´æ–°ã€åˆ é™¤ã€å¯ç”¨å’Œåœç”¨ Widget æ—¶å‘å‡ºçš„å¹¿æ’­ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ç€é‡äº†è§£å…¶ç”Ÿå‘½å‘¨æœŸï¼š public class AppWidgetProvider extends BroadcastReceiver { public void onReceive(Context context, Intent intent) {...} public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {} public void onAppWidgetOptionsChanged(Context context, AppWidgetManager appWidgetManager, int appWidgetId, Bundle newOptions) {} public void onDeleted(Context context, int[] appWidgetIds) {} public void onEnabled(Context context) {} public void onDisabled(Context context) {} public void onRestored(Context context, int[] oldWidgetIds, int[] newWidgetIds) {} } onReceive() ä¸ç”¨è¿‡å¤šè§£é‡Šï¼Œå®ƒå°±æ˜¯å®ç°äº† BroadcastReceiver çš„æŠ½è±¡æ–¹æ³•ï¼Œç„¶åå°†å„ç§äº‹ä»¶åˆ†ç±»å¤„ç†é‡æ–°åˆ†å‘åˆ°å…¶ä»–æ–¹æ³•ä¸­ã€‚ onUpdate() ä¼šåœ¨æˆ‘ä»¬è®¾å®šçš„æ›´æ–°é¢‘ç‡ä¸­è§¦å‘ï¼Œæ‰€ä»¥æ›´æ–° Widget çš„ç›¸å…³é€»è¾‘åº”å½“åœ¨æ­¤å¤„ç¼–å†™ã€‚ onAppWidgetOptionsChanged() åœ¨é¦–æ¬¡æ”¾ç½® Widget æ—¶ä»¥åŠæ¯æ¬¡è°ƒæ•´ Widget å¤§å°æ—¶éƒ½ä¼šè°ƒç”¨ï¼Œä½¿ç”¨æ­¤å›è°ƒå¯æ ¹æ® Widget çš„å¤§å°èŒƒå›´æ˜¾ç¤ºæˆ–éšè—å†…å®¹ã€‚ æ¯æ¬¡ä» Widget æ‰˜ç®¡åº”ç”¨ä¸­åˆ é™¤ Widget æ—¶ï¼ŒonDeleted() æ–¹æ³•ä¼šè¢«è°ƒç”¨ã€‚ onEnabled() åœ¨é¦–æ¬¡åˆ›å»º Widget å®ä¾‹æ—¶è°ƒç”¨ï¼Œå¦‚æœç”¨æˆ·æ·»åŠ å¤šä¸ª Widget å®ä¾‹ï¼Œåˆ™ä»…åœ¨é¦–æ¬¡æ·»åŠ æ—¶æ‰ä¼šè°ƒç”¨è¯¥æ–¹æ³•ã€‚ åŒæ ·ï¼ŒonDisabled() ä¼šåœ¨å®¿ä¸»åˆ é™¤æœ€åä¸€ä¸ª Widget å®ä¾‹æ—¶è¢«è°ƒç”¨ã€‚ ä¸éš¾çœ‹å‡ºï¼ŒonUpdate() æ˜¯æœ€é‡è¦çš„æ–¹æ³•ï¼Œã€Android Studioã€ç”Ÿæˆçš„æ¨¡ç‰ˆä¸­ä¹Ÿä»…å®ç°äº†è¯¥æ–¹æ³•ï¼š class NewAppWidget : AppWidgetProvider() { override fun onUpdate(context: Context, appWidgetManager: AppWidgetManager, appWidgetIds: IntArray) { for (appWidgetId in appWidgetIds) { updateAppWidget(context, appWidgetManager, appWidgetId) } } } internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { val widgetText = context.getString(R.string.appwidget_text) val views = RemoteViews(context.packageName, R.layout.new_app_widget) views.setTextViewText(R.id.appwidget_text, widgetText) appWidgetManager.updateAppWidget(appWidgetId, views) } ç¤ºä¾‹ä»£ç ä¸ºæˆ‘ä»¬ç®€å•å®ç°äº†æ›´æ–°é€»è¾‘ï¼Œé€»è¾‘æ¸…æ™°ï¼Œæ— éœ€è§£é‡Šã€‚ AppWidgetProvider åªæ˜¯ä¸€ä¸ªè¾…åŠ©ç±»ã€‚å¦‚æœå¸Œæœ›ç›´æ¥æ¥æ”¶ App Widget å¹¿æ’­ï¼Œè‡ªè¡Œå®ç° BroadcastReceiver åŒæ ·å¯è¡Œï¼Œåªéœ€å…³æ³¨å¦‚ä¸‹ Intent Actionï¼š ACTION_APPWIDGET_UPDATE ACTION_APPWIDGET_DELETED ACTION_APPWIDGET_ENABLED ACTION_APPWIDGET_DISABLED ACTION_APPWIDGET_OPTIONS_CHANGED å‚ç…§ AppWidgetProvider çš„å¤„ç†æ–¹å¼ï¼Œå½“ç„¶è¿˜å¯ä»¥å‘é€è‡ªå®šä¹‰çš„å¹¿æ’­å†…å®¹ï¼Œè¿™åœ¨å¤„ç†ä¸€äº›è¿‡æ»¤é€»è¾‘æ—¶å¾ˆæœ‰ç”¨ã€‚ æ›´æ–° Widget å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ›´æ–° Widget å†…å®¹å¯èƒ½ä¼šæ¶ˆè€—å¤§é‡çš„è®¡ç®—èµ„æºã€‚æ‰€ä»¥å®˜æ–¹ä¹Ÿæä¾›äº†ä¸‰ç§æ›´æ–°æ–¹å¼ï¼š å®Œæ•´æ›´æ–°ï¼šå°†æ–°çš„ RemoteViews æ›¿æ¢ä¹‹å‰çš„ RemoteViewsï¼Œè¿™æ˜¯è®¡ç®—å¼€é”€æœ€å¤§çš„æ›´æ–°ã€‚ internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { ... val remoteViews = RemoteViews(context.getPackageName(), R.layout.widgetlayout).also { setTextViewText(R.id.textview_widget_layout1, &quot;Updated text1&quot;) setTextViewText(R.id.textview_widget_layout2, &quot;Updated text2&quot;) } appWidgetManager.updateAppWidget(appWidgetId, remoteViews) } éƒ¨åˆ†æ›´æ–°ï¼šå°†æ–°çš„ RemoteViews ä¸ä¹‹å‰æä¾›çš„ RemoteViews åˆå¹¶ï¼Œä»¥æ›´æ–° Widget çš„æŸäº›éƒ¨åˆ†ã€‚å¦‚æœ Widget æœªæ”¶åˆ°è‡³å°‘ä¸€ä¸ªå®Œæ•´æ›´æ–°ï¼Œç³»ç»Ÿä¼šå¿½ç•¥æ­¤æ–¹æ³•ã€‚ internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { ... val remoteViews = RemoteViews(context.getPackageName(), R.layout.widgetlayout).also { setTextViewText(R.id.textview_widget_layout, &quot;Updated text&quot;) } appWidgetManager.partiallyUpdateAppWidget(appWidgetId, remoteViews) } é›†åˆæ•°æ®åˆ·æ–°ï¼šä½¿ Widget ä¸­é›†åˆè§†å›¾çš„æ•°æ®å¤±æ•ˆï¼Œè¿™ä¼šè§¦å‘ RemoteViewsFactory.onDataSetChanged()ã€‚ internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { ... appWidgetManager.notifyAppWidgetViewDataChanged(appWidgetId, R.id.widget_listview) } é™¤äº†åœ¨æ¥æ”¶å¹¿æ’­æ—¶æ›´æ–° Widgetï¼Œåœ¨åº”ç”¨å†…æ›´æ–°ä¹ŸåŒæ ·å¯è¡Œï¼Œæ¯”å¦‚ç»™ Widget æ¢è‚¤ç­‰åœºæ™¯ã€‚åªéœ€è·å–åˆ° AppWidgetManager å’Œ AppWidgetIds å³å¯ï¼š object MyAppWidgetManager { fun updateAppWidget(context: Context) { val appWidgetManager = AppWidgetManager.getInstance(context) val appWidgetIds = appWidgetManager.getAppWidgetIds(ComponentName(context, NewAppWidget::class.java)) for (appWidgetId in appWidgetIds) { updateAppWidget(context, appWidgetManager, appWidgetId) } } } å¦‚æœé€šè¿‡å‘é€å¹¿æ’­çš„æ–¹å¼ï¼Œä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š object MyAppWidgetManager { fun updateAppWidget(context: Context) { val appWidgetManager = AppWidgetManager.getInstance(context) val appWidgetIds = appWidgetManager.getAppWidgetIds(ComponentName(context, NewAppWidget::class.java)) val intent = Intent().apply { ... // action, package, ect. putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, appWidgetIds) } context.sendBroadcast(intent) } } è¿˜å¯ä»¥è‡ªå®šä¹‰ action æ¥è¿‡æ»¤æ“ä½œã€‚ ç”±äºæœ¬è´¨ä¸Šå°±æ˜¯ BroadcastReceiver çš„ç‰¹æ€§ï¼ŒWidget æ›´æ–°çš„æ—¶é•¿å’Œä¼˜å…ˆçº§å°¤ä¸ºé‡è¦ï¼Œç³»ç»Ÿé€šå¸¸ä¼šå…è®¸ BroadcastReceiver æœ€å¤šè¿è¡Œ 10 ç§’ï¼Œç„¶åä¼šå°†å…¶è§†ä¸ºæ— å“åº”å¹¶è§¦å‘ ANR é”™è¯¯ã€‚å¦‚æœæ›´æ–° Widget éœ€è¦æ›´é•¿çš„æ—¶é—´ï¼Œä½¿ç”¨ WorkManager å®‰æ’ä»»åŠ¡æ˜¯ä¸ªä¸é”™çš„é€‰æ‹©ã€‚ ä½†åœ¨ Widget ä¸­ä½¿ç”¨ WorkManager ä¹Ÿä¼šå¼•å‘ä¸€äº›é¢„æœŸä¹‹å¤–çš„äº‹æƒ…ï¼Œæ¯”å¦‚ WorkManager å¯èƒ½ä¼šå¯¼è‡´ Widget é¢‘ç¹åˆ·æ–°ï¼Œä»è€Œå¼•å‘ Widget é—ªçƒï¼Œè¿™æ˜¯ä¸€ä¸ªå·²çŸ¥ Bugï¼ŒGoogle æä¾›äº†ä¸€ä¸ªå¦ç±»çš„è§£å†³æ–¹æ³•ï¼Œæ˜¯ç”¨ setInitialDelay() æ–¹æ³•ç»™ WorkManager é…ç½®ä¸€ä¸ª 10 å¹´çš„åˆå§‹å»¶è¿Ÿã€‚ç»è¿‡æµ‹è¯•è¿™ä¸ªæ–¹æ³•ç¡®å®èƒ½å¤Ÿè§£å†³é—®é¢˜ï¼Œä½†ä¸ä¼˜é›…ï¼ŒGoogle å›¢é˜Ÿä¹Ÿè¡¨ç¤ºæœªæ¥å°†ä¼˜åŒ– WorkManager åœ¨ Widget ä¸­çš„è¡¨ç°ã€‚ RemoteViews æ›´æ–°æ§ä»¶ ä¸Šé¢æåˆ°ï¼ŒWidget æ˜¯é€šè¿‡ RemoteViews æ¥æ›´æ–°çš„ï¼Œè€Œ RemoteViews å¹¶ä¸æ˜¯ä¸€ä¸ª View æˆ– ViewGroupï¼š public class RemoteViews implements Parcelable, Filter { ... } è¿™æ„å‘³ç€æˆ‘ä»¬å¹¶ä¸èƒ½åƒå¹³æ—¶æ›´æ–° View é‚£æ ·å¯¹ Widget å†…çš„æ§ä»¶è¿›è¡Œè®¾ç½®ï¼Œåªèƒ½ä½¿ç”¨ RemoteViews æä¾›çš„æ–¹æ³•ï¼Œæ¯”å¦‚ä¸Šé¢æåˆ°çš„ï¼š internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { ... val views = RemoteViews(context.packageName, R.layout.new_app_widget) views.setTextViewText(R.id.appwidget_text, widgetText) views.setImageViewResource(R.id.appwidget_img, R.drawable.bg) ... } è™½ç„¶ RemoteViews æä¾›äº†å¸¸ç”¨çš„æ–¹æ³•ï¼Œä½†è¿™ç§ç”¨æ³•ä»ä¸ºæˆ‘ä»¬å¸¦æ¥ä¸å°‘éº»çƒ¦ï¼Œæ¯”å¦‚æˆ‘æƒ³å¯¹ Widget é‡Œé¢çš„æŸä¸ª View åŠ¨æ€è®¾ç½®èƒŒæ™¯ï¼Œä¼¼ä¹å°±æ‰¾ä¸åˆ°ç±»ä¼¼ RemoteViews.setBackground() ä¹‹ç±»çš„æ–¹æ³•ã€‚ä¸è¿‡ç‚¹è¿› RemoteViews çš„æºç åå‘ç°ï¼Œå…¶å®ä¸Šé¢çš„è¿™äº›æ“ä½œéƒ½æ˜¯é€šè¿‡åå°„å®ç°çš„ï¼Œæ¯”å¦‚ï¼š public class RemoteViews implements Parcelable, Filter { ... public void setImageViewResource(@IdRes int viewId, @DrawableRes int srcId) { setInt(viewId, &quot;setImageResource&quot;, srcId); } public void setInt(@IdRes int viewId, String methodName, int value) { addAction(new ReflectionAction(viewId, methodName, BaseReflectionAction.INT, value)); } } æ‰€ä»¥ç»™ View è®¾ç½®èƒŒæ™¯æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥ä¸º RemoteViews å†™ä¸ªæ‰©å±•æ–¹æ³•ï¼š fun RemoteViews.setBackgroundResource(@IdRes viewId: Int, @DrawableRes srcId: Int) { this.setInt(viewId, &quot;setBackgroundResource&quot;, srcId) } è¿™æ ·å°±èƒ½å®ç°æƒ³è¦çš„æ•ˆæœã€‚ è·å– Widget å°ºå¯¸ ç”±äº RemoteViews çš„é™åˆ¶ï¼Œæˆ‘ä»¬æ— æ³•åœ¨ Widget å†…ä½¿ç”¨è‡ªå®šä¹‰ Viewï¼Œè¿™æ ·ç±»ä¼¼ç®€å•å¸¸ç”¨çš„åœ†è§’ ImageView éƒ½æ— æ³•å®ç°ï¼Œè¿™ä¸ªæ—¶å€™å¯ä»¥è€ƒè™‘æ›²çº¿æ•‘å›½ï¼Œæ¯”å¦‚å¯¹å›¾ç‰‡çš„ Bitmap è¿›è¡Œè£å‰ªå¤„ç†ï¼Œç”Ÿæˆä¸€ä¸ªåœ†è§’çš„å›¾ç‰‡è¿›è¡Œæ˜¾ç¤ºã€‚ ä½†æ˜¯åŒä¸€ Widget åœ¨ä¸åŒ ROM ä¸‹æ˜¾ç¤ºçš„å°ºå¯¸éƒ½ä¼šæœ‰å·®å¼‚ï¼Œæ‰€ä»¥ä½¿ç”¨ ImageView ä½œä¸ºåœ†è§’èƒŒæ™¯å›¾å±•ç¤ºæ—¶å¯èƒ½ä¼šé‡åˆ°å›¾ç‰‡æ‹‰ä¼¸ç­‰é—®é¢˜ï¼Œå®˜æ–¹ä¹Ÿæ²¡æœ‰æä¾›å¯¹åº”çš„ API ä¾›æˆ‘ä»¬è·å–ï¼Œæˆ‘åœ¨ StackOverflow ä¸Šæ‰¾åˆ°äº†ä¸€ä¸ªå¹¶ä¸å®Œç¾çš„è§£å†³æ–¹æ¡ˆï¼š /** * è·å– Widget å°ºå¯¸ * * @param context Do not pass Application context */ class WidgetSizeProvider(private val context: Context) { private val appWidgetManager = AppWidgetManager.getInstance(context) fun getWidgetsSize(widgetId: Int): Pair&lt;Int, Int&gt; { val isPortrait = context.resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT val width = getWidgetWidth(isPortrait, widgetId) val height = getWidgetHeight(isPortrait, widgetId) val widthInPx = context.dip(width) val heightInPx = context.dip(height) return widthInPx to heightInPx } private fun getWidgetWidth(isPortrait: Boolean, widgetId: Int) = if (isPortrait) { getWidgetSizeInDp(widgetId, AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH) } else { getWidgetSizeInDp(widgetId, AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH) } private fun getWidgetHeight(isPortrait: Boolean, widgetId: Int) = if (isPortrait) { getWidgetSizeInDp(widgetId, AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT) } else { getWidgetSizeInDp(widgetId, AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT) } private fun getWidgetSizeInDp(widgetId: Int, key: String) = appWidgetManager.getAppWidgetOptions(widgetId).getInt(key, 0) private fun Context.dip(value: Int): Int = (value * resources.displayMetrics.density).toInt() } æµ‹è¯•è¿‡ç¨‹ä¸­å‘ç°ï¼Œåœ¨å¹³æ¿ä¸Šè¿™ç§æ–¹æ³•åˆ¤æ–­æ¨ªç«–å±ä¸å‡†ç¡®ï¼ŒWidget ä¸­ä¹Ÿæ— æ³•ç›‘å¬å±å¹•æ—‹è½¬ï¼Œäºæ˜¯åŠ ä¸Šå®½é«˜çš„åˆ¤æ–­ï¼š /** * è·å– Widget å°ºå¯¸ * * @param context Do not pass Application context */ class WidgetSizeProvider(private val context: Context) { ... fun getWidgetsSize(widgetId: Int): Pair&lt;Int, Int&gt; { val isPortrait = ScreenUtils.getScreenHeight(context) &gt; ScreenUtils.getScreenWidth(context) &amp;&amp; context.resources.configuration.orientation == Configuration.ORIENTATION_PORTRAIT ... } } ä½†æ˜¯ç›®å‰ä»æœ‰ä¸€ä¸ªé—®é¢˜æ— æ³•è§£å†³ï¼Œç³»ç»Ÿå…è®¸è®¾ç½®æ¡Œé¢å›¾æ ‡ç½‘æ ¼åˆ—æ•°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå¤§å¤šæ•°æ‰‹æœºæ¡Œé¢å›¾æ ‡ç½‘æ ¼ä¸º 4 åˆ—ã€‚ ç»å¤§å¤šæ•°æ‰‹æœºåœ¨ 4 åˆ—çš„æƒ…å†µä¸‹è·å–åˆ°çš„å®½é«˜éƒ½æ²¡é—®é¢˜ï¼Œæˆ–è€…è¯´å³ä½¿æœ‰è¯¯å·®ä½†è§†è§‰ä¸Šä¸æ˜“å¯Ÿè§‰å‡ºæ¥ï¼Œå½“åˆ‡æ¢åˆ° 5 åˆ—æ—¶ï¼Œé€šè¿‡ä»¥ä¸Šæ–¹æ³•åœ¨å¾ˆå¤šå‚å•†å®šåˆ¶çš„ç³»ç»Ÿï¼ˆHarmonyOSã€MagicOSã€REDMAGIC OS ç­‰ï¼‰ä¸­å‡ºç°äº†ä¸¥é‡çš„è¯¯å·®ï¼Œé€šè¿‡è®¡ç®—å¾—çŸ¥è¿™äº›ç³»ç»Ÿåœ¨è¿”å›å®½åº¦æ—¶æ˜¯æŒ‰ç…§æ¯åˆ—å›ºå®šçš„å®½åº¦è¿”å›ï¼Œè€Œä¸æ˜¯å®é™…å æ®çš„å®½åº¦ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚åœ¨ 4 åˆ—çš„æƒ…å†µä¸‹ï¼Œå›¾æ ‡æ‰€å ç”¨çš„å®½åº¦ä¸º 64dpï¼Œä¸¤ä¸ªå›¾æ ‡é—´éš”ä¸º 16dpï¼Œè¿™æ ·ä¸€ä¸ªæ¨ªå‘é“ºæ»¡çš„ Widget å®½åº¦ä¸º 304dpï¼›å½“åˆ‡åˆ° 5 åˆ—æ—¶ï¼Œè¿™äº›å®šåˆ¶çš„ç³»ç»Ÿè¿”å›çš„ç»“æœæ˜¯ 384dpã€‚ é—®é¢˜å°±å‡ºåœ¨è¿™é‡Œï¼Œä¸€ä¸ªæ¨ªå‘é“ºæ»¡çš„ Widgetï¼Œæ— è®ºåˆ—æ•°å¦‚ä½•å˜æ›´ï¼Œå®ƒä»¬çš„å®½åº¦å·®å€¼åº”è¯¥ä¸ä¼šè¶…è¿‡ä¸€ä¸ªé—´éš”çš„å®½åº¦ï¼Œè¿™äº›å‚å•†ç²—æš´çš„è®¡ç®—å¯¼è‡´è¿”å›çš„ç»“æœè¶…è¿‡äº†å°ç»„ä»¶å®é™…çš„å®½åº¦ï¼Œç”šè‡³è¶…è¿‡äº†å±å¹•çš„å®½åº¦ã€‚ è€Œæµ‹è¯•å‘ç°ï¼Œåœ¨æ­è½½åŸç”Ÿ Android ç³»ç»Ÿçš„ Google Pixel ä¸Šå´æ²¡æœ‰æ­¤é—®é¢˜ï¼ è™½ç„¶è¿™ç§è·å–å°ºå¯¸çš„æ–¹æ³•å¹¶éå®˜æ–¹è®¤è¯ï¼Œä½†ä¸åŒç³»ç»Ÿçš„å‰²è£‚æƒ…å†µä¾ç„¶è®©æˆ‘å¤´ç–¼ã€‚ æˆ‘çŒœæµ‹ï¼Œäº§ç”Ÿè¿™ä¸ªé—®é¢˜çš„åŸå› å¯èƒ½æ˜¯å› ä¸ºä» Android 12 å¼€å§‹å®˜æ–¹æ‰æ”¯æŒè°ƒæ•´æ¡Œé¢å›¾æ ‡ç½‘æ ¼ï¼Œè€Œå¤§å¤šæ•° ROM åœ¨å¾ˆæ—©ä¹‹å‰å°±ä½¿ç”¨è‡ªå·±çš„æ–¹å¼å®ç°äº†ï¼Œä½†å¹¶æ²¡æœ‰è€ƒè™‘åˆ° Widget å°ºå¯¸çš„é—®é¢˜ï¼ŒåŒæ—¶å³ä½¿ Android 12 å®˜æ–¹å·²ç»å®ç°è¯¥åŠŸèƒ½ï¼Œè¿™äº›å‚å•†å› ä¸ºç§ç§åŸå› æ²¡æœ‰è¿ç§»åè€Œå°†å±å±±ä»£ç æµä¼ ä¸‹æ¥æ‰€å¯¼è‡´ã€‚ ä» Widget ä¸­å¯åŠ¨åº”ç”¨ ä¸€èˆ¬æƒ…å†µä¸‹ç‚¹å‡» Widget ä¼šå¯åŠ¨åº”ç”¨ï¼Œè¡Œä¸ºä¸åœ¨æ¡Œé¢ç‚¹å‡»åº”ç”¨å›¾æ ‡ä¸€è‡´ï¼Œå†·å¯åŠ¨æ—¶è¿›å…¥å¯åŠ¨é¡µï¼Œçƒ­å¯åŠ¨æ—¶è¿›å…¥åˆ°é€€åˆ°åå°æ—¶æ‰€åœ¨çš„é¡µé¢ã€‚ä½†åœ¨ Android 12 ä¸Šï¼Œè¯¥é»˜è®¤è¡Œä¸ºè¢«å–æ¶ˆäº†ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸è®¾ç½®ç‚¹å‡»äº‹ä»¶çš„æƒ…å†µä¸‹ï¼Œç‚¹å‡» Widget å°†ä¸ä¼šè‡ªåŠ¨å¯åŠ¨åº”ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•ç»™å®ƒæ„å»ºä¸€ä¸ªæ— è·¯å¾„çš„ Intent æ¥è§£å†³è¯¥é—®é¢˜ï¼š internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { val views = RemoteViews(context.packageName, R.layout.new_app_widget) if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.S) { val stackBuilder = TaskStackBuilder.create(context).addNextIntent(Intent()) val pendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT) views.setOnClickPendingIntent(R.id.appwidget_root, pendingIntent) } appWidgetManager.updateAppWidget(appWidgetId, views) } è¦æ˜¯æƒ³ä¿®æ”¹è¯¥è¡Œä¸ºä¹Ÿæ˜¯å¯ä»¥çš„ï¼š internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { val views = RemoteViews(context.packageName, R.layout.new_app_widget) val stackBuilder = TaskStackBuilder.create(context).apply { addNextIntentWithParentStack(Intent(context, MainActivity::class.java)) addNextIntent(Intent(context, WidgetActivity::class.java)) } val pendingIntent = stackBuilder.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT) views.setOnClickPendingIntent(R.id.appwidget_text, pendingIntent) appWidgetManager.updateAppWidget(appWidgetId, views) } è¿™é‡Œçœ‹åˆ°è®¾ç½®äº†ä¸¤ä¸ª Activityï¼Œå…¶ä¸­ WidgetActivity æ˜¯è¦è·³è½¬çš„é¡µé¢ï¼ŒMainActivity æ˜¯é¦–é¡µï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„äº¤äº’ï¼Œå³å°ç»„ä»¶è·³è½¬åˆ°å…·ä½“é¡µé¢åè¿”å›ç›´æ¥å›åˆ°åº”ç”¨ä¸»é¡µï¼Œè€Œä¸æ˜¯é€€å‡ºåº”ç”¨ã€‚é€šè¿‡ addNextIntentWithParentStack() å¯ä»¥æ„å»ºåŒ…å«è¿”å›æ ˆçš„ PendingIntentã€‚ ä»éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€èˆ¬åº”ç”¨ä¼šåœ¨é—ªå±é¡µæ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œä½†å¦‚æœåƒä¸Šé¢ä¿®æ”¹äº† Widget çš„å¯åŠ¨é¡µé¢åï¼Œåº”ç”¨ä¸ç»é—ªå±é¡µå³è¿›å…¥ WidgetActivityï¼Œä¼šå¯¼è‡´æŸäº›åŠŸèƒ½å‡ºç°å¼‚å¸¸ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘åšä¸€ä¸ªä¸­é—´é¡µè·³è½¬ï¼Œåœ¨ä¸­é—´é¡µåšåˆå§‹åŒ–æ“ä½œï¼Œæˆ–è€…ç›´æ¥å¤ç”¨é—ªå±é¡µåŠŸèƒ½ï¼Œæ ¹æ®ä¸åŒæƒ…å†µè·³è½¬ã€‚ å½“ Widget å†…ä¸åŒçš„ View éœ€è¦å“åº”ä¸åŒçš„ PendingIntent æ—¶ï¼Œæˆ‘ä»¬ä¹ æƒ¯æ€§ä¼šé€šè¿‡ putExtra() æ–¹æ³•ç»™åŒä¸€ä¸ªé”®ä¼ é€’ä¸åŒçš„å€¼ï¼Œä½†åœ¨è¿™é‡Œä½ å¯èƒ½ä¼šå‘ç°ï¼Œåä¸€ä¸ªè®¾ç½®çš„å€¼æ€»ä¼šè¦†ç›–å‰ä¸€ä¸ªï¼Œæ¯”å¦‚ï¼š internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { val views = RemoteViews(context.packageName, R.layout.new_app_widget) val stackBuilder1 = TaskStackBuilder.create(context).apply { ... addNextIntent(Intent(context, WidgetActivity::class.java).putExtra(&quot;arg&quot;, 1)) } val pendingIntent1 = stackBuilder1.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT) views.setOnClickPendingIntent(R.id.appwidget_text, pendingIntent2) val stackBuilder2 = TaskStackBuilder.create(context).apply { ... addNextIntent(Intent(context, WidgetActivity::class.java).putExtra(&quot;arg&quot;, 2)) } val pendingIntent2 = stackBuilder2.getPendingIntent(0, PendingIntent.FLAG_UPDATE_CURRENT) views.setOnClickPendingIntent(R.id.appwidget_img, pendingIntent2) appWidgetManager.updateAppWidget(appWidgetId, views) } æ— è®ºç‚¹å‡»å“ªä¸€ä¸ª Viewï¼Œæˆ‘ä»¬åœ¨ WidgetActivity æ¥æ”¶æ•°æ®ä¼šå‘ç°éƒ½æ˜¯ 2ï¼Œè¿™æ˜¾ç„¶æ˜¯ä¸åˆç†çš„ã€‚ç©¶å…¶åŸå› ï¼Œæ˜¯ç³»ç»ŸæŠŠè¿™ä¸¤ä¸ª PendingIntent éƒ½å½“æˆåŒä¸€ä¸ªå»å¤„ç†äº†ï¼Œæˆ‘ä»¬æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥é¿å…è¿™ä¸ªé—®é¢˜ã€‚ ä¸€æ˜¯ä¸º Intent æ·»åŠ ä¸åŒçš„ actionï¼š internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { val stackBuilder1 = TaskStackBuilder.create(context).apply { ... addNextIntent(Intent(context, WidgetActivity::class.java).putExtra(&quot;arg&quot;, 1).setAction(&quot;action_1&quot;)) } val stackBuilder2 = TaskStackBuilder.create(context).apply { ... addNextIntent(Intent(context, WidgetActivity::class.java).putExtra(&quot;arg&quot;, 2).setAction(&quot;action_2&quot;)) } ... appWidgetManager.updateAppWidget(appWidgetId, views) } äºŒæ˜¯æŒ‡å®šå”¯ä¸€çš„ requestCodeï¼š internal fun updateAppWidget(context: Context, appWidgetManager: AppWidgetManager, appWidgetId: Int) { val pendingIntent1 = stackBuilder1.getPendingIntent(1, PendingIntent.FLAG_UPDATE_CURRENT) val pendingIntent2 = stackBuilder2.getPendingIntent(2, PendingIntent.FLAG_UPDATE_CURRENT) ... appWidgetManager.updateAppWidget(appWidgetId, views) } è¿™ä¸¤ç§æ–¹æ¡ˆéƒ½å¯ä»¥ä¸ºæ¯ä¸ª View åŒºåˆ† PendingIntent å¹¶ä¼ é€’ä¸åŒçš„å‚æ•°ï¼Œç¡®ä¿å®ƒä»¬èƒ½å¤ŸæŒ‰ç…§æˆ‘ä»¬æœŸæœ›çš„æ–¹å¼æ‰§è¡Œã€‚ Widget çš„åç§°å’Œæè¿° Widget çš„æè¿°æ˜¯ä» Android 12ï¼ˆSï¼ŒAPI 31ï¼‰å¼€å§‹æ”¯æŒçš„ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ–‡æ¨¡ç‰ˆä¸­é…ç½®çš„ï¼š &lt;appwidget-provider ... android:description=&quot;@string/app_widget_description&quot; /&gt; ä½†æ˜¯ Widget åç§°å¹¶æ²¡æœ‰é»˜è®¤é…ç½®ï¼Œè¿™æ—¶ç³»ç»Ÿä¼šå°†åº”ç”¨åç§°ä½œä¸ºå…¶é»˜è®¤åç§°ã€‚å½“ä¸€ä¸ªåº”ç”¨æœ‰å¤šä¸ª Widget çš„æƒ…å†µä¸‹ï¼Œæœªé…ç½®åç§°ä¼šè®©ç”¨æˆ·æ— æ³•å¾—çŸ¥æ¯ä¸€ä¸ª Widget çš„ä½œç”¨ï¼Œæ¯”å¦‚çœ‹ã€è±†ç“£ã€çš„å‡ ä¸ª Widget ä½ èƒ½åˆ†è¾¨å‡ºå®ƒä»¬åˆ†åˆ«æ˜¯ä»€ä¹ˆå—ï¼š Widget çš„åç§°å®é™…ä¸Šæ˜¯é€šè¿‡é…ç½® BroadcastReceiver çš„ label å®ç°çš„ï¼š &lt;manifest ...&gt; &lt;application ...&gt; ... &lt;receiver android:name=&quot;.widget.NewAppWidget&quot; android:exported=&quot;false&quot; android:label=&quot;@string/widget_name&quot;&gt; ... &lt;/receiver&gt; &lt;/application&gt; &lt;/manifest&gt; æ•ˆæœå¦‚ä¸‹ï¼š åº”ç”¨å†…å‘æ¡Œé¢æ·»åŠ  Widget ä½ åœ¨æ—¥å¸¸ä½¿ç”¨ä¸€äº› App æ—¶ä¹Ÿè®¸æœ‰ç•™æ„åˆ°ï¼Œç³»ç»Ÿå…è®¸åœ¨åº”ç”¨å†…ç›´æ¥å‘æ¡Œé¢æ·»åŠ  Widgetï¼š è¿™ä¸ªåŠŸèƒ½å®é™…ä¸Šæ˜¯ä» Android 8ï¼ˆOreoï¼ŒAPI 26ï¼‰å¼€å§‹æä¾›çš„ï¼š fun addWidgetToHomeScreen(context: Context) { if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.O) { return } val appWidgetManager = AppWidgetManager.getInstance(context) val provider = ComponentName(context, NewAppWidget::class.java) if (appWidgetManager.isRequestPinAppWidgetSupported) { val intent = Intent(context, NewAppWidget::class.java) val successCallback = PendingIntent.getBroadcast(context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT) appWidgetManager.requestPinAppWidget(provider, null, successCallback) } } å¦‚æœåº”ç”¨ä¸éœ€è¦æ”¶åˆ°ç³»ç»Ÿæ˜¯å¦æˆåŠŸå°† Widget å›ºå®šåˆ°å—æ”¯æŒçš„å¯åŠ¨å™¨ä¸Šçš„é€šçŸ¥ï¼Œå¯ä»¥å°† null ä½œä¸º requestPinAppWidget() çš„ç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥ã€‚ æ€»ç»“ ä»¥ä¸Šå°±æ˜¯æ„å»º App Widget çš„ç®€å•ä»‹ç»ï¼ŒåŒæ—¶ä¹Ÿæ¶‰åŠåˆ° RemoteViewsã€ PendingIntent å’Œ WorkManager çš„ä¸€äº›å‘ï¼Œäº‹å®ä¸Šè¿˜æœ‰è®¸å¤šé…ç½®æœªæåŠï¼Œå¦ä¸€æ–¹é¢ Android 12ï¼ˆSï¼ŒAPI 31ï¼‰è¿™ä¸ªç‰ˆæœ¬ä¹Ÿä¸º Widget æ‰©å±•äº†è®¸å¤šèƒ½åŠ›ï¼Œæœ¬æ–‡æœªèƒ½ä¸€ä¸€ä»‹ç»ï¼Œå¦‚éœ€è¦æ›´é«˜çº§çš„å®šåˆ¶åŠŸèƒ½ï¼Œå¯è‡ªè¡ŒæŸ¥é˜…æ–‡æ¡£ã€‚ å‚è€ƒå†…å®¹ åº”ç”¨ widget æ¦‚è§ˆ | Android Developers æ„å»ºåº”ç”¨å¾®ä»¶ | Android å¼€å‘è€… | Android Developers åº”ç”¨å¾®ä»¶è®¾è®¡æŒ‡å— | Android å¼€å‘è€… | Android Developers RemoteViews | Android Developers ä»é€šçŸ¥å¯åŠ¨ Activity | Android å¼€å‘è€… | Android Developers Disabling component leads to AppWidgetProvider.onUpdate call - Google Issue Tracker widgets are &quot;flickering&quot; during every update (even if there is no content change) - Google Issue Tracker Bug: WorkManager can trigger onUpdate of AppWidget - Google Issue Tracker android - Refresh AppWidget with network request using RemoteView button - Stack Overflow android - Get the size of my homescreen widget - Stack Overflow android - How to detect orientation change in home screen widget? - Stack Overflow ","link":"https://LiarrDev.github.io/post/Building-Widgets-for-Android-Apps/"},{"title":"æµ…å° Android 13 Photo Picker æ— æƒ§æƒé™çƒ¦æ¼","content":"èƒŒæ™¯ æœ€è¿‘ä¸¤å¹´é€‚é… Android æ–°ç‰ˆæœ¬çš„å°ä¼™ä¼´åº”è¯¥éƒ½å‘ç°ï¼ŒAndroid å¯¹äºç³»ç»Ÿè¯»å†™æƒé™çš„ç®¡ç†åˆæ”¶çª„äº†ã€‚ Android 13ï¼ˆTiramisu, API 33ï¼‰ä¸Šï¼ŒåºŸå¼ƒäº† READ_EXTERNAL_STORAGE æƒé™ï¼Œæ–°å¢ READ_MEDIA_IMAGESã€READ_MEDIA_VIDEO å’Œ READ_MEDIA_AUDIO ä¸‰ä¸ªæƒé™åˆ†åˆ«ç”¨äºæ§åˆ¶å›¾ç‰‡ã€è§†é¢‘ã€éŸ³é¢‘çš„è®¿é—®ã€‚ Android 14ï¼ˆUpsideDownCake, API 34ï¼‰ä¸Šåˆ™æ–°å¢äº† READ_MEDIA_VISUAL_USER_SELECTED æƒé™ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ€§åœ°è®©åº”ç”¨è®¿é—®éƒ¨åˆ†å›¾ç‰‡æˆ–è§†é¢‘ã€‚ ç”±äºç³»ç»Ÿé€‰æ‹©å™¨è¿‡äºä¸‘é™‹ï¼Œç›¸ä¿¡å¤§å¤šæ•°éœ€è¦ç”¨åˆ°å›¾ç‰‡é€‰æ‹©åŠŸèƒ½çš„ Appï¼Œéƒ½ä¼šè‡ªè¡Œå®ç°æˆ–è€…æ¥å…¥ä¸‰æ–¹åº“æ¥å†…ç½®å›¾ç‰‡é€‰æ‹©å™¨åŠŸèƒ½ï¼Œè€Œè¿™ä¸ªè¡Œä¸ºåœ¨ Android 14 ä¸Šåˆ™ä¼šé‡åˆ°æ–°çš„é—®é¢˜ï¼Œå½“ç”¨æˆ·ä»…æˆæƒéƒ¨åˆ†å›¾ç‰‡æˆ–è§†é¢‘æ—¶ï¼Œæ•´ä¸ªæ“ä½œè·¯å¾„ä¼šéå¸¸é•¿ï¼Œå³ç”¨æˆ·é¦–å…ˆéœ€è¦é€‰æ‹©æˆæƒå“ªäº›ç…§ç‰‡ç»™åº”ç”¨ï¼Œç„¶åå†ä»åº”ç”¨å†…ç½®çš„å›¾ç‰‡é€‰æ‹©å™¨ä¸­é€‰æ‹©ç…§ç‰‡ã€‚ å¦ä¸€æ–¹é¢ï¼ŒPlay Store å¯¹äºæƒé™çš„è·å–æ”¿ç­–ä¹Ÿåœ¨å°†æ¥æ”¶ç´§ï¼š Timeline information We anticipate the following timeline for the rollout of the Photo and Video Permissions policy. Note that this is subject to change; updates will be posted in this article. October 2023: We announced the new Photos and Video Permissions policy. Mid 2024: Apps with one-time or infrequent use of photos requested to use a system photo picker and remove READ_MEDIA_IMAGES and READ_MEDIA_VIDEO permissions from their app manifest. Early 2025: Only apps with broad access core functionality can use READ_MEDIA_IMAGES and READ_MEDIA_VIDEO permissions. æ—¶é—´è¡¨ä¿¡æ¯ æˆ‘ä»¬é¢„è®¡å°†æŒ‰ç…§ä»¥ä¸‹æ—¶é—´è¡¨å‘å¸ƒâ€œç…§ç‰‡å’Œè§†é¢‘æƒé™â€æ”¿ç­–ã€‚è¯·æ³¨æ„ï¼Œæ­¤æ—¶é—´è¡¨å¯èƒ½ä¼šæœ‰å˜åŠ¨ï¼›å±Šæ—¶æˆ‘ä»¬ä¼šåœ¨æœ¬æ–‡ä¸­å‘å¸ƒæ›´æ–°ã€‚ 2023 å¹´ 10 æœˆï¼š æˆ‘ä»¬å…¬å¸ƒäº†æ–°çš„â€œç…§ç‰‡å’Œè§†é¢‘æƒé™â€æ”¿ç­–ã€‚ 2024 å¹´å¹´ä¸­ï¼š å¦‚æœåº”ç”¨åªç”¨ä¸€æ¬¡ç…§ç‰‡ï¼Œæˆ–è€…å¾ˆå°‘ç”¨åˆ°ç…§ç‰‡ï¼Œåˆ™å¿…é¡»ä½¿ç”¨ç³»ç»Ÿç…§ç‰‡é€‰æ‹©å™¨ï¼Œå¹¶ä»åº”ç”¨æ¸…å•ä¸­ç§»é™¤ READ_MEDIA_IMAGES å’Œ READ_MEDIA_VIDEO æƒé™ã€‚ 2025 å¹´åˆï¼š åªæœ‰æ ¸å¿ƒåŠŸèƒ½éœ€è¦è·å–å¹¿æ³›è®¿é—®æƒé™çš„åº”ç”¨æ‰èƒ½ä½¿ç”¨ READ_MEDIA_IMAGES å’Œ READ_MEDIA_VIDEO æƒé™ã€‚ Photo Picker å¥½æ¶ˆæ¯æ˜¯ï¼Œä» Android 13ï¼ˆTiramisu, API 33ï¼‰å¼€å§‹ï¼Œå®˜æ–¹æä¾›äº†ç³»ç»Ÿçº§å›¾ç‰‡é€‰æ‹©å™¨ Photo Pickerï¼Œæ ·å¼å’Œä½“éªŒéƒ½éå¸¸ä¸æ»‘ã€‚æœ€é‡è¦çš„æ˜¯ï¼Œæ— éœ€ç”³è¯·æƒé™ï¼Œåªéœ€å‡ è¡Œä»£ç å³å¯è½»æ¾æ¥å…¥ã€‚ androidx.activity 1.6.0+ é¦–å…ˆæŠŠ androidx.activity å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼š dependencies { implementation(&quot;androidx.activity:activity:1.8.2&quot;) } ç”±äºé¡¹ç›®åŸå› æ— æ³•å‡çº§çš„ï¼Œåœ¨ä¸‹æ–‡ä¼šç»™å‡ºè§£å†³æ–¹æ¡ˆã€‚ æ¥ä¸‹æ¥åªéœ€ä½¿ç”¨ Activity Result API è°ƒç”¨å³å¯ï¼š class MainActivity : AppCompatActivity() { ... private val pickMedia = registerForActivityResult(ActivityResultContracts.PickVisualMedia()) { if (it != null) { // é€‰æ‹©å›¾ç‰‡çš„ Uri } else { // æœªé€‰æ‹©å›¾ç‰‡ } } private fun pickImage() = pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly)) private fun pickVideo() = pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.VideoOnly)) private fun pickImageOrVideo() = pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageAndVideo)) private fun pickByMime(mimeType: String) = pickMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.SingleMimeType(mimeType))) } é€šè¿‡å‘ PickVisualMediaRequest() ä¸­ä¼ å…¥ä¸åŒçš„ç±»å‹æ¥æ„å»ºä¸åŒçš„è¯·æ±‚å¯¹è±¡ã€‚æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œæˆ‘ä»¬è°ƒç”¨çš„ PickVisualMediaRequest() å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒä¼šåœ¨å†…éƒ¨å¸®æˆ‘ä»¬æ„å»ºåŒåç±»çš„å¯¹è±¡ï¼š fun PickVisualMediaRequest( mediaType: VisualMediaType = ImageAndVideo ) = PickVisualMediaRequest.Builder().setMediaType(mediaType).build() class PickVisualMediaRequest internal constructor() { ... class Builder { ... } } VisualMediaType æ˜¯ä¸€ä¸ªå¯†å°æ¥å£ï¼Œç”±ä¸Šé¢æˆ‘ä»¬ç¤ºä¾‹çš„å‡ ç§ç±»å‹å®ç°ï¼Œåˆ†åˆ«å¯¹åº”ä»…é€‰æ‹©å›¾ç‰‡ã€ä»…é€‰æ‹©è§†é¢‘ã€é€‰æ‹©å›¾ç‰‡æˆ–è§†é¢‘å’Œä»…é€‰æ‹©ç‰¹å®šçš„ MIME ç±»å‹ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœæƒ³è®¾ç½®å¤šé€‰ï¼ŒPhoto Picker åŒæ ·æ”¯æŒï¼š class MainActivity : AppCompatActivity() { ... private val pickMultipleMedia = registerForActivityResult(ActivityResultContracts.PickMultipleVisualMedia(5)) { if (it.isNotEmpty()) { // é€‰æ‹©çš„å›¾ç‰‡ Uri é›†åˆ } else { // æœªé€‰æ‹©å›¾ç‰‡ } } private fun pickImages() = pickMultipleMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly)) private fun pickVideos() = pickMultipleMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.VideoOnly)) private fun pickImageOrVideos() = pickMultipleMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageAndVideo)) private fun pickByMimes(mimeType: String) = pickMultipleMedia.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.SingleMimeType(mimeType))) } åªéœ€æŠŠ ActivityResultContract æ›´æ¢ä¸ºå¤šé€‰çš„ PickMultipleVisualMedia å³å¯ï¼ŒåŒæ—¶å¯ä»¥ä¼ å…¥ä¸€ä¸ªæ•´å‹å‚æ•°æ§åˆ¶é€‰æ‹©çš„æ–‡ä»¶æ•°é‡ä¸Šé™ã€‚æ•ˆæœå¦‚ä¸‹ï¼š æ˜¯ä¸æ˜¯éå¸¸ç®€å•ï¼Ÿ å‰æ–‡æåˆ°ï¼ŒPhoto Picker ä» Android 13ï¼ˆTiramisu, API 33ï¼‰å¼€å§‹æ”¯æŒï¼Œè¿™ä¸ªè¯´æ³•å…¶å®å¹¶ä¸å‡†ç¡®ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­æåˆ°ï¼Œæ”¯æŒ Google Play Service çš„è®¾å¤‡ä¹Ÿæ˜¯å¯ä»¥æ›´æ–°ä½¿ç”¨çš„ï¼Œåœ¨ä¸æ”¯æŒ Photo Picker çš„ä½ç‰ˆæœ¬æœºå‹ä¸­ï¼Œè¯¥åº“ä¼šè‡ªåŠ¨è°ƒç”¨ ACTION_OPEN_DOCUMENT æ‰“å¼€ç³»ç»Ÿèµ„æºç®¡ç†å™¨è¿›è¡Œé€‰æ‹©ï¼š åŒæ—¶ï¼Œå¦‚æœä½ ä½¿ç”¨å¤šé€‰æ¨¡å¼ï¼Œèµ„æºç®¡ç†å™¨ä¼šå¿½ç•¥æ‰€è®¾ç½®çš„æ•°é‡ä¸Šé™ã€‚ å®˜æ–¹ä¹Ÿæä¾›äº†ä¸€ä¸ªæ–¹æ³•ç”¨äºåˆ¤æ–­ Photo Picker åœ¨ç»™å®šè®¾å¤‡ä¸Šæ˜¯å¦å¯ç”¨ï¼š class ActivityResultContracts private constructor() { ... @RequiresApi(19) open class PickVisualMedia : ActivityResultContract&lt;PickVisualMediaRequest, Uri?&gt;() { companion object { ... @SuppressLint(&quot;ClassVerificationFailure&quot;, &quot;NewApi&quot;) @JvmStatic fun isPhotoPickerAvailable(context: Context): Boolean { return isSystemPickerAvailable() || isSystemFallbackPickerAvailable(context) || isGmsPickerAvailable(context) } } ... } } androidx.activity 1.5.1- æ¥ä¸‹æ¥è¯´è¯´ androidx.activity åœ¨ä½ç‰ˆæœ¬ä¸­å¦‚ä½•å¤„ç†ï¼Œä½ç‰ˆæœ¬ä¸­å­˜åœ¨çš„é—®é¢˜ä¸»è¦æ˜¯ PickVisualMedia å’Œ PickMultipleVisualMedia ä¸¤ä¸ª ActivityResultContract çš„ç¼ºå¤±ï¼ŒåŒæ—¶è¿å¸¦ isPhotoPickerAvailable() è¿™ä¸ªåˆ¤æ–­æ–¹æ³•ä¹Ÿæ— æ³•ä½¿ç”¨ã€‚ æˆ‘ä»¬é‡‡ç”¨çš„ç­–ç•¥å°±æ˜¯å½“ç³»ç»Ÿç‰ˆæœ¬ä¸ä½äº Android 13 æ—¶ï¼Œä½¿ç”¨ Photo Pickerï¼Œå¦åˆ™ä½¿ç”¨ç³»ç»Ÿèµ„æºç®¡ç†å™¨ã€‚ å®ç°çš„æ–¹æ³•æœ‰å¾ˆå¤šï¼Œæˆ‘è¿™é‡Œç®€å•å†™ä¸¤ä¸ª ActivityResultContracts ç¤ºä¾‹ï¼Œä½ å¯ä»¥æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œæ‰©å±•ï¼š object PicResultContract { class PickImage : ActivityResultContract&lt;Void?, Uri?&gt;() { override fun createIntent(context: Context, input: Void?): Intent { if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) { return Intent(MediaStore.ACTION_PICK_IMAGES).setType(&quot;image/*&quot;) } return Intent(Intent.ACTION_OPEN_DOCUMENT).setType(&quot;image/*&quot;) } override fun parseResult(resultCode: Int, intent: Intent?): Uri? { return intent.takeIf { resultCode == Activity.RESULT_OK }?.data } } class PickImages : ActivityResultContract&lt;Int, List&lt;Uri&gt;&gt;() { override fun createIntent(context: Context, input: Int): Intent { if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.TIRAMISU) { return Intent(MediaStore.ACTION_PICK_IMAGES) .putExtra(MediaStore.EXTRA_PICK_IMAGES_MAX, input) .setType(&quot;image/*&quot;) } return Intent(Intent.ACTION_OPEN_DOCUMENT) .putExtra(Intent.EXTRA_ALLOW_MULTIPLE, true) .setType(&quot;image/*&quot;) } override fun parseResult(resultCode: Int, intent: Intent?): List&lt;Uri&gt; { val i = intent.takeIf { resultCode == Activity.RESULT_OK } val data = i?.data if (data != null) { return listOf(data) } val clipData = i?.clipData if (clipData != null &amp;&amp; clipData.itemCount &gt; 0) { return (0 until clipData.itemCount).map { clipData.getItemAt(it).uri } } return emptyList() } } } ç¤ºä¾‹ä¸­çš„å¤šé€‰ä»ç„¶å‚è€ƒäº†é«˜ç‰ˆæœ¬ä¸­çš„ç­–ç•¥ï¼Œå½“ä½¿ç”¨èµ„æºç®¡ç†å™¨æ—¶ï¼Œæ‰€è®¾ç½®çš„æ–‡ä»¶æ•°é‡ä¸Šçº¿ä¹Ÿä¼šè¢«å¿½ç•¥ã€‚ ä½¿ç”¨æ–¹æ³•ä¸åŸæ¥ç±»ä¼¼ï¼ˆä»…åšç¤ºä¾‹ä½¿ç”¨æ‰€ä»¥æ²¡æœ‰å®Œå…¨å‚ç…§åŸæ¥çš„å†™æ³•å¤åˆ»ï¼Œè‡ªè¡Œæ”¹é€ å³å¯ï¼‰ï¼š class MainActivity : AppCompatActivity() { ... private val pickImage = registerForActivityResult(PicResultContract.PickImage()) { if (it != null) { // é€‰æ‹©å›¾ç‰‡çš„ Uri } else { // æœªé€‰æ‹©å›¾ç‰‡ } } private val pickImages = registerForActivityResult(PicResultContract.PickImages()) { if (it.isNotEmpty()) { // é€‰æ‹©çš„å›¾ç‰‡ Uri é›†åˆ } else { // æœªé€‰æ‹©å›¾ç‰‡ } } private fun pickImage() = pickImage.launch(null) private fun pickImages() = pickImages.launch(5) } åè®° å‰é˜µå­ @éƒ­éœ– å‘äº†ä¸€ç¯‡æ–‡ç« ã€Android 14æ–°ç‰¹æ€§ï¼Œé€‰æ‹©æ€§ç…§ç‰‡å’Œè§†é¢‘è®¿é—®æˆæƒã€ï¼Œæˆ‘ä¹Ÿåœ¨è¯„è®ºåŒºæ¢è®¨äº†äº¤äº’çš„ç­–ç•¥ï¼Œåœ¨æ”¯æŒçš„è®¾å¤‡ï¼ˆæˆ– Android 13+ï¼‰ä¸­ä½¿ç”¨ Photo Pickerï¼Œå¦åˆ™ä½¿ç”¨åº”ç”¨å†…å®ç°çš„å›¾ç‰‡é€‰æ‹©å™¨ï¼Œæˆ–è®¸æ˜¯å½“ä¸‹æœ€å¥½çš„æ–¹æ¡ˆã€‚ å‚è€ƒå†…å®¹ Photo picker | Android Developers ","link":"https://LiarrDev.github.io/post/Try-Photo-Picker-on-Android-13-without-Permission-Hassles/"},{"title":"Android Bitmap ç°åº¦å¤„ç†","content":"å‰è¨€ å¹³æ—¶åœ¨ä½¿ç”¨ã€Photoshopã€åšå›¾æ—¶ï¼Œæˆ‘ä»¬å¸¸ä¼šå¯¹å›¾ç‰‡åšå»è‰²å¤„ç†ï¼Œä»¥å®ç°å„ç§ä¸°å¯Œçš„ç»†èŠ‚ã€‚ç°åº¦å¤„ç†è¿˜æœ‰å¦‚ä¸‹ä½œç”¨ï¼š é™ä½æ•°æ®ç»´åº¦ï¼šå½©è‰²å›¾åƒé€šå¸¸åŒ…å«äº†å¤§é‡çš„å†—ä½™ä¿¡æ¯ï¼Œè€Œç°åº¦å›¾åƒåªä¿ç•™äº†å›¾åƒçš„äº®åº¦ä¿¡æ¯ã€‚é€šè¿‡ç°åº¦å¤„ç†ï¼Œå¯ä»¥å°†å›¾åƒçš„æ•°æ®ç»´åº¦ä»ä¸‰ç»´ï¼ˆRGB é€šé“ï¼‰é™ä½ä¸ºäºŒç»´ï¼ˆç°åº¦å€¼ï¼‰ã€‚ ç®€åŒ–å›¾åƒå¤„ç†ï¼šåœ¨è®¸å¤šå›¾åƒå¤„ç†ä»»åŠ¡ä¸­ï¼Œåªéœ€è¦å…³æ³¨å›¾åƒçš„äº®åº¦ä¿¡æ¯è€Œä¸éœ€è¦é¢œè‰²ä¿¡æ¯ã€‚é€šè¿‡å°†å›¾åƒè½¬æ¢ä¸ºç°åº¦å›¾åƒï¼Œå¯ä»¥ç®€åŒ–åç»­çš„å›¾åƒå¤„ç†æ“ä½œï¼Œå‡å°‘è®¡ç®—é‡å’Œå¤æ‚åº¦ã€‚ æé«˜å›¾åƒåˆ†ææ•ˆæœï¼šåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç°åº¦å›¾åƒå¯ä»¥æ›´å¥½åœ°çªå‡ºå›¾åƒä¸­çš„ç»†èŠ‚å’Œç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œåœ¨è¾¹ç¼˜æ£€æµ‹ã€å½¢çŠ¶è¯†åˆ«ã€äººè„¸è¯†åˆ«ç­‰ä»»åŠ¡ä¸­ï¼Œä½¿ç”¨ç°åº¦å›¾åƒå¯ä»¥æ›´å®¹æ˜“åœ°æå–å’Œåˆ†æå›¾åƒçš„ç‰¹å¾ã€‚ é‚£ä¹ˆåœ¨ Android å¼€å‘ä¸­æˆ‘ä»¬èƒ½å¦å¯¹å›¾ç‰‡åšç±»ä¼¼çš„ç°åº¦å¤„ç†å‘¢ï¼Ÿ åŸç† è‰²é¥±å’Œåº¦ï¼ˆSaturationï¼‰æ˜¯æŒ‡æ˜¯æ’­æ”¾çš„å…‰çš„å½©è‰²æ·±æµ…åº¦æˆ–é²œè‰³åº¦ã€‚è‰²é¥±å’Œåº¦è¡¨ç¤ºæ’­æ”¾çš„å…‰çš„å½©è‰²é²œè‰³åº¦ï¼Œå–å†³äºå½©è‰²ä¸­çš„ç°åº¦ï¼Œç°åº¦è¶Šé«˜ï¼Œè‰²å½©é¥±å’Œåº¦å³è¶Šä½ï¼Œåä¹‹äº¦ç„¶ã€‚ å›¾åƒçš„ç°åº¦å¤„ç†ä¸­æœ‰å¾ˆå¤šç§æ–¹æ³•ï¼Œå…¶ä¸­æ¯”è¾ƒæœ‰åçš„ç®—æ³•æ˜¯é€šè¿‡å¯¹å½©è‰²å›¾åƒçš„ RGB é€šé“è¿›è¡ŒåŠ æƒå¹³å‡æ¥è®¡ç®—ç°åº¦å€¼ã€‚é€šå¸¸ä½¿ç”¨ä»¥ä¸‹å…¬å¼è®¡ç®—æ¯ä¸ªåƒç´ çš„ç°åº¦å€¼ï¼Œ å…¶ä¸­ï¼ŒRã€Gã€B åˆ†åˆ«è¡¨ç¤ºçº¢è‰²ã€ç»¿è‰²å’Œè“è‰²é€šé“çš„åƒç´ å€¼ã€‚ Gray=0.299Ã—R+0.587Ã—G+0.114Ã—BGray = 0.299 \\times R + 0.587 \\times G + 0.114 \\times B Gray=0.299Ã—R+0.587Ã—G+0.114Ã—B ç”±äºäººçœ¼å¯¹ç»¿è‰²çš„æ•æ„Ÿåº¦æœ€é«˜ï¼Œå¯¹è“è‰²çš„æ•æ„Ÿåº¦æœ€ä½ï¼Œè¯¥æ–¹æ³•åŸºäºäººçœ¼å¯¹ä¸åŒé¢œè‰²é€šé“çš„æ•æ„Ÿåº¦ä¸åŒï¼Œå¯¹ RGB ä¸‰åˆ†é‡è¿›è¡ŒåŠ æƒå¹³å‡èƒ½ç›¸å¯¹åˆç†åœ°å°†å½©è‰²ä¿¡æ¯è½¬æ¢ä¸ºç°åº¦ä¿¡æ¯ã€‚ æµ®ç‚¹è¿ç®—æ•ˆç‡ä¸é«˜ï¼Œå› æ­¤è¯¥å…¬å¼ä¹Ÿæœ‰å¾ˆå¤šå˜ç§ï¼Œæœ¬æ–‡æš‚ä¸è®¨è®ºã€‚ å®ç° æˆ‘ä»¬å¯ä»¥é€šè¿‡éå†å›¾ç‰‡ä¸­çš„æ¯ä¸ªåƒç´ ï¼Œä½¿ç”¨ä¸Šè¿°å…¬å¼è®¡ç®—å‡ºå…¶ç°åº¦å€¼ï¼Œå†ç”Ÿæˆå›¾åƒï¼š fun Bitmap.toGray(): Bitmap { val ret = Bitmap.createBitmap(width, height, config) for (i in 0 until width) { for (j in 0 until height) { val pixel = getPixel(i, j) val gray = Color.red(pixel) * 0.299 + Color.green(pixel) * 0.587 + Color.blue(pixel) * 0.114 val color = Color.rgb(gray.toInt(), gray.toInt(), gray.toInt()) ret.setPixel(i, j, color) } } return ret } setPixel() å†…éƒ¨æ˜¯è°ƒç”¨ Native æ–¹æ³•å®ç°çš„ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­å¾ªç¯è°ƒç”¨å¾ˆå®¹æ˜“é€ æˆ ANRï¼Œå› æ­¤åº”å½“æ”¾åœ¨å­çº¿ç¨‹ä¸­å¤„ç†ã€‚ å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠæ€»çš„ç°åº¦å€¼ç®—å‡ºæ¥ï¼Œå†ä¸€æ¬¡æ€§å¯¹ Bitmap è®¾ç½®ï¼š fun Bitmap.toGray(): Bitmap { val ret = Bitmap.createBitmap(width, height, config) val pixels = IntArray(width * height) this.getPixels(pixels, 0, width, 0, 0, width, height) val alpha = 0xFF shl 24 for (i in 0 until height) { for (j in 0 until width) { val pixel = pixels[width * i + j] val gray = (Color.red(pixel) * 0.299 + Color.green(pixel) * 0.587 + Color.blue(pixel) * 0.114).toInt() val color = alpha or (gray shl 16) or (gray shl 8) or gray pixels[width * i + j] = color } } ret.setPixels(pixels, 0, width, 0, 0, width, height) return ret } è¿™é‡Œä½¿ç”¨ä¸€ä¸ªæ•°ç»„æ¥å­˜å‚¨æ¯ä¸ªåƒç´ çš„è®¡ç®—ç»“æœï¼Œæœ€åå†é€šè¿‡ setPixels() æ–¹æ³•ä¸€æ¬¡æ€§è®¾ç½®åˆ° Bitmap ä¸­ã€‚ å…¶å® Android æœ¬èº«å°±æä¾›äº†å¯¹é¥±å’Œåº¦çš„å¤„ç†æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è°ƒç”¨å®ç°ï¼Œæ— éœ€æ‰‹åŠ¨è®¡ç®—ï¼š fun Bitmap.toGray(): Bitmap { val ret = Bitmap.createBitmap(this.width, this.height, this.config) val canvas = Canvas(ret) val cm = ColorMatrix().apply { setSaturation(0f) } val paint = Paint().apply { colorFilter = ColorMatrixColorFilter(cm) } canvas.drawBitmap(this, 0f, 0f, paint) return ret } å¦‚æœé¡¹ç›®æœ‰ä½¿ç”¨ OpenCVï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥ï¼š fun Bitmap.toGray(): Bitmap { val src = Mat() val dst = Mat() Utils.bitmapToMat(this, src) Imgproc.cvtColor(src, dst, Imgproc.COLOR_BGR2GRAY) Utils.matToBitmap(dst, this) src.release() dst.release() return this } ","link":"https://LiarrDev.github.io/post/Android-Bitmap-Grayscale/"},{"title":"Android OpenCV é¡¹ç›®é…ç½®ç¬”è®°","content":"ä¹‹å‰æˆ‘ä»¬æ­å»ºäº† NDK çš„é¡¹ç›®ç¯å¢ƒï¼ŒNDK ä¸ºæˆ‘ä»¬æ‰“å¼€äº†å¦ä¸€ä¸ªä¸–ç•Œï¼ŒOpenCV ä¾¿æ˜¯è¿™æ–°ä¸–ç•Œçš„é¢†åŸŸä¹‹ä¸€ï¼ŒOpenCV ç›¸å…³çš„èµ„æ–™ä»‹ç»ä½ å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢åˆ°ï¼Œè¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œä»Šå¤©æ¥è®²è®² OpenCV çš„ç¯å¢ƒé…ç½®ã€‚ OpenCV çš„ Android SDK ä»¥ Module å½¢å¼æä¾›ï¼Œä½†å…¶ç›®å½•ç»“æ„ä¸æˆ‘ä»¬å¸¸è§çš„ Android Module ç•¥æœ‰å·®å¼‚ï¼Œæ‰€ä»¥ä¹Ÿç»™æˆ‘ä»¬çš„é…ç½®å¸¦æ¥ä¸€å®šé—¨æ§›ã€‚æˆ‘ä¸ªäººæ„Ÿè§‰æ˜¯å†å²é—ç•™é—®é¢˜ï¼Œå› æ­¤æœ¬æ–‡çš„é…ç½®æ•™ç¨‹åœ¨åç»­ç‰ˆæœ¬ä¸­ä¸ä¸€å®šé€‚ç”¨ã€‚ æœ¬æ–‡æ‰€ç”¨åˆ°çš„å·¥å…·ç‰ˆæœ¬ï¼š Android Studio Hedgehog | 2023.1.1 OpenCV 4.8.1 Java 17 OpenCV Android SDK å¯ä»¥ä»å®˜ç½‘æˆ–è€…å…¶é¡¹ç›® Github Release ä¸‹è½½ï¼ŒNDK ç¯å¢ƒè™½ç„¶åœ¨ OpenCV çš„åç»­å¼€å‘ä¸­æœ‰ç€è‡³å…³é‡è¦çš„ä½œç”¨ï¼Œä½†ä¸æœ¬æ–‡æš‚ä¸å…³è”ï¼Œå¯è‡ªè¡Œå†³å®šæ˜¯å¦é…ç½®ã€‚ ä¸‹è½½åˆ°çš„ OpenCV Android SDK ç›®å½•å¦‚ä¸‹ï¼š OpenCV-android-sdk â”œâ”€â”€ LICENSE â”œâ”€â”€ README.android â”œâ”€â”€ samples â””â”€â”€ sdk â”œâ”€â”€ build.gradle â”œâ”€â”€ etc â”œâ”€â”€ java â”œâ”€â”€ libcxx_helper â””â”€â”€ native æˆ‘ä»¬å°† /sdk ç›®å½•å¯¼å…¥ä¸º Module å³å¯ï¼š Gradle ä¼šè‡ªåŠ¨åŒæ­¥ï¼Œå¦‚æ— æ„å¤–ï¼ŒåŒæ­¥å¤±è´¥ã€‚ æ‰“å¼€ /opencv/build.gradle æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ç»´æŠ¤è€…ä¸ºæˆ‘ä»¬å†™äº†ä¸€å¤§å †æ³¨é‡Šä»‹ç»å¦‚ä½•å¯¼å…¥ï¼Œä½†å¹¶ä¸å®Œæ•´ï¼Œä¸ç„¶æˆ‘ä¹Ÿä¸éœ€è¦ç‰¹æ„å†™ä¸ªç¬”è®°æ¥è®°å½•ã€‚ æˆ‘ä»¬å°†è¯¥ Module çš„ targetSdkVersion ä¸ä¸»é¡¹ç›®ä¸€è‡´ï¼Œå¹¶æ·»åŠ  namespaceï¼ŒåŒæ—¶å–æ¶ˆ kotlin-android è¿™ä¸ª Plugin çš„å¼•å…¥ï¼Œç›¸å…³ä¿®æ”¹å¦‚ä¸‹ï¼š apply plugin: 'com.android.library' // apply plugin: 'kotlin-android' // ä¿®æ”¹ â‘ ï¼šå–æ¶ˆå¼•å…¥ android { namespace &quot;org.opencv&quot; // ä¿®æ”¹ â‘¡ï¼šæ·»åŠ  namespace compileSdkVersion 34 // ä¿®æ”¹ â‘¢ï¼šä¿®æ”¹ä¸ºå’Œä¸»é¡¹ç›®ä¸€è‡´ defaultConfig { minSdkVersion 21 targetSdkVersion 34 // ä¿®æ”¹ â‘£ï¼šä¿®æ”¹ä¸ºå’Œä¸»é¡¹ç›®ä¸€è‡´ ... } ... } é¡¹ç›®åˆå§‹åŒ–æ—¶æˆ‘é€‰æ‹©äº† Kotlin DSL ä½œä¸ºæ„å»ºé…ç½®è¯­è¨€ï¼Œæ‰€ä»¥å®ƒä¼šåˆå§‹åŒ–ä¸€ä¸ª /settings.gradle.kts æ–‡ä»¶ï¼Œä½†æ˜¯ OpenCV Android SDK ä»æ—§é‡‡ç”¨è€çš„ Groovy DSLï¼Œæ‰€ä»¥å¯¼å…¥æ—¶ Android Studio åˆä¼šå¦å¤–å¢åŠ ä¸€ä¸ª /settings.gradle æ–‡ä»¶ï¼Œå…¶å®è¿™æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œæˆ‘ä»¬å°† /settings.gradle æ–‡ä»¶åˆ é™¤ï¼Œå¹¶åœ¨ /settings.gradle.kts æ–‡ä»¶æœ«å°¾å°†è¯¥ Module å¼•å…¥å³å¯ï¼š pluginManagement { ... } dependencyResolutionManagement { ... } rootProject.name = &quot;OpenCV&quot; include(&quot;:app&quot;) include(&quot;:opencv&quot;) // æ·»åŠ å¯¼å…¥çš„ OpenCV Module è¿™æ ·å¯¼å…¥ OpenCV Module çš„æ“ä½œå°±å®Œæˆäº†ï¼Œå¯ä»¥æ­£å¸¸ç¼–è¯‘è¿è¡Œã€‚ æ¥ä¸‹æ¥å°†å…¶æ·»åŠ åˆ°å®¿ä¸»ä¾èµ–ï¼Œåœ¨ /app/build.gradle.kts ä¸­æ·»åŠ ï¼š dependencies { ... implementation(project(&quot;:opencv&quot;)) } æ¥ä¸‹æ¥ä¼šå‘ç° OpenCVEngineInterface è¿™ä¸ªæ¥å£è¢«å…¶ä»–ç±»å¯¼å…¥æ—¶æŠ¥é”™ä¸ºä¸å­˜åœ¨ï¼Œå› ä¸ºå®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ª AIDL æ¥å£ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä¸ºå…¶åˆ›å»ºä¸“é—¨çš„ AIDL Folderï¼š ç„¶åå°† OpenCVEngineInterface æ–‡ä»¶æ‹·è´åˆ°åˆšåˆšåˆ›å»ºçš„ AIDL Folder ä¸‹ï¼Œå¹¶åˆ›å»ºä¸ºç›¸åŒè·¯å¾„åç§°ï¼š åŒæ—¶ä¹Ÿéœ€è¦åœ¨ /opencv/build.gradle ä¸­å¼€å¯ AIDL é…ç½®ï¼š android { ... buildFeatures { aidl true } } åœ¨ /gradle.properties ä¸­é…ç½®ï¼š android.defaults.buildfeatures.buildconfig=true å†æ¬¡è¿è¡Œï¼ŒOpenCVEngineInterface èƒ½å¤Ÿè¢«æ­£å¸¸è¯†åˆ«ã€‚ Android OpenCV åŸºæœ¬é…ç½®å·²å®Œæˆã€‚ ","link":"https://LiarrDev.github.io/post/Android-OpenCV-Project-Configuration/"},{"title":"Android NDK CMake é¡¹ç›®æ­å»ºç¬”è®°","content":"å‰è¨€ Android å¼€å‘åœ¨æ¥å…¥ä¸€äº›ç¬¬ä¸‰æ–¹åº“æ—¶ï¼Œä½ å¯èƒ½ä¼šå‘ç°å®ƒä»¬ä¼šå¸¦æœ‰ SO åº“ï¼Œè¿™äº› SO åº“æ˜¯é€šè¿‡ C/C++ã€Rust ç­‰è¯­è¨€ç¼–å†™ç”Ÿæˆçš„ã€‚ ä½¿ç”¨è¿™ç§æ–¹å¼å¼€å‘ï¼Œæœ‰ä»¥ä¸‹å‡ ä¸ªä¼˜ç‚¹ï¼š æ€§èƒ½å¿«ã€‚C/C++ ç¼–è¯‘è¿‡ç¨‹æ˜¯å¯æ‰§è¡Œæ–‡ä»¶åˆ°æœºå™¨ç ï¼Œè€Œ Java åˆ™æ˜¯å­—èŠ‚ç åˆ° JVM å†åˆ°æœºå™¨ç ã€‚è™½ç„¶ C/C++ ä»£ç é«˜æ•ˆï¼Œä½† Java å’Œ C/C++ äº’ç›¸è°ƒç”¨æ—¶å´å¢å¤§äº†å¼€é”€ã€‚ å®‰å…¨æ€§é«˜ã€‚APK ä¸­çš„ Java ä»£ç å¾ˆå®¹æ˜“è¢«åç¼–è¯‘ï¼Œè€Œ C/C++ åº“é€†å‘éš¾åº¦è¾ƒé«˜ã€‚ ä¾¿äºå¹³å°é—´çš„ç§»æ¤ã€‚é€šè¿‡ C/C++ å®ç°çš„åŠ¨æ€åº“å¯ä»¥å¾ˆæ–¹ä¾¿åœ°åœ¨å…¶ä»–å¹³å°ä¸Šä½¿ç”¨ã€‚ å¯è°ƒç”¨ç³»ç»Ÿåº•å±‚åŠŸèƒ½ã€‚è¿™åœ¨ç¡¬ä»¶äº¤äº’ä¸Šå¾ˆå¸¸è§ï¼Œæ¯”å¦‚é©±åŠ¨å¼€å‘ã€éŸ³è§†é¢‘å¤„ç†ã€äººè„¸è¯†åˆ«ç­‰ç­‰ã€‚ å½“æ¥è§¦åˆ°è¿™ç§å¼€å‘æ–¹å¼æ—¶ï¼Œæœ‰å‡ ä¸ªåè¯ä¼šä¸æ–­å‡ºç°ï¼š NDKï¼šå³ Native Development Kitã€‚å®ƒæ˜¯åŸç”Ÿå¼€å‘å·¥å…·åŒ…ï¼Œè¿™å¥—å·¥å…·å…è®¸ Android ä½¿ç”¨ C/C++ ä»£ç ï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿå¼€å‘ C/C++ çš„åŠ¨æ€åº“ã€‚ JNIï¼šå³ Java Native Interfaceã€‚å®ƒæ˜¯ Java å¹³å°çš„ä¸€éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ Java ä¸ C/C++ ç›¸äº’é€šä¿¡çš„æ¥å£ã€‚ Makefileï¼šå°† C/C++ ä»£ç ç¼–è¯‘æˆåŸç”Ÿåº“çš„ç¼–è¯‘å·¥å…·ã€‚åœ¨ Android ä¸­ï¼ŒMakefile ä¾é  ndk-build è„šæœ¬ç¼–è¯‘å·¥å…·æ¥å®Œæˆé…ç½®ç¼–è¯‘ï¼Œé€šå¸¸éœ€è¦ç¼–å†™ Android.mk å’Œ Application.mk ä¸¤ä¸ª Makefile æ–‡ä»¶ï¼Œè¿™ç§æ„å»ºæ–¹å¼åœ¨ã€Eclipseã€ä¸­æ¯”è¾ƒå¸¸è§ã€‚Makefile ä¾èµ–äºç¼–è¯‘å¹³å°ï¼Œåœ¨ä¸åŒçš„å¹³å°ä¸Šæœ‰ä¸åŒçš„ç¼–è¯‘å·¥å…·ï¼Œéµå¾ªçš„è§„åˆ™ä¹Ÿä¸ç›¸åŒï¼Œæ‰€ä»¥åœ¨ä¸åŒçš„å¹³å°ä¸Šç¼–è¯‘æ—¶ï¼Œéœ€è¦é‡æ–°é…ç½® Makefileï¼Œå·¥ä½œé‡è¾ƒå¤§ä¹Ÿå®¹æ˜“å‡ºé”™ã€‚ CMakeï¼šåŒæ ·ä¹Ÿæ˜¯å°† C/C++ ä»£ç ç¼–è¯‘æˆåŸç”Ÿåº“çš„ç¼–è¯‘å·¥å…·ï¼Œä½†å®ƒæ˜¯ä¸€ä¸ªè·¨å¹³å°çš„ç¼–è¯‘å·¥å…·ï¼Œå¾ˆå¥½åœ°è§£å†³äº† Makefile çš„ç¼ºé™·ï¼Œåªéœ€è¦é…ç½®ä¸€ä¸ªå¹³å°æ— å…³çš„ CMakeList.txt æ–‡ä»¶æ¥å®šåˆ¶æ•´ä¸ªæµç¨‹ã€‚åŒæ—¶å®ƒä¹Ÿæ˜¯ã€Android Studioã€ä¸­å¸¸ç”¨çš„ç¼–è¯‘å·¥å…·ã€‚ äº†è§£è¿™äº›åŸºç¡€å«ä¹‰ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹é¡¹ç›®çš„æ­å»ºå·¥ä½œã€‚ æ­å»º äº†è§£ NDK é¡¹ç›®çš„æ­å»ºæ–¹å¼ï¼Œæœ€æ–¹ä¾¿çš„è«è¿‡äºç›´æ¥åˆ©ç”¨ã€Android Studioã€åˆ›å»ºçš„æ¨¡ç‰ˆæ¥è§‚å¯Ÿå®ƒä¸æ™®é€šé¡¹ç›®çš„å¼‚åŒã€‚ å®ƒä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬ä¸‹è½½åŠåˆ›å»ºæ‰€éœ€çš„æ–‡ä»¶ï¼Œè¿™æ ·æˆ‘ä»¬å¦‚æœåœ¨ç°æœ‰é¡¹ç›®ä¸­æ¥å…¥å°±å¯ä»¥å‚è€ƒå¯¹æ¯”ã€‚ SDK Tools é¦–å…ˆæ˜¯éœ€è¦ NDK å’Œ CMake å·¥å…·ï¼Œåœ¨ã€ŒSDK Toolsã€ä¸­ä¸‹è½½å³å¯ï¼š CMake åœ¨ Module çš„ build.gradle.kts æ–‡ä»¶ä¸­æŒ‡å®š CMake çš„ç›®å½•å’Œç‰ˆæœ¬ï¼š android { ... externalNativeBuild { cmake { path = file(&quot;src/main/cpp/CMakeLists.txt&quot;) version = &quot;3.22.1&quot; } } } æ¥ç€åœ¨è¿™ä¸ªæŒ‡å®šçš„ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ src/main/cpp/CMakeLists.txtï¼š å¤§è‡´å†…å®¹å¦‚ä¸‹ï¼š # è®¾ç½®æ­¤é¡¹ç›®æ‰€éœ€çš„æœ€ä½ CMake ç‰ˆæœ¬ cmake_minimum_required(VERSION 3.22.1) # å£°æ˜é¡¹ç›®åç§° project(&quot;hellondk&quot;) # åˆ›å»ºå¹¶å‘½ååº“ï¼Œå°†å…¶è®¾ç½®ä¸º STATIC æˆ– SHAREDï¼Œå¹¶æä¾›å…¶æºä»£ç çš„ç›¸å¯¹è·¯å¾„ add_library(${CMAKE_PROJECT_NAME} SHARED native-lib.cpp) # å£°æ˜ CMake éœ€è¦é“¾æ¥çš„åº“ target_link_libraries(${CMAKE_PROJECT_NAME} library android log) åœ¨ add_library() è¿™ä¸€æ­¥ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªä»¥ ${CMAKE_PROJECT_NAME} å‘½åçš„åº“ï¼Œå®é™…ä¸Šå®ƒå°±æ˜¯ project() ä¸­æŒ‡å®šçš„é¡¹ç›®åç§°ã€‚æœ€ç»ˆç”Ÿæˆçš„ SO æ–‡ä»¶å°†ä¼šä»¥ lib${CMAKE_PROJECT_NAME}.so å‘½åï¼Œåœ¨è¿™é‡Œå°±æ˜¯ libhellondk.soã€‚ åŒæ—¶è¿˜çœ‹åˆ°ä¸Šé¢æŒ‡å®šäº†ä¸€ä¸ª C++ æ–‡ä»¶ï¼Œé‚£ä¹ˆç»§ç»­åˆ›å»ºå®ƒï¼š è‡³æ­¤ï¼Œå¼€å‘ç¯å¢ƒå·²æ­å»ºå®Œæˆï¼ŒåŒæ­¥ä¸‹ Gradleï¼Œå³å¯å¼€å§‹ç¼–ç ã€‚ å¼€å‘ é¦–å…ˆéœ€è¦åŠ è½½å¯¹åº”çš„åº“ï¼š class MainActivity : AppCompatActivity() { ... companion object{ init { System.loadLibrary(&quot;hellondk&quot;) } } } è¿™é‡Œ Kotlin çš„å†™æ³•æœ‰ç‚¹ç¹çï¼Œè¿™æ˜¯å› ä¸º Kotlin ä¸­æ²¡æœ‰ static å…³é”®å­—ï¼Œåªèƒ½ä¾é ä¼´ç”Ÿå¯¹è±¡æ¥å®ç°ï¼ŒJava ä¸­çš„å†™æ³•åˆ™æ›´åŠ æ˜äº†ï¼š public class MainActivity extends AppCompatActivity { ... static { System.loadLibrary(&quot;hellondk&quot;); } } è¿™é‡Œéœ€è¦è·Ÿä¸Šä¸€èŠ‚ä¸­é…ç½®çš„åå­—ç›¸åŒï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥åœ¨ç±»ä¸­åŠ è½½è¿™ä¸ªåº“äº†ã€‚ Java/Kotlin è°ƒç”¨ C/C++ ä»£ç  é¦–å…ˆå®šä¹‰ä¸€ä¸ª Native æ–¹æ³•ï¼š class MainActivity : AppCompatActivity() { ... private external fun sumByJNI(a: Int, b: Int): Int } è¿™æ—¶å€™ã€Android Studioã€ä¼šç»™å‡ºæç¤ºè¯´æ‰¾ä¸åˆ° JNI æ–¹æ³•ï¼š ç›´æ¥ä½¿ç”¨å¿«æ·é”®ä¿®å¤ï¼Œã€Android Studioã€ä¼šè‡ªåŠ¨åœ¨ src/main/cpp/native-lib.cpp ä¸­åˆ›å»ºå¯¹åº”çš„æ–¹æ³•ï¼š #include &lt;jni.h&gt; #include &lt;string&gt; extern &quot;C&quot; JNIEXPORT jint JNICALL Java_com_example_hellondk_MainActivity_sumByJNI(JNIEnv *env, jobject thiz, jint a, jint b) { // TODO: implement sumByJNI() } æˆ‘ä»¬è§‚å¯Ÿè¯¥æ–¹æ³•ï¼Œå…¶ä¸­ JNIEXPORT åé¢è·Ÿçš„æ˜¯è¿”å›å€¼ï¼Œjint è¡¨ç¤ºçš„å°±æ˜¯ Java çš„æ•´å‹ï¼ŒJNICALL åé¢çš„æ–¹æ³•åæ ¼å¼ä¸º Java_$package_$class_$method()ï¼Œå‚æ•°çš„è¯å¯ä»¥çœ‹åˆ°æˆ‘ä»¬æœ¬æ¥æ˜¯å®šä¹‰äº† 2 ä¸ªï¼Œä½†è¿™é‡Œç”Ÿæˆäº† 4 ä¸ªï¼Œå‰é¢ä¸¤ä¸ª JNIEnv å’Œ jobject æ˜¯æ¯ä¸ªæ–¹æ³•éƒ½ä¼šæœ‰çš„ï¼Œåé¢çš„æ‰æ˜¯æˆ‘ä»¬å®šä¹‰çš„å‚æ•°ã€‚ å®ç°ä¸Šé¢çš„æ–¹æ³•å¹¶å›åˆ° Java/Kotlin ä¸­è°ƒç”¨å³å¯ï¼š class MainActivity : AppCompatActivity() { ... override fun onCreate(savedInstanceState: Bundle?) { ... val i: Int = sumByJNI(1, 2) } } C/C++ è°ƒç”¨ Java/Kotlin ä»£ç  C/C++ è°ƒç”¨ Java/Kotlin æ–¹æ³•æ˜¯é€šè¿‡åå°„æ¥å®ç°çš„ï¼Œè¿™ä¹Ÿæ˜¯å…¶ä¸ºä»€ä¹ˆä¼šå¸¦æ¥æ€§èƒ½æŸè€—ã€‚ è¿™é‡Œæˆ‘ç›´æ¥åœ¨ä¸Šä¸€å°èŠ‚çš„ä¾‹å­ä¸­æ‰©å±•ï¼Œä¸Šä¸€å°èŠ‚ä¸­æˆ‘ä»¬å°†ä¸¤æ•°ç›¸åŠ çš„æ“ä½œäº¤ç»™äº† C/C++ï¼Œè¿™é‡Œæˆ‘ä»¬ä» C/C++ ä¸­å°†å…¶å†äº¤ç»™ Java/Kotlinï¼Œç›¸å½“äºç»•äº†ä¸€åœˆï¼Œå®é™…å¼€å‘å¹¶ä¸ä¼šè¿™æ ·æ“ä½œï¼Œä½œä¸ºç¤ºä¾‹ç†è§£å³å¯ã€‚ åœ¨ Java/Kotlin ä¸­å®šä¹‰æ–¹æ³•ï¼š class MainActivity : AppCompatActivity() { ... private external fun sumByJNI(a: Int, b: Int): Int private fun sum(a: Int, b: Int) = a + b } ä¿®æ”¹ C/C++ ä¸­çš„å®ç°ï¼š extern &quot;C&quot; JNIEXPORT jint JNICALL Java_com_example_hellondk_MainActivity_sumByJNI(JNIEnv *env, jobject thiz, jint a, jint b) { const char *className = &quot;com/example/hellondk/MainActivity&quot;; const char *methodName = &quot;sum&quot;; jclass jc = env-&gt;FindClass(className); jobject jo = env-&gt;AllocObject(jc); jmethodID methodId = env-&gt;GetMethodID(jc, methodName, &quot;(II)I&quot;); jint value = env-&gt;CallIntMethod(jo, methodId, a, b); return value; } è¿™é‡Œè§£é‡Šä¸€ä¸‹ GetMethodID() æ–¹æ³•çš„æœ€åä¸€ä¸ªå‚æ•°ï¼Œå®ƒæŒ‡è¦è°ƒç”¨çš„ Java/Kotlin æ–¹æ³•çš„æ–¹æ³•ç­¾åï¼Œå³æè¿°äº†è¯¥æ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ï¼Œä½¿ç”¨çš„æ˜¯ CLASS æ–‡ä»¶çš„å­—æ®µæè¿°ç¬¦ï¼Œå³ä½¿ä½ ä¸ç†Ÿæ‚‰ä½†åšåº”è¯¥ä¹Ÿæœ‰è§è¿‡ï¼Œä½ å¯ä»¥åœ¨ç½‘ä¸Šå¾ˆè½»æ¾åœ°æŸ¥åˆ°ç›¸å…³çš„ä»‹ç»ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨å‘½ä»¤å¯¹ CLASS æ–‡ä»¶æŸ¥çœ‹ï¼š âœ javap -s MainActivity åå°„çš„æ­¥éª¤å…¶å®ä¸ Java/Kotlin ä¸­å·®åˆ«ä¸å¤§ï¼Œæ³¨æ„æ‰€æœ‰ç±»éƒ½æ˜¯ä»¥ j å¼€å¤´ï¼Œå³ä»£è¡¨ Java å¯¹è±¡ã€‚ åè®° ã€Android Studioã€æ¨èæˆ‘ä»¬ä½¿ç”¨ CMake é…ç½® NDK é¡¹ç›®ï¼Œæ•´ä¸ªæµç¨‹èµ°ä¸‹æ¥è¿˜æ˜¯æ¯”è¾ƒç®€å•çš„ï¼Œæœ€éš¾çš„åœ°æ–¹ä¹Ÿè®¸æ˜¯æŒæ¡ C/C++ã€‚ å¾ˆå¤šè€é¡¹ç›®è¿˜åœ¨ä½¿ç”¨ Makefile æ¥é…ç½®ï¼Œå¦‚æœåé¢æœ‰æ—¶é—´ï¼Œå†å†™å†™ç›¸å…³çš„ç¬”è®°ã€‚ ","link":"https://LiarrDev.github.io/post/Build-up-Android-NDK-CMake-Project/"},{"title":"LeetCode 165. Compare Version Numbers","content":"é¢˜ç›® Compare Version Numbers æ¯”è¾ƒç‰ˆæœ¬å· ç»™ä½ ä¸¤ä¸ªç‰ˆæœ¬å· version1 å’Œ version2ï¼Œè¯·ä½ æ¯”è¾ƒå®ƒä»¬ã€‚ ç‰ˆæœ¬å·ç”±ä¸€ä¸ªæˆ–å¤šä¸ªä¿®è®¢å·ç»„æˆï¼Œå„ä¿®è®¢å·ç”±ä¸€ä¸ª '.' è¿æ¥ã€‚æ¯ä¸ªä¿®è®¢å·ç”±å¤šä½æ•°å­—ç»„æˆï¼Œå¯èƒ½åŒ…å«å‰å¯¼é›¶ ã€‚æ¯ä¸ªç‰ˆæœ¬å·è‡³å°‘åŒ…å«ä¸€ä¸ªå­—ç¬¦ã€‚ä¿®è®¢å·ä»å·¦åˆ°å³ç¼–å·ï¼Œä¸‹æ ‡ä» 0 å¼€å§‹ï¼Œæœ€å·¦è¾¹çš„ä¿®è®¢å·ä¸‹æ ‡ä¸º 0 ï¼Œä¸‹ä¸€ä¸ªä¿®è®¢å·ä¸‹æ ‡ä¸º 1 ï¼Œä»¥æ­¤ç±»æ¨ã€‚ä¾‹å¦‚ï¼Œ2.5.33 å’Œ 0.1 éƒ½æ˜¯æœ‰æ•ˆçš„ç‰ˆæœ¬å·ã€‚ æ¯”è¾ƒç‰ˆæœ¬å·æ—¶ï¼Œè¯·æŒ‰ä»å·¦åˆ°å³çš„é¡ºåºä¾æ¬¡æ¯”è¾ƒå®ƒä»¬çš„ä¿®è®¢å·ã€‚æ¯”è¾ƒä¿®è®¢å·æ—¶ï¼Œåªéœ€æ¯”è¾ƒå¿½ç•¥ä»»ä½•å‰å¯¼é›¶åçš„æ•´æ•°å€¼ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¿®è®¢å· 1 å’Œä¿®è®¢å· 001 ç›¸ç­‰ ã€‚å¦‚æœç‰ˆæœ¬å·æ²¡æœ‰æŒ‡å®šæŸä¸ªä¸‹æ ‡å¤„çš„ä¿®è®¢å·ï¼Œåˆ™è¯¥ä¿®è®¢å·è§†ä¸º 0 ã€‚ä¾‹å¦‚ï¼Œç‰ˆæœ¬ 1.0 å°äºç‰ˆæœ¬ 1.1 ï¼Œå› ä¸ºå®ƒä»¬ä¸‹æ ‡ä¸º 0 çš„ä¿®è®¢å·ç›¸åŒï¼Œè€Œä¸‹æ ‡ä¸º 1 çš„ä¿®è®¢å·åˆ†åˆ«ä¸º 0 å’Œ 1 ï¼Œ0 &lt; 1 ã€‚ è¿”å›è§„åˆ™å¦‚ä¸‹ï¼š å¦‚æœ version1 &gt; version2 è¿”å› 1ï¼Œ å¦‚æœ version1 &lt; version2 è¿”å› -1ï¼Œ é™¤æ­¤ä¹‹å¤–è¿”å› 0ã€‚ ç¤ºä¾‹ 1ï¼š è¾“å…¥ï¼š version1 = &quot;1.01&quot;, version2 = &quot;1.001&quot; è¾“å‡ºï¼š 0 è§£é‡Šï¼š å¿½ç•¥å‰å¯¼é›¶ï¼Œ&quot;01&quot; å’Œ &quot;001&quot; éƒ½è¡¨ç¤ºç›¸åŒçš„æ•´æ•° &quot;1&quot; ç¤ºä¾‹ 2ï¼š è¾“å…¥ï¼š version1 = &quot;1.0&quot;, version2 = &quot;1.0.0&quot; è¾“å‡ºï¼š 0 è§£é‡Šï¼š version1 æ²¡æœ‰æŒ‡å®šä¸‹æ ‡ä¸º 2 çš„ä¿®è®¢å·ï¼Œå³è§†ä¸º &quot;0&quot; ç¤ºä¾‹ 3ï¼š è¾“å…¥ï¼š version1 = &quot;0.1&quot;, version2 = &quot;1.1&quot; è¾“å‡ºï¼š -1 è§£é‡Šï¼š version1 ä¸­ä¸‹æ ‡ä¸º 0 çš„ä¿®è®¢å·æ˜¯ &quot;0&quot;ï¼Œversion2 ä¸­ä¸‹æ ‡ä¸º 0 çš„ä¿®è®¢å·æ˜¯ &quot;1&quot; ã€‚0 &lt; 1ï¼Œæ‰€ä»¥ version1 &lt; version2 æç¤ºï¼š 1 &lt;= version1.length, version2.length &lt;= 500 version1 å’Œ version2 ä»…åŒ…å«æ•°å­—å’Œ '.' version1 å’Œ version2 éƒ½æ˜¯æœ‰æ•ˆç‰ˆæœ¬å· version1 å’Œ version2 çš„æ‰€æœ‰ä¿®è®¢å·éƒ½å¯ä»¥å­˜å‚¨åœ¨ 32 ä½æ•´æ•°ä¸­ é¢˜è§£ å­—ç¬¦ä¸²åˆ†å‰² è¯¥æ–¹æ³•éå¸¸ç®€å•ï¼Œå°±æ˜¯åˆ©ç”¨äº† split() æ–¹æ³•ï¼Œä»¥ '.' åˆ†å‰²æˆæ•°ç»„ï¼Œé€ä¸€æ¯”è¾ƒä¸¤ä¸ªæ•°ç»„ä½äºåŒä¸€ä¸‹æ ‡ä¸­çš„æ•´æ•°å€¼ï¼Œå¦‚æœå½“å‰ä¸‹æ ‡è¶…è¿‡æ•°ç»„çš„é•¿åº¦ï¼ˆå³å¦ä¸€æ•°ç»„çš„é•¿åº¦å·²è¶…è¿‡å½“å‰æ•°ç»„ï¼‰ï¼Œåˆ™è‡ªåŠ¨è¡¥ 0ï¼Œå¦‚æ­¤åå¤ï¼Œç›´è‡³å¾—å‡ºç»“æœæˆ–å¾ªç¯ç»“æŸã€‚ class Solution { fun compareVersion(version1: String, version2: String): Int { val arr1 = version1.split(&quot;\\\\.&quot;.toRegex()).toTypedArray() val arr2 = version2.split(&quot;\\\\.&quot;.toRegex()).toTypedArray() for (n in 0 until max(arr1.size, arr2.size)) { val i = if (n &lt; arr1.size) arr1[n].toInt() else 0 val j = if (n &lt; arr2.size) arr2[n].toInt() else 0 if (i &lt; j) { return -1 } else if (i &gt; j) { return 1 } } return 0 } } æ—¶é—´å¤æ‚åº¦ï¼šO(n+m)ï¼ˆæˆ– O(maxâ¡(n,m))ï¼Œè¿™æ˜¯ç­‰ä»·çš„ï¼‰ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸² version1 çš„é•¿åº¦ï¼Œm æ˜¯å­—ç¬¦ä¸² version2 çš„é•¿åº¦ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(n+m)ï¼Œæˆ‘ä»¬éœ€è¦ O(n+m) çš„ç©ºé—´å­˜å‚¨åˆ†å‰²åçš„ä¿®è®¢å·åˆ—è¡¨ã€‚ åŒæŒ‡é’ˆ å­—ç¬¦ä¸²åˆ†å‰²æ–¹æ³•éœ€è¦å­˜å‚¨åˆ†å‰²åçš„ä¿®è®¢å·ï¼Œä¸ºäº†ä¼˜åŒ–ç©ºé—´å¤æ‚åº¦ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åˆ†å‰²ç‰ˆæœ¬å·çš„åŒæ—¶è§£æå‡ºä¿®è®¢å·è¿›è¡Œæ¯”è¾ƒã€‚ class Solution { fun compareVersion(version1: String, version2: String): Int { var index1 = 0 var index2 = 0 while (index1 &lt; version1.length || index2 &lt; version2.length) { var curr1 = 0 while (index1 &lt; version1.length &amp;&amp; version1[index1] != '.') { curr1 = curr1 * 10 + (version1[index1++] - '0') } index1++ var curr2 = 0 while (index2 &lt; version2.length &amp;&amp; version2[index2] != '.') { curr2 = curr2 * 10 + (version2[index2++] - '0') } index2++ if (curr1 != curr2) { return if (curr1 &lt; curr2) -1 else 1 } } return 0 } } è¯¥æ–¹æ³•ç›¸æ¯”å­—ç¬¦ä¸²åˆ†å‰²çš„æ–¹æ³•çœ‹èµ·æ¥ç›¸å¯¹ç¹çä¸€ç‚¹ï¼Œä½†æ€§èƒ½ä¼šæ›´ä¼˜ã€‚æˆ‘ä»¬ä¸å†ä½¿ç”¨ split() æ–¹æ³•åˆ†å‰²æ•°ç»„ï¼Œè€Œæ˜¯éå†å­—ç¬¦ä¸²ä¸­æ¯ä¸€ä¸ªå­—ç¬¦æ¥è®¡ç®—ã€‚ index1 å’Œ index2 ä¸ºå½“å‰å¤„ç†çš„å­—ç¬¦ä½äºå­—ç¬¦ä¸² version1 å’Œ version2 ä¸­çš„ä¸‹æ ‡ï¼Œéå†ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œcurr1 å’Œ curr2 ç”¨æ¥è®°å½• '.' åˆ†å‰²çš„æ¯ä¸€æ®µçš„ç‰ˆæœ¬å·ï¼Œå› ä¸ºå¾ªç¯æ˜¯ä»å·¦å¾€å³è¯»å–ï¼Œæ‰€ä»¥å½“è¶…è¿‡ 1 ä½æ•°å­—çš„æƒ…å†µä¸‹å¯¹å‰ä¸€ä¸ªç»“æœä¹˜ 10 å†ç›¸åŠ ï¼Œä»¥æ­¤è®¡ç®—å‡ºè¯¥æ®µçš„ç»“æœã€‚ è¿™é‡Œç”¨äº† version[index++] - '0' è¿™ä¸ªå†™æ³•å¯èƒ½ä¸å¤ªå¥½ç†è§£ï¼Œå®é™…ä¸Šå°±æ˜¯å–å½“å‰å­—ç¬¦çš„ ASCII å€¼è¿›è¡Œè¿ç®—ï¼Œè¿™ç®—æ˜¯ä¸€ä¸ªå–å·§çš„è®¾è®¡ï¼Œå› ä¸ºåœ¨ ASCII ä¸­ï¼Œ0 åˆ° 9 ä¹Ÿæ˜¯è¿ç»­çš„ï¼Œæ‰€ä»¥åªè¦å½“å‰å­—ç¬¦ä¸ '0' ç›¸å‡ï¼Œå°±å¯ä»¥å¾—å‡ºè¯¥å€¼çš„æ•´å‹ç»“æœï¼Œè€Œæ— éœ€åš Char.digitToInt() çš„è½¬æ¢ã€‚å¦å¤–éœ€è¦æ³¨æ„ index æ˜¯åœ¨è¯¥è¿ç®—ç»“æŸä¹‹åæ‰æ‰§è¡Œè‡ªå¢æ“ä½œã€‚ å½“è¯¥å°å¾ªç¯ç»“æŸï¼Œä¹Ÿå°±æ„å‘³ç€ä»¥ '.' åˆ†å‰²çš„è¯¥å°æ®µè®¡ç®—ç»“æŸï¼Œindex å†æ‰§è¡Œä¸€æ¬¡è‡ªå¢ä»¥è·³è¿‡ '.' å­—ç¬¦ç­‰å¾…ä¸‹ä¸ªå¤§å¾ªç¯çš„è®¡ç®—ã€‚ä¸¤ä¸ªå­—ç¬¦ä¸²éƒ½ä»¥æ­¤æ–¹å¼è®¡ç®—æ¯ä¸€å°æ®µçš„ç»“æœï¼Œç›´è‡³èƒ½å¤Ÿæ¯”è¾ƒå‡ºç»“æœä¸ºæ­¢ã€‚ æ—¶é—´å¤æ‚åº¦ï¼šO(n+m)ï¼Œå…¶ä¸­ n æ˜¯å­—ç¬¦ä¸² version1 çš„é•¿åº¦ï¼Œm æ˜¯å­—ç¬¦ä¸² version2 çš„é•¿åº¦ã€‚ ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œæˆ‘ä»¬åªéœ€è¦å¸¸æ•°çš„ç©ºé—´ä¿å­˜è‹¥å¹²å˜é‡ã€‚ ","link":"https://LiarrDev.github.io/post/Leetcode-165-Compare-Version-Numbers/"},{"title":"Java ä½¿ç”¨ Media Type æ ¡éªŒæ–‡ä»¶ç±»å‹","content":"å‰è¨€ ä¹‹å‰ã€åˆ©ç”¨ Magic Number æ ¡éªŒæ–‡ä»¶ç±»å‹ã€ä¸€æ–‡è®²è§£äº†æ ¡éªŒæ–‡ä»¶ç±»å‹çš„åŸç†ï¼Œå¹¶åœ¨æ–‡æœ«ç»™å‡ºäº†ç¤ºä¾‹ä»£ç ã€‚ä½†æ˜¯æ¯æ¬¡å»æŸ¥è¯¢ Magic Number å¯¹ç…§è¡¨æœ‰ç‚¹éº»çƒ¦ï¼Œäºæ˜¯æˆ‘æ‰¾äº†ä¸€äº›èƒ½å¤Ÿåˆ¤æ–­æ–‡ä»¶ç±»å‹çš„ä¸‰æ–¹åº“ï¼Œå¯ä»¥çœä¸å°‘äº‹å„¿ã€‚ ä½œä¸ºå¼€å‘è€…ä½ åº”è¯¥çŸ¥é“ï¼Œåœ¨ HTTP åè®®æ¶ˆæ¯å¤´ä¸­ï¼Œä½¿ç”¨ Content-Type æ¥è¡¨ç¤ºè¯·æ±‚å’Œå“åº”ä¸­çš„åª’ä½“ç±»å‹ä¿¡æ¯ã€‚è¿™ä¸ªå­—æ®µåœ¨ä¸åŒåœºæ™¯ä¸‹æœ‰å‡ ç§å«æ³•ï¼ŒContent Typeã€Media Typeã€MIME Typeï¼Œä¸¥æ ¼æ¥è¯´è¿™å‡ ä¸ªåç§°å¹¶ä¸å®Œå…¨å¯¹ç­‰ï¼Œä½†åœ¨è¿™é‡Œæˆ‘ä»¬æš‚ä¸åšåŒºåˆ†ï¼Œå¤§å®¶æ˜ç™½æ„æ€å°±è¡Œã€‚ å®ƒç”¨æ¥å‘Šè¯‰æœåŠ¡ç«¯å¦‚ä½•å¤„ç†è¯·æ±‚çš„æ•°æ®ï¼Œä»¥åŠå‘Šè¯‰å®¢æˆ·ç«¯å¦‚ä½•è§£æå“åº”çš„æ•°æ®ã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªå€¼æ¥åˆ¤æ–­æ–‡ä»¶ç±»å‹ã€‚ URLConnection URLConnection æ˜¯ JDK è‡ªå¸¦çš„ç±»ï¼Œå®ƒç›¸å½“äº URL èµ„æºä¸åº”ç”¨ç¨‹åºä¹‹é—´çš„æ¡¥æ¢ã€‚å®ƒæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œæˆ‘ä»¬ç†ŸçŸ¥çš„ HttpURLConnection å°±æ˜¯å®ƒçš„å­ç±»ã€‚ public class FileMatcher { private static final String MIME_TYPE_PNG = &quot;image/png&quot;; public static boolean isPng(File file) { FileInputStream fis = null; try { fis = new FileInputStream(file); String mime = URLConnection.guessContentTypeFromStream(fis); return MIME_TYPE_PNG.equals(mime); } catch (IOException e) { return false; } finally { try { if (fis != null) { fis.close(); } } catch (IOException e) { e.printStackTrace(); } } } } é€šè¿‡ guessContentTypeFromStream() æ–¹æ³•è·å–æµçš„ Content Typeï¼Œå†ä¸å¯¹åº”çš„ Media Type æ¯”è¾ƒå³å¯ã€‚ å¦å¤– URLConnection è¿˜æœ‰ä¸€ä¸ª guessContentTypeFromName() æ–¹æ³•ï¼Œæ˜¯æ ¹æ®æ–‡ä»¶åæ¥åˆ¤æ–­ï¼Œä¹Ÿå°±æ˜¯ä¹‹å‰è¯´çš„é€šè¿‡æ–‡ä»¶æ‰©å±•åï¼Œè¿™ç§æ–¹æ³•å¹¶ä¸å¯é ï¼Œä½†æ˜¯é€Ÿåº¦ä¼šå¿«ä¸€äº›ã€‚ jMimeMagic jMimeMagic æ˜¯ä¸€ä¸ªç”¨äºç¡®å®šæ–‡ä»¶æˆ–æ•°æ®æµçš„ MIME Type çš„ Java åº“ã€‚ æ·»åŠ ä¾èµ–ï¼š dependencies { implementation 'net.sf.jmimemagic:jmimemagic:0.1.5' } é€»è¾‘ä»£ç ï¼š public class FileMatcher { private static final String MIME_TYPE_PNG = &quot;image/png&quot;; public static boolean isPng(File file) { try { MagicMatch match = Magic.getMagicMatch(file, false); String mime = match.getMimeType(); return MIME_TYPE_PNG.equals(mime); } catch (MagicParseException | MagicMatchNotFoundException | MagicException e) { return false; } } } å¯æƒœçš„æ˜¯è¯¥åº“çš„ä¸Šä¸€æ¬¡æ›´æ–°è¿˜åœç•™åœ¨ 2017 å¹´ã€‚ Apache Tika Core Apache Tika å·¥å…·åŒ…å¯æ£€æµ‹å’Œæå–ä¸Šåƒç§ä¸åŒæ–‡ä»¶ç±»å‹ä¸­çš„å…ƒæ•°æ®å’Œæ–‡æœ¬ã€‚ ä¾èµ–æ ¸å¿ƒåº“å³å¯ï¼š dependencies { implementation 'org.apache.tika:tika-core:2.8.0' } é€»è¾‘ä»£ç ï¼š public class FileMatcher { private static final String MIME_TYPE_PNG = &quot;image/png&quot;; public static boolean isPng(File file) { Tika tika = new Tika(); try { String mime = tika.detect(file); return MIME_TYPE_PNG.equals(mime); } catch (IOException e) { return false; } } } æœ‰ Apache åšèƒŒä¹¦ï¼Œåªèƒ½è¯´ç¨³å¾—ä¸€åŒ¹ã€‚ åè®° å¯ä»¥çœ‹åˆ°ï¼Œè¿™å‡ ç§æ–¹æ³•éƒ½æ˜¯é€šè¿‡è¯»å–æ•°æ®æµçš„æ–¹å¼æ¥æ ¡éªŒæ–‡ä»¶ç±»å‹ï¼Œå’Œä¹‹å‰ã€åˆ©ç”¨ Magic Number æ ¡éªŒæ–‡ä»¶ç±»å‹ã€ä»‹ç»çš„åŸç†æ˜¯ä¸€è‡´çš„ï¼ŒåŒæ—¶ç”±äºè¿™å‡ ç§æ–¹æ³•éƒ½èƒ½å¤Ÿå¤„ç†æ•°æ®æµï¼Œæ‰€ä»¥å¹¶éåªèƒ½ä¼ å…¥ Fileï¼Œåœ¨ç½‘ç»œä¼ è¾“æ•°æ®æµæ—¶ä¹Ÿèƒ½å¤Ÿå¾ˆæ–¹ä¾¿åœ°è¿›è¡Œæ ¡éªŒã€‚ ","link":"https://LiarrDev.github.io/post/Verify-File-Types-with-Media-Type-in-Java/"},{"title":"åˆ©ç”¨ Magic Number æ ¡éªŒæ–‡ä»¶ç±»å‹","content":"å‰è¨€ å°†çº¿ä¸Šæ‰“åŒ…ç³»ç»Ÿå¼€æ”¾ç»™ä¸šåŠ¡éƒ¨é—¨åï¼Œå¸¸å¸¸èƒ½æ”¶åˆ°æ‰“åŒ…å¤±è´¥çš„é‚®ä»¶ï¼Œæ’æŸ¥åå‘ç°å¤§å¤šæ•°æ˜¯å› ä¸ºä¸šåŠ¡éƒ¨é—¨äººå‘˜åœ¨ä¸Šä¼ åº”ç”¨å›¾æ ‡æ—¶éƒ½ä¸Šä¼ äº† JPG æ ¼å¼çš„å›¾ç‰‡ï¼Œè€Œ Android ä¸­è¦æ±‚åº”ç”¨å›¾æ ‡å¿…é¡»ä¸º PNG æ ¼å¼ã€‚ å‡ºç°è¿™ç§æƒ…å†µå¤§æ¦‚ç‡æ˜¯ä¸šåŠ¡äººå‘˜å’Œè®¾è®¡éƒ¨é—¨ç›´æ¥é€šè¿‡å¾®ä¿¡å‘é€æ–‡ä»¶ï¼Œå¯¼è‡´æ–‡ä»¶æ ¼å¼åœ¨ä¼ è¾“è¿‡ç¨‹ä¸­å‘ç”Ÿäº†å˜æ›´ã€‚ ä¸ä¸šåŠ¡éƒ¨é—¨è¯´æ˜åå‘ç°æ•ˆæœä»æ— æ”¹å–„ï¼Œé‚ä¸ Web ç«¯åŒäº‹æ²Ÿé€šï¼Œé™åˆ¶åº”ç”¨å›¾æ ‡çš„ä¸Šä¼ æ ¼å¼ä¸º PNGã€‚é‡æ–°éƒ¨ç½²åï¼Œæ‰“åŒ…å¤±è´¥ç‡ä¸‹é™äº†ï¼Œä½†å¶å°”è¿˜æ˜¯ä¼šæœ‰ç›¸åŒçš„åŸå› å¯¼è‡´æ‰“åŒ…å¤±è´¥ï¼Œäºæ˜¯å†æ¬¡æ’æŸ¥åŸå› ã€‚ æ’æŸ¥åå‘ç°ï¼Œä¸šåŠ¡äººå‘˜ç¡®å®æ˜¯ä¸Šä¼ çš„ .png ä¸ºåç¼€çš„æ–‡ä»¶ï¼Œä½†å®é™…ä¸Šè¿™ä¸ªæ–‡ä»¶å´ä»æ—§æ˜¯ JPG æ ¼å¼ã€‚è¯¢é—® Web ç«¯åŒäº‹æ”¶åˆ°çš„ç­”å¤æ˜¯ä»…åœ¨ä¸Šä¼ æ—¶é™åˆ¶äº†æ–‡ä»¶åç¼€ã€‚ è¿™ç§æ–¹æ³•è‚¯å®šæ˜¯ä¸åˆç†çš„ï¼Œä»Šå¤©å°±æ¥è®²è®²æ–‡ä»¶æ ¼å¼çš„åˆ¤æ–­ã€‚ Filename Extension æˆ‘ä»¬æœ€åˆæ¥è§¦è®¡ç®—æœºæ—¶ï¼Œå°±ä¹ æƒ¯æŠŠæ–‡ä»¶åç¼€å«åšæ–‡ä»¶ç±»å‹ï¼Œæ–‡ä»¶åç¼€æ­£ç¡®çš„å«æ³•åº”è¯¥æ˜¯æ–‡ä»¶æ‰©å±•åï¼ˆFilename Extensionï¼‰ï¼Œå®ƒæ˜¯æ—©æœŸæ“ä½œç³»ç»Ÿç”¨æ¥æ ‡å¿—æ–‡ä»¶æ ¼å¼çš„ä¸€ç§æœºåˆ¶ï¼Œæ›´é‡è¦çš„ä½œç”¨æ˜¯è®©ç³»ç»Ÿå†³å®šè¿è¡Œè¯¥æ–‡ä»¶çš„åº”ç”¨ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œè¿™æ˜¯å¼€å‘è€…å’Œæ“ä½œç³»ç»Ÿä¹‹é—´çš„ä¸€ç§çº¦å®šï¼Œä¸æ–‡ä»¶çš„å®é™…ç±»å‹å¹¶æ²¡æœ‰ç»å¯¹å…³ç³»ã€‚ æ–‡ä»¶å¤´ é‚£ä¹ˆæ“ä½œç³»ç»Ÿæ ¹æ®ä»€ä¹ˆæ¥åˆ¤æ–­æ–‡ä»¶ç±»å‹å‘¢ï¼Ÿ ç­”æ¡ˆæ˜¯æ–‡ä»¶å¤´ã€‚ æ–‡ä»¶å¤´æ˜¯ä½äºæ–‡ä»¶å¼€å¤´çš„ä¸€æ®µæ‰¿æ‹…ä¸€å®šä»»åŠ¡çš„æ•°æ®ï¼Œä¸€èˆ¬éƒ½åœ¨å¼€å¤´çš„éƒ¨åˆ†ã€‚ è®¸å¤šæ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥æŸ¥çœ‹æ–‡ä»¶çš„åå…­è¿›åˆ¶æ•°æ®ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ã€WinHexã€æˆ–è€…ã€Hex Fiendã€ç­‰å·¥å…·æŸ¥çœ‹ï¼š ä½äºå¼€å¤´çš„éƒ¨åˆ†æ•°æ®å°±æ˜¯æ–‡ä»¶å¤´ã€‚ å½“ç„¶æœ‰çš„æ–‡ä»¶æ²¡æœ‰æ–‡ä»¶å¤´ï¼Œæ¯”å¦‚ TXTã€‚ æ–‡ä»¶å¤´åŒ…å«çš„ä¿¡æ¯å¯ä»¥å¾ˆä¸°å¯Œï¼Œæ¯”å¦‚å›¾ç‰‡ç±»å‹çš„æ–‡ä»¶å°±å¯ä»¥å°†å›¾åƒçš„å°ºå¯¸ç­‰ä¿¡æ¯æ”¾åœ¨æ–‡ä»¶å¤´ï¼Œé‚£ä¹ˆå›¾åƒæµè§ˆè½¯ä»¶å°±å¯ä»¥è¯†åˆ«å‡ºå…·ä½“å‚æ•°ã€‚ Magic Number æ–‡ä»¶å¤´å¯ä»¥åˆ¤æ–­æ–‡ä»¶ç±»å‹ï¼Œä½†è¿™ä¹Ÿè¯´å¾—å¤ªç¬¼ç»Ÿï¼Œå› ä¸ºæ–‡ä»¶å¤´å¯ä»¥åŒ…å«ä¸€äº›å…¶ä»–çš„ä¿¡æ¯ã€‚è€ŒçœŸæ­£ç”¨æ¥åˆ¤æ–­æ–‡ä»¶ç±»å‹çš„ï¼Œæ˜¯ Magic Numberã€‚ Magic Number å¯ä»¥ç¿»è¯‘ä¸ºå¹»æ•°ï¼Œå®ƒæ˜¯ä¸€äº›æ–‡ä»¶æ ¼å¼è§„èŒƒæ‰€è¦æ±‚çš„ç‰¹æ®Šæ ‡ç­¾å€¼ï¼Œè¡¨ç¤ºæ–‡ä»¶ç¬¦åˆè¿™ç§è§„èŒƒã€‚ Magic Number çš„å–å€¼å¾€å¾€å¾ˆéšæ„ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆå®ƒå« Magic Number ğŸ¤£ã€‚ä½†ä¹Ÿæœ‰ä¸€äº› Magic Number åœ¨é€‰æ‹©æ—¶æ·»åŠ äº†ä¸€äº›é£è¶£çš„å…ƒç´ ã€‚æ¯”å¦‚ Java ä¸­çš„ CLASS æ–‡ä»¶å¤´åå…­è¿›åˆ¶å¹»æ•°ä¸º CA FE BA BEï¼Œç€å®æŠŠå’–å•¡ â˜• ç©æ˜ç™½äº†ï¼›MS-DOS çš„å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆæ¯”å¦‚ EXEï¼‰çš„å¹»æ•°ä¸º 4D 5Aï¼Œå¯¹åº” ASCII ç»“æœä¸º MZï¼Œæ˜¯ MS-DOS æ¶æ„å¸ˆ Mark Zbikowski çš„åå­—ç¼©å†™ï¼›åŒæ ·ä½¿ç”¨åå­—ç¼©å†™çš„è¿˜æœ‰ ZIP æ–‡ä»¶ï¼Œå¹»æ•°ä¸º 50 4B 03 04ï¼Œå‰ä¸¤ä½å¯¹åº” ASCII ç»“æœä¸º PKï¼Œæ˜¯ PKZIP ç®—æ³•å‘æ˜è€… Phil Katz çš„åå­—ç¼©å†™ã€‚ å¸¸è§ Magic Number å¯¹ç…§è¡¨ List of file signatures GCK'S FILE SIGNATURES TABLE åŒ¹é…æ ¡éªŒ æœ‰äº†ä»¥ä¸Šçš„äº†è§£ï¼Œå°±å¯ä»¥å¾ˆè½»æ¾åœ°å†™å‡ºæ ¡éªŒä»£ç ã€‚ä»¥ Java ä¸ºä¾‹ï¼š public class FileMatcher { private static final String MAGIC_NUMBER_PNG = &quot;89504E470D0A1A0A&quot;; public static boolean isPngFile(File file) { byte[] bytes = fileToBytes(file); if (bytes == null) { return false; } String hex = bytesToHex(bytes); if (hex == null) { return false; } return hex.startsWith(MAGIC_NUMBER_PNG); } private static byte[] fileToBytes(File file) { FileInputStream fis = null; ByteArrayOutputStream bos = null; try { fis = new FileInputStream(file); bos = new ByteArrayOutputStream(); byte[] buffer = new byte[1024]; int bytesRead; while ((bytesRead = fis.read(buffer)) != -1) { bos.write(buffer, 0, bytesRead); } return bos.toByteArray(); } catch (IOException e) { e.printStackTrace(); return null; } finally { try { if (fis != null) { fis.close(); } if (bos != null) { bos.close(); } } catch (IOException e) { e.printStackTrace(); } } } private static String bytesToHex(byte[] src) { StringBuilder sb = new StringBuilder(); if (src == null || src.length == 0) { return null; } String hex; for (byte b : src) { hex = Integer.toHexString(b &amp; 0xFF).toUpperCase(); if (hex.length() &lt; 2) { sb.append(0); } sb.append(hex); } return sb.toString(); } } é€»è¾‘å¾ˆç®€å•ï¼Œåˆ†ä¸‰æ­¥èµ°ï¼š è·å–æ–‡ä»¶çš„å­—èŠ‚æ•°ç»„ã€‚ æŠŠå­—èŠ‚æ•°ç»„è½¬ä¸ºåå…­è¿›åˆ¶å­—ç¬¦ä¸²ã€‚ å°†åå…­è¿›åˆ¶å­—ç¬¦ä¸²å‰é¢ä¸€å®šä½æ•°ä¸ Magic Number åšæ¯”è¾ƒã€‚ è½¬æ¢çš„ä»£ç ç›¸ä¿¡å¤§å®¶çš„é¡¹ç›®é‡ŒåŸºæœ¬éƒ½æœ‰å°è£…ï¼Œæ‰€ä»¥å®é™…å†™çš„ä»£ç å°±å‡ è¡Œç½¢äº†ã€‚ åè®° é€šè¿‡ Magic Number æ ¡éªŒæ–‡ä»¶ç±»å‹åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¯è¡Œçš„ï¼Œä½†è®¸å¤šå·¥å…·åŒæ—¶ä¹Ÿæä¾›äº†ç¯¡æ”¹æ–‡ä»¶å¤´çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ã€WinHexã€ã€‚ è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒæ–‡ä»¶æ‰©å±•åçš„ Magic Number æœ‰å¯èƒ½ç›¸åŒï¼Œæ¯”å¦‚ APK å’Œ ZIPï¼Œå› ä¸º APK æœ¬èº«å°±æ˜¯ä»¥ ZIP æ ¼å¼å‹ç¼©çš„ï¼Œæ‰€ä»¥æ ¹æ®å®é™…åº”ç”¨åœºæ™¯å¯ä»¥ç»“åˆå¤šç§æ–¹æ¡ˆåˆ¤æ–­ã€‚ ","link":"https://LiarrDev.github.io/post/Verify-File-Types-with-Magic-Number/"},{"title":"Android æ²‰æµ¸å¼æ•ˆæœ","content":"å¸‚é¢ä¸Šå¾ˆå¤š App å¯åŠ¨çš„æ—¶å€™éƒ½æœ‰ä¸€ä¸ªå‡ ç§’é’Ÿå¯åŠ¨é¡µï¼Œå¯ä»¥ç”¨æ¥æ”¾ä¸€äº›å¹¿å‘Šï¼Œæˆ–è€…åšä¸€äº›å®£ä¼ è‡ªå®¶å“ç‰Œçš„å†…å®¹ï¼Œè€Œä¸”æ˜¯æ²‰æµ¸å¼æ•ˆæœï¼Œçœ‹èµ·æ¥ååˆ†èˆ’æœã€‚ é‚£ä¹ˆä»Šå¤©å°±æ¥èŠèŠæ²‰æµ¸å¼çš„å®ç°ã€‚ ä»€ä¹ˆæ˜¯æ²‰æµ¸å¼ ä¼°è®¡é—®åä¸ªäººä¼šæœ‰åä¸ªå›ç­”ï¼Œå¾ˆå¤šäººéƒ½è¯´ä¸ä¸Šåˆ°åº•ä»€ä¹ˆæ‰æ˜¯æ²‰æµ¸å¼ï¼ŒåŸå› æ˜¯å›½å†…è®¸å¤šåšå®¢éƒ½å¼ å† ææˆ´è¯´ä»€ä¹ˆæ²‰æµ¸å¼çŠ¶æ€æ æˆ–è€…æ²‰æµ¸å¼æ•ˆæœä¹‹ç±»çš„åè¯ï¼Œè®©äººæ‘¸ä¸ç€å¤´è„‘ã€‚ Android å®˜æ–¹ä»æ¥æ²¡æœ‰ç»™å‡ºè¿‡æ²‰æµ¸å¼çŠ¶æ€æ è¿™æ ·çš„å‘½åï¼Œåªæœ‰æ²‰æµ¸å¼æ¨¡å¼ï¼ˆImmersive Modeï¼‰è¿™ç§è¯´æ³•ï¼Œä¸è¿‡å€’æ˜¯æœ‰éƒ¨åˆ†å›½å†…çš„ ROM ç»™å‡ºäº†ã€Œæ²‰æµ¸å¼çŠ¶æ€æ ã€è¿™ç§è®¾ç½®ã€‚ æ‰€ä»¥å®é™…ä¸Šã€Œæ²‰æµ¸å¼çŠ¶æ€æ ã€å¯ä»¥ç†è§£ä¸ºé€æ˜çŠ¶æ€æ ï¼Œè€ŒçœŸæ­£çš„ã€Œæ²‰æµ¸å¼æ¨¡å¼ã€åˆ™æ˜¯å¦‚æ¸¸æˆæˆ–è§†é¢‘çŠ¶æ€ä¸‹çš„å…¨å±æ•ˆæœã€‚ æ•´ä¸ªå±å¹•æ˜¾ç¤ºéƒ½æ˜¯æ¸¸æˆçš„å†…å®¹ï¼Œæ²¡æœ‰çŠ¶æ€æ ä¹Ÿæ²¡æœ‰å¯¼èˆªæ ï¼Œç”¨æˆ·ç©æ¸¸æˆçš„æ—¶å€™å°±å¯ä»¥å®Œå…¨æ²‰æµ¸åœ¨æ¸¸æˆå½“ä¸­ï¼Œè€Œä¸ä¼šè¢«ä¸€äº›ç³»ç»Ÿçš„ç•Œé¢å…ƒç´ æ‰€æ‰“æ‰°ï¼Œè¿™å°±æ˜¯æ²‰æµ¸å¼æ¨¡å¼ã€‚ ç•Œé¢å…ƒç´  è¦å®ç°æ²‰æµ¸å¼ï¼Œé¦–å…ˆè¦äº†è§£ç•Œé¢ä¸Šæœ‰å“ªäº›å…ƒç´ æ˜¯éœ€è¦éšè—çš„ï¼Œæ¥çœ‹çœ‹è¿™å¼ å›¾ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæœ‰çŠ¶æ€æ ã€ActionBarã€å¯¼èˆªæ ç­‰ã€‚è€Œæ‰“é€ æ²‰æµ¸å¼æ¨¡å¼çš„ç”¨æˆ·ä½“éªŒï¼Œå°±æ˜¯è¦å°†è¿™äº›ç³»ç»Ÿå…ƒç´ å…¨éƒ¨éšè—ï¼Œåªç•™ä¸‹ä¸»ä½“å†…å®¹éƒ¨åˆ†ã€‚ å®è·µ å¸ƒå±€ å¯åŠ¨é¡µå¾ˆå¤šæƒ…å†µä¸‹æ˜¯ä¸€å¼ å›¾ç‰‡ï¼Œæˆ‘ä»ã€ç½‘æ˜“äº‘éŸ³ä¹ã€ä¸­å·äº†ä¸€å¼ å›¾ï¼Œå¸ƒå±€å¾ˆç®€å•ï¼š &lt;FrameLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;.activity.SplashActivity&quot;&gt; &lt;androidx.appcompat.widget.AppCompatImageView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:scaleType=&quot;centerCrop&quot; android:src=&quot;@drawable/splash_bg&quot; /&gt; &lt;/FrameLayout&gt; åˆå§‹æ•ˆæœå¦‚ä¸‹ï¼š éšè— ActionBar éšè— ActionBar æ˜¯é¡¹ç›®ä¸­å¸¸ç”¨çš„åœºæ™¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨æŒ‡å®šå…¶ android:theme ä¸º NoActionBar ç±»å‹çš„ä¸»é¢˜ï¼Œä¹Ÿå¯ä»¥åœ¨é€»è¾‘ä»£ç ä¸­åŠ¨æ€éšè—ï¼š class SplashActivity : AppCompatActivity() { override fun onCreate(savedInstanceState: Bundle?) { ... supportActionBar?.hide() } } æ•ˆæœå¦‚ä¸‹ï¼š éšè—çŠ¶æ€æ  æ¥ä¸‹æ¥æ˜¯éšè—çŠ¶æ€æ ï¼Œæˆ‘é€šè¿‡é‡å†™ onWindowFocusChanged() æ–¹æ³•æ¥å®ç°ï¼š class SplashActivity : AppCompatActivity() { ... override fun onWindowFocusChanged(hasFocus: Boolean) { ... window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_FULLSCREEN } } è¿™é‡Œå…ˆè·å–åˆ°äº†å½“å‰ç•Œé¢çš„ DecorViewï¼Œç„¶åè°ƒç”¨å®ƒçš„ setSystemUiVisibility() æ–¹æ³•æ¥è®¾ç½®ç³»ç»Ÿ UI å…ƒç´ çš„å¯è§æ€§ã€‚å…¶ä¸­ï¼ŒSYSTEM_UI_FLAG_FULLSCREEN è¡¨ç¤ºå…¨å±çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯ä¼šå°†çŠ¶æ€æ éšè—ã€‚æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œæ ¹æ® Android çš„è®¾è®¡å»ºè®®ï¼ŒActionBar æ˜¯ä¸åº”è¯¥ç‹¬ç«‹äºçŠ¶æ€æ è€Œå•ç‹¬æ˜¾ç¤ºçš„ï¼Œå› æ­¤çŠ¶æ€æ å¦‚æœéšè—äº†ï¼Œåˆ™è¦ç¡®ä¿ ActionBar ä¹Ÿè¿›è¡Œäº†éšè—ã€‚ é€æ˜çŠ¶æ€æ  é‚£å¦‚æœæƒ³å®ç°æ‰€è°“çš„ã€Œæ²‰æµ¸å¼çŠ¶æ€æ ã€å‘¢ï¼Ÿ ä¸Šé¢æåˆ°ï¼Œæ‰€è°“çš„ã€Œæ²‰æµ¸å¼çŠ¶æ€æ ã€å®é™…ä¸Šæ˜¯é€æ˜çŠ¶æ€æ ï¼Œæˆ‘ä»¬å¯ä»¥å€ŸåŠ©å¦å¤–ä¸€ç§ UI FLAG æ¥å®ç°ï¼š class SplashActivity : AppCompatActivity() { ... override fun onWindowFocusChanged(hasFocus: Boolean) { ... window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN or View.SYSTEM_UI_FLAG_LAYOUT_STABLE window.statusBarColor = Color.TRANSPARENT } } è¦å®ç°è¿™ç§æ•ˆæœï¼Œä¿®æ”¹ä¸º SYSTEM_UI_FLAG_LAYOUT_FULLSCREENï¼Œè¡¨ç¤ºä¼šè®©åº”ç”¨çš„ä¸»ä½“å†…å®¹å ç”¨ç³»ç»ŸçŠ¶æ€æ çš„ç©ºé—´ï¼Œç½‘ä¸Šæœ‰æ–‡ç« æåˆ°éœ€è¦ç»“åˆ SYSTEM_UI_FLAG_LAYOUT_STABLE ä¸€èµ·ä½¿ç”¨ï¼Œä½†æˆ‘æµ‹è¯•å‘ç°ä¼¼ä¹ä¸éœ€è¦ä¹Ÿèƒ½å®ç°è¯¥æ•ˆæœï¼Œä¸çŸ¥é“æ˜¯ä¸æ˜¯ç‰ˆæœ¬é—®é¢˜ã€‚ ä¸»ä½“å†…å®¹å ç”¨çŠ¶æ€æ çš„ç©ºé—´è¿˜ä¸å¤Ÿï¼Œå› ä¸ºæ­¤æ—¶çŠ¶æ€æ ä¾ç„¶æœ‰ç€è‰²ï¼Œæˆ‘ä»¬å†å°†å…¶ç½®ä¸ºé€æ˜å³å¯ã€‚ é€æ˜å¯¼èˆªæ  å…¶å®å¯¼èˆªæ åœ¨ä¸åŒæ‰‹æœºä¸Šæ˜¯ä¸ä¸€å®šå­˜åœ¨çš„ï¼Œæ¯”å¦‚å°ç±³æ—©æœŸçš„æ‰‹æœºï¼Œåº•éƒ¨çš„ä¸‰å¤§é‡‘åˆšé”®æ˜¯ä¸åœ¨å±å¹•èŒƒå›´å†…çš„ï¼Œè€Œåä¸ºæ—©æœŸçš„ä¸€äº›æ‰‹æœºåˆ™æ˜¯åœ¨å±å¹•å†…ï¼Œè¿‘å‡ å¹´æ‰‹åŠ¿å…¨é¢å±çš„æ™®åŠï¼Œåˆå¯ä»¥ç”±ç”¨æˆ·è‡ªå·±å†³å®šæ˜¯å¦æ˜¾ç¤ºä¸‰å¤§é‡‘åˆšé”®ï¼Œæ‰€ä»¥åªæœ‰åœ¨å±å¹•å†…çš„æ‰å«å¯¼èˆªæ ã€‚ é€æ˜å¯¼èˆªæ å’Œé€æ˜çŠ¶æ€æ çš„å®ç°æ–¹å¼ç›¸ä¼¼ï¼š class SplashActivity : AppCompatActivity() { ... override fun onWindowFocusChanged(hasFocus: Boolean) { ... window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION window.navigationBarColor = Color.TRANSPARENT } } ä½¿ç”¨ SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION ä½¿åº”ç”¨ä¸»ä½“å†…å®¹å ç”¨å¯¼èˆªæ ä½ç½®ï¼Œå¹¶å°†å¯¼èˆªæ è®¾ç½®ä¸ºé€æ˜è‰²ã€‚ éšè—å¯¼èˆªæ  éšè—å¯¼èˆªæ çš„å®ç°æ–¹å¼å’Œä¸Šé¢ç›¸ä¼¼ï¼Œä¹Ÿæ˜¯ä½¿ç”¨ä¸åŒçš„ UI FLAGï¼š class SplashActivity : AppCompatActivity() { ... override fun onWindowFocusChanged(hasFocus: Boolean) { ... window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or View.SYSTEM_UI_FLAG_FULLSCREEN } } åŒæ—¶ä½¿ç”¨ SYSTEM_UI_FLAG_FULLSCREEN å’Œ SYSTEM_UI_FLAG_HIDE_NAVIGATION å¯ä»¥å®ç°å°†çŠ¶æ€æ å’Œå¯¼èˆªæ ä¸€èµ·éšè—ã€‚è¿™ç§æ–¹å¼è™½ç„¶çœ‹ä¸Šå»å¥½åƒæ˜¯å…¨å±åŒ–äº†ï¼Œä½†ä¼šæœ‰ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬è§¦æ‘¸å±å¹•çš„ä»»æ„ä½ç½®æˆ–è¾¹ç¼˜åˆ’åŠ¨ä¼šé€€å‡ºå…¨å±ï¼Œä½¿çŠ¶æ€æ å’Œå¯¼èˆªæ æ˜¾ç¤ºå‡ºæ¥ï¼Œå¹¶ä¸”æ— æ³•å†æ¬¡éšè—ï¼š è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„æ•ˆæœï¼Œå› æ­¤è¿™ç§æ¨¡å¼çš„ä½¿ç”¨åœºæ™¯æ¯”è¾ƒæœ‰é™ã€‚ æ²‰æµ¸å¼ å¦‚ä½•æ‰èƒ½å®ç°çœŸæ­£çš„æ²‰æµ¸å¼æ•ˆæœå‘¢ï¼Ÿ åŒæ ·ï¼Œè¿˜æ˜¯ç»§ç»­ç»„åˆ UI FLAGï¼š class SplashActivity : AppCompatActivity() { ... override fun onWindowFocusChanged(hasFocus: Boolean) { ... window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or View.SYSTEM_UI_FLAG_FULLSCREEN or View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY } } è§¦æ‘¸å±å¹•å¹¶ä¸ä¼šé€€å‡ºå…¨å±ï¼Œä¸”ä»…åœ¨å±å¹•è¾¹ç¼˜å‘ä¸­å¤®åˆ’åŠ¨çš„æ—¶å€™æ‰ä¼šå‘¼å‡ºçŠ¶æ€æ å’Œå¯¼èˆªæ ï¼Œå¦‚æ— æ“ä½œåˆ™åœ¨å‡ ç§’åæŠ˜å ï¼Œé‡æ–°å›åˆ°å…¨å±ï¼Œå¾ˆç¬¦åˆæˆ‘ä»¬å¹³æ—¶ç©æ¸¸æˆæˆ–çœ‹è§†é¢‘æ—¶çš„æ“ä½œã€‚ ä¸è¿‡ï¼Œç½‘ä¸Šçš„åšå®¢åœ¨ä»‹ç»è¿™ç§æ–¹å¼çš„æ—¶å€™é€šå¸¸ä¼šç”¨åˆ° 6 ç§ UI FLAGï¼š class SplashActivity : AppCompatActivity() { ... override fun onWindowFocusChanged(hasFocus: Boolean) { ... window.decorView.systemUiVisibility = View.SYSTEM_UI_FLAG_HIDE_NAVIGATION or View.SYSTEM_UI_FLAG_FULLSCREEN or View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY or View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION or View.SYSTEM_UI_FLAG_LAYOUT_STABLE or View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN } } ä¸ºä½•åªéœ€ 3 ä¸ª UI FLAG ç»„åˆå°±èƒ½å®ç°çš„æ•ˆæœï¼Œå¤§å®¶éƒ½é€‰ç”¨å°†è¿™ 6 ä¸ªåŒæ—¶å†™å…¥å‘¢ï¼Ÿ ç»è¿‡å„ç§æˆ‘æƒ³åˆ°çš„æƒ…å†µè¿›è¡Œæµ‹è¯•ï¼Œç»ˆäºæ‰¾åˆ°äº†åŒºåˆ«ï¼Œå½“æˆ‘ä»¬é•¿æŒ‰ POWER é”®çš„æ—¶å€™ï¼Œä¼šæœ‰å¦‚ä¸‹ä¸åŒï¼š é•¿æŒ‰ POWER é”®ä¼šå¼¹å‡ºä¸€ä¸ªèœå•é®æŒ¡åœ¨æœ€é¡¶éƒ¨ï¼ŒåŒæ—¶è¯¥ç•Œé¢ä¼šçŸ­æš‚é€€å‡ºæ²‰æµ¸å¼ï¼Œä»…ä½¿ç”¨ä¸‰ç§ UI FLAG çš„æ—¶å€™çŠ¶æ€æ å’Œå¯¼èˆªæ å°†æ˜¾ç¤ºä¸ºé»˜è®¤çŠ¶æ€ï¼Œè€Œä½¿ç”¨å…­ç§ UI FLAG çš„æ—¶å€™çŠ¶æ€æ å’Œå¯¼èˆªæ å°†ä¼šæ˜¾ç¤ºä¸ºé€æ˜çŠ¶æ€ï¼Œä¸ç”¨æˆ‘è¯´ä½ ä¹ŸçŸ¥é“ï¼Œé€æ˜çŠ¶æ€äº¤äº’ä¼šæ›´åŠ å‹å¥½ã€‚ ","link":"https://LiarrDev.github.io/post/Android-Immersive-Effects/"},{"title":"Android å‰ªè´´æ¿çš„ç®€å•ä½¿ç”¨","content":"å¾ˆå¤š App ç°åœ¨éƒ½ä¼šç”¨åˆ°ä¸€é”®å¤åˆ¶æˆ–è€…ä¸€é”®ç²˜è´´çš„åŠŸèƒ½ï¼Œæ¯”å¦‚ã€æ·˜å®ã€ï¼Œæ”¯æŒä¸€é”®å¤åˆ¶ç‰©æµå•å·ï¼Œä¹Ÿæ”¯æŒç›´æ¥ä»å‰ªè´´æ¿ä¸­è¯»å–æ‰€å¤åˆ¶çš„æ·˜å£ä»¤ã€‚ ä¸€é”®å¤åˆ¶å’Œä¸€é”®ç²˜è´´çš„æ“ä½œå¦‚ä½•å®ç°å‘¢ï¼Ÿ Android ä¸ºæˆ‘ä»¬æä¾›äº†å‰ªè´´æ¿æ¡†æ¶ï¼Œå…è®¸å¤åˆ¶å’Œç²˜è´´ä¸åŒç±»å‹çš„æ•°æ®ï¼Œæ¯”å¦‚æ–‡æœ¬ã€å›¾åƒã€äºŒè¿›åˆ¶æµæ•°æ®æˆ–è€…å…¶ä»–å¤æ‚çš„æ•°æ®ç±»å‹ï¼Œå¦å¤–ï¼Œå®ƒè¿˜æ”¯æŒå¤åˆ¶å¤šæ¡è®°å½•ï¼Œå¾ˆå¤šè¾“å…¥æ³•éƒ½å®ç°äº†å¤šæ¡è®°å½•çš„å‰ªè´´æ¿ï¼ŒåŠŸèƒ½å¾ˆå¼ºå¤§ã€‚ å½“ç„¶ï¼Œæœ€å¸¸ç”¨çš„è¿˜æ˜¯å¯¹æ–‡æœ¬è¿›è¡Œæ“ä½œå•¦ï¼Œé‚£å°±ä»‹ç»ä¸€ä¸‹å¤åˆ¶å’Œç²˜è´´æ–‡æœ¬çš„å®ç°æ–¹æ³•ã€‚ å¤åˆ¶å®ç°å¦‚ä¸‹ï¼š fun copyText(text: CharSequence) { val cm = context.getSystemService(CLIPBOARD_SERVICE) as ClipboardManager cm.setPrimaryClip(ClipData.newPlainText(context.packageName, text)) } æ— è®ºæ˜¯å¤åˆ¶è¿˜æ˜¯ç²˜è´´ï¼Œéƒ½ç¦»ä¸å¼€ ClipboardManager è¿™ä¸ªå‰ªè´´æ¿ç®¡ç†æœåŠ¡ï¼Œé€šè¿‡ newPlainText() é™æ€æ–¹æ³•åˆ›å»º ClipData å¯¹è±¡ï¼Œå†é€šè¿‡ setPrimaryClip() æ–¹æ³•ä¼ ç»™ ClipboardManager å³å¯ï¼ŒnewPlainText() æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ label å’Œ textï¼Œé€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬åªéœ€è¦è®¾ç½® text å³å¯ï¼Œå®ƒæ˜¯æˆ‘ä»¬éœ€è¦å¤åˆ¶çš„æ–‡æœ¬ï¼Œè€Œ label ä¸€èˆ¬ä¸ä¼šä¸ç”¨æˆ·æ‰“äº¤é“ï¼Œæ›´å¤šæ˜¯ç”¨äºå¼€å‘è€…çš„æ ‡è®°ã€‚ ç²˜è´´å®ç°å¦‚ä¸‹ï¼š fun getText(): CharSequence { val cm = context.getSystemService(CLIPBOARD_SERVICE) as ClipboardManager cm.primaryClip?.let { if (it.itemCount &gt; 0) { return it.getItemAt(0).coerceToText(context) } } return &quot;&quot; } æ—¢ç„¶å¤åˆ¶æ˜¯å°†æ–‡å­—å°è£…æˆ ClipData ä¼ ç»™ ClipboardManagerï¼Œé‚£ä¹ˆç²˜è´´åˆ™æ˜¯åè¿‡æ¥ï¼Œä¹Ÿå°±æ˜¯ä» ClipboardManager ä¸­å–å‡º ClipData å¹¶è§£æå‡ºæ–‡å­—ï¼Œè¿™é‡Œéœ€è¦æ³¨æ„åˆ¤ç©ºï¼Œé¿å…ç©ºæŒ‡é’ˆå¼‚å¸¸æˆ–è€…æ•°ç»„è¶Šç•Œï¼Œä¸€èˆ¬æƒ…å†µä¸‹æˆ‘ä»¬åªä¼šç”¨åˆ°å‰ªè´´æ¿ç¬¬ä¸€æ¡æ•°æ®ï¼Œè·å–ä¹‹åè°ƒç”¨ coerceToText() è½¬æ¢æˆæ–‡å­—ï¼Œå› ä¸ºå‰ªè´´æ¿é™¤äº†æ–‡å­—å¤–è¿˜æ”¯æŒ URI ç­‰ç±»å‹ï¼Œè¿™ä¸ªæ–¹æ³•å¯ä»¥å¸®æˆ‘ä»¬ä¸€å¹¶å¤„ç†ã€‚ åƒã€æ·˜å®ã€å°±æ˜¯æ¯æ¬¡ App å›åˆ°å‰å°æ—¶å°±è·å–ä¸€æ¬¡å‰ªè´´æ¿ï¼Œå¦‚æœæ˜¯æ·˜å£ä»¤åˆ™æ‰§è¡Œå¯¹åº”çš„æ“ä½œã€‚ è¿™ç¯‡æ–‡ç« æœ¬æ¥åˆ°è¿™é‡Œå°±è¯¥ç»“æŸäº†ï¼Œä½†æˆ‘çªç„¶å‘ç°äº†ä¸€ä¸ªæ–°åŠŸèƒ½ï¼š å…¶å® ClipboardManager æä¾›äº†ç›‘å¬å‰ªè´´æ¿çš„æ–¹æ³•ï¼š fun addClipChangedListener() { val cm = context.getSystemService(CLIPBOARD_SERVICE) as ClipboardManager cm.addPrimaryClipChangedListener { val text = getText() ... } } ä½†æ˜¯å›è°ƒä¸­å¹¶æ²¡æœ‰è¿”å›æœ€æ–°çš„å†…å®¹ï¼Œä»éœ€è‡ªè¡Œè·å–ã€‚ ","link":"https://LiarrDev.github.io/post/Simple-Use-of-the-Android-Clipboard/"},{"title":"Android è§£å†³ TEST_ONLY åº”ç”¨æ— æ³•å®‰è£…çš„é—®é¢˜","content":"æœ€è¿‘æ‹¿äº†åŒäº‹çš„ OPPO A5 è¿‡æ¥æµ‹è¯•ï¼Œå‘ç°ç›´æ¥ç”¨ã€Android Studioã€çš„ã€ŒRun 'app'ã€ä¸èƒ½å¤ŸæŠŠåº”ç”¨å®‰è£…åˆ°æ‰‹æœºä¸Šï¼Œç³»ç»Ÿçš„åº”ç”¨åŒ…å®‰è£…ç¨‹åºä¼šæ˜¾ç¤ºã€Œå®‰è£…å¤±è´¥ã€ï¼š ã€Android Studioã€åº•éƒ¨çš„ã€ŒRunã€é€‰é¡¹å¡ä¼šæç¤ºä»¥ä¸‹ä¿¡æ¯ï¼š Installation did not succeed. The application could not be installed: INSTALL_FAILED_TEST_ONLY Installation failed due to: 'null' ç¿»é˜…å®˜æ–¹æ–‡æ¡£åå‘ç°å¦‚ä¸‹ä¿¡æ¯ï¼š android:testOnly Indicates whether this application is only for testing purposes. For example, it may expose functionality or data outside of itself that would cause a security hole, but is useful for testing. This kind of APK can be installed only through adb â€” you cannot publish it to Google Play. Android Studio automatically adds this attribute when you click Run. æŒ‡ç¤ºæ­¤åº”ç”¨æ˜¯å¦ä»…ç”¨äºæµ‹è¯•ç›®çš„ã€‚ä¾‹å¦‚ï¼Œå®ƒå¯èƒ½ä¼šåœ¨è‡ªèº«ä¹‹å¤–å…¬å¼€åŠŸèƒ½æˆ–æ•°æ®ï¼Œè¿™æ ·ä¼šå¯¼è‡´å®‰å…¨æ¼æ´ï¼Œä½†å¯¹æµ‹è¯•å¾ˆæœ‰ç”¨ã€‚æ­¤ç±» APK åªèƒ½é€šè¿‡ adb å®‰è£…ï¼Œæ‚¨ä¸èƒ½å°†å…¶å‘å¸ƒåˆ° Google Playã€‚ å½“æ‚¨ç‚¹å‡» Run å›¾æ ‡ æ—¶ï¼ŒAndroid Studio ä¼šè‡ªåŠ¨æ·»åŠ æ­¤å±æ€§ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå½“ Run ç¨‹åºåï¼Œã€Android Studioã€ä¼šè‡ªåŠ¨åœ¨ Debug APK çš„ AndroidManifest ä¸­æ·»åŠ  android:testOnly=&quot;true&quot; å±æ€§ï¼Œéƒ¨åˆ†æ‰‹æœºæ£€æµ‹åˆ°è¯¥å±æ€§åä¼šæ‹’ç»å®‰è£…ã€‚ ä½†æ˜¯é€šè¿‡ã€ŒBuildã€â†’ã€ŒBuild Bundles(s) / APK(s)ã€â†’ã€ŒBuild APK(s)ã€ç”Ÿæˆçš„ Debug APK å´ä¸ä¼šæœ‰è¿™ç§æƒ…å†µã€‚ æ®ç½‘ä¸Šå¤§é‡æ–‡ç« è®²è¿°ï¼Œè¿™æ˜¯ã€Android Studioã€3.0 åçš„ç‰ˆæœ¬ä¼šå‡ºç°çš„æƒ…å†µï¼Œå…³äºè¿™ç‚¹æˆ‘åœ¨å®˜æ–¹æ–‡æ¡£æ²¡æœ‰æ‰¾åˆ°å…·ä½“è¯´æ˜ï¼Œæ— ä»è€ƒè¯ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼Œé‚£æˆ‘å¼ºåˆ¶æŠŠè¿™ä¸ªå±æ€§å†™æˆ false ä¸å°±å¯ä»¥äº†å—ï¼š &lt;application ... android:testOnly=&quot;false&quot;&gt; ... &lt;/application&gt; ç»“æœå´å‘ç°ï¼Œä¾ç„¶æ— æ³•æ­£å¸¸å®‰è£…ã€‚ ç½‘ä¸Šæåˆ°ï¼Œå¯ä»¥ä½¿ç”¨ ADB å‘½ä»¤æ¥å®‰è£…ï¼š âœ adb install -t app-debug.apk å¾ˆå¤šåšä¸»éƒ½è¯´è¿™ä¸ªæ–¹æ³•å¯ä»¥ï¼Œä½†æˆ‘æµ‹è¯•å‘ç°ä¸è¡Œï¼Œä¸çŸ¥æ˜¯å¦ä¸ºä¸ªä¾‹ã€‚ æœ€ç»ˆæ–¹æ³•ï¼Œåœ¨ã€Œgradle.propertiesã€æ–‡ä»¶ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š android.injected.testOnly=false é—®é¢˜å¾—ä»¥è§£å†³ã€‚ åæ¥æˆ‘æ¢è¿‡ä¸åŒçš„ç”µè„‘å’Œé¡¹ç›®åå‘ç°ï¼Œæœ‰æ—¶å€™è¯¥è®¾ç½®æœªå¿…ä¼šç”Ÿæ•ˆï¼Œåç¼–è¯‘ APK æ–‡ä»¶çœ‹åˆ° android:testOnly å±æ€§ä»æœªè¢«ç§»é™¤ï¼Œäºæ˜¯é¡ºæ‰‹å†™äº†ä¸ªè„šæœ¬æ¥å®ç°è¯¥æ“ä½œå¹¶é‡æ–°æ‰“åŒ…ï¼Œæµç¨‹å¯ä»¥å‚è€ƒä¹‹å‰çš„ã€Android åç¼–è¯‘å…¥é—¨æŒ‡å—ã€ã€‚ åœ¨è°ƒè¯•åº”ç”¨è¿™ä¸€å—ï¼Œä»¥æˆ‘ç›®å‰æµ‹è¯•è¿‡çš„æ‰‹æœºæ¥è¯´ï¼ŒOPPO å’Œ vivo å¯ä»¥ç§°ä¹‹ä¸ºé‡ç¾åŒºï¼Œvivo çš„æƒ…å†µç”šè‡³æ¯” OPPO æ›´åŠ ä¸¥é‡ï¼Œæ®è¯´è¿˜æœ‰è”ç³»å®¢æœå¼€é€šè°ƒè¯•æƒé™ç­‰ç­‰çš„éªšæ“ä½œï¼Œå®å±æ— è¯­ã€‚ ","link":"https://LiarrDev.github.io/post/Android-App-Install-Failed-Test-Only/"},{"title":"macOS iTerm2 ç¾åŒ–é…ç½®ç¬”è®°","content":"ä¸€ç›´å¬é—»ã€iTerm2ã€å·ç§°æ˜¯ macOS å¹³å°ä¸‹çš„ç¬¬ä¸€ç»ˆç«¯ï¼Œä»Šæ—¥æµ…å°ä¸€ä¸‹ã€‚ æœ¬æ–‡ä»…ä»…æ˜¯æˆ‘ä¸ªäººçš„é…ç½®ç¬”è®°ï¼Œè€Œä¸æ˜¯å…³äºã€iTerm2ã€çš„æ¨èï¼Œæ‰€ä»¥å¦‚æœä½ é—®æˆ‘ä¸ºä»€ä¹ˆè¦ç”¨ã€iTerm2ã€è€Œä¸æ˜¯å…¶ä»–ç»ˆç«¯å·¥å…·ï¼Œé‚£ä¹ˆä½ å¤§æ¦‚ç‡å¹¶ä¸çœŸæ­£çš„éœ€è¦å®ƒï¼Œå› ä¸ºæˆ‘ä¹Ÿæ˜¯ã€‚ ä¸è¿‡ä½ å€’æ˜¯å¯ä»¥å‰å¾€å®˜ç½‘çœ‹çœ‹å®ƒæœ‰å“ªäº›åŠŸèƒ½ï¼Œä¹Ÿè®¸å°±ä¼šæœ‰ç­”æ¡ˆã€‚ æ¥ä¸‹æ¥å¼€å§‹é…ç½®ã€‚ iTerm2 å¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨ã€Homebrewã€ï¼Œé‚£ä¹ˆæœ€ç®€å•çš„æ–¹æ³•æ˜¯ï¼š âœ brew install iTerm2 ä¸è¿‡æˆ‘è¿˜æ˜¯å–œæ¬¢ä¸‹è½½å®‰è£…ï¼Œå®˜ç½‘ä¹Ÿæä¾›äº†å®‰è£…åŒ…ã€‚ Oh My Zsh ç°åœ¨ macOS é»˜è®¤çš„ Shell å·²ç»æ˜¯ zsh äº†ï¼Œä½†æ˜¯é»˜è®¤çš„ zsh é…ç½®èµ·æ¥æ¯”è¾ƒéº»çƒ¦ï¼Œè€Œå¼€æºçš„ã€Oh My Zshã€æä¾›äº†å¤§é‡çš„æ’ä»¶å’Œä¸»é¢˜ï¼Œå¸®ä½ è½»æ¾è§£å†³ã€‚ é€šè¿‡ curl å®‰è£…ï¼š âœ sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)&quot; ä¹Ÿå¯ä»¥é€šè¿‡ wget å®‰è£…ï¼š âœ sh -c &quot;$(wget https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh -O -)&quot; Powerline fonts ã€Oh My Zshã€çš„ä¸€äº›ä¸»é¢˜ä½¿ç”¨äº†ç‰¹æ®Šå­—ä½“ï¼Œå¦‚æœæ²¡æœ‰å®‰è£…å­—ä½“çš„è¯å°±ä¼šä¹±ç ï¼Œæˆ‘ä»¬é€šè¿‡å®‰è£… Powerline å­—ä½“è§£å†³ã€‚ ä½ å¯ä»¥ç›´æ¥å» Github ä¸Šæ‰‹åŠ¨ä¸‹è½½å®‰è£…ï¼Œä½†å‘½ä»¤çš„æ–¹å¼æ›´åŠ ä¾¿æ·ã€‚ ä¸‹è½½ï¼š âœ git clone https://github.com/powerline/fonts.git --depth=1 å®‰è£…ï¼š âœ cd fonts âœ ./install.sh æ¸…ç†ä¸€ä¸‹ï¼š âœ cd .. âœ rm -rf fonts å¦‚æœä½ å“ªå¤©ä¸æƒ³ç”¨äº†ï¼Œä¹Ÿå¯ä»¥ç”¨å‘½ä»¤å¿«é€Ÿå¸è½½ï¼š âœ cd fonts âœ ./uninstall.sh å®‰è£…å®Œæˆåï¼Œåœ¨ã€iTerm2ã€ä¸­è®¾ç½®ä¸ºå¯¹åº”çš„å­—ä½“ã€‚ Color Schemes ã€iTerm2ã€å†…ç½®äº†å‡ å¥—é…è‰²ï¼Œå¯ä»¥ç›´æ¥è®¾ç½®ã€‚ å¦‚ä½ æ‰€è§ï¼Œå®ƒæ”¯æŒè‡ªå®šä¹‰é…è‰²ã€‚ ä¸è¿‡ä½ è¦æ˜¯æ‡’äººä¼¸æ‰‹å…šï¼Œå¯ä»¥ä¸‹è½½ç°æˆçš„é…è‰²æ–¹æ¡ˆã€‚ iTerm2 Color Schemes è¿™æ˜¯ä¸€å¥—é€‚ç”¨äºå¤§å¤šæ•°ç»ˆç«¯çš„é¢œè‰²ä¸»é¢˜ï¼Œå†…ç½®äº†æœ‰å°†è¿‘ 300 æ¬¾é…è‰²ã€‚ä½ å¯ä»¥åœ¨ç½‘ç«™ä¸ŠæŒ‘é€‰å–œæ¬¢çš„é…è‰²å•ç‹¬ä¸‹è½½ï¼Œä¹Ÿå¯ä»¥æ‰“åŒ…ä¸‹æ¥æ…¢æ…¢æŒ‘é€‰ã€‚ iTerm2 One Dark Theme å› ä¸ºæˆ‘çš„ã€Android Studioã€é…è‰²æ˜¯ä½¿ç”¨ One Darkï¼Œæ‰€ä»¥ç‰¹æ„ä¹Ÿå¯¼å…¥äº†ç›¸åŒçš„é…è‰²åˆ°ã€iTerm2ã€ä¸­ã€‚ å¯¼å…¥ ä¸‹è½½çš„é…è‰²å¯¼å…¥ä¹Ÿå¾ˆæ–¹ä¾¿ï¼Œåœ¨ã€ŒImportã€ä¸­é€‰æ‹©å¯¹åº”çš„ .itermcolors æ–‡ä»¶å³å¯ã€‚ ä¸»é¢˜ ã€Oh My Zshã€å†…ç½®äº†å¤§é‡ä¸»é¢˜ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ï¼š âœ ls ~/.oh-my-zsh/themes ä½†ä½ è‚¯å®šä¸€è„¸æ‡µé€¼ï¼Œè¿™ä¹ˆå¤šä¸»é¢˜ï¼Œæ¯ä¸ªä¸»é¢˜éƒ½é•¿ä»€ä¹ˆæ ·ï¼Ÿ å¯ä»¥è¿›å…¥ã€Oh My Zshã€é¡¹ç›® Wiki æŸ¥çœ‹ã€‚ é€‰åˆ°å–œæ¬¢çš„ä¸»é¢˜åï¼Œè®°ä½åå­—ï¼Œå†åˆ° .zshrc æ–‡ä»¶è¿›è¡Œä¿®æ”¹ã€‚å¦‚æœä½ ä¹ æƒ¯ä½¿ç”¨å‘½ä»¤å¯ä»¥ç›´æ¥ vimï¼Œå¦åˆ™ç›´æ¥æ‰“å¼€æ–‡ä»¶ä¿®æ”¹æˆ–è®¸æ˜¯ä¸€ä¸ªä¸å®¹æ˜“å‡ºé”™çš„æ–¹å¼ã€‚ æ‰¾åˆ° ZSH_THEMEï¼Œä¿®æ”¹ä¸ºä½ å–œæ¬¢çš„ä¸»é¢˜ï¼Œæ¯”å¦‚ï¼š ZSH_THEME=&quot;agnoster&quot; å¦‚æœä½ å–œæ¬¢å‡ ä¸ªä¸»é¢˜ï¼Œé‚£ä¹ˆå¯ä»¥ä¿®æ”¹ ZSH_THEME_RANDOM_CANDIDATES è®©å®ƒéšæœºåˆ‡æ¢ï¼š ZSH_THEME_RANDOM_CANDIDATES=( &quot;robbyrussell&quot; &quot;agnoster&quot; ) å¦‚æœä½ å¯¹æ‰€æœ‰ä¸»é¢˜éƒ½å¾ˆå–œæ¬¢ï¼Œé‚£å°±è®©å®ƒéšæœºå§ï¼š ZSH_THEME=&quot;random&quot; å¦‚æœå†…ç½®çš„ä¸»é¢˜ä¸åˆä½ å¿ƒæ„ï¼Œå®˜æ–¹ä¹Ÿæ”¶å½•äº†ä¸€äº›ç¬¬ä¸‰æ–¹çš„ä¸»é¢˜ï¼ŒåŒæ ·å¯ä»¥åœ¨é¡¹ç›® Wiki ä¸­æ‰¾åˆ°ï¼Œæ ¹æ®å–œå¥½å®‰è£…å³å¯ã€‚ æ’ä»¶ zsh-syntax-highlighting é»˜è®¤çš„ç»ˆç«¯çº¯è‰²æ–‡å­—å¤ªå½±å“é˜…è¯»ï¼Œè¿™ä¸ªæ’ä»¶èƒ½ä¸ºæˆ‘ä»¬æä¾›è¯­æ³•é«˜äº®ã€‚å®ƒå¯ä»¥åœ¨ zsh çš„æç¤ºç¬¦ä¸‹å°†å‘½ä»¤é«˜äº®æ˜¾ç¤ºåœ¨äº¤äº’å¼ç»ˆç«¯ä¸­ã€‚è¿™æœ‰åŠ©äºåœ¨è¿è¡Œå‘½ä»¤å‰å¯¹å…¶è¿›è¡Œå®¡æŸ¥ï¼Œç‰¹åˆ«æ˜¯åœ¨æ•æ‰è¯­æ³•é”™è¯¯æ–¹é¢ã€‚ é€šè¿‡ã€Homebrewã€å®‰è£…ï¼š âœ brew install zsh-syntax-highlighting å®‰è£…å®Œæˆåï¼Œç»ˆç«¯ä¼šæ˜¾ç¤ºå®‰è£…è·¯å¾„ï¼Œå°†å…¶å¤åˆ¶å¹¶è¿½åŠ åˆ° .zshrc æ–‡ä»¶æœ«å°¾ï¼š source /opt/homebrew/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh zsh-autosuggestions æˆ‘ä»¬å¹³æ—¶å†™ä»£ç ä¹ æƒ¯äº†ä»£ç æç¤ºï¼Œé‚£ä¹ˆç»ˆç«¯ä¸ºä»€ä¹ˆä¸èƒ½æœ‰ä¸€ä¸ªï¼Ÿè¿™ä¸ªæ’ä»¶èƒ½åœ¨ä½ æ‰“å­—æ—¶æ ¹æ®å†å²è®°å½•å’Œå®Œæˆæƒ…å†µå»ºè®®å‘½ä»¤ã€‚ åŒæ ·ä½¿ç”¨ã€Homebrewã€å®‰è£…ï¼š âœ brew install zsh-autosuggestions å°†è·¯å¾„è¿½åŠ åˆ° .zshrc æ–‡ä»¶æœ«å°¾ï¼š source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh ä¸å¹³æ—¶æˆ‘ä»¬åœ¨ IDEA ä½¿ç”¨ Tab æˆ–è€… Enter é”®æ¥å—ä»£ç æç¤ºä¸åŒï¼Œè¯¥æ’ä»¶ä½¿ç”¨æ–¹å‘é”® â†’ æˆ–è€… End æ¥æ¥å—å‘½ä»¤å»ºè®®ã€‚ Status Bar æˆ‘ä¹ æƒ¯åœ¨è¿è¡Œä»»åŠ¡æ—¶å…³æ³¨ç³»ç»Ÿçš„èµ„æºå ç”¨æƒ…å†µï¼Œã€iTerm2ã€å…è®¸é…ç½® Status Barã€‚ æ ¹æ®è‡ªå·±çš„éœ€è¦é…ç½®å³å¯ã€‚ æœ€ç»ˆæ•ˆæœ å…¶å®å¯ä»¥é…ç½®çš„é¡¹ç›®å¾ˆå¤šï¼Œæˆ‘åªæ˜¯æŠŠæˆ‘ä¹ æƒ¯ä½¿ç”¨çš„è®°å½•ä¸‹æ¥ï¼Œå…¶ä»–çš„å°±ç•™ç»™ä½ ä»¬è‡ªè¡Œå‘æŒ¥å§ã€‚ æ³¨æ„äº‹é¡¹ é…ç½®å®Œä¹‹åä½ å¯èƒ½ä¼šå‘ç°ä¹‹å‰çš„ç¯å¢ƒå˜é‡å¤±æ•ˆäº†ï¼Œå› ä¸º .zshrc å·²è¢«ã€Oh My Zshã€æ›´æ”¹ï¼Œéœ€è¦é‡æ–°é…ç½®ã€‚ å…·ä½“é…ç½®æ–¹æ³•ä¹‹å‰åœ¨ã€macOS ç¯å¢ƒå˜é‡é…ç½®ã€ä¸€æ–‡å·²ç»è®²è¿‡ã€‚ å¦‚æœä½ å·²ç»å¿˜è®°ä¹‹å‰é…ç½®è¿‡ä»€ä¹ˆç¯å¢ƒå˜é‡ä¹Ÿä¸è¦æ…Œï¼Œã€Oh My Zshã€è´´å¿ƒåœ°ç»™æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ª .zshrc.pre-oh-my-zsh æ–‡ä»¶ï¼Œé‡Œé¢ä¿å­˜ç€ä¹‹å‰é…ç½®è¿‡çš„å†…å®¹ï¼Œå¤åˆ¶åˆ° .zshrc å³å¯ã€‚ å¦å¤–ï¼Œç›¸å…³çš„é…ç½®ä¹Ÿä¼šå½±å“åˆ°ç³»ç»Ÿè‡ªå¸¦çš„ã€Terminalã€ï¼Œæ¯”å¦‚å­—ä½“ç­‰ï¼Œæ‰€ä»¥å¦‚æœä»éœ€ä½¿ç”¨ã€Terminalã€ï¼Œåˆ™éœ€è¦å‚ç…§ä¸Šæ–‡ã€iTerm2ã€çš„é…ç½®åœ¨ã€Terminalã€ä¸­ä¹Ÿä¿®æ”¹ä¸€ä¸‹ã€‚ ","link":"https://LiarrDev.github.io/post/macOS-iTerm2-Beautifying-Configuration/"},{"title":"macOS ç¯å¢ƒå˜é‡é…ç½®","content":"å„ä½ç¨‹åºå‘˜å°ä¼™ä¼´éƒ½çŸ¥é“ï¼Œç¯å¢ƒå˜é‡çš„é…ç½®åœ¨å¼€å‘ä¸­æä¸ºé‡è¦ï¼Œå°½ç®¡ç°åœ¨è®¸å¤šæ„å»ºå·¥å…·å·²ç»å¸®æˆ‘ä»¬è§£æ”¾äº†æˆ‘ä»¬æ‰‹åŠ¨é…ç½®çš„æ“ä½œï¼Œä½†å¦‚æœæˆ‘ä»¬æƒ³è¦æé«˜æ•ˆç‡ï¼Œç¯å¢ƒå˜é‡ä»ç„¶ååˆ†é‡è¦ã€‚ Windows å¹³å°çš„ç¯å¢ƒå˜é‡é…ç½®åœ¨ä¹‹å‰çš„æ–‡ç« ä¸­å·²å¤šæ¬¡æåŠï¼Œè€Œå¾ˆå¤šåˆšä» Windows å¹³å°åˆ‡æ¢åˆ° macOS çš„å¼€å‘è€…ä»¬å› ä¸ºæ‰¾ä¸åˆ°ä¸€ä¸ªå¯æ“ä½œçš„å…¥å£ï¼Œé¡¿æ—¶è§‰å¾—æ— æ‰€é€‚ä»ã€‚ å› ä¸º macOS é…ç½®ç¯å¢ƒå˜é‡æ˜¯æ²¡æœ‰åƒ Windows ä¸€æ ·çš„ GUI çª—å£ï¼Œè€Œæ˜¯åŸºäºå‘½ä»¤æ“ä½œçš„ã€‚ å¾ˆå¤šäººå¬åˆ°å‘½ä»¤æ“ä½œå°±å¤´çš®å‘éº»ï¼Œæ²¡å…³ç³»ï¼Œä»Šå¤©æ•™ä½ ç”¨æœ€å°‘çš„å‘½ä»¤ï¼Œç”¨å¯è§†åŒ–çš„æ“ä½œæ¥é…ç½®ã€‚ ç›®å‰ä½ åœ¨ç½‘ä¸Šæœåˆ°çš„å¤§å¤šæ•°æ•™ç¨‹å…¶å®æ˜¯è¿‡æ—¶çš„ï¼Œå› ä¸ºåœ¨ macOS Mojave åŠä¹‹å‰çš„ç‰ˆæœ¬ä¸­ï¼Œç³»ç»Ÿé»˜è®¤çš„ Shell æ˜¯ bashï¼Œè€Œä¹‹åçš„ç‰ˆæœ¬é»˜è®¤çš„ Shell å·²ç»æ”¹ä¸º zshï¼Œæˆ‘å‘ç°ç”šè‡³åˆ°äº† 2022 å¹´ macOS Ventura å‘å¸ƒåï¼Œè®¸å¤šæ•™ç¨‹ä¾ç„¶åŸºäº bash æ¥è®²è§£ï¼Œå¤šå°‘æœ‰äº›è½åã€‚ é¦–å…ˆæˆ‘ä»¬ç¡®è®¤ä¸€ä¸‹å½“å‰ç³»ç»Ÿä½¿ç”¨çš„æ˜¯å“ªä¸ª Shellï¼Œæ‰“å¼€ã€Terminalã€çª—å£ï¼Œå³å¯åœ¨é¡¶éƒ¨æŸ¥çœ‹ï¼š å½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤æ¥æŸ¥çœ‹ï¼š âœ echo $SHELL å‡å¦‚ä½ å½“å‰çš„ Shell å¹¶ä¸æ˜¯ zshï¼Œæˆ‘å»ºè®®ä½ ä¹Ÿåˆ‡æ¢åˆ° zshã€‚ å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å½“å‰æ”¯æŒçš„ Shellï¼š âœ cat /etc/shells å°† Shell ç¯å¢ƒåˆ‡æ¢è‡³ zshï¼š âœ chsh -s /bin/zsh æ¥ä¸‹æ¥é”®å…¥ï¼š âœ vim ~/.zshrc ã€Terminalã€ä¼šè¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œä½ å¯ä»¥ä½¿ç”¨å‘½ä»¤ç»§ç»­æ“ä½œï¼Œä½†ä¸ºäº†ç®€å•ï¼Œå¯ä»¥ç›´æ¥è¾“å…¥ :wq é€€å‡ºç¼–è¾‘ã€‚ ä»¥ä¸Šè¿™æ¡å‘½ä»¤ä¼šæ“ä½œ Home ç›®å½•ä¸‹çš„ã€Œ.zshrcã€æ–‡ä»¶ï¼Œå‡å¦‚æœ¬åœ°æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿä¼šè‡ªåŠ¨å¸®ä½ ç”Ÿæˆï¼Œç”±äºè¯¥æ–‡ä»¶å±äºéšè—æ–‡ä»¶ï¼Œæ‰€ä»¥ä½ åº”å½“æ˜¾ç¤ºéšè—æ–‡ä»¶æ‰èƒ½çœ‹åˆ°å®ƒã€‚ è€Œé€€å‡ºç¼–è¾‘æ¨¡å¼åï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ã€Œ.zshrcã€æ–‡ä»¶ï¼Œå°†æˆ‘ä»¬çš„ç¯å¢ƒå˜é‡é…ç½®åˆ°è¯¥æ–‡ä»¶å³å¯ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š # Java export JAVA_HOME=&quot;/Applications/Android Studio.app/Contents/jre/Contents/Home&quot; PATH=&quot;$PATH:$JAVA_HOME/bin&quot; # Android export ANDROID_PLATFORM_TOOLS=&quot;/Users/liarr/Library/Android/sdk/platform-tools&quot; PATH=&quot;$PATH:$ANDROID_PLATFORM_TOOLS&quot; å…¶ä¸­ # å¼€å¤´çš„è¡Œä¸ºæ³¨é‡Šï¼Œexport åé¢å£°æ˜å˜é‡ï¼Œè€Œ PATH æŒ‡å®šçš„çš„å°±æ˜¯ç¯å¢ƒå˜é‡å¯¹åº”çš„è·¯å¾„ã€‚ ç¼–è¾‘å®Œæˆåä¿å­˜è¯¥æ–‡ä»¶ï¼Œå›åˆ°ã€Terminalã€ï¼Œæ‰§è¡Œï¼š âœ source ~/.zshrc ç¯å¢ƒå˜é‡å³å¯ç”Ÿæ•ˆã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹å·²ç»é…ç½®çš„ç¯å¢ƒå˜é‡ï¼š âœ echo $PATH ä»¥ä¸Šå°±æ˜¯ macOS ç¯å¢ƒå˜é‡é…ç½®çš„æ“ä½œï¼ŒæŠŠå‘½ä»¤ç›¸å…³æ­¥éª¤å¿½ç•¥åï¼Œæ— éå°±æ˜¯æ–‡æœ¬çš„ç¼–è¾‘æ“ä½œï¼Œè€Œå‘½ä»¤ä¹Ÿä¸è¿‡æ˜¯è¾…åŠ©æˆ‘ä»¬é…ç½®çš„å·¥å…·ç½¢äº†ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Set-Environment-Variables-in-macOS/"},{"title":"é€šè¿‡ ADB æŸ¥è¯¢ SQLite æ•°æ®åº“","content":"ä¹‹å‰åœ¨ã€ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€ŒLitePalã€ã€çš„æ–‡æœ«ä»‹ç»äº†å¦‚ä½•é€šè¿‡ã€Android Studioã€å¯¼å‡ºæ•°æ®åº“æ–‡ä»¶åˆ°æœ¬åœ°æŸ¥çœ‹çš„æ–¹æ³•ï¼Œä½†æ˜¯åœ¨å¯¹æ¥ç¡¬ä»¶è®¾å¤‡çš„æ—¶å€™æˆ‘å‘ç°ï¼Œæœ‰äº›å‚å®¶çš„æ¿å­åœ¨ã€Android Studioã€ä¸Šæ— æ³•æ­£å¸¸å±•ç¤ºæ–‡ä»¶ç›®å½•ï¼š ç½‘ä¸Šçš„å¾ˆå¤šæ–¹æ¡ˆéƒ½æåŠä½¿ç”¨ã€SuperSUã€æ¥è§£å†³ï¼Œæˆ‘å°è¯•åæ— æœï¼Œä¸ºäº†ä¸æµªè´¹å®è´µçš„å¼€å‘æ—¶é—´ï¼Œäºæ˜¯è½¬ç”¨ ADB æ¥æŸ¥çœ‹æ•°æ®åº“ï¼Œç‰¹æ­¤è®°å½•ã€‚ ADB çš„ç¯å¢ƒé…ç½®ä¹‹å‰å·²ç»è®²è¿‡ï¼Œä¸å†èµ˜è¿°ã€‚ é¦–å…ˆè¿›å…¥ Shell ç¯å¢ƒï¼š âœ adb shell ç„¶åè¿›å…¥åˆ°å¯¹åº”çš„æ•°æ®åº“ç›®å½•ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases è¿™ä¸ªç›®å½•ç›¸ä¿¡åš Android å¼€å‘éƒ½ä¸é™Œç”Ÿäº†ï¼Œæ•°æ®åº“éƒ½å­˜æ”¾åœ¨è¯¥åº”ç”¨çš„ç›¸åº”ç›®å½•ä¸‹ã€‚ å¯ä»¥å…ˆçœ‹çœ‹ç›®å½•ä¸‹æœ‰å“ªäº›æ•°æ®åº“ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ ls æ¥ä¸‹æ¥æ‰“å¼€è¦æŸ¥çœ‹çš„æ•°æ®åº“ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; é€šè¿‡ sqlite3 å‘½ä»¤æ‰“å¼€æ•°æ®åº“ï¼Œå³å¯æ‰§è¡Œç›¸å…³çš„æ•°æ®åº“æ“ä½œï¼Œæ¯”å¦‚æŸ¥çœ‹å½“å‰æ•°æ®åº“å†…æ‰€æœ‰çš„è¡¨ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; âœ .table æŸ¥çœ‹æ•°æ®åº“å»ºè¡¨è¯­å¥ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; âœ .schema æˆ–è€…æ‰§è¡Œ SQL è¯­å¥ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; âœ SELECT * FROM &lt;table_name&gt;; è¿™é‡Œè¦æ³¨æ„ï¼ŒSQL è¯­å¥çš„æœ€åè®°å¾—ä¸è¦æŠŠ ; ç¬¦å·è½ä¸‹ã€‚ æ‰§è¡Œå®Œä¹‹åå¯ä»¥é€šè¿‡ .exit å‘½ä»¤é€€å‡ºæ•°æ®åº“ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; âœ .exit ä¹Ÿå¯ä»¥ç”¨ .quitï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; âœ .quit æ­¤æ—¶ä¾ç„¶å¤„äº Shell ç¯å¢ƒä¸­ã€‚ å¦‚æœæƒ³è¦é€€å‡º Shell ç¯å¢ƒï¼Œå†æ‰§è¡Œ exit å‘½ä»¤å³å¯ï¼š âœ adb shell âœ cd /data/data/&lt;package_name&gt;/databases âœ sqlite3 &lt;db_name&gt; âœ .quit âœ exit æ³¨æ„æ­¤å‘½ä»¤ä¸ä¸Šé¢é€€å‡ºæ•°æ®åº“çš„å‘½ä»¤æ˜¯ä¸ä¸€æ ·çš„ï¼Œé€€å‡º Shell ä¸éœ€è¦åŠ  . ç¬¦å·ã€‚ ","link":"https://LiarrDev.github.io/post/Query-the-SQLite-Database-with-ADB/"},{"title":"ä½ çš„ Log è¢«æˆªæ–­äº†å—ï¼Ÿ","content":"ä¸ºäº†æ–¹ä¾¿è°ƒè¯•ï¼Œè®¸å¤šå¼€å‘è€…éƒ½ä¼šä¹ æƒ¯ç”¨ Log æ‰“å°ç½‘ç»œè¯·æ±‚å“åº”çš„å†…å®¹ï¼Œè€Œä¸æ˜¯ä½¿ç”¨å…¶ä»–å·¥å…·ã€‚ ä½†æ˜¯åœ¨æ‰“å°æ—¥å¿—æ—¶ï¼Œä½ å¯èƒ½ä¼šé‡åˆ°æ—¥å¿—æ˜¾ç¤ºä¸å®Œæ•´çš„æƒ…å†µï¼Œæ¯”å¦‚å“åº”çš„ JSON æ•°æ®åœ¨ä¸­é—´è¢«æˆªæ–­äº†ã€‚ æœ‰äººå¯èƒ½ä¼šè®¤ä¸ºæ˜¯å­—ç¬¦ä¸²è¶…é•¿çš„é—®é¢˜ï¼Œä¸è¿‡å›æƒ³ã€Java String é•¿åº¦é™åˆ¶ã€å°±å¯ä»¥åˆ¤æ–­å‡ºè¿™ä¸ªé—®é¢˜å¹¶ä¸æ˜¯ç”±äº String çš„é•¿åº¦é™åˆ¶å¯¼è‡´çš„ï¼Œé‚£å°±åªèƒ½æ˜¯ Android çš„ Log é™åˆ¶ã€‚ ä» Android å†…æ ¸æºç æ¥çœ‹ï¼Œæœ‰ä»¥ä¸‹å®å®šä¹‰ï¼š #define LOGGER_ENTRY_MAX_LEN (4*1024) #define LOGGER_ENTRY_MAX_PAYLOAD (LOGGER_ENTRY_MAX_LEN - sizeof(struct logger_entry)) Android ç³»ç»Ÿå¯¹æ—¥å¿—é•¿åº¦æœ‰é™åˆ¶ï¼Œæœ€å¤§é•¿åº¦ä¸º 4Kï¼Œè¶…è¿‡è¿™ä¸ªèŒƒå›´çš„è‡ªåŠ¨æˆªæ–­ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°æ‰“å°ä¸å…¨çš„æƒ…å†µã€‚ æ—¢ç„¶ä¸€æ¬¡åªèƒ½æ‰“å° 4K é•¿åº¦çš„ä¿¡æ¯ï¼Œé‚£å¾ˆå®¹æ˜“æƒ³åˆ°å°†å¾…æ‰“å°çš„ä¿¡æ¯æ‹†åˆ†æˆä¸€ä¸ªä¸ªä¿¡æ¯æ®µï¼Œç„¶ååˆ†åˆ«æ‰“å°å³å¯ã€‚ å®é™…æµ‹è¯•å‘ç°ï¼Œæ—¥å¿—çš„æœ€å¤§é•¿åº¦å…¶å®ç•¥å°äº 4*1024ã€‚ä¸ºäº†ä¿é™©èµ·è§ï¼Œå¯ä»¥è®¾ç½®æ¯ä¸€æ®µæ—¥å¿—é•¿åº¦ä¸º 3*1024ã€‚å¦‚æœå¾…æ‰“å°çš„å­—ç¬¦ä¸²ä¿¡æ¯é•¿åº¦å°äºç­‰äº 3*1024ï¼Œåˆ™ç›´æ¥æ‰“å°å³å¯ï¼Œå¦åˆ™å°†æ—¥å¿—ä¿¡æ¯æˆªæ–­ä¸ºä¸€æ®µä¸€æ®µåˆ†åˆ«æ‰“å°ã€‚ public class LogUtil { private static final int LOGGER_MAX_LENGTH = 3 * 1024; public static void i(@NonNull String tag, @NonNull String msg) { if (msg.length() &gt; LOGGER_MAX_LENGTH) { while (msg.length() &gt; LOGGER_MAX_LENGTH) { Log.i(tag, msg.substring(0, LOGGER_MAX_LENGTH)); msg = msg.substring(LOGGER_MAX_LENGTH); } } Log.i(tag, msg); } } ä¸€èˆ¬æƒ…å†µä¸‹ä¼šå¯¹æ—¥å¿—å·¥å…·ç±»åšäº†å°è£…ï¼Œå¯å‚è€ƒä¹‹å‰ã€å®šåˆ¶ Android æ—¥å¿—å·¥å…·ã€ä¸€æ–‡åšç»„åˆä½¿ç”¨ã€‚ ","link":"https://LiarrDev.github.io/post/Has-Your-Log-been-Truncated/"},{"title":"å»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„åŒå¼•å·","content":"ä¹‹å‰ã€WebView è·å– JavaScript ä¸åŒç±»å‹è¿”å›å€¼çš„æ³¨æ„äº‹é¡¹ã€ä¸€æ–‡ä¸­æåˆ°äº†å½“è¿”å›ç±»å‹ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç»™å­—ç¬¦ä¸²é¦–å°¾åŠ ä¸ŠåŒå¼•å· &quot;ï¼Œé‚£æˆ‘ä»¬ä½¿ç”¨çš„æ—¶å€™å½“ç„¶å°±è¦æŠŠè¿™ä¸ªå¤šä½™çš„åŒå¼•å·ç»™å»æ‰ã€‚ ä»Šå¤©å°±æ¥è®²è®²å»é™¤å­—ç¬¦ä¸²é¦–å°¾åŒå¼•å·çš„å‡ ç§æ–¹æ³•ã€‚ ç›´æ¥æ›¿æ¢ æœ€ç®€å•çš„æ–¹å¼ï¼Œå°±æ˜¯ç›´æ¥åˆ©ç”¨ String ç±»çš„ replace() æ–¹æ³•ç›´æ¥æ›¿æ¢åŒå¼•å·ï¼š fun String.trimQuotes() = this.replace(&quot;\\&quot;&quot;, &quot;&quot;) ä½†æ˜¯æ­¤æ–¹æ³•ååˆ†ä¸æ¨èï¼Œå› ä¸ºå®ƒæœ‰é‡å¤§ç¼ºé™·ï¼Œå½“è¿™ä¸ªå­—ç¬¦ä¸²å†…æœ¬èº«å°±æœ‰åŒå¼•å·æ—¶ï¼ˆæ¯”å¦‚ JSON å­—ç¬¦ä¸²ï¼‰ï¼Œä¹Ÿä¼šè¢«æ›¿æ¢æ‰ã€‚ æ‰€ä»¥ä½¿ç”¨æ—¶ä½ éœ€ç¡®ä¿å­—ç¬¦ä¸²å†…é™¤æœ€å¤–å±‚çš„å¤šä½™åŒå¼•å·å¤–ä»»ä½•ä½ç½®éƒ½ä¸åŒ…å«åŒå¼•å·ã€‚ Kotlin æ‰©å±•å‡½æ•° æˆ‘ä»¬çŸ¥é“ Java ä¸­æœ‰ä¸€ä¸ªå¸¸ç”¨çš„æ–¹æ³• trim()ï¼Œå¯ä»¥å»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„ç©ºç™½å­—ç¬¦ã€‚Kotlin ç»™ String æ·»åŠ äº†ä¸€ä¸ªå¸¦å‚æ•°çš„æ‰©å±•å‡½æ•°ï¼š /** * Returns a string having leading and trailing characters from the [chars] array removed. */ public fun String.trim(vararg chars: Char): String = trim { it in chars } é‚£æˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ‰©å±•å‡½æ•°å®ç°ï¼š fun String.trimQuotes() = this.trim('\\&quot;') è¯¥æ–¹æ³•è™½ç„¶æ–¹ä¾¿ï¼Œä½†æˆ‘åŒæ ·ä¸æ¨èã€‚ å›æƒ³ Java ä¸­çš„ trim() æ–¹æ³•ï¼Œå®ƒä¼šæ¸…é™¤æ‰å‰åçš„æ‰€æœ‰ç©ºç™½å­—ç¬¦ï¼ŒKotlin çš„è¯¥æ‰©å±•å‡½æ•°ä¹Ÿæ˜¯ä¸€æ ·ï¼Œå®ƒä¼šæ¸…é™¤æ‰å­—ç¬¦ä¸²é¦–å°¾çš„æ‰€æœ‰ç»™å®šå­—ç¬¦ï¼Œå³å¦‚æœä½ çš„å­—ç¬¦ä¸²æœ¬èº«é™¤äº†æœ¬åº”å»é™¤çš„åŒå¼•å·å¤–ï¼Œé¦–å°¾ä»æœ‰åŒå¼•å·çš„è¯ï¼Œä¹Ÿä¼šè¢«æ¸…é™¤æ‰ã€‚ æ‰€ä»¥ä½¿ç”¨æ—¶ä½ éœ€ç¡®ä¿å­—ç¬¦ä¸²å†…å¤´å°¾é™¤æœ€å¤–å±‚çš„å¤šä½™åŒå¼•å·å¤–éƒ½ä¸åŒ…å«åŒå¼•å·ã€‚ Guava Kotlin è™½ç„¶é¦™ï¼Œä½†å¾ˆå¤š Java é¡¹ç›®å› ä¸ºå„ç§åŸå› ä¸èƒ½è½»æ¾æ¥å…¥ã€‚ä¸æ€•ï¼Œæˆ‘ä»¬è¿˜æœ‰ Guavaï¼Œå®ƒæ˜¯æ¥è‡ª Google çš„æ ¸å¿ƒ Java åº“ï¼Œæ˜¯å¯¹ Java API çš„è¡¥å……ã€‚ private String trimQuotes(String s) { return CharMatcher.is('\\&quot;').trimFrom(s); } çœ‹åˆ°è¯¥æ–¹æ³•çš„åå­—å°±çŸ¥é“ï¼Œå®ƒä¸ä¸Šæ–¹çš„ Kotlin æ‰©å±•å‡½æ•°ä¸€æ ·ï¼Œå¸ˆå‡ºåŒæºï¼Œæ‰€ä»¥ä¹ŸåŒæ ·éœ€è¦ç¡®ä¿å­—ç¬¦ä¸²å†…å¤´å°¾é™¤æœ€å¤–å±‚çš„å¤šä½™åŒå¼•å·å¤–éƒ½ä¸åŒ…å«åŒå¼•å·ã€‚ æ­£åˆ™ éš¾é“å°±æ²¡æœ‰ä»…ä»…è£å‰ªæœ€å¤–å±‚åŒå¼•å·çš„æ–¹æ³•äº†å—ï¼Ÿ åˆ«æ…Œï¼Œæˆ‘ä»¬è¿˜æœ‰æ­£åˆ™ï¼ fun String.trimQuotes() = this.replace(&quot;^\\&quot;|\\&quot;$&quot;.toRegex(), &quot;&quot;) åŒæ ·æ˜¯åˆ©ç”¨ String ç±»çš„ replace() æ–¹æ³•ï¼Œåªéœ€è¦åŠ ä¸Šæ­£åˆ™è¡¨è¾¾å¼å»åŒ¹é…é¦–å°¾çš„åŒå¼•å·ï¼Œå°±èƒ½é¿å…ä¸Šé¢çš„é—®é¢˜ã€‚ æ€»ç»“ æœ¬æ–‡ä»‹ç»äº† 4 ç§å»é™¤å­—ç¬¦ä¸²é¦–å°¾çš„åŒå¼•å·çš„æ–¹æ³•ï¼Œç”±ç®€å…¥ç¹ï¼Œå‰é¢çš„æ–¹æ³•è™½ç„¶ç®€å•ï¼Œä½†éœ€è¦è€ƒè™‘å®é™…ä½¿ç”¨åœºæ™¯ï¼Œæ­£åˆ™èƒ½å¤Ÿå®Œç¾å®ç°éœ€æ±‚ï¼Œä½†æ˜¯å¯¹äºè®¸å¤šå¼€å‘è€…æ¥è¯´ä»æœ‰ä¸€å®šé—¨æ§›ã€‚ å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥åˆç†é€‰æ‹©å¯¹åº”çš„æ–¹æ³•ï¼Œåªè¦èƒ½ç¡®ä¿ä½¿ç”¨æ—¶ä¸ä¼šè§¦å‘åˆ°ä¸Šæ–¹çš„æ³¨æ„äº‹é¡¹ï¼Œé‚£ç”¨æœ€ç®€å•çš„æ–¹æ³•åŒæ ·èƒ½å¤Ÿæé«˜æ•ˆç‡ã€‚ ","link":"https://LiarrDev.github.io/post/Trim-Quotes-from-Head-and-Tail-of-a-String/"},{"title":"WebView å¤„ç† JavaScript ä¸åŒç±»å‹è¿”å›å€¼çš„æ³¨æ„äº‹é¡¹","content":"ä¹‹å‰åœ¨ã€Android WebView å’Œ JavaScript äº¤äº’ã€ä¸€æ–‡ä¸­ç•™äº†ä¸€ä¸ªå‘æ²¡å¡«ï¼Œå°±æ˜¯å½“ Android è°ƒç”¨ JavaScript è·å–è¿”å›å€¼æ—¶ï¼Œè¿”å›å€¼æ˜¯å­—ç¬¦ä¸²ä¸å¦ä¹Ÿä¼šæœ‰ä¸åŒçš„æƒ…å†µã€‚ æœ‰äººå¯èƒ½å°±æœ‰ç–‘æƒ‘äº†ï¼Œå› ä¸ºæ–‡ç« ä¹ŸåŒæ ·æåˆ°ï¼Œè¿”å›å€¼æœ¬èº«å°±è¢«é™å®šä¸º String ç±»å‹ã€‚ æ²¡é”™ï¼ŒevaluateJavascript() æ–¹æ³•ä¸­çš„ ValueCallback æœ¬èº«å°±åšäº†æ³›å‹çš„é™å®šï¼š @Widget public class WebView extends AbsoluteLayout implements ViewTreeObserver.OnGlobalFocusChangeListener, ViewGroup.OnHierarchyChangeListener, ViewDebug.HierarchyHandler { ... public void evaluateJavascript(@NonNull String script, @Nullable ValueCallback&lt;String&gt; resultCallback) { checkThread(); mProvider.evaluateJavaScript(script, resultCallback); } } é‚£ä¹ˆï¼Œå‡å¦‚è¿”å›å€¼ä¸ä¸ºå­—ç¬¦ä¸²æ—¶ï¼Œä¼šè¿”å›ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥åŠ¨æ‰‹å°è¯•ä¸€ä¸‹ã€‚ æ¯”å¦‚åŒæ ·æ˜¯ã€Android WebView å’Œ JavaScript äº¤äº’ã€ä¸€æ–‡ä¸­çš„ä¾‹å­ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; function sum(m, n) { return m + n } &lt;/script&gt; ... &lt;/html&gt; class WebActivity : AppCompatActivity() { ... private fun checkInt() { webView.evaluateJavascript(&quot;sum(3, 2)&quot;) { result -&gt; Log.d(TAG, result) // Log: 5 } } } æˆ‘ä»¬ç”¨ Log æ‰“å°å‡ºæ¥æ˜¯ 5ï¼Œè®°ä½å®ƒä¸æ˜¯æ•°å­— 5ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³ result = &quot;5&quot;ã€‚ å†æ¥çœ‹çœ‹å¸ƒå°”ç±»å‹ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; function checkBoolean() { return true } &lt;/script&gt; ... &lt;/html&gt; class WebActivity : AppCompatActivity() { ... private fun checkBoolean() { webView.evaluateJavascript(&quot;checkBoolean()&quot;) { result -&gt; Log.e(TAG, result) // Log: true } } } æˆ‘ä»¬ç”¨ Log æ‰“å°å‡ºæ¥æ˜¯ trueï¼Œè®°ä½å®ƒä¸æ˜¯å¸ƒå°”å€¼ trueï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³ result = &quot;true&quot;ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹å¯¹è±¡ï¼Œç”¨ä¹‹å‰åœ¨ã€Android è·å– WebView é€‰åŒºä½ç½®ã€ä¹Ÿæœ‰ç±»ä¼¼çš„ä¾‹å­ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; function checkObj() { var json = {}; json.name = &quot;json&quot;; return json } &lt;/script&gt; ... &lt;/html&gt; class WebActivity : AppCompatActivity() { ... private fun checkObj() { webView.evaluateJavascript(&quot;checkObj()&quot;) { result -&gt; Log.e(TAG, result) // Log: {&quot;name&quot;:&quot;json&quot;} } } } æˆ‘ä»¬ç”¨ Log æ‰“å°å‡ºæ¥æ˜¯ {&quot;name&quot;:&quot;json&quot;}ï¼Œè®°ä½å®ƒä¸æ˜¯ JSON å¯¹è±¡ï¼Œè€Œæ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå³ result = &quot;{\\&quot;name\\&quot;:\\&quot;json\\&quot;}&quot;ã€‚ æœ€åï¼Œæˆ‘ä»¬çœ‹çœ‹å­—ç¬¦ä¸²ç±»å‹ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; function sayHi() { return &quot;Hi&quot; } &lt;/script&gt; ... &lt;/html&gt; class WebActivity : AppCompatActivity() { ... private fun checkObj() { webView.evaluateJavascript(&quot;sayHi()&quot;) { result -&gt; Log.e(TAG, result) // Log: &quot;Hi&quot; } } } æˆ‘ä»¬ç”¨ Log æ‰“å°å‡ºæ¥æ˜¯ &quot;Hi&quot;ï¼Œè€Œä¸æ˜¯ Hiï¼Œå³ result = &quot;\\&quot;Hi\\&quot;&quot;ã€‚ å‘ç°æ²¡æœ‰ï¼Œå½“ JavaScript è¿”å›å€¼ä¸ºå­—ç¬¦ä¸²æ—¶ï¼ŒAndroid ç«¯ä¼šåœ¨è¯¥å­—ç¬¦ä¸²å‰åå¸¦ä¸ŠåŒå¼•å· &quot;ï¼Œè€Œå½“è¿”å›å€¼ä¸ºéå­—ç¬¦ä¸²æ—¶ï¼Œåˆ™ä¼šç›´æ¥è½¬ä¸ºæ­£å¸¸çš„å­—ç¬¦ä¸²è¿”å›ã€‚ è¿™æ ·è®¾è®¡çš„ç”¨æ„ä¹Ÿè®¸æ˜¯ ValueCallback çš„æ³›å‹æŒ‡å®šä¸º String åèƒ½å¤Ÿæ›´å¥½çš„åŒºåˆ†è¿”å›å€¼çš„ç±»å‹ï¼Œä½†æ— ç–‘ä¼šç»™ä½¿ç”¨è€…é€ æˆä½¿ç”¨ä¸Šçš„éº»çƒ¦ï¼Œæ‰€ä»¥ä½¿ç”¨æ—¶åº”å¤šåŠ æ³¨æ„ã€‚ ","link":"https://LiarrDev.github.io/post/Handle-Different-Types-of-JavaScript-Return-Values-in-WebView/"},{"title":"Android è·å– WebView é€‰åŒºä½ç½®","content":"ä¹‹å‰æˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•è·å– WebView é€‰ä¸­çš„æ–‡æœ¬ï¼Œä»Šå¤©è®²è®²å¦‚ä½•è·å–é€‰åŒºçš„ä½ç½®ã€‚ ä¸è·å–é€‰ä¸­æ–‡æœ¬ç±»ä¼¼ï¼ŒWebView ä¹Ÿæ²¡æœ‰æä¾›ç›¸åº”çš„æ–¹æ³•ï¼Œæ‰€ä»¥åŒæ ·éœ€è¦é€šè¿‡ JS è¾…åŠ©ã€‚ ä¸ºäº†æ–¹ä¾¿ï¼Œå¯ä»¥ç›´æ¥åœ¨ã€Android è·å– WebView é€‰ä¸­æ–‡æœ¬ã€ä¸€æ–‡ä¸­çš„ä¾‹å­ä¸Šç›´æ¥æ”¹é€ ã€‚ é¦–å…ˆæ˜¯ JS å‡½æ•°ï¼š object JsFunction { private val GET_SELECTION = &quot;&quot;&quot; javascript:(function getSelectedText() { var txt; var top = 0, bottom = 0, left = 0, right = 0; if (window.getSelection) { var sel = window.getSelection(); txt = sel.toString(); var range = sel.getRangeAt(0); var rect = range.getBoundingClientRect(); top = rect.top; bottom = rect.bottom; left = rect.left; right = rect.right; } else if (window.document.getSelection) { var sel = window.document.getSelection(); txt = sel.toString(); var range = sel.getRangeAt(0); var rect = range.getBoundingClientRect(); top = rect.top; bottom = rect.bottom; left = rect.left; right = rect.right; } else if (window.document.selection) { var range = window.document.selection.createRange(); txt = range.text; var rect = range.getBoundingClientRect(); top = rect.top; bottom = rect.bottom; left = rect.left; right = rect.right; } var json = {}; json.selection = txt; json.left = left; json.top = top; json.right = right; json.bottom = bottom; json.windowWidth = window.innerWidth; json.windowHeight = window.innerHeight return json; })() &quot;&quot;&quot;.trimIndent() } åœ¨ä¹‹å‰çš„å‡½æ•°ä¸Šï¼Œæˆ‘ä»¬å¢åŠ äº†é€‰åŒºä¸Šä¸‹å·¦å³å››ä¸ªæ–¹å‘çš„è¾¹è·ï¼Œç”¨äºè®¡ç®—é€‰åŒºçš„ä½ç½®ï¼Œå¤§æ¦‚æ€è·¯å°±æ˜¯è·å–åˆ°é€‰åŒºçš„ Rectï¼Œç„¶åå†è·å–å…¶åæ ‡ï¼Œæ€è·¯ä¸ Android æ˜¯ç±»ä¼¼çš„ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒJS åªèƒ½è·å–åˆ°å…¶ç›¸å¯¹äºç½‘é¡µçª—å£çš„åæ ‡ï¼Œä¸ Android ç«¯çš„åæ ‡å¹¶ä¸æ˜¯ä¸€ä¸ªæ¦‚å¿µï¼Œæ‰€ä»¥åŒæ ·è¿˜è¦è¿”å›çª—å£çš„å¤§å°ç”¨äºæ¢ç®—ã€‚ è¿”å›çš„å†…å®¹æ¯”è¾ƒå¤šï¼Œæˆ‘ä»¬å°†å…¶å°è£…æˆ JSON è¿”å›ã€‚ ç„¶åå®šä¹‰ä¸€ä¸ªæ•°æ®ç±»ç”¨äºè§£æè¿”å›çš„æ•°æ®ï¼š object JsFunction { ... data class WebViewSelection( val selection: String, val left: Double, val top: Double, val right: Double, val bottom: Double, val windowWidth: Double, val windowHeight: Double ) } è§£ææ•°æ®å¯ä»¥ç”¨ Gson æˆ–å…¶ä»–å·¥å…·å°è£…ä¸€ä¸‹ï¼š object JsFunction { ... fun getSelection(webView: WebView, callback: (WebViewSelection?) -&gt; Unit) { webView.evaluateJavascript(GET_SELECTION) { callback.invoke(Gson().fromJson(it, WebViewSelection::class.java)) } } } WebView è¿™è¾¹æ‰§è¡Œï¼š class MyWebView(context: Context, attrs: AttributeSet? = null) : WebView(context, attrs) { ... private fun getWebSelection() { JsFunction.getSelection(this) { if (it == null) return@getSelection val left = (it.left / it.windowWidth * width).toInt() val right = (it.right / it.windowWidth * width).toInt() val top = (it.top / it.windowHeight * height).toInt() val bottom = (it.bottom / it.windowHeight * height).toInt() ... } } } å› ä¸ºåæ ‡ä¸ä¸€è‡´ï¼Œæ‰€ä»¥è¦é‡æ–°è®¡ç®—åæ ‡ï¼Œç®€å•çš„æ¯”ä¾‹ä¹˜é™¤é—®é¢˜ï¼Œä¸ç”¨è¿‡å¤šè§£é‡Šã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥æŒ‰ç…§è‡ªå·±çš„éœ€æ±‚åšç›¸åº”çš„é€»è¾‘äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Get-Selection-Position-in-Android-WebView/"},{"title":"Android è·å– WebView é€‰ä¸­æ–‡æœ¬","content":"WebView æ˜¯ç”¨æ¥å±•ç¤ºç½‘é¡µå†…å®¹çš„æ§ä»¶ï¼Œæˆ‘ä»¬ä¹Ÿå¸¸å¸¸ä¼šå¯¹ç½‘é¡µçš„æ–‡æœ¬è¿›è¡Œé€‰ä¸­å¤åˆ¶åˆ†äº«ç­‰ç­‰çš„æ“ä½œã€‚ é‚£ä¹ˆåœ¨å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•è·å–ç”¨æˆ·é€‰ä¸­çš„æ–‡æœ¬å‘¢ï¼Ÿ å®é™…ä¸Šï¼ŒWebView å¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æä¾›ç›¸åº”çš„ APIï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å¾—ä¸å¦è¾Ÿè¹Šå¾„ã€‚ æ¢ä¸ªæ€è·¯ï¼Œæ—¢ç„¶ Android ç«¯æ— æ³•ç›´æ¥è·å–åˆ°é€‰ä¸­çš„å†…å®¹ï¼Œé‚£å°±ä» Web ç«¯è·å–ã€‚è¿™æ—¶å€™å¯èƒ½ä¼šæœ‰ä¸€ä¸ªé—®é¢˜ï¼ŒWebView åŠ è½½çš„ç½‘é¡µæœªå¿…éƒ½æ˜¯æˆ‘ä»¬è‡ªå·±æˆ–è€…å›¢é˜Ÿå†…éƒ¨å¼€å‘çš„ï¼Œæ‰€ä»¥ä¸ä¸€å®šèƒ½è®©ç¬¬ä¸‰æ–¹çš„ç½‘ç«™ä¹Ÿä¸ºæˆ‘ä»¬é€‚é…è¿™ç§åŠŸèƒ½ï¼Œä¸è¿‡ä¸ç”¨æ‹…å¿ƒï¼Œå‡å¦‚æˆ‘ä»¬é€šè¿‡å®¢æˆ·ç«¯æ³¨å…¥ JS çš„æ–¹å¼ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå°±è¿åˆƒè€Œè§£äº†ã€‚ é¦–å…ˆæ˜¯ JS å‡½æ•°ï¼š object JsFunction { fun getSelection() = &quot;&quot;&quot; javascript:(function getSelectedText() { var txt; if (window.getSelection) { txt = window.getSelection().toString(); } else if (window.document.getSelection) { txt = window.document.getSelection().toString(); } else if (window.document.selection) { txt = window.document.selection.createRange().text; } return txt; })() &quot;&quot;&quot;.trimIndent() } å› ä¸º Java çš„å­—ç¬¦ä¸²æ‹¼æ¥æ–¹å¼ä¸å¤ªç›´è§‚ï¼Œæ‰€ä»¥æˆ‘è¿™é‡Œç”¨ Kotlin æ¥å†™ï¼Œè¿™ä¸ª JS å‡½æ•°ç›¸ä¿¡ä¹Ÿè¶³å¤Ÿç®€å•æ˜“æ‡‚ï¼Œé€šè¿‡è·å–é€‰åŒºï¼Œç„¶åå†è·å–é€‰åŒºå†…çš„æ–‡å­—å¹¶è¿”å›ã€‚ ç„¶åå°±æ˜¯åˆ©ç”¨ä¹‹å‰ã€Android WebView å’Œ JavaScript äº¤äº’ã€è®²è¿‡çš„æ–¹æ³•æ‰§è¡Œï¼š class MyWebView(context: Context, attrs: AttributeSet? = null) : WebView(context, attrs) { ... private fun getSelection() { evaluateJavascript(JsFunction.getSelection()) { selectedText -&gt; // do what you want } } } æ¥ä¸‹æ¥å°±å¯ä»¥æ‹¿åˆ°é€‰ä¸­çš„æ–‡å­—æ‰§è¡Œè‡ªå·±çš„é€»è¾‘äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Get-Selection-Text-in-Android-WebView/"},{"title":"Java String é•¿åº¦é™åˆ¶","content":"åœ¨å­¦ä¹ å’Œå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šè®¨è®º shortã€int å’Œ long è¿™äº›åŸºæœ¬æ•°æ®ç±»å‹çš„å–å€¼èŒƒå›´ï¼Œä½†æ˜¯å¯¹äº String ç±»å‹æˆ‘ä»¬å¥½åƒå¾ˆå°‘æ³¨æ„å®ƒçš„â€œå–å€¼èŒƒå›´â€ã€‚ é‚£ä¹ˆï¼Œå¯¹äº String ç±»å‹ï¼Œå®ƒåˆ°åº•æœ‰æ²¡æœ‰é•¿åº¦é™åˆ¶ï¼Ÿ å…¶å® String ç±»å‹çš„å¯¹è±¡ï¼Œä»–ä»¬æ˜¯æœ‰é•¿åº¦é™åˆ¶çš„ï¼ŒString å¯¹è±¡å¹¶ä¸èƒ½å­˜å‚¨æ— é™é•¿åº¦çš„å­—ç¬¦ä¸²ã€‚å…³äº String çš„é•¿åº¦é™åˆ¶è¦ä»ç¼–è¯‘æ—¶é™åˆ¶å’Œè¿è¡Œæ—¶é™åˆ¶ä¸¤æ–¹é¢è€ƒè™‘ã€‚ ç¼–è¯‘æœŸé™åˆ¶ æœ‰ JVM è™šæ‹Ÿæœºç›¸å…³çŸ¥è¯†çš„åŒå­¦è‚¯å®šçŸ¥é“ï¼Œå®šä¹‰çš„å­—ç¬¦ä¸²å¸¸é‡ä¼šè¢«æ”¾å…¥æ–¹æ³•åŒºçš„å¸¸é‡æ± ä¸­ã€‚ String é•¿åº¦ä¹‹æ‰€ä»¥ä¼šå—é™åˆ¶ï¼Œæ˜¯å›  JVM è§„èŒƒå¯¹å¸¸é‡æ± æœ‰æ‰€é™åˆ¶ã€‚å¸¸é‡æ± ä¸­çš„æ¯ä¸€ç§æ•°æ®é¡¹éƒ½æœ‰è‡ªå·±çš„ç±»å‹ï¼ŒCONSTANT_String_info ç”¨äºè¡¨ç¤º String ç±»å‹çš„å¸¸é‡å¯¹è±¡ï¼Œç»“æ„å¦‚ä¸‹ï¼š CONSTANT_String_info { u1 tag; u2 string_index; } å…¶ä¸­ï¼Œstring_index é¡¹çš„å€¼å¿…é¡»æ˜¯å¯¹å¸¸é‡æ± çš„æœ‰æ•ˆç´¢å¼•ï¼Œå¸¸é‡æ± åœ¨è¯¥ç´¢å¼•å¤„çš„é¡¹å¿…é¡»æ˜¯ CONSTANT_Utf8_info ç»“æ„ï¼Œè¡¨ç¤ºä¸€ç»„ Unicode ç ç‚¹åºåˆ—ï¼Œè¿™ç»„ Unicode ç ç‚¹åºåˆ—æœ€ç»ˆä¼šè¢«åˆå§‹åŒ–ä¸€ä¸ª String å¯¹è±¡ã€‚ å³ Java ä¸­çš„ UTF-8 ç¼–ç çš„ Unicode å­—ç¬¦ä¸²åœ¨å¸¸é‡æ± ä¸­ä»¥ CONSTANT_Utf8_info ç±»å‹è¡¨ç¤ºï¼Œç»“æ„å¦‚ä¸‹ï¼š CONSTANT_Utf8_info { u1 tag; u2 length; u1 bytes[length]; } é•¿åº¦ä¸º length çš„é‚£ä¸ª bytes æ•°ç»„å°±æ˜¯çœŸæ­£å­˜å‚¨å¸¸é‡æ•°æ®çš„åœ°æ–¹ï¼Œè€Œ length å°±æ˜¯æ•°ç»„å¯ä»¥å­˜å‚¨çš„æœ€å¤§å­—èŠ‚æ•°ã€‚length çš„ç±»å‹æ˜¯ u2ï¼Œu2 è¡¨ç¤ºä¸¤ä¸ªå­—èŠ‚çš„æ— ç¬¦å·æ•°ï¼Œå³æ— ç¬¦å·çš„ 16 ä½æ•´æ•°ï¼Œå› æ­¤ç†è®ºä¸Šå…è®¸çš„çš„æœ€å¤§é•¿åº¦æ˜¯ 2^16-1ï¼Œæ‰€ä»¥ä¸Šé¢ byte æ•°ç»„çš„æœ€å¤§é•¿åº¦å¯ä»¥æ˜¯ 65535ã€‚ ä½†æ˜¯å½“ä½ ä¼å›¾ç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º 65535 çš„å­—ç¬¦ä¸²æ—¶ï¼Œç¼–è¯‘ä¾ç„¶ä¼šå¤±è´¥ï¼Œè€Œç”Ÿæˆä¸€ä¸ªé•¿åº¦ä¸º 65534 çš„å­—ç¬¦ä¸²å´ç¼–è¯‘æˆåŠŸï¼Œè¿™ä¼¼ä¹ä¸ä¸Šé¢çš„ç»“è®ºä¸ç¬¦ã€‚ å…¶å®ï¼Œè¿™æ˜¯ Javac ç¼–è¯‘å™¨çš„é¢å¤–é™åˆ¶ã€‚åœ¨ Javac çš„æºä»£ç ä¸­å¯ä»¥æ‰¾åˆ°ä»¥ä¸‹æ–¹æ³•ï¼š public class Gen extends JCTree.Visitor { ... /** Check a constant value and report if it is a string that is too large. */ private void checkStringConstant(DiagnosticPosition pos, Object constValue) { if (nerrs != 0 || // only complain about a long string once constValue == null || !(constValue instanceof String) || ((String)constValue).length() &lt; PoolWriter.MAX_STRING_LENGTH) return; log.error(pos, Errors.LimitString); nerrs++; } } è¿˜æœ‰ä¸€ä¸ªæœ€é‡è¦çš„å¸¸é‡ï¼š public class PoolWriter { /** Max number of char in a string constant. */ public static final int MAX_STRING_LENGTH = 0xFFFF; ... } 0xFFFF å°±æ˜¯åè¿›åˆ¶çš„ 65535ã€‚ ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“å‚æ•°ç±»å‹ä¸º Stringï¼Œå¹¶ä¸”é•¿åº¦å¤§äºç­‰äº 65535 çš„æ—¶å€™ï¼Œå°±ä¼šå¯¼è‡´ç¼–è¯‘å¤±è´¥ã€‚ è¿™é‡Œéœ€è¦é‡ç‚¹å¼ºè°ƒä¸‹çš„æ˜¯ï¼ŒString çš„é™åˆ¶å¹¶ä¸æ˜¯å¯¹å­—ç¬¦ä¸²é•¿åº¦çš„é™åˆ¶ï¼Œè€Œæ˜¯å¯¹å­—ç¬¦ä¸²åº•å±‚å­˜å‚¨çš„é™åˆ¶ï¼Œä¹Ÿå°±æ˜¯å­—èŠ‚é•¿åº¦çš„é™åˆ¶ã€‚ ä¸¾ä¸ªä¾‹å­ï¼ŒJava ä¸­çš„å­—ç¬¦å¸¸é‡éƒ½æ˜¯ä½¿ç”¨ UTF-8 ç¼–ç çš„ï¼ŒUTF-8 ç¼–ç ä½¿ç”¨ 1~4 ä¸ªå­—èŠ‚æ¥è¡¨ç¤ºå…·ä½“çš„ Unicode å­—ç¬¦ã€‚æ‰€ä»¥æœ‰çš„å­—ç¬¦å ç”¨ä¸€ä¸ªå­—èŠ‚ï¼Œè€Œæˆ‘ä»¬å¹³æ—¶æ‰€ç”¨çš„å¤§éƒ¨åˆ†ä¸­æ–‡éƒ½éœ€è¦ 3 ä¸ªå­—èŠ‚æ¥å­˜å‚¨ï¼Œå¦å¤–è¿˜æœ‰çš„æ±‰å­—éœ€è¦ 4 ä¸ªå­—èŠ‚å­˜å‚¨ã€‚ // 65534 ä¸ªå­—æ¯â€œdâ€ï¼Œç¼–è¯‘é€šè¿‡ String s1 = &quot;dd..d&quot;; // 21845 ä¸ªä¸­æ–‡â€œè‡ªâ€ï¼Œç¼–è¯‘é€šè¿‡ String s2 = &quot;è‡ªè‡ª...è‡ª&quot;; // 1 ä¸ªè‹±æ–‡å­—æ¯â€œdâ€åŠ ä¸Š 21845 ä¸ªä¸­æ–‡â€œè‡ªâ€ï¼Œç¼–è¯‘å¤±è´¥ String s3 = &quot;dè‡ªè‡ª...è‡ª&quot;; å¯¹äº s1ï¼Œ1 ä¸ªå­—æ¯ d çš„ UTF-8 ç¼–ç å ç”¨ 1 ä¸ªå­—èŠ‚ï¼Œ65534 ä¸ªå­—æ¯å ç”¨ 65534 ä¸ªå­—èŠ‚ï¼Œé•¿åº¦æ˜¯ 65534ï¼Œä¹Ÿæ²¡è¶…è¿‡ Javac çš„é™åˆ¶ï¼Œæ‰€ä»¥å¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚ å¯¹äº s2ï¼Œ1 ä¸ªä¸­æ–‡å ç”¨ 3 ä¸ªå­—èŠ‚ï¼Œ21845 ä¸ªæ­£å¥½å ç”¨ 65535 ä¸ªå­—èŠ‚ï¼Œè€Œä¸”å­—ç¬¦ä¸²é•¿åº¦æ˜¯ 21845ï¼Œå¹¶æ²¡æœ‰è¶…è¿‡ Javac å¯¹é•¿åº¦çš„é™åˆ¶ï¼Œæ‰€ä»¥å¯ä»¥ç¼–è¯‘é€šè¿‡ã€‚ å¯¹äº s3ï¼Œ1 ä¸ªè‹±æ–‡å­—æ¯ d åŠ ä¸Š 21845 ä¸ªä¸­æ–‡å ç”¨ 65536 ä¸ªå­—èŠ‚ï¼Œè¶…è¿‡äº†é™åˆ¶ï¼Œç¼–è¯‘å¤±è´¥ã€‚ å›åˆ°ä¸€å¼€å§‹ï¼Œu2 ç±»å‹èƒ½è¡¨è¾¾çš„æœ€å¤§å€¼æ˜¯ 65535ï¼Œé•¿åº¦ 65535 çš„å­—ç¬¦ä¸²åœ¨ Javac ä¸‹æŠ¥é”™äº†æ˜¯å—åˆ°äº† Javac ç¼–è¯‘å™¨çš„é™åˆ¶ï¼Œå¦‚æœä½ å…ˆå°†é•¿åº¦ä¸º 65534 çš„å­—ç¬¦ä¸²ç”¨ Javac ç¼–è¯‘ï¼Œå†åœ¨ç”Ÿæˆçš„ CLASS æ–‡ä»¶ä¸­æ‰‹åŠ¨æ·»åŠ ä¸€ä¸ªå­—ç¬¦ï¼Œæ˜¯å¯ä»¥å¾—åˆ°é•¿åº¦ä¸º 65535 çš„ç»“æœã€‚ å¦å¤–ï¼Œä½¿ç”¨ã€Eclipseã€ç¼–è¯‘è¶…è¿‡ 65534 é•¿åº¦çš„å­—ç¬¦ä¸²ä¸æŠ¥é”™ï¼Œæ˜¯å› ä¸ºã€Eclipseã€æœ‰è‡ªå·±çš„ Java ç¼–è¯‘å™¨ï¼Œã€Eclipseã€ä½¿ç”¨è‡ªå·±çš„ç¼–è¯‘å™¨ï¼Œä¸»è¦åŸå› æ˜¯ JDT æ ¸å¿ƒå…·æœ‰æ¸è¿›å¼ç¼–è¯‘çš„èƒ½åŠ›ï¼Œè¿™æ„å‘³ç€å®ƒä¼šé€æ­¥ç¼–è¯‘ä»£ç ä¸­çš„æ›´æ”¹ï¼Œè¿™ä¹Ÿæ˜¯ã€Eclipseã€ä¸éœ€è¦ç¼–è¯‘æŒ‰é’®çš„åŸå› ï¼Œå› ä¸ºå®ƒä¼šåœ¨æ£€æµ‹åˆ°æ›´æ”¹æ—¶è‡ªåŠ¨ç¼–è¯‘ã€‚ä½† Oracle çš„ JDK ä¸æ”¯æŒå¢é‡ç¼–è¯‘ã€‚ è¿è¡Œæ—¶é™åˆ¶ String è¿è¡Œæ—¶çš„é™åˆ¶ä¸»è¦ä½“ç°åœ¨ String çš„æ„é€ å‡½æ•°ä¸Šï¼š public final class String implements Serializable, Comparable&lt;String&gt;, CharSequence { /** * Allocates a new {@code String} that contains characters from a subarray * of the character array argument. The {@code offset} argument is the * index of the first character of the subarray and the {@code count} * argument specifies the length of the subarray. The contents of the * subarray are copied; subsequent modification of the character array does * not affect the newly created string. * * @param value Array that is the source of characters * @param offset The initial offset * @param count The length * @throws IndexOutOfBoundsException If the {@code offset} and {@code count} arguments index characters outside the bounds of the {@code value} array */ public String(char value[], int offset, int count) { if (offset &lt; 0) { throw new StringIndexOutOfBoundsException(offset); } if (count &lt;= 0) { if (count &lt; 0) { throw new StringIndexOutOfBoundsException(count); } if (offset &lt;= value.length) { this.value = &quot;&quot;.value; return; } } // Note: offset or count might be near -1&gt;&gt;&gt;1. if (offset &gt; value.length - count) { throw new StringIndexOutOfBoundsException(offset + count); } this.value = Arrays.copyOfRange(value, offset, offset + count); } } count å€¼å°±æ˜¯å­—ç¬¦ä¸²çš„æœ€å¤§é•¿åº¦ï¼Œåœ¨ Java ä¸­ int çš„æœ€å¤§é•¿åº¦æ˜¯ 2^31-1ã€‚æ‰€ä»¥åœ¨è¿è¡Œæ—¶ï¼ŒString çš„æœ€å¤§é•¿åº¦æ˜¯ 2^31-1ã€‚ ä½†æ˜¯è¿™ä¸ªä¹Ÿæ˜¯ç†è®ºä¸Šçš„é•¿åº¦ï¼Œå®é™…çš„é•¿åº¦è¿˜è¦è·Ÿ JVM çš„å†…å­˜ç›¸å…³ï¼Œæœ€å¤§çš„å­—ç¬¦ä¸²ä¼šå ç”¨ (2^31-1)*2*16/8/1024/1024/1024 çš„å†…å­˜ï¼ˆchar åœ¨ Java ä¸­å  2 ä¸ªå­—èŠ‚ï¼Œ16 æŒ‡ 16-bit Unicodecharacter å³ u2ï¼Œ8 æŒ‡ Bit è½¬ Byteï¼Œ1024 æŒ‡ KBã€MB å’Œ GB çš„å•ä½è½¬æ¢ï¼‰ã€‚ æ‰€ä»¥åœ¨æœ€åçš„æƒ…å†µä¸‹ï¼Œä¸€ä¸ªæœ€å¤§çš„å­—ç¬¦ä¸²è¦å ç”¨ 4GB çš„å†…å­˜ï¼Œå¦‚æœè™šæ‹Ÿæœºä¸èƒ½åˆ†é…è¿™ä¹ˆå¤šå†…å­˜çš„è¯ï¼Œä¼šç›´æ¥æŠ¥é”™çš„ã€‚ ä»¥ä¸Šæºç æ˜¯åŸºäº Java 8 çš„ï¼ŒJava 9 ä»¥åå¯¹ String çš„å­˜å‚¨è¿›è¡Œäº†ä¼˜åŒ–ã€‚åº•å±‚ä¸å†ä½¿ç”¨ char[] æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ï¼Œè€Œæ˜¯ä½¿ç”¨ byte[] æ•°ç»„ï¼Œå¯¹äº LATIN1 å­—ç¬¦çš„å­—ç¬¦ä¸²å¯ä»¥èŠ‚çœä¸€å€çš„å†…å­˜ç©ºé—´ï¼š public final class String implements Serializable, Comparable&lt;String&gt;, CharSequence { ... public String(char[] value, int offset, int count) { this(value, offset, count, rangeCheck(value, offset, count)); } String(char[] value, int off, int len, Void sig) { if (len == 0) { this.value = &quot;&quot;.value; this.coder = &quot;&quot;.coder; } else { if (COMPACT_STRINGS) { byte[] val = StringUTF16.compress(value, off, len); if (val != null) { this.value = val; this.coder = 0; return; } } this.coder = 1; this.value = StringUTF16.toBytes(value, off, len); } } } ç®€å•æ€»ç»“ String çš„é•¿åº¦æ˜¯æœ‰é™åˆ¶çš„ã€‚ ç¼–è¯‘æœŸçš„é™åˆ¶ï¼šå­—ç¬¦ä¸²çš„ UTF-8 ç¼–ç å€¼çš„å­—èŠ‚æ•°ä¸èƒ½è¶…è¿‡ 65535ï¼Œå­—ç¬¦ä¸²çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 65534ï¼› è¿è¡Œæ—¶é™åˆ¶ï¼šå­—ç¬¦ä¸²çš„é•¿åº¦ä¸èƒ½è¶…è¿‡ 2^31-1ï¼Œå ç”¨çš„å†…å­˜æ•°ä¸èƒ½è¶…è¿‡è™šæ‹Ÿæœºèƒ½å¤Ÿæä¾›çš„æœ€å¤§å€¼ã€‚ ","link":"https://LiarrDev.github.io/post/Length-Limitation-on-Java-String/"},{"title":"Let's party like it's 1995!","content":"æœ€è¿‘åœ¨çœ‹ LayoutInflater æºç çš„æ—¶å€™å‘ç°äº†ä¸€ä¸ªæœ‰æ„æ€çš„æ³¨é‡Šï¼š @SystemService(Context.LAYOUT_INFLATER_SERVICE) public abstract class LayoutInflater { ... private static final String TAG_1995 = &quot;blink&quot;; /** * Tries to create a view from a tag name using the supplied attribute set. * * @hide for use by precompiled layouts. * * @param parent the parent view, used to inflate layout params * @param name the name of the XML tag used to define the view * @param context the inflation context for the view, typically the {@code parent} or base layout inflater context * @param attrs the attribute set for the XML tag used to define the view */ @UnsupportedAppUsage(trackingBug = 122360734) @Nullable public final View tryCreateView(@Nullable View parent, @NonNull String name, @NonNull Context context, @NonNull AttributeSet attrs) { if (name.equals(TAG_1995)) { // Let's party like it's 1995! return new BlinkLayout(context, attrs); } ... } } å¯ä»¥çœ‹åˆ°ç¬¬äºŒä¸ªå‚æ•°æ˜¯æŒ‡å®šä¹‰ View çš„å¸ƒå±€ TAG åç§°ï¼Œå½“å®ƒä¸º TAG_1995 æ—¶ï¼Œç›´æ¥è¿”å›ä¸€ä¸ª BlinkLayoutï¼Œè€Œé‡ç‚¹åœ¨è¿™å¥çš„æ³¨é‡Šä¸Šï¼šâ€œLet's party like it's 1995!â€ è¿™å¥è¯ä¸­æ–‡ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šâ€œè®©æˆ‘ä»¬åƒ 1995 å¹´é‚£æ ·ç‹‚æ¬¢å§ï¼â€ TAG_1995 çš„å€¼å¯ä»¥çœ‹åˆ°æ˜¯ blinkï¼Œä¸­æ–‡æ˜¯é—ªçƒçš„æ„æ€ï¼Œæˆ‘ä»¬å†™ä¸ª Demo æ¥çœ‹çœ‹æ•ˆæœï¼š &lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;blink android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;TextView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:gravity=&quot;center&quot; android:text=&quot;Let's Party&quot; android:textSize=&quot;64sp&quot; /&gt; &lt;/blink&gt; &lt;/RelativeLayout&gt; æ•ˆæœå¦‚ä¸‹ï¼š æ¥ä¸‹æ¥çœ‹çœ‹å®ƒæ˜¯å¦‚ä½•å®ç°çš„ã€‚ BlinkLayout æ˜¯ LayoutInflater çš„å†…éƒ¨ç±»ï¼Œç»§æ‰¿è‡ª FrameLayoutï¼Œå®ç°å¹¶ä¸å¤æ‚ï¼Œå®Œæ•´ä»£ç å¦‚ä¸‹ï¼š @SystemService(Context.LAYOUT_INFLATER_SERVICE) public abstract class LayoutInflater { ... private static class BlinkLayout extends FrameLayout { private static final int MESSAGE_BLINK = 0x42; private static final int BLINK_DELAY = 500; private boolean mBlink; private boolean mBlinkState; private final Handler mHandler; public BlinkLayout(Context context, AttributeSet attrs) { super(context, attrs); mHandler = new Handler(new Handler.Callback() { @Override public boolean handleMessage(Message msg) { if (msg.what == MESSAGE_BLINK) { if (mBlink) { mBlinkState = !mBlinkState; makeBlink(); } invalidate(); return true; } return false; } }); } private void makeBlink() { Message message = mHandler.obtainMessage(MESSAGE_BLINK); mHandler.sendMessageDelayed(message, BLINK_DELAY); } @Override protected void onAttachedToWindow() { super.onAttachedToWindow(); mBlink = true; mBlinkState = true; makeBlink(); } @Override protected void onDetachedFromWindow() { super.onDetachedFromWindow(); mBlink = false; mBlinkState = true; mHandler.removeMessages(MESSAGE_BLINK); } @Override protected void dispatchDraw(Canvas canvas) { if (mBlinkState) { super.dispatchDraw(canvas); } } } } å½“ BlinkLayout å›è°ƒ onAttachedToWindow() æ—¶ï¼Œè°ƒç”¨ makeBlink() æ–¹æ³•ï¼ŒmakeBlink() æ–¹æ³•å†…éƒ¨ç”¨ Handler å‘é€ä¸€ä¸ªå»¶è¿Ÿ 500ms çš„æ¶ˆæ¯ã€‚ä»æ„é€ å‡½æ•°ä¸­åˆå¯ä»¥çœ‹åˆ°ï¼Œåœ¨æ¥å—åˆ° Handler æ¶ˆæ¯åï¼Œåˆæ¥ç€è°ƒç”¨ makeBlink()ï¼Œå¾ªç¯å‘é€æ¶ˆæ¯ï¼Œç„¶ååˆ·æ–°é¡µé¢ã€‚ å½“ BlinkLayout å›è°ƒ onDetachedFromWindow() æ—¶ï¼Œç§»é™¤è¿™ä¸ªè¿™ä¸ªæ¶ˆæ¯é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰æ¶ˆæ¯ï¼Œç»“æŸå¾ªç¯ã€‚ æ¥ä¸‹æ¥å†çœ‹è¿™ä¸ª Message çš„å¤„ç†ï¼Œåœ¨ handleMessage() ä¸­ï¼Œä¼šå¯¹ mBlinkState è¿™ä¸ªå¸ƒå°”å˜é‡å–åï¼Œç„¶ååœ¨ dispatchDraw() å›è°ƒæ—¶ï¼Œåˆ™åˆ¤æ–­è¿™ä¸ªçŠ¶æ€å˜é‡æ¥å†³å®šæ˜¯å¦éœ€è¦ç»˜åˆ¶ç•Œé¢ï¼Œç”±äºæ˜¯æ¯éš” 500ms å‘é€ä¸€æ¬¡æ¶ˆæ¯ï¼Œæ‰€ä»¥ mBlinkState çš„å€¼ä¹Ÿä¼šæ¯éš” 500ms åè½¬ä¸€æ¬¡ï¼ŒView ç›¸åº”çš„ä¹Ÿä¼š 500ms ç»˜åˆ¶ä¸€æ¬¡ï¼Œ500ms æ¶ˆå¤±ä¸€æ¬¡ï¼Œå°±å½¢æˆäº†é—ªçƒã€‚ å®é™…ä¸Šä½ åœ¨å†™å¸ƒå±€æ–‡ä»¶æ—¶ä¼šå‘ç°ï¼Œ&lt;blink&gt; æ ‡ç­¾åœ¨ã€Android Studioã€ä¸­ä¼šæŠ¥ã€ŒCannot resolve class blinkã€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬å¼€å‘ä¸­ä¹Ÿä¸ä¼šä½¿ç”¨ï¼Œå°½ç®¡å®ƒèƒ½å¤Ÿé€šè¿‡ç¼–è¯‘ï¼Œå› æ­¤ä¹Ÿç®—å¾—ä¸Šæ˜¯ Android å®˜æ–¹åŸ‹ä¸‹çš„ä¸€æšå½©è›‹å§ã€‚ å…³äº 1995 å¹´å‘ç”Ÿäº†ä»€ä¹ˆï¼Œæˆ‘æƒ³äº†ä¸€ä¸‹ä¸ Android ç›¸å…³çš„äº‹ä»¶ï¼Œåªæƒ³åˆ° Sun å…¬å¸åœ¨ 1995 å¹´å‘å¸ƒäº† Javaï¼Œä¸è¿‡éšç€ Sun è¢« Oracle æ”¶è´­ï¼ŒGoogle å’Œ Oracle çš„å®˜å¸ä¹Ÿæˆä¸ºäº† Android ç¨‹åºå‘˜æ´¥æ´¥ä¹é“çš„æ¶ˆæ¯ã€‚ åæ¥æŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç° 1995 å¹´è¿˜æ˜¯ Google ä¸¤ä½è”åˆåˆ›å§‹äºº Lawrence Edward Page å’Œ Sergey Mikhaylovich Brin åœ¨ Stanford ç›¸é‡çš„æ—¶é—´ã€‚ 2002 å¹´ Andy Rubin åœ¨ Stanford ç»™ç¡…è°·å·¥ç¨‹å¸ˆè®²è¯¾ï¼Œæ°å¥½ Google ä¸¤ä½å¤§ä½¬ä¹Ÿæ˜¯å¬ä¼—ã€‚ 2003 å¹´ Andy Rubin åˆ›ç«‹ Androidï¼Œéšå 2005 å¹´ Google ä¾¿æ”¶è´­äº†è¿™ä¸ªä»…æˆç«‹äº† 22 ä¸ªæœˆçš„å…¬å¸ï¼Œå¹¶åœ¨ 2007 å¹´æ­£å¼å‘å¤–éƒ¨å…¬å¸ƒ Android æ“ä½œç³»ç»Ÿï¼Œéšå Android ç”Ÿæ€å£®å¤§å‘å±•ï¼Œè¶Šå±…ç§»åŠ¨æ“ä½œç³»ç»Ÿå¸‚åœºå æœ‰ç‡æ¦œé¦–ã€‚ ","link":"https://LiarrDev.github.io/post/Lets-Party-Like-its-1995/"},{"title":"Windows Battery Report","content":"æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨ç§»åŠ¨ç”µå­è®¾å¤‡æ—¶ï¼Œå¾€å¾€ä¼šæ¯”è¾ƒå…³æ³¨ç”µæ± çš„å¯¿å‘½ï¼Œæˆ‘å‘ç°åœ¨ä½¿ç”¨ iPhone çš„äººç¾¤ä¸­å¯¹ç”µæ± å¯¿å‘½çš„å…³æ³¨åº¦æ›´é«˜ã€‚ è€Œå¸¸ä½¿ç”¨ç¬”è®°æœ¬ç”µè„‘ç§»åŠ¨åŠå…¬çš„æˆ‘ä»¬ï¼Œä¹Ÿéœ€è¦å…³æ³¨ä¸€ä¸‹ç¬”è®°æœ¬çš„ç”µæ± å¥åº·ã€‚ ä» Windows 10 å¼€å§‹ç³»ç»Ÿè®¾ç½®å·²ç»æ”¯æŒæŸ¥çœ‹ç”µæ± ä¿¡æ¯äº†ï¼š ä½†æ˜¯è¯´å®è¯ï¼Œè¿™ä¸ªé¡µé¢æ˜¾ç¤ºçš„ç”µæ± ä¿¡æ¯å®åœ¨æœ‰é™ï¼Œä¹Ÿå°±èƒ½çœ‹çœ‹æ¯ä¸ªå°æ—¶ç”µæ± çš„ç”µé‡ï¼Œå±å¹•å¼€å…³æ—¶é—´ï¼Œä»¥åŠåº”ç”¨è€—ç”µæƒ…å†µç­‰ã€‚ å¦‚æœæƒ³äº†è§£ç”µæ± çš„å¯¿å‘½ç­‰ä¿¡æ¯ï¼Œè®¸å¤šäººå¯èƒ½ä¼šè€ƒè™‘ä¸‹è½½ã€é²å¤§å¸ˆã€ç­‰ç¬¬ä¸‰æ–¹åº”ç”¨æ¥æŸ¥çœ‹ã€‚ å…¶å®å®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œå› ä¸º Windows æ˜¯å¯ä»¥ç›´æ¥ç”Ÿæˆç”µæ± æŠ¥å‘Šçš„ï¼Œåªéœ€ä¸€æ¡å‘½ä»¤å³å¯ã€‚ æ‰“å¼€ã€ç»ˆç«¯ã€ï¼Œé”®å…¥ä»¥ä¸‹å‘½ä»¤å¹¶å›è½¦ï¼š âœ powercfg /BatteryReport ç³»ç»Ÿä¼šåœ¨å½“å‰ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º battery-report.html æ–‡ä»¶ï¼Œå¦‚æœä½ ä¸çŸ¥é“å½“å‰ç»ˆç«¯æ‰€åœ¨ç›®å½•ï¼Œæ‰§è¡Œå®Œå‘½ä»¤åæ–‡ä»¶ç›®å½•ä¹Ÿä¼šå±•ç¤ºåœ¨ç»ˆç«¯ä¸­ã€‚ è¿™ä¸ªæ–‡ä»¶å°±æ˜¯ç³»ç»Ÿä¸ºæˆ‘ä»¬ç”Ÿæˆçš„ç”µæ± æŠ¥å‘Šï¼ŒåŒå‡»æ‰“å¼€ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šè·³è½¬åˆ°æµè§ˆå™¨ä¸­åŠ è½½ã€‚æˆ‘éšæ‰‹æ‹¿äº†ä¸€å°ç¬”è®°æœ¬ï¼Œç”Ÿæˆçš„æŠ¥å‘Šå¤§æ¦‚æ˜¯è¿™æ ·å­çš„ï¼š æŠ¥å‘Šä¸ºå…¨è‹±æ–‡ï¼Œä½ å¯èƒ½çœ‹å¾—æœ‰ç‚¹æ‡µé€¼ï¼Œæˆ‘æ¥å¸¦ä½ ä¸€ä¸€è§£è¯»ã€‚ å¼€å¤´æ˜¯ç¬”è®°æœ¬çš„ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç¬”è®°æœ¬å‹å·ã€BIOSã€ç³»ç»Ÿç‰ˆæœ¬ç­‰ã€‚ æ¥ä¸‹æ¥æ˜¯ç”µæ± è§„æ ¼ï¼ŒåŒ…æ‹¬å‚å•†ã€æè´¨ã€å®¹é‡ç­‰ã€‚ è¿™é‡Œä¸»è¦å…³æ³¨å››ä¸ªå‚æ•°ï¼Œä¸€ä¸ªæ˜¯ CHEMISTRYï¼Œå³ç”µæ± ç”µä»‹è´¨ï¼ŒLilo è¡¨ç¤ºé”‚ç¦»å­ç”µæ± ï¼ŒDESIGN CAPACITY æ˜¯æŒ‡è¯¥ç”µæ± åœ¨è®¾è®¡æ—¶çš„æ ‡å®šå®¹é‡ï¼ŒFULL CHARGE CAPACITY æŒ‡æ»¡ç”µçŠ¶æ€ä¸‹çš„å®é™…å®¹é‡ï¼ŒCYCLE COUNT æŒ‡å¾ªç¯æ¬¡æ•°ã€‚ å¯ä»¥çœ‹åˆ°æˆ‘è¿™é‡Œçš„å®é™…å®¹é‡æ¯”æ ‡å®šå®¹é‡è¿˜é«˜ï¼Œä¸è¦å¤ªæƒŠè®¶ï¼Œä¸€èˆ¬æƒ…å†µä¸‹æœ‰ 5% å·¦å³çš„è¯¯å·®ä¹Ÿæ˜¯æ­£å¸¸çš„ã€‚ ä¸‹é¢æ˜¯è¿‡å» 3 å¤©çš„ç”µæºä½¿ç”¨çŠ¶æ€ã€‚ å·¦ä¾§çš„æ—¶é—´ä¸€ç›®äº†ç„¶ï¼Œç¬¬äºŒåˆ—æ˜¯çŠ¶æ€ï¼ŒActive è¡¨ç¤ºç³»ç»Ÿåœ¨æ´»åŠ¨çŠ¶æ€ï¼ŒConnected Standby è¡¨ç¤ºå¾…æœºï¼ŒSuspended è¡¨ç¤ºæŒ‚èµ·ï¼ŒReport generated è¡¨ç¤ºæŠ¥å‘Šç”Ÿæˆï¼Œä¸€èˆ¬ä¸ºæœ€åä¸€æ¡ã€‚ ç¬¬ä¸‰åˆ—æ˜¯ä½¿ç”¨ä½•ç§ä¾›ç”µæ–¹å¼ï¼ŒAC å°±æ˜¯äº¤æµç”µï¼Œå¯ä»¥ç›´æ¥ç†è§£ä¸ºç”µæºä¾›ç”µï¼ŒBattery å°±æ˜¯ç”µæ± ä¾›ç”µã€‚ æœ€åä¸¤åˆ—åˆ†åˆ«å°±æ˜¯ç”µæ± ç”µé‡ç™¾åˆ†æ¯”å’Œå…·ä½“å€¼äº†ï¼ŒmWh ä¸­æ–‡åç§°ä¸ºæ¯«ç“¦æ—¶ï¼Œä¸ mAhï¼ˆæ¯«å®‰æ—¶ï¼‰ä¸€æ ·ï¼ŒåŒæ˜¯ç”µæ± å®¹é‡çš„å•ä½ã€‚ çœ‹ä¸Šé¢çš„æ•°æ®ä½ å¯ä»¥å‘ç°ä¸€ä¸ªéå¸¸æœ‰æ„æ€çš„äº‹æƒ…ï¼Œè¿™å°ç”µè„‘åœ¨æˆ‘å……æ»¡ç”µä¹‹åå…³æœºï¼Œä¸‹æ¬¡å¯åŠ¨çš„æ—¶å€™ç”µé‡éƒ½è¢«è€—å…‰äº†ï¼Œå¯ä»¥å¾—å‡ºç»“è®ºï¼Œè¿™å°ç”µè„‘çš„ç”µæ± æœ‰é—®é¢˜ã€‚ ç„¶åå°±æ˜¯ç”µæ± çš„ä½¿ç”¨æƒ…å†µï¼Œè¯¥é¡¹ç›®ä¸­ä¼šä»¥æŠ˜çº¿å›¾æ˜¾ç¤ºæœ€è¿‘ä¸‰å¤©çš„ç”µé‡æ¶ˆè€—æƒ…å†µã€‚ ä¸€èˆ¬æƒ…å†µä¸‹åªæœ‰å½“ä½ ä½¿ç”¨ç”µæ± æ—¶æ‰ä¼šæœ‰æ˜æ˜¾çš„æŠ˜çº¿ï¼Œè¯¥é¡¹ä¸»è¦å…³æ³¨å…¶ç”µæ± æ¶ˆè€—é€Ÿåº¦ä¸å®é™…å·¥å†µæ˜¯å¦å»åˆã€‚ å¾€ä¸‹å°±æ˜¯ç”µæºå’Œç”µæ± çš„ä½¿ç”¨å†å²ã€‚ å†ç„¶åå°±æ˜¯ç”µæ± å®¹é‡å†å²ï¼Œè¯¥éƒ¨åˆ†ä¼šæ˜¾ç¤ºç”µæ± å®¹é‡éšæ—¶é—´çš„å‡å°‘æƒ…å†µï¼Œæ•°æ®å«ä¹‰ä¸å¼€å¤´è¯´çš„ä¸€è‡´ã€‚ æœ€ååˆ™æ˜¯ç”µæ± é¢„ä¼°å¯ç”¨æ—¶é—´ï¼Œä¸»è¦å…³æ³¨æœ€åä¸€æ¡ã€‚ æ ¹æ®è‡ªæ“ä½œç³»ç»Ÿå®‰è£…ä»¥æ¥è§‚å¯Ÿåˆ°çš„æ‰€æœ‰è€—æŸæƒ…å†µï¼Œå¯¹ç”µæ± å¯ç”¨æ—¶é•¿çš„ä¼°è®¡ã€‚ ä»¥ä¸Šå°±æ˜¯å¯¹ç”µæ± æŠ¥å‘Šçš„è§£è¯»æµç¨‹ã€‚ å¦å¤–ï¼Œä¼¼ä¹æœ‰ç½‘å‹æåˆ°è‡ªå·±çš„ç¬”è®°æœ¬ç”µæ± æŠ¥å‘Šä¸­éƒ¨åˆ†æ•°æ®ä¸ä¼šéšç€æ—¶é—´æŸè€—ï¼Œæ€€ç–‘è¢«å‚å•†å†™æ­»äº†ï¼›ä¹Ÿæœ‰éƒ¨åˆ†ç½‘å‹å‡ºç°è·Ÿæˆ‘ä¸Šé¢æµ‹çš„è¿™å°æœºå™¨ä¸€æ ·ï¼Œç”µæ± æŸè€—ä¸å®é™…ä¸¥é‡ä¸ç¬¦ï¼Œå¯ä»¥æ€€ç–‘æ˜¯è¢«äººåŠ¨è¿‡æ‰‹è„šã€‚ æ€»ä¹‹ï¼Œè¯¥æŠ¥å‘Šå°½ç®¡å¹¶ä¸è¯¦å°½ï¼Œä½†æˆ‘ä»¬ä»ä¸­æç‚¼å‡ºæ¥çš„ä¿¡æ¯ï¼Œä¹Ÿæœ‰ä¸€å®šçš„å‚è€ƒæ„ä¹‰ã€‚ ","link":"https://LiarrDev.github.io/post/Windows-Battery-Report/"},{"title":"å¯¹ JSONObject çš„éå†","content":"ä¹‹å‰ä»‹ç»äº†å¦‚ä½•å¯¹ Map è¿›è¡Œéå†ï¼Œé‡Œé¢æåˆ°äº†ä¸€ä¸ªåœºæ™¯ï¼Œå°±æ˜¯å°†ç¼“å­˜åˆ° Map çš„æ•°æ®å­˜å‚¨åˆ° JSONObject ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ï¼ŒJSON æ˜¯ä¸€ç§ä¸ Map ååˆ†ç›¸ä¼¼çš„æ•°æ®äº¤æ¢æ ¼å¼ï¼Œå®ƒåŒæ ·é‡‡ç”¨äº†é”®å€¼å¯¹çš„å­˜å‚¨æ–¹å¼ï¼Œé‚£ä¹ˆç°åœ¨å°±å‡è®¾ä¸€ä¸ªç›¸åçš„åœºæ™¯ï¼Œå½“æˆ‘ä»¬éœ€è¦å°† JSON ä¸­çš„æ•°æ®ç¼“å­˜åˆ°æœ¬åœ°æ—¶ï¼Œä¹Ÿè®¸éå†ä¹Ÿä¸å¤±ä¸ºä¸€ç§ä¼˜é›…çš„åšæ³•ã€‚ ä¸ Map çš„éå†ç›¸ä¼¼ï¼Œè¿™ä¸ªåœºæ™¯å½’æ ¹ç»“åº•åœ¨äºå¯¹ JSON ä¸­ key çš„éå†ï¼Œå› ä¸ºåªè¦æ‹¿åˆ° keyï¼Œä¹Ÿå°±å¯ä»¥è½»æ˜“æ‹¿åˆ° valueã€‚ JSONObject çš„éå†ä¹Ÿæœ‰å¤šç§å®ç°æ–¹å¼ï¼š Iterator.hasNext() public static void jsonTraversal(JSONObject json) { Iterator&lt;String&gt; it = json.keys(); while (it.hasNext()) { String key = it.next(); Object value = json.opt(key); // Do something... } } JSONObject çš„ keys() æ–¹æ³•ä¼šè¿”å›å…¶æ‰€æœ‰ key çš„ Set é›†åˆçš„ Iterator å¯¹è±¡ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹å…¶è¿­ä»£ã€‚ Iterator.forEachRemaining() public static void jsonTraversal(JSONObject json) { json.keys().forEachRemaining(key -&gt; { Object value = json.opt(key); // Do something... } Java 8 ä¹‹å Iterator ä¹Ÿå¢åŠ äº† forEachRemaining() æ–¹æ³•ï¼ŒLambda çš„å†™æ³•æ›´åŠ ç®€æ´ã€‚ JSONObject.names() public static void jsonTraversal(JSONObject json) { JSONArray array = json.names(); if (array != null) { for (int i = 0; i &lt; array.length(); i++) { String key = array.optString(i); Object value = json.opt(key); // Do something... } } } JSONObject ä¸­æœ‰ä¸ª names() æ–¹æ³•å¾ˆæœ‰æ„æ€ï¼Œå®ƒæŠŠ key é›†åˆé€šè¿‡ JSONArray ä¹Ÿå°±æ˜¯æ•°ç»„çš„å½¢å¼è¿”å›ï¼Œåªéœ€éå†è¿™ä¸ªæ•°ç»„å°† key å€¼å–å‡ºå³å¯ã€‚ ä¸è¿‡å½“ JSONObject ä¸­ä¸å­˜åœ¨æ•°æ®æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å› nullï¼Œæ‰€ä»¥è®°å¾—åˆ¤ç©ºã€‚ JSONObject.keySet() public static void jsonTraversal(JSONObject json) { for (String key : json.keySet()) { Object value = json.opt(key); // Do something... } } æˆ‘ä»¬çŸ¥é“ Map ä¸­æœ‰ keySet() æ–¹æ³•ï¼ŒJSONObject ä¹Ÿæœ‰ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰ key çš„ Set é›†åˆï¼Œå¯¹å…¶è¿›è¡Œéå†å³å¯ã€‚ åŒæ ·ï¼ŒJava 8 ä¸Šä¹Ÿå¯ä»¥ç”¨ä¸Š forEach()ï¼š public static void jsonTraversal(JSONObject json) { json.keySet().forEach(key -&gt; { Object value = json.opt(key); // Do something... }); } ä½†æ˜¯å½“åœ¨ Android ä¸­ä½¿ç”¨ keySet() æ—¶ä½ ä¼šå‘ç°æ‰¾ä¸åˆ°è¯¥æ–¹æ³•ï¼ŒæŸ¥çœ‹æºç å¯ä»¥çœ‹åˆ°å…¶è¢«é™åˆ¶äº†å¤–éƒ¨è®¿é—®ï¼š public class JSONObject { /** * Returns the set of {@code String} names in this object. The returned set * is a view of the keys in this object. {@link Set#remove(Object)} will remove * the corresponding mapping from this object and set iterator behaviour * is undefined if this object is modified after it is returned. * * See {@link #keys()}. * * @hide. */ @UnsupportedAppUsage @libcore.api.CorePlatformApi public Set&lt;String&gt; keySet() { return nameValuePairs.keySet(); } } è€Œåœ¨æ™®é€šçš„ Java é¡¹ç›®ä¸­å¼•å…¥æœ€æ–°çš„ org.json åº“ï¼Œæ˜¯æ”¯æŒå¤–éƒ¨è°ƒç”¨çš„ï¼Œä¼°è®¡æ˜¯ Android å®˜æ–¹å‡ºäºæŸäº›åŸå› è€ƒè™‘è€Œå°†å…¶é™åˆ¶äº†ï¼Œåˆæˆ–è€…æ˜¯ Android æºç ä¸­å¼•å…¥çš„æ˜¯ä½ç‰ˆæœ¬ org.json åº“çš„åŸå› ï¼Œå› ä¸ºæˆ‘åœ¨æœ€æ–°çš„ç‰ˆæœ¬ä¸­çœ‹åˆ°çš„ entrySet() æ–¹æ³•ï¼ŒAndroid æºç ä¸­ä¹Ÿæ²¡æœ‰ï¼š public class JSONObject { /** * Get a set of entries of the JSONObject. These are raw values and may not * match what is returned by the JSONObject get* and opt* functions. Modifying * the returned EntrySet or the Entry objects contained therein will modify the * backing JSONObject. This does not return a clone or a read-only view. * * Use with caution. * * @see Map#entrySet() * * @return An Entry Set */ protected Set&lt;Entry&lt;String, Object&gt;&gt; entrySet() { return this.map.entrySet(); } } å°½ç®¡è¿™ä¸ªæ–¹æ³•æ˜¯ protected çš„ã€‚ ","link":"https://LiarrDev.github.io/post/JSONObject-Traversal/"},{"title":"è§£å†³ Adobe CS6 å…¨å®¶æ¡¶ç•Œé¢æ¯”ä¾‹å¼‚å¸¸çš„é—®é¢˜","content":"æœ€è¿‘å…¥æ‰‹äº†ä¸€å° Windows ç¬”è®°æœ¬ï¼Œå±å¹•åˆ†è¾¨ç‡æ˜¯ 2560 Ã— 1440 çš„ï¼Œå‚å•†å®£ç§°ä¸º 2.5k å±ï¼Œå°½ç®¡åœ¨æˆ‘çš„ MacBook Pro é¢å‰ä¾ç„¶æ˜¯ä¸ªå¼Ÿå¼Ÿï¼Œä½†å›æƒ³æˆ‘ä¸Šä¸€å° Windows ç¬”è®°æœ¬è¿˜æ˜¯ 1366 Ã— 768 çš„åˆ†è¾¨ç‡ï¼Œè¿™ä¹Ÿæ˜¯ä¸€æ¬¡é£è·ƒäº†ã€‚ ä½†åˆ°äº†å®‰è£… Adobe è½¯ä»¶çš„æ—¶å€™ï¼Œå´å‘ç°äº†ä¸€ä¸ªé—®é¢˜ï¼ŒCS6 ç‰ˆæœ¬çš„ Adobe è½¯ä»¶å¹¶æ²¡æœ‰é€‚é…é«˜åˆ†å±ï¼Œæ‰€ä»¥ç•Œé¢æ•ˆæœå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š å¦‚æœå¤–æ¥ä¸€ä¸ªå¤§å±æ˜¾ç¤ºå™¨çš„è¯èƒ½å‹‰å¼ºå‡‘åˆç”¨ï¼Œä½†åœ¨ 14 è‹±å¯¸çš„ç¬”è®°æœ¬å±å¹•ä¸Šï¼Œçœ‹å¾—çœ¼ç›éƒ½å¿«çäº†ï¼Œå¯¹æ¯”åº•éƒ¨ä»»åŠ¡æ ä½ ä¹Ÿèƒ½å¤Ÿæ„Ÿå—åˆ°æ˜¾ç¤ºæ¯”ä¾‹çš„åŒºåˆ«ã€‚ è€Œæˆ‘æ‰“å¼€è½¯ä»¶çš„èœå•è®¾ç½®ä¹Ÿæ²¡æ‰¾åˆ°ç›¸å…³é€‰é¡¹ï¼Œæ— å¥ˆåªèƒ½é€šè¿‡ä¿®æ”¹é…ç½®æ¥å®ç°ã€‚ é¦–å…ˆæ‰“å¼€ã€è¿è¡Œã€ï¼Œè¾“å…¥ regeditï¼š ç‚¹å‡»ã€Œç¡®å®šã€åå¯è·³è½¬åˆ°ã€æ³¨å†Œè¡¨ç¼–è¾‘å™¨ã€ï¼Œä¾æ¬¡å±•å¼€ç›®å½• è®¡ç®—æœº\\HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\SideBySideï¼Œå³é”®èœå•æ–°å»º DWORDï¼š å°†æ•°å€¼åç§°å‘½åä¸º PreferExternalManifestï¼Œå¹¶å¯¹å…¶æ‰§è¡Œã€Œä¿®æ”¹ã€ï¼š å°†æ•°å€¼æ•°æ®ä¿®æ”¹ä¸º 1ï¼ŒåŸºæ•°ä¿®æ”¹ä¸ºã€Œåè¿›åˆ¶ã€ã€‚ ç„¶åæ–°å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£ï¼Œå°†å¦‚ä¸‹ä»£ç å¤åˆ¶åˆ°è¯¥æ–‡ä»¶ä¸­ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;yes&quot;?&gt; &lt;assembly xmlns=&quot;urn:schemas-microsoft-com:asm.v1&quot; manifestVersion=&quot;1.0&quot; xmlns:asmv3=&quot;urn:schemas-microsoft-com:asm.v3&quot;&gt; &lt;dependency&gt; &lt;dependentAssembly&gt; &lt;assemblyIdentity type=&quot;win32&quot; name=&quot;Microsoft.Windows.Common-Controls&quot; version=&quot;6.0.0.0&quot; processorArchitecture=&quot;*&quot; publicKeyToken=&quot;6595b64144ccf1df&quot; language=&quot;*&quot;&gt; &lt;/assemblyIdentity&gt; &lt;/dependentAssembly&gt; &lt;/dependency&gt; &lt;dependency&gt; &lt;dependentAssembly&gt; &lt;assemblyIdentity type=&quot;win32&quot; name=&quot;Microsoft.VC90.CRT&quot; version=&quot;9.0.21022.8&quot; processorArchitecture=&quot;amd64&quot; publicKeyToken=&quot;1fc8b3b9a1e18e3b&quot;&gt; &lt;/assemblyIdentity&gt; &lt;/dependentAssembly&gt; &lt;/dependency&gt; &lt;trustInfo xmlns=&quot;urn:schemas-microsoft-com:asm.v3&quot;&gt; &lt;security&gt; &lt;requestedPrivileges&gt; &lt;requestedExecutionLevel level=&quot;asInvoker&quot; uiAccess=&quot;false&quot;/&gt; &lt;/requestedPrivileges&gt; &lt;/security&gt; &lt;/trustInfo&gt; &lt;asmv3:application&gt; &lt;asmv3:windowsSettings xmlns=&quot;http://schemas.microsoft.com/SMI/2005/WindowsSettings&quot;&gt; &lt;ms_windowsSettings:dpiAware xmlns:ms_windowsSettings=&quot;http://schemas.microsoft.com/SMI/2005/WindowsSettings&quot;&gt;false&lt;/ms_windowsSettings:dpiAware&gt; &lt;/asmv3:windowsSettings&gt; &lt;/asmv3:application&gt; &lt;/assembly&gt; ä¿å­˜åè¿›å…¥ä½ æ‰€å®‰è£…çš„ Adobe åº”ç”¨ç¨‹åºæ‰€åœ¨æ–‡ä»¶å¤¹ï¼Œæ‰¾åˆ°è¯¥åº”ç”¨ç¨‹åºå¯¹åº”çš„æ–‡ä»¶åç§°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå®‰è£…çš„æ˜¯ã€Adobe Photoshop CS6ã€ï¼Œå¯ä»¥çœ‹åˆ°å…¶å¯¹åº”çš„æ–‡ä»¶åæ˜¯ Photoshop.exeã€‚ å°†åˆšåˆšçš„æ–‡æœ¬æ–‡ä»¶å¤åˆ¶åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹å¹¶é‡å‘½åä¸º åº”ç”¨ç¨‹åºæ–‡ä»¶å.manifestï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±æ˜¯ photoshop.exe.manifestï¼Œå¦‚æœä½ å®‰è£…çš„æ˜¯ã€Adobe Illustrator CS6ã€ï¼Œåˆ™å‘½åä¸º Illustrator.exe.manifestï¼Œå…¶ä»–åŒç†ã€‚ ç„¶åé‡æ–°æ‰“å¼€åº”ç”¨ï¼Œå¯ä»¥å‘ç°æ˜¾ç¤ºæ¯”ä¾‹å˜å¤§äº†ã€‚ ä¸ç”¨å†æˆ´è€èŠ±é•œçœ‹ç”µè„‘å•¦ã€‚ ","link":"https://LiarrDev.github.io/post/Solve-the-Problem-of-Abnormal-Scale-of-Adobe-CS6 /"},{"title":"Java å¯¹ Map è¿›è¡Œéå†","content":"Map æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œå®ƒé‡‡ç”¨äº†é”®å€¼å¯¹çš„æ•°æ®å­˜å‚¨æ–¹å¼ï¼Œå¾ˆé€‚åˆç”¨æ¥ç¼“å­˜æ•°æ®ã€‚ å‡è®¾è¿™ä¹ˆä¸€ä¸ªåœºæ™¯ï¼šæˆ‘éœ€è¦å¯¹ç¼“å­˜åˆ° Map ä¸­çš„æ•°æ®åšç½‘ç»œä¼ è¾“ï¼Œæˆ–è€…æœ¬åœ°æŒä¹…åŒ–æ“ä½œï¼Œåº”è¯¥æ€ä¹ˆæ“ä½œï¼Ÿ æœ€ç²—æš´çš„æ–¹æ³•å°±æ˜¯é€ä¸ªè¯»å†™ï¼Œæ¯”å¦‚ï¼š public void postData(Map&lt;String, Object&gt; map) { Object value1 = map.get(&quot;key_1&quot;); Object value2 = map.get(&quot;key_2&quot;); ... JSONObject json = new JSONObject(); json.put(&quot;key_1&quot;, value1); json.put(&quot;key_2&quot;, value2); ... } å½“ Map ä¸­çš„æ•°æ®éå¸¸å¤šæ—¶ï¼Œé€ä¸ªè¯»å†™çš„æ–¹å¼ä¼šæ˜¾å¾—æ ¼å¤–è‡ƒè‚¿ã€‚ åœ¨è¿™ç§åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¤§æ¦‚ç‡ä¸å…³å¿ƒå„ä¸ªé”®å€¼å¯¹çš„æ•°æ®å†…å®¹ï¼Œå…¶å®å¯ä»¥ç›´æ¥é‡‡ç”¨éå†çš„æ–¹æ³•ã€‚ Map çš„éå†æœ‰å¤šç§å®ç°æ–¹å¼ï¼š Map.keySet() public static void mapTraversal(Map&lt;Object, Object&gt; map) { for (Object key : map.keySet()) { Object value = map.get(key); // Do something... } } åˆ©ç”¨ foreach å¾ªç¯ï¼Œé€šè¿‡ Map çš„ keySet() éå†å¾—å‡ºæ‰€æœ‰çš„ keyï¼Œå†åˆ©ç”¨ key å–å¾— valueã€‚ Map çš„ keySet() æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ªåŒ…å«è¯¥ Map ä¸­æ‰€æœ‰ key çš„ Set é›†åˆï¼Œå› ä¸º Set å…·å¤‡è¿­ä»£å™¨ï¼Œæ‰€ä»¥èƒ½å¤Ÿéå†å–å‡ºå¯¹åº”çš„å€¼ã€‚ Map.entrySet() public void mapTraversal(Map&lt;Object, Object&gt; map) { for (Map.Entry&lt;Object, Object&gt; entry : map.entrySet()) { Object key = entry.getKey(); Object value = entry.getValue(); // Do something... } } Map ä¸­é‡‡ç”¨ Entry å†…éƒ¨ç±»æ¥è¡¨ç¤ºä¸€ä¸ªæ˜ å°„é¡¹ï¼Œæ˜ å°„é¡¹åŒ…å«äº† key å’Œ valueï¼Œè€Œ Map çš„ entrySet() æ–¹æ³•è¿”å›çš„å°±æ˜¯ä¸€ä¸ªåŒ…å«æ­¤æ˜ å°„é¡¹çš„ Set é›†åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥å¯¹å…¶éå†ã€‚ Iterator public static void mapTraversal(Map&lt;Object, Object&gt; map) { Iterator&lt;Map.Entry&lt;Object, Object&gt;&gt; it = map.entrySet().iterator(); while (it.hasNext()) { Map.Entry&lt;Object, Object&gt; entry = it.next(); Object key = entry.getKey(); Object value = entry.getValue(); // Do something... } } Iterator å¯¹ Map çš„éå†ä¾ç„¶æ˜¯ä½¿ç”¨ Map çš„ entrySet() æ–¹æ³•å–æ˜ å°„ï¼Œå¥—ä¸Š Iterator ä¼¼ä¹æœ‰ç‚¹å¤šæ­¤ä¸€ä¸¾ï¼Œä½†å½“ä½ éœ€è¦ä» Map ä¸­ç§»é™¤å…ƒç´ æ—¶ï¼Œforeach ä¾¿æ— èƒ½ä¸ºåŠ›äº†ï¼Œè€Œ Iterator çš„ remove() æ–¹æ³•åˆ™èƒ½å¤Ÿå¸®ä½ è½»æ¾å®ç°ã€‚ Java 8 forEach() Lambda public static void mapTraversal(Map&lt;Object, Object&gt; map) { map.forEach((key, value) -&gt; { // Do something... }); } Java 8 æä¾›äº† Lambda è¡¨è¾¾å¼æ”¯æŒï¼Œè€Œ Map ä¹Ÿåœ¨ Java 8 åŠ å…¥äº† forEach() æ–¹æ³•ï¼Œè¯­æ³•çœ‹èµ·æ¥æ›´ç®€æ´ï¼Œå¯ä»¥åŒæ—¶æ‹¿åˆ° key å’Œ valueã€‚ åŒæ—¶ï¼Œç”±äº Collection æœ¬èº«å°±ç»§æ‰¿è‡ª Iterableï¼Œå› æ­¤ keySet() å’Œ entrySet() æ‰€è·å–åˆ°çš„ Set é›†åˆä¾¿æ”¯æŒ Iterable çš„ forEach() æ–¹æ³•ã€‚ ","link":"https://LiarrDev.github.io/post/Java-Map-Traversal/"},{"title":"ä¸ºä»€ä¹ˆ Html.fromHtml() ä¸èƒ½è§£æ RGB è‰²å€¼","content":"æ¸¸æˆ SDK éœ€è¦æ¥å…¥ä¸€ä¸ªç±»ä¼¼å…¬å‘Šæ¿çš„éœ€æ±‚ï¼Œå¤§æ¦‚æ ·å­é•¿è¿™æ ·ï¼š å¯ä»¥çœ‹åˆ°ï¼Œä¸­é—´çš„å†…å®¹å­—ä½“æ˜¯æœ‰ä¸åŒæ ·å¼çš„ï¼Œä¹‹å‰ã€Android æ”¹å˜ TextView å†…å±€éƒ¨æ ·å¼ã€ä¹Ÿä»‹ç»è¿‡å¦‚ä½•å®ç°ç±»ä¼¼çš„åŠŸèƒ½ã€‚è¿™é‡Œç”±äºå†…å®¹æœ¬èº«ä¹Ÿæ˜¯ä»æœåŠ¡ç«¯è·å–çš„ï¼Œæ‰€ä»¥æœåŠ¡ç«¯ç”Ÿæˆ HTML æ ¼å¼æ–‡æœ¬ï¼Œå®¢æˆ·ç«¯å†ä½¿ç”¨ Html.fromHtml() æ¥è§£æä¼šæ¯”è¾ƒåˆé€‚ã€‚ ä¸è¿‡ä¸çŸ¥é“æ˜¯æœåŠ¡ç«¯å¯Œæ–‡æœ¬æ’ä»¶åŸå› è¿˜æ˜¯å…¶ä»–ä»€ä¹ˆåŸå› ï¼Œç”Ÿæˆè¿‡æ¥çš„å¯Œæ–‡æœ¬æ ¼å¼æ˜¯è¿™æ ·çš„ï¼š ç‚¹å‡»&lt;span style=&quot;color: rgb(0, 255, 0)&quot;&gt;ã€å¤§å…ã€‘&lt;/span&gt;-å·¦ä¸‹è§’... ä½†æ˜¯å®é™…ä¸Šè¿™ä¸ª RGB é¢œè‰²å±æ€§æ˜¯ä¸ç”Ÿæ•ˆçš„ï¼Œé™¤éæŒ‡å®šä¸ºå…·ä½“çš„é¢œè‰²åç§°ï¼š ç‚¹å‡»&lt;span style=&quot;color: green&quot;&gt;ã€å¤§å…ã€‘&lt;/span&gt;-å·¦ä¸‹è§’... æˆ–è€…ä½¿ç”¨åå…­è¿›åˆ¶æ ¼å¼ï¼š ç‚¹å‡»&lt;span style=&quot;color: #00FF00&quot;&gt;ã€å¤§å…ã€‘&lt;/span&gt;-å·¦ä¸‹è§’... è¿™é‡Œä¸»è¦æ˜¯ç”¨åˆ° &lt;span&gt; æ ‡ç­¾ï¼Œæ‰€ä»¥è¿›åˆ°å¯¹åº”çš„è§£ææºç æŸ¥çœ‹ï¼š class HtmlToSpannedConverter implements ContentHandler { ... private void handleStartTag(String tag, Attributes attributes) { if (...) { ... } else if (tag.equalsIgnoreCase(&quot;span&quot;)) { startCssStyle(mSpannableStringBuilder, attributes); } else if (...) { ... } } private void startCssStyle(Editable text, Attributes attributes) { String style = attributes.getValue(&quot;&quot;, &quot;style&quot;); if (style != null) { Matcher m = getForegroundColorPattern().matcher(style); if (m.find()) { int c = getHtmlColor(m.group(1)); if (c != -1) { start(text, new Foreground(c | 0xFF000000)); } } ... } } } HtmlToSpannedConverter ä¸æ˜¯ Html çš„å†…éƒ¨ç±»ï¼Œä½†å´å†™åœ¨äº† Html.java æ–‡ä»¶ä¸­ï¼Œå®ƒåœ¨ Html.fromHtml() æ–¹æ³•å†…éƒ¨è¢«åˆ›å»ºã€‚ HTML çš„è§£æå¯¹å¤§å®¶æ¥è¯´éƒ½æ²¡ä»€ä¹ˆéš¾åº¦ï¼Œè·Ÿæ™®é€šçš„ XML è§£æç›¸ä¼¼ï¼Œæ— éå°±æ˜¯å…ˆåè§£æå‡ºèŠ‚ç‚¹çš„æ ‡ç­¾ã€å±æ€§å’Œå€¼ï¼Œæ‰€ä»¥æˆ‘ä»¬ä»æ ‡ç­¾çš„è§£æç€æ‰‹ã€‚ é¦–å…ˆè¿›å…¥ &lt;span&gt; æ ‡ç­¾çš„åˆ†æ”¯ï¼Œåˆ¤æ–­æ˜¯å¦æœ‰ style å±æ€§ï¼Œæœ‰çš„è¯æ‰§è¡Œä¸‹é¢çš„è§£æã€‚ getForegroundColorPattern() å°±æ˜¯åŒ¹é…çš„é¢œè‰²ï¼š class HtmlToSpannedConverter implements ContentHandler { ... private static Pattern getForegroundColorPattern() { if (sForegroundColorPattern == null) { sForegroundColorPattern = Pattern.compile(&quot;(?:\\\\s+|\\\\A)color\\\\s*:\\\\s*(\\\\S*)\\\\b&quot;); } return sForegroundColorPattern; } } å¦‚æœåŒ¹é…ä¸Šäº†ï¼Œå°±è¿›å…¥ getHtmlColor() æ–¹æ³•ï¼š class HtmlToSpannedConverter implements ContentHandler { ... private int getHtmlColor(String color) { ... // If |color| is the name of a color, pass it to Color to convert it. Otherwise, // it may start with &quot;#&quot;, &quot;0&quot;, &quot;0x&quot;, &quot;+&quot;, or a digit. All of these cases are // handled below by XmlUtils. (Note that parseColor accepts colors starting // with &quot;#&quot;, but it treats them differently from XmlUtils.) if (Character.isLetter(color.charAt(0))) { try { return Color.parseColor(color); } catch (IllegalArgumentException e) { return -1; } } try { return XmlUtils.convertValueToInt(color, -1); } catch (NumberFormatException nfe) { return -1; } } } è¿™é‡Œçš„æ³¨é‡Šååˆ†æ¸…æ™°ï¼Œå¦‚æœä¼ è¿›æ¥çš„å‚æ•°æ˜¯ä¸€ä¸ªé¢œè‰²åç§°ï¼Œé‚£ä¹ˆå®ƒå°†äº¤ç»™ Color ç±»è¿›è¡Œè½¬æ¢ï¼›å¦åˆ™ï¼Œå®ƒå¤§æ¦‚ç‡ä¼šä»¥ #ã€0ã€0xã€+ æˆ–æ•°å­—å¼€å¤´ï¼Œäº¤ç»™ XmlUtils å¤„ç†ã€‚ å®ƒçš„åˆ¤æ–­æ¡ä»¶ååˆ†ç®€å•ç²—æš´ï¼Œä¼ è¿›æ¥çš„å‚æ•°æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œå‡å¦‚å…¶ç¬¬ä¸€ä¸ªå­—ç¬¦æ˜¯å­—æ¯çš„è¯ï¼Œå®ƒå°±å°†å…¶ä½œä¸ºé¢œè‰²åç§°æ¥è½¬æ¢ï¼Œæ¯”å¦‚ green å°±ç¬¦åˆæ¡ä»¶ã€‚ ä¹Ÿæ­£æ˜¯å› ä¸ºè¿™ä¸ªåŸå› ï¼Œæˆ‘ä»¬è¿”å›çš„ RGB è‰²å€¼æ˜¯ rgb(0, 255, 0)ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦ä¹Ÿæ˜¯å­—æ¯ï¼Œè¢«æ‰¯è¿›è¿™ä¸ªåˆ¤æ–­ä¸­å»äº†ã€‚ å†åˆ° Color ç±»çœ‹çœ‹æ¥ä¸‹å»çš„æ­¥éª¤ï¼š public class Color { ... @ColorInt public static int parseColor(@Size(min=1) String colorString) { if (colorString.charAt(0) == '#') { ... } else { Integer color = sColorNameMap.get(colorString.toLowerCase(Locale.ROOT)); if (color != null) { return color; } } throw new IllegalArgumentException(&quot;Unknown color&quot;); } } å…ˆåˆ¤æ–­ä¼ å…¥å­—ç¬¦ä¸²çš„é¦–ä¸ªå­—ç¬¦æ˜¯å¦ä¸º #ï¼Œç”±äºä¸Šä¸€æ­¥å·²ç»åšäº†è¿‡æ»¤ï¼Œæ‰€ä»¥è¿™ä¸€æ­¥å¿…ç„¶æ˜¯ falseï¼Œèµ°ä¸‹é¢çš„ else åˆ†æ”¯ã€‚ä¹Ÿå°±æ˜¯ä» sColorNameMap è¿™ä¸ª Map é‡Œé¢æ ¹æ®é¢œè‰²åç§°æŸ¥æ‰¾å¯¹åº”çš„è‰²å€¼ï¼Œæ¥ä¸‹æ¥çœ‹çœ‹ç³»ç»Ÿé»˜è®¤å®šä¹‰äº†å“ªäº›è‰²å€¼ï¼š public class Color { ... private static final HashMap&lt;String, Integer&gt; sColorNameMap; static { sColorNameMap = new HashMap&lt;&gt;(); sColorNameMap.put(&quot;black&quot;, BLACK); sColorNameMap.put(&quot;darkgray&quot;, DKGRAY); sColorNameMap.put(&quot;gray&quot;, GRAY); sColorNameMap.put(&quot;lightgray&quot;, LTGRAY); sColorNameMap.put(&quot;white&quot;, WHITE); sColorNameMap.put(&quot;red&quot;, RED); sColorNameMap.put(&quot;green&quot;, GREEN); sColorNameMap.put(&quot;blue&quot;, BLUE); sColorNameMap.put(&quot;yellow&quot;, YELLOW); sColorNameMap.put(&quot;cyan&quot;, CYAN); sColorNameMap.put(&quot;magenta&quot;, MAGENTA); sColorNameMap.put(&quot;aqua&quot;, 0xFF00FFFF); sColorNameMap.put(&quot;fuchsia&quot;, 0xFFFF00FF); sColorNameMap.put(&quot;darkgrey&quot;, DKGRAY); sColorNameMap.put(&quot;grey&quot;, GRAY); sColorNameMap.put(&quot;lightgrey&quot;, LTGRAY); sColorNameMap.put(&quot;lime&quot;, 0xFF00FF00); sColorNameMap.put(&quot;maroon&quot;, 0xFF800000); sColorNameMap.put(&quot;navy&quot;, 0xFF000080); sColorNameMap.put(&quot;olive&quot;, 0xFF808000); sColorNameMap.put(&quot;purple&quot;, 0xFF800080); sColorNameMap.put(&quot;silver&quot;, 0xFFC0C0C0); sColorNameMap.put(&quot;teal&quot;, 0xFF008080); } } å¾ˆæ˜æ˜¾ï¼Œä¸ä¼šæœ‰æˆ‘ä»¬ä¼ è¿›æ¥çš„ rgb(0, 255, 0)ï¼Œæ‰€ä»¥ä¼šè¿”å› nullï¼ŒåŒæ—¶æŠ›å‡ºå¼‚å¸¸ã€‚ è¿™å°±æ˜¯ä¸ºä»€ä¹ˆ Html.fromHtml() ä¸èƒ½è§£æ RBG æ ¼å¼é¢œè‰²çš„åŸå› ã€‚ ","link":"https://LiarrDev.github.io/post/Why-FromHtml-Method-cannot-Parse-RGB-Color/"},{"title":"MVN Repository","content":"å¼€å‘ä¸­å¸¸å¸¸éœ€è¦ç”¨åˆ°ä¸€äº›å¼€æºåº“ï¼ŒJava ç³»ï¼ˆåŒ…æ‹¬ Androidï¼‰çš„è®¸å¤šå¼€æºåº“ä¸€èˆ¬éƒ½éƒ¨ç½²åœ¨è¿œç¨‹çš„ Meven ä»“åº“ä¸­ï¼Œç”¨æˆ·åªéœ€è¦åšç®€å•çš„é…ç½®ï¼Œå°±èƒ½ä¾èµ–è¯¥åº“ï¼Œé¿å…äº†ä¼ ç»Ÿä½¿ç”¨æœ¬åœ°æ–‡ä»¶å¯¼å…¥æ–¹å¼çš„ä½æ•ˆç¹çã€‚ æˆ‘ä»¬ä¾èµ–è¿™äº›è¿œç¨‹åº“çš„æ—¶å€™ï¼Œä¸€èˆ¬éœ€è¦ä¸‰ä¸ªå­—æ®µï¼Œä»¥ Android ä¸­å¸¸ç”¨çš„ Gradle é…ç½®ä¸ºä¾‹ï¼Œå†™æ³•ä¸ºï¼š implementation 'com.squareup.okhttp3:okhttp:4.9.3' ä¸‰ä¸ªå­—æ®µåˆ†åˆ«ç”¨å†’å· : åˆ†éš”å¼€ï¼ŒGradle è¿™ç§å†™æ³•çš„å¥½å¤„æ˜¯èƒ½å¤Ÿå‡å°‘äº†å†—ä½™é…ç½®ï¼Œä½†ä¹Ÿå‘æˆ‘ä»¬éšè—äº†è¿™ä¸‰ä¸ªå­—æ®µæ‰€ä»£è¡¨çš„å®é™…æ„ä¹‰ã€‚æˆ‘ä»¬æ”¹ä¸º Maven çš„å†™æ³•å†çœ‹çœ‹ï¼š &lt;dependency&gt; &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt; &lt;artifactId&gt;okhttp&lt;/artifactId&gt; &lt;version&gt;4.9.3&lt;/version&gt; &lt;/dependency&gt; Maven å†™æ³•é‡‡ç”¨äº† XML è¯­æ³•ï¼Œæˆ‘ä»¬å¾ˆå®¹æ˜“å¾—çŸ¥è¿™ä¸‰ä¸ªå­—æ®µåˆ†åˆ«æ˜¯ GroupIdã€ArtifactId å’Œ Versionã€‚å…¶ä¸­ GroupId å¯¹åº”çš„æ˜¯é¡¹ç›®ç»„ç»‡æ ‡è¯†ï¼Œä¸€èˆ¬ä¸º åŸŸå.é¡¹ç›®å çš„æ ¼å¼ï¼›ArtifactId å¯¹åº”çš„æ˜¯é¡¹ç›®åç§°ï¼Œå®ƒçš„ä½œç”¨å¯ä»¥åŒºåˆ†è¿™ä¸ªé¡¹ç›®ä¸‹çš„ä¸€äº›å­åº“æˆ–æ’ä»¶ï¼Œæ¯”å¦‚ OkHttp å°±åŒ…å«äº†ä¸€ä¸ª ArtifactId ä¸º mockwebserver çš„å­åº“ï¼›Version å°±å¾ˆå¥½ç†è§£äº†ï¼Œå°±æ˜¯ç‰ˆæœ¬å·ã€‚ è¿™ä¹ˆé•¿çš„ä¸€æ®µå†…å®¹ï¼Œä½ ä»¬å¹³æ—¶æ˜¯æ€ä¹ˆè®°ä½çš„ï¼Ÿæˆ‘ç›¸ä¿¡æ²¡äººä¼šå»è®°è¿™ä¹ˆä¸€ä¸²ä¸œè¥¿ã€‚é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œé‚£ä½ ä»¬éœ€è¦ç”¨åˆ°çš„æ—¶å€™æ˜¯å¦‚ä½•å»æ‰¾çš„ï¼Ÿ æˆ‘åˆ—ä¸¾ä¸‰ä¸ªæ–¹æ³•ï¼Œçœ‹çœ‹æ˜¯ä¸æ˜¯ä½ ä»¬å¸¸ç”¨çš„ã€‚ ç¬¬ä¸€ï¼Œå®˜ç½‘æ˜¯æœ€æƒå¨çš„ï¼Œæ‰“å¼€æœç´¢å¼•æ“ï¼ˆBaidu / Googleï¼‰ï¼Œè¾“å…¥åº“åç§°ï¼Œç‚¹å‡»æœç´¢ï¼Œåœ¨æœç´¢ç»“æœä¸­æ‰¾åˆ°ç¬¦åˆçš„é€‰é¡¹ï¼Œè¿›å…¥å®˜ç½‘ï¼Œç¿»é˜…åˆ°ä¾èµ–ç›¸å…³çš„å†…å®¹å¤„ï¼Œé€‰ä¸­ï¼Œå¤åˆ¶ï¼Œå†åˆ°é¡¹ç›®ä¸­å»ç²˜è´´ã€‚ ç¬¬äºŒï¼ŒGithub æ˜¯ç¨‹åºå‘˜çš„å¥½æœ‹å‹ï¼Œæ‰“å¼€ Githubï¼Œè¾“å…¥åº“åç§°ï¼Œæœç´¢ï¼Œåœ¨æœç´¢ç»“æœä¸­æ‰¾åˆ°ç¬¦åˆçš„é€‰é¡¹ï¼Œè¿›å…¥é¡¹ç›®ä»“åº“ä¸­ï¼Œæ»šåŠ¨åˆ° READMEï¼Œç¿»é˜…åˆ°ä¾èµ–ç›¸å…³çš„å†…å®¹å¤„ï¼Œé€‰ä¸­ï¼Œå¤åˆ¶ï¼Œå†åˆ°é¡¹ç›®ä¸­å»ç²˜è´´ã€‚ ç¬¬ä¸‰ï¼Œç›´æ¥åˆ©ç”¨ IDE çš„å·¥å…·æœç´¢ï¼Œé€‰æ‹©å¯¹åº”çš„åº“å’Œç‰ˆæœ¬ï¼Œä¸€é”®å¯¼å…¥ï¼š æˆ‘ç®€å•è¯´ä¸‹è¿™ä¸‰ç§æ–¹æ³•çš„ç¼ºç‚¹ã€‚ ç¬¬ä¸€ç§æ–¹æ³•åªé€‚ç”¨äºé¡¹ç›®æœ‰å®˜ç½‘çš„åº“ï¼Œå¦‚æœæ°å¥½è¿™ä¸ªé¡¹ç›®æ²¡æœ‰å®˜ç½‘ï¼Œæˆ–è€…è¯´æ²¡æœ‰è¢«æœç´¢å¼•æ“æ”¶å½•ï¼Œä½¿ç”¨è¿™ç§æ–¹æ³•å°±çŠ¹å¦‚æ— å¤´è‹è‡ã€‚ ç¬¬äºŒç§æ–¹æ³•çš„ä¸¤ä¸ªç¼ºç‚¹æˆ‘è®¤ä¸ºæœ‰ä¸‰ä¸ªï¼Œä¸€æ˜¯ Github æœ¬èº«åœ¨å›½å†…çš„è®¿é—®å°±ä¸æ˜¯ç‰¹åˆ«ç¨³å®šï¼ŒäºŒæ˜¯æœ‰äº›åº“å‘å¸ƒç‰ˆæœ¬æ²¡æœ‰ç”Ÿæˆ Release æ—¥å¿—ï¼Œè¿™ä¼šå¯¼è‡´æˆ‘ä»¬æœ‰æ—¶å€™åªæƒ³æŸ¥è¯¢ç‰ˆæœ¬å·æ—¶ä¸€å®šè¦å»ç¿»é˜… READMEï¼Œä¸‰æ˜¯æœ‰äº›åº“ç”šè‡³ä¸ºäº†æ‡’å¾—æ”¹ README ç›´æ¥å¼•å…¥äº†ç‰ˆæœ¬å›¾ç‰‡å¾½æ ‡ï¼Œåœ¨ä¾èµ–ç¤ºä¾‹å¤„ç›´æ¥ç”¨å ä½ç¬¦ä»£æ›¿ï¼Œè€Œæ°å¥½å›¾ç‰‡å¾½æ ‡åˆä¾èµ–äºå…¶ä»–ç½‘ç«™ï¼Œå½“å…¶ä»–ç½‘ç«™ä¸ç¨³å®šæ—¶ï¼Œè¿™ä¸ªå›¾ç‰‡å¾½æ ‡æ˜¾ç¤ºä¸å‡ºæ¥ï¼Œå¯¼è‡´æ— æ³•å¾—çŸ¥ç‰ˆæœ¬å·ã€‚ ç¬¬ä¸‰ç§æ–¹æ³•ä¸€é”®å¯¼å…¥çœ‹ä¼¼éå¸¸æ–¹ä¾¿ï¼Œä½†æ˜¯è¿™ä¸ªæœç´¢å¼•æ“çœŸçš„å¤ªåºŸäº†ï¼Œå½“ä½ æƒ³æœç´¢ä¸€ä¸ªåº“æ—¶ï¼Œç›´æ¥æœç´¢ ArtifactId æ˜¯ä¸è¡Œçš„ï¼Œå¿…é¡»è¦è¾“å…¥ GroupId å®ƒæ‰èƒ½æœç´¢åˆ°ä½ æƒ³è¦çš„å†…å®¹ï¼Œè€Œé—®é¢˜å°±åœ¨äºæˆ‘ä»¬å¹³å¸¸æ— è®ºæ˜¯äº¤æµè¿˜æ˜¯ä½¿ç”¨ï¼Œéƒ½åªä¼šè®°ä½ ArtifactIdï¼Œæ‰€ä»¥åªèƒ½è¯´è¿™ä¸ªåŠŸèƒ½ç•¥æ˜¾é¸¡è‚‹ã€‚ è¯´äº†è¿™ä¹ˆå¤šï¼Œå°±è¯¥æ¨èä¸€ä¸ªæˆ‘å¸¸ç”¨çš„å·¥å…·äº†ã€‚ ã€MVN Repositoryã€æ˜¯ä¸€ä¸ª Maven åº“çš„æŸ¥è¯¢å·¥å…·ï¼Œä½ åªéœ€è¦è¾“å…¥åº“çš„åç§°ï¼Œå®ƒå°±èƒ½å¤Ÿæ‰¾åˆ°å¯¹åº”åº“çš„å†å²ç‰ˆæœ¬ä¿¡æ¯ï¼Œå¹¶è‡ªåŠ¨ä¸ºä½ ç”Ÿæˆä¾èµ–é…ç½®ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚æˆ‘æƒ³ä¾èµ– Android ä¸­ Lifecycle ç›¸å…³çš„åº“ï¼Œåšè¿‡ Android å¼€å‘çš„è¯ä½ åº”è¯¥çŸ¥é“ï¼Œ Lifecycle ç›¸å…³çš„ä¾èµ–å¯ä¸å°‘ï¼Œæˆ‘å¸Œæœ›å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦é€‰æ‹©ï¼Œé‚£ä¹ˆæ‰“å¼€ã€MVN Repositoryã€è¿›è¡Œæœç´¢ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ¨¡ç³Šæœç´¢èƒ½åŠ›ç›¸æ¯” IDE å†…ç½®çš„å·¥å…·çœŸæ˜¯å¥½å¤ªå¤šäº†ã€‚ ç‚¹è¿›å»æˆ‘æƒ³è¦ä½¿ç”¨çš„åº“ï¼Œä¼šåˆ—å‡ºå„ä¸ªå†å²ç‰ˆæœ¬ï¼Œé™¤äº†æ­£å¼çš„ç¨³å®šç‰ˆæœ¬ä¹‹å¤–ï¼ŒAlphaã€Betaã€RC ç­‰ç‰ˆæœ¬éƒ½æœ‰æ”¶å½•ã€‚ é€‰æ‹©å¯¹åº”çš„ç‰ˆæœ¬è¿›å…¥è¯¦æƒ…é¡µï¼Œè¿™é‡Œç½—åˆ—äº†å¦‚ Licenseã€ä¸»é¡µã€æ›´æ–°æ—¥æœŸç­‰è¯¦ç»†ä¿¡æ¯ï¼Œä¸‹é¢è¿˜ç›´æ¥æä¾›äº†å„æ„å»ºå·¥å…·ä¸‹çš„é…ç½®è¯­æ³•ï¼Œå«æ‹¬äº† Mavenã€Gradleã€SBTã€Ivyã€Grapeã€Leiningenã€Buildr ç­‰å¤šç§æ„å»ºå·¥å…·ã€‚ æ›´è´´å¿ƒçš„æ˜¯ï¼Œä½ æ¯‹éœ€å†æ‰‹åŠ¨é€‰ä¸­å¤åˆ¶ï¼Œåªéœ€ç‚¹å‡»è¯¥ç¼–è¾‘æ¡†ï¼Œå†…å®¹ä¼šè‡ªåŠ¨å¤åˆ¶åˆ°å‰ªåˆ‡æ¿ï¼Œç›´æ¥å» IDE é‡Œé¢ç²˜è´´å°±è¡Œã€‚ å¦å¤–ï¼Œå¯¹äºä¸å¸Œæœ›ä½¿ç”¨è¿œç¨‹ä¾èµ–çš„ç”¨æˆ·ï¼Œé¡µé¢ä¸Šè¿˜æä¾›äº†åº“çš„æ–‡ä»¶ä¸‹è½½åœ°å€ï¼Œè¯¥åœ°å€æŒ‡å‘äº†å…¶å¯¹åº”çš„ Maven è¿œç¨‹ä»“åº“ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥ä¸‹è½½ã€‚ ç½‘ç«™è¿˜æä¾›äº†åº“çš„åˆ†ç±»å’Œæ’ååŠŸèƒ½ï¼Œèƒ½å¤Ÿæ–¹ä¾¿æŒ‰éœ€æŸ¥æ‰¾ã€‚ æ€»çš„æ¥è¯´ï¼Œã€MVN Repositoryã€åŠŸèƒ½ä¸å¤šï¼Œä½†éƒ½æ°åˆ°å¥½å¤„ï¼Œç®€å•æ˜“ç”¨ï¼Œå¯ä»¥ç§°å¾—ä¸Šæ˜¯æé«˜å¼€å‘æ•ˆç‡çš„å°å·¥å…·ï¼Œå°¤å…¶æ˜¯åœ¨é¡¹ç›®æ­å»ºä¹‹åˆï¼Œå®ƒèƒ½å¤ŸèŠ‚çœå¾ˆå¤šæ¥å›æ‰¾åº“çš„æ—¶é—´ã€‚ ","link":"https://LiarrDev.github.io/post/MVN-Repository/"},{"title":"Android å®ç°çŸ­ä¿¡å‘é€","content":"ä¹‹å‰ã€Android å®æ—¶ç›‘å¬çŸ­ä¿¡ã€ä¸€æ–‡ä¸­ç»™å†…éƒ¨å›¢é˜Ÿåšäº†ä¸€ä¸ªçŸ­ä¿¡æ‹¦æˆªåŠŸèƒ½ï¼Œè€Œæœ€è¿‘å›¢é˜Ÿå†…éƒ¨åˆæ¥äº†ä¸€ä¸ªè‡ªåŠ¨å‘é€çŸ­ä¿¡çš„éœ€æ±‚ï¼ŒåŒæ ·é€šè¿‡æµ‹è¯•æœºï¼Œè¯·æ±‚æœåŠ¡ç«¯ï¼Œå½“è¿”å›æœ‰éœ€è¦å‘é€çš„çŸ­ä¿¡æ—¶ï¼Œåˆ™è‡ªåŠ¨é€šè¿‡æœ¬æœºçš„ SIM å¡æœåŠ¡å‘é€ã€‚ å‘é€çŸ­ä¿¡éœ€è¦ç”¨åˆ° SEND_SMS æƒé™ï¼š &lt;manifest ...&gt; &lt;uses-permission android:name=&quot;android.permission.SEND_SMS&quot; /&gt; ... &lt;/manifest&gt; ä¸è¦å¿˜äº†åœ¨ä»£ç ä¸­åŠ¨æ€ç”³è¯·ã€‚ å‘é€çŸ­ä¿¡çš„æ€è·¯å¾ˆç®€å•ï¼Œåªéœ€è¦æä¾›æ”¶ä»¶äººå·ç ã€çŸ­ä¿¡å†…å®¹ï¼Œå°±å¯ä»¥å‘é€ã€‚ ä½†æ˜¯æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œæˆ‘ä»¬å¹³æ—¶æ¥å‘çŸ­ä¿¡æ—¶åº”è¯¥éƒ½èƒ½å‘ç°ï¼Œä¸€äº›å¾ˆé•¿çš„çŸ­ä¿¡ï¼Œæ˜¯ä¸èƒ½å¤Ÿåƒæˆ‘ä»¬å¸¸ç”¨çš„ç¤¾äº¤è½¯ä»¶ï¼ˆæ¯”å¦‚å¾®ä¿¡å’Œ QQï¼‰ä¸€æ ·ä»¥ä¸€æ¡æ¶ˆæ¯å‘é€çš„ï¼Œå®ƒä¼šè¢«åˆ†å‰²æˆå¤šæ¡çŸ­ä¿¡è¿›è¡Œå‘é€ï¼Œä¸€èˆ¬æ¯å•ä½çŸ­ä¿¡æœ€å¤šæ˜¯ 140 ä¸ªè‹±æ–‡å­—ç¬¦æˆ–è€…æ˜¯ 70 ä¸ªæ±‰å­—ç¬¦ï¼Œå¹¶ä¸”æŒ‰æ¡æ”¶è´¹ã€‚ ä¸è¿‡ä¸ç”¨æ‹…å¿ƒè‡ªå·±å¤„ç†èµ·æ¥ä¼šå¤æ‚ï¼ŒAndroid ç³»ç»Ÿæä¾›äº† APIï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨å°±å¥½ã€‚ /** * å‘é€çŸ­ä¿¡ * * @param tel æ”¶ä»¶äººå·ç  * @param text çŸ­ä¿¡å†…å®¹ */ private void sendSms(String tel, String text) { if (TextUtils.isEmpty(tel)) { return; } if (TextUtils.isEmpty(text)) { return; } SmsManager manager = SmsManager.getDefault(); ArrayList&lt;String&gt; messages = manager.divideMessage(text); for (String message : messages) { manager.sendTextMessage(tel, null, message, null, null); } } é¦–å…ˆæ˜¯å¯¹ç”µè¯å·ç å’ŒçŸ­ä¿¡å†…å®¹è¿›è¡Œåˆ¤ç©ºï¼Œç„¶åè·å– SmsManager å®ä¾‹ï¼Œå¹¶ä¸”è°ƒç”¨å®ƒçš„ divideMessage() å¯¹çŸ­ä¿¡è¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²åä¼šè¿”å›ç»™æˆ‘ä»¬ä¸€ä¸ªå­˜æ”¾äº†çŸ­ä¿¡ç‰‡æ®µçš„ ArrayList å¯¹è±¡ï¼Œæˆ‘ä»¬éå†è¿™ä¸ª ArrayListï¼Œå¯¹æ¯ä¸ªçŸ­ä¿¡ç‰‡æ®µéƒ½æ‰§è¡Œ sendTextMessage() å‘é€ã€‚ æˆ‘å°è¯•è¿‡ä¸è°ƒç”¨ divideMessage() å¯¹çŸ­ä¿¡è¿›è¡Œåˆ†å‰²ï¼Œç›´æ¥ä¼ å…¥é•¿å†…å®¹åˆ° sendTextMessage() æ–¹æ³•ï¼Œå‘ç°ç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åšå†…å®¹åˆ‡å‰²ã€‚ sendTextMessage() æœ‰ä¸¤ä¸ªé‡è½½æ–¹æ³•ï¼Œå†…éƒ¨éƒ½æ˜¯è°ƒç”¨ sendTextMessageInternal() å»å¤„ç†ï¼š public final class SmsManager { public void sendTextMessage(String destinationAddress, String scAddress, String text, PendingIntent sentIntent, PendingIntent deliveryIntent) { sendTextMessageInternal( destinationAddress, scAddress, text, sentIntent, deliveryIntent, true, getOpPackageName(), getAttributionTag(), 0L ); } public void sendTextMessage(@NonNull String destinationAddress, @Nullable String scAddress, @NonNull String text, @Nullable PendingIntent sentIntent, @Nullable PendingIntent deliveryIntent, long messageId) { sendTextMessageInternal( destinationAddress, scAddress, text, sentIntent, deliveryIntent, true, getOpPackageName(), getAttributionTag(), messageId ); } } ç®€å•è¯´ä¸‹è¿™å‡ ä¸ªå‚æ•°çš„ä½œç”¨ã€‚destinationAddress å°±æ˜¯æ”¶ä»¶äººå·ç ï¼›scAddress æŒ‡çŸ­ä¿¡æœåŠ¡ä¸­å¿ƒå·ç ï¼Œå¦‚æœä¸º null å°±ä¼šä½¿ç”¨å½“å‰é»˜è®¤çš„çŸ­ä¿¡æœåŠ¡ä¸­å¿ƒï¼Œtext å°±æ˜¯è¦å‘é€çš„å†…å®¹ï¼›sentIntent æ˜¯ä¸€ä¸ª PendingIntent å¯¹è±¡ï¼Œç”¨äºç›‘å¬çŸ­ä¿¡å‘é€æ˜¯å¦æˆåŠŸï¼Œå¦‚æœä¸ä¸º nullï¼Œåœ¨çŸ­ä¿¡å‘é€æˆåŠŸæˆ–å¤±è´¥æ—¶ç³»ç»Ÿä¼šå¹¿æ’­æ­¤ PendingIntentï¼›deliveryIntent ä¹Ÿæ˜¯ä¸ª PendingIntent å¯¹è±¡ï¼Œç”¨äºç›‘å¬çŸ­ä¿¡æ¥æ”¶æ˜¯å¦æˆåŠŸï¼Œå¦‚æœä¸ä¸º nullï¼Œåœ¨å°†æ¶ˆæ¯ä¼ é€’ç»™æ”¶ä»¶äººæ—¶ç³»ç»Ÿä¼šå¹¿æ’­æ­¤ PendingIntentï¼›messageId æ˜¯å”¯ä¸€æ ‡è¯†è¯·æ±‚å‘é€çš„æ¶ˆæ¯ IDï¼Œç”¨äºè®°å½•å’Œè¯Šæ–­ï¼Œé»˜è®¤ä¸º 0ã€‚ ä¸Šæ–¹ç¤ºä¾‹ä»£ç ä¸­ï¼Œæˆ‘å¯¹ä¸¤ä¸ª PendingIntent çš„å‚æ•°éƒ½ä¼ å…¥äº† nullï¼Œå³ä¸ç›‘å¬çŸ­ä¿¡å‘é€å’Œæ¥æ”¶ç»“æœï¼Œä½†ä¸Šçº¿è¿‡ç¨‹ä¸­çš„ç¡®æœ‰é‡åˆ°å‘é€å¤±è´¥çš„æƒ…å†µï¼Œæ‰€ä»¥ä¸ºäº†æ›´å¥½çš„æ’æŸ¥é—®é¢˜ï¼Œå»ºè®®å®é™…å¼€å‘è¿˜æ˜¯è¦æŠŠè¿™ä¸¤ä¸ªç›‘å¬åŠ ä¸Šï¼Œå†™ä¸ª BroadcastReceiver åˆ¤æ–­ç»“æœå¤„ç†å³å¯ï¼Œå¹¶ä¸å¤æ‚ï¼Œè¿™é‡Œå°±ä¸æ¼”ç¤ºäº†ã€‚ çŸ­ä¿¡åˆ†å‰²çš„å½¢å¼ï¼Œå®é™…ä¸Šæ˜¯ 2G æ—¶ä»£çš„äº§ç‰©ï¼Œå½“æ—¶å¤§å®¶åŸºæœ¬ä¸Šç”¨çš„éƒ½æ˜¯å°çµé€šè¯ºåŸºäºšï¼Œå±å¹•å°ºå¯¸ä¹Ÿå°± 3 è‹±å¯¸å·¦å³ï¼ˆç¬¬ä¸€ä»£ Android æ‰‹æœº HTC G1 ä¸º 3.17 è‹±å¯¸ï¼‰ï¼Œæ˜¾ç¤ºçš„åŒºåŸŸå°æ— å¯åšéï¼Œä½†æ”¾åˆ°ç°åœ¨çš„ 5G æ—¶ä»£æ¥çœ‹ï¼Œå¯ä»¥è¯´æ˜¯å®Œå…¨æ²¡å¿…è¦çš„ï¼Œç°åœ¨å¸‚é¢ä¸ŠåŸºæœ¬éƒ½æ˜¯ 5 è‹±å¯¸ä»¥ä¸Šçš„å¤§å±æ‰‹æœºï¼ŒçŸ­ä¿¡åˆ†å‰²äº¤äº’éå¸¸ä¸å‹å¥½ã€‚ äºæ˜¯æˆ‘æŸ¥é˜…æ–‡æ¡£ï¼Œå‘ç°ç³»ç»Ÿåœ¨ Android 4.4ï¼ˆKitKatï¼ŒAPI 19ï¼‰æä¾›äº†æ–°çš„æ–¹æ³•ï¼Œå…è®¸æˆ‘ä»¬å°†é•¿ä¿¡æ¯ä»¥ä¸€æ¡çš„æ ·å¼å‘é€ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸Šé¢çš„æ–¹æ³•å¯ä»¥æ”¹ä¸ºï¼š /** * å‘é€çŸ­ä¿¡ * * @param tel æ”¶ä»¶äººå·ç  * @param text çŸ­ä¿¡å†…å®¹ */ private void sendSms(String tel, String text) { if (TextUtils.isEmpty(tel)) { return; } if (TextUtils.isEmpty(text)) { return; } SmsManager manager = SmsManager.getDefault(); ArrayList&lt;String&gt; messages = manager.divideMessage(text); manager.sendMultipartTextMessage(tel, null, messages, null, null); } ä¸»è¦æ˜¯æ”¹ç”¨äº† sendMultipartTextMessage() æ–¹æ³•æ¥å‘é€çŸ­ä¿¡ï¼Œå‚æ•°åŠé€»è¾‘ä¸ sendTextMessage() æ¯”è¾ƒç±»ä¼¼ï¼ŒåŒæ ·æ˜¯éœ€è¦å¯¹çŸ­ä¿¡è¿›è¡Œåˆ†å‰²ï¼Œåˆ†å‰²åå¾—åˆ°çš„ ArrayList å¯¹è±¡ä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨éå†å‘é€ï¼Œç›´æ¥äº¤ç»™ sendMultipartTextMessage() æ–¹æ³•å¤„ç†ã€‚ è¿™é‡Œæ³¨æ„ï¼Œæˆ‘ä¸Šé¢çš„æè¿°æ˜¯ä»¥ä¸€æ¡çš„ã€Œæ ·å¼ã€å‘é€ï¼Œå®é™…ä¸Šï¼Œè¿è¥å•†çš„è®¡è´¹è§„åˆ™æ²¡æœ‰å˜åŒ–ï¼Œå½“å†…å®¹è¿‡é•¿æ—¶ï¼Œå®ƒä¾ç„¶ä¼šå¯¹å†…å®¹è¿›è¡Œåˆ†å‰²ï¼ŒæŒ‰åˆ†å‰²çš„æ¡æ•°è®¡è´¹ã€‚åªä¸è¿‡åœ¨çŸ­ä¿¡ App æ˜¾ç¤ºæ—¶ï¼Œå®ƒä¼šä»¥ä¸€æ¡çš„æ ·å¼è¿›è¡Œå±•ç¤ºã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Send-SMS-Message-in-Android/"},{"title":"Design Pattern: Singleton Pattern","content":"åœ¨æœ‰äº›ç³»ç»Ÿä¸­ï¼Œä¸ºäº†èŠ‚çœå†…å­˜èµ„æºã€ä¿è¯æ•°æ®å†…å®¹çš„ä¸€è‡´æ€§ï¼Œå¯¹æŸäº›ç±»è¦æ±‚åªèƒ½åˆ›å»ºä¸€ä¸ªå®ä¾‹ï¼Œè¿™å°±æ˜¯æ‰€è°“çš„ Singleton Patternï¼Œä¹Ÿå°±å•ä¾‹æ¨¡å¼ã€‚ è¿™ç§ç±»å‹çš„è®¾è®¡æ¨¡å¼å±äºåˆ›å»ºå‹æ¨¡å¼ï¼Œå®ƒæä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æœ€ä½³æ–¹å¼ã€‚ è¿™ç§æ¨¡å¼æ¶‰åŠåˆ°ä¸€ä¸ªå•ä¸€çš„ç±»ï¼Œè¯¥ç±»è´Ÿè´£åˆ›å»ºè‡ªå·±çš„å¯¹è±¡ï¼ŒåŒæ—¶ç¡®ä¿åªæœ‰å•ä¸ªå¯¹è±¡è¢«åˆ›å»ºã€‚è¿™ä¸ªç±»æä¾›äº†ä¸€ç§è®¿é—®å…¶å”¯ä¸€çš„å¯¹è±¡çš„æ–¹å¼ï¼Œå¯ä»¥ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦å®ä¾‹åŒ–è¯¥ç±»çš„å¯¹è±¡ã€‚ åœ¨è®¡ç®—æœºç³»ç»Ÿä¸­ï¼Œçº¿ç¨‹æ± ã€ç¼“å­˜ã€æ—¥å¿—å¯¹è±¡ã€å¯¹è¯æ¡†ã€æ‰“å°æœºã€æ˜¾å¡çš„é©±åŠ¨ç¨‹åºå¯¹è±¡å¸¸è¢«è®¾è®¡æˆå•ä¾‹ï¼Œè¿™äº›åº”ç”¨éƒ½æˆ–å¤šæˆ–å°‘å…·æœ‰èµ„æºç®¡ç†å™¨çš„åŠŸèƒ½ã€‚æ¯å°è®¡ç®—æœºå¯ä»¥æœ‰è‹¥å¹²ä¸ªæ‰“å°æœºï¼Œä½†åªèƒ½æœ‰ä¸€ä¸ª Printer Spoolerï¼Œä»¥é¿å…ä¸¤ä¸ªæ‰“å°ä½œä¸šåŒæ—¶è¾“å‡ºåˆ°æ‰“å°æœºä¸­ï¼›æ¯å°è®¡ç®—æœºå¯ä»¥æœ‰è‹¥å¹²é€šä¿¡ç«¯å£ï¼Œç³»ç»Ÿåº”å½“é›†ä¸­ç®¡ç†è¿™äº›é€šä¿¡ç«¯å£ï¼Œä»¥é¿å…ä¸€ä¸ªé€šä¿¡ç«¯å£åŒæ—¶è¢«ä¸¤ä¸ªè¯·æ±‚åŒæ—¶è°ƒç”¨ã€‚ åœ¨ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¸¸ç”¨çš„ç½‘ç»œè¯·æ±‚æ¡†æ¶ã€OkHttpã€ï¼Œå®˜æ–¹å°±å»ºè®® OkHttpClient å®ä¾‹ä»…æ–°å»ºä¸€æ¬¡ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿå¯ä»¥åšæˆå•ä¾‹æ¨¡å¼ã€‚ æ€»ä¹‹ï¼Œé€‰æ‹©å•ä¾‹æ¨¡å¼å°±æ˜¯ä¸ºäº†é¿å…ä¸ä¸€è‡´çŠ¶æ€ï¼Œé¿å…æ”¿å‡ºå¤šå¤´ã€‚ ç‰¹ç‚¹ å•ä¾‹ç±»åªèƒ½æœ‰ä¸€ä¸ªå®ä¾‹ã€‚ å•ä¾‹ç±»å¿…é¡»è‡ªå·±åˆ›å»ºè‡ªå·±çš„å”¯ä¸€å®ä¾‹ã€‚ å•ä¾‹ç±»å¿…é¡»ç»™æ‰€æœ‰å…¶ä»–å¯¹è±¡æä¾›è¿™ä¸€å®ä¾‹ã€‚ ä¼˜ç¼ºç‚¹ ä¼˜ç‚¹ åœ¨å†…å­˜é‡Œåªæœ‰ä¸€ä¸ªå®ä¾‹ï¼Œå‡å°‘äº†å†…å­˜çš„å¼€é”€ï¼Œå°¤å…¶æ˜¯é¢‘ç¹çš„åˆ›å»ºå’Œé”€æ¯å®ä¾‹ï¼ˆæ¯”å¦‚ç®¡ç†å­¦é™¢é¦–é¡µé¡µé¢ç¼“å­˜ï¼‰ã€‚ é¿å…å¯¹èµ„æºçš„å¤šé‡å ç”¨ï¼ˆæ¯”å¦‚å†™æ–‡ä»¶æ“ä½œï¼‰ã€‚ å¯ä»¥åœ¨ç³»ç»Ÿè®¾ç½®å…¨å±€çš„è®¿é—®ç‚¹ï¼Œä¼˜åŒ–å’Œå…±äº«èµ„æºè®¿é—®ï¼ˆæ¯”å¦‚å¯ä»¥è®¾è®¡ä¸€ä¸ªå•ä¾‹ç±»è´Ÿè´£æ‰€æœ‰æ•°æ®è¡¨çš„æ˜ å°„å¤„ç†ï¼‰ã€‚ ç¼ºç‚¹ æ²¡æœ‰æ¥å£ï¼Œä¸èƒ½ç»§æ‰¿ï¼Œä¸å•ä¸€èŒè´£åŸåˆ™å†²çªï¼Œä¸€ä¸ªç±»åº”è¯¥åªå…³å¿ƒå†…éƒ¨é€»è¾‘ï¼Œè€Œä¸å…³å¿ƒå¤–é¢æ€ä¹ˆæ ·æ¥å®ä¾‹åŒ–ã€‚ å®ç° é€šå¸¸ï¼Œæ™®é€šç±»çš„æ„é€ å‡½æ•°æ˜¯å…¬æœ‰çš„ï¼Œå¤–éƒ¨ç±»å¯ä»¥é€šè¿‡ new æ„é€ å‡½æ•°æ¥ç”Ÿæˆå¤šä¸ªå®ä¾‹ã€‚ä½†æ˜¯ï¼Œå¦‚æœå°†ç±»çš„æ„é€ å‡½æ•°è®¾ä¸ºç§æœ‰çš„ï¼Œå¤–éƒ¨ç±»å°±æ— æ³•è°ƒç”¨è¯¥æ„é€ å‡½æ•°ï¼Œä¹Ÿå°±æ— æ³•ç”Ÿæˆå¤šä¸ªå®ä¾‹ã€‚è¿™æ—¶è¯¥ç±»è‡ªèº«å¿…é¡»å®šä¹‰ä¸€ä¸ªé™æ€ç§æœ‰å®ä¾‹ï¼Œå¹¶å‘å¤–æä¾›ä¸€ä¸ªé™æ€çš„å…¬æœ‰å‡½æ•°ç”¨äºåˆ›å»ºæˆ–è·å–è¯¥é™æ€ç§æœ‰å®ä¾‹ã€‚ ç»“æ„å¦‚ä¸‹ï¼š å•ä¾‹æ¨¡å¼æœ‰å¤šç§åˆ›å»ºçš„æ–¹å¼ï¼Œå„æœ‰åˆ©å¼Šï¼Œæœ€å¸¸ç”¨çš„æœ‰æ‡’æ±‰å¼å’Œé¥¿æ±‰å¼ï¼Œä¸‹é¢ä¸€ä¸€è®²è§£ã€‚ Lazyï¼šæ‡’æ±‰å¼ æ‡’æ±‰å¼å…¶å®æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶æ‡’ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™å°±ä¸ç€æ€¥ï¼Œä¸€ç›´ç­‰åˆ°é©¬ä¸Šè¦ä½¿ç”¨å¯¹è±¡å®ä¾‹çš„æ—¶å€™æ‰ä¼šåˆ›å»ºï¼Œæ‡’äººå˜›ï¼Œæ€»æ˜¯æ¨è„±ä¸å¼€çš„æ—¶å€™æ‰ä¼šçœŸæ­£å»æ‰§è¡Œå·¥ä½œï¼Œå› æ­¤åœ¨è£…è½½å¯¹è±¡çš„æ—¶å€™ä¸åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚ public class Singleton { private static Singleton instance; private Singleton () {} public static Singleton getInstance() { if (instance == null) { instance = new Singleton(); } return instance; } } è¿™æ®µä»£ç ç®€å•æ˜äº†ï¼Œè€Œä¸”ä½¿ç”¨äº†æ‡’åŠ è½½æ¨¡å¼ï¼Œä½†æ˜¯å´å­˜åœ¨è‡´å‘½çš„é—®é¢˜ã€‚å½“æœ‰å¤šä¸ªçº¿ç¨‹å¹¶è¡Œè°ƒç”¨ getInstance() çš„æ—¶å€™ï¼Œå°±ä¼šåˆ›å»ºå¤šä¸ªå®ä¾‹ã€‚ä¹Ÿå°±æ˜¯è¯´åœ¨å¤šçº¿ç¨‹ä¸‹ä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œæ˜¯çº¿ç¨‹ä¸å®‰å…¨çš„åˆ›å»ºæ–¹å¼ã€‚ æˆ‘ä»¬å¯ä»¥æ”¹è¿›ä¸€ä¸‹ï¼š public class Singleton { private static Singleton instance; private Singleton () {} public static synchronized Singleton getInstance() { if (instance == null) { instance = new Singleton(); } return instance; } } è™½ç„¶åšåˆ°äº†çº¿ç¨‹å®‰å…¨ï¼Œå¹¶ä¸”è§£å†³äº†å¤šå®ä¾‹çš„é—®é¢˜ï¼Œä½†æ˜¯å®ƒå¹¶ä¸é«˜æ•ˆï¼Œå› ä¸ºåœ¨ä»»ä½•æ—¶å€™åªèƒ½æœ‰ä¸€ä¸ªçº¿ç¨‹è°ƒç”¨ getInstance() æ–¹æ³•ï¼Œè€ŒåŒæ­¥æ“ä½œåªåœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨æ—¶æ‰è¢«éœ€è¦ï¼Œå³ç¬¬ä¸€æ¬¡åˆ›å»ºå•ä¾‹å®ä¾‹å¯¹è±¡æ—¶ï¼Œæ‰€ä»¥ä¼šé€ æˆä¸å¿…è¦çš„åŒæ­¥å¼€é”€ã€‚ è¿™å°±å¼•å‡ºäº†åŒé‡æ£€éªŒé”ã€‚ Double-Checked Lockingï¼šåŒé‡æ£€éªŒé” åŒé‡æ£€éªŒé”æ¨¡å¼ï¼ˆDouble-Checked Locking Patternï¼‰æ˜¯ä¸€ç§ä½¿ç”¨åŒæ­¥å—åŠ é”çš„æ–¹æ³•ï¼Œç¨‹åºå‘˜ç§°å…¶ä¸ºåŒé‡æ£€æŸ¥é”ï¼Œå› ä¸ºä¼šæœ‰ä¸¤æ¬¡æ£€æŸ¥å®ä¾‹æ˜¯å¦ä¸º nullï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å¤–ï¼Œä¸€æ¬¡æ˜¯åœ¨åŒæ­¥å—å†…ã€‚ä¸ºä»€ä¹ˆåœ¨åŒæ­¥å—å†…è¿˜è¦å†æ£€éªŒä¸€æ¬¡ï¼Ÿå› ä¸ºå¯èƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹ä¸€èµ·è¿›å…¥åŒæ­¥å—å¤–çš„ ifï¼Œå¦‚æœåœ¨åŒæ­¥å—å†…ä¸è¿›è¡ŒäºŒæ¬¡æ£€éªŒçš„è¯å°±ä¼šç”Ÿæˆå¤šä¸ªå®ä¾‹äº†ã€‚ public class Singleton { private static Singleton instance; private Singleton () {} public static Singleton getSingleton() { if (instance == null) { // Single Checked synchronized (Singleton.class) { if (instance == null) { // Double Checked instance = new Singleton(); } } } return instance; } } è¿™æ®µä»£ç çœ‹èµ·æ¥å¾ˆå®Œç¾ï¼Œå¾ˆå¯æƒœï¼Œå®ƒæ˜¯æœ‰é—®é¢˜ã€‚ä¸»è¦åœ¨äº instance = new Singleton() è¿™å¥ï¼Œè¿™å¹¶éæ˜¯ä¸€ä¸ªåŸå­æ“ä½œï¼Œäº‹å®ä¸Šåœ¨ JVM ä¸­è¿™å¥è¯å¤§æ¦‚åšäº†ä¸‹é¢ 3 ä»¶äº‹æƒ…: ç»™ instance åˆ†é…å†…å­˜ï¼› è°ƒç”¨ Singleton çš„æ„é€ å‡½æ•°æ¥åˆå§‹åŒ–æˆå‘˜å˜é‡ï¼› å°† instance å¯¹è±¡æŒ‡å‘åˆ†é…çš„å†…å­˜ç©ºé—´ï¼ˆæ‰§è¡Œå®Œè¿™æ­¥ instance å°±ä¸ºé null äº†ï¼‰ã€‚ ä½†æ˜¯ï¼Œåœ¨ JVM çš„å³æ—¶ç¼–è¯‘å™¨ä¸­å­˜åœ¨æŒ‡ä»¤é‡æ’åºçš„ä¼˜åŒ–ï¼Œä¹Ÿå°±æ˜¯è¯´ä¸Šé¢çš„ç¬¬äºŒæ­¥å’Œç¬¬ä¸‰æ­¥çš„é¡ºåºæ˜¯ä¸èƒ½ä¿è¯çš„ï¼Œæœ€ç»ˆçš„æ‰§è¡Œé¡ºåºå¯èƒ½æ˜¯ 1â†’2â†’3ï¼Œä¹Ÿå¯èƒ½æ˜¯ 1â†’3â†’2ã€‚å¦‚æœæ˜¯åè€…ï¼Œåˆ™åœ¨ 3 æ‰§è¡Œå®Œæ¯•ä¸” 2 æœªæ‰§è¡Œä¹‹å‰ï¼Œè¢«çº¿ç¨‹äºŒæŠ¢å äº†ï¼Œè¿™æ—¶ instance å·²ç»æ˜¯é null äº†ï¼ˆä½†å´æ²¡æœ‰åˆå§‹åŒ–ï¼‰ï¼Œæ‰€ä»¥çº¿ç¨‹äºŒä¼šç›´æ¥è¿”å› instanceï¼Œç„¶åä½¿ç”¨ï¼Œç„¶åé¡ºç†æˆç« åœ°æŠ¥é”™ã€‚ å…¶å®åªéœ€è¦å°† instance å˜é‡å£°æ˜æˆ volatile å°±å¯ä»¥äº†ã€‚ public class Singleton { private volatile static Singleton instance; // å£°æ˜æˆ volatile private Singleton () {} public static Singleton getSingleton() { if (instance == null) { synchronized (Singleton.class) { if (instance == null) { instance = new Singleton(); } } } return instance; } } æœ‰äº›äººè®¤ä¸ºä½¿ç”¨ volatile çš„åŸå› æ˜¯å¯è§æ€§ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥ä¿è¯çº¿ç¨‹åœ¨æœ¬åœ°ä¸ä¼šå­˜æœ‰ instance çš„å‰¯æœ¬ï¼Œæ¯æ¬¡éƒ½æ˜¯å»ä¸»å†…å­˜ä¸­è¯»å–ã€‚ ä½†å…¶å®æ˜¯ä¸å¯¹çš„ï¼Œä½¿ç”¨ volatile çš„ä¸»è¦åŸå› æ˜¯å…¶å¦ä¸€ä¸ªç‰¹æ€§ï¼šç¦æ­¢æŒ‡ä»¤é‡æ’åºä¼˜åŒ–ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨ volatile å˜é‡çš„èµ‹å€¼æ“ä½œåé¢ä¼šæœ‰ä¸€ä¸ªå†…å­˜å±éšœï¼ˆç”Ÿæˆçš„æ±‡ç¼–ä»£ç ä¸Šï¼‰ï¼Œè¯»æ“ä½œä¸ä¼šè¢«é‡æ’åºåˆ°å†…å­˜å±éšœä¹‹å‰ã€‚æ¯”å¦‚ä¸Šé¢çš„ä¾‹å­ï¼Œå–æ“ä½œå¿…é¡»åœ¨æ‰§è¡Œå®Œ 1â†’2â†’3 ä¹‹åæˆ–è€… 1â†’3â†’2 ä¹‹åï¼Œä¸å­˜åœ¨æ‰§è¡Œåˆ° 1â†’3 ç„¶åå–åˆ°å€¼çš„æƒ…å†µã€‚ ä»ã€Œå…ˆè¡Œå‘ç”ŸåŸåˆ™ã€çš„è§’åº¦ç†è§£çš„è¯ï¼Œå°±æ˜¯å¯¹äºä¸€ä¸ª volatile å˜é‡çš„å†™æ“ä½œéƒ½å…ˆè¡Œå‘ç”Ÿäºåé¢å¯¹è¿™ä¸ªå˜é‡çš„è¯»æ“ä½œï¼ˆè¿™é‡Œçš„â€œåé¢â€æ˜¯æ—¶é—´ä¸Šçš„å…ˆåé¡ºåºï¼‰ã€‚ ç‰¹åˆ«æ³¨æ„ï¼Œåœ¨ Java 5 ä»¥å‰çš„ç‰ˆæœ¬ä½¿ç”¨äº† volatile çš„åŒæ£€é”è¿˜æ˜¯æœ‰é—®é¢˜çš„ã€‚å…¶åŸå› æ˜¯ Java 5 ä»¥å‰çš„ JMMï¼ˆJava Memory Modelï¼ŒJava å†…å­˜æ¨¡å‹ï¼‰æ˜¯å­˜åœ¨ç¼ºé™·çš„ï¼Œå³ä½¿å°†å˜é‡å£°æ˜æˆ volatile ä¹Ÿä¸èƒ½å®Œå…¨é¿å…é‡æ’åºï¼Œä¸»è¦æ˜¯ volatile å˜é‡å‰åçš„ä»£ç ä»ç„¶å­˜åœ¨é‡æ’åºé—®é¢˜ã€‚è¿™ä¸ª volatile å±è”½é‡æ’åºçš„é—®é¢˜åœ¨ Java 5 ä¸­æ‰å¾—ä»¥ä¿®å¤ï¼Œæ‰€ä»¥åœ¨è¿™ä¹‹åæ‰å¯ä»¥æ”¾å¿ƒä½¿ç”¨ volatileã€‚ ç›¸ä¿¡ä½ ä¸ä¼šå–œæ¬¢è¿™ç§å¤æ‚åˆéšå«é—®é¢˜çš„æ–¹å¼ï¼Œå½“ç„¶æˆ‘ä»¬æœ‰æ›´å¥½çš„å®ç°çº¿ç¨‹å®‰å…¨çš„å•ä¾‹æ¨¡å¼çš„åŠæ³•ã€‚ Hungryï¼šé¥¿æ±‰å¼ é¥¿æ±‰å¼å…¶å®æ˜¯ä¸€ç§æ¯”è¾ƒå½¢è±¡çš„ç§°è°“ã€‚æ—¢ç„¶é¥¿ï¼Œé‚£ä¹ˆåœ¨åˆ›å»ºå¯¹è±¡å®ä¾‹çš„æ—¶å€™å°±æ¯”è¾ƒç€æ€¥ï¼Œé¥¿äº†å˜›ï¼Œäºæ˜¯åœ¨è£…è½½ç±»çš„æ—¶å€™å°±åˆ›å»ºå¯¹è±¡å®ä¾‹ã€‚ è¿™ç§æ–¹æ³•éå¸¸ç®€å•ï¼Œå› ä¸ºå•ä¾‹çš„å®ä¾‹è¢«å£°æ˜æˆ static å’Œ final å˜é‡äº†ï¼Œåœ¨ç¬¬ä¸€æ¬¡åŠ è½½ç±»åˆ°å†…å­˜ä¸­æ—¶å°±ä¼šåˆå§‹åŒ–ï¼Œæ‰€ä»¥åˆ›å»ºå®ä¾‹æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚ public class Singleton { private static final Singleton instance = new Singleton(); // ç±»åŠ è½½æ—¶å°±åˆå§‹åŒ– private Singleton() {} public static Singleton getInstance() { return instance; } } ç¼ºç‚¹æ˜¯å®ƒä¸æ˜¯ä¸€ç§æ‡’åŠ è½½æ¨¡å¼ï¼ˆLazy Initializationï¼‰ï¼Œå•ä¾‹ä¼šåœ¨åŠ è½½ç±»åä¸€å¼€å§‹å°±è¢«åˆå§‹åŒ–ï¼Œå³ä½¿å®¢æˆ·ç«¯æ²¡æœ‰è°ƒç”¨ getInstance() æ–¹æ³•ã€‚ é¥¿æ±‰å¼çš„åˆ›å»ºæ–¹å¼åœ¨ä¸€äº›åœºæ™¯ä¸­å°†æ— æ³•ä½¿ç”¨ï¼šè­¬å¦‚ Singleton å®ä¾‹çš„åˆ›å»ºæ˜¯ä¾èµ–å‚æ•°æˆ–è€…é…ç½®æ–‡ä»¶çš„ï¼Œåœ¨ getInstance() ä¹‹å‰å¿…é¡»è°ƒç”¨æŸä¸ªæ–¹æ³•è®¾ç½®å‚æ•°ç»™å®ƒï¼Œé‚£æ ·è¿™ç§å•ä¾‹å†™æ³•å°±æ— æ³•ä½¿ç”¨äº†ã€‚ Static Nested Classï¼šé™æ€å†…éƒ¨ç±» è¿™ç§æ–¹æ³•ä¹Ÿæ˜¯ã€ŠEffective Javaã€‹ä¸Šæ‰€æ¨èçš„ã€‚ public class Singleton { private static class SingletonHolder { private static final Singleton INSTANCE = new Singleton(); } private Singleton () {} public static final Singleton getInstance() { return SingletonHolder.INSTANCE; } } è¿™ç§å†™æ³•ä»ç„¶ä½¿ç”¨ JVM æœ¬èº«æœºåˆ¶ä¿è¯äº†çº¿ç¨‹å®‰å…¨é—®é¢˜ã€‚ç”±äºé™æ€å•ä¾‹å¯¹è±¡æ²¡æœ‰ä½œä¸º Singleton çš„æˆå‘˜å˜é‡ç›´æ¥å®ä¾‹åŒ–ï¼Œå› æ­¤ç±»åŠ è½½æ—¶ä¸ä¼šå®ä¾‹åŒ– Singletonï¼Œç¬¬ä¸€æ¬¡è°ƒç”¨ getInstance() æ—¶å°†åŠ è½½å†…éƒ¨ç±» SingletonHolderï¼Œåœ¨è¯¥å†…éƒ¨ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ª static ç±»å‹çš„å˜é‡ INSTANCEï¼Œæ­¤æ—¶ä¼šé¦–å…ˆåˆå§‹åŒ–è¿™ä¸ªæˆå‘˜å˜é‡ï¼Œç”± Java è™šæ‹Ÿæœºæ¥ä¿è¯å…¶çº¿ç¨‹å®‰å…¨æ€§ï¼Œç¡®ä¿è¯¥æˆå‘˜å˜é‡åªèƒ½åˆå§‹åŒ–ä¸€æ¬¡ã€‚ç”±äº getInstance() æ–¹æ³•æ²¡æœ‰ä»»ä½•çº¿ç¨‹é”å®šï¼Œå› æ­¤å…¶æ€§èƒ½ä¸ä¼šé€ æˆä»»ä½•å½±å“ã€‚ ç”±äº SingletonHolder æ˜¯ç§æœ‰çš„ï¼Œé™¤äº† getInstance() ä¹‹å¤–æ²¡æœ‰åŠæ³•è®¿é—®å®ƒï¼Œå› æ­¤å®ƒæ˜¯æ‡’æ±‰å¼çš„ï¼›åŒæ—¶è¯»å–å®ä¾‹çš„æ—¶å€™ä¸ä¼šè¿›è¡ŒåŒæ­¥ï¼Œæ²¡æœ‰æ€§èƒ½ç¼ºé™·ï¼›ä¹Ÿä¸ä¾èµ– JDK ç‰ˆæœ¬ã€‚ Enumï¼šæšä¸¾ ç”¨æšä¸¾å†™å•ä¾‹å®åœ¨å¤ªç®€å•äº†ï¼è¿™ä¹Ÿæ˜¯å®ƒæœ€å¤§çš„ä¼˜ç‚¹ã€‚ public enum Singleton { INSTANCE; } æˆ‘ä»¬å¯ä»¥é€šè¿‡ Singleton.INSTANCE æ¥è®¿é—®å®ä¾‹ï¼Œè¿™æ¯”è°ƒç”¨ getInstance() æ–¹æ³•ç®€å•å¤šäº†ã€‚åˆ›å»ºæšä¸¾é»˜è®¤å°±æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦æ‹…å¿ƒ Double Checked Lockingï¼Œè€Œä¸”è¿˜èƒ½é˜²æ­¢ååºåˆ—åŒ–å¯¼è‡´é‡æ–°åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚ è¿™ç§å®ç°æ–¹å¼å®é™…ä¸Šè¿˜æ²¡æœ‰è¢«å¹¿æ³›é‡‡ç”¨ï¼Œä½†è¿™æ˜¯å®ç°å•ä¾‹æ¨¡å¼çš„æœ€ä½³æ–¹æ³•ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ã€ŠEffective Javaã€‹ä½œè€… Josh Bloch æå€¡çš„æ–¹å¼ã€‚ä¸è¿‡ï¼Œç”±äº Java 5 ä¹‹åæ‰åŠ å…¥ enum ç‰¹æ€§ï¼Œç”¨è¿™ç§æ–¹å¼å†™ä¸å…è®©äººæ„Ÿè§‰ç”Ÿç–ï¼Œåœ¨å®é™…å·¥ä½œä¸­ï¼Œä¹Ÿå¾ˆå°‘ç”¨ã€‚ æ€»ç»“ ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå•ä¾‹æ¨¡å¼æœ‰ä¸Šè¿°äº”ç§å®ç°æ–¹æ³•ï¼Œä¹Ÿéƒ½ç»™å‡ºäº†çº¿ç¨‹å®‰å…¨çš„å®ç°ã€‚ å¤§å¤šæ•°æƒ…å†µä¸‹ç›´æ¥ä½¿ç”¨é¥¿æ±‰å¼å³å¯ï¼›å¦‚æœæ˜ç¡®è¦æ±‚è¦æ‡’åŠ è½½ï¼ˆLazy Initializationï¼‰å€¾å‘äºä½¿ç”¨é™æ€å†…éƒ¨ç±»ï¼Œä¸å»ºè®®ç›´æ¥ä½¿ç”¨æ‡’æ±‰å¼ï¼›å¦‚æœæ¶‰åŠåˆ°ååºåˆ—åŒ–åˆ›å»ºå¯¹è±¡æ—¶ä¼šè¯•ç€ä½¿ç”¨æšä¸¾çš„æ–¹å¼æ¥å®ç°ï¼›å¦‚æœæœ‰å…¶ä»–ç‰¹æ®Šçš„éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨åŒæ£€é”æ–¹å¼ã€‚ ","link":"https://LiarrDev.github.io/post/Design-Pattern-Singleton/"},{"title":"Windows å¹³å° Flutter å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°","content":"æœ€è¿‘é—²æ¥æ— äº‹ï¼Œæƒ³çœ‹çœ‹ Flutterã€‚ Flutter çš„èƒŒæ™¯å°±ä¸è¿‡å¤šä»‹ç»äº†ï¼Œå®ƒæœ€ç›´æ¥å¯¹æ ‡çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ç¨‹åºæ¡†æ¶å°±æ˜¯ Facebook æ——ä¸‹çš„ React Nativeã€‚ä»Šå¤©ä»‹ç»çš„æ˜¯ Flutter åœ¨ Windows ä¸­çš„å¼€å‘ç¯å¢ƒæ­å»ºï¼Œå¦‚æœæƒ³äº†è§£ React Native çš„ç¯å¢ƒæ­å»ºï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„ã€Windows å¹³å° React Native å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°ã€ã€‚ ä¸‹é¢è¿›å…¥æ­£é¢˜ã€‚ æ³¨ï¼šæ’°æ–‡æ—¶ Flutter çš„ç‰ˆæœ¬ä¸º 2.10.4ã€‚ å‡†å¤‡ Flutter SDK å‰å¾€å®˜ç½‘ä¸‹è½½å³å¯ã€‚ å®˜æ–¹æä¾›äº† Windowsã€macOSã€Linux å’Œ Chrome OS å››ä¸ªå¹³å°çš„å¼€å‘å¥—ä»¶ã€‚ åŒæ—¶è¿˜è€ƒè™‘åˆ°ä¸­å›½å¼€å‘è€…çš„ç‰¹æ®Šæƒ…å†µï¼Œè´´å¿ƒåœ°æ ‡æ³¨äº†ã€ŒUsing Flutter in Chinaã€ã€‚ å°†ä¸‹è½½å¥½çš„å‹ç¼©åŒ…è§£å‹åˆ°ä½ æƒ³è¦å®‰è£…çš„è·¯å¾„ã€‚æ³¨æ„ï¼šè·¯å¾„ä¸èƒ½åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œä¸”ä¸è¦å®‰è£…åˆ°å¦‚ C:/Program Files/ ç­‰é«˜æƒé™è·¯å¾„ã€‚ æ¥ä¸‹æ¥ï¼Œå°† ./flutter/bin ç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼š å› ä¸ºä¸€äº› Flutter å‘½ä»¤éœ€è¦è”ç½‘è·å–æ•°æ®ï¼Œç”±äºä¼—æ‰€å‘¨çŸ¥çš„åŸå› ï¼Œåœ¨å›½å†…ç›´æ¥è®¿é—®å¾ˆå¯èƒ½ä¸ä¼šæˆåŠŸï¼Œä¸è¿‡æ²¡å…³ç³»ï¼ŒGoogle ä¸ºå›½å†…å¼€å‘è€…æ­å»ºäº†ä¸´æ—¶é•œåƒã€‚ä½ å¯ä»¥å°†å¦‚ä¸‹ç¯å¢ƒå˜é‡åŠ å…¥åˆ°ç”¨æˆ·ç¯å¢ƒå˜é‡ä¸­ï¼š âœ export PUB_HOSTED_URL=https://pub.flutter-io.cn âœ export FLUTTER_STORAGE_BASE_URL=https://storage.flutter-io.cn å®˜æ–¹æ–‡æ¡£åˆ°è¿™é‡Œå°±ä¼šè®©ä½ æ‰§è¡Œ Flutter å‘½ä»¤ï¼Œä½†æˆ‘ä¸å»ºè®®è¿™ä¹ˆåšï¼Œæˆ‘ä»¬å¯ä»¥å…ˆæŠŠå¼€å‘çš„ IDE ä¹Ÿè£…ä¸Šã€‚ Android Studio å®˜æ–¹æ”¯æŒä½¿ç”¨ã€Android Studioã€ã€ã€IntelliJ IDEAã€å’Œã€Visual Studio Codeã€ç­‰ IDE æ¥å¼€å‘ï¼Œç”±äºæˆ‘æœ¬èº«å°±æ˜¯ Android å¼€å‘è€…ï¼Œæ‰€ä»¥è¿˜æ˜¯ç»§ç»­ç”¨ã€Android Studioã€å°±å¥½ã€‚ å»ºè®®ä½¿ç”¨æœ€æ–°ç‰ˆã€‚ ã€Android Studioã€å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¸®æˆ‘ä»¬ä¸‹è½½æ‰€éœ€çš„ Android SDKï¼Œå‡å°‘æ‰‹åŠ¨é…ç½®çš„éº»çƒ¦ã€‚ åŒæ—¶ï¼Œä½ è¿˜éœ€è¦åœ¨ã€Android Studioã€ä¸­å®‰è£… Flutter æ’ä»¶ï¼š åœ¨æ’ä»¶å¸‚åœºä¸­æœç´¢å®‰è£…å³å¯ï¼Œå®‰è£… Flutter æ’ä»¶çš„åŒæ—¶ï¼Œå®ƒä¼šå¸®ä½ è‡ªåŠ¨å®‰è£… Dart æ’ä»¶ã€‚ åˆå§‹åŒ–ç¯å¢ƒ åœ¨ã€CMDã€æˆ–è€…ã€Powershellã€ä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š âœ flutter doctor æ³¨æ„ï¼Œç›®å‰ Flutter ä¸æ”¯æŒåƒã€Git Bashã€è¿™æ ·çš„ç¬¬ä¸‰æ–¹ Shellã€‚ ä¸Šè¿°å‘½ä»¤ä¼šæ£€æŸ¥ä½ çš„ç°æœ‰ç¯å¢ƒï¼Œå¹¶å°†æ£€æµ‹ç»“æœä»¥æŠ¥å‘Šå½¢å¼å‘ˆç°å‡ºæ¥ã€‚ä»”ç»†é˜…è¯»å®ƒæ˜¾ç¤ºçš„å†…å®¹ï¼Œæ£€æŸ¥æ˜¯å¦æœ‰å°šæœªå®‰è£…çš„è½¯ä»¶æˆ–æ˜¯æœ‰å…¶ä»–çš„æ­¥éª¤éœ€è¦å®Œæˆï¼ˆé€šå¸¸ä¼šä»¥ç²—ä½“å‘ˆç°ï¼‰ã€‚ æ¯”å¦‚æˆ‘æ‰§è¡Œå®Œï¼Œä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š å¯ä»¥çœ‹åˆ°ï¼Œç›®å‰ Flutter SDKã€ã€Android Studioã€å’Œã€IntelliJ IDEAã€æˆ‘æ˜¯å®‰è£…å®Œæˆçš„ï¼ŒåŒæ—¶ä¹Ÿè¿æ¥äº†è®¾å¤‡ã€‚ ç„¶åçœ‹æœªé…ç½®çš„é¡¹ã€‚ ã€ŒAndroid toolchainã€ä¸€é¡¹æç¤º cmdline-tools component is missingï¼ŒåŒæ—¶å®ƒè¿˜æä¾›äº†ä¸€ä¸ªå®‰è£…å‘½ä»¤ç»™æˆ‘ä»¬ã€‚æˆ‘ä»¬ä¸éœ€è¦å‚è€ƒå®ƒçš„å‘½ä»¤ï¼Œç›´æ¥æ‰“å¼€ã€Android Studioã€çš„ã€ŒSDK Managerã€ï¼Œå®‰è£…ã€ŒAndroid SDK Command-line Toolsã€å³å¯ã€‚ ã€ŒAndroid toolchainã€ä¸€é¡¹åŒæ—¶è¿˜æç¤º Android license status unknownã€‚å‡ºç°è¯¥æç¤ºçš„åŸå› æ˜¯ï¼Œåœ¨ä½¿ç”¨ Flutter å‰ï¼Œä½ å¿…é¡»åŒæ„ Android SDK å¹³å°çš„åè®®ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤è¿›è¡Œåè®®ç¡®è®¤ï¼š âœ flutter doctor --android-licenses æ¥ä¸‹æ¥çœ‹åˆ°æç¤ºã€Chromeã€å’Œã€Visual Studioã€æœªå®‰è£…ï¼Œå› ä¸º Flutter ä¸ä»…æ”¯æŒç§»åŠ¨ç«¯ï¼ˆAndroid å’Œ iOSï¼‰çš„è·¨å¹³å°å¼€å‘ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒæ¡Œé¢å¹³å°ï¼ˆWindowsã€macOSã€Linuxï¼‰å’Œ Web å¹³å°çš„å¼€å‘ï¼Œæ‰€ä»¥ä¼šæŠ¥å‡ºè¯¥é”™è¯¯ï¼Œä¸è¿‡ç”±äºæˆ‘ç›®å‰ä»…éœ€è¦å¼€å‘ Android å’Œ iOS çš„è·¨å¹³å°ç§»åŠ¨åº”ç”¨ï¼Œæ‰€ä»¥è¿™ä¸¤é¡¹ç¼ºå¤±å¹¶ä¸ä¼šå¯¹æˆ‘é€ æˆå½±å“ï¼Œæ— éœ€ç†ä¼šã€‚ æœ€åä¸€é¡¹ã€ŒHTTP Host Availabilityã€æç¤ºè¿æ¥ https://maven.google.com/ è¶…æ—¶ï¼Œè¿™æ˜¯å› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„åŸå› å›½å†…æ— æ³•è®¿é—®åˆ°è¯¥åŸŸåï¼Œè§£å†³çš„æ–¹æ³•ä¹Ÿæœ‰å¾ˆå¤šç§ã€‚ æˆ‘å‚è€ƒçš„æ˜¯ã€Android Studioã€å†…çš„å¤„ç†æ–¹å¼ï¼Œç›®å‰ã€Android Studioã€å†…éƒ¨ã€ŒSDK Update Sitesã€ä½¿ç”¨çš„éƒ½æ˜¯ https://dl.google.com/ è¿™ä¸ªåŸŸåï¼Œæ—¥å¸¸ä½¿ç”¨æ²¡æœ‰é—®é¢˜ï¼Œè¯æ˜è¿™ä¸ªåŸŸåæ˜¯å¯é€šçš„ã€‚ é‚£æˆ‘ä¹Ÿå¯ä»¥å°† Flutter çš„ä¸‹è½½åˆ‡åˆ°è¿™ä¸ªæºä¸Šã€‚åœ¨ Flutter SDK å®‰è£…ç›®å½•ä¸­æ‰“å¼€ ./packages/flutter_tools/lib/src/http_host_validator.dart æ–‡ä»¶ï¼Œå°† https://maven.google.com/ ä¿®æ”¹ä¸º https://dl.google.com/dl/android/maven2/ å¹¶ä¿å­˜ï¼Œç„¶ååˆ é™¤ ./bin/cache æ–‡ä»¶å¤¹ã€‚å®é™…ä¸Šå›½å†…é•œåƒæºä¹Ÿå¾ˆå¤šï¼Œä½ å¯ä»¥åˆ‡åˆ°å…¶ä»–é•œåƒæºä¸Šï¼Œæ¯”å¦‚é˜¿é‡Œäº‘ç­‰ã€‚ é—®é¢˜è§£å†³å®Œäº†ï¼Œæ¥ä¸‹æ¥é‡æ–°æ‰§è¡Œ flutter doctorã€‚ å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„é—®é¢˜éƒ½æ­£ç¡®å¤„ç†äº†ã€‚ å»ºç«‹é¡¹ç›® ä¸Šé¢çš„é…ç½®æ²¡é—®é¢˜åï¼Œå°±å¯ä»¥åˆ›å»ºé¡¹ç›®äº†ï¼Œã€Android Studioã€æ”¯æŒç›´æ¥åˆ›å»º Flutter é¡¹ç›®ã€‚ åˆæ¬¡åˆ›å»ºå¯èƒ½éœ€è¦é…ç½® Flutter SDK çš„è·¯å¾„ã€‚ ç®€å•å¡«å†™ä¸€ä¸‹é¡¹ç›®çš„ä¿¡æ¯ï¼Œå°±å¯ä»¥åˆ›å»ºäº†ã€‚ è¿™é‡Œæœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œå°±æ˜¯é¡¹ç›®åç§°ä¸èƒ½ä½¿ç”¨å¤§å†™ï¼Œè¿™æ˜¯ä¸å¸¸è§„ Android é¡¹ç›®ä¸ä¸€è‡´çš„åœ°æ–¹ï¼Œåªèƒ½ä½¿ç”¨å°å†™å­—æ¯ä»¥åŠä¸‹åˆ’çº¿ï¼Œå¦åˆ™ä¼šæç¤ºé”™è¯¯ã€‚ åˆ›å»ºæˆåŠŸä¹‹åä½ å¯ä»¥åœ¨ä¸Šæ–¹å·¥å…·æ ä¸­é€‰æ‹©ä½ çš„è®¾å¤‡è¿è¡Œé¡¹ç›®ã€‚ æˆ‘åˆæ¬¡è¿è¡Œçš„æ—¶å€™ï¼ŒæŠ¥äº†ä»¥ä¸‹é”™è¯¯ï¼š FAILURE: Build failed with an exception. * What went wrong: Execution failed for task ':app:stripDebugDebugSymbols'. &gt; NDK at D:\\AndroidSDK\\ndk-bundle did not have a source.properties file å¤§æ¦‚æ„æ€å°±æ˜¯ NDK æ²¡æœ‰æ­£ç¡®é…ç½®ï¼Œæˆ‘å°è¯•åœ¨ /android/local.properties æ–‡ä»¶ä¸­æ·»åŠ  NDK çš„è·¯å¾„ï¼Œå¹¶æ²¡æœ‰å¥æ•ˆã€‚ éœ€è¦å‰å¾€ /android/app/build.gradle ä¸­ä¿®æ”¹ï¼š android { ... defaultConfig { ... ndkVersion = &quot;22.0.6917172&quot; } } æ·»åŠ  NDK çš„ç‰ˆæœ¬å³å¯ï¼Œè¿™ä¸ª NDK ç‰ˆæœ¬å¯ä»¥ä»æœ¬åœ°è·å–ï¼Œæ‰“å¼€ Android SDK ç›®å½•ï¼Œåœ¨ ./ndk æ–‡ä»¶å¤¹ä¸‹å¯ä»¥æ‰¾åˆ°ä»¥ç‰ˆæœ¬å·å‘½åçš„æ–‡ä»¶å¤¹ã€‚ æ¯”å¦‚æˆ‘è¿™é‡Œæœ‰ä¸¤ä¸ªï¼Œæˆ‘å°±å¤åˆ¶æœ€æ–°çš„å¡«ä¸Šå»ã€‚ å‡å¦‚ä½ æœ¬åœ°æ²¡æœ‰ NDKï¼Œå¯ä»¥å‰å¾€ã€Android Studioã€çš„ã€ŒSDK Managerã€ä¸­ä¸‹è½½ã€‚ æ·»åŠ äº† NDK ç‰ˆæœ¬ä¿¡æ¯åï¼Œå°±å¯ä»¥è¿è¡Œäº†ï¼ŒFlutter ç›¸æ¯”åŸ Android é¡¹ç›®æœ‰ä¸€ä¸ªä¸åŒï¼Œå°±æ˜¯ä¿®æ”¹ build.gradle æ–‡ä»¶ä¸éœ€è¦æ‰‹åŠ¨ Syncã€‚ è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š Flutter çš„é»˜è®¤ Demo ä¸æ˜¯ã€ŒHello Worldã€ï¼Œè€Œæ˜¯ä¸€ä¸ªè®¡æ•°å™¨ï¼Œé€šè¿‡ç‚¹å‡»å³ä¸‹æ–¹çš„ FloatingActionButton æ¥å¯¹å±å¹•ä¸­é—´çš„æ•°è¿›è¡Œè‡ªå¢ã€‚ Hot Reload æˆ‘ä»¬è¿˜å¯ä»¥ä½“éªŒä¸€ä¸‹ Flutter çš„ Hot Reload åŠŸèƒ½ã€‚ æ‰“å¼€ ./lib/main.dart æ–‡ä»¶ï¼Œæ•´ä¸ªé¡µé¢çš„ä»£ç å°±åœ¨è¿™ä¸ªæ–‡ä»¶ä¸­ï¼ŒMyApp ä»£ç å¦‚ä¸‹ï¼š class MyApp extends StatelessWidget { const MyApp({Key? key}) : super(key: key); @override Widget build(BuildContext context) { return MaterialApp( title: 'Flutter Demo', theme: ThemeData( primarySwatch: Colors.blue, ), home: const MyHomePage(title: 'Flutter Demo Home Page'), ); } } å¯ä»¥çœ‹åˆ°é»˜è®¤è®¾ç½®çš„ä¸»é¢˜è‰²ä¸º Colors.blueï¼Œæˆ‘ä»¬å°†å…¶ä¿®æ”¹ä¸º Colors.greenï¼Œç„¶åä¿å­˜æ–‡ä»¶ï¼ˆå¿«æ·é”®ä¸ç”¨æˆ‘æ•™å§ï¼‰æˆ–è€…ç‚¹å‡»å·¥å…·æ ä¸Šçš„é—ªç”µçŠ¶ Hot Reload æŒ‰é’®ï¼š åº”ç”¨ä¸éœ€è¦é‡å¯ï¼Œç›´æ¥å°±æ”¹å˜äº†é¢œè‰²ï¼š æ€»ç»“ ä¸éš¾çœ‹å‡ºï¼Œç›¸æ¯” React Native çš„å¼€å‘ç¯å¢ƒæ­å»ºï¼ŒFlutter è¦è½»æ¾è®¸å¤šï¼Œè¿™æ˜¯å¥½äº‹ï¼Œé¿å…è®¸å¤šå¼€å‘è€…åœ¨æ­å»ºç¯å¢ƒçš„æ—¶å€™å°±åŠé€€æƒ…å†µã€‚ ç›®å‰çœ‹æ¥ï¼ŒFlutter æ¨å¹¿çš„é—¨æ§›åœ¨äº Dart è¯­è¨€ã€‚ ä¸ç®¡æ€ä¹ˆæ ·ï¼Œæˆ‘ä¾ç„¶çœ‹å¥½ Flutter çš„ç”Ÿæ€ã€‚ å‚è€ƒå†…å®¹ Flutter - Build apps for any screen Flutter ä¸­æ–‡å¼€å‘è€…ç½‘ç«™ | Flutter â€”â€” ä¸ºæ‰€æœ‰å±å¹•æ„å»ºç²¾ç¾åº”ç”¨ ","link":"https://LiarrDev.github.io/post/Set-up-Flutter-Development-Environment-on-Windows/"},{"title":"Android æ¥å…¥ QQ åŠ ç¾¤ç»„ä»¶","content":"ä¸ºäº†å¢åŠ ç©å®¶ç²˜æ€§ï¼Œæˆ‘ä»¬åœ¨æ¸¸æˆ SDK å†…é›†æˆäº†ä¸€é”®åŠ ç¾¤çš„åŠŸèƒ½ã€‚ å…¶å®ä¸€é”®åŠ ç¾¤çš„åŠŸèƒ½å¹¶ä¸éš¾å®ç°ï¼Œåªè¦ã€QQã€å®¢æˆ·ç«¯ç»™æˆ‘ä»¬å¼€æ”¾äº†ç›¸å…³çš„å…¥å£å³å¯ï¼Œåœ¨ã€QQç¾¤ã€å®˜ç½‘ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æœ‰ã€ŒåŠ ç¾¤ç»„ä»¶ã€ï¼Œå°±æ˜¯å®ƒäº†ã€‚ ç™»å½•åé€‰æ‹©å¯¹åº”çš„ç¾¤ï¼Œå®ƒå°±ä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åœ¨å³è¾¹ç”Ÿæˆä»£ç æ®µï¼Œæˆ‘ä»¬åªéœ€æ ¹æ®è‡ªå·±çš„å¹³å°å¤åˆ¶å¯¹åº”çš„ä»£ç åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­å³å¯ã€‚ Android å¹³å°ç”Ÿæˆçš„ä»£ç æ®µå¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š /**************** * * å‘èµ·æ·»åŠ ç¾¤æµç¨‹ã€‚ç¾¤å·ï¼š*****ç¾¤(965***949) çš„ key ä¸ºï¼š lTK**************************HTg * è°ƒç”¨ joinQQGroup(lTK**************************HTg) å³å¯å‘èµ·æ‰‹Qå®¢æˆ·ç«¯ç”³è¯·åŠ ç¾¤ *****ç¾¤(965***949) * * @param key ç”±å®˜ç½‘ç”Ÿæˆçš„ key * @return è¿”å› true è¡¨ç¤ºå‘¼èµ·æ‰‹QæˆåŠŸï¼Œè¿”å› false è¡¨ç¤ºå‘¼èµ·å¤±è´¥ ******************/ public boolean joinQQGroup(String key) { Intent intent = new Intent(); intent.setData(Uri.parse(&quot;mqqopensdkapi://bizAgent/qm/qr?url=http%3A%2F%2Fqm.qq.com%2Fcgi-bin%2Fqm%2Fqr%3Ffrom%3Dapp%26p%3Dandroid%26k%3D&quot; + key)); // æ­¤Flagå¯æ ¹æ®å…·ä½“äº§å“éœ€è¦è‡ªå®šä¹‰ï¼Œå¦‚è®¾ç½®ï¼Œåˆ™åœ¨åŠ ç¾¤ç•Œé¢æŒ‰è¿”å›ï¼Œè¿”å›æ‰‹Qä¸»ç•Œé¢ï¼Œä¸è®¾ç½®ï¼ŒæŒ‰è¿”å›ä¼šè¿”å›åˆ°å‘¼èµ·äº§å“ç•Œé¢ // intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK) try { startActivity(intent); return true; } catch (Exception e) { // æœªå®‰è£…æ‰‹Qæˆ–å®‰è£…çš„ç‰ˆæœ¬ä¸æ”¯æŒ return false; } } è¿™æ®µä»£ç çš„é‡ç‚¹å…¶å®æ˜¯ QQ ç¾¤å·ç æ‰€ç”Ÿæˆçš„ keyï¼Œæˆ‘ä»¬åªéœ€è¦ä¼ å…¥è¿™ä¸ª key å³å¯ï¼Œé€šè¿‡ URI çš„æ–¹å¼æ‹‰èµ·ã€QQã€å®¢æˆ·ç«¯çš„ QQ ç¾¤èµ„æ–™é¡µé¢ï¼Œã€QQã€å®¢æˆ·ç«¯ä¼šè§£æè¿™ä¸ª key å¹¶åŠ è½½å¯¹åº”çš„ç¾¤ä¿¡æ¯ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š è¯¥ä»£ç æ®µååˆ†ç®€å•ï¼Œç”¨åˆ°çš„çŸ¥è¯†ç‚¹å°±æ˜¯éšå¼ Intentã€‚ æˆ‘ä»¬å¯ä»¥æŸ¥çœ‹ä¸€ä¸‹ã€QQã€çš„ AndroidManifest.xml æ–‡ä»¶ï¼Œå¾ˆå®¹æ˜“æ‰¾åˆ°å…¶é…ç½®ï¼š &lt;manifest ... package=&quot;com.tencent.mobileqq&quot;&gt; ... &lt;application ...&gt; ... &lt;activity ... android:name=&quot;com.tencent.mobileqq.activity.JumpActivity&quot;&gt; ... &lt;intent-filter&gt; &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt; &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt; &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt; &lt;data android:scheme=&quot;mqqopensdkapi&quot; /&gt; &lt;/intent-filter&gt; &lt;/activity&gt; &lt;/application&gt; &lt;/manifest&gt; ã€QQã€å®¢æˆ·ç«¯åœ¨ JumpActivity ä¸­å“åº”ç¬¬ä¸‰æ–¹åº”ç”¨çš„éšå¼ Intentï¼Œå¤„ç†å”¤èµ·è¯·æ±‚ï¼Œé™¤äº†è¯¥åŠŸèƒ½ç”¨åˆ°çš„ mqqopensdkapi åè®®å¤–ï¼Œè¿˜å®šä¹‰äº†å…¶ä»–å„ç§å„æ ·çš„åè®®ï¼Œæ¯”å¦‚ mqqverifycodeã€mqqapi ç­‰ç­‰ï¼ŒJumpActivity åœ¨å†…éƒ¨å†æ ¹æ®ä¸åŒçš„ Intent åšç›¸åº”çš„å¤„ç†ã€‚ ","link":"https://LiarrDev.github.io/post/Access-Join-QQ-Group-Component-in-Android/"},{"title":"Android è‡ªå®šä¹‰ã€Œå¹´æœˆé€‰æ‹©å™¨ã€","content":"åœ¨ä¹‹å‰ã€Android æ—¥æœŸé€‰æ‹©å™¨ã€ä¸­ä»‹ç»äº† DatePicker å’Œ DatePickerDialog çš„ä½¿ç”¨æ–¹æ³•ï¼Œå¯ä»¥æ»¡è¶³æˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸­å¯¹æ—¥æœŸé€‰æ‹©çš„éœ€è¦ï¼Œæ—¥å†å¡çš„æ ·å¼ä¹Ÿååˆ†è®¨å–œã€‚ ä½†æ˜¯ï¼Œéœ€æ±‚æ˜¯ä¸‡å˜çš„ã€‚æˆ‘ä»¬å‡è®¾è¿™ä¹ˆä¸€ç§åœºæ™¯ï¼Œæ¯”å¦‚è¯´æˆ‘åœ¨åšä¸€ä¸ªè½¯ä»¶ï¼Œç”¨æˆ·å¯ä»¥æŸ¥çœ‹ä»¥å¾€çš„æœˆåº¦è´¦å•ï¼Œã€æ”¯ä»˜å®ã€å°±æœ‰ç±»ä¼¼çš„åŠŸèƒ½ï¼š é‚£ä¹ˆå°±éœ€è¦æœ‰ä¸€ä¸ªå¯ä»¥é€‰æ‹©å¹´ä»½å’Œæœˆä»½ä½†å´æ²¡æœ‰å…·ä½“æ—¥çš„åŠŸèƒ½ï¼Œæ€ä¹ˆå®ç°ï¼Ÿ Android åŸç”Ÿå¹¶æ²¡æœ‰ç±»ä¼¼çš„æ§ä»¶ï¼Œæ‰€ä»¥å¿…é¡»è¦è‡ªå·±å®ç°ã€‚å…¶å®å¯¹äºæœˆä»½ï¼Œä½ å®Œå…¨å¯ä»¥æ‰‹åŠ¨æŠŠ 12 ä¸ªæœˆéƒ½å†™è¿›å»ï¼Œä½†æ˜¯å¯¹äºå¹´ä»½ï¼Œä½ å°±æ— èƒ½ä¸ºåŠ›äº†ï¼Œå› ä¸ºå¹´ä»½ç†è®ºä¸Šæ¥è¯´æ˜¯ä¸€ä¸ªæ— ç©·æ•°ï¼Œå‡è®¾ä½ è¿™ä¸ªè½¯ä»¶å¯ä»¥ä½¿ç”¨ 60 å¹´ï¼Œé‚£ä¹ˆå°±è‡³å°‘è¦å½•å…¥ 60 ä¸ªå¹´ä»½ï¼Œé‡å¤è€Œæ— æ„ä¹‰çš„å·¥ä½œã€‚ æˆ‘ä»¬èƒ½å¦å®šåˆ¶ä¸€ä¸ªç±»ä¼¼ DatePicker çš„æœˆä»½é€‰æ‹©å™¨å‘¢ï¼Ÿ çœ‹ä¸Šå»ï¼Œã€æ”¯ä»˜å®ã€çš„æœˆä»½é€‰æ‹©å™¨å’Œ DatePicker å¾ˆç›¸åƒï¼ŒåŒºåˆ«åœ¨äºå»æ‰äº†æ—¥å­åˆ—è¡¨ã€‚äºŒè€…ä¹‹é—´å¦‚æ­¤ç›¸ä¼¼ï¼Œæ˜¯å¦æ„å‘³ç€ä¸¤è€…å¯èƒ½å¹¶éå¶ç„¶æ’è¡«ï¼Œè€Œæ˜¯æœ¬æ¥ç³»å‡ºä¸€æºå‘¢ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ DatePicker ä¸­éšè—æ—¥å­çš„æ»šè½®ï¼Œå³å¯å®ç°ç§»èŠ±æ¥æœ¨çš„æ•ˆæœã€‚ public class MonthPicker extends DatePicker { public MonthPicker(Context context, AttributeSet attrs) { super(context, attrs); ViewGroup viewGroup = (ViewGroup) ((ViewGroup) getChildAt(0)).getChildAt(0); int groupChildCount = viewGroup.getChildCount(); if (groupChildCount == 3) { viewGroup.getChildAt(1).setVisibility(GONE); } else if (groupChildCount == 5) { viewGroup.getChildAt(2).setVisibility(GONE); viewGroup.getChildAt(3).setVisibility(GONE); } } } å®šä¹‰ MonthPicker ç»§æ‰¿è‡ª DatePickerï¼Œåœ¨æ„é€ æ–¹æ³•ä¸­æŠŠæ˜¾ç¤ºæ—¥å­çš„ View å»æ‰å³å¯ã€‚è¿™é‡Œåšäº†ä¸€ä¸ªåˆ¤æ–­åˆ†æ”¯ï¼Œå› ä¸ºä¸åŒæ‰‹æœºä¸Šçš„å¯èƒ½æœ‰ä¸åŒçš„æ˜¾ç¤ºæ•ˆæœï¼š æœ‰äº›æ‰‹æœºæ˜¾ç¤ºâ€œæœˆ æ—¥ å¹´â€ä¸‰åˆ—ï¼Œé‚£æˆ‘ä»¬å°±æŠŠâ€œæ—¥â€çš„åˆ—å»æ‰ï¼Œæœ‰äº›æ‰‹æœºæ˜¾ç¤ºâ€œæœˆ | æ—¥ | å¹´â€äº”åˆ—ï¼Œä¹Ÿå°±æ˜¯æ¯é¡¹ä¸­é—´ä¼šæœ‰ä¸€ä¸ªåˆ†å‰²çº¿åˆ†å¼€ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æŠŠâ€œæ—¥â€çš„åˆ—å’Œåˆ†å‰²çº¿ä¸€èµ·å»æ‰ã€‚ åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼Œå› ä¸º MonthPicker ç»§æ‰¿è‡ª DatePickerï¼Œæ‰€ä»¥åŸºæœ¬æŒ‰ç…§ DatePicker çš„å±æ€§è®¾ç½®å³å¯ï¼š &lt;com.picker.MonthPicker android:id=&quot;@+id/month_picker&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:calendarViewShown=&quot;false&quot; android:datePickerMode=&quot;spinner&quot; /&gt; è¿™é‡Œè®°å¾—è¦è®¾ç½®ä¸ºæ»šè½®æ ·å¼å¹¶éšè—æ—¥å†å¡æ ·å¼ï¼Œå¦åˆ™æ˜¯æ— æ³•å‘ˆç°æ­£å¸¸æ•ˆæœçš„ã€‚ æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œè·å–åˆ°çš„æ—¥æœŸä¹Ÿæ˜¯å’Œ DatePicker åŒæ ·çš„æ ¼å¼ï¼Œå‚ç…§ã€Android æ—¥æœŸé€‰æ‹©å™¨ã€ä¸€æ–‡ï¼Œåšå¥½ç›¸åº”çš„æˆªå–æ“ä½œå³å¯ã€‚ ä½†æ˜¯ï¼Œâ€œæœˆ æ—¥ å¹´â€å¬èµ·æ¥æ˜¯ä¸æ˜¯æœ‰ç‚¹åˆ«æ‰­ï¼Œæ²¡é”™ï¼Œè¿™ä¸€èˆ¬æ˜¯è¥¿æ–¹å›½å®¶çš„ä½¿ç”¨æ–¹æ³•ï¼Œä¸­å›½ä¸€èˆ¬ä¼šä½¿ç”¨â€œå¹´ æœˆ æ—¥â€è¿™ç§è¯´æ³•ï¼Œæ‰€ä»¥ï¼Œå½“ä½ æŠŠè¯­è¨€åˆ‡æ¢åˆ°ä¸­æ–‡åï¼Œå°±ä¼šå‡ºç°è¿™ç§æƒ…å†µï¼š ä½ ä¼šå°´å°¬åœ°å‘ç°ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢çš„æ–¹æ³•ä¸­æˆªæ‰äº†â€œæœˆä»½â€è¿™ä¸€é¡¹ï¼Œè¿™å°±ååˆ†ç¦»è°±äº†ï¼Œæ‰€ä»¥è¿˜éœ€è¦ä¸º MonthPicker åšä¸€äº›å›½é™…åŒ–çš„é€‚é…ï¼š public final class MonthPicker extends DatePicker { public MonthPicker(Context context, AttributeSet attrs) { super(context, attrs); ViewGroup viewGroup = (ViewGroup) ((ViewGroup) getChildAt(0)).getChildAt(0); int groupChildCount = viewGroup.getChildCount(); switch (Locale.getDefault().getLanguage()) { case &quot;zh&quot;: if (groupChildCount == 3) { viewGroup.getChildAt(2).setVisibility(GONE); } else if (groupChildCount == 5) { viewGroup.getChildAt(3).setVisibility(GONE); viewGroup.getChildAt(4).setVisibility(GONE); } break; case &quot;en&quot;: if (groupChildCount == 3) { viewGroup.getChildAt(1).setVisibility(GONE); } else if (groupChildCount == 5) { viewGroup.getChildAt(2).setVisibility(GONE); viewGroup.getChildAt(3).setVisibility(GONE); } break; ... } } } æˆ‘çš„åšæ³•æ˜¯é€šè¿‡ Locale è·å–å½“å‰è¯­è¨€åç§°ï¼Œå¦‚æœå½“å‰è¯­è¨€ä¸ºä¸­æ–‡ï¼Œåˆ™æˆªæ‰å¤„åœ¨æœ«ç«¯çš„ Viewï¼Œå¦‚æœå½“å‰è¯­è¨€ä¸ºè‹±æ–‡ï¼Œåˆ™æˆªæ‰å¤„åœ¨ä¸­é—´çš„ Viewã€‚ä¿®æ”¹åä¸­æ–‡è¯­è¨€ä¸‹çš„æ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœæƒ³é€‚é…æ›´å¤šè¯­è¨€ï¼Œåªéœ€ç»§ç»­æ·»åŠ  CASE å³å¯ï¼Œå¦‚æœæœ‰å›½å®¶æ˜¯ç”¨â€œæ—¥ æœˆ å¹´â€çš„å†™æ³•ï¼Œåˆ™å†æ·»åŠ æˆªæ‰å¤„åœ¨é¦–ä½çš„ View çš„é€»è¾‘ã€‚ ","link":"https://LiarrDev.github.io/post/Customizes-MonthPicker-in-Android/"},{"title":"ç”¨å¥½æ‰‹æœºç³»ç»Ÿè‡ªå¸¦çš„é‚®ä»¶å®¢æˆ·ç«¯","content":"ä¸çŸ¥é“ç°åœ¨è¿˜æœ‰å¤šå°‘äººåœ¨ä½¿ç”¨ Email è¿™ä¸ªä¸œè¥¿ï¼Œå®ƒå¯ä»¥ç§°ä½œæ˜¯äº’è”ç½‘ä¹‹åˆæœ€ä¼Ÿå¤§çš„å‘æ˜ä¹‹ä¸€ï¼Œéšç€ IM çš„å…´èµ·ï¼ŒEmail ä¹Ÿéšä¹‹èµ°å‘æ²¡è½ã€‚ å°½ç®¡å¦‚æ­¤ï¼ŒEmail ä¾ç„¶æ˜¯å½“ä»Šäº’è”ç½‘ä¸­ä¸å¯ä»£æ›¿çš„å­˜åœ¨ï¼Œè¿™ç‚¹åœ¨äº’è”ç½‘ä¼ä¸šä¸­å°¤ä¸ºæ˜æ˜¾ã€‚ è®¸å¤šäº’è”ç½‘ä¼ä¸šçš„å·¥å•ç³»ç»Ÿã€æ‹›è˜æµç¨‹ç­‰ï¼Œéƒ½ä¾èµ–äº Emailï¼Œç”šè‡³ä¿¡ç”¨å¡çš„è´¦å•ï¼Œéƒ½å¯ä»¥é€šè¿‡ Email æ¥ä¼ è¾¾ï¼Œåœ¨ IM ä¾¿æ·çš„å¹´ä»£ï¼ŒEmail è¿™ç§ç›¸å¯¹è½åçš„é€šè®¯å·¥å…·ï¼Œåè€Œæ˜¾å¾—æ›´åŠ åº„é‡ã€‚ ä½ æ˜¯å¦æ›¾æ³¨æ„è¿‡ï¼Œå®é™…ä¸Šæ¯å°æ‰‹æœºä¸Šéƒ½è‡ªå¸¦äº†ä¸€ä¸ªé‚®ä»¶åº”ç”¨ï¼Œè€Œä½ ï¼Œåˆæ˜¯å¦ä½¿ç”¨è¿‡å®ƒå‘¢ï¼Ÿ æˆ‘è§è¿‡è®¸å¤šé‚®ä»¶é‡åº¦ç”¨æˆ·å¾€å¾€éƒ½æ˜¯ç›´æ¥ä¸‹è½½ä¸€ä¸ªæ‰€æ³¨å†Œçš„é‚®ç®±å®˜æ–¹æ¨å‡ºçš„åº”ç”¨ï¼Œæ¯”å¦‚ã€QQ é‚®ç®±ã€ã€ã€Outlookã€ã€ã€Gmailã€ç­‰ç­‰ï¼Œè€Œå‡ ä¹ä¸æ›¾è§è¿‡ä»–ä»¬ä½¿ç”¨æ‰‹æœºç³»ç»Ÿè‡ªå¸¦çš„é‚®ç®±åº”ç”¨ã€‚ å½“ç„¶ï¼Œä½¿ç”¨æ‰€æ³¨å†Œé‚®ç®±çš„å®˜æ–¹åº”ç”¨æ— å¯åšéï¼Œæ¯•ç«Ÿä¸Šæ‰‹é—¨æ§›ä½ï¼Œå³ä¸‹å³ç”¨ã€‚ ä¸è¿‡ä½ ä»¬ä¹ŸçŸ¥é“ï¼Œå¦‚æœä¸€ä¸ªåº”ç”¨èƒ½è§£å†³çš„äº‹æƒ…ï¼Œæˆ‘æ˜¯ä¸ä¼šä¸‹è½½ç¬¬äºŒä¸ªåº”ç”¨çš„ï¼Œæ¥ä¸‹æ¥å°±æ•™ä½ å¦‚ä½•æ­£ç¡®ä½¿ç”¨æ‰‹æœºç³»ç»Ÿè‡ªå¸¦çš„é‚®ä»¶å®¢æˆ·ç«¯ã€‚ å¾ˆå¤šäººå¯èƒ½éƒ½æ²¡æœ‰æ‰“å¼€è¿‡è¿™ä¸ªåº”ç”¨ï¼Œå®é™…ä¸Šç°åœ¨çš„ç³»ç»Ÿé‚®ä»¶åº”ç”¨å¯¹å„ç§ç¬¬ä¸‰æ–¹çš„é‚®ç®±æ”¯æŒéƒ½æŒºå¥½çš„ï¼Œæ¯”å¦‚å°ç±³çš„ç³»ç»Ÿé‚®ç®±åº”ç”¨å°±æ”¯æŒäº†å¸¸ç”¨çš„ã€QQ é‚®ç®±ã€ã€ã€ç½‘æ˜“é‚®ç®±ã€ã€ã€Outlookã€ã€ã€Gmailã€ç­‰ç­‰ï¼š æˆ‘ä¸‹é¢ä»¥ã€QQ é‚®ç®±ã€ä¸ºä¾‹ï¼Œæ•™å¤§å®¶å¦‚ä½•é…ç½®ï¼š ä¸€èˆ¬é‚®ç®±å¦‚æœä¸ä½¿ç”¨å®˜æ–¹åº”ç”¨çš„è¯ï¼Œéƒ½éœ€è¦å¼€å¯ POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV æœåŠ¡ï¼Œç®€å•æ¥è¯´ï¼Œè¿™äº›æ˜¯é‚®ä»¶ä¼ è¾“åè®®ï¼Œå…·ä½“çš„ä»‹ç»å°±ä¸åœ¨è¿™é‡Œå±•å¼€äº†ï¼Œå› ä¸ºæ¶‰åŠåˆ° TCP/IP åè®®æ—ç­‰å¤æ‚çš„è®¡ç®—æœºçŸ¥è¯†ï¼Œæœ‰å…´è¶£çš„è¯å¯ä»¥è‡ªè¡Œç ”ç©¶ã€‚ è¿™äº›æœåŠ¡åœ¨å“ªé‡Œå¼€å¯å‘¢ï¼Ÿæˆ‘ä»¬æ‰“å¼€æ‰€æ³¨å†Œé‚®ç®±çš„å®˜ç½‘å¹¶ç™»å½•è´¦å·ï¼Œåœ¨é‚®ç®±è®¾ç½®ä¸­æ‰¾åˆ°ã€Œè´¦æˆ·ã€èœå•ï¼š é‡Œé¢å°±ä¼šæœ‰ç›¸å…³æœåŠ¡çš„è®¾ç½®ï¼š å¼€å¯å“ªä¸€ä¸ªæœåŠ¡ä¸€èˆ¬å–å†³äºç³»ç»Ÿæ”¯æŒï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹ POP3 å’Œ IMAP éƒ½æ˜¯æ”¯æŒçš„ï¼Œä½ å¯ä»¥æŸ¥çœ‹è¯¥è®¾ç½®é¡¹ä¸‹çš„ä»‹ç»ä»¥åŠç³»ç»Ÿé‚®ä»¶åº”ç”¨çš„å¸®åŠ©æ¥äº†è§£åº”è¯¥å¼€å¯å“ªé¡¹æœåŠ¡ã€‚ å¯ä»¥åœ¨ä¸Šå›¾ä¸­çœ‹åˆ°ï¼Œæˆ‘å¼€å¯çš„æ˜¯ POP3/SMTP æœåŠ¡ã€‚ è¿™é‡Œæ’æ’­ä¸€å¥ï¼Œæˆ‘åœ¨å¼€é€šã€QQ é‚®ç®±ã€çš„ POP3/SMTP æœåŠ¡æ—¶æ˜¯çœŸçš„å†å°½è‰°è¾›ï¼Œå› ä¸ºå®ƒè¦æ±‚æˆ‘ç»‘å®šå¯†ä¿æ‰‹æœºï¼Œè€Œç»‘å®šå¯†ä¿æ‰‹æœºåˆè¦æ±‚æä¾›èµ„æ–™è¿›è¡Œèº«ä»½éªŒè¯ã€‚å½“æˆ‘æä¾›äº†å°½å¯èƒ½å¤šçš„èµ„æ–™åï¼Œæˆ‘ä¾ç„¶æ— æ³•å‘è…¾è®¯è¯æ˜æˆ‘æ˜¯æˆ‘ã€‚ å¦‚æœä½ é‡åˆ°äº†åŒæ ·çš„é—®é¢˜ï¼Œä¸è¦æ…Œï¼Œæ‰¾è…¾è®¯å®¢æœç”³è¯‰å³å¯ï¼Œè§£å†³é—®é¢˜çš„æ•ˆç‡å¾ˆé«˜ï¼š ç„¶åå°±å¯ä»¥å›åˆ°é‚®ç®±å®˜ç½‘ç»§ç»­è¿›è¡Œè®¾ç½®ï¼Œã€QQ é‚®ç®±ã€ä¼šè¦æ±‚ä½ ç”¨å¯†ä¿æ‰‹æœºå‘é€ä¸€æ¡çŸ­ä¿¡åˆ°æŒ‡å®šå·ç ï¼š å®Œæˆåï¼Œé‚®ç®±ä¼šç”Ÿæˆä¸€ä¸ªæˆæƒç ï¼š è¿™æ—¶å€™å†å›åˆ°æ‰‹æœºç³»ç»Ÿçš„é‚®ç®±åº”ç”¨ï¼Œåœ¨å¯†ç æ¡†ä¸­è¾“å…¥ä¸Šé¢ç”Ÿæˆçš„æˆæƒç ï¼Œå°±èƒ½å¤ŸæˆåŠŸç™»å½•é‚®ç®±äº†ï¼š å¦å¤–ï¼Œç³»ç»Ÿé‚®ç®±åº”ç”¨è¿˜æ”¯æŒæ·»åŠ å¤šä¸ªè´¦å·ï¼Œè®©ä½ çš„æ‰€æœ‰é‚®ç®±è´¦å·éƒ½èƒ½å¤Ÿåœ¨ä¸€ä¸ªåº”ç”¨ä¸­ç®¡ç†ã€‚ é€šè¿‡ç®€å•çš„é…ç½®ï¼Œä½ æ—¢å¯ä»¥é€šè¿‡è¯¥ç³»ç»Ÿé‚®ç®±åº”ç”¨è½»æ¾æ”¶å‘å’Œç®¡ç†é‚®ä»¶ï¼Œä¹Ÿä¸ç”¨é¢å¤–ä¸‹è½½ä¸€ä¸ªç¬¬ä¸‰æ–¹çš„é‚®ç®±åº”ç”¨ï¼Œå‡å°‘å†…å­˜å ç”¨ï¼Œä½•ä¹è€Œä¸ä¸ºã€‚ ","link":"https://LiarrDev.github.io/post/Mastering-Smartphone-Built-in-Email-App/"},{"title":"Android WebView å’Œ JavaScript äº¤äº’","content":"Hybrid å¼€å‘å·²ç»æˆä¸ºä¸€ç§å¸¸æ€äº†ï¼Œæ ¹æ®ç™¾åº¦ç™¾ç§‘é‡Šä¹‰ï¼š Hybrid Appï¼ˆæ··åˆæ¨¡å¼ç§»åŠ¨åº”ç”¨ï¼‰æ˜¯æŒ‡ä»‹äº web-appã€native-app è¿™ä¸¤è€…ä¹‹é—´çš„ appï¼Œå…¼å…·â€œNative App è‰¯å¥½ç”¨æˆ·äº¤äº’ä½“éªŒçš„ä¼˜åŠ¿â€å’Œâ€œWeb App è·¨å¹³å°å¼€å‘çš„ä¼˜åŠ¿â€ã€‚ å°½ç®¡æˆ‘å¯¹ã€Œå…¼å…·â€œNative App è‰¯å¥½ç”¨æˆ·äº¤äº’ä½“éªŒçš„ä¼˜åŠ¿â€ã€æŒä¿å®ˆæ„è§ï¼Œä½†æ¯‹åº¸ç½®ç–‘ï¼Œã€Œè·¨å¹³å°å¼€å‘çš„ä¼˜åŠ¿ã€è®©å½“ä»Šå¸‚åœºä¸Šç»å¤§å¤šæ•°çš„åº”ç”¨éƒ½ä½¿ç”¨äº† Hybrid å¼€å‘æŠ€æœ¯ã€‚ Hybrid å¼€å‘æ–¹æ¡ˆçš„æµè¡Œï¼Œä¹Ÿè¡ç”Ÿäº†è®¸å¤šç¬¬ä¸‰æ–¹æ¡†æ¶ï¼Œå¦‚ QuickHybrid ç­‰ï¼Œä½†æ›´å¤šå¼€å‘è€…ä»ç„¶é€‰æ‹©è‡ªè¡Œå®ç° Hybridã€‚ åœ¨ Android ä¸­ï¼ŒHybrid å¼€å‘å°±æ˜¯ä½¿ç”¨ WebView æ§ä»¶åŠ è½½ H5 é“¾æ¥ï¼Œç”±äº Android ç«¯ä½¿ç”¨çš„è¯­è¨€æ˜¯ Java æˆ– Kotlinï¼Œè€Œ H5 ç«¯ä½¿ç”¨çš„æ˜¯ JavaSrciptï¼Œä¸¤è€…æ²¡æœ‰åŠæ³•ç›´æ¥äº’ç›¸è°ƒç”¨ï¼Œæ‰€ä»¥ Hybrid å¼€å‘çš„æ ¸å¿ƒå®é™…ä¸Šå°±æ˜¯ä¸¤è€…ä¹‹é—´çš„æ§åˆ¶æ¡¥ã€‚ JavaScript è°ƒç”¨ Android å› ä¸ºæ˜¯åœ¨ç§»åŠ¨å¹³å°ä½¿ç”¨ï¼Œæ‰€ä»¥ H5 ç«¯è°ƒç”¨åŸç”Ÿå¹³å°çš„èƒ½åŠ›æ›´ä¸ºå¸¸ç”¨ã€‚ é¦–å…ˆéœ€è¦åœ¨ Android ç«¯åˆ›å»ºä¸€ä¸ªæä¾›äº¤äº’æ–¹æ³•çš„ç±»ï¼Œå¦‚ï¼š public class JsInterface { @JavascriptInterface public void toast(String msg) { Toast.makeText(AppUtil.getContext(), msg, Toast.LENGTH_SHORT).show(); } } æœ‰ä¸‰ä¸ªæ³¨æ„çš„ç‚¹ï¼šä¸€æ˜¯æ–¹æ³•å¿…é¡»æ·»åŠ  @JavascriptInterface æ³¨è§£ï¼›äºŒæ˜¯æ–¹æ³•çš„å‚æ•°ä»…å¯ä¸º JavaScript èƒ½å¤Ÿæä¾›çš„ç±»å‹ï¼Œæ¯”å¦‚ä¸Šæ–¹çš„çš„ Toast éœ€è¦ä¼ å…¥ Context å¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡æ˜¯ Android å¹³å°æä¾›çš„ï¼Œæ€»ä¸èƒ½æ‰¾ H5 è¦å§ï¼›ä¸‰æ˜¯æ–¹æ³•çš„è¿”å›å€¼åŒæ ·ä¹Ÿä»…èƒ½ä¸º JavaScript å¯ç”¨ç±»å‹ï¼Œç†ç”±åŒä¸Šã€‚ ç„¶åï¼Œæˆ‘ä»¬é…ç½® WebView ä½¿å…¶èƒ½å¤Ÿè°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼š public class WebActivity extends AppCompatActivity { ... WebView webView; @Override protected void onCreate(Bundle savedInstanceState) { ... webView.getSettings().setJavaScriptEnabled(true); webView.addJavascriptInterface(new JsInterface(), &quot;android&quot;); ... } } å› ä¸ºå¯ç”¨ JavaScript å¯èƒ½ä¼šåœ¨åº”ç”¨ç¨‹åºä¸­å¼•å…¥ XSS æ¼æ´ï¼Œä»è€Œäº§ç”Ÿå®‰å…¨é—®é¢˜ï¼Œæ‰€ä»¥ WebView é»˜è®¤æƒ…å†µä¸‹æ˜¯ç¦æ­¢ JavaScript è°ƒç”¨çš„ï¼Œå¯ä»¥é€šè¿‡ setJavaScriptEnabled() å¼€å¯ï¼Œç„¶åè°ƒç”¨ addJavascriptInterface() å°†åˆšåˆšçš„äº¤äº’ç±»æ·»åŠ è¿›æ¥ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå°±æ˜¯åˆšåˆšçš„äº¤äº’ç±»çš„å¯¹è±¡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ˜¯ Android ç«¯å’Œ H5 ç«¯çº¦å®šçš„ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œé€šè¿‡è¿™ä¸ªçº¦å®šçš„å­—ç¬¦ä¸²â€œæš—å·â€ï¼Œèƒ½å¤Ÿè®© H5 ç«¯é€šè¿‡ JavaScript è°ƒç”¨ Android ç«¯æä¾›çš„æ–¹æ³•ã€‚ æœ€åï¼Œåœ¨ H5 ç«¯è°ƒç”¨å³å¯ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... function toastMessage(message) { android.toast(message) } &lt;/script&gt; ... &lt;/html&gt; è°ƒç”¨æ–¹æ³•å°±æ˜¯ä½¿ç”¨åˆšåˆšçº¦å®šå¥½çš„å­—ç¬¦ä¸²â€œæš—å·â€æ‹¼æ¥ . ä»¥åŠ Android ç«¯æä¾›çš„æ–¹æ³•åç§°å³å¯ã€‚ Android è°ƒç”¨ JavaScript Android è°ƒç”¨ JavaScript å‡ ä¹éƒ½æ˜¯é€šè¿‡å­—ç¬¦ä¸²æ“ä½œçš„ï¼Œä¸åƒ JavaScript è°ƒç”¨ Android ä¸€æ ·é€šè¿‡ç±»ä¼¼å‡½æ•°çš„å†™æ³•ï¼Œæ‰€ä»¥å†™èµ·æ¥æ¯”è¾ƒå®¹æ˜“å‡ºé”™ã€‚ æ— è¿”å›å€¼è°ƒç”¨ é¦–å…ˆåœ¨ H5 ç«¯åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿç»™ Android ç«¯è°ƒç”¨çš„æ–¹æ³•ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... function alertMessage(msg) { alert(msg) } &lt;/script&gt; ... &lt;/html&gt; ç„¶å Android ç«¯åœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨å³å¯ï¼š public class WebActivity extends AppCompatActivity { WebView webView; ... public void alertMessage(String msg) { webView.loadUrl(&quot;javascript:alertMessage('&quot; + msg + &quot;')&quot;;); } } åŒæ ·æ˜¯é€šè¿‡ loadUrl() æ–¹æ³•æ‰§è¡Œï¼Œä¼ å…¥ javascript: æ‹¼æ¥æ–¹æ³•åç§°ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œéœ€è¦ä¸¤ä¸ªç‚¹ï¼šä¸€æ˜¯å¦‚æœæœ‰å‚æ•°ï¼ŒåŒæ ·è¦ä¼ å…¥ JavaScript èƒ½å¤Ÿå¤„ç†çš„ç±»å‹ï¼Œç†ç”±åŒä¸Šæ–‡æ‰€è¿°ï¼›äºŒæ˜¯å‡å¦‚ä¼ å…¥çš„å‚æ•°ä¸ºå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½¿ç”¨å•å¼•å· ' ä»£æ›¿åŒå¼•å· &quot;ï¼Œå¦‚æœæƒ³è¦ä½¿ç”¨åŒå¼•å· &quot;ï¼Œè®°å¾—è½¬ä¹‰ã€‚ æœ‰è¿”å›å€¼è°ƒç”¨ ç”±äºé€šè¿‡ loadUrl() æ–¹æ³•è°ƒç”¨ JavaScript å‡½æ•°ï¼Œæ²¡æœ‰åŠæ³•ç›´æ¥è·å–è¿”å›å€¼ã€‚ Android 4.4 ä¹‹å‰å¹¶æ²¡æœ‰æä¾›ç›´æ¥è°ƒç”¨ JavaScript å‡½æ•°å¹¶è·å–å€¼çš„æ–¹æ³•ï¼Œæ‰€ä»¥åœ¨æ­¤ä¹‹å‰ï¼Œå¸¸ç”¨çš„æ€è·¯æ˜¯ Java è°ƒç”¨ JavaScript æ–¹æ³•ï¼ŒJavaScript æ–¹æ³•æ‰§è¡Œå®Œæ¯•å H5 ç«¯å†æ¬¡è°ƒç”¨ Android ç«¯ä»£ç å°†å€¼è¿”å›ã€‚ ä½†æ˜¯ç°åœ¨ï¼Œæœ‰äº†æ›´å¥½çš„æ–¹æ³•ã€‚ é¦–å…ˆä¾ç„¶æ˜¯ç°åœ¨ H5 ç«¯åˆ›å»ºä¸€ä¸ªèƒ½å¤Ÿç»™ Android ç«¯è°ƒç”¨çš„æ–¹æ³•ï¼š &lt;html&gt; &lt;script type=&quot;text/javascript&quot;&gt; ... function sum(m, n) { return m + n } &lt;/script&gt; ... &lt;/html&gt; ç„¶å Android ç«¯åœ¨åˆé€‚çš„æ—¶æœºè°ƒç”¨å³å¯ï¼š public class WebActivity extends AppCompatActivity { WebView webView; ... public void sum(m, n) { webView.evaluateJavascript(&quot;sum(&quot; + m + &quot;, &quot; + n + &quot;)&quot;, new ValueCallback&lt;String&gt;() { @Override public void onReceiveValue(String value) { System.out.println(value); } }); } } æ”¹ä¸ºä½¿ç”¨ evaluateJavascript() æ–¹æ³•æ‰§è¡Œ JavaScript å‡½æ•°ï¼Œå¹¶åœ¨å›è°ƒä¸­è·å–è¿”å›å€¼ã€‚ æœ‰ä¸¤ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼šä¸€æ˜¯å›è°ƒä¸­é™å®šäº†è¿”å›å€¼çš„ç±»å‹ä¸º Stringï¼Œå¯¹äºç®€å•çš„ç±»å‹ä¼šå°è¯•è½¬æ¢æˆå­—ç¬¦ä¸²è¿”å›ï¼Œå¯¹äºå¤æ‚çš„æ•°æ®ç±»å‹ï¼Œå»ºè®®ä»¥å­—ç¬¦ä¸²å½¢å¼çš„ JSON è¿”å›ï¼›äºŒæ˜¯ evaluateJavascript() éœ€è¦ UI çº¿ç¨‹è°ƒç”¨ï¼Œå› æ­¤ onReceiveValue() å›è°ƒä¹Ÿæ‰§è¡Œåœ¨ä¸»çº¿ç¨‹ã€‚ ","link":"https://LiarrDev.github.io/post/Interactin-with-JavaScript-in-Android-WebView/"},{"title":"Android ä¸º EditText è®¾ç½®é”™è¯¯æç¤ºæµ®çª—","content":"ä¹‹å‰çš„å¼€å‘ä¸­ï¼Œå¯¹äº EditText çš„è¾“å…¥é”™è¯¯æé†’ï¼Œæˆ‘å¸¸ä½¿ç”¨ Dialog è¿›è¡Œå±•ç¤ºï¼Œå¦‚ï¼š ç›¸æ¯” Toast è€Œè¨€ï¼Œè¿™æ˜¯ä¸€ç§æ¯”è¾ƒåˆé€‚çš„äº¤äº’ï¼Œç”¨æˆ·å¯ä»¥æ¸…æ¥šåœ°äº†è§£åˆ°ä¸ºä½•è‡ªå·±çš„è¾“å…¥ä¸åˆæ³•ï¼Œè€Œä¸ä¼šå›  Toast æ˜¾ç¤ºæ—¶é—´å¤ªçŸ­å¯¼è‡´é”™è¿‡å…·ä½“ä¿¡æ¯ã€‚ ä½†æ˜¯ï¼Œæœ‰ä¸€ç‚¹ä¸å¥½çš„æ˜¯å¢åŠ äº†ç”¨æˆ·çš„ç‚¹å‡»æˆæœ¬ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡è®¾å®š Dialog å®šæ—¶è‡ªåŠ¨å…³é—­æ¥é™ä½ç‚¹å‡»æˆæœ¬ï¼Œä¸è¿‡ç”±äº Dialog åœ¨æ˜¾ç¤ºçš„æ—¶å€™ä¼šæŠ¢å¤ºç„¦ç‚¹ï¼Œå¯¼è‡´ä¸‹æ–¹çš„ Activity æ— æ³•è·å–è¾“å…¥ï¼Œæ‰€ä»¥è¿™ä¸ªæˆæœ¬å¹¶æ²¡æœ‰å®é™…é™ä½ã€‚ EditText å…¶å®ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ç§æ¯”è¾ƒä¼˜é›…çš„æç¤ºæ–¹å¼ï¼Œå®ƒå¯ä»¥ä½¿ç”¨æµ®çª—å¯¹éæ³•è¾“å…¥è¿›è¡Œæç¤ºï¼Œåªéœ€ä¸€è¡Œä»£ç ï¼Œæ¯”å¦‚ç”¨æˆ·è¾“å…¥ä¸ºç©ºï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·å†™ï¼š if (TextUtils.isEmpty(editText.getText().toString())) { editText.setError(&quot;Content cannot be empty!&quot;); } åœ¨ç”¨æˆ·è¾“å…¥ä¸ºç©ºæ—¶ï¼Œç³»ç»Ÿå°±ä¼šç»™å‡ºç›¸åº”çš„æç¤ºï¼š ç”¨æˆ·å¯ä»¥æŸ¥é˜…æç¤ºä¿¡æ¯çš„åŒæ—¶ï¼Œåˆä¸ä¼šå¢åŠ ç‚¹å‡»æˆæœ¬ï¼Œå¾ˆå‹å¥½ã€‚ ç”¨æ³•å°±è¿™ä¹ˆç®€å•ï¼Œä½†å¦‚æœæ–‡ç« è¿™æ ·ç»“æŸå°±å¤ªè‰ç‡äº†ã€‚ æˆ‘ä»¬è·Ÿè¸ªä¸€ä¸‹ setError() æ–¹æ³•çš„æºç ä¼šå‘ç°ï¼Œè¿™ä¸ªæ–¹æ³•å¹¶ä¸æ¥æºäº EditTextï¼Œè€Œæ˜¯æ¥æºäºå…¶çˆ¶ç±» TextViewï¼š @RemoteView public class TextView extends View implements ViewTreeObserver.OnPreDrawListener { ... /** * Sets the right-hand compound drawable of the TextView to the &quot;error&quot; * icon and sets an error message that will be displayed in a popup when * the TextView has focus. The icon and error message will be reset to * null when any key events cause changes to the TextView's text. If the * &lt;code&gt;error&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, the error message and icon * will be cleared. */ @android.view.RemotableViewMethod public void setError(CharSequence error) { if (error == null) { setError(null, null); } else { Drawable dr = getContext().getDrawable(com.android.internal.R.drawable.indicator_input_error); dr.setBounds(0, 0, dr.getIntrinsicWidth(), dr.getIntrinsicHeight()); setError(error, dr); } } } å¦‚æœä½ å°è¯•ç›´æ¥å¯¹ TextView è°ƒç”¨ setError() æ–¹æ³•ï¼Œä¼šçœ‹åˆ° TextView è™½ç„¶å¯ä»¥å±•ç¤ºå³ä¾§çš„çº¢è‰²æ„Ÿå¹å·ï¼Œä½†æ˜¯å¹¶æ— æ³•å±•ç¤ºä¼ å…¥çš„å†…å®¹ï¼š ä¸è¿‡åªéœ€è®¤çœŸé˜…è¯» setError() æ–¹æ³•ä¸Šçš„æ³¨é‡Šï¼Œä½ å°±ä¼šå‘ç°å…¶ä¸­çš„ç«¯å€ªï¼Œä»…å½“ TextView æ‹¥æœ‰ç„¦ç‚¹æ—¶ Error Message æ‰ä¼šæ˜¾ç¤ºï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆ EditText èƒ½å¤Ÿç›´æ¥æ˜¾ç¤ºçš„åŸå› ï¼Œå› ä¸º EditText æœ¬èº«å°±æ‹¥æœ‰ç„¦ç‚¹ï¼š &lt;resources&gt; ... &lt;style name=&quot;Widget.EditText&quot;&gt; &lt;item name=&quot;focusable&quot;&gt;true&lt;/item&gt; &lt;item name=&quot;focusableInTouchMode&quot;&gt;true&lt;/item&gt; ... &lt;/style&gt; &lt;/resources&gt; ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦æˆ‘ä»¬ç»™ TextView æ‰‹åŠ¨é…ç½®ç„¦ç‚¹ï¼Œå®ƒä¹Ÿèƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºï¼š textView.setFocusableInTouchMode(true); textView.requestFocus(); textView.setError(&quot;Error Message&quot;); æ•ˆæœå¦‚ä¸‹ï¼š ä»æ³¨é‡Šä¸­æˆ‘ä»¬è¿˜èƒ½çœ‹åˆ°ï¼Œå½“ä¼ å…¥çš„é”™è¯¯ä¿¡æ¯ä¸º null æ—¶ï¼Œé”™è¯¯ä¿¡æ¯å’Œå›¾æ ‡èƒ½å¤Ÿè¢«æ¸…é™¤ã€‚ å™¢å¯¹äº†ï¼ŒsetError() è¿˜æä¾›äº†é‡è½½æ–¹æ³•å…è®¸æˆ‘ä»¬è‡ªè¡Œè®¾ç½®å›¾æ ‡ï¼Œå®é™…ä¸Šï¼Œä¸Šé¢çš„å•ä¸ªå‚æ•°çš„ setError() å†…éƒ¨è°ƒç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªé‡è½½æ–¹æ³•ï¼š @RemoteView public class TextView extends View implements ViewTreeObserver.OnPreDrawListener { ... /** * Sets the right-hand compound drawable of the TextView to the specified * icon and sets an error message that will be displayed in a popup when * the TextView has focus. The icon and error message will be reset to * null when any key events cause changes to the TextView's text. The * drawable must already have had {@link Drawable#setBounds} set on it. * If the &lt;code&gt;error&lt;/code&gt; is &lt;code&gt;null&lt;/code&gt;, the error message will * be cleared (and you should provide a &lt;code&gt;null&lt;/code&gt; icon as well). */ public void setError(CharSequence error, Drawable icon) { createEditorIfNeeded(); mEditor.setError(error, icon); notifyViewAccessibilityStateChangedIfNeeded(AccessibilityEvent.CONTENT_CHANGE_TYPE_UNDEFINED); } } è¯¥é‡è½½æ–¹æ³•éœ€è¦ä¼ å…¥ä¸€ä¸ª Drawable å¯¹è±¡ï¼Œç‰¹åˆ«æ³¨æ„çš„æ˜¯ï¼Œè¯¥ Drawable å¯¹è±¡å¿…é¡»è¦è°ƒç”¨ setBounds() è¿›è¡Œé…ç½®ï¼Œæœ¬è´¨ä¸Šä¸æˆ‘ä»¬ä¹‹å‰åœ¨ã€Android ä¸º TextView æˆ– EditText æ·»åŠ  ICONã€ä»‹ç»çš„å·®ä¸å¤šã€‚ æ•ˆæœå¦‚ä¸‹ï¼š æ›´æ·±å…¥çš„æºç å°±ä¸åœ¨æœ¬æ–‡ç»§ç»­è§£æäº†ï¼Œæœ‰å…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥é˜…ã€‚ ","link":"https://LiarrDev.github.io/post/Sets-Error-Floating-Window-for-Android-EditText/"},{"title":"Android ä¸­å„å°ºå¯¸å•ä½çš„åŒºåˆ«","content":"ä¼—æ‰€å‘¨çŸ¥ï¼ŒAndroid è®¾å¤‡å‚å•†éå¸¸å¤šï¼Œå„ç§å°ºå¯¸çš„ Android æ‰‹æœºã€å¹³æ¿å±‚å‡ºä¸ç©·ï¼Œå±å¹•åˆ†è¾¨ç‡ä¹Ÿå„æœ‰å‡ºå…¥ã€‚ Google ä¸ºäº†è§£å†³åˆ†è¾¨ç‡è¿‡å¤šçš„é—®é¢˜ï¼Œåœ¨ Android å¼€å‘æ–‡æ¡£ä¸­å®šä¹‰äº†å¤šç§è¡¡é‡å°ºå¯¸çš„å•ä½ï¼Œæ–¹ä¾¿å¼€å‘è€…é€‚é…ä¸åŒåˆ†è¾¨ç‡çš„ Android è®¾å¤‡ã€‚ å°ºå¯¸å•ä½ in Inchesï¼Œä¸éš¾ç†è§£ï¼Œå°±æ˜¯è‹±å¯¸ï¼ŒåŸºäºå±å¹•çš„ç‰©ç†å°ºå¯¸ã€‚1in=2.54cmã€‚ mm Millimetersï¼Œä¹Ÿå°±æ˜¯æ¯«ç±³ï¼ŒåŸºäºå±å¹•çš„ç‰©ç†å°ºå¯¸ã€‚ä¸ç”¨å¤šè§£é‡Šã€‚ px Pixelsï¼Œå³åƒç´ ã€‚æˆ‘ä»¬ç”¨æ”¾å¤§é•œçœ‹æ˜¾ç¤ºå±ï¼Œå‘ç°å›¾åƒæ˜¯ç”±ä¸€ä¸ªä¸ªå°ç‚¹ç»„æˆçš„ï¼Œè¿™äº›å°ç‚¹å°±æ˜¯åƒç´ ç‚¹ã€‚ åƒç´ æ˜¯å›¾åƒçš„åŸºæœ¬é‡‡æ ·å•ä½ï¼Œå®ƒä¸æ˜¯ä¸€ä¸ªå‡†ç¡®çš„ç‰©ç†é‡ï¼Œå› ä¸ºåƒç´ ç‚¹çš„ç‰©ç†å¤§å°æ˜¯ä¸ç¡®å®šçš„ï¼Œåƒç´ ä¹Ÿä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„ç‚¹æˆ–è€…å°æ–¹å—ï¼ˆå°½ç®¡å¯ä»¥ç”¨ç‚¹å’Œå°æ–¹å—æ¥å‘ˆç°ï¼‰ï¼Œè€Œæ˜¯ä¸€ä¸ªæŠ½è±¡çš„æ¦‚å¿µã€‚ æˆ‘ä»¬å¸¸è¯´çš„æ‰‹æœºåˆ†è¾¨ç‡å°±æ˜¯æŒ‡å±å¹•åƒç´ çš„æ•°é‡ï¼Œè¿™å°±å¾ˆå¥½ç†è§£å®ƒçš„ç‰©ç†å¤§å°ä¸ç¡®å®šçš„è¿™å¥è¯äº†ï¼Œæ¯”å¦‚ä¸€ä¸ªå±å¹•æ¯”ä¾‹ä¸º 16:9 çš„ 5.5-inch çš„æ‰‹æœºï¼Œå®ƒçš„åˆ†è¾¨ç‡æ—¢å¯ä»¥æ˜¯ 1280Ã—720 åƒç´ ï¼Œä¹Ÿå¯ä»¥æ˜¯ 1920Ã—1080 åƒç´ ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„ 720P å’Œ 1080Pã€‚ ä¹Ÿæ­£å› ä¸ºå¦‚æ­¤ï¼Œpx å•ä½å¹¶ä¸è¢«å»ºè®®ä½¿ç”¨ï¼Œå› ä¸ºåŒæ ·åƒç´ å¤§å°çš„å›¾ç‰‡åœ¨ä¸åŒæ‰‹æœºæ˜¾ç¤ºçš„å®é™…å¤§å°å¯èƒ½ä¸åŒã€‚ å½“ç„¶ï¼Œä½ å¯ä»¥ç”¨åœ¨ä¸€äº›çº¿æ¡çš„ç»˜åˆ¶ä¸­ï¼Œæ¯”å¦‚éœ€è¦ç”» 1 åƒç´ è¡¨æ ¼çº¿æˆ–é˜´å½±çº¿çš„æ—¶å€™ã€‚ dp / dip Density-independent Pixelsï¼Œå®ƒæ˜¯ä¸€ç§åŸºäºå±å¹•å¯†åº¦çš„æŠ½è±¡å•ä½ï¼Œå¯†åº¦æ— å…³åƒç´ ï¼Œåœ¨ä¸åŒçš„åƒç´ å¯†åº¦çš„è®¾å¤‡ä¸Šä¼šè‡ªåŠ¨é€‚é…ã€‚ è™½ç„¶æœ‰ dp å’Œ dip ä¸¤ç§è¯´æ³•ï¼Œå®é™…ä¸Šæ˜¯åŒä¸€ä¸ªæ¦‚å¿µï¼Œä¸ºäº†å’Œ sp æ›´åŠ ä¸€è‡´ï¼Œdp ä¼šæ›´åŠ å¸¸ç”¨ã€‚ è¦ç†è§£ dpï¼Œé¦–å…ˆè¦å…ˆå¼•å…¥ DPI å’Œ PPI è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚ DPI å…¨ç§°æ˜¯ Dots Per Inchï¼Œå³ç½‘ç‚¹å¯†åº¦ï¼Œåœ¨çº¸è´¨åª’ä»‹æ—¶ä»£ï¼Œæˆ‘ä»¬å¸¸ç”¨ç½‘ç‚¹å¯†åº¦æ¥æè¿°å°åˆ·å“çš„æ‰“å°ç²¾åº¦ã€‚DPI å¸¸ç”¨äºâ€œè®¾å¤‡å‚æ•°â€æè¿°ï¼ˆå¦‚æ‰«æä»ªå’Œæ‰“å°æœºï¼‰ï¼Œä¾‹å¦‚æˆ‘è®¾ç½®äº†æ‰“å°çš„åˆ†è¾¨ç‡ä¸º 96DPIï¼Œé‚£ä¹ˆæ‰“å°æœºåœ¨æ‰“å°è¿‡ç¨‹ä¸­ï¼Œæ¯è‹±å¯¸ï¼ˆInchï¼‰çš„é•¿åº¦æ‰“å°äº† 96 ä¸ªç‚¹ï¼ˆDotï¼‰ï¼Œæ‰“å°æœºåœ¨æ¯è‹±å¯¸å†…æ‰“å°çš„å¢¨ç‚¹æ•°è¶Šå¤šï¼Œå›¾ç‰‡çœ‹èµ·æ¥è¶Šç²¾ç»†ã€‚è¿™ç§æ¦‚å¿µä¹Ÿå¸¦å…¥åˆ° PC æ—¶ä»£çš„ Windows ç³»ç»Ÿï¼ŒWindows ç³»ç»Ÿçš„é»˜è®¤ DPI ä¸º 96ã€‚ å› æ­¤ï¼Œåœ¨ Android ä¸Šä½ å¯ä»¥å°†å…¶ç†è§£ä¸ºå¯¹è§’çº¿æ¯è‹±å¯¸çš„åƒç´ ç‚¹çš„ä¸ªæ•°ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š DPI=height2+width2sizeDPI=\\frac{\\sqrt{height^{2}+width^{2}}}{size} DPI=sizeheight2+width2â€‹â€‹ å…¶ä¸­ï¼Œheight å’Œ weight è¡¨ç¤ºé•¿å®½çš„åƒç´ ï¼Œå¹³æ–¹å’Œå†å¼€æ–¹å…¶å®å°±æ˜¯å‹¾è‚¡å®šç†ï¼Œå¾—å‡ºå¯¹è§’çº¿çš„åƒç´ ä¸ªæ•°ï¼Œsize è¡¨ç¤ºå±å¹•çš„å°ºå¯¸ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬å¸¸è¯´çš„è‹±å¯¸ï¼Œæ¯”å¦‚æˆ‘ä»¬è¯´è¿™ä¸ªæ‰‹æœºæ˜¯ 5.5-inch çš„ï¼Œé‚£ä¹ˆå®ƒçš„ size åœ¨è¿™é‡Œå°±æ˜¯ 5.5ã€‚ å› æ­¤ï¼Œå±å¹•åŒæ ·å¤§å°çš„æ‰‹æœºï¼Œåˆ†è¾¨ç‡è¶Šé«˜ï¼ŒDPI è¶Šé«˜ï¼›åˆ†è¾¨ç‡ç›¸åŒï¼Œå±å¹•è¶Šå°ï¼ŒDPI è¶Šé«˜ã€‚ å‰é¢ä¹Ÿè¯´äº†ï¼ŒDPI å…¶å®é¢å‘çš„æ˜¯å°åˆ·é¢†åŸŸï¼Œè€Œ PPI é¢å‘çš„æ˜¯è®¡ç®—æœºé¢†åŸŸï¼ŒPPI å…¨ç§°æ˜¯ Pixels Per Inchï¼Œå³åƒç´ å¯†åº¦ã€‚åœ¨ Android å¼€å‘ä¸­ Drawable æ–‡ä»¶å¯¹åº”çš„æ˜¯DPIï¼Œå®é™…ä¸Š PPI å’Œ DPI çš„å€¼æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯æè¿°ä¸åŒã€‚ dp è¡¨ç¤ºçš„æ˜¯åœ¨æ¯è‹±å¯¸ 160 ç‚¹ï¼Œå³ 160PPI çš„å±å¹•ä¸Šï¼Œå’Œ px ç›¸åŒé•¿åº¦çš„å•ä½ï¼Œè®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š px=dpâ‹…PPI160px = dp \\cdot \\frac{PPI}{160} px=dpâ‹…160PPIâ€‹ åœ¨ 320Ã—480 åˆ†è¾¨ç‡ï¼Œåƒç´ å¯†åº¦ä¸º 160 æ—¶ï¼Œ1dp=1pxã€‚ åœ¨ 480Ã—800 åˆ†è¾¨ç‡ï¼Œåƒç´ å¯†åº¦ä¸º 240 æ—¶ï¼Œ1dp=1.5pxã€‚ ä¸ºä»€ä¹ˆè§„å®š 160DPI è§„æ ¼çš„æ˜¾ç¤ºå™¨ä¸Šï¼Œ1dp=1pxï¼Ÿ è¿™ä¸ªåœ¨å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ç»™å‡ºè§£é‡Šï¼ŒåŸå› æ˜¯å› ä¸ºç¬¬ä¸€æ¬¾ Android è®¾å¤‡ä¹Ÿå°±æ˜¯ HTC T-Mobile G1 æ˜¯å±äº 160DPI çš„ï¼Œäº‹å®ä¸Šè¿™ä¹Ÿæ˜¯ Android 1.6 ä¹‹å‰å”¯ä¸€æ”¯æŒçš„å±å¹•é…ç½®ã€‚ HTC T-Mobile G1 å‡†ç¡®çš„ DPI å¹¶ä¸ç­‰äº160ï¼Œå®ƒæ˜¯ 3.2-inchï¼Œ320Ã—480 åˆ†è¾¨ç‡ï¼Œä¸éš¾è®¡ç®—å‡ºå®ƒçº¦ä¸º 180DPIï¼Œé‚£ä¸ºä»€ä¹ˆä¸ä½¿ç”¨ 180DPI ä½œåŸºå‡†å‘¢ï¼Ÿ åŸå› æ˜¯ 180DPI ä¸å¥½ä½œé€‚é…ï¼ŒAndroid å…¶å®ä¸ºäº†ä¸è‡³äºä¸ºæ¯ä¸€ä¸ªè®¾å¤‡åˆ¶é€ å•†åšé€‚é…ï¼Œå°†ä¸åŒå±å¹•å¤§å°å’Œä¸åŒ DPI çš„è®¾å¤‡å¤§è‡´åˆ’åˆ†ä¸ºå››ç±»ï¼š å½“ç„¶ï¼Œéšç€è®¾å¤‡å±å¹•è¶Šæ¥è¶Šå¤§ï¼Œç°åœ¨ä¹Ÿå¢åŠ äº†ã€Œxxhdpiã€å’Œã€Œxxxhdpiã€ç­‰ï¼Œä¸è¿‡æ²¡å…³ç³»ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œåªæ˜¯è®¨è®ºå®ƒçš„èµ·æºï¼Œå¤§å®¶å¯ä»¥çœ‹åˆ° HTC T-Mobile G1 æ˜¯å±äºã€Œmdpiã€åŒºåŸŸçš„ï¼Œæ‰€ä»¥ä¹Ÿå°±æ˜¯ä½¿ç”¨ 160DPI ä½œåŸºå‡†çš„åŸå› ã€‚ æˆ‘ä»¬å¤§è‡´å¯ä»¥å¾—å‡ºä»¥ä¸‹è§„æ ¼ï¼š å¯†åº¦ å¯†åº¦å€¼ ä»£è¡¨åˆ†è¾¨ç‡ ldpi 120 240Ã—320 mdpi 160 320Ã—480 hdpi 240 480Ã—800 xhdpi 320 720Ã—1280 xxhdpi 480 1080Ã—1920 ä¸éš¾çœ‹å‡ºï¼Œå±å¹•çš„å¯†åº¦å€¼æ¯” ldpi : mdpi : hdpi : xhdpi : xxhdpi = 0.75 : 1 : 1.5 : 2 : 3ï¼›å³åœ¨ã€Œxhdpiã€çš„å¯†åº¦ä¸‹ï¼Œ1dp=2pxï¼›åœ¨ã€Œhdpiã€æƒ…å†µä¸‹ï¼Œ1dp=1.5pxï¼Œå…¶ä»–ç±»æ¨ã€‚ sp Scale-independent Pixelsï¼Œå®ƒæ˜¯ Android ä¸­ä¸“é—¨ç”¨æ¥æè¿°å­—ä½“å¤§å°çš„å•ä½ï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œsp çš„å€¼å’Œ dp çš„å€¼æ˜¯ç›¸åŒçš„ï¼Œé‚£ä¸ºä»€ä¹ˆè¦ç‰¹åœ°ç”¨ä¸€ä¸ªæ–°çš„å•ä½æ¥æè¿°å­—ä½“å‘¢ï¼Ÿ å¦‚æœä½ å®¶é‡Œæœ‰è€äººå®¶ï¼Œæˆ–è€…ä½ å°è¯•æ•™è€å¹´äººä½¿ç”¨æ™ºèƒ½æ‰‹æœºæ—¶ï¼Œä½ å¸¸å¸¸ä¼šå…ˆå¸®ä»–ä»¬æŠŠå­—ä½“è°ƒå¤§ï¼Œå¦åˆ™è€äººå®¶å¯èƒ½ä¼šç”±äºå¹´çºªå¤§è§†åŠ›ä¸å¥½è€Œçœ‹ä¸æ¸…æ‰‹æœºå±å¹•ä¸Šçš„å­—ã€‚ è€Œè®¾ç½®å­—ä½“å•ä½ä¸º sp çš„ç›®çš„å°±æ˜¯ä¸ºäº†å½“ç”¨æˆ·è°ƒæ•´ç³»ç»Ÿè®¾ç½®çš„å­—ä½“å¤§å°æ—¶ï¼Œåº”ç”¨çš„å­—ä½“ä¹Ÿèƒ½å¤Ÿä½œå‡ºç›¸åº”çš„æ”¹å˜ã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œç³»ç»Ÿé»˜è®¤è®¾ç½®çš„ sp å’Œ dp çš„å¤§å°å€¼ä¸€è‡´ï¼Œè€Œå½“ç”¨æˆ·æŠŠå­—ä½“è°ƒå¤§æˆ–è°ƒå°åï¼Œè¿™ä¸ª sp åˆ™è·Ÿ dp çš„å€¼ä¸ä¸€è‡´äº†ã€‚ ä¸ºä»€ä¹ˆ dp ä¸ä¼šåƒ sp ä¸€æ ·å˜åŒ–ï¼Œè¿™å°±æ˜¯è¿™ä¸¤è€…åº”ç”¨å¯¹è±¡çš„åŒºåˆ«ï¼Œsp ä¸“é—¨ç”¨äºè¡¡é‡å­—ä½“ï¼Œdp åˆ™ç”¨æ¥è¡¡é‡æ§ä»¶ä»¥åŠé—´è·çš„å°ºå¯¸ã€‚é‚£ä¹ˆå‡è®¾æœ‰ä¸€å¼ å›¾ç‰‡åˆšå¥½å¡«å……æ•´ä¸ªå±å¹•ï¼Œå‡å¦‚ dp ä¹Ÿåƒ sp ä¸€æ ·å˜åŒ–ï¼ŒæŠŠå®ƒè°ƒå°äº†ä¹‹åï¼Œå®ƒåº”è¯¥å¦‚ä½•å»æ˜¾ç¤ºï¼Œå›¾ç‰‡å’Œå±å¹•è¾¹ç¼˜ä¹‹é—´çš„ç©ºé—´åº”è¯¥ç”±ä»€ä¹ˆæ¥å¡«å……ï¼Ÿå¾ˆä¸åˆç†å¯¹å§ã€‚ pt Pointsï¼Œç‚¹ï¼Œä¹Ÿæ˜¯åŸºäºå±å¹•çš„ç‰©ç†å°ºå¯¸ï¼Œå°åˆ·è¡Œä¸šå¸¸ç”¨å•ä½ï¼Œç­‰äº 1/72 è‹±å¯¸ã€‚ è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼š 1pt=(DPI/72)px1pt=(DPI/72)px 1pt=(DPI/72)px å½“ã€Photoshopã€ä¸­æ–°å»ºç”»å¸ƒçš„åˆ†è¾¨ç‡ä¸º 72DPIæ—¶ï¼Œ1pt=1pxï¼›å½“æ–°å»ºç”»å¸ƒåˆ†è¾¨ç‡ä¸º 144DPI æ—¶ï¼Œ1pt=2pxã€‚ åœ¨å¼€å‘ä¸­çš„ä½¿ç”¨ ä¸ºäº†æ›´å¥½çš„é€‚é…ä¸åŒçš„å±å¹•ï¼Œåº”è¯¥é€‰æ‹©åˆç†çš„å•ä½ï¼Œæœ€å¸¸ä½¿ç”¨çš„ï¼Œå½“ç„¶å°±æ˜¯ dp å’Œ spï¼Œå…¶ä»–å‡ ä¸ªå•ä½è™½ç„¶ç”¨å¾—å°‘ï¼Œä½†æ—¢ç„¶æä¾›äº†ï¼Œå°±å½“ç„¶æœ‰å¯¹åº”çš„ä½¿ç”¨åœºæ™¯ï¼Œæ‰€ä»¥åº”è¯¥æ ¹æ®å½“å‰é¡¹ç›®ä½œé€‰æ‹©ã€‚ è¦åœ¨åƒç´ å¯†åº¦ä¸åŒçš„è®¾å¤‡ä¸Šæä¾›è‰¯å¥½çš„å›¾å½¢è´¨é‡ï¼Œåº”è¯¥ä»¥ç›¸åº”çš„åˆ†è¾¨ç‡åœ¨åº”ç”¨ä¸­æä¾›æ¯ä¸ªä½å›¾çš„å¤šä¸ªç‰ˆæœ¬ï¼ˆé’ˆå¯¹æ¯ä¸ªå¯†åº¦çº§åˆ«æä¾›ä¸€ä¸ªç‰ˆæœ¬ï¼‰ã€‚å¦åˆ™ï¼ŒAndroid ç³»ç»Ÿå¿…é¡»ç¼©æ”¾ä½å›¾ï¼Œä½¿å…¶åœ¨æ¯ä¸ªå±å¹•ä¸Šå æ®ç›¸åŒçš„å¯è§ç©ºé—´ï¼Œä»è€Œå¯¼è‡´ç¼©æ”¾å¤±çœŸæ¨¡ç³Šã€‚ è·Ÿå±å¹•çš„å¯†åº¦æ¯”æ˜¯ä¸€è‡´çš„ã€‚ä¹‹åï¼Œæ¯å½“æ‚¨å¼•ç”¨è¯¥ä½å›¾èµ„æºæ—¶ï¼Œç³»ç»Ÿéƒ½ä¼šæ ¹æ®å±å¹•çš„ DPI é€‰æ‹©é€‚å½“çš„ä½å›¾ã€‚å¦‚æœæ‚¨æ²¡æœ‰ä¸ºæŸä¸ªå¯†åº¦æä¾›ç‰¹å®šäºå¯†åº¦çš„èµ„æºï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šé€‰å–ä¸‹ä¸€ä¸ªæœ€ä½³åŒ¹é…é¡¹å¹¶å¯¹å…¶è¿›è¡Œç¼©æ”¾ä»¥é€‚åˆå±å¹•ã€‚ å¦‚æœæ‚¨æœ‰ä¸€äº›ç³»ç»Ÿç»ä¸èƒ½ç¼©æ”¾ï¼ˆæˆ–è®¸æ˜¯å› ä¸ºæ‚¨åœ¨è¿è¡Œæ—¶è‡ªè¡Œå¯¹å›¾ç‰‡è¿›è¡Œä¸€äº›è°ƒæ•´ï¼‰çš„å¯ç»˜åˆ¶èµ„æºï¼Œåˆ™åº”å°†è¿™äº›èµ„æºæ”¾åœ¨å¸¦æœ‰ã€Œnodpiã€é…ç½®é™å®šç¬¦çš„ç›®å½•ä¸­ã€‚å¸¦æœ‰æ­¤é™å®šç¬¦çš„èµ„æºè¢«è§†ä¸ºä¸å¯†åº¦æ— å…³ï¼Œç³»ç»Ÿå°†ä¸ä¼šå¯¹å®ƒä»¬è¿›è¡Œç¼©æ”¾ã€‚ é™¤äº†åˆ›å»ºå¤šä¸ªç‰¹å®šäºå¯†åº¦çš„å›¾ç‰‡ç‰ˆæœ¬ä¹‹å¤–ï¼Œå¦ä¸€ç§æ–¹æ³•æ˜¯ä»…åˆ›å»ºä¸€ä¸ªçŸ¢é‡å›¾å½¢ã€‚åœ¨å€ŸåŠ©çŸ¢é‡å›¾å½¢åˆ›å»ºå›¾ç‰‡æ—¶ï¼Œä½¿ç”¨ XML å®šä¹‰è·¯å¾„å’Œé¢œè‰²ï¼Œè€Œä¸æ˜¯ä½¿ç”¨åƒç´ ä½å›¾ã€‚å› æ­¤ï¼ŒçŸ¢é‡å›¾å½¢å¯ä»¥ç¼©æ”¾åˆ°ä»»ä½•å°ºå¯¸è€Œä¸ä¼šå‡ºç°ç¼©æ”¾å¤±çœŸï¼Œä¸è¿‡å®ƒä»¬é€šå¸¸æœ€é€‚åˆå›¾æ ‡ç­‰æ’å›¾ï¼Œè€Œä¸å¤ªé€‚åˆç…§ç‰‡ã€‚ çŸ¢é‡å›¾å½¢é€šå¸¸ä»¥ SVGï¼ˆå¯ç¼©æ”¾çŸ¢é‡å›¾å½¢ï¼‰æ–‡ä»¶çš„å½¢å¼æä¾›ï¼Œä½† Android ä¸æ”¯æŒæ­¤æ ¼å¼ï¼Œå› æ­¤å¿…é¡»å°† SVG æ–‡ä»¶è½¬æ¢ä¸º Android çš„çŸ¢é‡å›¾æ ¼å¼ã€‚ã€Android Studioã€ä¸­æä¾›çš„ã€Vector Asset Studioã€å¯ä»¥æ–¹ä¾¿åœ°è¿›è¡Œè½¬æ¢ã€‚ å¦å¤–ï¼Œåœ¨åˆé€‚çš„æƒ…å†µä¸‹ä½¿ç”¨çŸ¢é‡å›¾å½¢æ¥ä»£æ›¿ä½å›¾ä¹Ÿå¯ä»¥å¾ˆå¥½åœ°è¾¾åˆ°å‡å°‘å®‰è£…åŒ…ä½“ç§¯çš„æ•ˆæœã€‚ ","link":"https://LiarrDev.github.io/post/Differences-between-Size-Units-in-Android/"},{"title":"SwitchHosts","content":"ä¹‹å‰ã€Windows ä¿®æ”¹ Hostsã€å’Œã€macOS ä¿®æ”¹ Hostsã€å·²ç»è¯¦ç»†ä»‹ç»äº†å¦‚ä½•åœ¨æ¡Œé¢å¹³å°ä¸Šä¿®æ”¹ Hosts æ–‡ä»¶ï¼Œã€å†™ä¸ªè„šæœ¬ç»™ Windows è‡ªåŠ¨æ·»åŠ  Hostsã€ä¹Ÿæä¾›äº†ä¸€ç§æŠ€æœ¯äººå‘˜ç»™å°ç™½æ·»åŠ  Hosts çš„æ–¹æ³•ï¼Œä½†å®é™…ä¸Šæƒ³è¦åœ¨å…¬å¸å†…æ¨å¹¿ï¼Œä¾ç„¶ååˆ†å›°éš¾ï¼Œå¤§å¤šæ•°äººçœ‹ç€æ­¥éª¤ç¹çï¼Œä¾¿æŸæ‰‹æ— ç­–ã€‚ æ˜¯æ—¶å€™ç¥­å‡ºå¤§æ€å™¨ï¼Œä¸€æ¬¾ç»å¯¹ç¬¦åˆå°ç™½ä½¿ç”¨ä¹ æƒ¯çš„ Hosts ç®¡ç†å·¥å…·ã€‚ ã€SwitchHostsã€æ˜¯ä¸€æ¬¾å¯ä»¥æ–¹ä¾¿ä½ ç®¡ç†å’Œä¸€é”®åˆ‡æ¢å¤šä¸ª Hosts æ–¹æ¡ˆçš„å…è´¹å¼€æºå·¥å…·ï¼ŒåŸºäº Electronï¼Œè¿™ä¹Ÿè®©å®ƒèƒ½å¤Ÿè·¨å¹³å°æ”¯æŒ Windowsã€macOS å’Œ Linux ç³»ç»Ÿã€‚ å®ƒæ˜¯ç”± 80 åä¸­å¹´äººè€æ°ï¼ˆ@oldjï¼‰å¼€å‘çš„ï¼Œè€æ°æ¯•ä¸šäºä¸­ç§‘å¤§ç»Ÿè®¡ä¸é‡‘èç³»ï¼Œæ›¾åœ¨é˜¿é‡Œå·¥ä½œè¶…è¿‡ 8 å¹´ï¼Œç›®å‰åœ¨ä¸€ä¸ªå°è€Œç¾çš„å›¢é˜Ÿï¼Œè´Ÿè´£æŠ€æœ¯ç ”å‘å·¥ä½œã€‚ ã€SwitchHostsã€çš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬å‘å¸ƒäº 2011 å¹´ï¼Œå®ƒä¹Ÿæ˜¯è€æ°ä»äº‹ç¼–ç¨‹ä»¥æ¥ç»´æŠ¤å¾—æœ€ä¹…çš„ä¸€ä¸ªé¡¹ç›®ï¼Œç›®å‰åœ¨ Github å·²ç»æœ‰è¶…è¿‡ 15.5K çš„ Star æ•°ï¼Œæ˜¯å½“å‰ Hosts ç®¡ç†è¿™ä¸ªéå¸¸å°ä¼—çš„é¢†åŸŸæœ€çŸ¥åçš„å·¥å…·ä¹‹ä¸€ã€‚ ä¸ºä»€ä¹ˆæˆ‘è¯´ã€SwitchHostsã€æ˜¯ä¸€æ¬¾ç»å¯¹ç¬¦åˆå°ç™½ä½¿ç”¨ä¹ æƒ¯çš„å·¥å…·ï¼Ÿå› ä¸ºå®ƒçš„æ“ä½œçœŸçš„éå¸¸ç®€å•ï¼šæ‰“å¼€è½¯ä»¶ï¼Œä¿®æ”¹æ–‡æœ¬ï¼Œè‡ªåŠ¨ä¿å­˜ï¼Œæ²¡æœ‰å¤æ‚çš„æƒé™ã€‚ è¿™å¯¹äºæ™®é€šç”¨æˆ·æ¥è¯´ï¼Œå¤§å¤§é™ä½äº† Hosts çš„é…ç½®é—¨æ§›ã€‚ åŒæ—¶è¿˜æ”¯æŒå¤œé—´æ¨¡å¼ï¼ŒçœŸæ˜¯ç…§é¡¾åˆ°åƒæˆ‘ä¸€æ ·çš„æš—é»‘æ¨¡å¼çˆ±å¥½è€…ã€‚ è€Œå¯¹äºé«˜é˜¶ç”¨æˆ·ï¼Œã€SwitchHostsã€æ›´æ˜¯æä¾›äº†å„ç§çµæ´»çš„åŠŸèƒ½ç‰¹æ€§ã€‚ å®ƒæ”¯æŒè¯­æ³•é«˜äº®ï¼Œä½¿ç”¨ä¸åŒçš„é¢œè‰²æ˜¾ç¤º IPã€åŸŸåä»¥åŠæ³¨é‡Šï¼Œå„ç±»ä¿¡æ¯ä¸€ç›®äº†ç„¶ï¼Œç¨‹åºå‘˜éƒ½è¯´å¥½ã€‚ æ—¢ç„¶æåˆ°äº†æ³¨é‡Šï¼Œé‚£å°±ä¸å¾—ä¸è¯´å®ƒçš„å¿«æ·é”®äº†ï¼ŒCtrl + / ç¬¦åˆå¤§å¤šæ•° IDE çš„çƒ­é”®è®¾è®¡ï¼Œä½ ç”šè‡³è¿˜å¯ä»¥ç›´æ¥ç‚¹å‡»è¡Œå·è¿›è¡Œæ³¨é‡Šã€‚ æ–¹æ¡ˆå¤šé€‰åŠŸèƒ½ï¼Œé€šè¿‡å¤šé€‰æ¨¡å¼ç»„åˆä¸åŒæ–¹æ¡ˆï¼Œå®Œæˆå¤æ‚ç¯å¢ƒçš„é…ç½®ã€‚ åœ¨ç³»ç»Ÿæ‰˜ç›˜èœå•æ˜¾ç¤ºå¿«æ·èœå•ï¼Œç‚¹å‡»å¯å¿«é€ŸæŸ¥çœ‹åŠåˆ‡æ¢ Hosts æ–¹æ¡ˆã€‚ é™¤äº†æœ¬åœ°ä¿®æ”¹ Hosts å¤–ï¼Œè¿˜æ”¯æŒè¿œç¨‹æ–¹æ¡ˆï¼Œå¯ä»ç½‘ç»œä¸‹è½½å¹¶è‡ªåŠ¨å®šæ—¶åŒæ­¥è¿œç¨‹æ–¹æ¡ˆã€‚ æ¯”å¦‚å›½å†… Github è®¿é—®ä¸ç¨³å®šï¼Œæˆ‘å°±é…ç½®äº†ä¸€ä¸ªè¿œç¨‹åœ°å€ï¼Œæ¯éš”ä¸€ä¸ªå°æ—¶åˆ·æ–°ä¸€æ¬¡ Hostsï¼Œè¿™æ ·å°±ä¸ç”¨éšæ—¶æŒ‚ç€æ¢¯å­äº†ã€‚ è€ƒè™‘åˆ°å›¢é˜Ÿå†…éƒ¨çš„ä½¿ç”¨åœºæ™¯ï¼Œã€SwitchHostsã€æ”¯æŒé€šè¿‡ JSON æ–‡ä»¶å¯¼å‡ºå’Œå¯¼å…¥ï¼Œé…ç½®ä¸€æ­¥åˆ°ä½ã€‚ ã€SwitchHostsã€è¿˜æä¾›äº†ã€Alfredã€é›†æˆï¼Œå¦‚æœä½ ä½¿ç”¨ macOSï¼Œå¯é€šè¿‡ Workflow å¿«é€Ÿåˆ‡æ¢ Hostsã€‚ å®ƒè¿˜æ”¯æŒä»£ç†ã€åº”ç”¨åæ‰§è¡Œå‘½ä»¤ç­‰åŠŸèƒ½ï¼Œä¸è¿‡å¤šä»‹ç»äº†ï¼Œå¦‚æœä½ å¯¹è¿™æ–¹é¢åŠŸèƒ½æœ‰éœ€æ±‚ï¼Œæ‰“å¼€ä½ ä¾¿çŸ¥é“å¦‚ä½•æ“ä½œã€‚ æ€»çš„æ¥è¯´ï¼Œã€SwitchHostsã€é¢å¯¹çš„ä¸ä»…æ˜¯å¯¹ Hosts ç®¡ç†æœ‰è¾ƒé«˜éœ€æ±‚çš„ Geek ç©å®¶ç¾¤ä½“ï¼Œè€Œå¯¹äºä¸å¸¸ä½¿ç”¨ Hosts ä½†è¢«è¿«ä½¿ç”¨çš„å°ç™½ä¹Ÿæ˜¯ååˆ†å‹å¥½ï¼Œå€¼å¾—æˆä¸ºè£…æœºå¿…è£…çš„è½¯ä»¶ä¹‹ä¸€ã€‚ ","link":"https://LiarrDev.github.io/post/SwitchHosts/"},{"title":"Android åŠ¨æ€è·å– Resource ID","content":"åœ¨ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬å¹³æ—¶éœ€è¦ä½¿ç”¨ä¸€äº›èµ„æºæ—¶ï¼Œéƒ½éœ€è¦ä¼ å…¥ Resource IDã€‚å½“ç„¶ï¼Œè¿™ä¸ª ID æ˜¯ç¼–è¯‘çš„æ—¶å€™è‡ªåŠ¨ç”Ÿæˆçš„ï¼Œæˆ‘ä»¬ä¸å¯èƒ½å»æ‰‹åŠ¨å¡«å…¥è¿™ä¸ª ID å€¼ï¼Œè€Œæ˜¯é€šè¿‡ R æ¥è·å–è¿™ä¸ª Resource IDï¼Œæ¯”å¦‚ R.layout.activity_main æˆ–è€… R.mipmap.ic_launcher ç­‰ã€‚ ä½†æ˜¯åœ¨å¼€å‘ SDK çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸æ¨èä½¿ç”¨è¿™ç§æ–¹å¼æ¥å¼€å‘ã€‚ ä¸ºä»€ä¹ˆå‘¢ï¼Ÿä½ å¯èƒ½ä¼šå†™ä¸ª Module æ‰“æˆ AAR åŒ…éªŒè¯ä¸€ä¸‹å¹¶è®¤ä¸ºæ²¡æœ‰é—®é¢˜ï¼Œçš„ç¡®ï¼Œå‡å¦‚ä½ æ‰€å†™çš„ SDK æ˜¯åœ¨ä½ ä»¬å›¢é˜Ÿå†…éƒ¨ä½¿ç”¨çš„è¯ï¼Œæ­£å¸¸æƒ…å†µä¸‹çš„ç¡®ä¸ä¼šæœ‰é—®é¢˜ã€‚ è€Œå½“ä½ çš„ SDK éœ€è¦æä¾›ç»™å…¶ä»–å›¢é˜Ÿæ¥å…¥ï¼Œç”šè‡³æ˜¯ç»™å…¶ä»–ä¸ªäººæˆ–å…¬å¸çš„å¼€å‘è€…æ¥å…¥ï¼Œå°±ä¸å¾—ä¸è€ƒè™‘å…¼å®¹æ€§é—®é¢˜ã€‚ å‡å¦‚æŸäº›å¼€å‘å›¢é˜Ÿéœ€è¦ä½¿ç”¨ JAR çš„æ–¹å¼æ¥æ¥å…¥ï¼ˆå¯å‰å¾€ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ AAR åŒ…ã€ä¸€æ–‡äº†è§£ï¼‰ï¼Œè€Œä½ åœ¨ SDK å†…éƒ¨é€šè¿‡ R æ¥è·å– Resource IDï¼Œå¾ˆå¯èƒ½å°±ä¼šæŠ¥ç±»ä¼¼ä¸‹é¢çš„å¼‚å¸¸ï¼š E/AndroidRuntime: FATAL EXCEPTION: main Process: &lt;applicationId&gt;, PID: 1290 java.lang.NoClassDefFoundError: Failed resolution of: L&lt;package&gt;/R$layout; at ... Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;&lt;package&gt;.R$layout&quot; on path: DexPathList[[zip file &quot;/data/app/&lt;package&gt;-7LVvXGSzJoLlgcJqzY5uYg==/base.apk&quot;],nativeLibraryDirectories=[/data/app/&lt;package&gt;-7LVvXGSzJoLlgcJqzY5uYg==/lib/arm64, /system/lib64, /system/product/lib64, /hw_product/lib64, /system/product/lib64]] at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:196) at java.lang.ClassLoader.loadClass(ClassLoader.java:379) at ... å› ä¸ºä½¿ç”¨ JAR çš„æ–¹å¼æ¥å…¥æ—¶ï¼Œæˆ‘ä»¬ä¼šå°†èµ„æºæ–‡ä»¶å¤åˆ¶åˆ°æˆ‘ä»¬é¡¹ç›®çš„èµ„æºæ–‡ä»¶å¤¹ä¸­ï¼Œè€Œä¸æ˜¯å¦‚ AAR ä¸€æ ·ç›´æ¥å¼•ç”¨ï¼Œå› æ­¤ç»è¿‡é‡æ–°ç¼–è¯‘ AAPTï¼ˆAndroid Asset Packaging Toolï¼ŒAndroid èµ„æºæ‰“åŒ…å·¥å…·ï¼Œå¯å°†èµ„æºæ–‡ä»¶ç¼–è¯‘æˆäºŒè¿›åˆ¶æ–‡ä»¶ï¼‰ä¼šç»™å¯¹åº”çš„èµ„æºæ–‡ä»¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ Resource IDã€‚ æˆ‘ä»¬åœ¨ä»£ç ä¸­é€šè¿‡ R è·å– Resource ID å®é™…ä¸Šç›¸å½“äºå°†åŸæ¥çš„ ID ç¡¬ç¼–ç åˆ° APK ä¸­ï¼Œå³ setContentView(R.layout.activity_main) ç¼–è¯‘å®Œæˆåç›¸å½“äº setContentView(2131361821)ï¼ˆè¯¦è§ã€Android åç¼–è¯‘å…¥é—¨æŒ‡å—ã€ä¸€æ–‡ï¼‰ï¼Œé‚£ä¹ˆæ–°ç”Ÿæˆçš„ ID å’ŒåŸæœ‰çš„ ID ä¸ç›¸åŒï¼Œè‡ªç„¶å°±æŠ›å‡ºæ‰¾ä¸åˆ° Resource ID çš„å¼‚å¸¸äº†ã€‚ åœ¨ SDK ä¸­ï¼Œæˆ‘ä»¬å¸¸ä¼šä½¿ç”¨åŠ¨æ€è·å– Resource ID çš„æ–¹æ³•æ¥é¿å…ä»¥ä¸Šçš„å‘ã€‚ Android ä¸ºæˆ‘ä»¬æä¾›äº† getIdentifier() æ–¹æ³•ï¼š /** * Return a resource identifier for the given resource name. A fully * qualified resource name is of the form &quot;package:type/entry&quot;. The first * two components (package and type) are optional if defType and * defPackage, respectively, are specified here. * * &lt;p&gt;Note: use of this function is discouraged. It is much more * efficient to retrieve resources by identifier than by name. * * @param name The name of the desired resource. * @param defType Optional default resource type to find, if &quot;type/&quot; is not included in the name. Can be null to require an explicit type. * @param defPackage Optional default package to find, if &quot;package:&quot; is not included in the name. Can be null to require an explicit package. * * @return int The associated resource identifier. Returns 0 if no such resource was found. (0 is not a valid resource ID.) */ public int getIdentifier(String name, String defType, String defPackage) { return mResourcesImpl.getIdentifier(name, defType, defPackage); } è¯¥æ–¹æ³•æœ¬è´¨ä¸Šæ˜¯é€šè¿‡åå°„è°ƒç”¨å®ç°è·å–èµ„æºçš„ int å‹çš„ ID æ•°å€¼ï¼Œæ‰€ä»¥å¹¶ä¸é«˜æ•ˆï¼Œä¹Ÿä¸é¼“åŠ±ä½¿ç”¨ã€‚ æˆ‘ä»¬åªéœ€ä¼ å…¥èµ„æºåç§°ã€èµ„æºç±»å‹ä»¥åŠåŒ…åå°±å¯ä»¥è·å–åˆ°å¯¹åº”èµ„æºçš„ ID äº†ï¼Œæ¯”å¦‚ï¼š public class ModelActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(getResourceId(this, &quot;activity_model&quot;, &quot;layout&quot;)); } public static int getResourceId(Context context, String name, String defType) { return context.getResources().getIdentifier(name, defType, context.getPackageName()); } } å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥å°è£…æˆä¸€ä¸ªå·¥å…·ç±»ï¼Œè®©ä½¿ç”¨æ›´åŠ æ–¹ä¾¿ï¼š public class ResourceUtil { public static int getResourceId(Context context, String name, String defType) { return context.getResources().getIdentifier(name, defType, context.getPackageName()); } public static int getAnimId(Context context, String name) { return getResourceId(context, name, &quot;anim&quot;); } public static int getAnimatorId(Context context, String name) { return getResourceId(context, name, &quot;animator&quot;); } public static int getAttrId(Context context, String name) { return getResourceId(context, name, &quot;attr&quot;); } public static int getBoolId(Context context, String name) { return getResourceId(context, name, &quot;bool&quot;); } public static int getColorId(Context context, String name) { return getResourceId(context, name, &quot;color&quot;); } public static int getDimenId(Context context, String name) { return getResourceId(context, name, &quot;dimen&quot;); } public static int getDrawableId(Context context, String name) { return getResourceId(context, name, &quot;drawable&quot;); } public static int getComponentId(Context context, String name) { return getResourceId(context, name, &quot;id&quot;); } public static int getIntegerId(Context context, String name) { return getResourceId(context, name, &quot;integer&quot;); } public static int getInterpolatorId(Context context, String name) { return getResourceId(context, name, &quot;interpolator&quot;); } public static int getLayoutId(Context context, String name) { return getResourceId(context, name, &quot;layout&quot;); } public static int getMipmapId(Context context, String name) { return getResourceId(context, name, &quot;mipmap&quot;); } public static int getPluralsId(Context context, String name) { return getResourceId(context, name, &quot;plurals&quot;); } public static int getStringId(Context context, String name) { return getResourceId(context, name, &quot;string&quot;); } public static int getStyleId(Context context, String name) { return getResourceId(context, name, &quot;style&quot;); } public static int getStyleableId(Context context, String name) { return getResourceId(context, name, &quot;styleable&quot;); } public static int getXmlId(Context context, String name) { return getResourceId(context, name, &quot;xml&quot;); } } ä½¿ç”¨ä»¥ä¸Šå°è£…çš„æ–¹æ³•ï¼Œä½ å¯ä»¥å‡å°‘ä¼ å…¥çš„å‚æ•°ï¼Œå´èƒ½å¤Ÿæ›´åŠ æ¸…æ™°çš„çŸ¥é“è‡ªå·±æ‰€è·å–çš„èµ„æºç±»å‹ï¼Œååˆ†æ–¹ä¾¿ã€‚ åŸºäºè¿™ä¸ªå·¥å…·ç±»ï¼Œä½ ç”šè‡³è¿˜å¯ä»¥å®ç°ä¸€äº›æœ‰è¶£çš„éªšæ“ä½œï¼Œæ¯”å¦‚ï¼š ImageView[] imageViews = new ImageView[NUMBER]; for (int i = 0; i &lt; NUMBER; i++) { imageViews[i] = findViewById(ResourceUtil.getComponentId(context, &quot;image_&quot; + i)); } å½“ç„¶è¿™ä¸ªä¾‹å­å¹¶ä¸é‚£ä¹ˆåˆé€‚ï¼Œå› ä¸ºæœ‰æ›´ä¼˜é›…çš„å®ç°æ–¹å¼ï¼Œåªæ˜¯æƒ³é€šè¿‡è¿™ä¸ªä¾‹å­æ¥è¡¨è¾¾ï¼Œæˆ‘ä»¬å¯ä»¥å‘æŒ¥æˆ‘ä»¬çš„æƒ³è±¡ï¼Œæ¥åˆ›ä½œæ›´å¤šçš„åº”ç”¨åœºæ™¯ã€‚ ","link":"https://LiarrDev.github.io/post/Get-Android-Resource-ID-Dynamically/"},{"title":"å¯é€‰æ‹©çš„ TextView æ— æ³•å“åº”é¦–æ¬¡ç‚¹å‡»äº‹ä»¶","content":"ä¹‹å‰åœ¨ã€Android ä½¿ TextView æ”¯æŒé•¿æŒ‰é€‰æ‹©ã€ä¸€æ–‡ä¸­ä»‹ç»äº†ä½¿ç”¨ android:textIsSelectable å±æ€§å°±èƒ½ç®€å•å®ç° TextView å¯é€‰æ‹©çš„å°æŠ€å·§ï¼Œæ–‡æœ«ä¹Ÿæåˆ°å®é™…ä½¿ç”¨çš„æ—¶å€™å¾€å¾€ä¼šæœ‰ä¸€äº›å‘ã€‚ æ¯”å¦‚ï¼Œå½“ä½ ä¸º TextView è®¾ç½®äº† android:textIsSelectable å±æ€§çš„åŒæ—¶è¿˜è®¾ç½®äº†ç‚¹å‡»äº‹ä»¶ï¼Œé‚£ä¹ˆä½ ä¼šå‘ç°ï¼Œå½“é¦–æ¬¡ç‚¹å‡» TextView æ—¶ï¼ŒTextView æ˜¯ä¸ä¼šå“åº”çš„ï¼š ä¸éš¾çŒœåˆ°ï¼ŒTextView åœ¨è®¾ç½®äº† android:textIsSelectable å±æ€§åï¼Œå¯¹åŸæœ‰çš„ View è§¦æ‘¸äº‹ä»¶ç›‘å¬æœ‰å…¥ä¾µã€‚ æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ TextViewï¼Œé‡å†™ onTouchEvent() æ–¹æ³•ï¼Œå¯¹è§¦æ‘¸äº‹ä»¶é‡æ–°åšå¤„ç†ï¼š public class SelectableTextView extends AppCompatTextView { private long mActionDownTime = 0L; public SelectableTextView(@NonNull Context context) { super(context); } public SelectableTextView(@NonNull Context context, @Nullable AttributeSet attrs) { super(context, attrs); } public SelectableTextView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) { super(context, attrs, defStyleAttr); } @Override public boolean onTouchEvent(MotionEvent event) { boolean click = false; boolean textSelectable = isTextSelectable(); switch (event.getAction()) { case MotionEvent.ACTION_DOWN: mActionDownTime = System.currentTimeMillis(); break; case MotionEvent.ACTION_UP: long actionUpTime = System.currentTimeMillis(); if (actionUpTime - mActionDownTime &lt; ViewConfiguration.getLongPressTimeout()) { setTextIsSelectable(false); performClick(); click = true; } break; } setTextIsSelectable(textSelectable); return click || super.onTouchEvent(event); } @Override public boolean performClick() { return super.performClick(); } } ä»£ç çš„é€»è¾‘éå¸¸ç®€å•ï¼Œé¦–å…ˆæ‹¿åˆ° TextView æœ‰æ²¡æœ‰è®¾ç½®ä¸ºå¯é€‰æ‹©ï¼Œå¹¶å£°æ˜ä¸€ä¸ªç‚¹å‡»æ ‡è¯†ï¼Œå½“ç›‘å¬åˆ° ACTION_DOWN äº‹ä»¶æ—¶ï¼Œè®°å½•äº‹ä»¶äº§ç”Ÿçš„æ—¶é—´ï¼Œè€Œå½“ç›‘å¬åˆ° ACTION_UP äº‹ä»¶æ—¶ï¼Œè®¡ç®—ä¸¤æ¬¡äº‹ä»¶çš„æ—¶é—´å·®ï¼Œå‡å¦‚ä¸ä¸ºé•¿æŒ‰ï¼Œåˆ™å°†å½“å‰ TextView è®¾ç½®ä¸ºä¸å¯é€‰æ‹©ï¼Œå†æ‰§è¡Œç‚¹å‡»äº‹ä»¶ï¼Œå¹¶å°†ç‚¹å‡»æ ‡è¯†è®¾ç½®ä¸º trueï¼Œä¸è¦å¿˜äº†å°† TextView æ˜¯å¦å¯é€‰æ‹©çš„å±æ€§é‡ç½®å›æ¥ï¼›å‡å¦‚ä¸ºé•¿æŒ‰ï¼Œåˆ™ä¸éœ€è¦æ‰§è¡Œæˆ‘ä»¬çš„æ“ä½œï¼Œäº¤è¿˜ç»™çˆ¶ç±»å¤„ç†å³å¯ã€‚æœ€å onTouchEvent() éœ€è¦ä¸€ä¸ªè¿”å›å€¼ï¼Œå½“æ‰§è¡Œç‚¹å‡»æ—¶ï¼Œæˆ‘ä»¬æ¥ç®¡äº†äº‹ä»¶çš„å¤„ç†é€»è¾‘ï¼Œè¿”å› true å³å¯ï¼Œå½“æ‰§è¡Œé•¿æŒ‰æ—¶ï¼Œäº¤è¿˜ç»™çˆ¶ç±»å¤„ç†ã€‚ æœ‰å‡ ä¸ªåœ°æ–¹éœ€è¦è§£é‡Šä¸€ä¸‹ã€‚åˆ¤æ–­æ˜¯å¦ä¸ºé•¿æŒ‰æ˜¯ç”± ViewConfiguration çš„ getLongPressTimeout() è¿”å›å€¼è¿›è¡Œæ¯”è¾ƒçš„ï¼Œé»˜è®¤ä¸º 400msï¼Œç”± Android ç³»ç»Ÿå®šä¹‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ®å®é™…æƒ…å†µè‡ªè¡Œåˆ¤å®šã€‚ æ‰§è¡Œç‚¹å‡»æ—¶æˆ‘å…ˆå°†æ˜¯å¦å¯é€‰æ‹©çš„å±æ€§è®¾ç½®ä¸º falseï¼Œæ˜¯å› ä¸ºå¦‚æœä¸è®¾ç½®çš„è¯ï¼Œæ‰§è¡Œç‚¹å‡»äº‹ä»¶æ—¶ï¼ŒTextView ä¼šè«åé€‰ä¸­ç‚¹å‡»åŒºåŸŸçš„æ–‡å­—ï¼š å½“äº‹ä»¶å“åº”å®Œä¹‹åæˆ‘å¿…é¡»è¦å°†è¯¥å±æ€§é‡ç½®å›æ¥ï¼Œæ‰€ä»¥ä¸€å¼€å§‹å°±å¿…é¡»è·å–è¯¥å±æ€§çš„å€¼ã€‚ æœ€åè¿”å›å€¼è¿™è¡Œä»£ç æˆ‘ç”¨äº†ç®€å†™ï¼Œå¯èƒ½ä¼šçœ‹å¾—æœ‰äº›è«åå¥‡å¦™ï¼Œå…¶å®åªè¦ç†Ÿæ‚‰é€»è¾‘è¿ç®—ç¬¦ || å°±ä¸éš¾ç†è§£ï¼Œå½“ç‚¹å‡»æ ‡è¯†ä¸º true æ—¶ï¼Œè¯¥è¡¨è¾¾å¼å¿…ä¸º trueï¼Œä¸éœ€è¦å†è®¡ç®—åé¢çš„å€¼ï¼ŒonTouchEvent() å°±ä¼šç›´æ¥è¿”å› trueï¼Œè€Œå½“ç‚¹å‡»æ ‡è¯†ä¸º false æ—¶ï¼Œåˆ™ä¼šæ‰§è¡Œ super.onTouchEvent(event) å¹¶è¿”å›å…¶å€¼ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ç”¨æ›´åŠ æ˜“è¯»çš„å†™æ³•ï¼š public class SelectableTextView extends AppCompatTextView { ... @Override public boolean onTouchEvent(MotionEvent event) { boolean click = false; ... if (click) { return true; } else { return super.onTouchEvent(event); } } } æœ€åçœ‹çœ‹æœ€ç»ˆæ•ˆæœï¼š ","link":"https://LiarrDev.github.io/post/The-Selectable-TextView-Cannot-Respond-to-the-First-Click-Event/"},{"title":"Android ä½¿ TextView æ”¯æŒé•¿æŒ‰é€‰æ‹©","content":"æˆ‘ä»¬çŸ¥é“ï¼Œã€WeChatã€å†…å¯ä»¥é€šè¿‡åŒå‡»èŠå¤©å†…å®¹å¯¹æ–‡æœ¬è¿›è¡Œé€‰æ‹©å’Œå¤åˆ¶æ“ä½œï¼š è€Œ Android ä¸­ TextView åœ¨é»˜è®¤æ¨¡å¼ä¸‹æ˜¯ä¸æ”¯æŒé•¿æŒ‰é€‰æ‹©çš„ï¼Œé‚£ä¹ˆè¿™ä¸ªæ“ä½œæ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ ç½‘ä¸Šå¤§å¤šæ•°æ•™ç¨‹éƒ½æ˜¯åˆ©ç”¨è‡ªå®šä¹‰ä¸€ä¸ªç»§æ‰¿è‡ª EditText çš„æ§ä»¶æ¥å®ç°ï¼Œæˆ–è€…ç›´æ¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ä¿®æ”¹ EditText çš„æ§ä»¶å±æ€§ï¼š &lt;EditText ... android:background=&quot;@null&quot; android:editable=&quot;false&quot; android:textCursorDrawable=&quot;@null&quot; /&gt; ç›®çš„æ˜¯ä½¿ EditText å–æ¶ˆåº•éƒ¨æ¨ªçº¿èƒŒæ™¯ã€ä¸å¯è¿›è¡Œç¼–è¾‘ä»¥åŠå–æ¶ˆæ¸¸æ ‡é—ªçƒï¼Œä»¥è¾¾åˆ°ä¼ªè£…æˆ TextView çš„æ•ˆæœã€‚å®é™…ä¸Š EditText ä¹Ÿçš„ç¡®æ˜¯ç»§æ‰¿è‡ª TextViewã€‚ å®è§‚æ¥è¯´ï¼ŒXML æ˜¯ä¸€ç§å¯æ‰©å±•æ ‡è®°è¯­è¨€ï¼Œç”¨å…ƒç´ å’Œå±æ€§æ¥æè¿°æ•°æ®ï¼Œè€Œä¸æä¾›æ•°æ®çš„æ˜¾ç¤ºæ–¹æ³•ã€‚æ‰€ä»¥æˆ‘ä¸ªäººå¹¶ä¸å¤ªå–œæ¬¢è¿™ç§æ–¹å¼ï¼Œè¿™ä¼šç»™ä»£ç å¸¦æ¥æ­§ä¹‰ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œè‡ªå®šä¹‰ View è¿˜æ˜¯ä¼šæ›´åˆç†ä¸€äº›ã€‚ ä½†å®é™…ä¸Š TextView æœ¬èº«ä» API 11 å¼€å§‹å°±æ”¯æŒé•¿æŒ‰é€‰æ‹©ï¼Œåªéœ€è¦è®¾ç½®å±æ€§å³å¯ï¼š &lt;TextView ... android:textIsSelectable=&quot;true&quot; /&gt; å½“ç„¶ï¼Œä¹Ÿæ”¯æŒåœ¨é€»è¾‘ä¸­åŠ¨æ€è®¾ç½®ï¼š textView.setTextIsSelectable(true); æ•ˆæœå¦‚ä¸‹ï¼š è™½ç„¶è¿™ç§æ–¹å¼è®¾ç½®ååˆ†ç®€å•ï¼Œä½†ä»…èƒ½å¤Ÿæ»¡è¶³åŸºæœ¬è¦æ±‚ï¼Œå¦‚æœéœ€æ±‚çš„å¤æ‚åº¦å¢åŠ ï¼Œä¾ç„¶ä¼šäº§ç”Ÿä¸€äº›å‘ã€‚ ","link":"https://LiarrDev.github.io/post/Android-TextView-Selectable-with-a-Long-Press/"},{"title":"ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€Paletteã€","content":"æœ€è¿‘åœ¨é€› Android å¼€å‘è€…å®˜ç½‘çš„æ—¶å€™ï¼Œå‘ç°äº†ä¸€ä¸ªæœ‰è¶£çš„å®˜æ–¹åº“ Paletteï¼Œæœ›æ–‡ç”Ÿä¹‰ï¼Œå°±æ˜¯è°ƒè‰²æ¿äº†ï¼Œå®ƒæ˜¯ Jetpack UI ç»„ä»¶çš„ä¸€éƒ¨åˆ†ã€‚ ä¸ºä»€ä¹ˆè§‰å¾—æœ‰è¶£ï¼Œå› ä¸ºå®ƒè·Ÿæˆ‘ä»¬å¹³æ—¶åšå›¾ç‰‡æ—¶çš„å–è‰²å™¨ä¸€æ ·ï¼Œèƒ½å¤Ÿä»ä¸€å¼ å›¾ç‰‡ä¸­å¸å–é¢œè‰²ã€‚ è¿™æ ·è¯´åˆè¿‡äºç¬¼ç»Ÿï¼Œå®é™…ä¸Š Palette æ˜¯ä¸€ä¸ªç±»ä¼¼è°ƒè‰²æ¿çš„å·¥å…·ï¼Œèƒ½å¤Ÿæ ¹æ®ä¼ å…¥çš„ Bitmapï¼Œæå–å‡ºä¸»ä½“é¢œè‰²ï¼Œæˆ‘ä»¬å¯ä»¥æŠŠæå–çš„é¢œè‰²èå…¥åˆ° UI ä¸­ï¼Œä½¿ UI é£æ ¼æ›´åŠ ç¾è§‚èæ´½ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­å°±ç»™å‡ºäº†ä¸€ä¸ªåº”ç”¨åœºæ™¯ï¼š For example, a music app could use a Palette object to extract the major colors from an album cover, and use those colors to build a color-coordinated song title card. ä¾‹å¦‚ï¼ŒéŸ³ä¹åº”ç”¨å¯ä»¥ä½¿ç”¨ Palette å¯¹è±¡ä»å½±é›†å°é¢ä¸­æå–ä¸»è¦é¢œè‰²ï¼Œç„¶åä½¿ç”¨è¿™äº›é¢œè‰²åˆ¶ä½œé¢œè‰²åè°ƒçš„æ­Œæ›²ç‰‡å¤´å­—å¹•ã€‚ æˆ‘æ‰“å¼€ EMUI çš„ç³»ç»ŸéŸ³ä¹åº”ç”¨ï¼Œçœ‹åˆ°çš„ç¡®æœ‰ç”¨åˆ°ç›¸ä¼¼çš„æ•ˆæœï¼š å¯ä»¥çœ‹åˆ°ï¼Œè¯¥éŸ³ä¹åº”ç”¨éšç€æ­Œæ›²çš„åˆ‡æ¢ï¼ŒèƒŒæ™¯å’Œå­—ä½“é¢œè‰²éƒ½å‘ç”Ÿäº†æ”¹å˜ï¼Œä¸è¿‡å®ƒè¿™é‡Œçš„èƒŒæ™¯ä¼¼ä¹å¹¶ä¸æ˜¯ä»å›¾ç‰‡ä¸­æå–é¢œè‰²ï¼Œè€Œæ˜¯å°†ä¸“è¾‘å°é¢æ”¾å¤§åæ·»åŠ äº†ä¸€ä¸ªæ·±è‰²åŠé€æ˜çš„è’™å±‚ï¼Œä½†å­—ä½“é¢œè‰²åº”è¯¥æ˜¯æå–è‡ªå°é¢çš„ã€‚ è¯ä¸å¤šè¯´ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹ Palette çš„ä½¿ç”¨ã€‚ é¦–å…ˆéœ€è¦å¯¼å…¥ Palette çš„åº“ï¼š implementation 'androidx.palette:palette:{version}' å¦‚æœé¡¹ç›®ä½¿ç”¨çš„æ˜¯ Android Support åº“ï¼Œåˆ™è¯¥ä¾èµ–ä¹Ÿåº”åˆ‡è‡³ Support ç‰ˆæœ¬ã€‚ Palette å¯ä»¥å¸®åŠ©æˆ‘ä»¬ä»å›¾ç‰‡ä¸­æå–å¤šç§é¢œè‰²ï¼š Vibrant Vibrant Dark Vibrant Light Muted Muted Dark Muted Light æ¥ä¸‹æ¥å°±éœ€è¦ä¸€å¼ å›¾ç‰‡ï¼Œä»ç½‘ç»œè·å–æˆ–è€…ä¸¢åˆ°æœ¬åœ°æ–‡ä»¶å¤¹éƒ½å¯ä»¥ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ä»æœ¬åœ°åŠ è½½ã€‚ ä½¿ç”¨æ–¹æ³•éå¸¸ç®€å•ï¼Œåªéœ€è¦å°†å›¾ç‰‡è½¬æ¢æˆ Bitmapï¼Œæ¥ä¸‹æ¥çš„ä¸€åˆ‡äº¤ç»™ Paletteã€‚ Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.lake_urmia); Palette.from(bitmap).generate(new Palette.PaletteAsyncListener() { @Override public void onGenerated(Palette palette) { if (palette != null) { Palette.Swatch vibrantSwatch = palette.getVibrantSwatch(); if (vibrantSwatch != null) { vibrant.setBackgroundColor(vibrantSwatch.getRgb()); vibrant.setTextColor(vibrantSwatch.getBodyTextColor()); } Palette.Swatch darkVibrantSwatch = palette.getDarkVibrantSwatch(); if (darkVibrantSwatch != null) { vibrantDark.setBackgroundColor(darkVibrantSwatch.getRgb()); vibrantDark.setTextColor(darkVibrantSwatch.getBodyTextColor()); } Palette.Swatch lightVibrantSwatch = palette.getLightVibrantSwatch(); if (lightVibrantSwatch != null) { vibrantLight.setBackgroundColor(lightVibrantSwatch.getRgb()); vibrantLight.setTextColor(lightVibrantSwatch.getBodyTextColor()); } Palette.Swatch mutedSwatch = palette.getMutedSwatch(); if (mutedSwatch != null) { muted.setBackgroundColor(mutedSwatch.getRgb()); muted.setTextColor(mutedSwatch.getBodyTextColor()); } Palette.Swatch darkMutedSwatch = palette.getDarkMutedSwatch(); if (darkMutedSwatch != null) { mutedDark.setBackgroundColor(darkMutedSwatch.getRgb()); mutedDark.setTextColor(darkMutedSwatch.getBodyTextColor()); } Palette.Swatch lightMutedSwatch = palette.getLightMutedSwatch(); if (lightMutedSwatch != null) { mutedLight.setBackgroundColor(lightMutedSwatch.getRgb()); mutedLight.setTextColor(lightMutedSwatch.getBodyTextColor()); } } } }); æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼ŒPalette ä»å›¾ç‰‡è°ƒè‰²æ¿ä¸­ä¹Ÿè§£æåˆ°äº†å¯¹åº”çš„ 6 ç»„ Swatchï¼Œæ¯ç»„ Swatch ä¸­åŒ…å«äº†å¤šç§é¢œè‰²ï¼ŒåŒæ—¶ä¹Ÿæä¾›äº†è·å–æœ€ç»ˆé¢œè‰²çš„æ–¹æ³•ï¼Œå…¶ä¸­ getPopulation() è¡¨ç¤ºæ ·æœ¬ä¸­çš„åƒç´ æ•°é‡ï¼ŒgetRgb() å’Œ getHsl() åˆ†åˆ«æ˜¯è·å–é¢œè‰²çš„ RGB å€¼å’Œ HSL å€¼ï¼ŒgetBodyTextColor() å’Œ getTitleTextColor() åˆ™åˆ†åˆ«æ˜¯è¯¥é¢œè‰²ä¸‹æ ‡é¢˜å’Œæ­£æ–‡æ‰€é€‚åˆçš„å­—ä½“é¢œè‰²ã€‚ è¿™é‡Œæå‡ ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ã€‚ ä¸€æ˜¯æ³¨æ„åˆ¤ç©ºï¼Œå¯ä»¥çœ‹åˆ°ä¸Šé¢çš„ç¤ºä¾‹ä»£ç ä¸­æœ‰å¤šå¤„åˆ¤ç©ºï¼Œé¦–å…ˆæ˜¯å›è°ƒå¾—åˆ°çš„ Palette æœ‰å¯èƒ½ä¸ºç©ºï¼Œæ‰€ä»¥è¦åšåˆ¤ç©ºï¼ŒåŒæ—¶é€šè¿‡ Palette è§£æå¾—åˆ°çš„ Swatch ä¹Ÿå¯èƒ½ä¸ºç©ºï¼Œå› ä¸ºå¹¶ä¸æ˜¯æ‰€æœ‰å›¾ç‰‡çš„è‰²å½©éƒ½è¶³å¤Ÿä¸°å¯Œä»¥å¾—åˆ°è¿™ 6 ç§ Swatchï¼Œå¦‚æœä¸åˆ¤ç©ºåˆ™å¯èƒ½ä¼šå¯¼è‡´åº”ç”¨å´©æºƒã€‚ äºŒæ˜¯å¼‚æ­¥ï¼ŒPalette é™¤äº†ä¸Šæ–¹ç¤ºä¾‹çš„é€šè¿‡ Palette.PaletteAsyncListener() å›è°ƒçš„æ–¹æ³•å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªæ— å‚çš„ generate() æ–¹æ³•ï¼Œä¸éš¾çŸ¥é“çŸ¥é“åˆ†åˆ«æ˜¯å¼‚æ­¥å’ŒåŒæ­¥ç”Ÿæˆã€‚ä¸ºä»€ä¹ˆéœ€è¦å¼‚æ­¥ï¼Œæ˜¯å› ä¸ºå›¾ç‰‡è¿‡å¤§æˆ–è€…è‰²å½©è¿‡äºä¸°å¯Œçš„æƒ…å†µä¸‹è§£ææœ‰å¯èƒ½ä¼šé˜»å¡çº¿ç¨‹ï¼Œæ‰€ä»¥æ›´å€¾å‘äºä½¿ç”¨å¼‚æ­¥çš„æ–¹å¼ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œæ„å»ºå¼‚æ­¥é€»è¾‘ã€‚ å‚è€ƒå†…å®¹ æ”¯æŒåº“è½¯ä»¶åŒ… | Android å¼€å‘è€… | Android Developers androidx.palette.graphics | Android å¼€å‘è€… | Android Developers ","link":"https://LiarrDev.github.io/post/Enjoy-Palette-in-One-Shot/"},{"title":"Scrcpy","content":"æ‘¸é±¼æ˜¯æ¯ä¸ªæ‰“å·¥äººçš„ä¿®å…»ï¼Œæˆ‘ä»¬åœ¨å¹³æ—¶å·¥ä½œä¸­ä¸€èˆ¬éƒ½éœ€è¦å¯¹ç€ç”µè„‘å±å¹•ï¼Œä½†æ˜¯ç”±äºç¤¾äº¤å¨±ä¹ç­‰éœ€æ±‚çš„ç§»åŠ¨åŒ–ï¼Œå¦‚æœä¸€ç›´ä½ç€å¤´ç©æ‰‹æœºï¼Œå°±ä¼šè¢«è€æ¿è®¤ä¸ºéœ€æ±‚ä¸é¥±å’Œï¼Œå³ä½¿æ˜¯åƒæˆ‘ä¸€æ ·çš„ç§»åŠ¨å®¢æˆ·ç«¯å¼€å‘è€…ä¹Ÿä¸ä¾‹å¤–ã€‚ å°†æ‘¸é±¼æ–¹å¼æ¬åˆ°ç”µè„‘ä¸­åˆ»ä¸å®¹ç¼“ã€‚ æ¨¡æ‹Ÿå™¨æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ï¼Œä½†æ˜¯è®¸å¤šåº”ç”¨éƒ½éœ€è¦ç™»å½•æ‰èƒ½ä½¿ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬å°±éœ€è¦ç»å¸¸åœ¨æ‰‹æœºå’Œæ¨¡æ‹Ÿå™¨ä¹‹é—´åˆ‡æ¢è´¦å·ï¼Œå¾ˆä¸æ–¹ä¾¿ã€‚ å¦‚æœèƒ½å°†æ‰‹æœºæŠ•å½±åˆ°ç”µè„‘ä¸­ï¼Œå¹¶ä¸”èƒ½å¤Ÿé€šè¿‡é”®ç›˜é¼ æ ‡æ“ä½œæ‰‹æœºï¼Œå²‚ä¸ç¾å“‰ã€‚ ã€Scrcpyã€æ˜¯ç”±æ³•å›½ä¸“é—¨ç ”ç©¶ä¼ä¸šç‰ˆ Android è™šæ‹ŸåŒ–å·¥å…·çš„è‘—åä¼ä¸š Genymobile å¼€å‘çš„ Android æŠ•å±å·¥å…·ï¼ŒGenymobile è¿™ä¸ªå…¬å¸å¯èƒ½å¾ˆå¤šäººæ²¡å¬è¯´è¿‡ï¼Œä¸å¤¸å¼ çš„è¯´ï¼Œå®ƒå¼€å‘çš„åä¸ºã€Genymotionã€çš„ Android æ¨¡æ‹Ÿå™¨åšå¾—ç”šè‡³æ¯” Google å®˜æ–¹éƒ½è¦å—æ¬¢è¿ï¼Œæœ‰æœºä¼šçš„è¯ä»¥åä¹Ÿå¯ä»¥å” ä¸€å” ã€‚ è¯´å›ã€Scrcpyã€ï¼Œå®ƒæ˜¯ä¸€æ¬¾é€šè¿‡ ADB è°ƒè¯•çš„æ–¹å¼æ¥å°†æ‰‹æœºå±å¹•æŠ•åˆ°ç”µè„‘ä¸Šï¼Œå¹¶å¯ä»¥é€šè¿‡ç”µè„‘æ§åˆ¶ Android è®¾å¤‡çš„æŠ•å±å·¥å…·ï¼Œæ”¯æŒ Windowsã€macOS å’Œ Linux ç­‰æ¡Œé¢å¹³å°ï¼Œå¯ä»¥é€šè¿‡ USB æˆ–è€… Wi-Fi è¿æ¥è®¾å¤‡ï¼Œä¸éœ€è¦åœ¨æ‰‹æœºä¸Šå®‰è£…ä»»ä½•è½¯ä»¶ï¼Œä¹Ÿä¸éœ€è¦ ROOT æƒé™ï¼ŒåŒæ—¶è¿˜æ‹¥æœ‰é«˜æ€§èƒ½ä½å»¶è¿Ÿç­‰ä¼˜ç‚¹ã€‚ å®˜æ–¹æ˜¯è¿™æ ·æ€»ç»“çš„ï¼š It focuses on: lightness (native, displays only the device screen) performance (30~60fps) quality (1920Ã—1080 or above) low latency (35~70ms) low startup time (~1 second to display the first image) non-intrusiveness (nothing is left installed on the device) é‡è¦ç‰¹æ€§ï¼š è½»é‡ï¼ˆåŸç”Ÿï¼Œä»…æ˜¾ç¤ºè®¾å¤‡å±å¹•ï¼‰ æ€§èƒ½ï¼ˆ30 ~ 60 fpsï¼‰ ç”»è´¨ï¼ˆ1920Ã—1080 æˆ–ä»¥ä¸Šï¼‰ ä½å»¶è¿Ÿï¼ˆ35 ~ 70 æ¯«ç§’ï¼‰ å¯åŠ¨å¿«ï¼ˆçº¦ 1 ç§’å†…æ˜¾ç¤ºç¬¬ä¸€å¸§å›¾ï¼‰ éä¾µå…¥ï¼ˆæ— éœ€åœ¨è®¾å¤‡å®‰è£…ä»»ä½•è½¯ä»¶ï¼‰ ä¸‹é¢ä»‹ç»å¦‚ä½•ä½¿ç”¨ã€‚ è¦è¿æ¥çš„ Android è®¾å¤‡éœ€è¦æ»¡è¶³ä¸€å®šçš„ç¯å¢ƒï¼Œé¦–å…ˆç¡®ä¿ Android è®¾å¤‡ç³»ç»Ÿä¸º Android 5.0ï¼ˆLollipopï¼ŒAPI 21ï¼‰ä»¥ä¸Šç‰ˆæœ¬ï¼Œå…¶æ¬¡è¦åœ¨æ‰‹æœºä¸Šå¯ç”¨ã€ŒUSB debuggingã€ã€‚ ã€ŒUSB debuggingã€åœ¨ã€ŒDeveloper optionsã€ä¸­å¯ç”¨ï¼Œè€Œå…³äºã€ŒDeveloper optionsã€çš„å¯ç”¨æ–¹å¼ï¼Œä½ å¯ä»¥åœ¨ç½‘ä¸Šè½»æ˜“æ‰¾åˆ°ï¼Œè¿™é‡Œä¸å†ä»‹ç»ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨æŸäº›è®¾å¤‡ä¸Šä½ å¯èƒ½è¿˜éœ€è¦å¯ç”¨é™„åŠ é€‰é¡¹ä»¥ä½¿ç”¨é”®ç›˜å’Œé¼ æ ‡è¿›è¡Œæ§åˆ¶ï¼Œæ¯”å¦‚ä¸Šå›¾å³è¾¹çš„ MIUI ç³»ç»Ÿåˆ™éœ€è¦å¯ç”¨ã€ŒUSB debuggingï¼ˆSecurity settingsï¼‰ã€é€‰é¡¹ï¼Œå¦åˆ™ä»…èƒ½æŠ•å±ä¸èƒ½ç”¨é”®é¼ æ“æ§ï¼›è€Œä¸Šå›¾å·¦ä¾§çš„ EMUI ç³»ç»Ÿåˆ™æ— éœ€ç›¸å…³é€‰é¡¹ã€‚ æ¥ä¸‹æ¥åœ¨æ¡Œé¢å¹³å°å®‰è£…ã€Scrcpyã€ã€‚ Windows å¹³å°å®‰è£…ååˆ†ç®€å•ï¼Œåªéœ€å‰å¾€é¡¹ç›®ä¸»é¡µä¸‹è½½å¹¶è§£å‹å³å¯ï¼Œã€Scrcpyã€è¿˜å¾ˆè´´å¿ƒçš„å¸®ä½ åœ¨å‹ç¼©åŒ…å†…å‡†å¤‡äº† ADB å·¥å…·ï¼Œä½ æ— éœ€è‡ªå·±å»ä¸‹è½½ã€‚ æˆ‘éå¸¸å»ºè®®ä½ å°†å…¶é…ç½®åˆ°ç¯å¢ƒå˜é‡ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥åœ¨ä»»ä½•åœ°æ–¹éšæ—¶å¯ç”¨ã€Scrcpyã€ã€‚ å‡å¦‚ä½ å·²ç»å®‰è£…äº†ã€Chocolateyã€è½¯ä»¶åŒ…ç®¡ç†å™¨ï¼Œä½ è¿˜å¯ä»¥ç”¨æ›´åŠ æå®¢çš„æ–¹å¼å®‰è£…ã€Scrcpyã€ï¼š âœ choco install scrcpy âœ choco install adb # if you don't have it yet ã€Scoopã€ä¹Ÿæ˜¯å¯ä»¥çš„ï¼š âœ scoop install scrcpy âœ scoop install adb # if you don't have it yet macOS å¹³å°çš„å®‰è£…å¯¹äºå°ç™½æ¥è¯´å¯èƒ½ä¸å¤ªå‹å¥½ï¼Œå› ä¸ºå®ƒä¸æä¾› DMG æˆ– PKG ä¹‹ç±»çš„å®‰è£…æ–‡ä»¶ï¼Œä¹Ÿæ²¡æœ‰åƒ Windows ä¸€æ ·æä¾› ZIP å‹ç¼©åŒ…ï¼Œä¸»è¦åŸå› è¿˜æ˜¯ macOS è®¾ç½®ç¯å¢ƒå˜é‡è¦æ›´åŠ å¤æ‚ï¼Œæ‰€ä»¥ã€Homebrewã€æ˜¯ä¸ªå¾ˆå¥½çš„é€‰æ‹©ï¼š âœ brew install scrcpy âœ brew install android-platform-tools # if you don't have adb yet Linux å¹³å°åŒæ ·æ˜¯å‘½ä»¤ï¼š âœ apt install scrcpy å®‰è£…å®Œæˆåï¼Œå°† Android è®¾å¤‡é€šè¿‡æ•°æ®çº¿è¿æ¥æ¡Œé¢å¹³å°ï¼Œåœ¨ä½¿ç”¨ã€Scrcpyã€ä¹‹å‰ï¼Œæœ€å¥½å…ˆç”¨ ADB ç›‘æµ‹ä¸€ä¸‹ Android è®¾å¤‡æ˜¯å¦è¿æ¥æˆåŠŸï¼š âœ adb devices å¦‚æœè®¾å¤‡åˆ—è¡¨ä¸ºç©ºï¼Œåˆ™åº”å½“ç¡®è®¤ä¸€å¼€å§‹çš„å‰ç½®æ¡ä»¶æ˜¯å¦æ»¡è¶³ã€‚ è®¾å¤‡è¿æ¥æˆåŠŸåï¼Œå°±å¯ä»¥ä½¿ç”¨ã€Scrcpyã€æŠ•å±äº†ï¼Œä¹Ÿéå¸¸ç®€å•ï¼Œåªè¦åœ¨å‘½ä»¤è¡Œä¸­è¾“å…¥ï¼š âœ scrcpy ã€Scrcpyã€ä¾¿ä¼šå¯åŠ¨ï¼ŒæŠ•å±çª—å£ç«‹å³æ‰“å¼€ã€‚ è¿™ä¸æ»‘é¡ºç•…çš„æ„Ÿè§‰ï¼Œæ¯”æ¨¡æ‹Ÿå™¨è¦èˆ’æœçš„å¤šã€‚ Windows è¿˜æ”¯æŒåŒå‡»ã€Œscrcpy.exeã€æ–‡ä»¶å¯ç”¨ï¼Œä½ å¯ä»¥ä¸ºå…¶åˆ›å»ºå¿«æ·æ–¹å¼ï¼Œé‚£å°±å¯ä»¥åœ¨æ¡Œé¢ç›´æ¥æ‰“å¼€äº†ã€‚ä½†æ˜¯â€¦å‘½ä»¤è¡Œä¸é¦™å—? å½“ç„¶ï¼Œå¦‚æœä½ ä»…ä»…æ˜¯ç”¨æ¥æŠ•å±çš„è¯ï¼Œçš„ç¡®æ„Ÿå—ä¸åˆ°åŒºåˆ«ï¼Œä½†å‘½ä»¤è¡Œå¯ä»¥å°†ã€Scrcpyã€çš„åŠŸèƒ½å‘æŒ¥åˆ°æè‡´ã€‚ æ¯”å¦‚ï¼Œæˆ‘å¯ä»¥é™åˆ¶ç”»é¢çš„åˆ†è¾¨ç‡ï¼š âœ scrcpy --max-size 1024 âœ scrcpy -m 1024 # short version æ¯”å¦‚ï¼Œæˆ‘å¯ä»¥åœ¨å¯åŠ¨ã€Scrcpyã€çš„æ—¶å€™å°† Android è®¾å¤‡çš„å±å¹•å…³é—­ï¼š âœ scrcpy --turn-screen-off âœ scrcpy -S # short version å¾ˆå¤šæ—¶å€™æˆ‘ä»¬çš„æ‰‹æœºéƒ½ä¼šè®¾ç½®ä¸€æ®µæ—¶é—´ä¸æ“ä½œä¹‹åä¼‘çœ ï¼Œè¿™æ ·å¦‚æœæˆ‘ä»¬åœ¨ä¼‘çœ åæƒ³å†æ¬¡ä½¿ç”¨ã€Scrcpyã€æ“ä½œè®¾å¤‡ï¼Œåªèƒ½é‡æ–°ç‚¹äº®è®¾å¤‡ï¼Œå†å›åˆ°ç”µè„‘æ“ä½œï¼Œå°±ä¼šå¾ˆéº»çƒ¦ï¼›å¦‚æœæ‰‹åŠ¨è®¾ç½®ä¼‘çœ é—´éš”ï¼Œåœ¨ä½¿ç”¨å®Œäº†åˆè¦é‡æ–°è®¾ç½®å›æ¥ï¼Œä¹Ÿä¸æ–¹ä¾¿ï¼Œé‚£å¯ä»¥ä½¿ç”¨å‘½ä»¤ï¼š âœ scrcpy --stay-awake âœ scrcpy -w # short version å…³é—­å±å¹•ä»¥åŠé˜²æ­¢ä¼‘çœ æ˜¯å¯ä»¥ç»„åˆä½¿ç”¨çš„ï¼š âœ scrcpy --turn-screen-off --stay-awake âœ scrcpy -Sw # short version å½“è¿æ¥äº†å¤šå° Android è®¾å¤‡æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ adb devices æŸ¥è¯¢åˆ°è®¾å¤‡ IDï¼Œç„¶åæŠ•å±æŒ‡å®šçš„è®¾å¤‡ï¼š âœ scrcpy --serial $device_id âœ scrcpy -s $device_id # short version æ¯”å¦‚ï¼Œåœ¨å¯åŠ¨ã€Scrcpyã€çš„æ—¶å€™å°†æŠ•å±çª—å£ç½®é¡¶ï¼š âœ scrcpy ---always-on-top âœ scrcpy -T # short version æ¯”å¦‚ï¼Œæˆ‘æƒ³å…¨å±æ˜¾ç¤ºæŠ•å±çª—å£ï¼š âœ scrcpy --fullscreen âœ scrcpy -f # short version æ¯”å¦‚ï¼Œæˆ‘æƒ³æŠ•å±çš„æ—¶å€™ï¼Œä¸å…è®¸ä½¿ç”¨é”®é¼ æ“æ§ï¼š âœ scrcpy --no-control âœ scrcpy -n # short version æ¯”å¦‚ï¼ŒæŠ•å±çš„æ—¶å€™æˆ‘è¿˜æƒ³å½•ä¸ªå±ï¼Œä½†æ˜¯æ‰‹æœºå½•å®Œå±è¿˜è¦å°†è§†é¢‘æ–‡ä»¶ä¼ è¾“åˆ°ç”µè„‘éå¸¸éº»çƒ¦ï¼Œé‚£æˆ‘å¯ä»¥ç›´æ¥ä½¿ç”¨ã€Scrcpyã€çš„å½•å±å‘½ä»¤ï¼Œå®ƒä¼šå°†è§†é¢‘ä¿å­˜åˆ°å½“å‰ç»ˆç«¯æ‰€åœ¨ç›®å½•ï¼Œæ”¯æŒ MP4 å’Œ MKV æ ¼å¼ï¼š âœ scrcpy --record file.mp4 âœ scrcpy -r file.mp4 # short version å‡å¦‚æˆ‘åªæ˜¯æƒ³å½•ä¸ªå±ï¼Œä¸éœ€è¦ç”¨åˆ°æŠ•å±ï¼Œé‚£æˆ‘è¿˜å¯ä»¥ï¼š âœ scrcpy --no-display --record file.mkv âœ scrcpy -Nr file.mkv # short version æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ç”µè„‘ä¸Šæˆ‘ä»¬æ˜¯å¯ä»¥ç”¨é¼ æ ‡ç‚¹å‡»çš„ï¼Œå¾ˆç›´è§‚èƒ½å¤ŸçŸ¥é“å…·ä½“çš„ç‚¹å‡»ä½ç½®ï¼Œä½†æ˜¯åœ¨è®¾å¤‡ä¸Šæ“ä½œæ—¶ï¼Œç‚¹å‡»ä½ç½®çš„æ„ŸçŸ¥å¾€å¾€éœ€è¦é åº”ç”¨çš„åŠ¨ç”»åé¦ˆï¼Œã€Scrcpyã€å¯ä»¥å°†ä½ åœ¨è®¾å¤‡æœ¬æœºä¸Šçš„ç‰©ç†è§¦æ‘¸ä¹Ÿæ˜¾ç¤ºå‡ºæ¥ï¼š âœ scrcpy --show-touches âœ scrcpy -t # short version å‡å¦‚æˆ‘åªæƒ³å°†è®¾å¤‡å±å¹•çš„ä¸€éƒ¨åˆ†æŠ•å±ï¼š âœ scrcpy --crop 1224:1440:0:0 # 1224x1440 at offset (0,0) âœ scrcpy -c 1224:1440:0:0 # short version æŠ•å±çª—å£æ ‡é¢˜é»˜è®¤ä¼šæ˜¾ç¤ºè®¾å¤‡å‹å·ï¼Œè™½ç„¶ä¸çŸ¥é“æœ‰å•¥ç”¨ï¼Œä¸è¿‡å¦‚æœä½ æƒ³ä¿®æ”¹ï¼Œä¹Ÿæ˜¯æ²¡é—®é¢˜çš„ï¼š âœ scrcpy --window-title '$title' ä¸å–œæ¬¢æ˜¾ç¤ºè¿™ä¸ªçª—å£å¤–æ¡†ï¼Œè¿˜å¯ä»¥å»æ‰ï¼š âœ scrcpy --window-borderless ä½ å¯ä»¥éšæ„å°†æ–‡ä»¶æ‹–åˆ°ã€Scrcpyã€çª—å£ä»¥æ¨é€åˆ° Android è®¾å¤‡ä¸­ï¼Œåœ¨ç›®å‰æœ€æ–°ç‰ˆæœ¬ï¼ˆV1.19ï¼‰ä¸­ï¼Œå®ƒä¼šå­˜æ”¾äº /sdcard/Download/ ç›®å½•ï¼Œä½†åœ¨è€ç‰ˆæœ¬ï¼ˆæ¯”å¦‚ V1.17ï¼‰ä¸­åˆ™å­˜æ”¾äº /sdcard/ ç›®å½•ä¸‹ï¼Œå½“ç„¶ï¼Œä½ ä¾ç„¶å¯ä»¥é€šè¿‡æ‰‹åŠ¨å»è®¾ç½®è¿™ä¸ªå­˜å‚¨è·¯å¾„ï¼š âœ scrcpy --push-target=/sdcard/Movies/ æˆ‘å¸¸ç”¨çš„é…ç½®å‚æ•°å¤§æ¦‚å°±è¿™äº›ï¼Œæ›´åŠ è¯¦ç»†çš„é…ç½®å¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ï¼Œä¹Ÿå¯ä»¥ç¿»é˜…å®˜æ–¹æ–‡æ¡£ã€‚ æ—¢ç„¶æåˆ°å®ƒå¯ä»¥é€šè¿‡æ‹–åŠ¨æ–‡ä»¶åˆ°ã€Scrcpyã€çª—å£æ¥æ¨é€åˆ° Android è®¾å¤‡ï¼Œé‚£æ›´è¦æä¸€ä¸ªè·Ÿæ¨¡æ‹Ÿå™¨å¾ˆç›¸ä¼¼çš„æ“ä½œäº†ï¼Œå½“æ‹–å…¥çš„æ–‡ä»¶ç±»å‹æ˜¯ APK æ—¶ï¼Œã€Scrcpyã€ä¼šè‡ªåŠ¨å¸®ä½ åœ¨ Android è®¾å¤‡ä¸Šå®‰è£…ï¼Œååˆ†æ–¹ä¾¿ã€‚ ã€Scrcpyã€è¿˜æ”¯æŒé”®é¼ çš„å¿«æ·é”®ï¼Œæˆ‘åœ¨è¿™é‡Œåˆ—ä¸¾ä¸€äº›å¸¸ç”¨çš„çƒ­é”®ï¼š Action Shortcut åˆ‡æ¢å…¨å±æ¨¡å¼ MOD + f è°ƒæ•´çª—å£å¤§å°ä»¥ç§»é™¤é»‘è‰²è¾¹æ¡† MOD + w | åœ¨é»‘è‰²åŒºåŸŸåŒå‡»é¼ æ ‡å·¦é”® è®¾å¤‡ HOME é”® MOD + h | é¼ æ ‡ä¸­é”®ï¼ˆå³å•å‡»æ»šè½®ï¼‰ è®¾å¤‡ BACK é”® MOD + b | é¼ æ ‡å³é”® è®¾å¤‡ APP_SWITCH MOD + s | é¼ æ ‡çš„ç¬¬ 4 ä¸ªé”®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ è®¾å¤‡ MENU MOD + m è®¾å¤‡ VOLUME_UP MOD + â†‘ è®¾å¤‡ VOLUME_DOWN MOD + â†“ è®¾å¤‡ POWER é”® MOD + p ç‚¹äº®å±å¹• é¼ æ ‡å³é”® å±•å¼€é€šçŸ¥é¢æ¿ MOD + n | é¼ æ ‡çš„ç¬¬ 5 ä¸ªé”®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ å±•å¼€è®¾ç½®é¢æ¿ MOD + n + n | åŒå‡»é¼ æ ‡çš„ç¬¬ 5 ä¸ªé”®ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰ æŠ˜å é¢æ¿ MOD + Shift + n å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼ˆAndroid 7 ä»¥ä¸Šè®¾å¤‡æ”¯æŒï¼‰ MOD + c å‰ªåˆ‡åˆ°å‰ªè´´æ¿ï¼ˆAndroid 7 ä»¥ä¸Šè®¾å¤‡æ”¯æŒï¼‰ MOD + x åŒæ­¥å‰ªè´´æ¿å¹¶ç²˜è´´ï¼ˆAndroid 7 ä»¥ä¸Šè®¾å¤‡æ”¯æŒï¼‰ MOD + v ä»¥é”®ç›˜äº‹ä»¶åºåˆ—æ³¨å…¥ç”µè„‘å‰ªè´´æ¿æ–‡æœ¬ MOD + Shift + v ä¸Šè¡¨ä¸­çš„ MOD ä¸€èˆ¬æŒ‡é”®ç›˜çš„ Alt æˆ– Command é”®ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤ä¿®æ”¹ï¼š âœ scrcpy --shortcut-mod=rctrl # use RCtrl for shortcuts âœ scrcpy --shortcut-mod=lctrl+lalt,lsuper # use either LCtrl+LAlt or LSuper for shortcuts æ›´åŠ è¯¦ç»†çš„çƒ­é”®è¡¨å¯ä»¥ä½¿ç”¨å‘½ä»¤æŸ¥çœ‹å¸®åŠ©ï¼Œä¹Ÿå¯ä»¥ç¿»é˜…å®˜æ–¹æ–‡æ¡£ã€‚ æœ€åå†ç®€å•æä¸€ä¸‹æ— çº¿ç½‘ç»œè¿æ¥ã€Scrcpyã€ï¼Œå®é™…ä¸Šè¿™æ˜¯å…³äº ADB çš„çŸ¥è¯†ï¼Œå› ä¸º ADB æœ¬èº«æ˜¯æ”¯æŒæ— çº¿è¿æ¥çš„ï¼Œæ‰€ä»¥è¿™é‡Œå¹¶ä¸æ‰“ç®—ä»‹ç»å¦‚ä½•æ“ä½œï¼Œä½ å¯ä»¥åœ¨ç½‘ä¸Šæœç´¢ç›¸å…³æ•™ç¨‹ã€‚è¿æ¥æˆåŠŸåï¼Œæ­£å¸¸å¯ç”¨ã€Scrcpyã€å³å¯ã€‚ è€ƒè™‘åˆ°æ— çº¿è¿æ¥ç¨³å®šæ€§å¯èƒ½ä¸å¦‚æ•°æ®çº¿ï¼Œä½ å¯ä»¥æ‰‹åŠ¨è°ƒæ•´ç ç‡ï¼š âœ scrcpy --bit-rate 2M --max-size 800 âœ scrcpy -b 2M -m 800 # short version âœ scrcpy -b2M -m800 # short version ä»¥ä¸Šå°±æ˜¯ã€Scrcpyã€çš„å¸¸ç”¨åŠŸèƒ½ä»‹ç»ï¼Œè€Œã€Scrcpyã€çš„å®åŠ›è¿œè¿œä¸æ­¢è¿™äº›ï¼Œä½ å¯ä»¥å‰å¾€å…¶é¡¹ç›®ä¸»é¡µè¿›è¡Œè¯¦ç»†äº†è§£ã€‚ æ€»çš„æ¥è¯´ã€Scrcpyã€å®ç°äº†åœ¨ç”µè„‘å‰è½»æ¾å¤„ç†æ‰‹æœºç«¯çš„äº‹æƒ…çš„éœ€æ±‚ï¼Œå¼€æºå…è´¹ï¼Œç»å¯¹æ˜¯åŠå…¬å’Œæ‘¸é±¼å…¼é¡¾çš„åˆ©å™¨ã€‚ ","link":"https://LiarrDev.github.io/post/Scrcpy/"},{"title":"Android R ä¸å†æ”¯æŒ APK Signature Scheme v1","content":"æœ€è¿‘åˆšå¯¹æ¥äº†ä¸€ä¸ªæ–°æ¸¸æˆï¼Œå¤„ç†å®Œæ¸ é“å¹¿å‘Šåï¼Œå¸‚åœºå’Œè¿è¥çš„åŒäº‹åé¦ˆè¯´åœ¨ ViVO æ‰‹æœºä¸Šæ— æ³•å®‰è£…ï¼Œç³»ç»Ÿæç¤ºå¦‚ä¸‹ï¼š æ—¢ç„¶ç›´æ¥ä¸‹è½½å®‰è£…ä¼šå¤±è´¥ï¼Œé‚£å¯ä»¥å€ŸåŠ© ADB å·¥å…·å®‰è£…ä¸€ä¸‹ï¼Œæ”¶åˆ°å¦‚ä¸‹æŠ¥é”™ï¼š âœ adb install game.apk Performing Streamed Install adb: failed to install game.apk: Failure [INSTALL_PARSE_FAILED_NO_CERTIFICATES: Scanning Failed.: No signature found in package of version 2 or newer for package &lt;package_name&gt;] æ„æ€æ˜¯è¯´å®‰è£…åŒ…æ²¡æœ‰ V2 æˆ–æ›´é«˜ç­‰çº§çš„ç­¾åã€‚ å› ä¸ºåœ¨æˆ‘çš„åä¸ºæ‰‹æœºä¸Šæ˜¯èƒ½å®‰è£…æˆåŠŸçš„ï¼Œæ‰€ä»¥é¦–å…ˆå¯ä»¥è€ƒè™‘æ˜¯ Android ç‰ˆæœ¬é—®é¢˜æˆ– ROM çš„é—®é¢˜ã€‚ ç”±äº ROM çš„ç‹¬æœ‰ç‰¹å¾æ¯”è¾ƒéš¾å»è¿½è¸ªï¼Œå› æ­¤å…ˆçœ‹çœ‹æ˜¯å¦ä¸º Android ç‰ˆæœ¬é—®é¢˜ï¼Œåé¦ˆçš„ä¸¤å° ViVO æ‰‹æœºçš†ä¸º Android Rï¼ˆAPI 30ï¼ŒAndroid 11ï¼‰ï¼Œè€Œæˆ‘çš„åä¸ºæ‰‹æœºæ˜¯ Android Qï¼ˆAPI 29ï¼ŒAndroid 10ï¼‰ï¼Œå»å®˜ç½‘çœ‹çœ‹ Android 11 çš„ç‰ˆæœ¬æ–°ç‰¹æ€§ï¼š Apps that target Android 11 (API level 30) that are currently only signed using APK Signature Scheme v1 must now also be signed using APK Signature Scheme v2 or higher. Users can't install or update apps that are only signed with APK Signature Scheme v1 on devices that run Android 11. å¯¹äºä»¥ Android 11ï¼ˆAPI 30ï¼‰ä¸ºç›®æ ‡å¹³å°ï¼Œä¸”ç›®å‰ä»…ä½¿ç”¨ APK ç­¾åæ–¹æ¡ˆ v1 ç­¾åçš„åº”ç”¨ï¼Œç°åœ¨è¿˜å¿…é¡»ä½¿ç”¨ APK ç­¾åæ–¹æ¡ˆ v2 æˆ–æ›´é«˜ç‰ˆæœ¬è¿›è¡Œç­¾åã€‚ç”¨æˆ·æ— æ³•åœ¨æ­è½½ Android 11 çš„è®¾å¤‡ä¸Šå®‰è£…æˆ–æ›´æ–°ä»…é€šè¿‡ APK ç­¾åæ–¹æ¡ˆ v1 ç­¾åçš„åº”ç”¨ã€‚ ç®€å•æ¥è¯´å°±æ˜¯ï¼ŒtargetSdkVersion ä¸º 30 ä¸”ä»…ä½¿ç”¨ V1 ç­¾åçš„åº”ç”¨æ— æ³•åœ¨ Android 11 çš„æ‰‹æœºä¸Šæ­£å¸¸å®‰è£…ã€‚ æˆ‘é‡åˆ°çš„è¿™ä¸ªé—®é¢˜æ°å¥½å°±æ˜¯å› ä¸ºè¿™ä¸ªåŸå› å¯¼è‡´çš„ï¼Œå› ä¸ºåœ¨å¯¹æ¥æŸäº›æ¸ é“çš„æ—¶å€™ï¼Œæ¸ é“æ–¹ä¼šè¦æ±‚ä½¿ç”¨ V1 ç­¾åäºæ˜¯æˆ‘ä»¬ç›®å‰å…¨æ¸ é“éƒ½ä½¿ç”¨ V1 ç­¾åæ–¹æ¡ˆï¼Œè€Œè¿™æ¬¡ç ”å‘æä¾›çš„æ¸¸æˆåŒ…åˆæ°å¥½ targetSdkVersion æ˜¯ 30ã€‚ æ—¢ç„¶è¿™ä¸ªé—®é¢˜ç”±ä¸¤ä¸ªæ¡ä»¶äº§ç”Ÿçš„ï¼Œé‚£å°±æœ‰ä¸¤ä¸ªè§£å†³æ–¹æ³•ã€‚ ç¬¬ä¸€ç§è§£å†³æ–¹æ³•æ˜¯ä½¿ç”¨ V2 æˆ–æ›´é«˜ç‰ˆæœ¬çš„ç­¾åæ–¹æ¡ˆï¼Œå³ä½¿ç”¨ã€ApkSignerã€å·¥å…·è¿›è¡Œç­¾åã€‚ ä½¿ç”¨è¿™ä¸ªæ–¹æ³•ä¹Ÿæœ‰è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå®˜æ–¹æ–‡æ¡£ä¸­éƒ½æœ‰æåˆ°ï¼š Apps that target Android 11 (API level 30) or higher can't be installed if they contain a compressed resources.arsc file or if this file is not aligned on a 4-byte boundary. å¦‚æœä»¥ Android 11ï¼ˆAPI 30ï¼‰æˆ–æ›´é«˜ç‰ˆæœ¬ä¸ºç›®æ ‡å¹³å°çš„åº”ç”¨åŒ…å«å‹ç¼©çš„ resources.arsc æ–‡ä»¶æˆ–è€…å¦‚æœæ­¤æ–‡ä»¶æœªæŒ‰ 4 å­—èŠ‚è¾¹ç•Œå¯¹é½ï¼Œåº”ç”¨å°†æ— æ³•å®‰è£…ã€‚ å³ targetSdkVersion ä¸º 30 çš„åº”ç”¨å¿…é¡»å¯¹ APK æ–‡ä»¶ä½œå¯¹é½ä¼˜åŒ–ï¼Œåœ¨æ­¤ä¹‹å‰ï¼ŒAndroid å®˜æ–¹ä¸€ç›´éƒ½åªæ˜¯å»ºè®®å¯¹é½ï¼Œå¹¶æœªå¼ºåˆ¶è¦æ±‚ã€‚ å…·ä½“çš„æ“ä½œæ–¹æ³•åœ¨ä¹‹å‰çš„ã€Android åç¼–è¯‘å…¥é—¨æŒ‡å—ã€ä¸€æ–‡ä¸­æœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ ç¬¬äºŒç§è§£å†³æ–¹æ³•æ˜¯å°† targetSdkVersion é™ä¸º 30 ä»¥ä¸‹ã€‚ å°† targetSdkVersion é™çº§æœ€å¥½ç”±åº”ç”¨çš„å¼€å‘è€…æ¥å¤„ç†ï¼Œåœ¨æ¸¸æˆè¡Œä¸šç”±äºæ¸¸æˆåŒ…å¾€å¾€éœ€è¦ç»è¿‡å¤šä¸ªå…¬å¸å‘è¡Œè”è¿æµè½¬ï¼Œè¿™ç§æƒ…å†µå°±ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œæœ€å¥½äº¤ç»™ä¸Šæ¸¸å¤„ç†ï¼Œé™¤éä¸Šæ¸¸ä¸äºˆå¤„ç†ï¼Œä¸‹æ¸¸æ‰è‡ªè¡Œå¤„ç†ã€‚ å› ä¸ºä¸Šæ¸¸å¯ä»¥åœ¨å·¥ç¨‹é¡¹ç›®ä¸­åšè°ƒæ•´ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜ä¹Ÿèƒ½å¤ŸåŠæ—¶å‘ç°ï¼Œä¸‹æ¸¸åªèƒ½å¯¹ç°æœ‰ APK æ–‡ä»¶åšä¿®æ”¹ï¼Œå¾ˆå®¹æ˜“å‡ºé—®é¢˜ã€‚ ä¸Šæ¸¸çš„ä¿®æ”¹å°±ä¸å¤šè¯´äº†ï¼Œç›´æ¥åœ¨ã€Android Studioã€ä¸­å¤„ç†å³å¯ï¼Œä¸»è¦ä»‹ç»ä¸€ä¸‹ä¸‹æ¸¸çš„å¤„ç†æ–¹æ¡ˆã€‚ ä¾ç„¶å‚è€ƒã€Android åç¼–è¯‘å…¥é—¨æŒ‡å—ã€ä¸€æ–‡ï¼Œé¦–å…ˆå¯¹ APK æ–‡ä»¶ä½¿ç”¨ã€Apktoolã€è¿›è¡Œåç¼–è¯‘ï¼Œç„¶ååœ¨ apktool.yml ä¸­ä¿®æ”¹ targetSdkVersionï¼š sdkInfo: minSdkVersion: '16' targetSdkVersion: '29' ä¿®æ”¹å®Œæˆåç†è®ºä¸Šå°±å¯ä»¥é‡æ–°æ‰“åŒ…äº†ï¼Œä½†æ˜¯æˆ‘é‡æ–°æ‰“åŒ…åå‘ç°å³ä½¿ targetSdkVersion å·²ç»é™ä¸º 29 äº†ä½†ä¾ç„¶æœ‰å¯èƒ½æ²¡æœ‰è§£å†³é—®é¢˜ï¼Œè¿˜éœ€è¦å» AndroidManifest.xml ä¸­å°†ç›¸å…³ç‰ˆæœ¬ä¿¡æ¯åˆ é™¤æ‰ï¼Œå³å°†ï¼š &lt;manifest ... platformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot; android:compileSdkVersion=&quot;23&quot; android:compileSdkVersionCodename=&quot;6.0-2438415&quot; android:installLocation=&quot;auto&quot;&gt; ... &lt;/manifest&gt; ä¿®æ”¹ä¸ºï¼š &lt;manifest ... platformBuildVersionCode=&quot;1&quot; platformBuildVersionName=&quot;1.0&quot; android:installLocation=&quot;auto&quot;&gt; ... &lt;/manifest&gt; ç„¶åå›ç¼–è¯‘ï¼Œç›¸å…³ç‰ˆæœ¬ä¿¡æ¯ä¼šè‡ªåŠ¨è¡¥å…¨ï¼Œæœ€åä½¿ç”¨ã€JarSignerã€æˆ–ã€ApkSignerã€å·¥å…·è¿›è¡Œ V1 ç­¾åå³å¯ã€‚ è™½ç„¶ä¸¤ç§æ–¹æ³•éƒ½èƒ½è§£å†³é—®é¢˜ï¼Œä½†ä¾ç„¶å»ºè®®ä½¿ç”¨ç¬¬ä¸€ç§æ–¹æ¡ˆï¼Œå³ä½¿ç”¨ã€ApkSignerã€å·¥å…·è¿›è¡Œ V2 ç­¾åï¼Œæ¯•ç«Ÿé™çº§åªæ˜¯ä¸€ä¸ªç¼“å…µä¹‹è®¡ï¼Œå¼€å€’è½¦å°±è·Ÿä¸ä¸ŠæŠ€æœ¯å‘å±•çš„æ½®æµäº†ã€‚ å‚è€ƒå†…å®¹ è¡Œä¸ºå˜æ›´ï¼šä»¥ Android 11 ä¸ºç›®æ ‡å¹³å°çš„åº”ç”¨ | Android å¼€å‘è€… | Android Developers ","link":"https://LiarrDev.github.io/post/APK-Signature-Scheme-v1-is-No-Longer-Supported-on-Android-R/"},{"title":"Android å®ç°åŒå‡» Back é”®é€€å‡ºåº”ç”¨","content":"ç°åœ¨å¾ˆå¤šåº”ç”¨éƒ½æä¾›äº†åŒå‡» BACK é”®é€€å‡ºçš„åŠŸèƒ½ï¼Œç”¨ä¸ç®—é«˜çš„æ“ä½œæˆæœ¬ï¼Œæ¥å¢åŠ ç”¨æˆ·çš„ç•™å­˜æ—¶é—´ï¼Œä¹Ÿé™ä½äº†è¯¯è§¦çš„é£é™©ã€‚ ä»Šå¤©ä»‹ç»ä¸€ä¸‹å¦‚ä½•å®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ Android ä¸­æ²¡æœ‰ç›´æ¥æä¾›ç›‘å¬åŒå‡» BACK é”®çš„æ–¹æ³•ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è‡ªå·±å®ç°ã€‚æ€è·¯å¤§æ¦‚æ˜¯ç›‘å¬ BACK é”®æ˜¯å¦æœ‰ç‚¹å‡»äº‹ä»¶ï¼Œæœ‰çš„è¯åˆ¤æ–­æ˜¯ç¬¬å‡ æ¬¡ç‚¹å‡»ï¼Œå¹¶è®¾ç½®ä¸€ä¸ªæ—¶é—´æ¥å¯¹ç‚¹å‡»çš„çŠ¶æ€è¿›è¡Œé‡ç½®ï¼Œé¿å…ä¸¤æ¬¡ç‚¹å‡»ç›¸å·®æ—¶é—´è¿‡é•¿ä¹Ÿå¯ä»¥å“åº”çš„æƒ…å†µã€‚ å¥½çš„ï¼Œæ¥ä¸‹æ¥å°±æ˜¯å®ç°äº†ï¼š åˆ©ç”¨çº¿ç¨‹å»¶æ—¶ public class MainActivity extends Activity { ... private static boolean mBackKeyPressed = false; // è®°å½•æ˜¯å¦æœ‰é¦–æ¬¡æŒ‰é”® @Override public void onBackPressed() { if (!mBackKeyPressed) { Toast.makeText(this, &quot;Click again to exit&quot;, Toast.LENGTH_SHORT).show(); mBackKeyPressed = true; new Timer().schedule(new TimerTask() { @Override public void run() { mBackKeyPressed = false; } }, 2000); } else { super.onBackPressed(); } } } è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª boolean ç±»å‹çš„å˜é‡æ¥è®°å½•æ˜¯å¦å·²ç»ç‚¹å‡»è¿‡ BACK é”®ï¼Œå¦‚æœæ²¡æœ‰ï¼Œåˆ™ç»™å‡ºæç¤ºï¼Œè®©ç”¨æˆ·å†ç‚¹ä¸€æ¬¡é€€å‡ºï¼Œå¦‚æœå·²ç»ç‚¹å‡»è¿‡ä¸€æ¬¡ï¼Œé‚£ä¹ˆè¿™æ¬¡å“åº”å°±ç›´æ¥é€€å‡ºåº”ç”¨ã€‚ ç›‘å¬ BACK é”®çš„æ–¹æ³•åœ¨ã€Android ä¸º WebView é‡å†™ Back é”®ã€ä¸€æ–‡æœ‰ç›¸å…³ä»‹ç»ï¼Œè¿™é‡Œé€‰å–äº† onBackPressed() æ¥è¿›è¡Œç›‘å¬ï¼Œé€šè¿‡ Timer æ¥è®¾ç½®å“åº”é—´éš”ï¼Œå³ 2 ç§’å†…å¦‚æœä¸é€€å‡ºåº”ç”¨ï¼Œåˆ™å¯¹ç¬¬ä¸€æ¬¡ç‚¹å‡»æ“¦é™¤ã€‚ é€šè¿‡è®¡ç®—æ—¶é—´å·® public class MainActivity extends Activity { ... private long mPressedTime = 0; @Override public void onBackPressed() { long mNowTime = System.currentTimeMillis(); if ((mNowTime - mPressedTime) &gt; 2000) { Toast.makeText(this, &quot;Click again to exit&quot;, Toast.LENGTH_SHORT).show(); mPressedTime = mNowTime; } else { super.onBackPressed(); } } } è¿™é‡Œå®šä¹‰ä¸€ä¸ª long ç±»å‹çš„å˜é‡ç”¨æ¥è®°å½•ç”¨æˆ·ç‚¹å‡» BACK é”®æ—¶çš„æ—¶é—´ï¼Œé»˜è®¤ä¸º 0ï¼Œè¡¨ç¤ºæ²¡æœ‰ç‚¹å‡»ï¼Œå¹¶åœ¨ onBackPressed() å†…è·å–åˆ°ç‚¹å‡» BACK é”®æ—¶çš„æ—¶é—´ï¼Œç„¶åä½œåˆ¤æ–­ï¼Œå‡å¦‚å·®å¤§äº 2 ç§’ï¼Œåˆ™ç»™å‡ºæç¤ºï¼Œè®©ç”¨æˆ·å†ç‚¹ä¸€æ¬¡é€€å‡ºï¼Œå¦‚æœå°äº 2 ç§’ï¼Œåˆ™ç›´æ¥é€€å‡ºåº”ç”¨ã€‚ è¯¥æ–¹æ³•ä¸åƒä¸Šæ–¹çº¿ç¨‹å»¶è¿Ÿå°†çŠ¶æ€é‡ç½®ä¸ºåˆå§‹å€¼ï¼Œè¿™é‡Œæ¯æ¬¡è¶…æ—¶ç‚¹å‡»éƒ½ä¼šå°† mPressedTime ç½®ä¸ºå½“æ—¶ç‚¹å‡»çš„æ—¶é—´ï¼Œä¹Ÿå°±æ˜¯è¯´è¯¥å€¼ä¼šä¸æ–­å¢é•¿ï¼Œç›´è‡³é€€å‡ºåº”ç”¨ã€‚ å®ç°æ•ˆæœå¦‚ä¸‹ è¿™é‡Œé¡ºä¾¿å†ç»™ä¸ªåä¾‹ï¼Œæ˜¯å¹¿å‘é“¶è¡Œæ——ä¸‹çš„ä¿¡ç”¨å¡åº”ç”¨ã€å‘ç°ç²¾å½©ã€çš„åŒå‡»é€€å‡ºå®ç°ï¼š ã€å‘ç°ç²¾å½©ã€ä½¿ç”¨çš„æ˜¯å¼¹çª—è€Œé Toastï¼Œå½“ç”¨æˆ·è¿ç»­åŒå‡» BACK é”®åï¼Œæ‰ä¼šç»™å‡ºå¼¹çª—ï¼Œä¹Ÿå°±æ˜¯è¯´æ­£å¸¸æƒ…å†µä¸‹ç”¨æˆ·éœ€è¦ç‚¹å‡»ä¸‰æ¬¡æ‰èƒ½æˆåŠŸé€€å‡ºï¼Œæ— å½¢ä¸­å°±å¢åŠ äº†ç”¨æˆ·çš„ç‚¹å‡»æˆæœ¬ã€‚ å¦å¤–ï¼Œå½“ç”¨æˆ·è¿ç»­ç‚¹å‡»å¥‡æ•°æ¬¡æ—¶ï¼Œå¼¹çª—ä¼šæ¶ˆå¤±ï¼Œä½†åº”ç”¨ä¸ä¼šé€€å‡ºï¼Œå¦‚æ­¤åå¤ã€‚ç”¨æˆ·å¹³æ—¶å¦‚æœè¿›å…¥å¤šä¸ªé¡µé¢åï¼Œç‚¹å‡» BACK é”®ä¼šå°†å¤šä¸ªé¡µé¢å‡ºæ ˆï¼Œç›´è‡³æœ€åä¸€ä¸ªé¡µé¢æ‰ä¼šé€€å‡ºï¼Œé‚£ä¹ˆå½“ç”¨æˆ·æ‰€å¤„çš„é¡µé¢ä¸ºéä¸»é¡µè€Œç”¨æˆ·æ­¤æ—¶æƒ³é€€å‡ºæ—¶ï¼Œå°±ä¼šä¸€ç›´è¿ç»­ç‚¹å‡» BACK é”®ï¼Œç”±äºç‚¹å‡»è¿‡äºè¿…é€Ÿï¼Œç”¨æˆ·ä¹Ÿä¸ä¼šåœ¨æ„è‡ªå·±ç‚¹äº†å¤šå°‘æ¬¡ï¼Œæ‰€ä»¥å¾ˆå¤§å‡ ç‡ä¼šå¯¼è‡´å¼¹çª—æ¶ˆå¤±ï¼Œä½¿ç”¨æˆ·çš„ç‚¹å‡»æˆæœ¬è¶Šæ¥è¶Šé«˜ï¼Œè¿™ç§äº¤äº’ä¸€å®šæ˜¯äº§å“ç»ç†è„‘æŠ½æ‰ä¼šæƒ³å‡ºæ¥çš„ã€‚ ","link":"https://LiarrDev.github.io/post/Double-Click-the-BACK-Key-to-Exit-on-Android /"},{"title":"ç»•è¿‡é˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½•çš„åŒ…åæ£€æµ‹æœºåˆ¶","content":"ç°åœ¨è¶Šæ¥è¶Šå¤šçš„ App å¼€å§‹æ”¯æŒæœ¬æœºå·ç ä¸€é”®ç™»å½•çš„åŠŸèƒ½äº†ï¼Œé€šè¿‡å’Œè¿è¥å•†åˆä½œï¼Œè·å–åˆ°å½“å‰ä½¿ç”¨ç½‘ç»œçš„æ‰‹æœºå¡å·ç ï¼Œè¿›è¡Œç™»å½•æµç¨‹ï¼Œèƒ½å¤Ÿå‡å°‘ç”¨æˆ·çš„æ“ä½œæ­¥éª¤ï¼Œæé«˜è½¬åŒ–ç‡ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œå›½å†…ç°åœ¨ä¸»æµé€šè®¯è¿è¥å•†æœ‰ä¸‰å®¶ï¼Œåˆ†åˆ«æ˜¯ä¸­å›½ç§»åŠ¨ã€ä¸­å›½è”é€šå’Œä¸­å›½ç”µä¿¡ã€‚ è¿™å°±æ„å‘³ç€ï¼Œå¯¹æ¥ä¸‰å®¶è¿è¥å•†å°±æœ‰ä¸‰å¥—å¯¹æ¥æµç¨‹ï¼Œè¦å¯¹æ¥ä¸‰æ¬¡ SDKï¼Œä½†ï¼Œæ­£å¦‚æ‰€æœ‰çš„èšåˆæœåŠ¡æ‰€éœ€ï¼Œæ€»ä¼šäº§ç”Ÿèšåˆè¿™ä¸‰å®¶è¿è¥å•†ä¸€é”®ç™»å½•æœåŠ¡çš„ SDK ä¾›å¤§å®¶ä½¿ç”¨ã€‚ é˜¿é‡Œäº‘ä½œä¸ºå›½å†…æ•°å­—ç»æµåŸºç¡€è®¾æ–½æ¯”è¾ƒå®Œå–„çš„ä»£è¡¨ï¼Œå¾€å¾€ä¼šä½œä¸ºè®¸å¤šä¼ä¸šçš„é¦–é€‰ã€‚æˆ‘æ‰€åœ¨çš„ä¼ä¸šï¼Œè‡ªç„¶ä¹Ÿæ˜¯é€‰æ‹©äº†å®ƒã€‚ æ–‡å‰é¢„è­¦ï¼Œæœ¬æ–‡éœ€é…åˆé˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½•æ–‡æ¡£ä¸€åŒé£Ÿç”¨ï¼Œå»ºè®®å…ˆæŒ‰ç…§æ–‡æ¡£å’Œå®˜æ–¹æä¾›çš„ Demo å…ˆæ¥ä¸€éäº†è§£æµç¨‹ã€‚ æ¥å…¥é˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½•æœåŠ¡é¦–å…ˆè¦åˆ°é˜¿é‡Œäº‘åå°ç”³è¯·å‚æ•°ï¼Œç”³è¯·å‚æ•°éœ€è¦æä¾›åº”ç”¨çš„åŒ…åå’Œç­¾åï¼Œç„¶åé˜¿é‡Œäº‘ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªå¯†é’¥ã€‚ ä¹‹å‰çš„æ–‡ç« æœ‰æåˆ°è¿‡ï¼Œæˆ‘ç›®å‰ä»äº‹æ¸¸æˆè¡Œä¸šï¼Œå›½å†…æ¸¸æˆè¡Œä¹±è±¡å¤§å®¶éƒ½çŸ¥é“ï¼Œé©¬ç”²åŒ…éåœ°éƒ½æ˜¯ï¼Œæ‹¥æœ‰ä¸åŒåŒ…åçš„é©¬ç”²åŒ…å¦‚æœæƒ³è¦éƒ½æ¥å…¥æœ¬æœºå·ç ä¸€é”®ç™»å½•åŠŸèƒ½çš„è¯ï¼Œå°±å¾—ç”³è¯·å¤šå¥—ä¸åŒçš„å‚æ•°ï¼Œè¿™å¤§å¤§å¢åŠ äº†å¯¹æ¥æˆæœ¬ã€‚ é‚£ä¹ˆï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½ç»•è¿‡é˜¿é‡Œäº‘å¯¹åŒ…åçš„æ£€æµ‹ï¼Œè®©å¤šä¸ªé©¬ç”²åŒ…éƒ½å…±ç”¨åŒä¸€å¥—å‚æ•°å‘¢ï¼Ÿ æ¥è¯•è¯•çœ‹ã€‚ æˆ‘è¿™é‡Œæ‹¿é˜¿é‡Œäº‘å®˜æ–¹ Demo æä¾›çš„å‚æ•°è¿›è¡Œæ¼”ç¤ºï¼Œå®é™…é¡¹ç›®æŒ‰éœ€ä¿®æ”¹ã€‚ public class AliParameter { // é˜¿é‡Œäº‘å®˜æ–¹ Demo é‡Œçš„åŒ…åï¼Œæ›¿æ¢ä¸ºç”³è¯·å‚æ•°æ—¶å¡«å†™çš„åŒ…å public static String AUTH_PACKAGE_NAME = &quot;com.aliqin.mytel&quot;; // é˜¿é‡Œäº‘å®˜æ–¹ Demo é‡Œçš„å¯†é’¥ï¼Œæ›¿æ¢ä¸ºç”³è¯·çš„å¯†é’¥ï¼Œç†è®ºä¸Šå¯†é’¥åº”å½“æ”¾åœ¨æœåŠ¡ç«¯ public static String AUTH_KEY = &quot;7KHffk2Cn1j17+QVA2zbJfdDteDSUDspB/s+FUoAhyXmQ/wueAQBcpMDOVLrp5lt5BDIGxDrCuTBZk7TcR4CxAQvHnJUPIaCI5dscbBFqHgHVI8Yoy0nYwsFo8Gyd2RZ6MbUAZr3lsnPQsA+UW1MZY9EP94x0TrXmwEJkU5xJgmOJfCSekYWHP5xNc0as/aWkTmNrjFyb5//93cAMwQllH0FFEFF+GEd7XMvm6ap/g4BD8676+z29MbePXPjoY6u3VrNTMkksQHW1EolxJkw+9Sa5pDsdOrQjXBz056J79PpNAFlTvPMZw==&quot;; // ä¸‰å¤§è¿è¥å•†çš„åè®®åœ°å€ public static String PHONE_AUTH_YIDONG_CONTRACT = &quot;https://wap.cmpassport.com/resources/html/contract.html&quot;; public static String PHONE_AUTH_LIANTONG_CONTRACT = &quot;https://ms.zzx9.cn/html/oauth/protocol2.html&quot;; public static String PHONE_AUTH_DIANXIN_CONTRACT = &quot;https://e.189.cn/sdk/agreement/content.do?type=main&amp;appKey=&amp;hidetop=true&quot;; } è®°å¾—ç­¾åä¹Ÿè¦é…ç½®ï¼Œå‚è€ƒä¹‹å‰ã€ã€ŒAndroid Studioã€ç”¨ Gradle å®ç°è‡ªåŠ¨ç­¾åã€ä¸€æ–‡ï¼š android { ... signingConfigs { // é˜¿é‡Œäº‘å®˜æ–¹ Demo é‡Œçš„ç­¾åï¼Œåº”ç”¨ä¸­åº”æ›¿æ¢ä¸ºç”³è¯·å‚æ•°æ—¶å¡«å†™çš„ç­¾å config { keyAlias 'androiddebugkey' keyPassword 'android' storeFile file('sig-adaptation/debug/debug.keystore') storePassword 'android' v1SigningEnabled true v2SigningEnabled true } } buildTypes { release { signingConfig signingConfigs.config minifyEnabled false proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' } debug { debuggable true signingConfig signingConfigs.config } } } é¦–å…ˆéœ€è¦äº†è§£é˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½• SDK æ˜¯å¦‚ä½•æ£€æµ‹åŒ…åçš„ï¼Œå¾ˆç®€å•ï¼Œè·Ÿæˆ‘ä»¬è·å–åŒ…åçš„æ“ä½œç±»ä¼¼ï¼Œé€šè¿‡è°ƒç”¨ Context çš„ getPackageName() æ¥è·å–ï¼Œå†ä¸æœåŠ¡ç«¯æ ¡éªŒã€‚ Context å¦‚ä½•è·å–ï¼Œçœ‹åˆå§‹åŒ–å°±å¯ä»¥ï¼Œå¤§å¤šæ•° SDK çš„åˆå§‹åŒ–æ“ä½œéƒ½æ˜¯ä¸ºäº†è·å– Context å¯¹è±¡ï¼Œè€Œå¹¸è¿çš„æ˜¯ï¼Œé˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½• SDK å¹¶æ²¡æœ‰ä½¿ç”¨ App Startup è¿™äº›æ–°æŠ€æœ¯ï¼Œè€Œæ˜¯è®©å¯¹æ¥æ–¹æ‰‹åŠ¨è°ƒç”¨ï¼š /** * è·å–å·ç è®¤è¯æœåŠ¡å®ä¾‹ï¼Œæ­¤å®ä¾‹ä¸ºå•ä¾‹ï¼Œè·å–å¤šæ¬¡ä¸ºåŒâ¼€å¯¹è±¡ * @param context Androidä¸Šä¸‹â½‚ * @param tokenListener éœ€è¦å®ç°çš„è·å–tokenå›è°ƒ * @return PhoneNumberAuthHelper */ public static PhoneNumberAuthHelper getInstance(Context context, TokenResultListener tokenListener) è¿™å°±ç®€å•è®¸å¤šäº†ï¼Œå‡å¦‚æˆ‘ä»¬èƒ½å¤Ÿè‡ªå®šä¹‰ä¸€ä¸ª Context ä¼ ç»™æœ¬æœºå·ç ä¸€é”®ç™»å½•çš„ SDKï¼Œä½¿å¾— SDK åœ¨è·å–åŒ…åæ—¶ï¼Œè¿”å›æˆ‘ä»¬ç”³è¯·å‚æ•°çš„åŒ…åè€Œä¸æ˜¯å®é™…åŒ…åï¼Œå°±èƒ½å¤Ÿç»•è¿‡å®ƒçš„æ£€æµ‹æœºåˆ¶äº†ã€‚ Context æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œåœ¨ Android ä¸­å¯¹ Context çš„å®ç°éå¸¸å¤šï¼Œä½†å¾€å¾€ç»§æ‰¿è¶Šæ·±ï¼Œä»£ç ä¹Ÿå°±è¶Šå¤æ‚ï¼Œæ ¹æ®å¼€å‘ç»éªŒï¼Œç»§æ‰¿è‡ª Context çš„ Application å¯¹äºè·å–è¿™ç§å…¨å±€çš„ä¸œè¥¿å¾€å¾€ä¼šæ¯”å…¶ä»–ç»„ä»¶è¦ç¨å¾®æ–¹ä¾¿ä¸€äº›ï¼Œæ‰€ä»¥å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ª Application æ¥å®ç°æˆ‘ä»¬çš„éœ€æ±‚ã€‚ public class AliApplication extends Application { public AliApplication(Context realContext) { try { Method method = Application.class.getDeclaredMethod(&quot;attach&quot;, Context.class); method.setAccessible(true); method.invoke(this, realContext); } catch (Exception e) { e.printStackTrace(); } } } å› ä¸ºè¿™ä¸ª Application æˆ‘ä»¬åªç”¨æ¥æ¬ºéª—é˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½• SDKï¼Œæ‰€ä»¥ä¸ä¼šåœ¨ AndroidManifest ä¸­æ³¨å†Œå®ƒï¼Œé‚£ä¹ˆè¿™ä¸ª Application çš„ä¸€äº›åˆå§‹åŒ–æ–¹æ³•å°±ä¸èƒ½å¾—åˆ°æ‰§è¡Œã€‚ æ‰€ä»¥éœ€è¦é‡‡ç”¨åå°„è·å–ï¼Œå¹¶ä½¿ç”¨ invoke() æ‰§è¡Œå®ä¾‹å¯¹åº”çš„æ–¹æ³•ã€‚ å½“æˆ‘ä»¬æŠŠè¿™ä¸ª Application å¯¹è±¡ä¼ ç»™ SDK åï¼ŒåŒ…åå’Œç­¾åéƒ½ä¼šç”±è¿™ä¸ª Application æ¥æä¾›ã€‚ å…ˆæ¥çœ‹ç­¾åï¼Œå› ä¸ºæˆ‘ä»¬çš„ç­¾åä¸éœ€è¦æ”¹å˜ï¼Œæ‰€ä»¥åªéœ€è¦å°†åº”ç”¨æœ¬èº«çš„ç­¾åå›ä¼ å³å¯ã€‚ å†™ä¸€ä¸ªè·å–åº”ç”¨ç­¾åçš„æ–¹æ³•ï¼š public static Signature[] getSignatures(PackageManager manager, String packageName) { try { PackageInfo packageInfo = manager.getPackageInfo(packageName, PackageManager.GET_SIGNATURES); return packageInfo.signatures; } catch (PackageManager.NameNotFoundException e) { e.printStackTrace(); } return null; } è¿™æ—¶å€™ä½ åº”è¯¥å‘ç°ï¼Œè·å–åº”ç”¨ç­¾åéœ€è¦æä¾›ä¸€ä¸ª PackageManager å¯¹è±¡ï¼Œé˜¿é‡Œäº‘æœ¬æœºå·ç ä¸€é”®ç™»å½• SDK ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œé‚£å°±å¾—å†å‘å®ƒæä¾›ä¸€ä¸ªè‡ªå®šä¹‰çš„ PackageManager äº†ã€‚ public class AliPackageManager extends PackageManager { private final PackageManager packageManager; private final String realPackageName; private Signature[] sSignature; public AliPackageManager(PackageManager packageManager, String realPackageName) { this.packageManager = packageManager; this.realPackageName = realPackageName; } @Override public PackageInfo getPackageInfo(@NonNull String packageName, int flags) throws NameNotFoundException { PackageInfo packageInfo = packageManager.getPackageInfo(realPackageName, flags); packageInfo.signatures = getSignature(); packageInfo.packageName = AliParameter.AUTH_PACKAGE_NAME; return packageInfo; } private Signature[] getSignature() { if (sSignature != null) { return sSignature; } sSignature = SignatureUtil.getSignatures(packageManager, realPackageName); return sSignature; } ... } PackageManager ä¹Ÿæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œéœ€è¦å®ç°å¾ˆå¤šä¸ªæ–¹æ³•ï¼Œä½†è¿™äº›æ–¹æ³•å¤§å¤šæ•°æˆ‘ä»¬éƒ½ç”¨ä¸ä¸Šï¼Œæ‰€ä»¥å¯ä»¥å¿½ç•¥ï¼Œåªå°† getPackageInfo() æ–¹æ³•å®ç°å³å¯ï¼Œä¸»è¦å°±æ˜¯å°è£…åŒ…åä¸ç­¾åã€‚ æ¥ä¸‹æ¥å°±è¦åœ¨ AliApplication ä¸­è°ƒç”¨ï¼š public class AliApplication extends Application { ... @Override public PackageManager getPackageManager() { return new AliPackageManager(super.getPackageManager(), super.getPackageName()); } } è¿™ä¸ªæ—¶å€™è°ƒç”¨ï¼š AliApplication application = new AliApplication(context); PhoneNumberAuthHelper mPhoneNumberAuthHelper = PhoneNumberAuthHelper.getInstance(application, tokenResultListener); mPhoneNumberAuthHelper.setAuthSDKInfo(AliParameter.AUTH_KEY); mPhoneNumberAuthHelper.getReporter().setLoggerEnable(true); mPhoneNumberAuthHelper.checkEnvAvailable(PhoneNumberAuthHelper.SERVICE_TYPE_AUTH); ä½ å°±å‘ç°ï¼Œåº”ç”¨å´©æºƒäº†â€¦ å®é™…ä¸Šè¿˜æ¼äº†ä¸€ä¸ªæ–¹æ³•ï¼š public class AliApplication extends Application { ... @Override public Context getApplicationContext() { return this; } } ä½ å¯èƒ½ä¼šæœ‰ç–‘æƒ‘ï¼Œä¸ºä»€ä¹ˆä¸éœ€è¦é‡å†™ Application çš„ getPackageName()ã€‚åªä¸è¿‡ SDK ä¼¼ä¹éƒ½æ˜¯é€šè¿‡ PackageManager æ¥è·å–çš„ï¼Œå®é™…ä¸Šä½ é‡å†™ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚ å†è¿è¡Œï¼Œä½ ä¼šå‘ç°ï¼Œåº”ç”¨æ²¡æœ‰å´©æºƒï¼Œä½†æ˜¯å´æ²¡æœ‰æ‹‰èµ·æˆæƒé¡µï¼ŒSDK å›è°ƒäº†ä»¥ä¸‹é”™è¯¯ï¼š { &quot;code&quot;:&quot;600002&quot;, &quot;msg&quot;:&quot;å”¤èµ·æˆæƒé¡µå¤±è´¥&quot;, ... } è¿™ä¸ªé”™è¯¯ä¿¡æ¯ä½ æŸ¥æ–‡æ¡£çš„è¯å¹¶æ²¡æœ‰ä»€ä¹ˆä½œç”¨ï¼Œä½†æ˜¯å®ƒèƒ½å¤Ÿå‘Šè¯‰æˆ‘ä»¬ç­¾åå’ŒåŒ…åéƒ½å·²è·å–æ­£ç¡®äº†ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„æ­¥éª¤æ“ä½œæ­£ç¡®ã€‚ æ¥ä¸‹æ¥å°±è¦å¼€å§‹å¯¹ SDK è¿›è¡Œé­”æ”¹äº†ã€‚ åœ¨è¿›è¡Œè¿™ä¸€æ­¥ä¹‹å‰ï¼Œæˆ‘å¿…é¡»è¦æä¸ªé†’ï¼Œé˜¿é‡Œäº‘æä¾›çš„æ¥å…¥æ–‡æ¡£ä¸­æœ‰ç›¸å…³æœåŠ¡å£°æ˜ï¼š æ³¨æ„ï¼š ä¸€é”®ç™»å½•æˆ–æ³¨å†Œéœ€ç”¨æˆ·ç¡®è®¤æˆæƒæ–¹å¯ä½¿ç”¨ï¼Œå¼€å‘è€…ä¸å¾—é€šè¿‡ä»»ä½•æŠ€æœ¯æ‰‹æ®µè·³è¿‡æˆ–æ¨¡æ‹Ÿæ­¤æ­¥éª¤ï¼Œå¦åˆ™æˆ‘æ–¹æœ‰æƒåœæ­¢æœåŠ¡å¹¶è¿½ç©¶ç›¸å…³æ³•å¾‹è´£ä»»ã€‚ ç™»å½•æŒ‰é’®æ–‡å­—æè¿°å¿…é¡»åŒ…å«â€œç™»å½•â€æˆ–â€œæ³¨å†Œâ€ç­‰æ–‡å­—ï¼Œä¸å¾—è¯±å¯¼ç”¨æˆ·æˆæƒã€‚ å¯¹äºæ¥å…¥ç§»åŠ¨è®¤è¯SDKå¹¶ä¸Šçº¿çš„åº”ç”¨ï¼Œæˆ‘æ–¹ä¼šå¯¹ä¸Šçº¿çš„åº”ç”¨æˆæƒé¡µé¢åšå®¡æŸ¥ï¼Œå¦‚æœæœ‰å‡ºç°æœªæŒ‰è¦æ±‚å¼¹å‡ºæˆ–è®¾è®¡æˆæƒé¡µé¢çš„ï¼Œå°†å…³é—­åº”ç”¨çš„ä¸€é”®ç™»å½•æˆ–æ³¨å†ŒæœåŠ¡ã€‚ ä»¥ä¸‹å†…å®¹ä»…ä½œå­¦ä¹ äº¤æµï¼Œå¦‚äº§ç”Ÿä»»ä½•è´£ä»»ç”±åº”ç”¨çš„å¼€å‘è€…æ‰¿æ‹…ã€‚ å›åˆ°æ­£é¢˜ï¼Œé­”æ”¹çš„è¯è¦ä»å“ªé‡Œå…¥æ‰‹ï¼Ÿ ä¸éš¾æ³¨æ„åˆ°æ¥å…¥æµç¨‹è¦æˆ‘ä»¬æ‰‹åŠ¨æ³¨å†Œä¸‰ä¸ª Activityï¼Œå¾ˆæ˜æ˜¾ï¼ŒLoginAuthActivity å°±æ˜¯æˆ‘ä»¬çš„ç›®æ ‡ï¼Œè€Œä¸”ä½ ä¹Ÿå‘ç°æœ‰ä¸¤ä¸ª LoginAuthActivityã€‚ å¦ä¸€æ–¹é¢ï¼Œæˆ‘ä»¬æ— æ³•æ­£å¸¸å”¤èµ·æˆæƒé¡µï¼Œè¯æ˜å”¤èµ·çš„æµç¨‹ä¹Ÿéœ€è¦ä¿®æ”¹ã€‚ è¿™ä¸¤ä¸ªé—®é¢˜åˆåœ¨ä¸€èµ·æ€è€ƒï¼Œæˆ‘ä»¬èƒ½ä¸èƒ½åœ¨ä¿®æ”¹å”¤èµ·æµç¨‹çš„æ—¶å€™ï¼Œå°†ä¸¤ä¸ª LoginAuthActivity åˆå¹¶ï¼Œå³æ— è®ºæ˜¯ç§»åŠ¨ã€è”é€šè¿˜æ˜¯ç”µä¿¡ï¼Œéƒ½åªå”¤èµ·åŒä¸€ä¸ª LoginAuthActivityï¼Œå› ä¸ºåŒæ ·çš„åŠŸèƒ½åˆ†ä¸¤ä¸ªé¡µé¢æˆ‘å®åœ¨æƒ³ä¸åˆ°åŸå› ã€‚ æƒ³è¦ç¯¡æ”¹ï¼Œé¦–å…ˆå°±å¾—å¼„æ¸…æ¥šæµç¨‹ï¼Œå…ˆåç¼–è¯‘çœ‹çœ‹ä»£ç ã€‚ æ ¹æ®åŒ…åå¯ä»¥å®šä½åˆ°æ˜¯ã€ŒphoneNumber-L-AuthSDK.arrã€è¿™ä¸ªåº“é‡Œé¢çš„ï¼Œè§£å‹æ‹¿åˆ° Jar åŒ…ä¸¢è¿›ä¹‹å‰åœ¨ã€Android åç¼–è¯‘å…¥é—¨æŒ‡å—ã€ä¸€æ–‡ä¸­æåˆ°çš„å·¥å…·ã€JADXã€é‡Œé¢å°±å¯ä»¥äº†ï¼Œä½†åç¼–è¯‘åæˆ‘ç¬é—´å°±æ‡µäº†ï¼Œé˜¿é‡Œäº‘å¯¹è¿™ä¸ª SDK åšäº†æ··æ·†ï¼Œå¹¶ä¸”è¿˜æœ‰ä¸€äº›æ–¹æ³•å†™åœ¨äº† SO åº“ä¸­ï¼Œå¤§å¤§å¢åŠ äº†æˆ‘ä»¬ä¿®æ”¹çš„éš¾åº¦ã€‚ é€šè¿‡ä»£ç æœç´¢ï¼Œæœ€ç»ˆå®šä½åˆ°å”¤èµ·æµç¨‹åœ¨ä¸€ä¸ªæ··æ·†åä¸º d çš„ç±»ä¸­ï¼š public class d { ... public void a(long j2, String str, String str2, ResultCodeProcessor resultCodeProcessor, e eVar) { ... try { ... Intent intent = new Intent(this.c, LoginAuthActivity.class); intent.putExtra(Constant.LOGIN_ACTIVITY_NUMBER, str); intent.putExtra(Constant.LOGIN_ACTIVITY_VENDOR_KEY, str2); intent.putExtra(Constant.LOGIN_ACTIVITY_UI_MANAGER_ID, this.j); intent.putExtra(Constant.START_TIME, System.currentTimeMillis()); ... if (f().getAuthPageActIn() == null || f().getActivityOut() == null) { if (activity != null) { activity.startActivityForResult(intent, 1); } else { intent.addFlags(268435456); this.c.startActivity(intent); } } else if (activity != null) { ... if (TextUtils.isEmpty(authPageActIn) || TextUtils.isEmpty(activityOut)) { SupportJarUtils.startActivityForResult(activity, intent, 1, (String) null, (String) null); } else { SupportJarUtils.startActivityForResult(activity, intent, 1, authPageActIn, activityOut); } } else { intent.addFlags(268435456); this.c.startActivity(intent); } ... } catch (Exception e2) { ... } catch (Throwable th) { ... } } } ä¸­é—´é‚£ä¸€å †åˆ¤æ–­æˆ‘ä¹Ÿä¸çŸ¥é“å®ƒæœ‰å•¥ç”¨ï¼Œå¹²è„†ç›´æ¥å»æ‰ï¼š public class d { ... public void a(long l, String number, String vendor, ResultCodeProcessor resultCodeProcessor, com.mobile.auth.gatewayauth.e eVar) { try { this.t = l; Application application = ReflectionUtils.getApplication(); if (application != null) { application.registerActivityLifecycleCallbacks(this.v); } Activity activity = ReflectionUtils.getActivity(); Intent intent = new Intent(activity, LoginAuthActivity.class); intent.putExtra(&quot;isAli&quot;, true); intent.putExtra(&quot;number&quot;, number); intent.putExtra(&quot;vendor&quot;, vendor); intent.putExtra(&quot;ui_manager_id&quot;, this.j); intent.putExtra(&quot;startTime&quot;, System.currentTimeMillis()); this.a(resultCodeProcessor); b.put(this.j, this); activity.startActivityForResult(intent, AliParameter.ACTIVITY_REQUEST_CODE); if (eVar != null) { eVar.a(vendor, number); } } catch (Throwable throwable) { com.mobile.auth.gatewayauth.a.a(throwable); } } } ä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ï¼Œåæ­£ Intent å°è£…å¥½äº†ï¼Œé‚£å°±ç›´æ¥æ‹‰èµ· LoginAuthActivity å§ï¼Œä¸ºäº†æ›´å¥½çš„å¤„ç†å›è°ƒï¼Œè¿™é‡Œé€šè¿‡ startActivityForResult() æ‹‰èµ·ã€‚ ç„¶åå¤„ç† LoginAuthActivityï¼Œå¯¹äº Activity ä¸€èˆ¬å…ˆçœ‹ onCreate() æ–¹æ³•ï¼š @AuthNumber public class LoginAuthActivity extends Activity { ... public native void onCreate(Bundle bundle); } å¯æƒœçš„æ˜¯ï¼ŒLoginAuthActivity ç›´æ¥æŠŠ onCreate() å†™åœ¨äº† SO åº“ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œä¸è¦ç´§ï¼Œå¹¸å¥½è¿˜æœ‰åˆ«çš„ç”Ÿå‘½å‘¨æœŸï¼š @AuthNumber public class LoginAuthActivity extends Activity { ... public void onResume() { try { super.onResume(); } catch (Throwable th) { a.a(th); } } } å¯ä»¥çœ‹åˆ° SDK é‡Œçš„ onResume() å¹¶æ²¡æœ‰åšä»€ä¹ˆæ“ä½œã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªè‡ªå·±çš„ç•Œé¢æ¥å¤„ç†ç™»å½•å›è°ƒï¼Œæˆ‘è¿™é‡Œå°±ç”¨ä¸€ä¸ª TextView æ¥æ˜¾ç¤ºæ‰‹æœºå·ç ï¼Œä¸€ä¸ª Button æ¥ç‚¹å‡»ç™»å½•ï¼Œè¿˜æœ‰ä¸€ä¸ª TextView ç”¨æ¥æ˜¾ç¤ºè¿è¥å•†åè®®ï¼Œå¤ªç®€å•æˆ‘å°±ä¸å†™äº†ã€‚ å› ä¸º SDK æœ¬æ¥å°±æœ‰æˆæƒé¡µï¼Œæ‰€ä»¥æˆ‘ä»¬è¦è¦†ç›–å®ƒï¼Œå¯ä»¥é€šè¿‡ LayoutInflater æ¥æ“ä½œï¼š @AuthNumber public class LoginAuthActivity extends Activity { ... public void onResume() { super.onResume(); ViewGroup viewGroup = (ViewGroup) findViewById(android.R.id.content); View view = LayoutInflater.from(this).inflate(R.layout.activity_login_auth, null); viewGroup.addView(view); TextView tvPhone = (TextView) view.findViewById(R.id.tv_phone); tvPhone.setText(mNumberPhone); view.findViewById(R.id.btn_auth).setOnClickListener(v -&gt; { onLogin(); }); TextView tvContract = (TextView) view.findViewById(R.id.tv_contract); String url = &quot;&quot;; if (mSlogan.contains(&quot;ç§»åŠ¨&quot;)) { tvContract.setText(&quot;ä¸­å›½ç§»åŠ¨è®¤è¯æœåŠ¡æ¡æ¬¾&quot;); url = AliParameter.PHONE_AUTH_YIDONG_CONTRACT; } else if (mSlogan.contains(&quot;è”é€š&quot;)) { tvContract.setText(&quot;ä¸­å›½è”é€šè®¤è¯æœåŠ¡æ¡æ¬¾&quot;); url = AliParameter.PHONE_AUTH_LIANTONG_CONTRACT; } else if (mSlogan.contains(&quot;ç”µä¿¡&quot;)) { tvContract.setText(&quot;å¤©ç¿¼è´¦å·æœåŠ¡ä¸éšç§åè®®&quot;); url = AliParameter.PHONE_AUTH_DIANXIN_CONTRACT; } else { tvContract.setVisibility(View.GONE); } Uri uri = Uri.parse(url); Intent intent = new Intent(Intent.ACTION_VIEW, uri); tvContract.setOnClickListener(v -&gt; startActivity(intent)); } public void onLogin() { boolean access$400 = LoginAuthActivity.access$400(this); LoginAuthActivity.access$200(this).a(LoginAuthActivity.access$100(this), true, access$400); showLoadingDialog(); LoginAuthActivity.access$700(this).a(&quot;LoginAuthActivity&quot;, &quot;; PhoneNumberAuthHelper2 = &quot;, String.valueOf(LoginAuthActivity.access$200(this))); LoginAuthActivity.access$200(this).b(LoginAuthActivity.access$200(this).a()); } public void showLoadingDialog() { LoginAuthActivity.access$000(LoginAuthActivity.this).setClickable(true); access$200(this).a((TokenResultListener) new MyTokenResultListener(this)); } } æ‰‹æœºå·ç å®é™…ä¸Šå±•ç¤ºçš„æ˜¯æ©ç ï¼Œå’Œæ–‡ç« å¼€å¤´çš„å„å®¶åº”ç”¨æˆªå›¾ä¸€è‡´ã€‚è¿è¥å•†åè®®åˆ™æ ¹æ® mSlogan è¿™ä¸ªå­—æ®µå¤„ç†ä¸€ä¸‹ï¼Œä¸‰å¤§è¿è¥å•†çš„åè®®æˆ‘å·²ç»æŠŠé“¾æ¥æŠ“ä¸‹æ¥äº†ï¼Œè·³è½¬åˆ°æµè§ˆå™¨æ‰“å¼€å°±å¯ä»¥ã€‚ æŒ‰é’®ç‚¹å‡»å“åº”æ‰§è¡Œç™»å½•äº‹ä»¶ï¼Œå¹¶å›è°ƒç»™ TokenResultListenerã€‚ å¯ä»¥å‘ç°ï¼Œè¿™é‡Œçš„ TokenResultListener å’Œå‰é¢åˆå§‹åŒ–çš„ TokenResultListener å¹¶ä¸æ˜¯åŒä¸€ä¸ªï¼Œå› ä¸ºåˆå§‹åŒ–çš„é‚£ä¸ª TokenResultListener æˆ‘æ²¡æœ‰æƒ³åˆ°ä¼˜é›…çš„åŠæ³•ä¼ é€’è¿‡æ¥ã€‚ çœ‹çœ‹æˆæƒå®Œæˆçš„ TokenResultListener å›è°ƒå¤„ç†ï¼š public class MyTokenResultListener implements TokenResultListener { private final LoginAuthActivity mLoginAuthActivity; public MyTokenResultListener(LoginAuthActivity activity) { this.mLoginAuthActivity = activity; } @Override public void onTokenSuccess(String value) { TokenRet tokenRet = TokenRet.fromJson(value); if (tokenRet.getCode().equals(ResultCode.CODE_SUCCESS)) { doLogin(tokenRet.getToken()); } } @Override public void onTokenFailed(String value) { TokenRet tokenRet = TokenRet.fromJson(value); LogUtil.e(&quot;onTokenFailed TokenRet Msg: &quot; + tokenRet.getMsg()); } private void doLogin(String authToken) { // è¯·æ±‚æœåŠ¡ç«¯å®Œæˆç™»å½•æ“ä½œ ... mLoginAuthActivity.setResult(Activity.RESULT_OK); mLoginAuthActivity.finish(); } } è¿™ä¸ª onTokenSuccess() åªéœ€å¤„ç†è·å– Token çš„ Code å³å¯ï¼Œè§£æå¯¹åº”çš„ Tokenï¼Œå¹¶å›ä¼ ç»™æœåŠ¡ç«¯ï¼Œå®Œæˆç™»å½•æµç¨‹ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£æä¾›çš„æµç¨‹å›¾ã€‚ å·±æ–¹æœåŠ¡ç«¯ç™»å½•æˆåŠŸåï¼Œå†é”€æ¯ LoginAuthActivityï¼Œä¸è¦å¿˜äº†å°†ç»“æœå‘ŠçŸ¥æ‹‰èµ·æˆæƒé¡µçš„ Activityï¼Œä¹Ÿä¸è¦å¿˜äº†åœ¨æ‹‰èµ·æˆæƒé¡µçš„ Activity å¤„ç†ç»“æœï¼š @Override protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) { super.onActivityResult(requestCode, resultCode, data); if (requestCode == AliParameter.ACTIVITY_REQUEST_CODE &amp;&amp; resultCode == RESULT_OK) { // ç™»å½•å®Œæˆ } } æœ€åå†çœ‹çœ‹ä¸€å¼€å§‹åˆå§‹åŒ–æ—¶çš„ TokenResultListenerï¼š TokenResultListener tokenResultListener = new TokenResultListener() { @Override public void onTokenSuccess(String s) { TokenRet tokenRet = TokenRet.fromJson(s); switch (tokenRet.getCode()) { case ResultCode.CODE_ERROR_ENV_CHECK_SUCCESS: // æ”¯æŒä½¿ç”¨æœ¬æœºå·ç ä¸€é”®ç™»å½• mPhoneNumberAuthHelper.getLoginToken(application, 5000); break; case ResultCode.CODE_START_AUTHPAGE_SUCCESS: // å”¤èµ·æˆæƒé¡µæˆåŠŸ break; case ResultCode.CODE_SUCCESS: // å®é™…ä¸Šå¹¶ä¸ä¼šèµ°è¿™é‡Œå›è°ƒ break; } } @Override public void onTokenFailed(String s) { TokenRet tokenRet = TokenRet.fromJson(s); if (ResultCode.CODE_ERROR_USER_CANCEL.equals(tokenRet.getCode())) { // ç”¨æˆ·æ‰‹åŠ¨å–æ¶ˆç™»å½• } } }; ä¿®æ”¹å®Œä¹‹åï¼Œæˆ‘ä»¬è¦å°†åŸæ¥ã€ŒphoneNumber-L-AuthSDK.arrã€è¿™ä¸ªåº“æ–‡ä»¶é‡æ–°å¯¼å…¥ï¼Œå› ä¸ºé‡å†™äº† LoginAuthActivity å’Œ d ä¸¤ä¸ªç±»ï¼Œæ‰€ä»¥éœ€è¦æŠŠåº“æ–‡ä»¶ä¸­å¯¹åº”çš„ CLASS æ–‡ä»¶åˆ é™¤æ‰ã€‚ ä¹‹å‰ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ AAR åŒ…ã€ä¸€æ–‡æåˆ°ï¼ŒAAR æ˜¯ä»¥ Zip æ ¼å¼æ„å»ºçš„ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥é€šè¿‡å‹ç¼©å·¥å…·æ‰“å¼€å°†å…¶åˆ é™¤ï¼Œä¹Ÿå¯ä»¥æ”¹ç”¨æ–‡ç« ä¸­æåˆ°çš„ JAR çš„æ–¹å¼æ¥å…¥ï¼Œè§£å‹åå°†èµ„æºæ”¾åˆ°å¯¹åº”çš„ç›®å½•å³å¯ï¼Œç”±ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä¸€æ–‡å¯çŸ¥ï¼ŒJAR ä¹Ÿæ˜¯ä»¥ Zip æ ¼å¼æ„å»ºçš„ï¼Œæ‰€ä»¥åŒæ ·ä¹Ÿå¯ä»¥ç”¨å‹ç¼©è½¯ä»¶æ‰“å¼€å¹¶åˆ é™¤æ‰å¯¹åº”çš„ CLASS æ–‡ä»¶ã€‚ è€Œæˆ‘ä»¬æ‰€ä¿®æ”¹çš„ LoginAuthActivity å’Œ dï¼Œåˆ™æ ¹æ®åŸæ¥ SDK å†…çš„åŒ…åï¼Œæ”¾åˆ°é¡¹ç›®ä¸­å¯¹åº”çš„åŒ…ç›®å½•ä¸‹å³å¯ã€‚ æœ€ç»ˆè¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š å…³äºåé¢é­”æ”¹ SDK çš„ç›¸å…³ä»£ç ï¼Œæ–‡ç« è®²çš„æ¯”è¾ƒç®€å•ï¼Œæ‰€ä»¥æˆ‘å†™äº†ä¸ª Demo æ”¾åœ¨ Githubï¼Œéœ€è¦çš„è¯å¯ä»¥å‚è€ƒæˆ‘çš„ Demo è¿›è¡Œä¿®æ”¹ã€‚ å‚è€ƒå†…å®¹ æ¥å…¥æ¦‚è¿° - å·ç è®¤è¯æœåŠ¡ - é˜¿é‡Œäº‘ Androidå®¢æˆ·ç«¯æ¥å…¥ - å·ç è®¤è¯æœåŠ¡ - é˜¿é‡Œäº‘ ","link":"https://LiarrDev.github.io/post/Bypassing-the-Package-Name-Detection-of-Phone-Number-Verification-Service-Provided-by-Alibaba-Cloud/"},{"title":"Android åç¼–è¯‘å…¥é—¨æŒ‡å—","content":"ä¹‹å‰çš„æ–‡ç« å·²ç»å¤šæ¬¡æåˆ°æˆ‘ç°åœ¨åœ¨æ¸¸æˆå‘è¡Œå…¬å¸å·¥ä½œï¼Œå½“å‰ç”±äºå›½å†…æ¸¸æˆå’Œå¹¿å‘Šç¯å¢ƒï¼Œåç¼–è¯‘æ˜¯ä½œä¸ºæ¸¸æˆ Android SDK å·¥ç¨‹å¸ˆå¿…å¤‡çš„æŠ€èƒ½ï¼Œç»å¸¸éœ€è¦å°†ä¸Šæ¸¸ CP æä¾›çš„æ¸¸æˆæ¯åŒ…åç¼–è¯‘ï¼Œç„¶åæ¥å…¥ä¸€äº›æˆ‘ä»¬è‡ªå·±çš„æˆ–è€…æ˜¯ç¬¬ä¸‰æ–¹çš„ SDK å†é‡æ–°ç¼–è¯‘æ‰“åŒ…å¹¶è½¬æˆå¤šä¸ªå­åŒ…å†ä¸Šçº¿ã€‚ åœ¨æˆ‘æ¥è§¦è¿™ä¸ªè¡Œä¸šä¹‹å‰ï¼Œæˆ‘ä»¥ä¸ºåç¼–è¯‘æ›´å¤šçš„æ˜¯ç”¨åœ¨ç ´è§£è½¯ä»¶æˆ–è€…æ˜¯æŸäº›å…¬å¸å¯¹å…¶ä»–å…¬å¸çš„æŠ€æœ¯çªƒå–é€”å¾„ï¼Œæ²¡æƒ³åˆ°æ¸¸æˆå‘è¡Œå±…ç„¶èƒ½è¿™ä¹ˆç©ã€‚ ä»Šå¤©å°±æ¥å¸¦å¤§å®¶å…¥é—¨ Android åç¼–è¯‘ã€‚ æˆ‘ä»¬éƒ½çŸ¥é“ï¼ŒAndroid åº”ç”¨ç¨‹åºæ‰“åŒ…ä¹‹åå¾—åˆ°çš„æ˜¯ä¸€ä¸ª APK æ–‡ä»¶ï¼Œè¿™ä¸ªæ–‡ä»¶æ˜¯å¯ä»¥ç›´æ¥å®‰è£…åˆ°ä»»ä½• Android æ‰‹æœºä¸Šçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬åç¼–è¯‘å…¶å®ä¹Ÿå°±æ˜¯å¯¹è¿™ä¸ª APK æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ã€‚ Android çš„åç¼–è¯‘ä¸»è¦åˆåˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œä¸€æ˜¯å¯¹ä»£ç çš„åç¼–è¯‘ï¼ŒäºŒæ˜¯å¯¹èµ„æºçš„åç¼–è¯‘ã€‚ å‡†å¤‡ æ—¢ç„¶æ˜¯å¯¹ APK æ–‡ä»¶è¿›è¡Œåç¼–è¯‘ï¼Œé‚£ä¹ˆç†åº”æœ‰ä¸ªå‰æ â€”â€” æœ‰ä¸€ä¸ª APK æ–‡ä»¶ã€‚ ä¸ºäº†èƒ½å¤Ÿæ›´åŠ ç®€å•çš„æ¼”ç¤ºï¼Œä»¥åŠå¯¹å…¶ä»–å¼€å‘è€…çš„å°Šé‡ï¼Œå°±ä¸ä½¿ç”¨ä»»ä½•ä¸€æ¬¾å·²ä¸Šçº¿çš„åº”ç”¨äº†ï¼Œç®€å•å†™ä¸ª Demo å°±è¡Œï¼Œè€Œä¸”æ˜¯è¶Šç®€å•è¶Šå¥½ã€‚ å¦ä¸€æ–¹é¢ï¼Œç°åœ¨ä¸Šæ¶åº”ç”¨å¸‚åœºçš„å¤§å¤šæ•°åº”ç”¨éƒ½ç»è¿‡äº†åŠ å›ºå¤„ç†ï¼Œå¦‚æœå¯¹å…¶è¿›è¡Œåç¼–è¯‘è¿˜éœ€è¦è„±å£³ï¼Œç›¸å¯¹æ¥è¯´ä¼šæ›´åŠ éº»çƒ¦ã€‚ è¯ä¸å¤šè¯´ï¼Œæ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¸ƒå±€å°±ä¸€ä¸ª Buttonï¼Œæ²¡æœ‰å…¶ä»–ä¸œè¥¿ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; tools:context=&quot;.MainActivity&quot;&gt; &lt;androidx.appcompat.widget.AppCompatButton android:id=&quot;@+id/button&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;Button&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; é€»è¾‘å°±æ˜¯ç‚¹å‡»è¿™ä¸ª Button åå¼¹å‡ºä¸€ä¸ª Toastï¼š public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); findViewById(R.id.button).setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { Toast.makeText(MainActivity.this, &quot;Hello World&quot;, Toast.LENGTH_SHORT).show(); } }); } } ç¼–è¯‘æ‰“åŒ…æˆä¸€ä¸ª APK æ–‡ä»¶ï¼Œå¹¶å®‰è£…åˆ°æ‰‹æœºä¸Šï¼Œæ•ˆæœå¦‚ä¸‹ï¼š è‡³æ­¤ï¼Œå‡†å¤‡å·¥ä½œå®Œæˆã€‚ åç¼–è¯‘ä»£ç  è¦å¯¹åº”ç”¨çš„ä»£ç è¿›è¡Œåç¼–è¯‘ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—å¤§æ¦‚äº†è§£ Dex æ–‡ä»¶ã€‚ è€Œåœ¨æ˜ç™½ä»€ä¹ˆæ˜¯ Dex æ–‡ä»¶ä¹‹å‰ï¼Œè¦å…ˆäº†è§£ä¸€ä¸‹ JVMã€Dalvik å’Œ ARTã€‚ JVM æ˜¯ Java è™šæ‹Ÿæœºï¼Œç”¨æ¥è¿è¡Œ Java å­—èŠ‚ç ç¨‹åºã€‚Dalvik æ˜¯ Google è®¾è®¡çš„ç”¨äº Android å¹³å°çš„è¿è¡Œæ—¶ç¯å¢ƒï¼Œé€‚åˆç§»åŠ¨ç¯å¢ƒä¸‹å†…å­˜å’Œå¤„ç†å™¨é€Ÿåº¦æœ‰é™çš„ç³»ç»Ÿã€‚ART å³ Android Runtimeï¼Œæ˜¯ Google ä¸ºäº†æ›¿æ¢ Dalvik è®¾è®¡çš„æ–° Android è¿è¡Œæ—¶ç¯å¢ƒï¼Œåœ¨ Android 4.4 æ¨å‡ºï¼Œæ¯” Dalvik çš„æ€§èƒ½æ›´å¥½ã€‚ Android ç¨‹åºä¸€èˆ¬ä½¿ç”¨ Java è¯­è¨€å¼€å‘ï¼Œä½†æ˜¯ Dalvik è™šæ‹Ÿæœºå¹¶ä¸æ”¯æŒç›´æ¥æ‰§è¡Œ Java å­—èŠ‚ç ï¼Œæ‰€ä»¥ä¼šå¯¹ç¼–è¯‘ç”Ÿæˆçš„ CLASS æ–‡ä»¶ï¼ˆå³ä»¥ .class ç»“å°¾çš„æ–‡ä»¶ï¼‰è¿›è¡Œç¿»è¯‘ã€é‡æ„ã€è§£é‡Šã€å‹ç¼©ç­‰å¤„ç†ï¼Œè¿™ä¸ªå¤„ç†è¿‡ç¨‹æ˜¯ç”±ã€DXã€æˆ–ã€D8ã€è¿›è¡Œå¤„ç†ï¼Œå¤„ç†å®Œæˆåç”Ÿæˆçš„äº§ç‰©ä¼šä»¥ .dex ç»“å°¾ï¼Œç§°ä¸º Dex æ–‡ä»¶ã€‚Dex æ–‡ä»¶æ ¼å¼æ˜¯ä¸“ä¸º Dalvik è®¾è®¡çš„ä¸€ç§å‹ç¼©æ ¼å¼ã€‚æ‰€ä»¥å¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼šDex æ–‡ä»¶æ˜¯å¾ˆå¤š CLASS æ–‡ä»¶å¤„ç†åçš„äº§ç‰©ï¼ˆç±»ä¼¼ Jar åŒ…ï¼‰ï¼Œæœ€ç»ˆå¯ä»¥åœ¨ Android è¿è¡Œæ—¶ç¯å¢ƒæ‰§è¡Œã€‚ ä¸Šé¢è¿™å¼ å›¾ç®€åŒ–å½¢è±¡åœ°æè¿°äº† Java æ–‡ä»¶è½¬åŒ–ä¸º Dex æ–‡ä»¶çš„è¿‡ç¨‹ï¼Œå½“ç„¶çœŸçš„å¤„ç†æµç¨‹ä¸ä¼šè¿™ä¹ˆç®€å•ã€‚ è€Œæˆ‘ä»¬åç¼–è¯‘ä»£ç å°±æ˜¯å°†è¿™ä¸ªæ“ä½œåè¿‡æ¥ï¼Œé€šè¿‡å°†å¯ä»¥åœ¨ Android è¿è¡Œæ—¶ç¯å¢ƒæ‰§è¡Œçš„ Dex æ–‡ä»¶è½¬åŒ–ä¸ºå¯ä¾›æˆ‘ä»¬é˜…è¯»çš„ä»£ç ã€‚ è¿™æ—¶å€™ä½ å¯èƒ½å°±ç–‘æƒ‘äº†ï¼Œæˆ‘ä»¬åªæœ‰ APK æ–‡ä»¶ï¼Œå»å“ªé‡Œæ‰¾è¿™ä¸ªåº”ç”¨çš„ Dex æ–‡ä»¶å‘¢ï¼Ÿ ä¹‹å‰ä¹Ÿè¯´è¿‡ï¼Œè½¯ä»¶å®‰è£…åŒ… APK æ–‡ä»¶å®è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œæ‰€ä»¥åªéœ€è§£å‹ APK æ–‡ä»¶å³å¯ï¼Œç›¸åŒçš„æ“ä½œåœ¨ä¹‹å‰ã€è·å–æ‰‹æœºåº”ç”¨ ICON çš„æ–¹æ³•ã€ä¸€æ–‡ä¸­ä¹Ÿæåˆ°è¿‡ã€‚ è§£å‹ä¹‹åï¼Œå¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸º classes.dex çš„æ–‡ä»¶ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æ‰€éœ€è¦çš„ Dex æ–‡ä»¶ï¼Œå³å­˜æ”¾æ‰€æœ‰ Java ä»£ç çš„åœ°æ–¹ã€‚ Dex2Jar é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå«ã€Dex2Jarã€çš„å°å·¥å…·ï¼Œçœ‹åå­—å°±çŸ¥é“ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æŠŠ Dex æ–‡ä»¶è½¬æ¢æˆä¸€ä¸ª Jar æ–‡ä»¶ã€‚ ä¸‹è½½è§£å‹åå¯ä»¥å¾—åˆ°ä¸€å¤§å †æ–‡ä»¶ï¼Œæˆ‘ä»¬æš‚æ—¶åªéœ€è¦ç”¨åˆ°ä¸€ä¸ªæ–‡ä»¶ï¼ŒWindows å¹³å°ä¸‹ç”¨åˆ°çš„æ˜¯ d2j-dex2jar.batï¼ŒLinux æˆ– macOS å¹³å°ç”¨åˆ°çš„åˆ™æ˜¯ d2j-dex2jar.shã€‚ ä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘ä»¬æŠŠ classes.dex æ–‡ä»¶å¤åˆ¶åˆ°ã€Dex2Jarã€è§£å‹åæ‰€åœ¨çš„ç›®å½•ï¼Œå¹¶æ‰“å¼€å‘½ä»¤è¡Œç»ˆç«¯è¿›å…¥åˆ°è¯¥ç›®å½•ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š âœ d2j-dex2jar classes.dex ä¸€èˆ¬æ‰§è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š ä½†ä¹Ÿæ—¶å¸¸æœ‰æŠ¥é”™ï¼š ç½‘ä¸Šçš„æ–‡ç« è¯´äº§ç”Ÿè¯¥æŠ¥é”™å¯èƒ½æ˜¯å› ä¸ºå®‰è£…çš„ã€Dex2Jarã€ä¸æ˜¯æœ€æ–°ç‰ˆï¼Œè€Œå®é™…ä¸Šæˆ‘å®‰è£…äº†æœ€æ–°ç‰ˆä¹Ÿå‡ºç°è¯¥æƒ…å†µã€‚ å°½ç®¡æœ‰æŠ¥é”™ï¼Œä½†ã€Dex2Jarã€ä¾ç„¶å¸®æˆ‘æŠŠ Dex æ–‡ä»¶è½¬æˆäº† Jar æ–‡ä»¶ï¼Œåªä¸è¿‡å¤šäº†ä¸€ä¸ªé”™è¯¯æ—¥å¿—çš„å‹ç¼©åŒ…ç½¢äº†ã€‚ è€Œ classes-dex2jar.jar è¿™ä¸ªæ–‡ä»¶ï¼Œæ‰æ˜¯çœŸæ­£æœ‰ç”¨çš„æ–‡ä»¶ã€‚ JD-GUI å¯æ˜¯å¯¹äºæˆ‘ä»¬è€Œè¨€ï¼ŒJar æ–‡ä»¶ä¹Ÿä¸æ˜¯å¯è¯»çš„ï¼Œå› æ­¤è¿™é‡Œè¿˜éœ€è¦å†å€ŸåŠ©ä¸€ä¸‹ã€JD-GUIã€è¿™ä¸ªå·¥å…·æ¥å°† Jar æ–‡ä»¶è½¬æ¢æˆ Java ä»£ç ã€‚ ã€JD-GUIã€å®‰è£…å®Œåï¼Œå‘è¿˜æ²¡å®Œï¼Œä½ å¾—ç¡®å®šä½ å®‰è£…äº† JREï¼Œå¦åˆ™æ˜¯æ— æ³•è¿è¡Œçš„ã€‚ è¿™æ—¶å€™ä½ å¯èƒ½å°±ä¼šæƒ³ï¼Œåš Android å¼€å‘çš„ï¼Œæ€ä¹ˆå¯èƒ½æ²¡æœ‰ JRE å‘¢ï¼ŒAndroid SDK é‡Œéƒ½è‡ªå¸¦äº†å‘¢ã€‚ Too young too simple. æŒ‰ç…§ä¹‹å‰åœ¨ã€Windows å¹³å° React Native å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°ã€æåˆ°çš„æ–¹æ³•æŠŠ JRE é…ç½®åˆ°ç¯å¢ƒå˜é‡åï¼Œæ‰“å¼€ã€JD-GUIã€ï¼Œä¾ç„¶å¯èƒ½ä¼šæŠ¥å‡ºéœ€è¦ JRE çš„æç¤ºï¼š ä½¿ç”¨å‘½ä»¤çš„æ–¹å¼æ¥æ‰“å¼€ï¼š âœ java -jar jd-gui.exe ç›¸ä¿¡æœ‰éƒ¨åˆ†ç”¨æˆ·èƒ½æ­£å¸¸æ‰“å¼€äº†ï¼Œè€Œæ²¡æœ‰æ­£å¸¸æ‰“å¼€çš„ç”¨æˆ·ä¼šå‘ç°ï¼Œåœ¨ã€JD-GUIã€çš„ Logo ä¸€é—ªè€Œè¿‡åï¼ŒæŠ¥äº†é”™ï¼š åº”è¯¥å¯ä»¥çŒœåˆ°åŸå› ï¼Œä¸Šé¢æŠ¥éœ€è¦ JRE çš„æç¤ºæ¡†ä¸­ï¼Œç‚¹å‡»ç¡®å®šåä¼šæ‰“å¼€ä¸€ä¸ªç½‘é¡µï¼š ç†Ÿæ‚‰å—ï¼Ÿæˆ‘ä»¬åˆšå¼€å§‹å­¦ Java çš„æ—¶å€™å°±æ˜¯æ¥è¿™ä¸ªç½‘ç«™ä¸‹è½½ JDK çš„ã€‚ è‡³äºåŸå› ï¼Œä½ è¦æ¸…æ¥šè¿™ä¸¤è€…çš„åŒºåˆ«ï¼ŒAndroid SDK ä¸­ä½¿ç”¨çš„æ˜¯ OpenJDKï¼Œè€Œæˆ‘ä»¬å®‰è£… Java å¼€å‘ç¯å¢ƒçš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ Oracle JDKã€‚ OpenJDK æ˜¯ Sun åœ¨ 2006 å¹´æœ«æŠŠ Java å¼€æºè€Œå½¢æˆçš„é¡¹ç›®ï¼Œå¦‚ IcedTeaã€UltraViolet ç­‰éƒ½æ˜¯ä» OpenJDK æºç è¡ç”Ÿå‡ºçš„å‘è¡Œç‰ˆï¼ŒåŒ…æ‹¬å›½å†…çš„å¤§å‚ä¹Ÿæœ‰å•ç‹¬ç»´æŠ¤çš„åŸºäº OpenJDK çš„å‘è¡Œç‰ˆï¼Œæ¯”å¦‚åä¸ºçš„æ¯•æ˜‡JDKã€é˜¿é‡Œå·´å·´çš„ Dragonwellã€è…¾è®¯çš„ Kona ç­‰ã€‚ Oracle JDK é‡‡ç”¨äº†å•†ä¸šå®ç°ï¼Œè€Œ OpenJDK ä½¿ç”¨çš„æ˜¯å¼€æºçš„ FreeTypeã€‚å½“ç„¶ï¼Œç›¸åŒæ˜¯å»ºç«‹åœ¨ä¸¤è€…å…±æœ‰çš„ç»„ä»¶åŸºç¡€ä¸Šçš„ï¼ŒOracle JDK ä¸­è¿˜ä¼šå­˜åœ¨ä¸€äº› OpenJDK æ²¡æœ‰çš„ã€å•†ç”¨é—­æºçš„åŠŸèƒ½ã€‚ å°½ç®¡æˆ‘ä»¬ç¼–è¯‘çš„ OpenJDK åŸºæœ¬ä¸Šå¯ä»¥è®¤ä¸ºæ€§èƒ½ã€åŠŸèƒ½å’Œæ‰§è¡Œé€»è¾‘ä¸Šéƒ½å’Œ Oracle JDK æ˜¯ä¸€è‡´çš„ï¼Œä½†è¿™ä¹ˆä¸€å°ç‚¹çš„å·®åˆ«å°±åœ¨ã€JD-GUIã€ä¸­è¢«ä½“ç°å‡ºæ¥äº†ã€‚ æ‰€ä»¥æˆ‘ä¹Ÿé¡ºæ‰‹åœ¨ã€JD-GUIã€çš„ Github å¼€æºé¡¹ç›®ä¸Šæäº† Issueï¼Œå‘ç°åŒ…æ‹¬å¾®è½¯å·¥ç¨‹å¸ˆåœ¨å†…çš„ä¸å°‘ç”¨æˆ·éƒ½é‡åˆ°è¿™ä¸ªé—®é¢˜ï¼Œå®é™…ä¸Šè¿™æ˜¯ OpenJDK çš„ Bugï¼Œã€Android Studioã€å†…ç½®çš„ OpenJDK 1.8 ç‰ˆæœ¬æ°å¥½å°±åŒ…å«äº†è¿™ä¸ª Bugï¼Œè€Œåœ¨ã€Android Studioã€æ›´æ–°åˆ° 4.2 ç‰ˆæœ¬ä¹‹åå†…ç½®çš„ OpenJDK ä¹Ÿæå‡è‡³ 11.0.8ï¼Œè¿™ä¸ªé—®é¢˜ä¹Ÿå°±ä¸å†å‡ºç°äº†ï¼Œå‡å¦‚ä½ ç”¨çš„æ˜¯ã€Android Studioã€å†…ç½®çš„ OpenJDK ä¸”ä¸æƒ³å‡çº§ã€Android Studioã€ï¼Œå¦å¤–å†ä¸‹è½½ä¸€å¥—æ–°çš„ JDK å³å¯ã€‚ æ›´æ¢ JDK ååº”è¯¥å°±èƒ½æ­£å¸¸å¯åŠ¨ã€JD-GUIã€äº†ï¼Œç„¶åæŠŠä¸Šé¢å¾—åˆ°çš„ Jar æ–‡ä»¶æ‹‰è¿›æ¥å³å¯ã€‚ å¯ä»¥å‘ç°ï¼Œä»£ç åç¼–è¯‘æ“ä½œååˆ†æˆåŠŸï¼ŒMainActivity ä¸­çš„å†…å®¹åŸºæœ¬å…¨éƒ¨è¿˜åŸï¼Œä½†ä½ ä¼šå‘ç° setContentView() å’Œ findViewById() ä¹‹ç±»çš„æ–¹æ³•ä¼ å‚å¹¶ä¸æ˜¯ä¹‹å‰ Demo ä¸­å†™çš„ï¼Œå› ä¸ºè¿™ä¸ªå‚æ•°å®é™…ä¸Šåªæ˜¯èµ„æºçš„ ID å€¼ï¼Œé‚£ä¹ˆè¿™é‡Œåç¼–è¯‘ä¹Ÿå°±åªèƒ½å°†ç›¸åº”çš„ ID å€¼è¿›è¡Œè¿˜åŸï¼Œè€Œæ— æ³•å˜æˆåƒ R.layout.activity_main å’Œ R.id.button è¿™æ ·ç›´è§‚çš„ä»£ç å±•ç¤ºã€‚ é™¤äº† MainActivity ä¹‹å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šå…¶å®ƒçš„ä»£ç ä¹Ÿè¢«åç¼–è¯‘å‡ºæ¥äº†ï¼Œæ¯”å¦‚å½“å‰é¡¹ç›®ä¸­å¼•ç”¨çš„ AndroidX çš„åŒ…ï¼Œè¿™äº›å¼•ç”¨çš„ Library ä¹Ÿä¼šä½œä¸ºä»£ç çš„ä¸€éƒ¨åˆ†è¢«æ‰“åŒ…åˆ°ã€Œclasses.dexã€æ–‡ä»¶å½“ä¸­ï¼Œå› æ­¤åç¼–è¯‘çš„æ—¶å€™è¿™äº›ä»£ç ä¹Ÿä¼šä¸€èµ·è¢«è¿˜åŸã€‚ JADX ã€JD-GUIã€ç®—æ˜¯æˆ‘åˆšæ¥è§¦åç¼–è¯‘æ—¶ä½¿ç”¨çš„å·¥å…·ï¼Œä»ä¸Šé¢çš„æµç¨‹å¯ä»¥çœ‹åˆ°ï¼Œåç¼–è¯‘çš„æ“ä½œå…¶å®æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œä¸ºäº†æé«˜å·¥ä½œæ•ˆç‡å½“ç„¶è¦å¯»æ‰¾æ›´ä¼˜ç§€çš„å·¥å…·ï¼Œåæ¥æˆ‘ä¾¿å‘ç°äº†ã€JADXã€ã€‚ ã€JADXã€èƒ½å¤Ÿç›´æ¥å°† APKã€Dexã€AARã€AAB ç­‰ Dalvik å­—èŠ‚ç æ ¼å¼æ–‡ä»¶åç¼–è¯‘ï¼Œåªéœ€å°†æ–‡ä»¶æ‹–è¿›ã€JADXã€å³å¯ã€‚ å°†ä¸Šé¢ç”Ÿæˆçš„ APK æ–‡ä»¶ç”¨ã€JADXã€æ‰“å¼€ï¼š å¯ä»¥çœ‹åˆ°å‡ ä¹ä¸ã€JD-GUIã€æ— å¼‚ï¼Œä½†æ˜¯ä¸€æ­¥åˆ°ä½çœŸçš„å¤ªçœäº‹äº†ã€‚ åç¼–è¯‘èµ„æº ä½ å¯èƒ½ä¼šæœ‰äº›å¥‡æ€ªï¼Œåˆšæ‰è§£å‹ APK æ–‡ä»¶åä¸æ˜¯å·²ç»å¯ä»¥çœ‹åˆ°èµ„æºæ–‡ä»¶çš„ç›®å½•äº†å—ï¼Œä¹‹å‰ã€è·å–æ‰‹æœºåº”ç”¨ ICON çš„æ–¹æ³•ã€ä¸€æ–‡ä¹Ÿé€šè¿‡è¿™ç§æ–¹æ³•è·å–åˆ°äº†å®‰è£…åŒ…é‡Œé¢çš„è®¸å¤šå›¾ç‰‡èµ„æºï¼Œé‚£æ€ä¹ˆè¿˜éœ€è¦åç¼–è¯‘èµ„æºå‘¢ï¼Ÿ è¿™é‡Œè¯´çš„å½“ç„¶ä¸æ˜¯å›¾ç‰‡èµ„æºï¼Œæœ‰æ—¶å€™ä¼šéœ€è¦æŸ¥çœ‹æˆ–è€…ä¿®æ”¹å¸ƒå±€æ–‡ä»¶ç”šè‡³æ˜¯ AndroidManifest.xml ä¸­çš„å†…å®¹ï¼Œè€Œä½ å¦‚æœç›´æ¥æ‰“å¼€ä¸Šé¢è§£å‹åçš„æ–‡ä»¶ï¼Œå¯èƒ½ä¼šæ˜¯ä¸€è„¸æ‡µé€¼çš„ï¼š æˆ–è€…æ˜¯è¿™æ ·çš„ï¼š åœ¨ Android æ‰“åŒ…çš„æ—¶å€™ï¼Œèµ„æºæ–‡ä»¶ä¼šè¢«ç¼–è¯‘ï¼Œæ‰€ä»¥ç›´æ¥æ‰“å¼€æ˜¯æ— æ³•çœ‹åˆ°æ˜æ–‡çš„ï¼Œå› æ­¤æˆ‘ä»¬è¿˜éœ€è¦å¯¹èµ„æºè¿›è¡Œåç¼–è¯‘ã€‚ Apktool äºæ˜¯ï¼Œåˆéœ€è¦å¦å¤–ä¸€ä¸ªå·¥å…· â€”â€”ã€Apktoolã€ã€‚ ã€Apktoolã€å¯ä»¥ç”¨äºæœ€å¤§å¹…åº¦åœ°è¿˜åŸ APK æ–‡ä»¶ä¸­çš„ 9-patch å›¾ç‰‡ã€å¸ƒå±€ã€å­—ç¬¦ä¸²ç­‰ç­‰ä¸€ç³»åˆ—çš„èµ„æºã€‚ ä¸‹è½½ä¸‹æ¥ååŒæ ·æ˜¯å¾—åˆ°ä¸€ä¸ª Jar åŒ…ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ä¼šé€šè¿‡å‘½ä»¤æ¥è¿›è¡Œåç¼–è¯‘æ“ä½œã€‚ æŠŠéœ€è¦åç¼–è¯‘çš„ APK æ–‡ä»¶å¤åˆ¶åˆ°å’Œã€Apktoolã€ç›¸åŒçš„ç›®å½•ï¼Œåœ¨å‘½ä»¤è¡Œç»ˆç«¯è¿›åˆ°è¯¥æ–‡ä»¶å¤¹ä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤ï¼š âœ java -jar apktool.jar d Demo.apk å…¶ä¸­ d æ˜¯æŒ‡ Decode çš„æ„æ€ï¼Œè¡¨ç¤ºå¯¹åé¢çš„ Demo.apk æ–‡ä»¶è¿›è¡Œè§£ç ã€‚è¿˜å¯ä»¥åŠ ä¸Šä¸€äº›é™„åŠ å‚æ•°æ¥æ§åˆ¶ Decode è¡Œä¸ºï¼š -fï¼šå¦‚æœç›®æ ‡æ–‡ä»¶å¤¹å·²å­˜åœ¨ï¼Œåˆ™å¼ºåˆ¶åˆ é™¤ç°æœ‰æ–‡ä»¶å¤¹ï¼ˆé»˜è®¤å¦‚æœç›®æ ‡æ–‡ä»¶å¤¹å·²å­˜åœ¨ï¼Œåˆ™è§£ç å¤±è´¥ï¼‰ã€‚ -oï¼šæŒ‡å®šè§£ç ç›®æ ‡æ–‡ä»¶å¤¹çš„åç§°ï¼ˆé»˜è®¤åœ¨å½“å‰å‘½ä»¤è¡Œæ‰€åœ¨ç›®å½•ä½¿ç”¨ APK æ–‡ä»¶çš„åå­—æ¥å‘½åç›®æ ‡æ–‡ä»¶å¤¹ï¼‰ã€‚ -sï¼šä¸åç¼–è¯‘ Dex æ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ classes.dex æ–‡ä»¶ä¼šè¢«ä¿ç•™ï¼ˆé»˜è®¤ä¼šå°† Dex æ–‡ä»¶è§£ç æˆ Smali æ–‡ä»¶ï¼‰ã€‚ -rï¼šä¸åç¼–è¯‘èµ„æºæ–‡ä»¶ï¼Œä¹Ÿå°±æ˜¯è¯´ resources.arsc æ–‡ä»¶ä¼šè¢«ä¿ç•™ï¼ˆé»˜è®¤ä¼šå°† resources.arsc è§£ç æˆå…·ä½“çš„èµ„æºæ–‡ä»¶ï¼‰ã€‚ æœ‰æ—¶å€™ APK åŒ…ä½“å¤ªå¤§ï¼Œä¸ºäº†é¿å…æ–‡ä»¶çš„å¤åˆ¶æˆ–ç§»åŠ¨è€—æ—¶å¤ªé•¿ï¼Œæˆ‘ä¼šä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤ï¼š âœ java -jar apktool.jar d -f {éœ€è¦è§£ç çš„Apkæ–‡ä»¶} -o {è§£ç åé¡¹ç›®å­˜å‚¨ç›®å½•} ä¸è¿‡ä½¿ç”¨è¯¥å‘½ä»¤éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œéœ€è¦è§£ç çš„ APK æ–‡ä»¶è·¯å¾„å’Œè§£ç åé¡¹ç›®æ‰€åœ¨è·¯å¾„ä¸èƒ½ä¸ºåŒä¸€ç›®å½•ï¼Œå› ä¸ºæœ‰ -f å‚æ•°ï¼Œè§£ç åæŒ‡å®šçš„é¡¹ç›®ç›®å½•ä¼šæ‰§è¡Œä¸€æ¬¡æ¸…ç©ºæ“ä½œï¼Œå³å‡å¦‚è¢«åç¼–è¯‘çš„ APK åœ¨è¿™ä¸€ç›®å½•ï¼Œåˆ™ä¼šè¢«åˆ é™¤ï¼Œè€Œæ­¤æ—¶åç¼–è¯‘æ“ä½œä»æœªç»“æŸï¼Œå°±ä¼šå¯¼è‡´æŠ¥é”™ã€‚ å½“ç„¶ä½ æŒ‰ç…§ä¸Šé¢çš„æ“ä½œä¹Ÿæœ‰å¯èƒ½ä¼šåç¼–è¯‘å¤±è´¥ï¼Œæ¯”å¦‚æŠ¥ä»¥ä¸‹é”™è¯¯ï¼š è¿™æ˜¯å› ä¸º APK é‡Œæœ‰åŠ å¯†è¿‡çš„ Dex æ–‡ä»¶ï¼Œæ¯”å¦‚æœ‰äº› APK ä¼šåœ¨ /assets ç›®å½•ä¸‹å­˜æ”¾åŠ å¯†çš„ Dex æ–‡ä»¶ï¼Œå°±ä¼šæŠ¥è¿™ä¸ªé”™ã€‚è¦è§£å†³è¿™ä¸ªé”™è¯¯éœ€è¦å°†ã€Apktoolã€å‡çº§è‡³ 2.4.1 æˆ–ä»¥ä¸Šç‰ˆæœ¬ï¼Œç„¶åå¢åŠ å¦‚ä¸‹å‚æ•°ï¼š âœ java -jar apktool.jar d -f {éœ€è¦è§£ç çš„Apkæ–‡ä»¶} -o {è§£ç åé¡¹ç›®å­˜å‚¨ç›®å½•} --only-main-classes è¿™ä¸ªå‚æ•°æ˜¯åœ¨ 2.4.1 ç‰ˆæœ¬ä¸Šæ–°å¢çš„ï¼Œæºç åˆ¤æ–­å¦‚ä¸‹ï¼š case DECODE_SOURCES_SMALI_ONLY_MAIN_CLASSES: if (file.startsWith(&quot;classes&quot;) &amp;&amp; file.endsWith(&quot;.dex&quot;)) { mAndrolib.decodeSourcesSmali(mApkFile, outDir, file, mBakDeb, mApiLevel); } else { mAndrolib.decodeSourcesRaw(mApkFile, outDir, file); } break; å³åç¼–è¯‘æ ¹ç›®å½•ä¸‹çš„ä»¥ classes å¼€å¤´ï¼Œå¹¶ä»¥ .dex ç»“å°¾çš„ Dex æ–‡ä»¶ã€‚ é™¤æ­¤ä¹‹å¤–ï¼Œä½ è¿˜å¯èƒ½é‡åˆ°ä¸€äº›å¥‡å¥‡æ€ªæ€ªçš„é”™è¯¯ï¼Œæ¯”å¦‚ï¼š å‡ºç°è¿™ä¸ªé”™è¯¯çš„åŸå› å¾ˆæœ‰å¯èƒ½æ˜¯ä½ ä¹‹å‰ä½¿ç”¨è¿‡è€ç‰ˆæœ¬çš„ã€Apktoolã€è¿›è¡Œåç¼–è¯‘æ“ä½œï¼Œç„¶åã€Apktoolã€å°±ä¼šåœ¨ä½ ç³»ç»Ÿçš„ C:\\Users\\Administrator\\apktool\\framework è¿™ä¸ªç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåå­—ä¸º 1.apk çš„ç¼“å­˜æ–‡ä»¶ï¼Œå°†è¿™ä¸ªç¼“å­˜æ–‡ä»¶åˆ é™¤æ‰ï¼Œç„¶åå†é‡æ–°æ‰§è¡Œåç¼–è¯‘å‘½ä»¤åº”è¯¥å°±å¯ä»¥æˆåŠŸäº†ã€‚ åç¼–è¯‘æˆåŠŸåï¼Œå°±å¯ä»¥åœ¨é»˜è®¤ç›®å½•æˆ–è€…æŒ‡å®šç›®å½•ä¸­å¾—åˆ°åç¼–è¯‘çš„é¡¹ç›®ï¼Œé¡¹ç›®ç»“æ„è·Ÿæˆ‘ä»¬å¹³æ—¶å¼€å‘çš„ç›®å½•ç»“æ„ä¹Ÿæ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚ ç°åœ¨æ‰“å¼€ AndroidManifest.xml ç§ä¸€ç§ï¼š è¿™æ ·å°±å®Œå…¨çœ‹å¾—æ‡‚äº†å§ï¼Œé™¤äº†æ ¼å¼ç›¸æ¯”åœ¨ã€Android Studioã€é‡Œé¢è¦å‹ç¼©äº†è®¸å¤šä¹‹å¤–ï¼Œå…¶ä»–åŸºæœ¬æ— å¼‚ï¼Œå®Œå…¨å¯ä»¥é€šè¿‡æ–‡æœ¬ç¼–è¾‘å™¨çš„æ ¼å¼åŒ–æ’ä»¶æˆ–è€…æ˜¯ç›´æ¥æ”¾è¿›ã€Android Studioã€é‡Œé¢æ ¼å¼åŒ–è§£å†³ã€‚ å…¥ä¾µ åç¼–è¯‘åæˆ‘ä»¬å°±å¯ä»¥å¯¹ App è¿›è¡Œä¿®æ”¹ï¼Œæˆ–è€…è¯´ï¼Œå…¥ä¾µã€‚ åœ¨æ¸¸æˆå‘è¡Œé¢†åŸŸï¼Œæˆ‘ä»¬å¸¸ç”¨äºä¸ºæ¸¸æˆæ¯åŒ…æ³¨å…¥è‡ªå·±æˆ–ç¬¬ä¸‰æ–¹çš„ SDKï¼Œå¦‚ç»Ÿè®¡æ•°æ®ç­‰ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œåç¼–è¯‘æ˜¯å…è®¸çš„ï¼Œå› ä¸ºæˆ‘ä»¬è·å¾—äº†æ¸¸æˆç ”å‘å•†çš„æˆæƒï¼Œä¸”å¯¹æ¸¸æˆæœ¬ä½“åŠŸèƒ½æ²¡æœ‰é€ æˆä»»ä½•æŸå®³ã€‚ åœ¨å…¶ä»–é¢†åŸŸå¯å°±ä¸ä¸€å®šäº†ï¼Œæ¯”å¦‚å¸‚é¢ä¸Šæµè¡Œçš„å¾ˆå¤šç ´è§£ç‰ˆè½¯ä»¶ï¼Œå®é™…ä¸Šå°±æ˜¯é€šè¿‡åç¼–è¯‘æŠ€æœ¯å¯¹åŸä½œè€…çš„ä¸€ç§ä¾µæƒè¡Œä¸ºã€‚ å½“ç„¶ï¼Œè¿˜æœ‰ä¸€äº›æˆ–è®¸è¿˜åœ¨ç°è‰²åœ°å¸¦çš„ç”¨æ³•ï¼Œæ¯”å¦‚è¯´æ±‰åŒ–ï¼Œå®ƒå¹¶æ²¡æœ‰å‘ç ´è§£è½¯ä»¶ä¸€æ ·å…¥ä¾µè½¯ä»¶çš„åŸæœ‰é€»è¾‘ï¼Œåªæ˜¯ç¿»è¯‘å…¶ä¸­çš„èµ„æºè¿›è¡Œæ‰“åŒ…ï¼Œä½†ä¸ç®¡æ€ä¹ˆè¯´ä¾ç„¶æ˜¯å¯¹ä»–äººå¼€å‘çš„ç¨‹åºè¿›è¡Œäº†ä¿®æ”¹ï¼Œè™½ç„¶é€ ç¦äº†ç”¨æˆ·ï¼Œå´ä¾ç„¶ä¸æ˜¯ä¸€ä»¶å€¼å¾—å¹æ§çš„äº‹ã€‚ è¿™æ¬¡å°±ä¸å»è®¨è®ºæœ¬èº«è¿™ä»¶äº‹æƒ…çš„å¯¹æˆ–é”™ï¼Œåªæ˜¯ç«™åœ¨æŠ€æœ¯çš„è§’åº¦æ¥äº†è§£ç›¸å…³çŸ¥è¯†ã€‚ æˆ‘ä»¬æ¸¸æˆå‘è¡Œå¸¸å¸¸éœ€è¦ä¿®æ”¹çš„æ˜¯ App çš„èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚è¯´åŒ…åï¼Œæ¯”å¦‚è¯´åº”ç”¨å›¾æ ‡ï¼Œæ¯”å¦‚è¯´åº”ç”¨åç§°ç­‰ï¼Œè·Ÿæˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸­çš„å·®åˆ«ä¸å¤§ï¼Œåªéœ€è¦æŠŠèµ„æºå¤åˆ¶åˆ°ç›¸åº”çš„æ–‡ä»¶å¤¹ï¼Œä¿®æ”¹èµ„æºæ–‡ä»¶å†…å¯¹åº”çš„éƒ¨åˆ†å³å¯ï¼Œä¸€èˆ¬éµå¾ªæœ‰åˆ™è¦†ç›–æ— åˆ™è¿½åŠ çš„åŸåˆ™ã€‚ è§£é‡Šä¸€ä¸‹å¦å¤–ä¸¤ä¸ªç›®å½•ï¼Œ/original ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯æœªç»åç¼–è¯‘è¿‡ã€åŸå§‹çš„ AndroidManifest.xml æ–‡ä»¶ï¼Œ/smali ç›®å½•ä¸‹å­˜æ”¾çš„æ˜¯åç¼–è¯‘å‡ºæ¥çš„æ‰€æœ‰ä»£ç ã€‚ è¿›å…¥ /smali ç›®å½•åä½ å¯ä»¥å‘ç°å®ƒçš„ç›®å½•ç»“æ„å’Œæˆ‘ä»¬å¹³æ—¶å¼€å‘æ—¶çš„ /app/src ç›®å½•ç»“æ„ååˆ†ç›¸ä¼¼ï¼Œä¸»è¦åŒºåˆ«å°±æ˜¯ Java æ–‡ä»¶å…¨éƒ½å˜æˆäº† Smali æ–‡ä»¶ï¼Œå› æ­¤è¿™äº› Smali æ–‡ä»¶å®é™…ä¸Šä¹Ÿå°±æ˜¯çœŸæ­£çš„æºä»£ç ï¼Œåªä¸è¿‡å®ƒçš„è¯­æ³•å’Œ Java å®Œå…¨ä¸åŒï¼Œæœ‰ç‚¹ç±»ä¼¼äºæ±‡ç¼–çš„è¯­æ³•ï¼Œæ˜¯ Android è™šæ‹Ÿæœºæ‰€ä½¿ç”¨çš„å¯„å­˜å™¨è¯­è¨€ã€‚ çœ‹ä¸æ‡‚ä¹Ÿæ˜¯ååˆ†æ­£å¸¸çš„ï¼Œä½†æ˜¯ä¸€æ—¦èƒ½å¤Ÿçœ‹å¾—æ‡‚ Smali æ–‡ä»¶ï¼Œä½ å°±å¯ä»¥åšå¾ˆææ€–çš„äº‹æƒ…äº† â€”â€” éšæ„ä¿®æ”¹åº”ç”¨ç¨‹åºå†…çš„é€»è¾‘ï¼Œå°†å…¶ç ´è§£ã€‚ è¯´å®è¯æˆ‘å¹¶æ²¡æœ‰å­¦ä¹ è¿‡ Smali çš„è¯­æ³•ï¼Œä½†å³ä½¿è¿™æ ·æˆ‘ä¹Ÿå¯ä»¥å¯¹è¿™ä¸ª Demo åšä¸€å®šç¨‹åº¦çš„ä¿®æ”¹äº†ï¼Œå› ä¸ºè¿™ä¸ª Demo å®åœ¨å†™å¾—å¤ªç®€å•äº†ï¼Œæ‰“å¼€åç¼–è¯‘åçš„ MainActivityï¼Œå®ƒå¤„åœ¨å¯¹åº”çš„åŒ…ç›®å½•ä¸‹ã€‚ æ‰“å¼€åä¼šå‘ç°æœ‰ä¸¤ä¸ªä¸ MainActivity ç›¸å…³çš„æ–‡ä»¶ï¼Œä¸€ä¸ªæ˜¯ MainActivity.smaliï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ MainActivity$1.smaliï¼Œä¸€èˆ¬æƒ…å†µä¸‹ï¼Œå½“ç±»å†…åŒ…å«å†…éƒ¨ç±»æˆ–åŒ¿åç±»æ—¶ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªåŒåçš„ä»¥ $ åŠåé¢æ•°å­—æˆ–ç±»ååŒºåˆ†çš„ Smali æ–‡ä»¶ã€‚ å…ˆæ¥çœ‹ã€ŒMainActivity.smaliã€ï¼š .class public Lcom/example/reverse/MainActivity; .super Landroidx/appcompat/app/AppCompatActivity; .source &quot;MainActivity.java&quot; # direct methods .method public constructor &lt;init&gt;()V .locals 0 .line 9 invoke-direct {p0}, Landroidx/appcompat/app/AppCompatActivity;-&gt;&lt;init&gt;()V return-void .end method # virtual methods .method protected onCreate(Landroid/os/Bundle;)V .locals 1 .line 13 invoke-super {p0, p1}, Landroidx/appcompat/app/AppCompatActivity;-&gt;onCreate(Landroid/os/Bundle;)V const p1, 0x7f0a001c .line 14 invoke-virtual {p0, p1}, Lcom/example/reverse/MainActivity;-&gt;setContentView(I)V const p1, 0x7f070042 .line 15 invoke-virtual {p0, p1}, Lcom/example/reverse/MainActivity;-&gt;findViewById(I)Landroid/view/View; move-result-object p1 new-instance v0, Lcom/example/reverse/MainActivity$1; invoke-direct {v0, p0}, Lcom/example/reverse/MainActivity$1;-&gt;&lt;init&gt;(Lcom/example/reverse/MainActivity;)V invoke-virtual {p1, v0}, Landroid/view/View;-&gt;setOnClickListener(Landroid/view/View$OnClickListener;)V return-void .end method åç¼–è¯‘åçš„ä»£ç è™½ç„¶å’‹ä¸€çœ‹ä¸æˆ‘ä»¬å¹³æ—¶å†™çš„ä»£ç å¤§ç›¸å¾„åº­ï¼Œä½†ä»”ç»†ä¸€è¡Œè¡Œè¯»è¿‡å»ï¼Œå…¶å®ä¹Ÿä¸æ˜¯è¯»ä¸é€šã€‚å³ä½¿æˆ‘å¯¹ Smali çš„è¯­æ³•ä¾ç„¶ä¸ç†Ÿæ‚‰ï¼Œè¿™é‡Œä¹Ÿä¸æ‰“ç®—ä»‹ç»ï¼Œæˆ‘ä»¬é€è¡Œé˜…è¯»ï¼Œä¾ç„¶èƒ½å¤Ÿè¯»æ‡‚ã€‚ ç¬¬ä¸€éƒ¨åˆ†ï¼š .class public Lcom/example/reverse/MainActivity; .super Landroidx/appcompat/app/AppCompatActivity; .source &quot;MainActivity.java&quot; ä¸ Java ä¸­çš„ class å…³é”®å­—ç›¸ä¼¼ï¼ŒSmali ç”¨ .class æ¥æŒ‡å®šå½“å‰çš„ç±»åï¼ŒåŒæ—¶è¿˜åŒ…å«äº†å®Œæ•´çš„åŒ…åã€‚ .super æˆ‘ä»¬ä¹Ÿå¾ˆç†Ÿæ‚‰ï¼Œåœ¨ Java ä¸­å¯ä»¥ç†è§£ä¸ºæ˜¯æŒ‡å‘çˆ¶ç±»çš„æŒ‡é’ˆï¼Œåœ¨è¿™é‡Œçš„ä½œç”¨åº”è¯¥å’Œ extends ç›¸ä¼¼ï¼Œå³ç»§æ‰¿è‡ª AppCompatActivityã€‚ .source ä¸éš¾çœ‹å‡ºï¼Œæè¿°çš„æ˜¯æº Java æ–‡ä»¶ã€‚ ç¬¬äºŒéƒ¨åˆ†ï¼š # direct methods .method public constructor &lt;init&gt;()V .locals 0 .line 9 invoke-direct {p0}, Landroidx/appcompat/app/AppCompatActivity;-&gt;&lt;init&gt;()V return-void .end method .method æŒ‡ä»£æ–¹æ³•ï¼Œconstructor é¡¾åæ€ä¹‰å°±æ˜¯æ„é€ æ–¹æ³•äº†ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å†™ MainActivity çš„æ„é€ æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒä¼šä½¿ç”¨çˆ¶ç±» AppCompatActivity çš„æ„é€ æ–¹æ³•ã€‚ ç¬¬ä¸‰éƒ¨åˆ†ï¼š # virtual methods .method protected onCreate(Landroid/os/Bundle;)V .locals 1 .line 13 invoke-super {p0, p1}, Landroidx/appcompat/app/AppCompatActivity;-&gt;onCreate(Landroid/os/Bundle;)V const p1, 0x7f0a001c .line 14 invoke-virtual {p0, p1}, Lcom/example/reverse/MainActivity;-&gt;setContentView(I)V const p1, 0x7f070042 .line 15 invoke-virtual {p0, p1}, Lcom/example/reverse/MainActivity;-&gt;findViewById(I)Landroid/view/View; move-result-object p1 new-instance v0, Lcom/example/reverse/MainActivity$1; invoke-direct {v0, p0}, Lcom/example/reverse/MainActivity$1;-&gt;&lt;init&gt;(Lcom/example/reverse/MainActivity;)V invoke-virtual {p1, v0}, Landroid/view/View;-&gt;setOnClickListener(Landroid/view/View$OnClickListener;)V return-void .end method åŒæ ·æ˜¯æ–¹æ³•ï¼Œè¿™é‡Œæè¿°çš„æ˜¯ onCreate() æ–¹æ³•ï¼Œå‚æ•°ä¸º Bundle å¯¹è±¡ï¼Œç„¶åæ‰§è¡Œ super ä¹Ÿå°±æ˜¯ AppCompatActivity ä¸­çš„ onCreate() æ–¹æ³•ï¼Œæ¥ç€ä¾¿çœ‹åˆ°äº† setContentView() æ–¹æ³•è¢«è°ƒç”¨ï¼Œå‚æ•° I è¡¨ç¤º int ç±»å‹ã€‚è‡³æ­¤ä¸ºé¡¹ç›®é»˜è®¤ç”Ÿæˆçš„ä»£ç ã€‚ æ¥ä¸‹æ¥æ˜¯æˆ‘ä»¬çš„é€»è¾‘ï¼Œé€šè¿‡ findViewById() æ‰¾åˆ°æˆ‘ä»¬çš„ View æ§ä»¶ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨å¸ƒå±€æ–‡ä»¶ä¸­çš„ Buttonï¼Œæœ€åå†è°ƒç”¨ setOnClickListener() ä¼ å…¥æˆ‘ä»¬çš„ç‚¹å‡»äº‹ä»¶ View.OnClickListenerã€‚ é‚£æˆ‘ä»¬ç‚¹å‡»äº‹ä»¶çš„é€»è¾‘å‘¢ï¼Ÿ ä¸Šæ–‡æåˆ°ï¼Œå½“ç±»å†…åŒ…å«å†…éƒ¨ç±»æˆ–åŒ¿åç±»æ—¶ï¼Œå°±ä¼šäº§ç”Ÿå¤šä¸ªåŒåçš„ä»¥ $ åŠåé¢æ•°å­—æˆ–ç±»ååŒºåˆ†çš„ Smali æ–‡ä»¶ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥çœ‹ MainActivity$1.smali æ–‡ä»¶ï¼š .class Lcom/example/reverse/MainActivity$1; .super Ljava/lang/Object; .source &quot;MainActivity.java&quot; # interfaces .implements Landroid/view/View$OnClickListener; # annotations .annotation system Ldalvik/annotation/EnclosingMethod; value = Lcom/example/reverse/MainActivity;-&gt;onCreate(Landroid/os/Bundle;)V .end annotation .annotation system Ldalvik/annotation/InnerClass; accessFlags = 0x0 name = null .end annotation # instance fields .field final synthetic this$0:Lcom/example/reverse/MainActivity; # direct methods .method constructor &lt;init&gt;(Lcom/example/reverse/MainActivity;)V .locals 0 .line 15 iput-object p1, p0, Lcom/example/reverse/MainActivity$1;-&gt;this$0:Lcom/example/reverse/MainActivity; invoke-direct {p0}, Ljava/lang/Object;-&gt;&lt;init&gt;()V return-void .end method # virtual methods .method public onClick(Landroid/view/View;)V .locals 2 .line 18 iget-object p1, p0, Lcom/example/reverse/MainActivity$1;-&gt;this$0:Lcom/example/reverse/MainActivity; const-string v0, &quot;Hello World&quot; const/4 v1, 0x0 invoke-static {p1, v0, v1}, Landroid/widget/Toast;-&gt;makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast; move-result-object p1 invoke-virtual {p1}, Landroid/widget/Toast;-&gt;show()V return-void .end method é‡å¤çš„å†…å®¹å°±ä¸è¿‡å¤šè§£é‡Šäº†ï¼Œæ¥çœ‹åˆšåˆšæ²¡æœ‰æåˆ°çš„ã€‚ æ¥å£ï¼š # interfaces .implements Landroid/view/View$OnClickListener; .implements ä¾ç„¶æ˜¯è€æœ‹å‹ï¼ŒæŒ‡å®ç°äº†å“ªäº›æ¥å£ï¼Œå›åˆ°ä¸€å¼€å§‹æˆ‘ä»¬å†™çš„ä»£ç ï¼Œé‡Œé¢æŒ‰é’®ä¸­å®ç°äº†ä¸€ä¸ªç‚¹å‡»äº‹ä»¶ï¼Œå°±æ˜¯ç”¨çš„ View.OnClickListenerã€‚ æ³¨è§£ï¼š # annotations .annotation system Ldalvik/annotation/EnclosingMethod; value = Lcom/example/reverse/MainActivity;-&gt;onCreate(Landroid/os/Bundle;)V .end annotation .annotation system Ldalvik/annotation/InnerClass; accessFlags = 0x0 name = null .end annotation .annotation å°±æ˜¯æ³¨è§£ï¼Œå¾ˆå®¹æ˜“è”æƒ³åˆ°æˆ‘ä»¬ä»£ç ä¸­å¸¸ç”¨çš„æ³¨è§£ @Overrideï¼Œè¿™é‡ŒæŒ‡å‘äº† onCreate() æ–¹æ³•ï¼Œå‚æ•°ä¸º Bundleã€‚ å®ä¾‹åŸŸï¼š # instance fields .field final synthetic this$0:Lcom/example/reverse/MainActivity; åˆ°æœ€é‡è¦çš„ç‚¹å‡»äº‹ä»¶ï¼š # virtual methods .method public onClick(Landroid/view/View;)V .locals 2 .line 18 iget-object p1, p0, Lcom/example/reverse/MainActivity$1;-&gt;this$0:Lcom/example/reverse/MainActivity; const-string v0, &quot;Hello World&quot; const/4 v1, 0x0 invoke-static {p1, v0, v1}, Landroid/widget/Toast;-&gt;makeText(Landroid/content/Context;Ljava/lang/CharSequence;I)Landroid/widget/Toast; move-result-object p1 invoke-virtual {p1}, Landroid/widget/Toast;-&gt;show()V return-void .end method è¿™é‡Œå°±æ˜¯ç‚¹å‡»äº‹ä»¶ onClick() çš„å®ç°ï¼Œæˆ‘ä»¬çœ‹åˆ°äº†å®šä¹‰çš„è¦æ˜¾ç¤ºçš„å­—ç¬¦ä¸²ï¼ŒToast çš„ makeText() æ–¹æ³•ä»¥åŠ show() æ–¹æ³•ã€‚ è‡³æ­¤ï¼Œæ•´ä¸ª MainActivity å°±é€šè¯»ä¸€éäº†ï¼Œè™½ç„¶ä¸ä¼šå†™ï¼Œä½†åªè¦æœ‰å†™è¿‡ä»£ç ï¼Œå¹¶ä¸”æ¯”å¯¹åŸ Java æ–‡ä»¶ï¼Œç›¸ä¿¡éƒ½èƒ½è¯»å‡ºä¸ªå¤§æ¦‚ã€‚ å°½ç®¡ä¸çŸ¥é“æ€ä¹ˆå†™ï¼Œä½†æˆ‘ä»¬çŸ¥é“ï¼Œå­—ç¬¦ä¸²åœ¨è¿™é‡Œåªæ˜¯æ˜¾ç¤ºä½œç”¨ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰å¯¹è¿™ä¸ªå­—ç¬¦ä¸²åšå…¶ä»–æ“ä½œï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä¿®æ”¹è¿™ä¸ªå­—ç¬¦ä¸²ï¼Œå½“ç”¨æˆ·ç‚¹å‡» Button åï¼Œå¼¹å‡ºçš„æ˜¯æˆ‘ä»¬ä¿®æ”¹åçš„å†…å®¹ï¼ŒåŒæ—¶ä¹Ÿä¸ä¼šå½±å“åˆ°ç¨‹åºçš„æ­£å¸¸è¿è¡Œã€‚ è€Œåœ¨æˆ‘ä»¬æ¸¸æˆæ¸ é“æ‰“åŒ…çš„æ—¶å€™ï¼Œå¤§å¤šæ•°æƒ…å†µå¹¶ä¸ä¼šæ‰‹åŠ¨ä¿®æ”¹é‡Œé¢çš„å†…å®¹ï¼Œå› ä¸ºå®é™…ä¸Šä¹Ÿæ²¡æœ‰å¤ªå¤šå¿…è¦ï¼Œæ¸¸æˆé€»è¾‘æ˜¯æ¸¸æˆç ”å‘å•†è®¾è®¡çš„ï¼Œæˆ‘ä»¬åªéœ€è¦æ³¨å…¥ SDKï¼Œå…·ä½“åšæ³•å°±æ˜¯æŠŠæˆ‘ä»¬çš„ SDK æ‰“åŒ…å¹¶åç¼–è¯‘æˆ Smali æ–‡ä»¶ï¼Œç„¶åä¸€ä¸€å¤åˆ¶åˆ°æ¯åŒ…ä¸­ï¼Œè¦†ç›–åŸæœ‰çš„å†…å®¹ã€‚ é‡æ–°æ‰“åŒ… ä¸ç®¡æ˜¯ä½•ç§ä¿®æ”¹ï¼Œè‚¯å®šè¦é‡æ–°æ‰“åŒ…æ‰èƒ½å¤Ÿå®‰è£…åˆ°æ‰‹æœºä¸Šï¼Œé‡æ–°æ‰“åŒ…ä¹ŸåŒæ ·è¦ç”¨åˆ°ã€Apktoolã€ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š âœ java -jar apktool.jar b Demo -o New_Demo.apk å…¶ä¸­ b æ˜¯æŒ‡ Build çš„æ„æ€ï¼Œåé¢æŒ‡å®šäº†é‡æ–°æ‰“åŒ…åçš„ APK æ–‡ä»¶åç§°ï¼Œè¿™æ ·ä½ å°±ä¼šåœ¨åŒçº§ç›®å½•ä¸­å¾—åˆ°è¿™ä¸ªé‡æ–°æ‰“åŒ…åçš„æ–‡ä»¶ã€‚ åŒæ ·ï¼Œä¸ºäº†ç®€ä¾¿å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š âœ java -jar apktool.jar b {è§£ç åé¡¹ç›®æ‰€åœ¨ç›®å½•} æ²¡æœ‰æŒ‡å®šé‡æ–°æ‰“åŒ…åçš„ APK æ–‡ä»¶åï¼Œä¼šé»˜è®¤åœ¨è§£ç åçš„é¡¹ç›®ä¸­åˆ›å»ºä¸€ä¸ªåä¸º /dist çš„æ–‡ä»¶å¤¹ï¼Œæ‰“å¼€è¿™ä¸ªæ–‡ä»¶å¤¹ä½ å°±ä¼šå‘ç°ä¸€ä¸ªå’Œé¡¹ç›®åŒåçš„ APK æ–‡ä»¶ï¼Œè¿™å°±æ˜¯é‡æ–°æ‰“åŒ…åçš„æ–‡ä»¶äº†ã€‚ ä¸è¿‡ä¹Ÿä¸è¦é«˜å…´å¾—å¤ªæ—©ï¼Œå› ä¸ºè¿™ä¸ª APK æ–‡ä»¶è¿˜ä¸èƒ½ç›´æ¥å®‰è£…åœ¨æ‰‹æœºä¸Šã€‚ APK Signature Scheme v1 é‡æ–°æ‰“åŒ…åçš„ APK æ–‡ä»¶ä¸èƒ½ç›´æ¥å®‰è£…åœ¨æ‰‹æœºä¸Šï¼Œæ˜¯å› ä¸ºè¿™ä¸ªå®‰è£…åŒ…è¿˜æ²¡è¿›è¡Œç­¾åï¼Œå¹³æ—¶æˆ‘ä»¬è¦ä¸Šçº¿åº”ç”¨ï¼Œéƒ½è¦å…ˆå¯¹åº”ç”¨è¿›è¡Œç­¾åï¼Œè€Œç°åœ¨ç»è¿‡æˆ‘ä»¬åç¼–è¯‘ååŸç­¾åå·²ç»è¢«ç ´åæ‰äº†ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ‰‹åŠ¨ç­¾åã€‚ ä½†æ˜¯ï¼Œå‡å¦‚æˆ‘ä»¬åç¼–è¯‘çš„æ˜¯åˆ«äººçš„ Appï¼Œé‚£æˆ‘ä»¬ä»å“ªå„¿èƒ½æ‹¿åˆ°å®ƒåŸæ¥çš„ç­¾åæ–‡ä»¶å‘¢ï¼Ÿå¾ˆæ˜¾ç„¶ï¼Œæ ¹æœ¬æ²¡æœ‰åŠæ³•æ‹¿åˆ°ï¼Œå› æ­¤æˆ‘ä»¬åªèƒ½æ‹¿è‡ªå·±çš„ç­¾åæ–‡ä»¶æ¥å¯¹è¿™ä¸ª APK æ–‡ä»¶é‡æ–°è¿›è¡Œç­¾åï¼Œä½†åŒæ—¶ä¹Ÿè¡¨æ˜æˆ‘ä»¬é‡æ–°æ‰“åŒ…å‡ºæ¥çš„è½¯ä»¶å°±æ˜¯ä¸ªåè¶³çš„ç›—ç‰ˆè½¯ä»¶ã€‚ è¿™æ˜¯ Android ä¸ºäº†ä¿æŠ¤ç‰ˆæƒè€Œè®¾ç«‹çš„æœºåˆ¶ï¼Œå› æ­¤åˆ¤å®šç›—ç‰ˆ App çš„æ ‡å‡†å°±å¾ˆæ˜ç¡®äº†ï¼Œåªè¦ä½ ä¸æ˜¯ä½¿ç”¨åŸç‰ˆçš„ç­¾åï¼Œé‚£å°±æ˜¯ç›—ç‰ˆçš„ï¼Œæ‰€ä»¥æ±‰åŒ–è½¯ä»¶å®é™…ä¸Šä¹Ÿæ˜¯ç›—ç‰ˆè½¯ä»¶ï¼Œå½“ç„¶å¦‚æœæœ‰äººé€šè¿‡éæ³•é€”å¾„è·å–åˆ°äº†åŸç‰ˆç­¾åï¼Œé‚£æˆ‘ä¹Ÿæ— è¯å¯è¯´äº†ã€‚ ç­¾åçš„ç”Ÿæˆç›¸ä¿¡åš Android å¼€å‘çš„éƒ½ä¸ä¼šé™Œç”Ÿå§ï¼Œç›´æ¥åˆ°ã€Android Studioã€ä¸­ç”Ÿæˆä¸€ä¸ªå³å¯ï¼Œæœ‰äº†ç­¾åæ–‡ä»¶åå°±å¯ä»¥æ‰§è¡Œå‘½ä»¤ï¼š âœ jarsigner -verbose -sigalg SHA1withRSA -digestalg SHA1 -keystore {ç­¾åæ–‡ä»¶} -storepass {KeyStore_Password} {å¾…ç­¾åçš„APKæ–‡ä»¶} {Key_alias} è¯¥å‘½ä»¤æ‰§è¡Œå®Œæˆåä½ å¯èƒ½ä¼šå‘ç°å¹¶æ²¡æœ‰æ–°å¢å…¶ä»–æ–‡ä»¶ï¼Œå®é™…ä¸Šå®ƒæ˜¯ç”Ÿæˆä¸€ä¸ªå’ŒåŸæ¥å¾…ç­¾åæ–‡ä»¶åç›¸åŒçš„å·²ç­¾åçš„ APK æ–‡ä»¶ï¼Œå¹¶ä¸”è¦†ç›–äº†åŸæ¥å¾…ç­¾åçš„æ–‡ä»¶ã€‚ å½“ç„¶ï¼Œé…ç½®å‚æ•°ä¸åŒå†™æ³•ä¹Ÿä¸å°½ç›¸åŒï¼Œæ¯”å¦‚æˆ‘æœ€å¸¸ç”¨çš„ï¼š âœ jarsigner -keystore {ç­¾åæ–‡ä»¶} -storepass {KeyStore_Password} -keypass {Key_Password} -signedjar {ç­¾ååçš„APKæ–‡ä»¶} {å¾…ç­¾åçš„APKæ–‡ä»¶} {Key_alias} è¿™ç§æ–¹æ³•ä¼šæŒ‡å®šç­¾ååçš„æ–‡ä»¶åç§°ï¼Œè€Œä¸ä¼šè¦†ç›–åŸæœ‰çš„å¾…ç­¾åæ–‡ä»¶ã€‚ ç›¸ä¿¡ä½ å·²ç»æ³¨æ„åˆ°ï¼Œè¿™é‡Œç”¨äºç­¾åçš„å·¥å…·å®é™…ä¸Šæ˜¯ JDK ä¸­ç”¨äºç»™ Jar åŒ…ç­¾åçš„ã€JarSignerã€ï¼Œå®ƒä¼šä½¿ç”¨ SHA1 æˆ–è€… SHA256 ç®—æ³•å¯¹ APK ä¸­æ¯ä¸ªæ–‡ä»¶ç”Ÿæˆæ‘˜è¦å¹¶è¿›è¡Œ BASE64 ç¼–ç å†™å…¥åˆ° MANIFEST.MF æ–‡ä»¶ä¸­ï¼Œç„¶åä½¿ç”¨ SHA1 ç®—æ³•å¯¹ MANIFEST.MF äºŒæ¬¡æ‘˜è¦å†å†™å…¥åˆ° CERT.SF ä¸­ï¼Œæ¥ç€ä½¿ç”¨ç§é’¥å¯¹ CERT.SF ç­¾åï¼Œç­¾åç»“æœä¸å…¬é’¥å’Œè¯ä¹¦ä¸€èµ·æ‰“åŒ…å†™å…¥ CERT.RSA é‡Œï¼Œæœ€åå°†ä»¥ä¸Šç”Ÿæˆçš„è¿™ä¸‰ä¸ªæ–‡ä»¶ä¿å­˜åˆ° /META-INF ç›®å½•ï¼Œå‹ç¼©å…¥ APK å†…ã€‚ å½“ä½ ç›´æ¥è§£å‹ APK æ–‡ä»¶çš„æ—¶å€™ä¹Ÿä¼šå‘ç°è¿™äº›ç»è¿‡ç­¾åç”Ÿæˆçš„æ–‡ä»¶ã€‚ ç­¾åä¹‹åçš„ APK æ–‡ä»¶ç°åœ¨å·²ç»å¯ä»¥å®‰è£…åˆ°æ‰‹æœºä¸Šäº†ã€‚ å¯¹é½ Android è¿˜æåº¦å»ºè®®æˆ‘ä»¬å¯¹ç­¾ååçš„ APK æ–‡ä»¶è¿›è¡Œä¸€æ¬¡å¯¹é½æ“ä½œï¼Œå› ä¸ºè¿™æ ·å¯ä»¥ä½¿å¾—æˆ‘ä»¬çš„ç¨‹åºåœ¨ Android ç³»ç»Ÿä¸­è¿è¡Œå¾—æ›´å¿«ã€‚ å¯¹é½æ“ä½œä½¿ç”¨çš„æ˜¯ã€ZipAlignã€å·¥å…·ï¼Œè¯¥å·¥å…·å­˜æ”¾äº /{Android_SDK}/build-tools/{version} ç›®å½•ä¸‹ï¼Œå°†è¿™ä¸ªç›®å½•é…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒå˜é‡å½“ä¸­å°±å¯ä»¥åœ¨ä»»ä½•ä½ç½®æ‰§è¡Œæ­¤å‘½ä»¤äº†ã€‚å‘½ä»¤æ ¼å¼å¦‚ä¸‹ï¼š âœ zipalign 4 {å·²ç­¾åçš„APKæ–‡ä»¶} {å¯¹é½åçš„APKæ–‡ä»¶} å…¶ä¸­ 4 æ˜¯å›ºå®šå€¼ä¸èƒ½æ”¹å˜ï¼ŒæŒ‡çš„æ˜¯å­—èŠ‚å¯¹é½å‚æ•°ï¼Œä»£è¡¨å¯¹é½ä¸º 4 ä¸ªå­—èŠ‚ï¼Œæ®è¯´è¾“å…¥å…¶ä»–å€¼èµ·ä¸åˆ°ä»»ä½•ä½œç”¨ï¼Œåœ¨ 4 ä¸ªå­—èŠ‚è¾¹ç•Œä¸Šå¯¹é½çš„æ„æ€å°±æ˜¯ï¼Œä¸€èˆ¬æ¥è¯´ï¼Œæ˜¯æŒ‡ç¼–è¯‘å™¨æŠŠ 4 ä¸ªå­—èŠ‚ä½œä¸ºä¸€ä¸ªå•ä½æ¥è¿›è¡Œè¯»å–çš„ç»“æœï¼Œè¿™æ ·çš„è¯ç›¸æ¯”ä¹‹å‰æ²¡æœ‰å¯¹é½çš„æƒ…å†µï¼ŒCPU èƒ½å¤Ÿå¯¹å˜é‡è¿›è¡Œé«˜æ•ˆã€å¿«é€Ÿçš„è®¿é—®ã€‚ å¦å¤–ï¼ŒéªŒè¯ä¸€ä¸ª APK æ–‡ä»¶æ˜¯å¦å¯¹é½çš„å‘½ä»¤å¦‚ä¸‹ï¼š âœ zipalign -c -v 4 {å¾…éªŒè¯çš„APKæ–‡ä»¶} å…¶ä¸­ -c å°±æ˜¯ç”¨äºç¡®è®¤ APK æ–‡ä»¶æ˜¯å¦å¯¹é½ï¼Œ-v åˆ™è¡¨ç¤ºè¾“å‡ºè¯¦ç»†æ—¥å¿—ï¼Œæ˜¯å¯é€‰å‚æ•°ï¼ŒåŒæ—¶ä¹Ÿå¯ä»¥ç”¨åœ¨ä¸Šæ–¹å¯¹é½çš„å‘½ä»¤ä¸­ï¼Œ4 ä¹Ÿæ˜¯å­—èŠ‚å¯¹é½å‚æ•°ã€‚ æœ€åå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ªå·²ç­¾åå¹¶å¯¹é½çš„å®‰è£…åŒ…äº†ã€‚ APK Signature Scheme v2 æˆ‘ä»¬åœ¨è€ç‰ˆæœ¬çš„ã€Android Studioã€ä¸­æ‰“åŒ…æ—¶ä¼šè¦æ±‚å‹¾é€‰ V1 å’Œ V2 ç­¾åï¼ˆæ–°ç‰ˆæœ¬ä¸­å·²æ— éœ€å‹¾é€‰ï¼Œé»˜è®¤ä¼šä¸¤è€…éƒ½å¯ç”¨ï¼‰ï¼š APK Signature Scheme v2 æ˜¯ä¸€ç§å…¨æ–‡ä»¶ç­¾åæ–¹æ¡ˆï¼Œè¯¥æ–¹æ¡ˆèƒ½å¤Ÿå‘ç°å¯¹ APK çš„å—ä¿æŠ¤éƒ¨åˆ†è¿›è¡Œçš„æ‰€æœ‰æ›´æ”¹ï¼Œä»è€Œæœ‰åŠ©äºåŠ å¿«éªŒè¯é€Ÿåº¦å¹¶å¢å¼ºå®Œæ•´æ€§ä¿è¯ã€‚ å®ƒä» Android 7.0ï¼ˆNougatï¼‰å¼€å§‹æ”¯æŒï¼Œç”¨äºç­¾åçš„å·¥å…·ã€ApkSignerã€å†…ç½®åœ¨ Android SDK Build Tools 24.0.3 åŠæ›´é«˜çš„ç‰ˆæœ¬ä¸­ã€‚ å®˜æ–¹æ–‡æ¡£ä¸­æåˆ°ï¼š To make a APK installable on Android 6.0 (Marshmallow) and older devices, the APK should be signed using JAR signing before being signed with the v2 scheme. ä¸ºäº†ä½¿ APK å¯åœ¨ Android 6.0ï¼ˆMarshmallowï¼‰ åŠæ›´ä½ç‰ˆæœ¬çš„è®¾å¤‡ä¸Šå®‰è£…ï¼Œåº”å…ˆä½¿ç”¨ JAR ç­¾ååŠŸèƒ½å¯¹ APK è¿›è¡Œç­¾åï¼Œç„¶åå†ä½¿ç”¨ v2 æ–¹æ¡ˆå¯¹å…¶è¿›è¡Œç­¾åã€‚ å› æ­¤ï¼Œå°½ç®¡ä½ ä»…ä½¿ç”¨ V1 æ–¹æ¡ˆç­¾åä¹Ÿå¯ä»¥ä½¿ APK åœ¨è®¾å¤‡ä¸Šæ­£å¸¸å®‰è£…è¿è¡Œï¼Œä½†åº”å½“åŒæ—¶é‡‡ç”¨ V2 æ–¹æ¡ˆï¼Œä¸”ä¸¤å¥—ç­¾åæ–¹æ¡ˆæœ‰æ˜ç¡®çš„å…ˆåé¡ºåºã€‚ å®˜æ–¹æ–‡æ¡£ä¸­è¿˜æåˆ°ï¼š Caution: You must use zipalign at one of two specific points in the app-building process, depending on which app-signing tool you use: If you use apksigner, zipalign must only be performed before the APK file has been signed. If you sign your APK using apksigner and make further changes to the APK, its signature is invalidated. If you use jarsigner, zipalign must only be performed after the APK file has been signed. æ³¨æ„ï¼šæ‚¨å¿…é¡»åœ¨åº”ç”¨æ„å»ºè¿‡ç¨‹ä¸­çš„ä¸¤ä¸ªç‰¹å®šæ—¶é—´ç‚¹ä¹‹ä¸€ä½¿ç”¨ zipalignï¼Œå…·ä½“åœ¨å“ªä¸ªæ—¶é—´ç‚¹ä½¿ç”¨ï¼Œå–å†³äºæ‚¨æ‰€ä½¿ç”¨çš„åº”ç”¨ç­¾åå·¥å…·ï¼š å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ apksignerï¼Œåªèƒ½åœ¨ä¸º APK æ–‡ä»¶ç­¾åä¹‹å‰æ‰§è¡Œ zipalignã€‚å¦‚æœæ‚¨åœ¨ä½¿ç”¨ apksigner ä¸º APK ç­¾åä¹‹åå¯¹ APK åšå‡ºäº†è¿›ä¸€æ­¥æ›´æ”¹ï¼Œç­¾åä¾¿ä¼šå¤±æ•ˆã€‚ å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ jarsignerï¼Œåªèƒ½åœ¨ä¸º APK æ–‡ä»¶ç­¾åä¹‹åæ‰§è¡Œ zipalignã€‚ è¿™æ ·é¡ºåºå°±æ›´åŠ æ˜ç¡®äº†ï¼Œå…ˆä½¿ç”¨ã€JarSignerã€è¿›è¡Œ V1 æ–¹æ¡ˆç­¾åï¼Œå†ä½¿ç”¨ã€ZipAlignã€åšå¯¹é½æ“ä½œï¼Œæœ€åå†ä½¿ç”¨ã€ApkSignerã€è¿›è¡Œ V2 æ–¹æ¡ˆç­¾åã€‚ V2 æ–¹æ¡ˆç­¾åå‘½ä»¤å¦‚ä¸‹ï¼š âœ java -jar apksigner.jar sign --ks {ç­¾åæ–‡ä»¶è·¯å¾„} --ks-key-alias {Key_alias} --ks-pass pass:{KeyStore_Password} --key-pass pass:{Key_Password} --out {V2ç­¾ååçš„APKæ–‡ä»¶} {å¯¹é½åçš„APKæ–‡ä»¶} è™½ç„¶ä¸Šæ–¹æ–‡æ¡£è¦æ±‚æˆ‘ä»¬æ‰‹åŠ¨è¿›è¡Œ V1 å’Œ V2 æ–¹æ¡ˆç­¾åï¼Œä½†æ˜¯å®é™…ä¸Šã€ApkSignerã€ä¹Ÿæ˜¯æ”¯æŒ V1 æ–¹æ¡ˆç­¾åçš„ã€‚å®ƒæœ‰ä¸€ä¸ªé…ç½®çš„é€‰é¡¹ï¼š The following options specify basic settings to apply to a signer: --v1-signing-enabled &lt;true | false&gt;: Determines whether apksigner signs the given APK package using the traditional, JAR-based signing scheme. By default, the tool uses the values of --min-sdk-version and --max-sdk-version to decide when to apply this signature scheme. ä»¥ä¸‹é€‰é¡¹æŒ‡å®šè¦åº”ç”¨äºç­¾åè€…çš„åŸºæœ¬è®¾ç½®ï¼š --v1-signing-enabled &lt;true | false&gt;ï¼šç¡®å®š apksigner æ˜¯å¦ä¼šä½¿ç”¨åŸºäº JAR çš„ä¼ ç»Ÿç­¾åæ–¹æ¡ˆä¸ºç»™å®šçš„ APK è½¯ä»¶åŒ…ç­¾åã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œè¯¥å·¥å…·ä¼šä½¿ç”¨ --min-sdk-version å’Œ --max-sdk-version çš„å€¼æ¥å†³å®šä½•æ—¶é‡‡ç”¨æ­¤ç­¾åæ–¹æ¡ˆã€‚ å› æ­¤æˆ‘ä»¬å¯ä»¥ä¸éœ€è¦æ‰‹åŠ¨ä½¿ç”¨ã€JarSignerã€è¿›è¡Œ V1 æ–¹æ¡ˆç­¾åï¼Œç›´æ¥ä½¿ç”¨ã€ApkSignerã€è¿›è¡Œ V2 æ–¹æ¡ˆç­¾åå³å¯ã€‚ æŸ¥è¯¢ APK æ–‡ä»¶ç­¾åæƒ…å†µå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤ï¼š âœ java -jar apksigner.jar verify -v {éœ€è¦æŸ¥çœ‹ç­¾åçš„ APK} è‡³æ­¤ï¼ŒV2 ç­¾åæ–¹æ¡ˆä¹Ÿæ“ä½œå®Œæˆäº†ã€‚ ç”Ÿæˆå·²ç­¾åçš„ APK æ–‡ä»¶çš„åŒæ—¶ï¼Œä½ å¯ä»¥å‘ç°è¿˜è‡ªåŠ¨ç”Ÿæˆäº†ä¸€ä¸ªä»¥ APK æ–‡ä»¶åå‘½åçš„ IDSIG æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒIDSIG æ–‡ä»¶åŒ…å« APK æ–‡ä»¶çš„å®Œæ•´ Merkle æ ‘ã€‚ä½¿ç”¨æ­¤æ ‡å¿—æ—¶ï¼Œã€ApkSignerã€ä¼šç”Ÿæˆä¸€ä¸ª V4 ç­¾åæ–¹æ¡ˆçš„ IDSIG æ–‡ä»¶ï¼Œä¸”ä¸ä¼šåµŒå…¥å®Œæ•´çš„ Merkle æ ‘ã€‚ Google åœ¨ Android 9ï¼ˆPieï¼‰ä¸­å¼•å…¥äº† APK Signature Scheme v3ï¼Œåœ¨ Android 11ï¼ˆRï¼‰ä¸­å¼•å…¥äº† APK Signature Scheme v4ï¼Œè¿™é‡Œæš‚ä¸ä»‹ç»ã€‚ æµ‹è¯• æ— è®ºæ˜¯ç ´è§£è¿˜æ˜¯ SDK æ³¨å…¥ï¼Œéƒ½éœ€è¦å¯¹æœ€ç»ˆçš„å®‰è£…åŒ…è¿›è¡Œæµ‹è¯•ï¼Œç¡®è®¤å…¶æ˜¯å¦æŒ‰ç…§æˆ‘ä»¬æœŸæœ›çš„æ•ˆæœæ­£å¸¸è¿è¡Œã€‚ æŠŠè¿™ä¸ª APK æ–‡ä»¶å®‰è£…åˆ°æ‰‹æœºä¸Šæ¥æŸ¥çœ‹æ•ˆæœï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯åº”ç”¨å›¾æ ‡ã€åº”ç”¨åç§°ï¼Œè¿˜æ˜¯ç‚¹å‡»æŒ‰é’®åçš„å“åº”é€»è¾‘ï¼Œéƒ½ä¿®æ”¹æˆäº†æˆ‘è®¾å®šçš„æ ·å­ï¼Œè¯´æ˜ä»¥ä¸Šçš„æ‰€æœ‰æ“ä½œéƒ½æˆåŠŸäº†ã€‚ ä»¥ä¸Šå°±æ˜¯ Android åç¼–è¯‘ä¸­çš„åŸºæœ¬æ“ä½œï¼Œå½“ç„¶ä¹Ÿåªæ˜¯ä¸€ä¸ªç®€å•çš„å…¥é—¨ï¼Œæœ‰å¾ˆå¤šä¸œè¥¿æ²¡åŠæ³•ä¸€ä¸€å±•å¼€ï¼Œä»¥åæœ‰æœºä¼šçš„è¯ï¼Œå¯ä»¥å†æ·±å…¥èŠèŠã€‚ å¦å¤–ï¼Œè¿˜æ˜¯è¦å†æ¬¡æé†’ï¼Œåç¼–è¯‘æŠ€æœ¯ä»…ç”¨äºå­¦ä¹ å’Œäº¤æµï¼Œè¯·å‹¿ä½œäºéæ³•ç”¨é€”ã€‚ å‚è€ƒå†…å®¹ï¼š zipalign | Android å¼€å‘è€… | Android Developers APK ç­¾åæ–¹æ¡ˆ v2 | Android å¼€æºé¡¹ç›® | Android Open Source Project apksigner | Android å¼€å‘è€… | Android Developers ","link":"https://LiarrDev.github.io/post/Getting-Started-with-Android-Decompilation/"},{"title":"Android å®æ—¶ç›‘å¬çŸ­ä¿¡","content":"æœ€è¿‘æ”¶åˆ°å›¢é˜Ÿå†…éƒ¨çš„ä¸€ä¸ªéœ€æ±‚ï¼Œä½¿ç”¨ä¸€å°æµ‹è¯•æœºæ¥åšçŸ­ä¿¡è½¬å‘ï¼Œå³å†™ä¸€ä¸ª App ç›‘å¬çŸ­ä¿¡ï¼Œå½“æ”¶åˆ°çš„çŸ­ä¿¡å†…å®¹ç¬¦åˆæˆ‘ä»¬è®¾å®šçš„è§„åˆ™æ—¶ï¼Œé€šè¿‡æ¥å£ä¼ é€ç»™æˆ‘ä»¬åç«¯ã€‚ è¿™ä¸ªéœ€æ±‚å®é™…ä¸Šå¹¶ä¸éš¾ï¼Œæœ‰ä¸¤ä¸ªæ€è·¯ã€‚ æ‹¦æˆªçŸ­ä¿¡å¹¿æ’­ å½“æ‰‹æœºæ”¶åˆ°çŸ­ä¿¡æ—¶ï¼Œä¼šå‘ç³»ç»Ÿå‘é€ä¸€ä¸ªå¹¿æ’­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›‘å¬å¹¿æ’­æ¥è·å–çŸ­ä¿¡å†…å®¹ã€‚ public class SmsReceiver extends BroadcastReceiver { @Override public void onReceive(Context context, Intent intent) { String action = intent.getAction(); if (!action.equals(&quot;android.provider.Telephony.SMS_RECEIVED&quot;)) { return; } Bundle bundle = intent.getExtras(); if (bundle == null) { return; } Object[] pdus = (Object[]) bundle.get(&quot;pdus&quot;); if (pdus == null) { return; } SmsMessage[] messages = new SmsMessage[pdus.length]; StringBuilder sender = new StringBuilder(); StringBuffer content = new StringBuffer(); StringBuffer time = new StringBuffer(); for (int i = 0; i &lt; pdus.length; i++) { sender.append(messages[i].getOriginatingAddress()); content.append(messages[i].getMessageBody()); time.append(messages[i].getTimestampMillis()); } ... } } æ¥æ”¶çŸ­ä¿¡æ—¶å‘é€çš„æ˜¯ä¸€ä¸ªæœ‰åºå¹¿æ’­ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨æ³¨å†Œæ—¶æé«˜å…¶ä¼˜å…ˆçº§ï¼Œé¿å…è¢«å…¶ä»–è½¯ä»¶æ‹¦æˆªï¼š &lt;manifest ...&gt; &lt;uses-permission android:name=&quot;android.permission.RECEIVE_SMS&quot; /&gt; &lt;application ...&gt; &lt;receiver android:name=&quot;.SmsReceiver&quot; android:enabled=&quot;true&quot; android:exported=&quot;true&quot;&gt; &lt;intent-filter android:priority=&quot;1000&quot;&gt; &lt;action android:name=&quot;android.provider.Telephony.SMS_RECEIVED&quot; /&gt; &lt;/intent-filter&gt; &lt;/receiver&gt; &lt;/application&gt; &lt;/manifest&gt; åŒæ—¶ä¸è¦å¿˜äº†åŠ¨æ€ç”³è¯· RECEIVE_SMS æƒé™ã€‚ è¿™æ ·å°±å¯ä»¥å®æ—¶ç›‘å¬åˆ°çŸ­ä¿¡çš„æ¥æ”¶äº†ï¼Œä¸Šé¢çš„ä»£ç æˆ‘è·å–äº†å‘ä»¶äººã€çŸ­ä¿¡å†…å®¹ä»¥åŠæ—¶é—´æˆ³ï¼Œå…¶ä»–å‚æ•°ä½ ä¹Ÿå¯ä»¥è‡ªè¡Œè·å–ã€‚ ç›‘å¬çŸ­ä¿¡åª’ä½“åº“å˜åŒ– é™¤äº†ç›‘å¬ç³»ç»Ÿå¹¿æ’­ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›‘å¬çŸ­ä¿¡åª’ä½“åº“çš„å˜åŒ–ï¼ŒçŸ­ä¿¡ä¸€èˆ¬éƒ½æ˜¯å­˜å‚¨åœ¨æœ¬åœ°æ•°æ®åº“ä¸­ï¼Œæˆ‘ä»¬èƒ½å¤Ÿåƒæ“ä½œ SQLite ä¸€æ ·è¯»å–å®ƒã€‚ public class SmsObserver extends ContentObserver { public SmsObserver(Handler handler, Context context) { super(handler); interceptSms(context); } private void interceptSms(Context context) { Cursor cursor = context.getContentResolver().query(Uri.parse(&quot;content://sms/inbox&quot;), null, null, null, &quot;date DESC&quot;); if (cursor.moveToFirst()) { String sender = cursor.getString(cursor.getColumnIndex(&quot;address&quot;)); String content = cursor.getString(cursor.getColumnIndex(&quot;body&quot;)); long date = cursor.getLong(cursor.getColumnIndex(&quot;date&quot;)); int type = cursor.getInt(cursor.getColumnIndex(&quot;type&quot;)); // 1ï¼šæ¥æ”¶ï¼Œ2ï¼šå‘é€ if (type == 1) { ... } } cursor.close(); } } è¯»å–çŸ­ä¿¡åª’ä½“åº“éœ€è¦ READ_SMS æƒé™ï¼š &lt;manifest ...&gt; &lt;uses-permission android:name=&quot;android.permission.READ_SMS&quot; /&gt; ... &lt;/manifest&gt; åŠ¨æ€ç”³è¯·æˆåŠŸåï¼Œåœ¨ä»£ç ä¸­æ³¨å†Œï¼š SmsObserver smsObserver = new SmsObserver(new Handler(), this); getContentResolver().registerContentObserver(Uri.parse(&quot;content://sms&quot;), true, smsObserver); è¿™é‡Œç»™å®šçš„ Uri å¯ä»¥æŸ¥è¯¢ä¸åŒçš„çŸ­ä¿¡åè®®ï¼š æ”¶ä»¶ç®±ï¼šcontent://sms/inbox å‘ä»¶ç®±ï¼šcontent://sms/outbox å·²å‘é€ï¼šcontent://sms/sent è‰ç¨¿ï¼šcontent://sms/draft å‘é€å¤±è´¥ï¼šcontent://sms/failed å¾…å‘é€ï¼šcontent://sms/queued é€šè¿‡ Cursor æŸ¥è¯¢å¹¶æŒ‰ç…§æ—¶é—´æˆ³æ’åºå³å¯æ‹¿åˆ°æœ€æ–°çš„çŸ­ä¿¡ã€‚ æµ‹è¯• æµ‹è¯•ä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸¤å°æ‰‹æœºå°±å¯ä»¥å®Œæˆæµ‹è¯•ã€‚ å‡å¦‚ä½ æ²¡æœ‰ä¸¤å°æ‰‹æœºï¼Œåˆæˆ–è€…å¿ƒç–¼è¯è´¹ï¼Œé‚£ä¹ˆä¹Ÿå¯ä»¥é€šè¿‡ã€Android Studioã€è‡ªå¸¦çš„æ¨¡æ‹Ÿå™¨è¿›è¡Œæµ‹è¯•ã€‚ åœ¨å®é™…ç”Ÿäº§ç¯å¢ƒåº”å½“åœ¨çœŸæœºä¸Šè¿›è¡Œæµ‹è¯•ï¼Œå› ä¸ºå›½äº§ ROM é­”æ”¹å‡ºäºéšç§è€ƒè™‘æœ‰å¯èƒ½ä¼šå¯¹çŸ­ä¿¡åšå¤„ç†ã€‚ æ¯”è¾ƒ é€šè¿‡å¹¿æ’­æ‹¦æˆªçš„æ–¹å¼ï¼Œå‡å¦‚æœ‰å…¶ä»–åº”ç”¨çš„ BroadcastReceiver é«˜äºä½ è®¾å®šçš„ä¼˜å…ˆçº§ï¼Œé‚£ä¹ˆä½ å¯èƒ½æ— æ³•æ‹¦æˆªåˆ°æ­¤çŸ­ä¿¡ã€‚ è€Œç›‘å¬çŸ­ä¿¡åª’ä½“åº“çš„æ–¹å¼ï¼Œç”±äºçŠ¶æ€ç¹å¤šï¼Œä¼šå¯¼è‡´ onChange() æ–¹æ³•å¤šæ¬¡è§¦å‘ï¼Œé€ æˆä¸å¿…è¦çš„è®¡ç®—ï¼Œå³ä½¿æ˜¯åŒä¸€æ¡çŸ­ä¿¡ï¼Œåœ¨æ¥æ”¶æ—¶è§¦å‘å›è°ƒï¼Œåœ¨é˜…è¯»æ—¶ä¹Ÿä¼šè§¦å‘ï¼Œåº”è¯¥æ˜¯çŸ­ä¿¡çŠ¶æ€å˜æ›´å¯¼è‡´ã€‚ ä½¿ç”¨å›½äº§ ROM æµ‹è¯•å‘ç°ï¼Œä¸¤ç§æ–¹æ³•ç›‘å¬éªŒè¯ç ç±»çŸ­ä¿¡éƒ½æ— æ³• 100% æˆåŠŸï¼Œé€šè¿‡å¹¿æ’­æ‹¦æˆªæ–¹å¼ï¼Œä¼šæ¥æ”¶ä¸åˆ°è¯¥çŸ­ä¿¡çš„å¹¿æ’­ï¼Œè€Œä½¿ç”¨ç›‘å¬çŸ­ä¿¡åª’ä½“åº“çš„æ–¹å¼ï¼Œä¼šè§¦å‘åª’ä½“åº“å˜åŠ¨çš„æ¥å£ï¼Œä½†ä½ ä¾ç„¶æŸ¥ä¸åˆ°éªŒè¯ç çš„çŸ­ä¿¡ã€‚ ç”±äºæ¨¡æ‹Ÿå™¨æ²¡æœ‰å®ä½“ SIM å¡æ— æ³•æ¥æ”¶çœŸå®çš„çŸ­ä¿¡ï¼Œä¸”å›½å¤–å¯¹äºçŸ­ä¿¡éªŒè¯ç çš„æ™®åŠç‡ä¸é«˜ï¼Œæ‰€ä»¥æ— æ³•æµ‹è¯•ä¹Ÿæ²¡æœ‰æµ‹è¯•çš„å¿…è¦ã€‚ å¦‚æœ‰æ¡ä»¶å¯ä»¥ä½¿ç”¨å›½å¤–æ‰‹æœºå¦‚ Google Pixel ç³»åˆ—è¿›è¡Œæµ‹è¯•ã€‚ å› æ­¤ï¼Œæš‚æ—¶æ‰¾ä¸åˆ°èƒ½å¤Ÿæ‹¦æˆªçŸ­ä¿¡éªŒè¯ç çš„æ–¹æ³•ï¼Œä½†è¿™ä¹Ÿçš„ç¡®ç¬¦åˆå¸¸ç†ï¼Œå› ä¸ºåœ¨å›½å†…äº’è”ç½‘ç¯å¢ƒä¸‹ï¼Œè·å–åˆ°éªŒè¯ç å°±å¯ä»¥å¯¹å…¶å¯¹åº”çš„è´¦å·è¿›è¡Œå„ç§æ“ä½œï¼Œæ¯”å¦‚é‡ç½®æˆ–ç›—åˆ·ç­‰ç­‰ï¼Œç³»ç»Ÿå¯¹äºæ­¤ç±»çŸ­ä¿¡çš„å±è”½æ˜¯å®Œå…¨åˆç†çš„ã€‚ ç»¼ä¸Šï¼Œå¯¹äºééªŒè¯ç ç±»çŸ­ä¿¡å¯ä»¥æ­£å¸¸æ‹¦æˆªï¼Œæ ¹æ®è‡ªå·±çš„éœ€æ±‚é€‰æ‹©ä¸åŒçš„æ–¹æ³•å³å¯ï¼Œå¯¹äºéªŒè¯ç ç±»çŸ­ä¿¡ï¼Œå°±åˆ«åŠ¨åå¿ƒæ€äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Real-time-Monitoring-of-SMS-in-Android/"},{"title":"Android ä¸º RecyclerView è®¾ç½®åˆ†å‰²çº¿","content":"Android å¼€å‘è€…éƒ½çŸ¥é“ï¼ŒRecyclerView æ˜¯ä¸€ä¸ªéå¸¸å¼ºå¤§çš„ç»„ä»¶ï¼Œå®ƒçš„æœ€åŸºæœ¬ä½œç”¨æ˜¯ä»£æ›¿åŸæ¥çš„ ListViewï¼Œä½†åˆç”±äºå…¶çµæ´»æ€§ï¼ŒRecyclerView èƒ½å¤Ÿå¸®æˆ‘ä»¬å®ç°è®¸å¤šå¤æ‚çš„é¡µé¢å¸ƒå±€æ–¹æ¡ˆã€‚ ç”¨ä¸€å¥è¯æ¦‚æ‹¬å°±æ˜¯ï¼ŒListView èƒ½å®ç°çš„ RecyclerView ä¹Ÿèƒ½å®ç°ï¼ŒListView å®ç°ä¸äº†çš„ï¼ŒRecyclerView ä¹Ÿèƒ½å®ç°ã€‚ ç›¸ä¿¡å¾ˆå¤š Android åˆå­¦è€…ä¹Ÿè·Ÿæˆ‘ä¸€æ ·ï¼Œæ˜¯ä»éƒ­éœ–çš„ã€Šç¬¬ä¸€è¡Œä»£ç â€”â€”Androidã€‹è¿™æœ¬ä¹¦å¼€å§‹çš„ï¼Œä¸å¾—ä¸è¯´è¿™æ˜¯ä¸€æœ¬éå¸¸é€‚åˆå…¥é—¨çš„ä¹¦ç±ï¼Œä½†åœ¨é‡Œé¢ä»‹ç» RecyclerView çš„ç« èŠ‚ä¸­ï¼Œéƒ­éœ–å¹¶æ²¡æœ‰ä»‹ç»è¿‡ RecyclerView åˆ†å‰²çº¿çš„å®ç°æ–¹æ³•ï¼Œè€Œåœ¨ç¬¬äºŒç‰ˆç¬¬ 14 ç« å®æˆ˜ã€CoolWeatherã€é¡¹ç›®ä¸­åˆ™æœ‰å¦‚ä¸‹æè¿°ï¼š ä¹‹æ‰€ä»¥è¿™æ¬¡ä½¿ç”¨äº† ListViewï¼Œæ˜¯å› ä¸ºå®ƒä¼šè‡ªåŠ¨ç»™æ¯ä¸ªå­é¡¹ä¹‹é—´æ·»åŠ ä¸€æ¡åˆ†éš”çº¿ï¼Œè€Œå¦‚æœä½¿ç”¨ RecyclerView æƒ³å®ç°åŒæ ·çš„åŠŸèƒ½åˆ™ä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œè¿™é‡Œæˆ‘ä»¬æ€»æ˜¯é€‰æ‹©æœ€ä¼˜çš„å®ç°æ–¹æ¡ˆã€‚ çš„ç¡®ï¼Œåœ¨é»˜è®¤æƒ…å†µä¸‹ï¼ŒListView æ˜¯æœ‰åˆ†å‰²çº¿çš„ï¼Œè€Œ RecyclerView å´æ²¡æœ‰ï¼š éƒ­éœ–åœ¨ä¹¦ä¸­å¯¹äº RecyclerView ç•Œé¢çš„è°ƒæ•´ï¼Œå¤§å¤šæ˜¯ç”¨ CardView æ¥å®ç°ï¼Œä»¥è‡´äºæˆ‘åœ¨åé¢å¾ˆé•¿ä¸€æ®µæ—¶é—´å†…ä»¥ä¸º RecyclerView è®¾ç½®åˆ†å‰²çº¿éœ€è¦å†™ä¸€äº›æ¯”è¾ƒå¤æ‚çš„ä»£ç ï¼Œä½†éšç€ä¸æ–­çš„å­¦ä¹ ï¼Œæˆ‘å‘ç°è¿™ä¸ªç†è®ºå®é™…ä¸Šæ˜¯é”™è¯¯çš„ï¼ŒRecyclerView å…¶å®ä¹Ÿèƒ½å¤Ÿè½»æ¾åœ°è®¾ç½®åˆ†å‰²çº¿ã€‚ RecyclerView è®¾ç½®åˆ†å‰²çº¿æ˜¯é€šè¿‡ addItemDecoration() æ–¹æ³•æ¥æ·»åŠ çš„ï¼Œè¯¥æ–¹æ³•æ¥æ”¶ä¸€ä¸ª ItemDecoration å¯¹è±¡ï¼ŒItemDecoration æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè€Œ RecyclerView ä¸­æ°å¥½æœ‰ä¸€ä¸ªé»˜è®¤çš„å®ç°ï¼Œä¹Ÿå°±æ˜¯ DividerItemDecorationï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼š recyclerView.addItemDecoration(new DividerItemDecoration(this, DividerItemDecoration.VERTICAL)); DividerItemDecoration çš„æ„é€ å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯ Contextï¼Œç”¨äºè®¿é—®èµ„æºï¼Œç¬¬äºŒä¸ª int ç±»å‹çš„å‚æ•°è¡¨ç¤ºåˆ†å‰²çº¿çš„æ–¹å‘ï¼Œåªèƒ½ä¸º HORIZONTAL æˆ– VERTICALï¼Œå³æ°´å¹³æˆ–å‚ç›´ã€‚ åªéœ€è¦åœ¨ setAdapter() ä¹‹å‰è°ƒç”¨ä¸Šæ–¹ä»£ç å³å¯ã€‚æ•ˆæœå¦‚ä¸‹ï¼š çœ‹åˆ°æ²¡æœ‰ï¼Œåªéœ€æ·»åŠ ä¸€è¡Œä»£ç ï¼Œå³å¯åœ¨æ¯ä¸ªå­é¡¹ä¹‹é—´æ·»åŠ ä¸€æ¡ä¸ ListView ä¸­å‡ ä¹ä¸€æ‘¸ä¸€æ ·çš„åˆ†å‰²çº¿ï¼Œç›¸æ¯” RecyclerView çš„å…¶ä»–ä»£ç æ”¹é€ ï¼Œå®åœ¨ä¸éº»çƒ¦ã€‚å½“ç„¶ï¼Œä¹Ÿæœ‰å¯èƒ½æ˜¯éƒ­éœ–ä¸ºäº†é¿å…åœ¨ä¹¦ä¸­èŠ±ç¯‡å¹…ä»‹ç»ä¸€ä¸ªéåŸºç¡€çš„çŸ¥è¯†ç‚¹è€Œæ•…æ„ä¸æäº†ï¼Œæ¯•ç«Ÿä»–ä¹Ÿæ›¾è¯´è¦å°½é‡å‡å°‘ä¹¦çš„åšåº¦ã€‚ å…³äº DividerItemDecoration çš„å®ç°å¹¶ä¸å¤æ‚ï¼Œæ¯•ç«Ÿä¹Ÿå°±ä¸€æ¡ç›´çº¿çš„äº‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹æºç ï¼š public class DividerItemDecoration extends RecyclerView.ItemDecoration { public static final int HORIZONTAL = LinearLayout.HORIZONTAL; public static final int VERTICAL = LinearLayout.VERTICAL; private static final String TAG = &quot;DividerItem&quot;; private static final int[] ATTRS = new int[]{ android.R.attr.listDivider }; private Drawable mDivider; private int mOrientation; private final Rect mBounds = new Rect(); public DividerItemDecoration(Context context, int orientation) { final TypedArray a = context.obtainStyledAttributes(ATTRS); mDivider = a.getDrawable(0); if (mDivider == null) { Log.w(TAG, &quot;@android:attr/listDivider was not set in the theme used for this &quot; + &quot;DividerItemDecoration. Please set that attribute all call setDrawable()&quot;); } a.recycle(); setOrientation(orientation); } public void setOrientation(int orientation) { if (orientation != HORIZONTAL &amp;&amp; orientation != VERTICAL) { throw new IllegalArgumentException(&quot;Invalid orientation. It should be either HORIZONTAL or VERTICAL&quot;); } mOrientation = orientation; } public void setDrawable(@NonNull Drawable drawable) { if (drawable == null) { throw new IllegalArgumentException(&quot;Drawable cannot be null.&quot;); } mDivider = drawable; } @Nullable public Drawable getDrawable() { return mDivider; } @Override public void onDraw(Canvas c, RecyclerView parent, RecyclerView.State state) { if (parent.getLayoutManager() == null || mDivider == null) { return; } if (mOrientation == VERTICAL) { drawVertical(c, parent); } else { drawHorizontal(c, parent); } } private void drawVertical(Canvas canvas, RecyclerView parent) { canvas.save(); final int left; final int right; if (parent.getClipToPadding()) { left = parent.getPaddingLeft(); right = parent.getWidth() - parent.getPaddingRight(); canvas.clipRect(left, parent.getPaddingTop(), right, parent.getHeight() - parent.getPaddingBottom()); } else { left = 0; right = parent.getWidth(); } final int childCount = parent.getChildCount(); for (int i = 0; i &lt; childCount; i++) { final View child = parent.getChildAt(i); parent.getDecoratedBoundsWithMargins(child, mBounds); final int bottom = mBounds.bottom + Math.round(child.getTranslationY()); final int top = bottom - mDivider.getIntrinsicHeight(); mDivider.setBounds(left, top, right, bottom); mDivider.draw(canvas); } canvas.restore(); } private void drawHorizontal(Canvas canvas, RecyclerView parent) { canvas.save(); final int top; final int bottom; if (parent.getClipToPadding()) { top = parent.getPaddingTop(); bottom = parent.getHeight() - parent.getPaddingBottom(); canvas.clipRect(parent.getPaddingLeft(), top, parent.getWidth() - parent.getPaddingRight(), bottom); } else { top = 0; bottom = parent.getHeight(); } final int childCount = parent.getChildCount(); for (int i = 0; i &lt; childCount; i++) { final View child = parent.getChildAt(i); parent.getLayoutManager().getDecoratedBoundsWithMargins(child, mBounds); final int right = mBounds.right + Math.round(child.getTranslationX()); final int left = right - mDivider.getIntrinsicWidth(); mDivider.setBounds(left, top, right, bottom); mDivider.draw(canvas); } canvas.restore(); } @Override public void getItemOffsets(Rect outRect, View view, RecyclerView parent, RecyclerView.State state) { if (mDivider == null) { outRect.set(0, 0, 0, 0); return; } if (mOrientation == VERTICAL) { outRect.set(0, 0, 0, mDivider.getIntrinsicHeight()); } else { outRect.set(0, 0, mDivider.getIntrinsicWidth(), 0); } } } é¦–å…ˆå°±æ˜¯è·å–ä¼ å…¥çš„æ–¹å‘ï¼Œä¹Ÿå°±æ˜¯æ°´å¹³è¿˜æ˜¯å‚ç›´ï¼Œç„¶ååœ¨ onDraw() ä¸­æ ¹æ®æ–¹å‘è°ƒç”¨ drawVertical() æˆ– drawHorizontal() å®ç°å¯¹åˆ†å‰²çº¿çš„ç»˜åˆ¶ã€‚ ç»˜åˆ¶å‰å…ˆæµ‹é‡ RecyclerView çš„ paddingï¼Œä»¥å¾—åˆ°ä¸ item ä¸ç›¸é‚»ä¸¤è¾¹çš„å®½åº¦ã€‚é€šè¿‡ getChildCount() è·å– item çš„æ•°é‡ï¼Œç„¶åéå†å„ä¸ª itemï¼Œåˆ†åˆ«è®¡ç®—ä¸ item ç›¸é‚»ä¸¤è¾¹çš„å®½åº¦ï¼Œå³å¯ç»˜åˆ¶å‡ºåˆ†å‰²çº¿çš„åŒºåŸŸã€‚ getItemOffsets() æ–¹æ³•ç”¨äºè®¾ç½® item çš„ padding å±æ€§ï¼ŒsetDrawable() åˆ™ç”¨äºè®¾ç½®åˆ†å‰²çº¿çš„æ ·å¼ã€‚ äº†è§£åŸç†ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ›´çµæ´»åœ°ä¸º RecyclerView è‡ªå®šä¹‰åˆ†å‰²çº¿äº†ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¾®ä¿¡å¸¸ç”¨çš„ä¸€ç§åˆ†å‰²çº¿æ–¹å¼ï¼Œæ˜¯å·¦ä¾§æœ‰é—´éš”çš„åˆ†å‰²çº¿ï¼š é‚£æˆ‘ä»¬å¯ä»¥å‚ç…§ä¸Šæ–¹æºç ç®€å•å†™ä¸€ä¸ªï¼š public class WeChatDividerItemDecoration extends RecyclerView.ItemDecoration { private static final int[] ATTRS = new int[]{android.R.attr.listDivider}; public static final int HORIZONTAL = LinearLayoutManager.HORIZONTAL; public static final int VERTICAL = LinearLayoutManager.VERTICAL; private static final String TAG = &quot;DividerItem&quot;; private Drawable mDivider; private int mOrientation; private int mMarginStart, mMarginEnd; public WeChatDividerItemDecoration(Context context, int orientation, int marginStart, int marginEnd) { final TypedArray a = context.obtainStyledAttributes(ATTRS); mDivider = a.getDrawable(0); if (mDivider == null) { Log.w(TAG, &quot;@android:attr/listDivider was not set in the theme used for this &quot; + &quot;DividerItemDecoration. Please set that attribute all call setDrawable()&quot;); } mMarginStart = marginStart; mMarginEnd = marginEnd; a.recycle(); setOrientation(orientation); } public void setOrientation(int orientation) { if (orientation != HORIZONTAL &amp;&amp; orientation != VERTICAL) { throw new IllegalArgumentException(&quot;Invalid orientation. It should be either HORIZONTAL or VERTICAL&quot;); } mOrientation = orientation; } @Override public void onDraw(@NonNull Canvas c, @NonNull RecyclerView parent, @NonNull RecyclerView.State state) { if (parent.getLayoutManager() == null || mDivider == null) { return; } if (mOrientation == VERTICAL) { drawVertical(c, parent); } else { drawHorizontal(c, parent); } } private void drawVertical(Canvas canvas, RecyclerView parent) { final int left = parent.getPaddingLeft(); final int right = parent.getWidth() - parent.getPaddingRight(); final int childCount = parent.getChildCount(); for (int i = 0; i &lt; childCount; i++) { final View child = parent.getChildAt(i); final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child.getLayoutParams(); final int top = child.getBottom() + params.bottomMargin; final int bottom = top + mDivider.getIntrinsicHeight(); mDivider.setBounds(left + mMarginStart, top, right - mMarginEnd, bottom); mDivider.draw(canvas); } } private void drawHorizontal(Canvas canvas, RecyclerView parent) { final int top = parent.getPaddingTop(); final int bottom = parent.getHeight() - parent.getPaddingBottom(); final int childCount = parent.getChildCount(); for (int i = 0; i &lt; childCount; i++) { final View child = parent.getChildAt(i); final RecyclerView.LayoutParams params = (RecyclerView.LayoutParams) child.getLayoutParams(); final int left = child.getRight() + params.rightMargin; final int right = left + mDivider.getIntrinsicHeight(); mDivider.setBounds(left, top + mMarginStart, right, bottom - mMarginEnd); mDivider.draw(canvas); } } @Override public void getItemOffsets(@NonNull Rect outRect, @NonNull View view, @NonNull RecyclerView parent, @NonNull RecyclerView.State state) { if (mDivider == null) { outRect.set(0, 0, 0, 0); return; } if (mOrientation == VERTICAL) { outRect.set(0, 0, 0, mDivider.getIntrinsicHeight()); } else { outRect.set(0, 0, mDivider.getIntrinsicWidth(), 0); } } } æ•ˆæœå¦‚ä¸‹ï¼š åªéœ€é€šè¿‡æ„é€ å‡½æ•°å°† marginStart å’Œ marginEnd ä¼ å…¥ï¼Œé€šè¿‡åœ¨ç»˜åˆ¶æ—¶å¢å‡å¯¹åº”çš„è¾¹è·ï¼Œå°±å¯ä»¥è‡ªç”±çš„æ§åˆ¶åˆ†å‰²çº¿ä¸¤ç«¯çš„è·ç¦»ï¼ŒåŒæ—¶è¿˜å¯ä»¥åˆ©ç”¨ drawVertical() å’Œ drawHorizontal() åˆ†åˆ«é€‚é…ä¸¤ä¸ªæ–¹å‘ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿æ˜¯è‡ªå®šä¹‰åˆ†å‰²çº¿ï¼Œä¹Ÿå¹¶ä¸å›°éš¾ï¼Œåªè¦å‚è€ƒ DividerItemDecoration ä¸­çš„ä»£ç ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ä¾è‘«èŠ¦ç”»ç“¢å®ç°è‡ªå·±æƒ³è¦çš„æ•ˆæœã€‚ ","link":"https://LiarrDev.github.io/post/Setting-Divider-for-RecyclerView-in-Android/"},{"title":"å…³äºå®¢æˆ·ç«¯åŸŸåè¢«åŠ«æŒçš„è§£å†³æ–¹æ¡ˆæ€è€ƒ","content":"æœ€è¿‘å…¬å¸é¡¹ç›®ç”¨åˆ°çš„æŸä¸ªåŸŸååœ¨åŒ—äº¬åœ°åŒºå‡ºç°å¤§é‡æ— æ³•è®¿é—®çš„æƒ…å†µï¼Œç”¨æˆ·æœ€ç›´è§‚çš„æ„Ÿå—å°±æ˜¯ï¼Œæ‰“å¼€ WebView é¡µé¢æ—¶ï¼Œå‡ºç°äº†ä»–ä»¬çœ‹ä¸æ‡‚çš„æç¤ºï¼š å…¶å® net::ERR_CONNECTION_REFUSED è¿™ä¸ªæç¤ºå¤ªè™šï¼Œä¸åªæ˜¯ç”¨æˆ·ï¼Œæˆ‘ä»¬ä½œä¸ºå¼€å‘çœ‹åˆ°çš„æ—¶å€™ä¹Ÿä¸ä¸€å®šèƒ½é©¬ä¸Šååº”è¿‡æ¥ã€‚ æŠ€æœ¯å¼€ä¼šåå¾—å‡ºæ˜¯ DNS è¢«åŠ«æŒäº†ï¼Œè¿™å¾—è”ç³»å½“åœ°è¿è¥å•†è§£å†³ï¼Œæˆ‘ä»¬ä¸´æ—¶çš„è§£å†³æ–¹æ¡ˆå°±æ˜¯æ›¿æ¢åŸŸåï¼ˆä¸€èˆ¬ä¼ä¸šéƒ½åº”è¯¥æœ‰å¤‡ç”¨åŸŸåï¼‰ï¼Œé‡æ–°å‡ºåŒ…ç»™ç”¨æˆ·æ›¿æ¢ã€‚ ç­‰è¿è¥å•†è§£å†³å…¨å‡­è¿æ°”ï¼Œé‡æ–°å‡ºåŒ…ä¹Ÿæ˜¯ä¸´æ—¶è§£å†³ï¼Œæˆ‘ä»¬åº”è¯¥åˆ©ç”¨å¤‡ç”¨åŸŸåè€ƒè™‘ä¸€å¥—è§£å†³æ–¹æ¡ˆã€‚ å¤ç° é¦–å…ˆè¦å°è¯•å¤ç°åœºæ™¯ï¼Œå› ä¸ºæˆ‘ä¸åœ¨åŒ—äº¬ï¼Œè‡ªç„¶æ— æ³•ç›´æ¥çš„å¤ç°è¿™ä¸ªé—®é¢˜ï¼Œä½†æˆ‘ä»¬å¯ä»¥æ€è€ƒè¿™ä¸ªé—®é¢˜çš„æœ¬è´¨ã€‚ ä¹‹å‰åœ¨ã€ä¸€æ–‡å¸¦ä½ ç®€å•äº†è§£ Hostsã€ä¸­æåˆ°ï¼ŒåŸŸåå’Œ IP æœ‰æ˜ å°„å…³ç³»ï¼ŒDNS æœåŠ¡å™¨ä¸ Hosts ä¸€æ ·ï¼Œå……å½“ç€è§£æè¿™å±‚æ˜ å°„çš„è§’è‰²ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå½“è§£æå‡ºé”™çš„æ—¶å€™ï¼Œå°±ä¼šäº§ç”Ÿä¸Šé¢çš„é—®é¢˜ã€‚ é‚£ä¹ˆæ‰€è°“çš„ã€Œè§£æå‡ºé”™ã€åº”å½“å¦‚ä½•åˆ¤æ–­ï¼Ÿ ä¹Ÿå¾ˆç®€å•ï¼Œæ—¢ç„¶åŸŸåå’Œ IP æœ‰æ˜ å°„å…³ç³»ï¼Œå‡ºé”™åˆ™æ„å‘³ç€åŸŸåæ— æ³•è§£æä¸ºæ­£ç¡®çš„ IPï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Hosts å»å®ç°è¿™ä¸€ç‚¹ï¼Œå…·ä½“æ“ä½œå‚è€ƒã€Android ä¿®æ”¹ Hostsã€ä¸€æ–‡ã€‚ æ¥ä¸‹æ¥å†™ä¸ª WebView åŠ è½½ä¸€ä¸ªç½‘é¡µï¼Œæˆ‘è¿™é‡Œå°±æ‹¿é˜¿é‡Œäº‘å®˜ç½‘æ¥å†™ä¸ª Demoï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ç„¶åï¼Œé€šè¿‡ã€IPAddress.comã€æŸ¥ä¸€ä¸‹ç™¾åº¦å®˜ç½‘çš„ IPï¼Œä¿®æ”¹ Hosts æ–‡ä»¶ï¼Œå°†é˜¿é‡Œäº‘å®˜ç½‘åŸŸåæ˜ å°„åˆ°ç™¾åº¦çš„ IP ä¸Šï¼š 14.215.177.38 www.aliyun.com å†æ¬¡è¿è¡Œåˆšåˆšçš„ Demoï¼Œå¯ä»¥çœ‹åˆ°é¡µé¢æ²¡æœ‰åŠ è½½å‡ºæ¥ï¼š è¿™ä¼¼ä¹è·Ÿæˆ‘ä¸€å¼€å§‹çš„æƒ…å†µä¸å¤ªä¸€æ ·ï¼Œå°†åŸŸåæŒ‡å‘æœ¬åœ°ä¸»æœºè¯•è¯•çœ‹ï¼š 127.0.0.1 www.aliyun.com æƒ…å†µå¤ç°ï¼š å¤ç°ä¹‹åå°±èƒ½å¤Ÿé’ˆå¯¹æ€§çš„è§£å†³äº†ã€‚ WebView å¤„ç†æ–¹æ¡ˆ æµ‹è¯•å‘ç°ï¼Œä»¥ä¸Šä¸¤ç§æƒ…å†µä¼šåˆ†åˆ«å›è°ƒ WebViewClient ä¸­çš„ onReceivedSslError() å’Œ onReceivedError() æ¥å£ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨è¿™ä¸¤ä¸ªå›è°ƒä¸­å»åšåˆ‡æ¢åŸŸåçš„æ“ä½œï¼Œæ¥è§„é¿ DNS è¢«åŠ«æŒäº§ç”Ÿçš„é”™è¯¯é¡µé¢ï¼š webView.setWebViewClient(new WebViewClient() { @Override public void onReceivedSslError(WebView view, SslErrorHandler handler, SslError error) { super.onReceivedSslError(view, handler, error); // åˆ‡æ¢åŸŸå } @Override public void onReceivedError(WebView view, int errorCode, String description, String failingUrl) { super.onReceivedError(view, errorCode, description, failingUrl); // åˆ‡æ¢åŸŸå } @Override public void onReceivedError(WebView view, WebResourceRequest request, WebResourceError error) { super.onReceivedError(view, request, error); // åˆ‡æ¢åŸŸå } }); éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå°½ç®¡é¡µé¢æœ‰æç¤º net::ERR_CONNECTION_REFUSED çš„å†…å®¹ï¼Œä½†ä¸è¦å°è¯•æŠ“å–ç›¸åº”çš„æè¿°å†…å®¹å»è¿›è¡Œå¤„ç†ï¼Œå› ä¸ºä¸åŒçš„é”™è¯¯å¯èƒ½ä¼šäº§ç”Ÿä¸åŒçš„æè¿°ï¼Œä½ æ— æ³•é¢„æµ‹åˆ°æ‰€æœ‰çš„æƒ…å†µï¼Œè¿˜æ˜¯åœ¨å›è°ƒä¸­ç»Ÿä¸€å¤„ç†æ¯”è¾ƒå¥½ã€‚ ç½‘ç»œè¯·æ±‚å¤„ç†æ–¹æ¡ˆ å¤§å¤šæ•°é¡¹ç›®ä¸­ä½¿ç”¨çš„éƒ½æ˜¯åŒä¸€å¥—åŸŸåï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ï¼ŒWebView ä¸èƒ½æ­£å¸¸æ‰“å¼€ç½‘é¡µçš„æƒ…å†µä¸‹ï¼ŒåŒåŸŸåçš„æ™®é€šç½‘ç»œè¯·æ±‚ä¹Ÿä¼šå¤±è´¥ã€‚ ç½‘ç»œè¯·æ±‚ä¸‹åˆ¤æ–­åŠ«æŒä¼¼ä¹æœ‰ç‚¹éº»çƒ¦ï¼Œå› ä¸ºå®ƒä¸åƒ WebView é‚£æ ·ç›´æ¥èµ°å¯¹åº”çš„å›è°ƒï¼Œè€Œä¸”æ¯ä¸ªç½‘ç»œè¯·æ±‚æ¡†æ¶çš„å°è£…ä¹Ÿä¸å°½ç›¸åŒã€‚ åŸŸåè¢«åŠ«æŒæ—¶è¿›è¡Œç½‘ç»œè¯·æ±‚ï¼Œå¾—åˆ°çš„å“åº”ç†è®ºä¸Šæ˜¯ä¸ºç©ºçš„ï¼Œä½†å‡å¦‚æŒ‡å‘çš„ IP æ‹¥æœ‰ç›¸åŒçš„ç›®å½•ä¹Ÿå¯èƒ½å‡ºç°ä¸ä¸ºç©ºçš„æƒ…å†µã€‚ å¦‚æœå°è¯•æ ¹æ®å“åº”çš„ HTTP CODE åˆ¤æ–­ï¼Œç½‘ç»œè¯·æ±‚æ¡†æ¶ä¸€èˆ¬ä¼šè¿”å› 0ï¼Œå½“ç„¶ä¹Ÿä¼šæœ‰è¿”å›å¦‚ 404 æˆ–è€… 500 çš„ï¼Œè¿™ç§æ–¹æ³•æ›´åŠ ä¸é è°±ã€‚ è€Œä¸”å½“åŸŸåè¢«åŠ«æŒæ—¶ï¼Œæ„å‘³ç€è¯¥åŸŸåä¸‹çš„æ‰€æœ‰æ¥å£éƒ½ä¸èƒ½æ­£å¸¸è®¿é—®ï¼Œå‡è‹¥æ¯ä¸ªæ¥å£éƒ½åšé‡å¤åˆ¤æ–­ï¼Œä¼šé€ æˆä»£ç å†—ä½™ä»¥åŠè€—æ—¶å¢åŠ ã€‚ æˆ‘ä»¬æœ€ç»ˆçš„å¤„ç†æ–¹æ¡ˆæ˜¯ï¼Œå•ç‹¬æä¾›ä¸€ä¸ªåˆ¤æ–­åŸŸåæ˜¯å¦æ­£å¸¸çš„æ¥å£ï¼Œåœ¨åˆå§‹åŒ–é˜¶æ®µè°ƒç”¨ï¼Œå¦‚æœå‡ºç°é—®é¢˜å°±æ›¿æ¢ä¸ºå¤‡ç”¨åŸŸåï¼Œåªéœ€åšä¸€æ¬¡åˆ¤æ–­æ“ä½œï¼Œåç»­è¯·æ±‚æ—¶ç›´æ¥å°†æ¥å£åˆ‡åˆ°å¤‡ç”¨åŸŸåä¸­ã€‚ ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š public enum HostChecker { INSTANCE; private int retryIndex = -1; private String HOST_NAME = BASE_DOMAIN; public void checkHost() { String[] domains = DomainConfig.getDomains(); if (domains == null || domains.length &lt;= 0) { return; } checkHostConnection(domains); } public String replaceHost(String url) { if (url.contains(BASE_DOMAIN)) { return url.replace(BASE_DOMAIN, HOST_NAME); } } private void checkHostConnection(final String[] domains) { RequestManager.checkHost(retryIndex, new RequestCallback() { @Override public void onRequestSuccess(String content) { try { JSONObject jsonObject = new JSONObject(content); if (jsonObject.optBoolean(&quot;status&quot;)) { HOST_NAME = retryIndex == -1 ? BASE_DOMAIN : domains[retryIndex]; } else { retryIndex++; checkHostConnection(domains); } } catch (JSONException e) { retryIndex++; checkHostConnection(domains); } } @Override public void onRequestError(String error) { retryIndex++; checkHostConnection(domains); } @Override public void onRequestTimeout(String msg) { retryIndex++; checkHostConnection(domains); } }); } } å°è£…ä¸€ä¸ªå•ä¾‹çš„æ£€æŸ¥å™¨ï¼Œæš´éœ²ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ checkHost() åœ¨åˆå§‹åŒ–çš„æ—¶å€™è°ƒç”¨ï¼Œç”¨äºåˆ¤æ–­åŸŸåæ˜¯å¦æ­£å¸¸è¿ä½œï¼Œå¦‚æœä¸èƒ½ï¼Œåˆ™æ›¿æ¢ä¸ºå¯ç”¨çš„å¤‡ç”¨åŸŸåï¼ŒreplaceHost() åœ¨ç½‘ç»œè¯·æ±‚çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™é‡Œæ— éœ€å†åšåˆ¤æ–­ï¼Œä»»ä½•è¯·æ±‚çš„æ¥å£éƒ½ä¼šåˆ‡ä¸ºå¯ç”¨çš„åŸŸåã€‚ public class RequestManager { ... public void doRequest(final String requestUrl, final RequestParams params, final RequestCallback callback) { final String url = HostChecker.INSTANCE.replaceHost(requestUrl); HttpUtil.doRequest(url, params, callback); } public void checkHost(int retryIndex, final RequestCallback callback) { String[] domains = DomainConfig.getDomains(); if (domains == null || domains.length &lt;= 0) { return; } if (retryIndex &lt; -1 || retryIndex &gt;= domains.length) { return; } final String url; if (retryIndex &gt;= 0) { url = CHECK_HOST_URL.replace(BASE_DOMAIN, domains[retryIndex]); } else { // -1 url = CHECK_HOST_URL; } HttpUtil.doRequest(url, null, callback); } } æˆ‘è¿™é‡Œå°†å¤‡ç”¨åŸŸåå­˜æ”¾åœ¨æ•°ç»„ä¸­ï¼Œè¿™æ ·å¦‚æœå¤‡ç”¨åŸŸåæœ‰å¤šä¸ªçš„è¯ï¼Œå¯ä»¥é€šè¿‡ç´¢å¼•ç›´æ¥è®¿é—®åˆ°å¯¹åº”åŸŸåï¼Œæˆ‘ä»¬çŸ¥é“æ•°ç»„çš„ç´¢å¼•æ˜¯ä» 0 å¼€å§‹çš„ï¼Œæˆ‘åœ¨è¿™é‡Œå°†åˆå§‹ç´¢å¼•æ ‡è®°ä¸º -1ï¼Œå¯ä»¥ç†è§£ä¸ºè¯¥ç´¢å¼•å¯¹åº”çš„æ˜¯é»˜è®¤çš„åŸŸåï¼ˆå®é™…ä¸Šå¹¶ä¸æ˜¯ï¼‰ï¼Œå‡å¦‚é»˜è®¤åŸŸåä¸èƒ½æ­£å¸¸å·¥ä½œï¼Œåªéœ€å°†ç´¢å¼•çš„å€¼åŠ  1 å°±èƒ½ç›´æ¥ä»å¤‡ç”¨åŸŸåæ•°ç»„çš„é¦–ä¸ªå€¼å¼€å§‹äº†ï¼Œç´¢å¼•è‡ªå¢æ“ä½œåœ¨æ•°ç»„å†…å¯ä»¥è®¿é—®ä¸‹ä¸€ä¸ªå€¼ï¼Œäºæ˜¯ä¾¿èƒ½å½¢æˆé€’å½’å¤ç”¨ã€‚ å°ç»“ å®é™…ä¸Šï¼Œå‡å¦‚ WebView å¹¶ä¸åœ¨åº”ç”¨æ‰“å¼€æ—¶ç«‹å³æ˜¾ç¤ºçš„è¯ï¼Œæˆ‘æ›´å»ºè®®ç›´æ¥å¤ç”¨ç½‘ç»œè¯·æ±‚çš„å…¨å±€æ›¿æ¢æ–¹æ¡ˆï¼Œå› ä¸ºè¿™ä¸ªæ–¹æ¡ˆåªåœ¨åˆå§‹åŒ–é˜¶æ®µæ‰§è¡Œä¸€æ¬¡ï¼Œå³å¯åœ¨å½“æ¬¡ä¼šè¯ä¸­ç›´æ¥ä½¿ç”¨ï¼Œå¦åˆ™ WebView å¦‚æœå¤šæ¬¡å›è°ƒåˆ°å¤±è´¥æ¥å£ä¼šé€ æˆè¾ƒé•¿æ—¶é—´çš„ç™½å±ï¼Œå½±å“ä½“éªŒã€‚è€Œå¦‚æœé¦–é¡µå³ä¸º WebView çš„è¯ï¼Œä½¿ç”¨ç½‘ç»œè¯·æ±‚å…¨å±€æ›¿æ¢æ–¹æ¡ˆç”±äºè¯·æ±‚å¼‚æ­¥ï¼Œå¯èƒ½ä¼šé€ æˆ WebView åŠ è½½å¤±è´¥ï¼Œæ‰€ä»¥åº”å½“ç»“åˆé¡¹ç›®å®é™…æƒ…å†µåˆç†é€‰æ‹©æ–¹æ¡ˆã€‚ è™½ç„¶ç¤ºä¾‹ä¾ç„¶æ˜¯ Android å®¢æˆ·ç«¯çš„ Java ä»£ç ï¼Œä½†æ ‡é¢˜æˆ‘è¯´çš„æ˜¯ã€Œå®¢æˆ·ç«¯ã€ï¼Œä¹Ÿå°±æ„å‘³ç€ iOS ç­‰å…¶ä»–å®¢æˆ·ç«¯å¹³å°å¼€å‘ä¹Ÿå¯ä»¥é‡‡ç”¨ç›¸ä¼¼çš„ç­–ç•¥ï¼Œåæ¥æˆ‘è¿˜æƒ³äº†ä¸€ä¸‹å…¶ä»–æ–¹æ¡ˆï¼Œé  ping æ¥åˆ¤æ–­æ˜¯å¦è¢«åŠ«æŒç†è®ºä¸Šä¹Ÿæ˜¯å¯è¡Œçš„ã€‚ åœ¨ç½‘ä¸Šæœç´¢ç›¸å…³å†…å®¹ï¼ŒåŸºæœ¬éƒ½æ˜¯æ— è§£çš„ï¼Œå®é™…ä¸Šä¹Ÿæ­£å¸¸ï¼Œå› ä¸ºè¿™æœ¬æ¥å°±ä¸æ˜¯å®¢æˆ·ç«¯çš„é”…ï¼Œä½†åŒæ—¶ä¹Ÿä¸æ­£å¸¸ï¼Œæ¯•ç«Ÿåœ¨ç§»åŠ¨å®¢æˆ·ç«¯å‘å±•çš„åä½™å¹´é—´ï¼Œç›¸ä¿¡æœ‰è®¸å¤šå¼€å‘è€…éƒ½é‡åˆ°è¿‡è¿™ç§é—®é¢˜ï¼Œç†åº”æœ‰ä¸€ä¸ªè§£å†³çš„æ€è·¯ã€‚ æ ‡é¢˜ä¸­æˆ‘ç”¨çš„æ˜¯ã€Œæ€è€ƒã€è¿™ä¸ªè¯ï¼Œå› ä¸ºæ²¡æœ‰å‰è¾ˆä»¬çš„æ–¹æ¡ˆåšå‚è€ƒï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸ç¡®åˆ‡ä¸Šé¢çš„æ–¹æ¡ˆæ˜¯å¦æ­£ç¡®ï¼Œåªèƒ½æ ¹æ®è‡ªå·±çš„æ€è·¯æ¥å†™ï¼Œå¸Œæœ›å¯¹åæ¥è€…æœ‰æ‰€å¸®åŠ©ï¼Œä¹Ÿå¸Œæœ›æœ‰è¸©è¿‡å‘çš„å¼€å‘è€…èƒ½æä¾›æ›´å¥½çš„æ€è·¯ã€‚ ","link":"https://LiarrDev.github.io/post/Thinking-about-the-Solution-of-Client-Domain-being-Hijacked/"},{"title":"Android ä¿®æ”¹ Hosts","content":"ä¹‹å‰ã€ä¸€æ–‡å¸¦ä½ ç®€å•äº†è§£ Hostsã€æ–‡æœ«æåˆ°ä¼šå¸¦æ¥ Hosts ä¿®æ”¹æ•™ç¨‹ç³»åˆ—æ–‡ç« ï¼Œåœ¨ã€Windows ä¿®æ”¹ Hostsã€å’Œã€macOS ä¿®æ”¹ Hostsã€ä¹‹åï¼Œä½ ä»¥ä¸ºè¿™ä¸ªç³»åˆ—å°±ç»“æŸäº†ï¼Ÿä¸ï¼Œæˆ‘åˆå›æ¥äº†ã€‚ è¿™ä¸€æ¬¡ï¼Œæ˜¯ Android ç³»ç»Ÿä¿®æ”¹ Hosts æ•™ç¨‹ã€‚ è¿™ç¯‡æ–‡ç« å…¶å®æœºç¼˜å·§åˆï¼Œå› ä¸ºæˆ‘åœ¨ Android å¼€å‘ä¸­åˆšå¥½éœ€è¦é€šè¿‡ä¿®æ”¹ Hosts æ¥è·Ÿåç«¯å·¥ç¨‹å¸ˆé…åˆæµ‹è¯•ï¼Œæ‰€ä»¥è¿™ç¯‡æ–‡ç« å°±æ­£å¥½æ°´åˆ°æ¸ æˆã€‚ å› ä¸ºåœ¨ Android ä¸Šä¿®æ”¹ Hosts éœ€è¦è·å– ROOT æƒé™ï¼Œæ‰€ä»¥æˆ‘è¿™æ¬¡å°±ç”¨æ¨¡æ‹Ÿå™¨æ¥ä»£æ›¿çœŸæœºæ¼”ç¤ºï¼Œä½¿ç”¨çš„æ˜¯ã€å¤œç¥æ¨¡æ‹Ÿå™¨ã€ï¼Œä»»ä½• Android æ¨¡æ‹Ÿå™¨éƒ½å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æ“ä½œã€‚ ç”±äºç°åœ¨å¾ˆå¤šå›½å†… ROM é™åˆ¶è§£é”æƒé™ï¼Œå¦‚ EMUI ç­‰ï¼Œè·å– ROOT æƒé™æ“ä½œæ­¥éª¤å¯èƒ½ç›¸å¯¹å¤æ‚ï¼Œå°±ä¸å†èŠ±ç¯‡å¹…ä»‹ç»äº†ï¼Œå‡å¦‚ä½ çš„æ‰‹æœºæˆåŠŸè·å–äº† ROOT æƒé™ï¼Œä»¥ä¸‹æ–¹æ³•ä¹Ÿæ˜¯é€‚ç”¨çš„ã€‚ ä¿®æ”¹ Android ç³»ç»Ÿçš„ Hosts éœ€è¦æå‰å‡†å¤‡ ADBï¼ˆAndroid Debug Bridgeï¼‰å·¥å…·ï¼Œæˆ‘æœ¬æ¥å°±æ˜¯ä»äº‹ Android å¼€å‘çš„ï¼Œå¼€å‘å·¥å…·ä¸­å·²ç»é›†æˆäº† ADBï¼Œä¸éœ€è¦é‡æ–°å®‰è£…ï¼Œåœ¨ä¹‹å‰çš„ã€Android Device Monitor æƒé™ç¬”è®°ã€ä¸­æˆ‘ä¹Ÿä½¿ç”¨è¿‡å®ƒï¼Œåœ¨æ­¤å°±ä¸è¿‡å¤šä»‹ç»äº†ã€‚ å¦‚æœä½ çš„ç”µè„‘ä¸Šæ²¡æœ‰ ADBï¼Œå¯ä»¥å»å•ç‹¬ä¸‹è½½ï¼›å¦å¤–ï¼ŒAndroid æ¨¡æ‹Ÿå™¨çš„å®‰è£…ç›®å½•ä¸‹ä¸€èˆ¬ä¹Ÿä¼šæœ‰ ADB å·¥å…·ï¼Œé…ç½®åˆ°ç³»ç»Ÿç¯å¢ƒä¸­å³å¯ã€‚ é¦–å…ˆï¼Œå…ˆç”¨ç»ˆç«¯æŸ¥çœ‹è¿æ¥çš„è®¾å¤‡ï¼š âœ adb devices è®¸å¤šæ¨¡æ‹Ÿå™¨åœ¨åˆæ¬¡ä½¿ç”¨ ADB è¿æ¥æ—¶éƒ½ä¸ä¸€å®šèƒ½è¿æ¥ä¸Šï¼Œå¯ä»¥è‡ªè¡Œæœç´¢å¯¹åº”çš„è§£å†³æ–¹æ³•ï¼Œæœ€å¸¸è§çš„å°±æ˜¯éœ€è¦æ‰§è¡Œ adb connect å‘½ä»¤è¿æ¥åˆ°å¯¹åº”çš„ç«¯å£ï¼Œä¹Ÿæœ‰å¯èƒ½é‡åˆ° ADB ç‰ˆæœ¬ä¸ä¸€è‡´çš„é—®é¢˜ï¼Œä½¿ç”¨æ¨¡æ‹Ÿå™¨ç›®å½•ä¸‹çš„ ADB æˆ–è€…å°†æ­£åœ¨ä½¿ç”¨çš„ ADB å·¥å…·è¦†ç›–æ¨¡æ‹Ÿå™¨çš„ ADB å³å¯ã€‚ é€šè¿‡ ADB æ­£ç¡®è¿æ¥ä¸Š Android æ¨¡æ‹Ÿå™¨åï¼Œæ¥ä¸‹æ¥å°±æ˜¯ä¿®æ”¹ Hostsã€‚ Hosts ç›®å½•ä¸ºï¼š/system/etc/hostsï¼Œåœ¨ä¸€åˆ‡å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ä¸€ä¸ªé¢å¤–æ­¥éª¤ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š âœ adb remount ä¸å…¶ä»–ç³»ç»Ÿä¸€æ ·ï¼ŒAndroid å¯¹äº Hosts æ–‡ä»¶çš„å¤„ç†ä¹Ÿæ˜¯éœ€è¦æƒé™çš„ï¼Œè¿™æ¡å‘½ä»¤çš„ä½œç”¨æ˜¯é‡æ–°æŒ‚è½½ /system åˆ†åŒºä¸ºå¯è¯»å†™ã€‚ ç„¶åé€šè¿‡å‘½ä»¤å°† Hosts æ–‡ä»¶æ‹‰å–åˆ°æœ¬åœ°ï¼š âœ adb pull /system/etc/hosts D:/hosts è¿™æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ ADB å‘½ä»¤ï¼Œç”¨äºå°†æ‰‹æœºä¸Šçš„æ–‡ä»¶å¤åˆ¶åˆ°æœ¬åœ°ï¼š âœ adb pull {æ‰‹æœºæ–‡ä»¶è·¯å¾„} {æœ¬æœºç›®å½•} é»˜è®¤æƒ…å†µä¸‹ Hosts é‡Œé¢åªæœ‰ä¸¤è¡Œå†…å®¹ï¼š 127.0.0.1 localhost ::1 ip6-localhost è·Ÿä¹‹å‰ä¸€æ ·ï¼Œç›´æ¥åœ¨ä¸‹é¢è¿½åŠ è‡ªå·±çš„ Hostsã€‚ç„¶åæ¨å›å»ï¼š âœ adb push D:/hosts/hosts /system/etc/hosts è¿™ä¹Ÿæ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ ADB å‘½ä»¤ï¼Œç”¨äºå°†æœ¬åœ°çš„æ–‡ä»¶å¤åˆ¶åˆ°æ‰‹æœºï¼š âœ adb push {æœ¬æœºæ–‡ä»¶è·¯å¾„} {æ‰‹æœºç›®å½•} è¿™é‡Œè¿˜æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„ç‚¹ï¼Œä¸åŒäº Windows å’Œ macOSï¼Œåœ¨ Android ä¸­ä¿®æ”¹ Hosts ä¸€å®šè¦åœ¨æ–‡ä»¶æœ«å°¾å¢åŠ ä¸€ä¸ªç©ºè¡Œï¼Œå‡å¦‚ä½ æ²¡æœ‰è¿½åŠ ï¼ŒHosts ä¸ä¼šç”Ÿæ•ˆï¼Œè€Œå½“ä½ é‡æ–°å°† Android è®¾å¤‡çš„ Hosts æ–‡ä»¶æ‹‰åˆ°æœ¬åœ°ä½ åˆä¼šç¡®è®¤è‡ªå·±å·²ç»ä¿®æ”¹äº†ï¼Œå¦‚æ­¤æ­»å¾ªç¯å¯¼è‡´ä½ æ ¹æœ¬å‘ç°ä¸äº†é—®é¢˜ã€‚ é‚£è¿™ä¸ªé—®é¢˜æˆ‘æ˜¯å¦‚ä½•å‘ç°çš„å‘¢ï¼Ÿ å¾ˆç®€å•ï¼Œä¸é€šè¿‡æ‹‰å–æ–‡ä»¶æ¥æŸ¥çœ‹ï¼Œå› ä¸ºä½ åœ¨ç”µè„‘æ¨åˆ°æ‰‹æœºçš„æ–‡ä»¶ï¼Œå†æ‹‰å›åˆ°ç”µè„‘ï¼Œä¾ç„¶æ˜¯ç¬¦åˆç”µè„‘çš„è§„èŒƒçš„ï¼Œä½ éœ€è¦çŸ¥é“ Android æ˜¯å¦‚ä½•å¤„ç†è¿™ä¸ª Hosts æ–‡ä»¶çš„ã€‚ ä¾ç„¶éœ€è¦é€šè¿‡ adb å‘½ä»¤æ¥æŸ¥çœ‹æ‰‹æœºä¸Šçš„ Hosts æ–‡ä»¶ï¼š âœ adb shell âœ cat /system/etc/hosts è§£é‡Šä¸€ä¸‹ï¼Œadb shell å¾ˆç®€å•ï¼Œå°±æ˜¯è¿›å…¥ Shell æ¨¡å¼ï¼Œä¹‹å‰åœ¨ã€Android Device Monitor æƒé™ç¬”è®°ã€ä¸­ä¹Ÿä½¿ç”¨è¿‡äº†ã€‚ ä½ å¯èƒ½ä¼šå¥½å¥‡ï¼Œåœ¨ã€Android Device Monitor æƒé™ç¬”è®°ã€ä¸­æ‰§è¡Œå®Œ adb shell åè¿˜éœ€æ‰§è¡Œ su æ¥åˆ‡æ¢è‡³è¶…çº§ç®¡ç†å‘˜ï¼Œä¸ºä»€ä¹ˆè¿™é‡Œä¸éœ€è¦å‘¢ï¼Ÿ å› ä¸ºå¤§éƒ¨åˆ†æ¨¡æ‹Ÿå™¨é»˜è®¤å°±å·²ç»å¼€å¯ ROOT äº†æ‰€ä»¥ä¸éœ€è¦ su æ¥è·å– ROOT æƒé™ï¼š è¿›å…¥ Shell åé€šè¿‡ cat å‘½ä»¤æ¥æŸ¥çœ‹æ–‡ä»¶å†…å®¹ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŸ¥è¯¢ç»“æœå¦‚ä¸‹ï¼š å‡å¦‚æ·»åŠ å®Œå†…å®¹åï¼Œä¸è¿½åŠ ä¸€ä¸ªç©ºè¡Œï¼Œä¼šå¾—åˆ°å¦‚ä¸‹ç»“æœï¼š å‘ç°äº†å—ï¼Œä¸‹ä¸€æ¡å‘½ä»¤çš„è¾“å…¥ä½ç½®è·Ÿåœ¨äº†æœ€åä¸€è¡Œ Hosts å†…å®¹ä¹‹åï¼Œè¿™å°±æ˜¯å¯¼è‡´ Hosts ä¸ç”Ÿæ•ˆçš„åŸå› ï¼Œæ‰€ä»¥ä¸€å®šè¦ç¡®ä¿ Hosts æ–‡ä»¶æœ€åä¸€è¡Œä¸ºç©ºè¡Œã€‚ å¯¹æ–‡ä»¶çš„ push å’Œ pull æœ‰ç‚¹å¤ªéº»çƒ¦ï¼Œæˆ‘æ›´å–œæ¬¢ç”¨å‘½ä»¤æ¥åšå†™å…¥æ“ä½œï¼š âœ adb shell âœ echo -e \\\\n &gt;&gt; /system/etc/hosts âœ echo ***.***.***.*** www.domain.com &gt;&gt; /system/etc/hosts é€šè¿‡ echo å†™å…¥ä¸€ä¸ªæ¢è¡Œç¬¦ \\nï¼Œè¿™ä¸ªç¨‹åºå‘˜éƒ½ä¸é™Œç”Ÿäº†ï¼Œå®é™…ä¸Šè¿™ä¸ªæ¢è¡Œç¬¦ä¸æ˜¯å¿…é¡»çš„ï¼Œä¸è¿‡æ˜¯ä¸ºäº†é˜²æ­¢åŸ Hosts æœ«å°¾æ²¡æœ‰æ¢è¡Œç½¢äº†ï¼Œå†æŠŠå¯¹åº”çš„ Hosts å†™å…¥ï¼Œä½¿ç”¨è¿™æ¡å‘½ä»¤è¿½åŠ  Hosts ä¼šè‡ªåŠ¨åœ¨æ–‡ä»¶æœ«å°¾è¿½åŠ ä¸€ä¸ªç©ºè¡Œï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒä¼šå‡ºç°ä¸Šé¢çš„é—®é¢˜ã€‚å¦‚æœè¦å¢åŠ å¤šä¸ª Hosts åˆ™é‡å¤æœ€åè¿™æ­¥å³å¯ã€‚ å‰é¢ç”¨æ¥æŸ¥çœ‹æ–‡ä»¶å†…å®¹çš„ cat è¿™ä¸ªå‘½ä»¤æ˜¯å¦çœ‹èµ·æ¥æœ‰äº›è®¸ç†Ÿæ‚‰ï¼Ÿ æ²¡é”™ï¼Œæˆ‘ä»¬ä¹‹å‰åœ¨ã€macOS ä¿®æ”¹ Hostsã€ä¸­ä¹Ÿæœ‰ä½¿ç”¨è¿‡ï¼Œå®é™…ä¸Šï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥ä½¿ç”¨ä¹‹å‰æåˆ°è¿‡çš„ vi å‘½ä»¤åšä¿®æ”¹ï¼š âœ adb shell âœ vi /system/etc/hosts ä¹Ÿæ˜¯ç›¸åŒçš„å‘½ä»¤ï¼Œä½¿ç”¨ i è¿›è¡Œæ’å…¥ä¿®æ”¹ï¼Œç‚¹å‡» Esc é€€å‡ºç¼–è¾‘ï¼Œå†é”®å…¥ :wq å¹¶å›è½¦æ‰§è¡Œä¿å­˜é€€å‡ºã€‚ æˆ‘å°è¯•äº†ä¸€ä¸‹ã€macOS ä¿®æ”¹ Hostsã€ä¸­ä½¿ç”¨è¿‡çš„ nano å‘½ä»¤ï¼Œå‘ç°å¹¶ä¸æ”¯æŒã€‚ å¯¹äºåˆ¤æ–­ Hosts æ–‡ä»¶æ˜¯å¦ç”Ÿæ•ˆï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥åœ¨ Shell ä¸­ç”¨ ping å‘½ä»¤æŸ¥çœ‹ï¼Œæ¯”é€šè¿‡æµè§ˆå™¨æˆ–è€…ç½‘ç»œè¯·æ±‚è¦æ–¹ä¾¿ä¸€äº›ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Edit-Hosts-in-Android/"},{"title":"ã€Android Studioã€å¦‚ä½•å¯¼å…¥ AAR åŒ…","content":"åœ¨ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€å’Œã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ SO åº“ã€ä¹‹åï¼Œç»ˆäºè¿æ¥äº†æœ€é‡è¦çš„ AAR åŒ…äº†ã€‚è‡ªä» Android æ‘†è„±ã€Eclipseã€æ­¥å…¥ã€Android Studioã€æ–°çºªå…ƒä¹‹åï¼ŒARR åŒ…æ‰æ˜¯æ›´åŠ å®Œç¾çš„ç¬¬ä¸‰æ–¹åº“æ–¹æ¡ˆã€‚ ä¸ºä»€ä¹ˆè¿™ä¹ˆè¯´ï¼Ÿ ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä¸€æ–‡ä¸­æåˆ°ï¼ŒJAR çš„å…¨ç§°æ˜¯ Java Archiveï¼Œè€Œ AAR çš„å…¨ç§°åˆ™æ˜¯ Android Archiveï¼Œé«˜ä¸‹ç«‹åˆ¤æœ‰æ²¡æœ‰ï¼Ÿ AAR æ˜¯ä¸€ä¸ª Android åº“é¡¹ç›®çš„äºŒè¿›åˆ¶å½’æ¡£æ–‡ä»¶ï¼Œä½†æ–‡ä»¶æœ¬èº«æ˜¯ä¸€ä¸ªç®€å• ZIP æ–‡ä»¶ã€‚ ç›¸æ¯” JARï¼ŒAAR åŒ…å«äº†æ›´å¤šçš„èµ„æºï¼Œå› ä¸ºå®ƒæ˜¯ä»¥ã€Android Studioã€ä¸­çš„ Module ä¸ºåŸºç¡€å»ºç«‹çš„ã€‚é€šè¿‡è§£å‹ AARï¼Œä½ å¯ä»¥çœ‹åˆ°æœ‰ã€ŒAndroidManifest.xmlã€ã€ã€Œclasses.jarã€ã€ã€ŒR.txtã€ç­‰æ–‡ä»¶ä»¥åŠã€Œresã€ç­‰æ–‡ä»¶å¤¹ï¼ŒåŒæ—¶å®ƒä¹Ÿèƒ½å¤ŸåŒ…å« SO åº“ï¼Œè¿™ä¹Ÿå°±æ„å‘³ç€ AAR èƒ½å¤Ÿæ¯” JAR å’Œ SO æä¾›æ›´åŠ å¼ºå¤§çš„èƒ½åŠ›ï¼Œæ¯”å¦‚ UI åº“ç­‰ï¼Œå¯ä»¥è¯´æ˜¯ Android åº“çš„ä¸‡é‡‘æ²¹å°è£…æ–¹å¼ã€‚ æ—¢ç„¶å¦‚æ­¤ï¼ŒAAR çš„å¯¼å…¥æ–¹å¼å°±ä¸ JAR çš„å¯¼å…¥æœ‰äº›è®¸å·®å¼‚äº†ã€‚ é¦–å…ˆï¼Œå½“ç„¶æ˜¯è¦å°† AAR æ–‡ä»¶æ”¾åˆ°é¡¹ç›®ä¸­ï¼Œè¿™é‡Œä»¥å¼€æºåº“ Glide ä¸ºä¾‹ï¼Œä¸ JAR ç›¸ä¼¼ï¼Œéƒ½æ˜¯æ”¾åœ¨ Module çš„ã€Œlibsã€ç›®å½•ä¸‹ã€‚ æ¥ç€æ˜¯æ·»åŠ ä¾èµ–ï¼ŒåŒæ ·ä¹Ÿæœ‰å¾ˆå¤šç§æ–¹å¼ã€‚ ç¬¬ä¸€ç§ï¼ŒæŒ‡å®šä¾èµ–ã€‚åœ¨ Module çš„ã€Œbuild.gradleã€æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š android { ... repositories { flatDir { dirs 'libs' // å£°æ˜æ·»åŠ libsæ–‡ä»¶å¤¹ä¸ºåº“ } } } dependencies { ... implementation(name: 'glide-4.12.0', ext: 'aar') // æ·»åŠ  aar_file_name.aar æ–‡ä»¶ä¸ºä¾èµ– } å…¶ä¸­ï¼Œimplementation çš„ name å±æ€§ä¸ºè¯¥ ARR çš„æ–‡ä»¶åã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå…³äº repositories çš„é…ç½®åœ¨ç½‘ä¸Šå¾ˆå¤šæ–‡ç« éƒ½è®²å¾—ä¸æ˜ä¸ç™½ï¼Œè¯´åœ¨é¡¹ç›®çš„ã€Œbuild.gradleã€æ–‡ä»¶ä¸­åšä¿®æ”¹ï¼Œè¿™ç§åšä¸»å¤§æ¦‚ç‡æ²¡æœ‰ææ¸…æ¥šã€Android Studioã€ä¸­ Project å’Œ Module çš„æ¦‚å¿µå°±å‡ºæ¥è¯¯äººå­å¼Ÿï¼Œæ‰€ä»¥ä¸€å®šè¦è®°ä½æ˜¯åœ¨ Module çš„ã€Œbuild.gradleã€æ–‡ä»¶ä¸­åšä¿®æ”¹ï¼Œå¦åˆ™å°†ä¼šå¯¼è‡´ ARR ä¸èƒ½æ­£å¸¸ä½¿ç”¨ã€‚ ç¬¬äºŒç§æ–¹æ³•ï¼Œä¹Ÿæ˜¯æŒ‡å®šä¾èµ–ï¼Œå’Œ JAR ç±»ä¼¼ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ç›´æ¥ä¾èµ– AARï¼š dependencies { ... implementation files('libs/glide-4.12.0.aar') } ç¬¬ä¸‰ç§ï¼Œå…¨éƒ¨ä¾èµ–ã€‚ä¹Ÿå’Œ JAR ç±»ä¼¼ï¼ŒåŒæ ·æ˜¯åœ¨ Module çš„ã€Œbuild.gradleã€æ–‡ä»¶ä¸­åŠ å…¥ä»¥ä¸‹å†…å®¹ï¼š dependencies { implementation fileTree(dir: 'libs', include: ['*.jar','*.aar']) ... } å¯ä»¥çœ‹åˆ°è¿™ç§æ–¹å¼æ›´åŠ ç®€æ´ï¼Œç›´æ¥æ‰©å…… dependencies ä¸­çš„ fileTree ä½¿å…¶ include åŸæœ‰çš„ JAR æ–‡ä»¶å¹¶åŠ å…¥ AAR æ–‡ä»¶ã€‚ ç¬¬å››ç§ï¼Œä½œä¸º Module å¯¼å…¥ï¼Œè¿™ç§æ–¹æ³•æ­¥éª¤ç¨å¤æ‚ä¸€äº›ã€‚ é¦–å…ˆæ–°å»ºä¸€ä¸ª Moduleï¼š é€‰æ‹©ã€ŒImport .JAR/.AAR Packageã€ï¼š å¡«å…¥ AAR æ–‡ä»¶è·¯å¾„ï¼š å®Œæˆåã€Android Studioã€ä¼šç”Ÿæˆä¸€ä¸ª Module æ–‡ä»¶å¤¹ï¼š æœ€åï¼Œåœ¨éœ€è¦å¼•ç”¨çš„ Module ä¸­å°†è¯¥ Module å¯¼å…¥ï¼š dependencies { ... implementation project(':glide-4.12.0') } ä½†ä½¿ç”¨è¯¥æ–¹æ³•æ— æ³•ç›´æ¥ä»è°ƒç”¨å¤„ç‚¹å‡»æŸ¥çœ‹æºç ï¼Œä¸ªäººæ„Ÿè§‰ä¸å¤ªæ–¹ä¾¿ã€‚ æœ€åï¼Œè¿˜è¦ä»‹ç»ä¸€ç§éå¸¸è§„çš„ä½¿ç”¨æ–¹å¼ï¼Œè¿™ç§æ–¹å¼åœ¨æˆ‘åšæ¸¸æˆæ¸ é“æ‰“åŒ…çš„æ—¶å€™ä¹Ÿæ¯”è¾ƒå¸¸ç”¨ã€‚ ä¸Šæ–‡æåˆ° AAR åœ¨è§£å‹ä¹‹åä¹Ÿæœ‰ä¸€ä¸ª JAR æ–‡ä»¶ï¼Œå®é™…ä¸Š AAR å°±æ˜¯ JAR åŠ ä¸Šå…¶ä»–èµ„æºçš„æ‰©å……ã€‚æ‰€ä»¥å½“æˆ‘ä»¬æ‹¿åˆ°ä¸€ä¸ª AAR åŒ…æ—¶ï¼Œå¯ä»¥å°†å…¶è§£å‹ï¼Œç„¶åä½¿ç”¨ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä¸­çš„æ–¹æ³•å°† JAR åŒ…å¯¼å…¥ï¼Œå¹¶å°†å…¶ä»–èµ„æºæ–‡ä»¶å¤åˆ¶åˆ° Module ä¸­çš„å„ä¸ªå¯¹åº”çš„ç›®å½•ä¸‹å³å¯ï¼Œéµå¾ªæ— åˆ™å¤åˆ¶æœ‰åˆ™è¿½åŠ çš„åŸåˆ™ï¼Œå¦‚ AAR ä¸­çš„ã€ŒAndroidManifest.xmlã€ä¸­åŒ…å«çš„å£°æ˜ï¼Œå°±è¦è¿½åŠ åˆ° Module çš„ã€ŒAndroidManifest.xmlã€ä¸­å»ï¼›å¦‚ AAR ä¸­çš„ Layout æ–‡ä»¶ï¼Œä¸€èˆ¬ç›´æ¥å¤åˆ¶åˆ° Module ç›¸åŒçš„æ–‡ä»¶å¤¹ã€‚ è¿™ç§æ–¹æ³•å…¶å®åœ¨ã€Eclipseã€ä¸Šä½¿ç”¨è¾ƒå¤šï¼Œå› ä¸ºã€Eclipseã€ä»…æ”¯æŒå¯¼å…¥ JAR è€Œä¸æ”¯æŒ AARï¼Œæ‰€ä»¥æ‰ä¼šç”¨åˆ°è¿™ç§æ–¹å¼ï¼Œè¿™ç§æ–¹å¼æ˜¯æ ¹æ® Android çš„æ‰“åŒ…åˆå¹¶åŸç†å¾—å‡ºçš„ã€‚ è‡³äºè¿™å‡ ç§æ–¹æ³•çš„ä½¿ç”¨æ—¶æœºï¼Œå¯ä»¥å‚è€ƒä¹‹å‰çš„ã€Android Gradle Plugin ä¾èµ–é¡¹é…ç½®ã€ä¸€æ–‡ï¼Œä»¥åŠè‡ªå·±é¡¹ç›®çš„å®é™…æƒ…å†µï¼Œåˆç†ä½¿ç”¨ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Import-AAR-in-Android-Studio/"},{"title":"macOS ä¿®æ”¹ Hosts","content":"ä¹‹å‰ã€Windows ä¿®æ”¹ Hostsã€ä»‹ç»äº†å¦‚ä½•åœ¨ Windows å¹³å°ä¿®æ”¹ Hostsï¼Œä»Šå¤©æ¥èŠèŠå¦‚ä½•åœ¨ macOS å¹³å°ä¿®æ”¹ Hostsã€‚ é¦–å…ˆä¾ç„¶æ˜¯æ‰¾åˆ° Hostsï¼ŒmacOS ç³»ç»Ÿçš„ Hosts æ–‡ä»¶è·¯å¾„ä¸º Macintosh HD/private/etc/hostsï¼š ç”±äºç³»ç»Ÿæ–‡ä»¶ç®¡ç†å™¨ã€Finderã€å¹¶ä¸ä¼šåƒ Windows ä¸€æ ·æ–¹ä¾¿åœ°ä»ã€æ­¤ç”µè„‘ã€è¿›å…¥ï¼Œæ‰€ä»¥æˆ‘ä»¬å…¶å®è¿˜èƒ½é€šè¿‡ã€Finderã€èœå•ã€Œå‰å¾€æ–‡ä»¶å¤¹ã€åŠŸèƒ½ç›´æ¥è¿›å…¥ã€‚ åœ¨ã€Œå‰å¾€æ–‡ä»¶å¤¹ã€ä¸­è¾“å…¥ /etc/hosts å¹¶ç‚¹å‡»ã€Œå‰å¾€ã€å³å¯ç›´è¾¾ã€‚ æ‰¾åˆ° Hosts åä¾ç„¶å¯ä»¥é€šè¿‡ä»»ä½•æ–‡æœ¬ç¼–è¾‘å™¨å¯¹å…¶è¿›è¡Œä¿®æ”¹ï¼Œä½†éœ€è¦æ³¨æ„ï¼Œetc æ–‡ä»¶å¤¹çš„é»˜è®¤æƒé™ä¸ºã€Œåªè¯»ã€ï¼š å½“ä½ å°è¯•ä¿®æ”¹ Hosts æ–‡ä»¶æ—¶ï¼Œç³»ç»Ÿä¼šå¼¹å‡ºå¦‚ä¸‹æç¤ºï¼š æˆ‘ä»¬å¯ä»¥å°† Hosts æ–‡ä»¶å¤åˆ¶åˆ°æ¡Œé¢è¿›è¡Œä¿®æ”¹ï¼Œä¿®æ”¹å®Œæˆåå†å¤åˆ¶åˆ°åŸç›®å½•ä¸‹è¦†ç›–å³å¯ï¼Œè¦†ç›–æ—¶ä¼šè¦æ±‚è¾“å…¥å¯†ç æˆ–è§¦æ§ IDï¼Œéƒ½æ˜¯ä¸ºäº†é˜²æ­¢ç”¨æˆ·è¯¯æ“ä½œã€‚ æ—¢ç„¶æ˜¯ etc æ–‡ä»¶å¤¹æƒé™åŸå› ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä¿®æ”¹è¯¥æ–‡ä»¶å¤¹çš„æƒé™æ¥ç›´æ¥ç¼–è¾‘ Hosts æ–‡ä»¶ã€‚ å°† etc æ–‡ä»¶å¤¹ä¸­ã€Œeveryoneã€çš„æƒé™è®¾ç½®ä¸ºã€Œè¯»ä¸å†™ã€ä¾¿å¯ç›´æ¥ç¼–è¾‘ Hosts æ–‡ä»¶ï¼Œç¼–è¾‘å®Œæˆåè®°å¾—è¦å°†è¯¥æƒé™æ”¹å›æ¥ã€‚ æ—¢ç„¶éƒ½ç”¨ä¸Š Mac äº†ï¼Œé‚£å°±å†ä»‹ç»ä¸€ä¸ªæ¯”è¾ƒ Geek çš„ä¿®æ”¹æ–¹å¼ï¼Œç”¨å‘½ä»¤æ¥ä¿®æ”¹ã€‚ æ‰“å¼€ã€Terminalã€ï¼Œè¾“å…¥å‘½ä»¤ï¼š âœ sudo vi /etc/hosts å…¶ä¸­ sudo è¡¨ç¤ºä»¥ç³»ç»Ÿç®¡ç†è€…çš„èº«ä»½æ‰§è¡ŒæŒ‡ä»¤ï¼Œç”±äºé»˜è®¤æƒ…å†µä¸‹ç”¨æˆ·å¯¹ etc ç›®å½•çš„æƒé™ä¸ºã€Œåªè¯»ã€ï¼Œè€Œã€Œç³»ç»Ÿã€çš„æƒé™ä¸ºã€Œè¯»ä¸å†™ã€ï¼Œæ‰€ä»¥é€šè¿‡è¯¥å‘½ä»¤å¯ä»¥å¾—åˆ°å†™æƒé™ï¼Œvi åˆ™è¡¨ç¤ºè¦ç¼–è¾‘ï¼Œåé¢å°±æ˜¯ Hosts æ–‡ä»¶è·¯å¾„ã€‚ æ‰§è¡Œè¯¥å‘½ä»¤åï¼Œä¼šè¦æ±‚è¾“å…¥æœ¬æœºå¯†ç ï¼Œè¾“å…¥å®Œæˆå¹¶å›è½¦å°±å¯ä»¥ç›´æ¥åœ¨ã€Terminalã€ä¸­å¯¹ Hosts æ–‡ä»¶è¿›è¡Œç¼–è¾‘ã€‚ ç¼–è¾‘éœ€è¦ç”¨åˆ° vi å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¾ˆå¤æ‚ï¼Œé€šè¿‡æ–¹å‘é”®ç§»åŠ¨å…‰æ ‡ï¼Œé”®å…¥ i ä»£è¡¨æ’å…¥ï¼ˆINSERTï¼‰ï¼Œéšå³è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼Œç¼–è¾‘å®Œæˆåï¼Œç‚¹å‡» Esc é€€å‡ºç¼–è¾‘ï¼Œå†é”®å…¥ :wq å¹¶å›è½¦æ‰§è¡Œä¿å­˜é€€å‡ºï¼ŒHosts æ–‡ä»¶å³ä¿®æ”¹å®Œæˆã€‚ é™¤äº† viï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç”¨ nano æ¥ä¿®æ”¹ï¼ŒåŒæ ·åœ¨ã€Terminalã€ä¸­è¾“å…¥å‘½ä»¤ï¼š âœ sudo nano /etc/hosts æ‰§è¡Œå®ŒååŒæ ·è¦æ±‚è¾“å…¥å¯†ç è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒåŒæ—¶ã€Terminalã€åº•éƒ¨è¿˜ä¼šå±•ç¤ºå¿«æ·é”®ä»‹ç»ï¼Œä¼¼ä¹æ¯” vi è¦æ–¹ä¾¿ä¸€äº›ã€‚ è¿›å…¥åä¸å†éœ€è¦å…¶ä»–å‘½ä»¤ï¼Œå¯ç›´æ¥ç¼–è¾‘æ¨¡å¼ï¼Œç¼–è¾‘å®Œæˆåç‚¹å‡» Control + O ä¿å­˜ï¼Œæç¤ºã€ŒFile Name to Write: /etc/hostsã€ï¼Œå›è½¦ç¡®è®¤ï¼Œå†æŒ‰ Control + X é€€å‡ºã€‚ å½“ä½ æœ‰å¤§é‡çš„ Hosts å†…å®¹éœ€è¦æ·»åŠ æ—¶ï¼Œç”¨ä¸Šé¢è¿™ä¸¤ä¸ªå‘½ä»¤ä¼¼ä¹å¹¶ä¸æ˜¯æ€ä¹ˆæ–¹ä¾¿ï¼Œè€Œä¿®æ”¹æ–‡ä»¶å¤¹æƒé™æˆ–è€…æ–‡ä»¶å‰¯æœ¬å´åˆä¸€ç‚¹éƒ½ä¸ Geekï¼Œé‚£å¯ä»¥è€ƒè™‘å¦ä¸€ç§æ–¹å¼ã€‚ å…ˆå°†éœ€è¦è¿½åŠ çš„ Hosts å†…å®¹å†™åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ã€Œhosts.txtã€ï¼Œç„¶åæ‰§è¡Œå‘½ä»¤ï¼š âœ sudo -s âœ cat ~/hosts.txt&gt;&gt;/etc/hosts cat å‘½ä»¤ç”¨äºåœ¨æœ«å°¾è¿½åŠ ï¼Œ&gt;&gt; å‰é¢çš„æ˜¯æˆ‘ä»¬éœ€è¦è¿½åŠ çš„ Hosts å†…å®¹æ–‡ä»¶è·¯å¾„ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±æ”¾åœ¨å½“å‰ç”¨æˆ·ç›®å½•ä¸­ï¼Œ&gt;&gt; åé¢çš„æ˜¯æº Hosts æ–‡ä»¶çš„è·¯å¾„ï¼Œè¿™æ ·å°±èƒ½å¤Ÿå°† Hosts ä»ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ä¸­è¿½åŠ åˆ°ç³»ç»Ÿ Hosts æ–‡ä»¶ä¸­ã€‚ ä»¥ä¸Šå°±æ˜¯ macOS ä¿®æ”¹ Hosts çš„äº”ç§æ–¹æ³•ï¼ŒåŒ Windows ä¸€æ ·ï¼Œä¿®æ”¹äº† Hosts æ–‡ä»¶åä¹Ÿæœ‰å¯èƒ½ä¼šå‡ºç°ä¸ç«‹é©¬ç”Ÿæ•ˆçš„æƒ…å†µï¼ŒåŒæ ·æ˜¯éœ€è¦åˆ·æ–° DNS ç¼“å­˜ï¼š âœ sudo killall -HUP mDNSResponder ä¸ Windows å¹³å°çš„å‘½ä»¤æ˜¯ä¸ä¸€æ ·çš„ï¼Œç”±äºä½¿ç”¨äº† sudo æ‰€ä»¥åŒæ ·è¦è¾“å…¥æœ¬æœºå¯†ç ã€‚ æœ€åé™„ä¸Š macOS å¹³å°ä¸‹åŸå§‹çš„ Hosts æ–‡ä»¶å†…å®¹ï¼š ## # Host Database # # localhost is used to configure the loopback interface # when the system is booting. Do not change this entry. ## 127.0.0.1 localhost 255.255.255.255 broadcasthost ::1 localhost åŸºæœ¬ä¸ Windows å¹³å°ä¸‹ä¸€è‡´ï¼Œåªä¸è¿‡å°†å‡ ä¸ª localhost å–æ¶ˆäº†æ³¨é‡Šç½¢äº†ï¼Œå¦‚æœæ€€ç–‘ä½ çš„ Hosts æ–‡ä»¶è¢«ç—…æ¯’æˆ–æœ¨é©¬ä¿®æ”¹ï¼Œå¯å¤åˆ¶ä»¥ä¸Šå†…å®¹ä¿®å¤ Hosts æ–‡ä»¶ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Edit-Hosts-in-macOS/"},{"title":"å†™ä¸ªè„šæœ¬ç»™ Windows è‡ªåŠ¨æ·»åŠ  Hosts","content":"ä¹‹å‰èŠåˆ°ã€Windows ä¿®æ”¹ Hostsã€çš„æ­¥éª¤ï¼Œç›¸ä¿¡å·²ç»èƒ½å¤Ÿå¸®åŠ©å¾ˆå¤šæ™®é€šç”¨æˆ·å­¦ä¼šå¦‚ä½•åœ¨è‡ªå·±çš„ç”µè„‘ä¸Šä¿®æ”¹ Hosts äº†ï¼Œä½†æ˜¯ä¿®æ”¹ Hosts æ¯•ç«Ÿä¸æ˜¯ä¸€ä¸ªåŸºæœ¬æŠ€èƒ½ï¼Œå³ä½¿æˆ‘ä»¬å†åŠªåŠ›çš„ç§‘æ™®ï¼Œæ€»æœ‰äººä¸ä¼šã€‚ è€Œä½œä¸ºç½‘ç«™ç®¡ç†å‘˜ç»å¸¸æ”¶åˆ°çš„åé¦ˆæ˜¯ï¼Œä¸€äº›å†…éƒ¨ç½‘ç«™åˆ‡æ¢äº†ç½‘ç»œç¯å¢ƒä¹‹åæ‰“ä¸å¼€ç­‰ç­‰ï¼Œé’ˆå¯¹è¿™äº›å¯¹äº’è”ç½‘è®¤çŸ¥éƒ½åªåœç•™åœ¨ç¤¾äº¤çœ‹å‰§æ¸¸æˆç­‰å¼€ç®±å³ç”¨çš„å°ç™½ï¼Œæˆ‘ä»¬çœŸçš„å¾ˆéš¾è·Ÿä»–ä»¬è§£é‡Šä»€ä¹ˆæ˜¯ Hostsï¼Œä¸ºä»€ä¹ˆç½‘ç«™çªç„¶æ‰“ä¸å¼€ï¼Œä»–ä»¬æ»¡è„‘å­åªæœ‰ä¸€ä¸ªæƒ³æ³•ï¼šä½ çš„ç½‘ç«™å‡ºé—®é¢˜äº†ã€‚ ä¸ºäº†è®©è¿™ç¾¤éæŠ€æœ¯äººå‘˜é—­å˜´ï¼Œæœ€å¥½çš„æ–¹æ³•å°±æ˜¯èƒ½å¤Ÿç®€åŒ–æ“ä½œæµç¨‹ï¼Œå‡å°‘æ“ä½œæ­¥éª¤ã€‚å—¯æ²¡é”™ï¼ŒæŠ€æœ¯äººå‘˜é©¬ä¸Šå°±èƒ½è„±å£è€Œå‡ºï¼šå†™ä¸ªè„šæœ¬ã€‚ è€ƒè™‘åˆ°å¤§å¤šæ•°æ™®é€šç”¨æˆ·éƒ½æ˜¯ä½¿ç”¨ Windows ç³»ç»Ÿçš„ï¼Œé‚£å°±å†™ä¸€ä¸ªé’ˆå¯¹ Windows å¹³å°çš„è„šæœ¬å‘—ï¼Œæ·»åŠ  Hosts æ˜¯ä¸€ä¸ªéå¸¸ç®€å•çš„æ“ä½œï¼Œæ‰“å¼€æ–‡ä»¶è¿½åŠ æ–‡æœ¬å³å¯ï¼Œæ‰€ä»¥æˆ‘å†³å®šç›´æ¥å†™æ‰¹å¤„ç†è„šæœ¬ã€‚ @echo off set &quot;raw=185.199.108.133 raw.githubusercontent.com&quot; set &quot;gist=140.82.112.4 gist.github.com&quot; set &quot;api=140.82.112.6 api.github.com&quot; call :add call :add call :add &quot;%raw%&quot; call :add &quot;%gist%&quot; call :add &quot;%api%&quot; goto :eof :add findstr /i /c:&quot;%~1&quot; C:\\Windows\\System32\\Drivers\\etc\\hosts if errorlevel 1 ( &gt;&gt;C:\\Windows\\System32\\Drivers\\etc\\hosts echo,%~1 ) è¿™æ®µä»£ç å¯ä»¥åˆ†ä¸ºä¸‰ä¸ªéƒ¨åˆ†ã€‚ é¦–å…ˆå®šä¹‰äº† 3 ä¸ªå˜é‡ï¼Œåˆ†åˆ«å¯¹åº” 3 æ¡ Hosts å†…å®¹ï¼Œè¿™é‡Œæˆ‘ä»¥ Github çš„éƒ¨åˆ†åŸŸåä¸¾ä¾‹ã€‚ ç„¶åå°†å…¶æŒ‰é¡ºåºè¿½åŠ ï¼Œæˆ‘åœ¨è¿™é‡Œå…ˆè¿½åŠ ä¸¤ä¸ªæ¢è¡Œï¼Œå†è¿½åŠ  Hosts å†…å®¹ï¼Œå…¶å®æ¢è¡Œå¹¶ä¸æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºé»˜è®¤æƒ…å†µä¸‹ï¼ŒHosts æ–‡ä»¶åœ¨æœ«å°¾ç•™ä¸€ä¸ªç©ºè¡Œï¼Œè€Œè¿½åŠ æ¢è¡Œçš„åŸå› æ˜¯ä¸ºäº†é¿å…ç”±äºç”¨æˆ·ä¸ªäººæ“ä½œæ–‡ä»¶æœ«å°¾ç©ºè¡Œä¸åœ¨äº†å¯¼è‡´ç›´æ¥è¿½åŠ åˆ°åŸ Hosts æœ«è¡Œé€ æˆçš„ Hosts å¤±æ•ˆçš„é—®é¢˜ã€‚ æœ€åå°±æ˜¯æ ¹æ®è·¯å¾„æ‰¾åˆ°æ–‡ä»¶è¿›è¡Œæ“ä½œã€‚ è„šæœ¬ç¼–å†™å®Œæˆåï¼Œä¿å­˜å¹¶ä¿®æ”¹æ–‡ä»¶æ ¼å¼ä¸º .bat åç¼€ï¼Œå³æ‰¹å¤„ç†ï¼ˆBatchï¼‰æ–‡ä»¶ç±»å‹ã€‚å°†è¿™ä¸ªæ–‡ä»¶æŒ‚åˆ°ç½‘ç«™ä¸Šï¼Œå½“æ£€æµ‹åˆ°ç”¨æˆ·æ— æ³•æ­£å¸¸è®¿é—®æŸäº›åŸŸåæ—¶ï¼Œæç¤ºä¸‹è½½å¹¶åŒå‡»è¿è¡Œè¿™ä¸ªè„šæœ¬ï¼Œå³å¯è‡ªåŠ¨å¸®ç”¨æˆ·å®Œæˆæ·»åŠ  Hosts çš„æ“ä½œã€‚ ","link":"https://LiarrDev.github.io/post/Auto-Adding-Hosts-in-Windows-with-Batch-Script/"},{"title":"ã€Android Studioã€å¦‚ä½•å¯¼å…¥ SO åº“","content":"ä¹‹å‰çš„æ–‡ç« ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä»‹ç»äº†ä¼ ç»Ÿ JAR åŒ…çš„å¯¼å…¥æ–¹å¼ï¼Œå…¶å® Android å¼€å‘ä¸­è¿˜æœ‰ä¸€ç§ç›¸å¯¹æ¥è¯´ç”¨å¾—æ¯”è¾ƒå°‘ä½†å´ä¾ç„¶ååˆ†é‡è¦çš„åº“ç±»å‹ï¼šSO æ–‡ä»¶ã€‚ ä»€ä¹ˆæ˜¯ SO åº“ SO æ–‡ä»¶ï¼ˆShared Objectï¼‰æ˜¯ Linux ä¸‹å…±äº«åº“æ–‡ä»¶ï¼Œå®ƒçš„æ–‡ä»¶æ ¼å¼è¢«ç§°ä¸º ELF æ–‡ä»¶æ ¼å¼ã€‚ç”±äº Android æ“ä½œç³»ç»Ÿçš„åº•å±‚åŸºäº Linux ç³»ç»Ÿï¼Œæ‰€ä»¥ SO æ–‡ä»¶å¯ä»¥è¿è¡Œåœ¨ Android å¹³å°ä¸Šã€‚ ä¸€èˆ¬æ¥è¯´ï¼ŒSO æ–‡ä»¶å°±ç±»ä¼¼äºå¸¸è¯´çš„åŠ¨æ€é“¾æ¥åº“ï¼ˆDLLï¼Œå³ Dynamic Link Libraryï¼‰, éƒ½æ˜¯ C æˆ– C++ ç¼–è¯‘å‡ºæ¥çš„ã€‚ Android ç³»ç»Ÿä¹ŸåŒæ ·å¼€æ”¾äº† C/C++ æ¥å£ä¾›å¼€å‘è€…å¼€å‘ Native ç¨‹åºã€‚ç”±äºåŸºäºè™šæ‹Ÿæœºçš„ç¼–ç¨‹è¯­è¨€ Java æ›´å®¹æ˜“è¢«äººåç¼–è¯‘ï¼Œå› æ­¤è¶Šæ¥è¶Šå¤šçš„åº”ç”¨å°†å…¶ä¸­çš„æ ¸å¿ƒä»£ç ä»¥ C/C++ ä¸ºç¼–ç¨‹è¯­è¨€ï¼Œå¹¶ä¸”ä»¥ SO æ–‡ä»¶çš„å½¢å¼ä¾›ä¸Šå±‚ Java ä»£ç è°ƒç”¨ï¼Œä»¥ä¿è¯å®‰å…¨æ€§ã€‚ Android ABI ä¸åŒäº Java åˆ©ç”¨è™šæ‹Ÿæœºå®ç°ã€ŒCompile Once, Run AnyWhereã€çš„è·¨å¹³å°çš„ç‰¹æ€§ï¼ŒC/C++ æ˜¯ã€ŒWrite Once, Compile EveryWhereã€çš„ï¼Œè¿™å°±å¯¼è‡´äº†å…¶éœ€è¦é’ˆå¯¹ä¸åŒçš„å¹³å°è¿›è¡Œç¼–è¯‘ã€‚ ç”±äº Android çš„å¼€æºï¼Œä¸åŒçš„å‚å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚åœ¨ä¸åŒçš„ç¡¬ä»¶ä¸Šæ¥å…¥ AOSPï¼Œå› æ­¤ä¸åŒçš„ Android è®¾å¤‡ä½¿ç”¨ä¸åŒçš„ CPUï¼Œè€Œä¸åŒçš„ CPU æ”¯æŒä¸åŒçš„æŒ‡ä»¤é›†ã€‚CPU ä¸æŒ‡ä»¤é›†çš„æ¯ç§ç»„åˆéƒ½æœ‰ä¸“å±çš„ ABIï¼ˆApplication Binary Interfaceï¼Œåº”ç”¨äºŒè¿›åˆ¶æ¥å£ï¼‰ã€‚ ç›®å‰å¸¸è§çš„ ABI æœ‰å¦‚ä¸‹å‡ ç§ï¼š armeabiï¼šç¬¬ 5 ä»£ ARM v5TEï¼Œä½¿ç”¨è½¯ä»¶æµ®ç‚¹è¿ç®—ï¼Œå…¼å®¹æ‰€æœ‰ ARM è®¾å¤‡ï¼Œé€šç”¨æ€§å¼ºï¼Œé€Ÿåº¦æ…¢ï¼ˆåªæ”¯æŒ armeabiï¼‰ã€‚ armeabi-v7aï¼šç¬¬ 7 ä»£ ARM v7ï¼Œä½¿ç”¨ç¡¬ä»¶æµ®ç‚¹è¿ç®—ï¼Œå…·æœ‰é«˜çº§æ‰©å±•åŠŸèƒ½ï¼ˆæ”¯æŒ armeabi å’Œ armeabi-v7aï¼‰ã€‚ arm64-v8aï¼šç¬¬ 8 ä»£ï¼Œ64 ä½ï¼ŒåŒ…å« AArch32ã€AArch64 ä¸¤ä¸ªæ‰§è¡ŒçŠ¶æ€å¯¹åº” 32-bit å’Œ 64-bitï¼ˆæ”¯æŒ armeabi-v7aã€armeabi å’Œ arm64-v8aï¼‰ã€‚ x86ï¼šIntel 32 ä½ï¼Œä¸€èˆ¬ç”¨äºå¹³æ¿ï¼ˆæ”¯æŒ x86 å’Œ armeabi ä½†æ€§èƒ½æœ‰æ‰€æŸè€—ï¼‰ã€‚ x86_64ï¼šIntel 64 ä½ï¼Œä¸€èˆ¬ç”¨äºå¹³æ¿ï¼ˆæ”¯æŒ x86 å’Œ x86_64ï¼‰ã€‚ mipsï¼š32 ä½ï¼Œæ”¯æŒ RISCã€‚ mips64ï¼š64 ä½ï¼Œæ”¯æŒ RISCã€‚ é¡¹ç›®å¯¼å…¥ SO åº“ å› ä¸º SO åº“æ˜¯é’ˆå¯¹ä¸åŒ CPU æ¶æ„ç¼–è¯‘å‡ºæ¥çš„ï¼Œæ‰€ä»¥å…¶å¾€å¾€ä¸ä¼šåƒ JAR ä¸€æ ·åªä¼šç¼–è¯‘ä¸€ä»½ï¼Œè€Œæ˜¯ä¼šé’ˆå¯¹ä¸åŒçš„ ABI ç”Ÿæˆå¤šä¸ª SO åº“ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶ä¹Ÿéœ€è¦å¾€é¡¹ç›®ä¸­å¯¼å…¥å¤šä¸ª SO æ–‡ä»¶ã€‚ ç”±äºåŒ…å« SO æ–‡ä»¶çš„å¼€æºæ¡†æ¶å¹¶ä¸ååˆ†å¸¸è§ï¼Œæˆ‘åœ¨è¿™é‡Œå°±ä»¥ vivo ç½‘æ¸¸è”è¿ SDK ä¸ºä¾‹è¿›è¡Œä»‹ç»ã€‚ é¦–å…ˆå°†å…¶æä¾›çš„ SDK å‹ç¼©æ–‡ä»¶ä¸‹è½½åˆ°æœ¬åœ°ï¼Œå¹¶å¯¹å…¶è§£å‹ï¼Œå¾—åˆ°å¦‚ä¸‹ç›®å½•ï¼š å¯ä»¥çœ‹åˆ°ï¼Œvivo ç½‘æ¸¸è”è¿ SDK æä¾›äº† armeabiã€armeabi-v7aã€arm64-v8aã€x86 å’Œ x86_64 å…±äº”ç§æ¶æ„çš„æ”¯æŒï¼ŒSO æ–‡ä»¶åˆ†åˆ«ä»¥åŒåçš„æ–¹å¼ä½äºè¿™äº”ä¸ªæ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™ä¸æˆ‘ä»¬çš„ res ç±»å‹åŒåæ–‡ä»¶å­˜æ”¾æ–¹å¼æ˜¯ç›¸ä¼¼çš„ã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥å¯¼å…¥äº†ï¼Œã€Android Studioã€ä¸­ SO åº“çš„å¯¼å…¥æœ‰ä¸‰ç§æ–¹å¼ã€‚ é€šè¿‡ libs ç›®å½•å¯¼å…¥ ç†è®ºä¸Šï¼Œã€Android Studioã€ä¸­æ‰€æœ‰çš„åº“æ–‡ä»¶éƒ½å¯ä»¥æ‰”è¿›ã€Œlibsã€ç›®å½•ï¼Œæ­£å¦‚ä¹‹å‰ä»‹ç»è¿‡çš„ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä¸€èˆ¬ã€‚ å°† SO æ–‡ä»¶åŠä¸Šå±‚æ–‡ä»¶å¤¹å¤åˆ¶åˆ° Module çš„ã€Œlibsã€ç›®å½•ä¸‹ï¼š ç”±äº Java ä»£ç è°ƒç”¨ SO åº“æ¶‰åŠåˆ°è·¨è¯­è¨€äº¤äº’ï¼Œæ‰€ä»¥å¿…é¡»é€šè¿‡ JNIï¼ˆJava Native Interfaceï¼‰è¿›è¡Œï¼ŒåŒæ—¶ï¼Œé€šè¿‡ JNI äº¤äº’çš„æ–‡ä»¶ä¹Ÿå¿…é¡»é€šè¿‡æ ‡è¯†æ‰èƒ½è¢«ã€Android Studioã€å¤„ç†ï¼Œå› æ­¤è¿˜éœ€è¦åœ¨ Module çš„ã€Œbuild.gradleã€ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š android { ... sourceSets { main { jniLibs.srcDirs = ['libs'] } } } åŒæ­¥ä¹‹åå³å¯åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ã€‚ åˆ‡æ¢è‡³ã€ŒAndroidã€è§†å›¾ä¸‹ï¼Œä½ è¿˜å¯ä»¥å‘ç°ã€Android Studioã€å°†å…¶è¯†åˆ«ä¸ºã€ŒjniLibsã€æ–‡ä»¶å¤¹ï¼š é€šè¿‡ jniLibs ç›®å½•å¯¼å…¥ é™¤äº†å°†ã€Œlibsã€ç›®å½•æŒ‡å®šä¸ºã€ŒjniLibsã€æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä¸º SO åº“åˆ›å»ºä¸“é—¨çš„ã€ŒjniLibsã€ç›®å½•ã€‚ åœ¨ /src/main ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªåä¸ºã€ŒjniLibsã€çš„æ–‡ä»¶å¤¹ï¼Œå°† SO æ–‡ä»¶åŠä¸Šå±‚æ–‡ä»¶å¤¹å¤åˆ¶åˆ°è¯¥ç›®å½•å³å¯ï¼š ç”±äºæ–‡ä»¶å¤¹çš„åç§°å·²ç»åšäº†æ ‡è¯†ï¼Œæ‰€ä»¥æˆ‘ä»¬æ— éœ€æ·»åŠ ä»£ç å‘ŠçŸ¥ã€Android Studioã€å»å¤„ç†ã€‚ ä»¥ JAR åŒ…çš„æ–¹å¼å¯¼å…¥ è¿™ç§æ–¹å¼æ¯”è¾ƒå°‘è§ã€‚ æˆ‘ä»¬å¯ä»¥å°† SO åº“æŒ‰ç…§å¦‚ä¸‹ç›®å½•ç»“æ„å‹ç¼©æˆ JARï¼Œä¹‹å‰ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä¸€æ–‡ä¹Ÿæåˆ°ï¼ŒJAR æ˜¯ä»¥ ZIP æ ¼å¼æ„å»ºçš„ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ä»»ä½•å‹ç¼©å·¥å…·ç”šè‡³æ˜¯å‘½ä»¤æ¥å‹ç¼©ã€‚ ç„¶åæŒ‰ç…§ã€ã€ŒAndroid Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…ã€ä¸€æ–‡æ‰€æåˆ°çš„æ–¹æ³•ï¼Œè·Ÿå¯¼å…¥æ™®é€š JAR åŒ…ä¸€æ ·å¯¼å…¥å³å¯ã€‚ å½“ä¸åŒåº“å…¼å®¹çš„ ABI ä¸ä¸€è‡´ ç”±äºç³»ç»Ÿä¼šæ ¹æ® CPU æ¶æ„å»è¿è¡Œä¸åŒçš„ SO åº“ï¼Œåœ¨å®é™…å¼€å‘é¡¹ç›®ä¸­ï¼Œå‡å¦‚æˆ‘ä»¬å¼•ç”¨äº†å…¶ä»–ç¬¬ä¸‰åº“ï¼Œè€Œè¿™ä¸ªåº“å¯èƒ½å…¼å®¹çš„ ABI ä¸å·²æœ‰çš„ä¸ä¸€è‡´ï¼Œå°±ä¼šäº§ç”Ÿé—®é¢˜ã€‚ ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚ä¸Šæ–¹ä¸¾ä¾‹çš„ vivo ç½‘æ¸¸è”è¿ SDK å…¼å®¹äº† armeabiã€armeabi-v7aã€arm64-v8aã€x86 å’Œ x86_64 äº”ç§æ¶æ„ï¼Œæˆ‘ç°åœ¨å¼•å…¥å¾®ä¿¡è¯­éŸ³è¯†åˆ« SDKï¼Œå‘ç°å…¶æ”¯æŒ armeabi-v7aã€armeabiã€mips å’Œ x86 å››ç§æ¶æ„ï¼Œå¯¼å…¥åæ¯ä¸ªæ–‡ä»¶å¤¹ä¸­çš„ SO æ–‡ä»¶å¹¶ä¸å¯¹ç­‰ï¼Œè¿è¡Œåˆ°æŸäº›è®¾å¤‡ä¸Šå°±ä¼šå´©æºƒã€‚ å› ä¸ºå½“åº”ç”¨è¿è¡Œæ—¶ï¼Œè®¾å¤‡ä¼šæœ‰å…ˆæŸ¥çœ‹ä¸ CPU åŒ¹é…çš„æœ€ä¼˜ ABIï¼Œå¦‚æœæ²¡æœ‰ï¼Œæ‰ä¼šå»æŸ¥æ‰¾å…¶ä»– ABIï¼Œå½“ CPU ä¸ ABI åŒ¹é…ä¸Šåï¼Œåº”ç”¨ä»…ä¼šè¯»å–è¯¥ ABI ä¸‹çš„ SO åº“ï¼Œå…¶ä»– ABI ä¼šç›´æ¥è¢«æ— è§†ï¼Œå‡è‹¥è¯¥ ABI ç¼ºå¤±äº†å¯¹åº”çš„ SO åº“ï¼Œè¿è¡Œåˆ°å¯¹åº”ä»£ç æ—¶å°±ä¼šå´©æºƒã€‚ æ‰€ä»¥ï¼Œé‡åˆ°è¿™ç§æƒ…å†µæ—¶ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ ABI åšå¤„ç†ã€‚ ä»…ä¿ç•™äº¤é›† ABI è¿™ç§è§£å†³æ–¹æ³•éå¸¸ç®€å•ç²—æš´ï¼Œå°±æ˜¯å–äº¤é›†ï¼Œä»…ä¿ç•™æ‰€æœ‰åº“éƒ½æ”¯æŒçš„ ABIï¼Œå…¶ä»–æ–‡ä»¶å¤¹éƒ½åˆ é™¤ã€‚ æ¯”å¦‚ä¸Šæ–¹ä¸¾ä¾‹æåˆ°çš„ä¸¤ä¸ªç¬¬ä¸‰æ–¹ SDKï¼Œå–äº¤é›†åå¯ä»¥ä¿ç•™ armeabiã€armeabi-v7a å’Œ x86 ä¸‰ç§ ABIã€‚ å½“ç„¶ï¼Œè€ƒè™‘åˆ°å¸‚é¢ä¸Šè®¾å¤‡å æ¯”ä»¥åŠç›®æ ‡ç”¨æˆ·åˆ†å¸ƒï¼Œä½ ç”šè‡³å¯ä»¥ä»…ä¿ç•™ armeabi-v7a ä¸€ç§ ABIã€‚ å°†å·²æœ‰çš„ SO æ–‡ä»¶å¤åˆ¶åˆ°å…¶ä»– ABI ç›®å½• å‰é¢æåˆ°ï¼Œarm64-v8a æ˜¯å…¼å®¹ armeabi-v7a å’Œ armeabi çš„ï¼Œæ‰€ä»¥ï¼Œä½ è¿˜å¯ä»¥å°†å…¶å¤åˆ¶åˆ°ç©ºç¼ºçš„æ–‡ä»¶å¤¹ã€‚ æ¯”å¦‚å°†å¾®ä¿¡è¯­éŸ³è¯†åˆ« SDK ä¸­ armeabi ä¸‹çš„ SO æ–‡ä»¶å¤åˆ¶åˆ° arm64-v8a ä¸‹ï¼Œå°±å¯ä»¥ä½¿å…¶æ”¯æŒ arm64-v8a äº†ã€‚ ABI Filters éƒ¨åˆ†ç¬¬ä¸‰æ–¹åº“ä½ è¿˜å¯èƒ½æ˜¯é€šè¿‡è¿œç¨‹ä¾èµ–çš„ï¼Œè¿™æ—¶å€™å¯¹ä¸åŒ SDK çš„ ABI å¤„ç†å°±ä¼šå˜å¾—å¤æ‚ï¼Œä½†æˆ‘ä»¬å…¶å®å¯ä»¥é€šè¿‡ Gradle æ¥æ“ä½œã€‚ åœ¨ Module çš„ã€Œbuild.gradleã€ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š android { ... defaultConfig { ... ndk { abiFilters 'armeabi', 'arm64-v8a', 'x86' } } } è¿™æ ·ï¼Œã€Android Studioã€å°±å¯ä»¥é’ˆå¯¹æˆ‘ä»¬æŒ‡å®šçš„ ABI è¿›è¡Œæ„å»ºäº†ã€‚ å‚è€ƒå†…å®¹ Android ABIs | Android NDK | Android Developers ","link":"https://LiarrDev.github.io/post/How-to-Import-SO-in-Android-Studio/"},{"title":"Windows ä¿®æ”¹ Hosts","content":"ä¹‹å‰ã€ä¸€æ–‡å¸¦ä½ ç®€å•äº†è§£ Hostsã€ç§‘æ™®äº† Hosts ç›¸å…³å†…å®¹ï¼Œè¿™æ¬¡å°±æ•™å¤§å®¶å¦‚ä½•ä¿®æ”¹ Hostsã€‚ è€ƒè™‘åˆ°å¤§å¤šæ•°ç”¨æˆ·æœ€å¸¸ç”¨çš„éƒ½æ˜¯ Windows ç³»ç»Ÿï¼Œæ‰€ä»¥å°±å…ˆæ¥ä»‹ç» Windows ä¸‹ä¿®æ”¹ Hosts çš„æ–¹æ³•ï¼Œåˆ«æ‹…å¿ƒï¼Œå…¶ä»–ç³»ç»Ÿåé¢æœ‰æœºä¼šä¹Ÿä¼šä»‹ç»ã€‚ è¦ä¿®æ”¹ Hostsï¼Œé‚£é¦–å…ˆå¾—æ‰¾åˆ° Hosts æ–‡ä»¶ã€‚å¤§å¤šæ•°æƒ…å†µä¸‹ï¼ŒHosts æ–‡ä»¶çš„è·¯å¾„ä¸ºï¼šC:\\Windows\\System32\\drivers\\etc\\hostsã€‚ Hosts æ–‡ä»¶å¯ä»¥ç”¨ä»»ä½•æ–‡æœ¬ç¼–è¾‘å·¥å…·æ‰“å¼€ï¼Œå¦‚è®°äº‹æœ¬ç­‰ã€‚ Windows å¹³å°ä¸‹åŸå§‹çš„ Hosts æ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š # Copyright (c) 1993-2009 Microsoft Corp. # # This is a sample HOSTS file used by Microsoft TCP/IP for Windows. # # This file contains the mappings of IP addresses to host names. Each # entry should be kept on an individual line. The IP address should # be placed in the first column followed by the corresponding host name. # The IP address and the host name should be separated by at least one # space. # # Additionally, comments (such as these) may be inserted on individual # lines or following the machine name denoted by a '#' symbol. # # For example: # # 102.54.94.97 rhino.acme.com # source server # 38.25.63.10 x.acme.com # x client host # # localhost name resolution is handled within DNS itself. # 127.0.0.1 localhost # ::1 localhost å¦‚æœä½ æ€€ç–‘ä½ çš„ Hosts æ–‡ä»¶è¢«ç—…æ¯’æˆ–æœ¨é©¬ä¿®æ”¹ï¼Œå¯å¤åˆ¶ä»¥ä¸Šå†…å®¹ä¿®å¤ Hosts æ–‡ä»¶ã€‚ å€¼å¾—ä¸€æçš„æ˜¯ï¼Œæ¯è¡Œ # åé¢çš„å†…å®¹éƒ½æ˜¯æ³¨é‡Šï¼Œæ‰€ä»¥å®é™…ä¸Šæ¸…ç©º Hosts å†…å®¹å¯¹ç³»ç»Ÿæ­£å¸¸è¿è¡Œå¹¶æ²¡æœ‰ä»€ä¹ˆå½±å“ã€‚ Hosts ä¸€èˆ¬ç”±ç½‘ç«™çš„ç®¡ç†å‘˜æä¾›ï¼Œå½“ç„¶ä¹Ÿæœ‰ä¸€äº›ç‰¹æ®Šé€”å¾„ï¼ŒHosts çš„è·å–ä¸åœ¨æœ¬æ–‡çš„ä»‹ç»èŒƒå›´ï¼Œä¸€äº›å…¬å…±çš„ç½‘ç«™ IP ä½ å¯ä»¥å°è¯•ä½¿ç”¨ã€IPAddress.comã€ç­‰ç¬¬ä¸‰æ–¹å·¥å…·æŸ¥è¯¢ã€‚ å½“ä½ éœ€è¦æ·»åŠ  Hosts çš„æ—¶å€™åªéœ€è¦åœ¨æ–‡ä»¶çš„æœ«å°¾è¿½åŠ å³å¯ï¼ŒHosts ç”± IP å’ŒåŸŸåå…±åŒç»„æˆï¼Œå¦‚ï¼š 172.217.8.249 developer.android.com ä¿®æ”¹å®Œæˆåä¿å­˜å³å¯ã€‚ æœ‰æ—¶å€™ä½ ä¼šé‡åˆ°æ— æ³•ç›´æ¥ä¿®æ”¹ç³»ç»Ÿ Hosts æ–‡ä»¶çš„æƒ…å†µï¼Œå¯ä»¥é€šè¿‡å°† Hosts æ–‡ä»¶å¤åˆ¶åˆ°æ¡Œé¢ï¼Œä¿®æ”¹å®Œæˆåå†è¦†ç›–æ¥è§£å†³ã€‚ è¿˜æœ‰å¯èƒ½ä¼šå‡ºç°ä¸èƒ½è¦†ç›–çš„æƒ…å†µï¼Œè¿™å¯èƒ½æ¶‰åŠåˆ°æƒé™é—®é¢˜ï¼Œåº”æ£€æŸ¥å½“å‰ç™»å½•è´¦å·çš„æƒé™ï¼Œä»¥åŠæ–‡ä»¶çš„è¯»å†™æƒé™ç­‰ã€‚ éœ€è¦æ³¨æ„ï¼ŒHosts æ–‡ä»¶é…ç½®çš„æ˜ å°„æ˜¯é™æ€çš„ï¼Œå¦‚æœç½‘ç»œä¸Šçš„è®¡ç®—æœºæ›´æ”¹äº†è¯·åŠæ—¶æ›´æ–° IP åœ°å€ï¼Œå¦åˆ™å°†ä¸èƒ½è®¿é—®ã€‚ æœ€åï¼Œç›¸ä¿¡æœ‰äº›æœ‹å‹ä¼šé‡åˆ°ä¿®æ”¹ Hosts åä¸ç”Ÿæ•ˆçš„æƒ…å†µï¼Œä¸€èˆ¬æ˜¯ç”±äº DNS ç¼“å­˜çš„åŸå› å¯¼è‡´çš„ã€‚ ç³»ç»Ÿä¸ºäº†åŠ å¿«ç”¨æˆ·æ‰“å¼€ç½‘ç«™çš„é€Ÿåº¦ï¼Œåœ¨é¦–æ¬¡è®¿é—®ç½‘ç«™æˆåŠŸä¹‹åï¼Œä¼šæŠŠ DNS è§£æçš„ç»“æœæš‚æ—¶æ€§åœ°ä¿å­˜åœ¨æœ¬åœ°ç¼“å­˜ï¼ˆç§°ä¸º DNS ç¼“å­˜ï¼‰é‡Œä¸€å°æ®µæ—¶é—´ï¼Œå¦‚æœæµè§ˆå™¨åœ¨è¿™æ®µæ—¶é—´é‡Œå†æ¬¡æ‰“å¼€åŒä¸€ä¸ªç½‘å€ï¼Œåˆ™ä¼šè‡ªåŠ¨ä» DNS ç¼“å­˜é‡Œå–å‡ºç»“æœï¼Œè€Œä¸ä¼šè¯·æ±‚è¿œç¨‹çš„ DNS æœåŠ¡å™¨ï¼Œä¹Ÿä¸ä¼šæŸ¥è¯¢ Hosts æ–‡ä»¶ï¼Œä»è€ŒèŠ‚çœæ—¶é—´æé«˜æ‰“å¼€é€Ÿåº¦ã€‚ å› æ­¤å¦‚æœé‡åˆ°ä¿®æ”¹äº† Hosts æ–‡ä»¶ä½†å¹¶ä¸ç”Ÿæ•ˆçš„æƒ…å†µï¼Œå°±åˆ·æ–°ä¸€ä¸‹ç³»ç»Ÿçš„ DNS ç¼“å­˜å³å¯ã€‚ Windows å¹³å°åªéœ€æ‰“å¼€ä»»ä¸€å‘½ä»¤è¡Œç»ˆç«¯ï¼Œå¦‚ã€CMDã€æˆ–ã€Windows PowerShellã€ç­‰ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š âœ ipconfig /flushdns å¯ä»¥çœ‹åˆ°è¿”å›â€œå·²æˆåŠŸåˆ·æ–° DNS è§£æç¼“å­˜â€ï¼Œä»£è¡¨åˆ·æ–°æˆåŠŸï¼Œå¦‚æœè¿˜æ˜¯ä¸è¡Œï¼Œå°±é‡å¯å¤§æ³•å¥½å§ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Edit-Hosts-in-Windows/"},{"title":"ã€Android Studioã€å¦‚ä½•å¯¼å…¥ JAR åŒ…","content":"å¼€å‘ä¸­æˆ‘ä»¬å¸¸å¸¸ä¼šéœ€è¦ç”¨åˆ°ç¬¬ä¸‰æ–¹åº“æ¥å®ç°æŸäº›åŠŸèƒ½ï¼Œå¯ä»¥é¿å…é‡å¤é€ è½®å­ï¼Œæé«˜å¼€å‘æ•ˆç‡ã€‚ åœ¨ Android ä¸­ï¼ŒJAR åŒ…å¯ä»¥è¯´æ˜¯ä¸€ä»£å…ƒè€äº†ï¼Œå› ä¸ºåœ¨ 2017 Google IO å¤§ä¼šä»¥å‰ï¼ŒJava ä½œä¸ºå”¯ä¸€çš„ Android åŸç”Ÿå¼€å‘è¯­è¨€ï¼Œä»¥åŠåœ¨ã€Eclipseã€çš„ç»Ÿæ²»ä¸‹ï¼ŒJAR åŒ…æ˜¯æœ€é€šç”¨çš„ç¬¬ä¸‰æ–¹åº“æµé€šæ–¹å¼ã€‚ JAR æ˜¯ä¸€ç§å½’æ¡£æ–‡ä»¶ï¼Œä»¥ ZIP æ ¼å¼æ„å»ºï¼Œå…¨ç§°æ˜¯ Java Archiveã€‚ä¸ ZIP ä¸åŒçš„æ˜¯ï¼ŒJAR ä¸ä»…ç”¨äºå‹ç¼©å’Œå‘å¸ƒï¼Œè€Œä¸”è¿˜ç”¨äºéƒ¨ç½²å’Œå°è£…åº“ã€ç»„ä»¶å’Œæ’ä»¶ç¨‹åºï¼Œå¹¶å¯è¢«åƒç¼–è¯‘å™¨å’Œ JVM è¿™æ ·çš„å·¥å…·ç›´æ¥ä½¿ç”¨ã€‚åœ¨ JAR ä¸­åŒ…å«ç‰¹æ®Šçš„æ–‡ä»¶ï¼Œå¦‚ Manifest å’Œéƒ¨ç½²æè¿°ç¬¦ï¼Œç”¨æ¥æŒ‡ç¤ºå·¥å…·å¦‚ä½•å¤„ç†ç‰¹å®šçš„ JARã€‚ æ­£æ˜¯ç”±äºè¿‡å»åå‡ å¹´ã€Eclipseã€çš„å½±å“ï¼Œåœ¨ã€Android Studioã€ä¸­å¯¼å…¥ JAR åŒ…ä¹Ÿéå¸¸ç®€å•ã€‚ é¦–å…ˆï¼Œå½“ç„¶è¦å°† JAR æ–‡ä»¶æ”¾åˆ°é¡¹ç›®ä¸­ï¼Œç½®äº Module çš„ã€Œlibsã€ç›®å½•ä¸‹ï¼Œæˆ‘è¿™é‡Œä»¥å¼€æºåº“ Gson ä¸ºä¾‹ã€‚ åœ¨ã€ŒAndroidã€è§†å›¾ä¸‹ï¼Œã€Œlibsã€ç›®å½•æ˜¯é»˜è®¤ä¸æ˜¾ç¤ºçš„ï¼š æˆ‘ä»¬æ— éœ€æ–°å»ºè¯¥æ–‡ä»¶å¤¹ï¼Œåªéœ€åˆ‡è‡³ã€ŒProjectã€è§†å›¾å³å¯ï¼š æ¥ç€æ˜¯æ·»åŠ ä¾èµ–ï¼Œå°† JAR å¤åˆ¶åˆ°ã€Œlibsã€ç›®å½•åï¼Œé¼ æ ‡å¯¹è¯¥ JAR åŒ…å³é”®èœå•ï¼Œç‚¹å‡»ã€ŒAdd As Library...ã€ï¼š å¹¶é€‰æ‹©å¯¼å…¥çš„ Moduleï¼š ç¡®å®šåï¼ŒGradle ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åŒæ­¥ä¾èµ–ã€‚ ä½ å¯ä»¥çœ‹åˆ° Module çš„ã€Œbuild.gradleã€æ–‡ä»¶ä¸­è‡ªåŠ¨æ·»åŠ äº†å¯¹åº”çš„å†…å®¹ï¼š dependencies { ... implementation files('libs/gson-2.8.6.jar') } å½“ä½ æœ‰å¤šä¸ª JAR åŒ…éœ€è¦å¯¼å…¥æ—¶ï¼Œå…¶å®å¹¶ä¸éœ€è¦å¯¹æ¯ä¸ª JAR åŒ…éƒ½è¿›è¡Œä¸Šè¿°æ“ä½œï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸€è¡Œä»£ç å¯¼å…¥è¯¥ Module ä¸‹æ‰€æœ‰ JAR åŒ…ï¼š dependencies { implementation fileTree(dir: 'libs', include: ['*.jar']) ... } è¿™è¡Œä»£ç çš„æ„æ€å°±æ˜¯å°†ã€Œlibsã€ç›®å½•ä¸‹æ‰€æœ‰çš„ JAR æ–‡ä»¶æ·»åŠ ä¾èµ–ï¼Œåªéœ€åœ¨æ·»åŠ  JAR åŒ…ååŒæ­¥ Gradle å³å¯ã€‚ ä½ å¯èƒ½ä¼šæƒ³ï¼Œé‚£ç›´æ¥ç”¨ç¬¬äºŒç§æ–¹æ³•ä¸å°±å¥½äº†å—ï¼Œå¤šæ–¹ä¾¿æ˜¯ä¸æ˜¯ï¼Ÿ è¿™å°±è¦è€ƒè™‘ Module çš„ä¾èµ–ä¼ é€’å…³ç³»äº†ï¼Œå¯ä»¥å‚è€ƒã€Android Gradle Plugin ä¾èµ–é¡¹é…ç½®ã€ä¸€æ–‡ï¼Œå½“æœ‰å¤šä¸ª JAR åŒ…éœ€è¦å¯¼å…¥ï¼Œä½†éœ€è¦ä½¿ç”¨ä¸åŒçš„ä¾èµ–é¡¹é…ç½®æ—¶ï¼Œå°±éœ€è¦åˆ†åˆ«å¯¼å…¥ã€‚ æ‰€ä»¥åº”å½“æ ¹æ®åˆé€‚çš„åœºæ™¯ä½¿ç”¨åˆé€‚çš„å¯¼å…¥æ–¹å¼ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Import-JAR-in-Android-Studio/"},{"title":"Android Gradle Plugin ä¾èµ–é¡¹é…ç½®","content":"åš Android å¼€å‘å¿…å®šä¼šä¾èµ–ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚å¸¸ç”¨çš„å¦‚ç½‘ç»œè¯·æ±‚æ¡†æ¶ OkHttpã€å›¾ç‰‡åŠ è½½æ¡†æ¶ Glide ç­‰ï¼Œå³ä½¿ä½ å®Œå…¨é‡‡ç”¨åŸç”Ÿ API æ¥å¼€å‘ï¼Œä¹Ÿä¼šä¾èµ– AppCompat æˆ–è€… Support ä¹‹ç±»çš„å®˜æ–¹åº“ã€‚ ä»¥å‰ Android å¼€å‘æ˜¯åœ¨ã€Eclipseã€ä¸Šè¿›è¡Œçš„ï¼Œå¼€å‘è€…ä½¿ç”¨ç¬¬ä¸‰æ–¹åº“å¾€å¾€éœ€è¦æ‰‹åŠ¨ä¸‹è½½ Jar åŒ…å†åˆ°ã€Eclipseã€å†…å¼•ç”¨ï¼Œåœ¨ã€Android Studioã€æ¨å‡ºåï¼Œå¾—ç›Šäº Gradle æ„å»ºå·¥å…·ï¼Œæˆ‘ä»¬åªéœ€åœ¨ Gradle æ–‡ä»¶ä¸­ç”¨ä½¿ç”¨ä¸€è¡Œä»£ç å³å¯å°†ç¬¬ä¸‰æ–¹åº“ä»è¿œç¨‹ç«™ç‚¹ä¾èµ–åˆ°é¡¹ç›®ä¸­ï¼Œååˆ†æ–¹ä¾¿ã€‚ æˆ‘ä»¬å¼•ç”¨ä¾èµ–ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨ implementation é…ç½®ä¾èµ–é¡¹ï¼Œçš„ç¡®å¤§å¤šæ•°ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£çš„ Usage éƒ½æ˜¯è¿™ä¹ˆå†™çš„ï¼Œå¤§å¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬è¿™ä¹ˆç”¨ä¹Ÿæ²¡é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬ä¾ç„¶éœ€è¦äº†è§£å…¶ä»–çš„ä¾èµ–é¡¹é…ç½®ã€‚ implementation é¦–å…ˆæˆ‘ä»¬ä»æœ€ç†Ÿæ‚‰çš„ implementation å¼€å§‹ï¼Œä¸ºä»€ä¹ˆ implementation æ˜¯ç»å¤§å¤šæ•°ç¬¬ä¸‰æ–¹åº“æ–‡æ¡£æ‰€ä»‹ç»çš„é…ç½®æ–¹å¼ï¼ŒåŒæ—¶ä¹Ÿæ˜¯ã€Android Studioã€çš„é»˜è®¤é…ç½®æ–¹å¼ï¼Ÿ åŸå› å…¶å®å¾ˆç®€å•ï¼Œä¸å…¶ä»–é…ç½®æ–¹å¼ç›¸æ¯”ï¼Œæ­¤ä¾èµ–é¡¹é…ç½®å¯ä»¥æ˜¾è‘—ç¼©çŸ­æ„å»ºæ—¶é—´ï¼Œå› ä¸ºè¿™æ ·å¯ä»¥å‡å°‘æ„å»ºç³»ç»Ÿéœ€è¦é‡æ–°ç¼–è¯‘çš„ Module æ•°ã€‚ å½“ implementation ä¾èµ–é¡¹æ›´æ”¹äº†å…¶ APIï¼ŒGradle åªä¼šé‡æ–°ç¼–è¯‘è¯¥ä¾èµ–é¡¹ä»¥åŠç›´æ¥ä¾èµ–äºå®ƒçš„ Moduleã€‚åŒæ—¶ï¼Œè¯¥ Module åœ¨ç¼–è¯‘æ—¶ä¸ä¼šå°†è¯¥ä¾èµ–é¡¹æ³„éœ²ç»™å…¶ä»– Moduleï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå…¶ä»– Module åªæœ‰åœ¨è¿è¡Œæ—¶æ‰èƒ½ä½¿ç”¨è¯¥ä¾èµ–é¡¹ã€‚ api å½“ä¸€ä¸ª Module åŒ…å« api ä¾èµ–é¡¹æ—¶ï¼Œè¯¥ Module ä¼šä»¥ä¼ é€’æ–¹å¼å°†è¯¥ä¾èµ–é¡¹å¯¼å‡ºåˆ°å…¶ä»– Moduleï¼Œä»¥ä¾¿è¿™äº› Module åœ¨è¿è¡Œæ—¶å’Œç¼–è¯‘æ—¶éƒ½å¯ä»¥ä½¿ç”¨è¯¥ä¾èµ–é¡¹ã€‚ æ­¤é…ç½®çš„è¡Œä¸ºç±»ä¼¼äº compileï¼ˆç°å·²å¼ƒç”¨ï¼‰ï¼Œä¼šä»¥ä¼ é€’æ–¹å¼å¯¼å‡ºåˆ°å…¶ä»–ä¸Šæ¸¸æ¶ˆè´¹è€…ã€‚ å…¶ä¸ implementation çš„æœ€å¤§åŒºåˆ«åœ¨äºèƒ½å¦è¢«ä¸Šæ¸¸æ¶ˆè´¹è€…è°ƒç”¨ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å‡è®¾ Module X åŒæ—¶ä¾èµ– Library A å’Œ Library Bï¼Œè€Œ Library A é€šè¿‡ implementation å¼•ç”¨ Library Cï¼Œè€Œ Library B åˆ™ä½¿ç”¨ api å¼•ç”¨ Library Dã€‚ è¿™æ—¶å€™ï¼ŒModule X æ˜¯ä¸èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ Library C çš„ï¼Œä½†å´èƒ½å¤Ÿç›´æ¥ä½¿ç”¨ Library Dã€‚å› ä¸º implementation å¯ä»¥è®© Module åœ¨ç¼–è¯‘æ—¶â€œéšè—â€è‡ªå·±ä½¿ç”¨çš„ä¾èµ–ï¼Œè€Œ api åˆ™ä¼šâ€œä¼ é€’â€è‡ªå·±çš„ä¾èµ–ã€‚ åŒæ—¶ï¼Œå¦‚æœ api ä¾èµ–é¡¹æ›´æ”¹äº†å…¶å¤–éƒ¨ APIï¼ŒGradle ä¼šåœ¨ç¼–è¯‘æ—¶é‡æ–°ç¼–è¯‘æ‰€æœ‰æœ‰æƒè®¿é—®è¯¥ä¾èµ–é¡¹çš„ Moduleï¼Œå› æ­¤ï¼Œæ‹¥æœ‰å¤§é‡çš„ api ä¾èµ–é¡¹ä¼šæ˜¾è‘—å¢åŠ æ„å»ºæ—¶é—´ã€‚ é™¤éè¦å°†ä¾èµ–é¡¹çš„ API å…¬å¼€ç»™å•ç‹¬çš„ Moduleï¼Œå¦åˆ™åº”ä½¿ç”¨ implementation ä¾èµ–é¡¹ã€‚ compileOnly Gradle åªä¼šå°†ä¾èµ–é¡¹æ·»åŠ åˆ°ç¼–è¯‘ç±»è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šå°†å…¶æ·»åŠ åˆ°æ„å»ºè¾“å‡ºã€‚ å¦‚æœæ‚¨åˆ›å»º Module æ—¶åœ¨ç¼–è¯‘æœŸé—´éœ€è¦ç›¸åº”ä¾èµ–é¡¹ï¼Œä½†å®ƒåœ¨è¿è¡Œæ—¶å¯æœ‰å¯æ— ï¼Œæ­¤é…ç½®ä¼šå¾ˆæœ‰ç”¨ã€‚ å¦‚æœæ‚¨ä½¿ç”¨ compileOnlyï¼Œé‚£ä¹ˆæ‚¨çš„ Module å¿…é¡»åŒ…å«ä¸€ä¸ªè¿è¡Œæ—¶æ¡ä»¶ï¼Œç”¨äºæ£€æŸ¥æ˜¯å¦æä¾›äº†ç›¸åº”ä¾èµ–é¡¹ï¼Œç„¶åé€‚å½“åœ°æ”¹å˜è¯¥ Module çš„è¡Œä¸ºï¼Œä»¥ä½¿è¯¥ Module åœ¨æœªæä¾›ç›¸åº”ä¾èµ–é¡¹çš„æƒ…å†µä¸‹ä»å¯æ­£å¸¸è¿è¡Œã€‚ è¿™æ ·åšä¸ä¼šæ·»åŠ ä¸é‡è¦çš„æš‚æ—¶ä¾èµ–é¡¹ï¼Œå› è€Œæœ‰åŠ©äºå‡å°æœ€ç»ˆ APK çš„å¤§å°ã€‚æ­¤é…ç½®çš„è¡Œä¸ºç±»ä¼¼äº providedï¼ˆç°å·²å¼ƒç”¨ï¼‰ã€‚ runtimeOnly Gradle åªä¼šå°†ä¾èµ–é¡¹æ·»åŠ åˆ°æ„å»ºè¾“å‡ºï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶ä½¿ç”¨ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¸ä¼šå°†å…¶æ·»åŠ åˆ°ç¼–è¯‘ç±»è·¯å¾„ã€‚ æ­¤é…ç½®çš„è¡Œä¸ºç±»ä¼¼äº apkï¼ˆç°å·²å¼ƒç”¨ï¼‰ã€‚ annotationProcessor æˆ‘ä»¬åœ¨ä½¿ç”¨ä¸€äº›åŒ…å«æ³¨è§£çš„ç¬¬ä¸‰æ–¹åº“æ—¶ç»å¸¸å¯ä»¥è§åˆ°å®ƒï¼Œæ¯”å¦‚ Dagger ç­‰ã€‚ å¦‚éœ€æ·»åŠ å¯¹ä½œä¸ºæ³¨è§£å¤„ç†å™¨çš„åº“çš„ä¾èµ–ï¼Œå¯ä»¥ä½¿ç”¨ annotationProcessor é…ç½®å°†å…¶æ·»åŠ åˆ°æ³¨è§£å¤„ç†å™¨çš„ç±»è·¯å¾„ã€‚ ä½¿ç”¨æ­¤é…ç½®å¯ä»¥å°†ç¼–è¯‘ç±»è·¯å¾„ä¸æ³¨é‡Šå¤„ç†å™¨ç±»è·¯å¾„åˆ†å¼€ï¼Œä»è€Œæé«˜æ„å»ºæ€§èƒ½ã€‚ lintChecks ä½¿ç”¨æ­¤é…ç½®å¯ä»¥æ·»åŠ æ‚¨å¸Œæœ› Gradle åœ¨æ„å»ºé¡¹ç›®æ—¶æ‰§è¡Œçš„ lint æ£€æŸ¥ã€‚ éœ€è¦æ³¨æ„ï¼Œä½¿ç”¨ Android Gradle Plugin 3.4.0 åŠæ›´é«˜ç‰ˆæœ¬æ—¶ï¼Œæ­¤ä¾èµ–é¡¹é…ç½®ä¸å†å°† lint æ£€æŸ¥æ‰“åŒ…åœ¨ AAR é¡¹ç›®ä¸­ã€‚ lintPublish åœ¨ AAR é¡¹ç›®ä¸­ä½¿ç”¨æ­¤é…ç½®å¯ä»¥æ·»åŠ æ‚¨å¸Œæœ› Gradle ç¼–è¯‘æˆ lint.jar æ–‡ä»¶å¹¶æ‰“åŒ…åœ¨ AAR ä¸­çš„ lint æ£€æŸ¥ã€‚è¿™ä¼šä½¿å¾—ä½¿ç”¨ AAR çš„é¡¹ç›®ä¹Ÿåº”ç”¨è¿™äº› lint æ£€æŸ¥ã€‚ testImplementation åªåœ¨å•å…ƒæµ‹è¯•ä»£ç çš„ç¼–è¯‘ä»¥åŠæœ€ç»ˆæ‰“åŒ…æµ‹è¯• APK æ—¶æœ‰æ•ˆã€‚ é»˜è®¤æ–°å»ºé¡¹ç›®ä¸­ JUnit å°±æ˜¯ä»¥æ­¤é…ç½®ä¾èµ–çš„ï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°é»˜è®¤é¡¹ç›®ç›®å½•ä¸­é™¤äº†æˆ‘ä»¬ä¸€èˆ¬å†™ä¸šåŠ¡ä»£ç çš„ /src/main ç›®å½•å¤–ï¼Œè¿˜æœ‰ /src/test ç›®å½•ä¾›æˆ‘ä»¬å†™æœ¬åœ°å•å…ƒæµ‹è¯•ï¼ŒtestImplementation å°±å¯ä»¥ä¸ºå…¶ Source Set æ·»åŠ ä¾èµ–ã€‚ androidTestImplementation åªåœ¨å•å…ƒæµ‹è¯•ä»£ç çš„ç¼–è¯‘ä»¥åŠæœ€ç»ˆæ‰“åŒ…æµ‹è¯• APK æ—¶æœ‰æ•ˆã€‚ é»˜è®¤æ–°å»ºé¡¹ç›®ä¸­ Espresso å°±æ˜¯ä»¥æ­¤é…ç½®ä¾èµ–çš„ï¼ŒåŒæ—¶å¯ä»¥çœ‹åˆ°é»˜è®¤é¡¹ç›®ç›®å½•ä¸­é™¤äº†æˆ‘ä»¬ä¸€èˆ¬å†™ä¸šåŠ¡ä»£ç çš„ /src/main ç›®å½•å¤–ï¼Œè¿˜æœ‰ /src/androidTest ç›®å½•ä¾›æˆ‘ä»¬å†™ä»ªå™¨åŒ–å•å…ƒæµ‹è¯•ã€UI æµ‹è¯•ç­‰ï¼ŒandroidTestImplementation å°±å¯ä»¥ä¸ºå…¶ Source Set æ·»åŠ ä¾èµ–ã€‚ releaseImplementation / debugImplementation ä»…ä»…é’ˆå¯¹ Release æˆ– Debug æ¨¡å¼çš„ç¼–è¯‘å’Œæœ€ç»ˆçš„ Release / Debug Apk æ‰“åŒ…ã€‚ DiDi å›¢é˜Ÿè‘—åæ¡†æ¶ DoKit å°±æ˜¯ä»¥æ­¤é…ç½®ä¾èµ–çš„ï¼Œå¯ä»¥é’ˆå¯¹ Release å’Œ Debug é‡‡ç”¨ä¸åŒçš„å¤„ç†ã€‚ compile è¯¥é…ç½®å·²å¼ƒç”¨ã€‚ ä¸ api ç±»ä¼¼ï¼ŒGradle ä¼šå°†ä¾èµ–é¡¹æ·»åŠ åˆ°ç¼–è¯‘ç±»è·¯å¾„å’Œæ„å»ºè¾“å‡ºï¼Œå¹¶å°†ä¾èµ–é¡¹å¯¼å‡ºåˆ°å…¶ä»– Moduleã€‚ apk è¯¥é…ç½®å·²å¼ƒç”¨ã€‚ ä¸ runtimeOnly ç±»ä¼¼ï¼ŒGradle åªä¼šå°†ä¾èµ–é¡¹æ·»åŠ åˆ°æ„å»ºè¾“å‡ºï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶ä½¿ç”¨ï¼Œä¸ä¼šå°†å…¶æ·»åŠ åˆ°ç¼–è¯‘ç±»è·¯å¾„ã€‚ provided è¯¥é…ç½®å·²å¼ƒç”¨ã€‚ ä¸ compileOnly ç±»ä¼¼ï¼ŒGradle åªä¼šå°†ä¾èµ–é¡¹æ·»åŠ åˆ°ç¼–è¯‘ç±»è·¯å¾„ï¼Œä¸ä¼šå°†å…¶æ·»åŠ åˆ°æ„å»ºè¾“å‡ºã€‚ å‚è€ƒ æ·»åŠ æ„å»ºä¾èµ–é¡¹ | Android å¼€å‘è€… | Android Developers ","link":"https://LiarrDev.github.io/post/Android-Gradle-Plugin-Dependency-Configurations/"},{"title":"ã€Android Studioã€ç”¨ Gradle å®ç°è‡ªåŠ¨ç­¾å","content":"å½“æˆ‘ä»¬éœ€è¦æ¥å…¥ä¸€äº›ä¸‰æ–¹æˆæƒåŠŸèƒ½æ—¶ï¼Œæä¾›æˆæƒçš„å¹³å°å¾€å¾€éœ€è¦æ ¡éªŒæˆ‘ä»¬ App çš„åˆæ³•æ€§ï¼Œè€Œåº”ç”¨ç­¾åï¼Œå°±æ˜¯æ ¡éªŒåº”ç”¨æ˜¯å¦åˆæ³•çš„æ‰‹æ®µï¼Œå›½å†…åƒæ˜¯ QQ å’Œå¾®ä¿¡æä¾›çš„ç¬¬ä¸‰æ–¹ç™»å½•èƒ½åŠ›ï¼Œå°±æ˜¯é€šè¿‡æ ¡éªŒç­¾åå’ŒåŒ…åæ¥æä¾›æˆæƒçš„ã€‚ åœ¨å¼€å‘è°ƒè¯•æ—¶ï¼Œæˆ‘ä»¬æ€»æ˜¯ä¹ æƒ¯äºä¿®æ”¹å®Œä»£ç åç›´æ¥ Run é¡¹ç›®åˆ°è®¾å¤‡ä¸Šï¼Œå› ä¸ºæ‰“å‡ºä¸€ä¸ª Release åŒ…å†ç­¾åè¿™ä¸ªæ­¥éª¤ä¸€æ—¦é‡å¤æ“ä½œï¼Œä¼šé™ä½æˆ‘ä»¬çš„æ•ˆç‡ï¼Œä½†è°ƒè¯•ï¼Œåˆå…ä¸äº†é¢‘ç¹çš„è¿è¡Œã€‚ æ—¢ç„¶æ— æ³•é¿å…ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½åƒå¹³å¸¸ Debug ä¸€æ ·ï¼Œä¸€é”®æŠŠç­¾åå’Œ Run éƒ½æ‰§è¡Œäº†å‘¢ï¼Ÿ é¦–å…ˆè¦æ˜ç¡®ï¼Œè™½ç„¶å¹³å¸¸ Debug æˆ‘ä»¬åªéœ€è¦ç‚¹å‡»å·¥å…·æ çš„ã€ŒRunã€æŒ‰é’®ï¼Œé¡¹ç›®å°±ä¼šç¼–è¯‘å¹¶è¿è¡Œåˆ°æˆ‘ä»¬çš„è®¾å¤‡ä¸Šï¼Œä½†å®é™…ä¸Šå®ƒä¹Ÿæ˜¯è¿›è¡Œäº†ç­¾åæ“ä½œçš„ã€‚ ã€Android Studioã€é»˜è®¤ä¸ºæˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªç”¨äºè°ƒè¯•çš„ç­¾åï¼Œç›®å½•ä¸º ~/Users/&lt;User&gt;/.android/debug.keystoreï¼Œè¿™æ ·å³ä½¿æˆ‘ä»¬ä¸ä¸ºé¡¹ç›®é…ç½®ä»»ä½•ç­¾åï¼Œé¡¹ç›®ä»èƒ½å¤Ÿä½¿ç”¨è¿™ä¸ªè°ƒè¯•ç­¾åè¿è¡Œåˆ°è®¾å¤‡ä¸­ã€‚ æ ¹æ®æˆ‘ä»¬å¯¹åº”ç”¨ç­¾åçš„ç»éªŒï¼Œé™¤äº†ç­¾åæ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦å¦å¤–ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯ Key store passwordã€Key alias å’Œ Key passwordã€‚ å½“ç„¶ï¼Œè¿™ä¸ªç”¨äºè°ƒè¯•çš„ç­¾åæ–‡ä»¶ä¹Ÿæœ‰ã€‚å…¶ä¸­ Key store password å’Œ Key password çš„å€¼éƒ½ä¸º androidï¼ŒKey alias çš„å€¼ä¸º androiddebugkeyã€‚ ä¸‹é¢ï¼Œæˆ‘å°±ä½¿ç”¨è¿™ä¸ªç”¨äºè°ƒè¯•çš„ç­¾åï¼Œæ¥å®ç°è‡ªåŠ¨ç­¾åçš„æ“ä½œã€‚ é¦–å…ˆæ‰“å¼€ã€ŒProject Structureã€ï¼Œé€‰æ‹©ã€ŒModulesã€ä¸­é€‰æ‹©å¯¹åº”çš„ Module é…ç½®ç­¾åï¼Œæ–°å»ºä¸€ä¸ªç­¾åé…ç½®ï¼š ç„¶åå¡«å†™å¯¹åº”çš„å‚æ•°ï¼š ç¡®è®¤åï¼Œã€Android Studioã€å°±ä¼šåœ¨å¯¹åº” Module çš„ã€Œbuild.gradleã€æ–‡ä»¶ä¸­ä¸ºæˆ‘ä»¬ç”Ÿæˆç­¾åä¿¡æ¯ï¼š android { ... signingConfigs { release { storeFile file('/Users/liarr/.android/debug.keystore') storePassword 'android' keyAlias 'androiddebugkey' keyPassword 'android' } } } è¿™é‡Œæˆ‘ä½¿ç”¨çš„æ˜¯è°ƒè¯•çš„ç­¾åï¼Œå®é™…é¡¹ç›®ä¸­ä¸€èˆ¬ä¸ä¼šé…ç½®æ­¤ç­¾åï¼Œæ‰€ä»¥ç›¸åº”çš„å‚æ•°ä¹Ÿä¸ä¼šä¸€è‡´ã€‚ æœ€åæˆ‘ä»¬è¿˜éœ€é…ç½®ï¼š android { ... buildTypes { release { ... signingConfig signingConfigs.release } debug { ... signingConfig signingConfigs.release } } } è¿™æ ·ï¼Œå½“æˆ‘ä»¬è¿è¡Œé¡¹ç›®æ—¶ï¼Œå®ƒå°±ä¼šé€šè¿‡ Gradle é…ç½®å¯¹æˆ‘ä»¬çš„åº”ç”¨ç­¾åäº†ã€‚ å®é™…ä¸Šï¼Œä½ å®Œå…¨å¯ä»¥æ‰‹åŠ¨åœ¨ Gradle æ–‡ä»¶ä¸­è¾“å…¥ä»¥ä¸Šä»£ç è¿›è¡Œé…ç½®è€Œæ— éœ€ä½¿ç”¨ã€ŒProject Structureã€ã€‚ é…ç½®å®Œæˆåï¼Œä½ ç”šè‡³å¯ä»¥ç›´æ¥ä½¿ç”¨ Gradle Task æ¥å¿«é€Ÿç”Ÿæˆ Debug å’Œ Release çš„å®‰è£…åŒ…ã€‚ å¦å¤–ï¼Œå‡å¦‚æˆ‘ä»¬çš„é¡¹ç›®å­˜å‚¨åœ¨ä»£ç æ‰˜ç®¡å¹³å°æˆ–é€‰æ‹©å¼€æºçš„è¯ï¼Œå°†ç­¾åä¿¡æ¯ç›´æ¥æ˜æ–‡å†™åœ¨ Gradle æ–‡ä»¶ä¸­å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œåº”å½“åˆ›å»ºä¸€ä¸ªå•ç‹¬çš„å±æ€§æ–‡ä»¶æ¥å­˜å‚¨å®‰å…¨ä¿¡æ¯å¹¶åœ¨ç¼–è¯‘æ–‡ä»¶ä¸­å¼•ç”¨è¯¥æ–‡ä»¶ã€‚ æ¯”å¦‚åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºã€Œkeystore.propertiesã€çš„æ–‡ä»¶ã€‚æ­¤æ–‡ä»¶åº”å½“åŒ…å«æ‚¨çš„ç­¾åä¿¡æ¯ï¼š storePassword=android keyPassword=android keyAlias=androiddebugkey storeFile=/Users/liarr/.android/debug.keystore ç„¶ååœ¨ Gradle æ–‡ä»¶ä¸­é…ç½®ï¼š def keystorePropertiesFile = rootProject.file(&quot;keystore.properties&quot;) def keystoreProperties = new Properties() keystoreProperties.load(new FileInputStream(keystorePropertiesFile)) android { ... signingConfigs { config { keyAlias keystoreProperties['keyAlias'] keyPassword keystoreProperties['keyPassword'] storeFile file(keystoreProperties['storeFile']) storePassword keystoreProperties['storePassword'] } } buildTypes { release { ... signingConfig signingConfigs.config } debug { ... signingConfig signingConfigs.config } } } ä¸è¦å¿˜äº†å°†ç­¾åä¿¡æ¯åŠ å…¥å¿½ç•¥æ¸…å•ï¼š # Ignore Signing Config /keystore.properties è¿™æ ·æˆ‘ä»¬çš„ç­¾åä¿¡æ¯å°±æ›´å®‰å…¨äº†ã€‚ å‚è€ƒå†…å®¹ ä¸ºåº”ç”¨ç­¾å | Android å¼€å‘è€… | Android Developers ","link":"https://LiarrDev.github.io/post/Auto-Signing-with-Gradle-in-Android-Studio/"},{"title":"ä¸€æ–‡å¸¦ä½ ç®€å•äº†è§£ Hosts","content":"åœ¨æ—¥å¸¸ä¸Šç½‘ä¸­æˆ‘ç»å¸¸éœ€è¦è·Ÿ Hosts æ‰“äº¤é“ï¼Œæ¯”å¦‚è®¿é—®éƒ¨åˆ†æµ·å¤–ç½‘ç«™ï¼Œæˆ–è€…æ˜¯åœ¨å¤–é¢è®¿é—®å…¬å¸å†…ç½‘ï¼Œåˆæˆ–è€…æ—¥å¸¸å¼€å‘æµ‹è¯•ï¼Œéƒ½éœ€è¦ä¿®æ”¹ Hostsã€‚ ä¸è¦è§‰å¾— Hosts å¾ˆé«˜æ·±ï¼Œè¯´ä¸å®šä½ åœ¨å¹³æ—¶çš„ç½‘ä¸Šå†²æµªä¸­ä¹Ÿä¼šæ¥è§¦åˆ°ã€‚ ä»Šå¤©å°±æ¥ç®€å•ç§‘æ™®ä¸€ä¸‹ Hostsï¼Œè®©å°ç™½ä¹Ÿèƒ½å¤Ÿè½»æ¾äº†è§£å®ƒã€‚ Hosts æ˜¯ä»€ä¹ˆ Hosts æ˜¯ä¸€ä¸ªæ²¡æœ‰æ‰©å±•åçš„ç³»ç»Ÿæ–‡ä»¶ï¼Œå…¶ä½œç”¨å°±æ˜¯å°†ä¸€äº›å¸¸ç”¨çš„ç½‘å€åŸŸåä¸å…¶å¯¹åº”çš„ IP åœ°å€å»ºç«‹ä¸€ä¸ªå…³è”æ•°æ®åº“ï¼Œå½“ç”¨æˆ·åœ¨æµè§ˆå™¨ä¸­è¾“å…¥ä¸€ä¸ªéœ€è¦ç™»å½•çš„ç½‘å€æ—¶ï¼Œç³»ç»Ÿä¼šé¦–å…ˆè‡ªåŠ¨ä» Hosts æ–‡ä»¶ä¸­å¯»æ‰¾å¯¹åº”çš„ IP åœ°å€ï¼Œä¸€æ—¦æ‰¾åˆ°ï¼Œç³»ç»Ÿä¼šç«‹å³æ‰“å¼€å¯¹åº”ç½‘é¡µï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ï¼Œåˆ™ç³»ç»Ÿä¼šå†å°†ç½‘å€æäº¤ DNS åŸŸåè§£ææœåŠ¡å™¨è¿›è¡Œ IP åœ°å€çš„è§£æã€‚ å¦‚æœè¿™æ®µè¯è®²å¾—å¾ˆæ‡µé€¼ï¼Œé‚£æˆ‘ä¸¾ä¸ªä¾‹å­ï¼Œæ¯”å¦‚è¯´ç™¾åº¦çš„ IP æ˜¯ 14.215.177.38ï¼Œè¿™ä¸€ä¸²æ²¡æœ‰ä»»ä½•æ„ä¹‰å’Œè§„å¾‹çš„ä¸œè¥¿å¾ˆéš¾è®°å¯¹å§ï¼Œæ‰€ä»¥ç™¾åº¦å°±æäº†ä¸€ä¸ªåŸŸåå« www.baidu.comï¼Œé‚£ä¹ˆä½ åœ¨æµè§ˆå™¨ä¸­åªéœ€è¦è¾“å…¥è¿™ä¸ªåŸŸåå°±èƒ½å¤Ÿè®¿é—®åˆ°ç™¾åº¦çš„é¦–é¡µã€‚ ä½†æ˜¯å®é™…ä¸Šæµè§ˆå™¨æ˜¯é€šè¿‡ IP åœ°å€æ‰èƒ½æ‰¾åˆ°è¯¥ç½‘ç«™æ‰€åœ¨çš„æœåŠ¡å™¨å¹¶è¿›è¡Œè®¿é—®çš„ã€‚åœ¨ Hosts æ–‡ä»¶ä¸­æ²¡æœ‰æ·»åŠ è¿™ä¸ªæ˜ å°„çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šå…ˆå°†è¿™ä¸ªåŸŸåå‘Šè¯‰ DNS åŸŸåè§£ææœåŠ¡å™¨ï¼Œç„¶åç­‰è§£æå‡º IP åå†è¿›è¡Œè®¿é—®ï¼›è€Œå¦‚æœåœ¨ Hosts ä¸­æ·»åŠ äº†è¿™ä¸ªæ˜ å°„ï¼Œé‚£ä¹ˆå°±å¯ä»¥è·³è¿‡è§£æ IP è¿™ä¸€æ­¥ï¼Œå› ä¸ºå®ƒå¯ä»¥ç›´æ¥ä» Hosts ä¸­è·å–åˆ° IPï¼Œå› æ­¤è®¿é—®é€Ÿåº¦å°±ä¼šå˜å¾—å¿«å¾ˆå¤šã€‚ è®¿é—®ä¸€äº›å—é™åˆ¶çš„ç½‘ç«™ä¹Ÿæ˜¯åŒç†ï¼ŒDNS åŸŸåè§£ææœåŠ¡å™¨è§£æä¸åˆ°å¯¹åº”çš„ IPï¼Œæ‰€ä»¥ä½ ä¹Ÿå°±æ— æ³•æ­£å¸¸è®¿é—®äº†ã€‚ å¯ä»¥è¯´ï¼Œæ“ä½œç³»ç»Ÿçš„ Hosts æ–‡ä»¶åˆ™æ˜¯æœ‰ç€ç±»ä¼¼æœ¬åœ° DNS æœåŠ¡å™¨çš„ä½œç”¨ï¼Œè€Œä¸”æ¯”ç½‘ç»œä¸Šçš„ DNS å…·æœ‰æ›´é«˜çš„ä¼˜å…ˆçº§ã€‚ å¦‚æœè¿™æ ·è§£é‡Šè¿˜æ˜¯ä¸æ˜ç™½ï¼Œé‚£æˆ‘å†æ‰“ä¸ªæ¯”æ–¹ï¼š æœ‰ä¸€ä¸ªåœ°ç‚¹ï¼ŒåŸŸåå°±ç›¸å½“äºè¿™ä¸ªåœ°å€ï¼Œæ¯”å¦‚å¹¿å·å¡”ï¼ŒæŒºå¥½è®°çš„å¯¹å§ï¼Œè€Œ IP å°±ç›¸å½“äºç»çº¬åº¦ï¼Œæ¯”å¦‚æˆ‘å‘Šè¯‰ä½ ä¸œç» 113.32Â°ï¼ŒåŒ—çº¬ 23.11Â°ï¼Œç›¸ä¿¡ä½ æ˜¯å´©æºƒçš„ï¼Œè€Œ Hosts çš„ä½œç”¨å°±æ˜¯ä½ æœ‰ä¸ªå°æœ¬æœ¬è®°å½•åœ°å€å’Œç»çº¬åº¦çš„æ˜ å°„å…³ç³»ï¼Œé‚£ä¹ˆåªè¦æˆ‘å‘Šè¯‰ä½ åœ°å€ï¼Œä½ ä¸éœ€è¦å†å»ç”¨ä¸“ä¸šçš„å·¥å…·æŸ¥ï¼Œè€Œæ˜¯é©¬ä¸Šæ‰“å¼€ä½ çš„å°æœ¬æœ¬ï¼Œç„¶åå°±å¯ä»¥æ ¹æ®ç»çº¬åº¦ç«‹åˆ»åœ¨åœ°å›¾ä¸Šæ‰¾åˆ°å®šä½ï¼Œè¿™å°±æ˜¯æ•ˆç‡ã€‚ è€Œé™åˆ¶è®¿é—®å°±ç›¸å½“äºï¼Œå­˜åœ¨ä¸€ä¸ªå†›äº‹åŸºåœ°ï¼Œä½†æ˜¯ç”±äºå†›äº‹åŸºåœ°æ˜¯ä¿å¯†çš„ï¼Œæ‰€ä»¥ä½ åœ¨åœ°å›¾ä¸Šä¸ä¸€å®šèƒ½æ‰¾åˆ°å®ƒï¼Œè¿™æ—¶å€™ Hosts çš„ä½œç”¨å°±æ˜¯ï¼Œæœ‰ä¸€ä¸ªå†…éƒ¨äººå‘˜å‘Šè¯‰ä½ è¿™ä¸ªå†›äº‹åŸºåœ°çš„ç»çº¬åº¦ï¼Œé‚£ä½ å°±è®°åœ¨äº†å°æœ¬æœ¬ä¸Šï¼Œä¸‹æ¬¡ä½ æƒ³æ‰¾è¿™ä¸ªå†›äº‹åŸºåœ°çš„æ—¶å€™ï¼Œé©¬ä¸Šæ‰“å¼€ä½ çš„å°æœ¬æœ¬ï¼Œå°±æœ‰ç­”æ¡ˆäº†ã€‚ Hosts çš„ä½œç”¨ æ ¹æ®ä¸Šè¿°è¿™æ ·çš„ç‰¹ç‚¹ï¼ŒHosts æ–‡ä»¶å¯ä»¥åº”ç”¨åœ¨å¾ˆå¤šåœºæ™¯ï¼ŒåŒ…æ‹¬ä½†ä¸é™äºä»¥ä¸‹å‡ ç§ï¼š åŠ å¿«åŸŸåè§£æ ä¸Šé¢ä¹Ÿæåˆ°ï¼Œå¯¹äºè¦ç»å¸¸è®¿é—®çš„ç½‘ç«™ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åœ¨ Hosts ä¸­é…ç½®åŸŸåå’Œ IP çš„æ˜ å°„å…³ç³»ï¼Œæé«˜åŸŸåè§£æé€Ÿåº¦ã€‚ç”±äºæœ‰äº†æ˜ å°„å…³ç³»ï¼Œå½“æˆ‘ä»¬è¾“å…¥åŸŸåè®¡ç®—æœºå°±èƒ½å¾ˆå¿«è§£æå‡º IPï¼Œè€Œä¸ç”¨è¯·æ±‚ç½‘ç»œä¸Šçš„ DNS æœåŠ¡å™¨ï¼ŒåŒæ—¶ä¹Ÿèƒ½ç»•è¿‡ DNS æ±¡æŸ“ä¸åŠ«æŒã€‚ æ–¹ä¾¿å±€åŸŸç½‘ç”¨æˆ· åœ¨å¾ˆå¤šå•ä½çš„å±€åŸŸç½‘ä¸­ï¼Œä¼šæœ‰æœåŠ¡å™¨æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚ä½†ç”±äºå±€åŸŸç½‘ä¸­ä¸€èˆ¬å¾ˆå°‘æ¶è®¾ DNS æœåŠ¡å™¨ï¼Œè®¿é—®è¿™äº›æœåŠ¡å™¨æ—¶ï¼Œè¦è¾“å…¥éš¾è®°çš„ IP åœ°å€ï¼Œè¿™å¯¹ä¸å°‘äººæ¥è¯´ç›¸å½“éº»çƒ¦ã€‚ å¯ä»¥åˆ†åˆ«ç»™è¿™äº›æœåŠ¡å™¨å–ä¸ªå®¹æ˜“è®°ä½çš„åå­—ï¼Œç„¶ååœ¨ Hosts ä¸­å»ºç«‹ IP æ˜ å°„ï¼Œè¿™æ ·ä»¥åè®¿é—®çš„æ—¶å€™ï¼Œåªè¦è¾“å…¥è¿™ä¸ªæœåŠ¡å™¨çš„åå­—å°±è¡Œäº†ã€‚ å±è”½ç½‘ç«™ æœ‰å¾ˆå¤šç½‘ç«™ä¸ç»è¿‡ç”¨æˆ·åŒæ„å°±å°†å„ç§å„æ ·çš„æ’ä»¶å®‰è£…åˆ°ä½ çš„è®¡ç®—æœºä¸­ï¼Œå…¶ä¸­æœ‰äº›è¯´ä¸å®šå°±æ˜¯æœ¨é©¬æˆ–ç—…æ¯’ã€‚å¯¹äºè¿™äº›ç½‘ç«™æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ Hosts æŠŠè¯¥ç½‘ç«™çš„åŸŸåæ˜ å°„åˆ°é”™è¯¯çš„ IP æˆ–æœ¬åœ°è®¡ç®—æœºçš„ IPï¼Œè¿™æ ·å°±è¾¾åˆ°å±è”½è®¿é—®çš„æ•ˆæœï¼ŒåŒæ ·ä¹Ÿå¯ä»¥ç”¨äºå±è”½ä¸å¥åº·ç½‘ç«™ã€å±è”½åƒåœ¾å¹¿å‘Šç½‘å€ç­‰ã€‚ è™šæ‹ŸåŸŸå å¾ˆå¤šæ—¶å€™ï¼Œç½‘ç«™å»ºè®¾è€…éœ€è¦æŠŠè½¯ç¯å¢ƒæ­å»ºå¥½ï¼Œå†è¿›è¡Œä¸Šä¼ è°ƒè¯•ã€‚ä½†ç±»ä¼¼äºé‚®ä»¶æœåŠ¡ï¼Œåˆ™éœ€è¦ä½¿ç”¨åŸŸåæ¥è¾…åŠ©è°ƒè¯•ï¼Œè¿™æ—¶å°±å¯ä»¥å°†æœ¬åœ° IP åœ°å€ä¸ä¸€ä¸ªè™šæ‹ŸåŸŸååšåœ°å€æŒ‡å‘ï¼Œå°±å¯ä»¥è¾¾åˆ°è¦æ±‚çš„æ•ˆæœï¼Œä¸”æ— éœ€èŠ±è´¹ã€‚ åŸŸåé‡å®šå‘ å¼€å‘æˆ–æµ‹è¯•åº”ç”¨æ—¶ï¼Œåˆ©ç”¨ Hosts å°†åŸŸåä¸´æ—¶æŒ‡å‘åˆ°æµ‹è¯•æœåŠ¡å™¨ IPï¼Œå¯ä»¥æ–¹ä¾¿è‡ªå·±æµ‹è¯•ï¼ŒåŒæ—¶åˆä¸å½±å“ä»–äººå’Œçº¿ä¸Šçš„åº”ç”¨ã€‚ æ€»ç»“ è¯´äº†é‚£ä¹ˆå¤šï¼Œå…¶å® Hosts å¹¶ä¸ç¥ç§˜ï¼Œç®€å•ç†è§£å®ƒå°±æ˜¯ä¸ªç”µè„‘æœ¬æœºçš„ã€ŒIP åœ°å€ â†” åŸŸåã€çš„å¯¹åº”è¡¨ï¼Œç³»ç»Ÿæˆ–ä»»ä½•è½¯ä»¶éƒ½ä¼šä¼˜å…ˆå…ˆæ£€æŸ¥ Hosts é‡Œé¢æœ‰æ²¡å¯¹åº”çš„é…ç½®ï¼Œä¹‹åæ‰ä¼šå»æŸ¥è¯¢ç½‘ä¸Šçš„ DNS æœåŠ¡å™¨ã€‚ å› æ­¤ä½ å¯ä»¥åˆ©ç”¨ Hosts åšå¾ˆå¤šæœ‰è¶£ã€æœ‰ç”¨çš„äº‹æƒ…ã€‚ å½“ç„¶ï¼Œæœ¬æ–‡åªæ˜¯ä¸€ä¸ªç®€å•çš„ç§‘æ™®ï¼Œè¿½æ ¹æº¯æºå…¶å®è¿˜æœ‰å¾ˆå¤šä¸œè¥¿å¹¶æ²¡æœ‰è¯¦ç»†èŠåˆ°ï¼Œæ¯”å¦‚ DNS ç­‰ï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥è‡ªè¡Œæ·±æŒ–ã€‚ ","link":"https://LiarrDev.github.io/post/A-Brief-Overview-of-Hosts/"},{"title":"Android å¯¹ TextView å’Œ EditText çš„ Drawable ç›‘å¬ç‚¹å‡»","content":"ä¹‹å‰åœ¨ã€Android ä¸º TextView å’Œ EditText æ·»åŠ  ICONã€ä¸€æ–‡ä¸­ä»‹ç»äº†å¦‚ä½•ä¸º TextView å’Œ EditText æ·»åŠ  Drawable ä½œä¸ºæŒ‡ç¤ºï¼Œä½¿äº¤äº’æ›´åŠ å‹å¥½ï¼Œå¼€å‘æ›´æ–¹ä¾¿ï¼Œä½†ä»é—ç•™äº†ä¸€ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬èƒ½å¦ç›‘å¬è¯¥ Drawable çš„ç‚¹å‡»äº‹ä»¶ï¼Ÿ è¿™æ˜¯ä¸€ä¸ªå¾ˆå¸¸è§çš„éœ€æ±‚ï¼Œæ¯”å¦‚åœ¨å¯†ç è¾“å…¥æ¡†ä¸­æ·»åŠ ä¸€ä¸ªç”¨äºåˆ‡æ¢æ˜¯å¦æ˜¾ç¤ºæ˜æ–‡çš„æŒ‰é’®ï¼š ä½ å½“ç„¶å¯ä»¥ä½¿ç”¨ EditText åŠ  ImageButton ç»„åˆçš„æ–¹å¼ï¼Œè¿™ä¸åœ¨æœ¬æ–‡çš„è®¨è®ºèŒƒå›´å†…ã€‚ é‚£ä¹ˆ TextView æˆ–è€…æ˜¯ç»§æ‰¿è‡ª TextView çš„ EditText æœ‰æ²¡æœ‰æä¾›ç›‘å¬ Drawable ç‚¹å‡»äº‹ä»¶çš„æ–¹æ³•å‘¢ï¼Ÿ å¾ˆé—æ†¾ï¼Œå¹¶æ²¡æœ‰ã€‚ å› æ­¤ï¼Œæˆ‘ä»¬éœ€è¦è‡ªå·±å»å®ç°å¯¹åº”çš„ç‚¹å‡»é€»è¾‘ã€‚ å¦‚æœä½ ä¸Šç½‘æœç´¢å¯¹åº”çš„å†…å®¹ï¼Œä»‹ç»çš„æ–‡ç« çœŸä¸å°‘ï¼Œä½ å¤åˆ¶ä¸‹æ¥åˆ°è‡ªå·±çš„é¡¹ç›®ä¸Šè¿è¡Œï¼Œæ•ˆæœæˆ–è®¸ä¹Ÿçš„ç¡®èƒ½å¤Ÿè¾¾åˆ°ä½ çš„é¢„æœŸï¼Œä½†æˆ‘è¿™é‡Œè¦æ³¼ä¸ªå†·æ°´ï¼Œä½ æ‹·è´çš„è¿™ä»½ä»£ç å¾ˆå¯èƒ½æ˜¯é”™çš„â€”â€”è¿™æ˜¯æˆ‘è¸©è¿‡çš„å‘ã€‚ å…¶å®åŸç†å¤§å®¶éƒ½æ‡‚ï¼Œå°±æ˜¯å®ç°ä¸Šå¯èƒ½ä¼šå¿½ç•¥ä¸€äº›ç»†èŠ‚ã€‚ æˆ‘ç®€å•å…ˆè¯´ä¸‹åŸç†ï¼š å‡å¦‚æˆ‘ä»¬èƒ½å¤Ÿæµ‹é‡å‡º Drawable åœ¨æ§ä»¶å†…çš„åŒºåŸŸï¼Œå°±å¯ä»¥å¯¹è¯¥åŒºåŸŸå†…çš„è§¦æ‘¸äº‹ä»¶ä½œç›‘å¬ï¼Œä¹Ÿå°±èƒ½å¤Ÿå®ç°ç›‘å¬ç‚¹å‡»äº‹ä»¶çš„æ•ˆæœã€‚ è€Œéš¾ç‚¹ï¼Œæ°å¥½å°±åœ¨äºå¦‚ä½•æµ‹é‡å‡º Drawable æ‰€åœ¨åŒºåŸŸï¼Œè¿™ä¹Ÿæ˜¯ç½‘ä¸Šå¾ˆå¤šæ–‡ç« çŠ¯é”™çš„åœ°æ–¹ã€‚ ç”±å‡ ä½•çŸ¥è¯†å¯ä»¥çŸ¥é“ï¼Œåœ¨äºŒç»´å¹³é¢ä¸­ï¼Œåªè¦ç¡®å®šäº† 2 ä¸ªé¡¶ç‚¹çš„åæ ‡ï¼Œä»¥è¿™ä¸¤ä¸ªé¡¶ç‚¹åˆ†åˆ«å‘ä¸¤åæ ‡è½´ä½œå‚çº¿å°±å¯ä»¥ç»˜åˆ¶å‡ºä¸€ä¸ªçŸ©å½¢åŒºåŸŸã€‚éœ€è¦æ˜ç¡®çš„æ˜¯ï¼Œåœ¨ Android ä¸­åæ ‡ç‚¹çš„è®¡ç®—å’Œæˆ‘ä»¬åœ¨æ•°å­¦ä¸Šä¸å¤ªç›¸åŒï¼ŒAndroid ä¸­åæ ‡åŸç‚¹ä¸ºå·¦ä¸Šè§’é¡¶ç‚¹ï¼Œå¾€å³ä¸º X è½´æ­£æ–¹å‘ï¼Œå¾€ä¸‹ä¸º Y è½´æ­£æ–¹å‘ã€‚ æ¥ä¸‹æ¥åªéœ€ç”»ä¸ªå›¾å°±èƒ½æ¸…æ¥šæ˜äº†ã€‚ ä»¥ DrawableLeft ä¸ºä¾‹ï¼š DrawableLeft åœ¨ X è½´æ–¹å‘ä¸Šçš„è·ç¦»å¾ˆå®¹æ˜“è®¡ç®—ï¼Œå…¶å·¦ä¾§ä¸ Y è½´çš„è·ç¦»å®é™…ä¸Šå°±æ˜¯è¯¥ View çš„ PaddingLeftï¼Œå…¶å³ä¾§ä¸ Y è½´çš„è·ç¦»å°±æ˜¯ PaddingLeft å’Œè¯¥ Drawable çš„å®½åº¦ä¹‹å’Œã€‚ ä½† DrawableLeft åœ¨ Y è½´æ–¹å‘ä¸Šçš„è·ç¦»è¦ç¨å¾®å¤æ‚ä¸€äº›ï¼Œå› ä¸ºå®ƒä¼šå—åˆ° DrawableTop ä»¥åŠæ–‡å­—åŒºåŸŸé«˜åº¦çš„å½±å“ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å¤Ÿç›´æ¥è·å–ã€‚ è¿™é‡Œè§£é‡Šä¸€ä¸‹ï¼ŒDrawableTop çš„å½±å“åº”è¯¥å¾ˆå¥½ç†è§£ï¼Œä¹Ÿå¾ˆå¥½å¤„ç†ï¼›æ–‡å­—åŒºåŸŸé«˜åº¦çš„å½±å“ï¼Œæ˜¯æŒ‡ä¸åŒ…å« Drawable çš„å®é™…æ–‡å­—åŒºåŸŸï¼Œå½“æ–‡å­—åŒºåŸŸçš„é«˜åº¦é«˜äº DrawableLeft çš„é«˜åº¦æ—¶ï¼Œæˆ‘ä»¬å¦‚æœä¸è¿›è¡Œè®¡ç®—ï¼Œè·å–åˆ°çš„é«˜åº¦å¯èƒ½ä¼šæ¯”å®é™…ä¸Šè¦é«˜ï¼Œè¿™ä¼šé€ æˆæˆ‘ä»¬æµ‹é‡å‡ºæ¥çš„åŒºåŸŸæ¯”å®é™…åŒºåŸŸè¦å¤§ã€‚ è®¡ç®—çš„æ–¹æ³•ä¹Ÿä¸éš¾ï¼Œæˆ‘ä»¬åªéœ€è¦è·å–åˆ° DrawableLeft ä¸­å¿ƒåœ¨ Y è½´æ–¹å‘ä¸Šçš„ä½ç½®ï¼Œå†å¢å‡ Drawable æœ¬èº«ä¸€åŠçš„é«˜åº¦ï¼Œå³å¯å¾—åˆ°å…¶ä¸Šä¸‹è¾¹ç•Œåˆ° X è½´çš„è·ç¦»ã€‚ è¿™æ ·æˆ‘ä»¬å°±æŠŠ DrawableLeft æ‰€åœ¨åŒºåŸŸè®¡ç®—å‡ºæ¥äº†ï¼ŒåŒç† DrawableTop ä¹Ÿèƒ½å¤Ÿä½¿ç”¨ç›¸åŒçš„æ–¹æ³•è®¡ç®—ã€‚ æ¥ä¸‹æ¥å°±æ˜¯ DrawableRightï¼š DrawableRight å³ä¾§åœ¨ X è½´æ–¹å‘ä¸Šçš„è·ç¦»å®é™…ä¸Šå°±æ˜¯è¯¥ View çš„æ€»å®½åº¦ä¸ PaddingRight ä¹‹å·®ï¼Œå…¶å·¦ä¾§åœ¨ X è½´æ–¹å‘ä¸Šçš„è·ç¦»å°±æ˜¯å…¶å³ä¾§åœ¨ X è½´æ–¹å‘çš„è·ç¦»ä¸è¯¥ Drawable çš„å®½åº¦ä¹‹å·®ã€‚ DrawableRight åœ¨ Y è½´æ–¹å‘ä¸Šçš„è·ç¦»ä¸ DrawableLeft çš„è®¡ç®—æ–¹å¼æ— å¼‚ï¼Œä¸å†èµ˜è¿°ã€‚ ç”¨åŒæ ·çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ä¹Ÿèƒ½å¤Ÿè®¡ç®—å‡º DrawableBottom çš„åŒºåŸŸã€‚ åŸç†ä»‹ç»å®Œäº†ï¼Œå°±è¯¥ä¸Šä»£ç äº†ï¼Œä¸ºäº†æ›´å¥½çš„å°è£…ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ View æ¥å®ç°ï¼Œä»¥ TextView ä¸ºä¾‹ï¼š public class DrawableTextView extends AppCompatTextView { final int DRAWABLE_LEFT = 0; final int DRAWABLE_TOP = 1; final int DRAWABLE_RIGHT = 2; final int DRAWABLE_BOTTOM = 3; Drawable mDrawableLeft, mDrawableTop, mDrawableRight, mDrawableBottom; public DrawableTextView(@NonNull Context context) { super(context); } public DrawableTextView(@NonNull Context context, @Nullable AttributeSet attrs) { super(context, attrs); } public DrawableTextView(@NonNull Context context, @Nullable AttributeSet attrs, int defStyleAttr) { super(context, attrs, defStyleAttr); } @Override public boolean onTouchEvent(MotionEvent event) { if (event.getAction() == MotionEvent.ACTION_DOWN) { if (onDrawableClickListener != null) { mDrawableLeft = getCompoundDrawables()[DRAWABLE_LEFT]; mDrawableTop = getCompoundDrawables()[DRAWABLE_TOP]; mDrawableRight = getCompoundDrawables()[DRAWABLE_RIGHT]; mDrawableBottom = getCompoundDrawables()[DRAWABLE_BOTTOM]; if (touchDrawableLeft(event)) { onDrawableClickListener.onDrawableLeftClick(); } if (touchDrawableTop(event)) { onDrawableClickListener.onDrawableTopClick(); } if (touchDrawableRight(event)) { onDrawableClickListener.onDrawableRightClick(); } if (touchDrawableBottom(event)) { onDrawableClickListener.onDrawableBottomClick(); } } } return super.onTouchEvent(event); } private boolean touchDrawableLeft(MotionEvent event) { if (mDrawableLeft == null) { return false; } int drawableHeight = mDrawableLeft.getIntrinsicHeight(); int drawableWidth = mDrawableLeft.getIntrinsicWidth(); int topOfDrawable = getCompoundPaddingTop(); int bottomOfDrawable = getHeight() - getCompoundPaddingBottom(); double drawableCenterY = 0.5 * (bottomOfDrawable - topOfDrawable) + topOfDrawable; Rect bounds = new Rect(getPaddingLeft(), (int) (drawableCenterY - 0.5 * drawableHeight), getPaddingLeft() + drawableWidth, (int) (drawableCenterY + 0.5 * drawableHeight) ); return bounds.contains((int) event.getX(), (int) event.getY()); } private boolean touchDrawableTop(MotionEvent event) { if (mDrawableTop == null) { return false; } int drawableHeight = mDrawableTop.getIntrinsicHeight(); int drawableWidth = mDrawableTop.getIntrinsicWidth(); int leftOfDrawable = getCompoundPaddingLeft(); int rightOfDrawable = getWidth() - getCompoundPaddingRight(); double drawableCenterX = 0.5 * (rightOfDrawable - leftOfDrawable) + leftOfDrawable; Rect bounds = new Rect((int) (drawableCenterX - 0.5 * drawableWidth), getPaddingTop(), (int) (drawableCenterX + 0.5 * drawableWidth), getPaddingTop() + drawableHeight); return bounds.contains((int) event.getX(), (int) event.getY()); } private boolean touchDrawableRight(MotionEvent event) { if (mDrawableRight == null) { return false; } int drawableHeight = mDrawableRight.getIntrinsicHeight(); int drawableWidth = mDrawableRight.getIntrinsicWidth(); int topOfDrawable = getCompoundPaddingTop(); int bottomOfDrawable = getHeight() - getCompoundPaddingBottom(); double drawableCenterY = 0.5 * (bottomOfDrawable - topOfDrawable) + topOfDrawable; Rect bounds = new Rect(getWidth() - getPaddingRight() - drawableWidth, (int) (drawableCenterY - 0.5 * drawableHeight), getWidth() - getPaddingRight(), (int) (drawableCenterY + 0.5 * drawableHeight)); return bounds.contains((int) event.getX(), (int) event.getY()); } private boolean touchDrawableBottom(MotionEvent event) { if (mDrawableBottom == null) { return false; } int drawHeight = mDrawableBottom.getIntrinsicHeight(); int drawWidth = mDrawableBottom.getIntrinsicWidth(); int leftOfDrawable = getCompoundPaddingLeft(); int rightOfDrawable = getWidth() - getCompoundPaddingRight(); double drawableCenterX = 0.5 * (rightOfDrawable - leftOfDrawable) + leftOfDrawable; Rect bounds = new Rect((int) (drawableCenterX - 0.5 * drawWidth), getHeight() - getPaddingBottom() - drawHeight, (int) (drawableCenterX + 0.5 * drawWidth), getHeight() - getPaddingBottom()); return bounds.contains((int) event.getX(), (int) event.getY()); } public interface OnDrawableClickListener { void onDrawableLeftClick(); void onDrawableTopClick(); void onDrawableRightClick(); void onDrawableBottomClick(); } private OnDrawableClickListener onDrawableClickListener; public void setOnDrawableClickListener(OnDrawableClickListener listener) { this.onDrawableClickListener = listener; } } ä»£ç ä¸çŸ­ï¼Œä½†æˆ‘ä»¬ç†è§£äº†ä¸Šé¢çš„åŸç†ä¹‹åä¹Ÿå¾ˆå®¹æ˜“çœ‹æ‡‚ã€‚ æˆ‘åœ¨è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª OnDrawableClickListener æ¥å£ï¼Œç”¨äºåˆ†åˆ«å›è°ƒ TextView å››ä¸ªæ–¹å‘ä¸Šçš„ç‚¹å‡»äº‹ä»¶ã€‚ é‡ç‚¹å†…å®¹åœ¨é‡å†™çš„ onTouchEvent() æ–¹æ³•å†…ï¼Œè¿™ä¸ªæ–¹æ³•ç”¨äºç›‘å¬ TextView çš„è§¦æ‘¸äº‹ä»¶ã€‚åœ¨è¯¥æ–¹æ³•å†…ï¼Œé¦–å…ˆé€šè¿‡ getCompoundDrawables() æ–¹æ³•è·å–åˆ° Drawable æ•°ç»„ï¼Œå¹¶é€šè¿‡ä¸‹æ ‡åˆ†åˆ«æ‹¿åˆ°å››ä¸ªæ–¹å‘ä¸Šçš„ Drawable å¯¹è±¡ã€‚ç´§æ¥ç€åˆ¤æ–­è§¦æ‘¸äº‹ä»¶æ˜¯å¦è½åœ¨å¯¹åº”çš„ Drawable åŒºåŸŸå†…ï¼Œç„¶åå›è°ƒç»™ OnDrawableClickListenerã€‚ è§¦æ‘¸åŒºåŸŸçš„åˆ¤æ–­å°±æ ¹æ®ä¸Šé¢åŸç†å†™å°±å¯ä»¥äº†ï¼Œè§£é‡Šä¸‹å‡ ä¸ªæ–¹æ³•ã€‚ getIntrinsicWidth() å’Œ getIntrinsicHeight() åˆ†åˆ«ç”¨äºè·å–å½“å‰ Drawable å¯¹è±¡çš„å®½é«˜ã€‚ getCompoundPaddingLeft() è·å–çš„åˆ™æ˜¯ TextView å·¦è¾¹ç•Œåˆ°æ–‡å­—å®é™…æ˜¾ç¤ºåŒºåŸŸçš„è·ç¦»ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸‹æºç ï¼š /** * Returns the left padding of the view, plus space for the left Drawable if any. */ public int getCompoundPaddingLeft() { final Drawables dr = mDrawables; if (dr == null || dr.mShowing[Drawables.LEFT] == null) { return mPaddingLeft; } else { return mPaddingLeft + dr.mDrawablePadding + dr.mDrawableSizeLeft; } } ä¹Ÿå°±æ˜¯è¯´ï¼Œå½“ DrawableLeft ä¸å­˜åœ¨æ—¶ï¼Œå®ƒå–å¾—çš„å€¼æ˜¯ PaddingLeftï¼Œè€Œå½“ DrawableLeft å­˜åœ¨æ—¶ï¼Œå®ƒå–å¾—çš„å€¼æ˜¯ PaddingLeftã€DrawableLeft çš„å®½åº¦ã€DrawablePadding ä¸‰è€…ä¹‹å’Œã€‚å…¶ä»–æ–¹å‘ä¹ŸåŒç†ã€‚ å›åˆ°åˆšåˆšè¿˜æ²¡è§£é‡Šçš„é—®é¢˜ï¼Œå½“æˆ‘ä»¬çŸ¥é“äº†æ–‡å­—æ˜¾ç¤ºåŒºåŸŸè·ç¦»åæ ‡è½´çš„è·ç¦»æ—¶ï¼ŒDrawable çš„ä¸­å¿ƒç‚¹ä¹Ÿå°±å¯ä»¥è®¡ç®—å‡ºæ¥äº†ã€‚ ä½ å¯èƒ½ä¼šæœ‰ç–‘é—®ï¼Œã€Android ä¸º TextView å’Œ EditText æ·»åŠ  ICONã€ä¸€æ–‡ä¸æ˜¯æåˆ°å¯ä»¥é€šè¿‡è®¾ç½® Gravity æ¥æŒ‡å®šå†…éƒ¨å…ƒç´ çš„å¯¹é½æ–¹å¼ï¼Œé‚£ä¼šä¸ä¼šå½±å“åˆ° Drawable ä½ç½®çš„è®¡ç®—ï¼Ÿ å¹¶ä¸ä¼šï¼Œå› ä¸º Gravity å®é™…ä¸ŠæŒ‡å®šçš„æ˜¯æ–‡å­—åœ¨æ–‡å­—åŒºåŸŸå†…çš„æ˜¾ç¤ºä½ç½®ï¼Œè€Œä¸æ˜¯ Drawable çš„ä½ç½®ï¼Œå³ Drawable çš„ä½ç½®ç›¸å¯¹äºæ–‡å­—åŒºåŸŸæ¥è¯´ï¼Œä¾ç„¶æ˜¯å±…ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬é€šè¿‡æ–‡å­—åŒºåŸŸæ¥è®¡ç®— Drawable çš„ä¸­å¿ƒç‚¹ä»æ—§å¯è¡Œã€‚ æœ€åï¼Œæˆ‘ä»¬å°† Drawable æ‰€åœ¨çš„çŸ©å½¢åŒºåŸŸè®¡ç®—å‡ºæ¥ï¼Œå¹¶åˆ¤æ–­è§¦æ‘¸äº‹ä»¶åœ¨è¯¥ View ä¸Šçš„è½ç‚¹æ˜¯å¦åœ¨ Drawable çš„çŸ©å½¢åŒºåŸŸå†…ï¼Œå°±èƒ½å¤Ÿåˆ¤æ–­è¯¥ Drawable æ˜¯å¦è¢«ç‚¹å‡»ã€‚ è¿™ä¸ªè‡ªå®šä¹‰çš„æ§ä»¶å†™å®Œåï¼Œåªéœ€æ›¿æ¢åŸæ¥çš„ TextView å³å¯ï¼Œå±æ€§ä¸åŸæ¥æ— å¼‚ã€‚ å¯¹äºç»§æ‰¿è‡ª TextView çš„ EditText ä¹ŸåŒç†ï¼Œä½¿ç”¨ä¸Šé¢çš„è‡ªå®šä¹‰æ–¹æ³•åŒæ ·é€‚ç”¨ã€‚ æˆ‘è¿™é‡Œå°±ä½¿ç”¨è‡ªå®šä¹‰çš„ EditText æ¥å†™ä¸€ä¸‹æ–‡ç« å¼€å¤´çš„å¯†ç æ˜¾éšåŠŸèƒ½ã€‚ é¦–å…ˆæ›¿æ¢å¸ƒå±€æ–‡ä»¶ä¸­åŸæ¥çš„ EditText æ§ä»¶ï¼š &lt;com.example.DrawableEditText android:id=&quot;@+id/password&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:drawableRight=&quot;@drawable/ic_eye_off&quot; android:inputType=&quot;textPassword&quot; /&gt; åœ¨é€»è¾‘ä»£ç ä¸­å“åº”å…¶ç‚¹å‡»äº‹ä»¶ï¼š private boolean passwordVisible = false; void switchPasswordVisibility(final DrawableEditText editText) { editText.setOnDrawableClickListener(new DrawableEditText.OnDrawableClickListener() { @Override public void onDrawableLeftClick() {} @Override public void onDrawableTopClick() {} @Override public void onDrawableRightClick() { Drawable drawable; if (passwordVisible) { drawable = getResources().getDrawable(R.drawable.ic_eye_off); // editText.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD | InputType.TYPE_CLASS_TEXT); editText.setTransformationMethod(PasswordTransformationMethod.getInstance()); } else { drawable = getResources().getDrawable(R.drawable.ic_eye_on); // editText.setInputType(InputType.TYPE_TEXT_VARIATION_VISIBLE_PASSWORD); editText.setTransformationMethod(HideReturnsTransformationMethod.getInstance()); } passwordVisible = !passwordVisible; drawable.setBounds(0, 0, drawable.getMinimumWidth(), drawable.getMinimumHeight()); editText.setCompoundDrawables(null, null, drawable, null); } @Override public void onDrawableBottomClick() {} }); } å› ä¸ºåªè®¾ç½®äº† DrawableRightï¼Œæ‰€ä»¥è¿™é‡Œåªéœ€è¦å†™å…¥ DrawableRight çš„äº‹ä»¶å³å¯ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š è™½ç„¶æˆ‘ä»¬åœ¨ EditText çš„æ§ä»¶å±æ€§ä¸­å¸¸ç”¨ android:inputType å±æ€§æ¥è®¾ç½®å…¶ä¸ºå¯†ç çš„æ ·å¼ï¼Œä½†åœ¨è¿™é‡Œå¹¶ä¸å»ºè®®ä½¿ç”¨ setInputType() æ–¹æ³•æ¥ä½œæ›´æ”¹ï¼Œè€Œæ˜¯ä½¿ç”¨ setTransformationMethod() æ–¹æ³•ï¼Œä¸»è¦æ˜¯å› ä¸º setInputType() æ–¹æ³•æœ‰ä¸¤ä¸ªå‘ã€‚ å…¶ä¸€ï¼Œå¯†ç ä»å¯è§çŠ¶æ€åˆ‡å›å¯†æ–‡çŠ¶æ€æ—¶ï¼Œæˆ‘ä»¬ä»¥åœ¨æ§ä»¶å±æ€§ä¸­ä½¿ç”¨çš„ç»éªŒï¼Œä¸€èˆ¬ä¼šå°†å…¶è®¾ç½®ä¸ºï¼š editText.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD); ä½†æ˜¯è¿è¡Œä¹‹åä½ ä¼šå‘ç°ï¼Œå¹¶ä¸ä¼šç”Ÿæ•ˆï¼š å¯ä»¥çœ‹æˆ‘ä¸Šæ–¹æ³¨é‡Šæ‰çš„ä»£ç ä¸­éœ€è¦åŒæ—¶è®¾ç½®ä¸¤ä¸ªå±æ€§æ‰èƒ½ç”Ÿæ•ˆï¼š editText.setInputType(InputType.TYPE_TEXT_VARIATION_PASSWORD | InputType.TYPE_CLASS_TEXT); å¯¹åº”æ§ä»¶å±æ€§ä¸­çš„ï¼š &lt;EditText ... android:inputType=&quot;textPassword&quot; /&gt; å› ä¸º textPassword å¯¹åº”çš„ InputType çš„å€¼ä¸º 129ï¼Œè€Œ InputType.TYPE_TEXT_VARIATION_PASSWORD å¯¹åº”çš„å€¼æ˜¯ 128ï¼Œæ‰€ä»¥å¾ˆæ˜æ˜¾éœ€è¦å’Œå€¼ä¸º 1 çš„ InputType.TYPE_CLASS_TEXT åšæŒ‰ä½æˆ–è¿ç®—ã€‚ å…¶äºŒï¼Œä½¿ç”¨ setInputType() æ–¹æ³•è½¬æ¢åä¼šå‡ºç°æ ·å¼ä¸ä¸€çš„æƒ…å†µï¼š å¯ä»¥è§åˆ°ï¼Œå½“åˆ‡æ¢ä¸ºå¯†æ–‡çŠ¶æ€æ—¶ï¼Œç‚¹å’Œç‚¹ä¹‹é—´çš„è·ç¦»å¢å¤§äº†ï¼Œä¸é»˜è®¤æ ·å¼ä¸ç»Ÿä¸€ï¼Œä¼šé€ æˆç”¨æˆ·å›°æ‰°ã€‚ è€Œä½¿ç”¨ setTransformationMethod() å°±å¯ä»¥é¿å…ä¸Šé¢çš„æƒ…å†µã€‚ ","link":"https://LiarrDev.github.io/post/Listening-Clicks-on-Drawables-of-TextView-or-EditText/"},{"title":"Android ä¸º TextView æˆ– EditText æ·»åŠ  ICON","content":"åœ¨åº”ç”¨å¼€å‘ä¸­ï¼Œä¸ºäº†å‹å¥½çš„ç”¨æˆ·ä½“éªŒï¼Œæˆ‘ä»¬å¸¸å¸¸éœ€è¦åœ¨æ–‡å­—æ—è¾¹æ·»åŠ  ICONï¼Œå› ä¸ºç”¨æˆ·å¯¹å›¾å½¢çš„æ„ŸçŸ¥å¾€å¾€è¦å¼ºäºæ–‡å­—ï¼Œæ¯”å¦‚è¿™æ ·å­ï¼š å¤§å¤šæ•°æ–°æ‰‹çœ‹ä¸€çœ¼è§‰å¾—å¾ˆç®€å•ï¼Œä½¿ç”¨ ImageView å’Œ TextView ç»„åˆå³å¯ã€‚ çš„ç¡®ï¼Œè¿™æ˜¯ä¸€ç§å¾ˆç®€å•çš„æ–¹æ³•ï¼Œä½†å¦‚ä¸Šå›¾ä¸­ä½¿ç”¨ GridLayout æ¥å±•ç¤ºå¤šä¸ªå­é¡¹ï¼Œæ˜æ˜ ICON å’Œæ–‡å­—å±äºåŒä¸€é¡¹ï¼Œç»„åˆå†™æ³•ä¼šå¯¼è‡´ä»£ç æˆå€å¢åŠ ï¼Œå†åŠ ä¸Šéœ€è¦ç”¨ä¸€ä¸ªçˆ¶å®¹å™¨ï¼ˆå¦‚ LinearLayoutï¼‰æ¥åŒ…è£¹è¿™ä¸¤ä¸ªå­é¡¹ï¼Œå¸ƒå±€æ–‡ä»¶å°±å¦‚è€å¤ªå¤ªçš„è£¹è„šå¸ƒâ€”â€”åˆé•¿åˆè‡­ã€‚ å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠè¿™ä¸ªç»„åˆæŠ½å–å‡ºæ¥ï¼Œåšæˆ Adapter é€šç”¨ï¼Œå°½ç®¡å¸ƒå±€æ¸…æ™°äº†ï¼Œä½†é€»è¾‘ä»£ç ä¹Ÿå¢åŠ ä¸å°‘ã€‚ å®é™…ä¸Šï¼ŒAndroid æœ¬èº«å°±ä¸º TextView æä¾›äº†æ­¤åŠŸèƒ½ï¼Œæˆ‘ä»¬åªéœ€ä¸€è¡Œä»£ç å°±å¯ä»¥ä½¿ç”¨ï¼š &lt;TextView ... android:drawableTop=&quot;@drawable/ic_drawable&quot; /&gt; è¯¥å±æ€§å¯ä»¥ä¸º TextView åœ¨æŸä¸€æ–¹å‘ä¸Šæ·»åŠ å¯¹åº”çš„ Drawableï¼Œå…¶ä»–æ–¹å‘åªéœ€ä¿®æ”¹å±æ€§ä¸­çš„æ–¹å‘åç§°å³å¯ã€‚ AppCompat æä¾›äº†ä¸€äº› Compat å±æ€§ï¼Œæ‰€ä»¥ä½ ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š &lt;TextView ... app:drawableTopCompat=&quot;@drawable/ic_drawable&quot; /&gt; å¦‚æœä½ æƒ³è°ƒæ•´ Drawable å’Œæ–‡å­—çš„é—´éš”ï¼Œå¯ä»¥ä½¿ç”¨è¿™ä¸ªå±æ€§ï¼š &lt;TextView ... android:drawablePadding=&quot;16dp&quot; app:drawableTopCompat=&quot;@drawable/ic_drawable&quot; /&gt; å½“ Drawable å°ºå¯¸è¿‡å¤§æ—¶ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ° Drawable å’Œæ–‡å­—å¹¶ä¸æ˜¯å±…ä¸­çš„ï¼Œè¿™æ—¶ä½ è¦ç‰¢è®°ï¼Œè¿™ä¸ª Drawable ä¹Ÿæ˜¯ TextView çš„ä¸€éƒ¨åˆ†ï¼š å¯¹äº View æˆ– ViewGroup å†…éƒ¨å…ƒç´ çš„å¯¹é½æ–¹å¼ï¼Œæˆ‘ä»¬é€šå¸¸å¯ä»¥ä½¿ç”¨ï¼š &lt;TextView ... android:gravity=&quot;center&quot; app:drawableTopCompat=&quot;@drawable/ic_drawable&quot; /&gt; å‡å¦‚ä½ éœ€è¦åœ¨é€»è¾‘ä»£ç ä¸­åŠ¨æ€ä¿®æ”¹è¯¥ Drawableï¼ŒåŒæ ·æä¾›æ”¯æŒï¼š textView.setCompoundDrawablesWithIntrinsicBounds(getResources().getDrawable(R.drawable.ic_drawable), null, null, null); setCompoundDrawablesWithIntrinsicBounds() æ–¹æ³•æ¥æ”¶å››ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯å››ä¸ªæ–¹å‘ä¸Šçš„ Drawable èµ„æºï¼Œåœ¨å¯¹åº”æ–¹å‘ä¼ å…¥æ‰€éœ€çš„ Drawable å³å¯ã€‚ è¯¥æ–¹æ³•åŒæ—¶ä¹Ÿæ”¯æŒä»¥èµ„æº ID çš„æ–¹å¼ä¼ å…¥ Drawableï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥è¿™æ ·å†™ï¼š textView.setCompoundDrawablesWithIntrinsicBounds(R.drawable.ic_drawable, 0, 0, 0); å½“ä½ è§‰å¾—è¿™ä¸ªåŠŸèƒ½æŒºå¥½ç”¨æ—¶ï¼Œå‡å¦‚ç¾å·¥è®©ä½ è°ƒæ•´ä¸€ä¸‹ Drawable çš„å¤§å°ï¼Œä½ å¯èƒ½ä¸€ä¸‹å­å°±æ‡µäº†ï¼Œä¼¼ä¹æ‰¾ä¸åˆ°è¿™ä¸ªå±æ€§ï¼Œè¿˜ä¸å¦‚ ImageView å’Œ TextView ç»„åˆæ¥å¾—æ–¹ä¾¿å‘€ã€‚ çš„ç¡®ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ²¡æœ‰è°ƒæ•´ Drawable å°ºå¯¸çš„å±æ€§ï¼Œä½†ä½ è¦è®°å¾—ï¼Œè¿™æ˜¯ä¸€ä¸ª Drawableï¼Œæ—¢ç„¶æ˜¯ Drawableï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡é€»è¾‘ä»£ç æ§åˆ¶å®ƒçš„å°ºå¯¸ï¼š Drawable drawable = getResources().getDrawable(R.drawable.ic_account); drawable.setBounds(0, 0, 180, 180); // è®¾ç½®å›¾ç‰‡çš„å¤§å° textView.setCompoundDrawables(drawable, null, null, null); // è®¾ç½®å›¾ç‰‡çš„ä½ç½® Drawable çš„ setBounds() æ–¹æ³•æ¥æ”¶å››ä¸ªå‚æ•°ï¼Œå››ä¸ªåæ ‡å½¢æˆä¸€ä¸ªçŸ©å½¢ï¼ŒDrawable å°†åœ¨è¢«ç»˜åˆ¶åœ¨è¿™ä¸ªçŸ©å½¢åŒºåŸŸå†…ã€‚ æ¥ç€è°ƒç”¨çš„ setCompoundDrawables() å’Œä¸Šé¢æåˆ°çš„ setCompoundDrawablesWithIntrinsicBounds() ç±»ä¼¼ï¼Œå°† Drawable ä¼ å…¥åˆ°å¯¹åº”ä½ç½®å³å¯ã€‚ å¦å¤–æˆ‘ä»¬çŸ¥é“ï¼ŒEditText å®é™…ä¸Šæ˜¯ç»§æ‰¿äº TextView çš„ï¼Œé‚£ä¹ˆ EditText ä¹Ÿä¼šæœ‰ç›¸åŒçš„å±æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è½»è€Œæ˜“ä¸¾çš„å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼š å±æ€§å’Œæ–¹æ³•åŸºæœ¬å’Œ TextView ä¸€è‡´ï¼Œä¸å†é‡å¤è´´ä»£ç ã€‚ ","link":"https://LiarrDev.github.io/post/Add-Icons-for-TextView-or-EditText-in-Android/"},{"title":"ç”¨ã€Hexoã€æ­å»ºä¸ªäººåšå®¢","content":"å…¶å®å¾ˆå¤šäººéƒ½æƒ³è¿‡æœ‰ä¸€ä¸ªå±äºè‡ªå·±çš„ç½‘ç«™ï¼Œæ— å¥ˆå› ä¸ºæŠ€æœ¯é—¨æ§›ï¼Œå¤§å¤šæ•°äººéƒ½æ²¡èƒ½å®ç°è¿™ä¸ªå°å°çš„å¿ƒæ„¿ã€‚ è¯´å®è¯ï¼Œå¯¹äºæŠ€æœ¯äººæˆ–è€…æ˜¯äº’è”ç½‘ä»ä¸šè€…æ¥è¯´ï¼Œä¸€ä¸ªå±äºè‡ªå·±çš„ä¸ªäººç½‘ç«™æ˜¯å¾ˆå¸¸è§çš„ï¼Œç”±äºæˆ‘ä»¬é€šå¸¸ä¼šå°†å…¶ç”¨äºè®°å½•æˆ‘ä»¬çš„ä¸€äº›ç¬”è®°ã€çŸ¥è¯†ã€ç”Ÿæ´»ç­‰ç­‰ï¼Œå› æ­¤ä¹Ÿä¼šå°†å…¶ç§°ä¸ºåšå®¢ã€‚ â€œåšå®¢â€è¿™ä¸ªè¯ï¼Œè¯´èµ·æ¥ä¹Ÿæœ‰ç‚¹å„¿ä¹…è¿œäº†ï¼Œç”šè‡³ç°åœ¨å¾ˆå¤šäººéƒ½å·²ç»ä¸çŸ¥é“è¿™ä¸ªè¯ï¼Œå®ƒå…¶å®æ˜¯ä¸€ä¸ªéŸ³è¯‘è¯ï¼Œè‹±æ–‡å«â€œBlogâ€ï¼Œè€Œè¿™ä¸ªè¯ä¹Ÿæ˜¯ä¸€ä¸ªæ··æˆè¯ï¼Œæºè‡ªâ€œWeb Logâ€ï¼Œå³ç½‘ç»œæ—¥å¿—ï¼Œæ›´æ—©æœŸçš„éŸ³è¯‘å…¶å®å«â€œéƒ¨è½æ ¼â€ï¼Œæ˜¯ä¸€ç§é€šå¸¸ç”±ä¸ªäººç®¡ç†ã€ä¸å®šæœŸå¼ è´´æ–°æ–‡ç« çš„ç½‘ç«™ã€‚ å›½å†…ä¹Ÿæœ‰å¾ˆå¤šåšå®¢å†™ä½œå¹³å°ï¼Œæ¯”å¦‚åæŠ€æœ¯å‘çš„ã€CSDNã€å’Œã€æ˜é‡‘ã€ï¼Œåå¤§ä¼—å‘çš„ã€ç®€ä¹¦ã€ç­‰ç­‰ï¼Œæ³¨å†Œä¸ªè´¦å·å°±èƒ½å¼€å§‹å†™ä½œï¼Œé‚£ä¸ºä»€ä¹ˆè¿˜è¦è‡ªå·±åŠ¨æ‰‹å»æ­å»ºä¸€ä¸ªåšå®¢å‘¢ï¼Ÿ ä»æˆ‘ä¸ªäººçœ‹æ¥ï¼Œæœ‰ä¸‰ä¸ªåŸå› ï¼š å¹¿å‘Šã€‚å•†ä¸šå¹³å°éœ€è¦ç›ˆåˆ©ï¼Œå¹¿å‘Šæ˜¯é‡è¦çš„æ¥æºï¼Œå¹³å°å¾€å¾€ä¼šå‘ä½œè€…çš„åšå®¢æ’å…¥å¹¿å‘Šè€Œä¸éœ€è¦ç»è¿‡ä½œè€…çš„åŒæ„ã€‚ æ ·å¼ã€‚å•†ä¸šå¹³å°é€šå¸¸å¯¹äºæ‰€æœ‰çš„åšå®¢ï¼Œéƒ½åªä¼šæä¾›å•ä¸€çš„é¡µé¢å±•ç¤ºæ ·å¼ï¼Œæ²¡æœ‰ä¸ªæ€§åŒ–å®šåˆ¶ã€‚ ç›‘ç®¡ã€‚æ–‡ç« å‘è¡¨åœ¨å•†ä¸šå¹³å°ï¼Œå°±å¿…é¡»å—åˆ°å¹³å°çš„ç›‘ç®¡ã€‚ä»¥å¾®ä¿¡å…¬ä¼—å¹³å°ä¸ºä¾‹ï¼Œå¾®ä¿¡æ¯å¹´æ¸…ç†çš„å¾®ä¿¡æ–‡ç« ä¸è®¡å…¶æ•°ï¼Œé™¤æ‰ç»å¤§éƒ¨åˆ†é€ è°£ã€æŠ„è¢­çš„åƒåœ¾æ–‡ç« å¤–ï¼Œè¿˜æœ‰æå°éƒ¨åˆ†æ­éœ²ç¤¾ä¼šé»‘æš—çš„æ–‡ç« å› ä¸ºæŸäº›ä¸å¯æè¿°çš„åŸå› è€Œè¢«åˆ é™¤ã€‚ å¦‚æœä½ ä¹Ÿæœ‰åŒæ ·çš„é¡¾è™‘ï¼Œå¯ä»¥å°è¯•è·Ÿéšæˆ‘çš„è„šæ­¥ï¼Œæ­å»ºä¸€ä¸ªå±äºè‡ªå·±çš„ä¸ªäººåšå®¢ã€‚ Hexo åœ¨å¼€æºç¤¾åŒºå„è·¯å¤§ç¥çš„åŠªåŠ›ä¸‹ï¼Œå·²ç»è¯ç”Ÿäº†ä¸å°‘åšå®¢æ¡†æ¶ï¼Œæˆ‘æŒ‰ç…§æˆ‘ä¸ªäººçš„å–œå¥½ï¼Œé€‰æ‹©äº†ã€Hexoã€ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å…¶ä»–æ¡†æ¶æ­å»ºã€‚ ã€Hexoã€å®˜ç½‘å¯¹äºè¿™ä¸ªæ¡†æ¶çš„æè¿°æ˜¯ï¼š A fast, simple &amp; powerful blog framework å¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ åŒæ—¶ï¼Œè¿˜ä»‹ç»äº†å‡ ä¸ªä¼˜ç‚¹ï¼š è¶…å¿«é€Ÿåº¦ã€‚Node.js æ‰€å¸¦æ¥çš„è¶…å¿«ç”Ÿæˆé€Ÿåº¦ï¼Œè®©ä¸Šç™¾ä¸ªé¡µé¢åœ¨å‡ ç§’å†…ç¬é—´å®Œæˆæ¸²æŸ“ã€‚ æ”¯æŒ Markdownã€‚Hexo æ”¯æŒ GitHub Flavored Markdown çš„æ‰€æœ‰åŠŸèƒ½ï¼Œç”šè‡³å¯ä»¥æ•´åˆ Octopress çš„å¤§å¤šæ•°æ’ä»¶ã€‚ ä¸€é”®éƒ¨ç½²ã€‚åªéœ€ä¸€æ¡æŒ‡ä»¤å³å¯éƒ¨ç½²åˆ° GitHub Pages, Heroku æˆ–å…¶ä»–å¹³å°ã€‚ æ’ä»¶å’Œå¯æ‰©å±•æ€§ã€‚å¼ºå¤§çš„ API å¸¦æ¥æ— é™çš„å¯èƒ½ï¼Œä¸æ•°ç§æ¨¡æ¿å¼•æ“ï¼ˆEJSï¼ŒPugï¼ŒNunjucksï¼‰å’Œå·¥å…·ï¼ˆBabelï¼ŒPostCSSï¼ŒLess/Sassï¼‰è½»æ˜“é›†æˆã€‚ å°½ç®¡æˆ‘è®¤åŒã€Hexoã€çš„ç¡®æ˜¯ä¸€ä¸ªä¼˜ç§€çš„åšå®¢æ¡†æ¶ï¼Œä½†åœ¨è¿™é‡Œæˆ‘å¿…é¡»è¦æ³¼ä¸€ä¸‹å†·æ°´ï¼š ç½‘é¡µçš„åŠ è½½é€Ÿåº¦è¿˜ä¾èµ–äºå®é™…ç½‘ç»œæƒ…å†µã€‚ ä¸æ”¯æŒ Markdown çš„åšå®¢æ¡†æ¶ç®—ä¸ä¸Šåšå®¢æ¡†æ¶ã€‚ ç»å¤§å¤šæ•°çš„ä¼˜ç§€åšå®¢æ¡†æ¶éƒ½æ”¯æŒä¸€é”®éƒ¨ç½²ã€‚ æ‹¥æœ‰æ’ä»¶æ‰©å±•çš„åšå®¢æ¡†æ¶æ‰ç®—ä¼˜ç§€æ¡†æ¶ã€‚ æ€»ä¹‹ï¼Œã€Hexoã€æ»¡è¶³äº†ä¼˜ç§€åšå®¢æ¡†æ¶çš„æ¡ä»¶ï¼Œæ¥ä¸‹æ¥æˆ‘å°±å¸¦ä½ åˆ©ç”¨ã€Hexoã€ä¸€æ­¥ä¸€æ­¥æ­å»ºè‡ªå·±çš„åšå®¢ã€‚ å·¥å…· Node.js ä¸Šé¢ä¹Ÿæåˆ°ï¼Œã€Hexoã€æ˜¯åŸºäº Node.js çš„ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŸºäº Chrome V8 å¼•æ“ çš„ JavaScript è¿è¡Œæ—¶ï¼Œä¸æ‡‚æ²¡æœ‰å…³ç³»ï¼Œä½ åªéœ€è¦ä¸‹è½½å®‰è£…å³å¯ã€‚ å…¶å® Node.js åœ¨ä¹‹å‰ã€Windows å¹³å° React Native å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°ã€ä¸­ä¹Ÿæœ‰ä»‹ç»è¿‡ï¼Œå¦‚æœæ„Ÿè§‰ä½¿ç”¨è¿‡ç¨‹ä¸­ç½‘é€Ÿä¸ç†æƒ³å¯ä»¥å‚è€ƒåˆ‡æ¢å›½å†…é•œåƒæºã€‚ å»ºè®®ä½¿ç”¨ LTS ç‰ˆæœ¬ã€‚ Git Git ä¹Ÿæ˜¯æˆ‘ä»¬ç¨‹åºå‘˜çš„è€æœ‹å‹äº†ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬æ‹‰å–ç›¸å…³æ–‡ä»¶ä»¥åŠå°†åšå®¢éƒ¨ç½²åˆ°ç½‘ä¸Šå»ï¼Œä¹Ÿåªéœ€è¦ä¸‹è½½å®‰è£…å³å¯ã€‚ æ–°ç‰ˆæœ¬çš„ Git å·²ç»é»˜è®¤å‹¾é€‰ã€ŒRun Git from Windows Command Promptã€äº†ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è‡ªåŠ¨æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ã€‚ macOS ä¸­å®‰è£… Git åˆ™æ›´ä¸ºæ–¹ä¾¿ï¼Œç›´æ¥åœ¨ã€Terminalã€ä¸­è¾“å…¥ git å‘½ä»¤å°±ä¼šè‡ªåŠ¨æç¤ºå®‰è£…ã€‚ ç¯å¢ƒ åªéœ€å®‰è£…ä»¥ä¸Šä¸¤ä¸ªè½¯ä»¶ï¼Œæˆ‘ä»¬å°±å·²ç»å‡†å¤‡å¥½å·¥å…·å•¦ï¼Œæ¥ä¸‹æ¥åœ¨ä»»æ„ç»ˆç«¯ï¼ˆä½ å¯ä»¥ä½¿ç”¨åˆšåˆšä¸‹è½½çš„ã€Git Bashã€ï¼Œæˆ–è€…ç³»ç»Ÿè‡ªå¸¦çš„ã€CMDã€ã€ã€Windows PowerShellã€ã€ã€Terminalã€ç­‰ï¼‰è¾“å…¥ä»¥ä¸‹å‘½ä»¤ï¼š âœ npm install -g hexo-cli è¯¥å‘½ä»¤ä¼šå®‰è£…ã€Hexoã€åŠå…¶ç›¸å…³å‘½ä»¤ï¼Œç­‰å¾…ä¸€å°ä¼šç¯å¢ƒå°±å®‰è£…å®Œæˆå•¦ã€‚ å»ºç«™ ä½ å¯èƒ½ä¼šè§‰å¾—å‰é¢çš„å‡†å¤‡å·¥ä½œå¤ªè¿‡ç®€å•ï¼Œæˆ–è®¸è¿™æ­£æ˜¯ã€Hexoã€çš„ä¼˜ç‚¹ï¼Œä½†æ¥ä¸‹æ¥æ‰æ˜¯æˆ‘ä»¬çš„é‡ç‚¹å·¥ä½œã€‚ ã€Hexoã€ç¯å¢ƒå®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯æ‰§è¡Œï¼š âœ hexo init &lt;folder&gt; &lt;folder&gt; æ˜¯æˆ‘ä»¬æƒ³è¦å°†æ•´ä¸ªåšå®¢ç¯å¢ƒå­˜æ”¾çš„ç›®å½•è·¯å¾„ï¼Œè¿™ä¸ªå‘½ä»¤ä¼šåŠ è½½å¯¹åº”çš„æ–‡ä»¶åˆ°è¯¥æ–‡ä»¶å¤¹ä¸‹ï¼Œä½ å¯èƒ½ä¼šå¥½å¥‡è¿™äº›æ–‡ä»¶æ˜¯ä»å“ªé‡Œæ¥çš„ï¼Œã€Hexoã€çš„ Github é¡¹ç›®ä¸­æœ‰ä¸€ä¸ªå«ã€Œhexo-starterã€çš„ Repoï¼Œæ‰€æœ‰çš„åŒ…æ–‡ä»¶éƒ½åœ¨å…¶ä¸­ã€‚ æ‰§è¡Œå®Œä¸Šè¿°å‘½ä»¤ä¹‹åå¾ˆå¯èƒ½ä¼šæœ‰ç›¸å…³é”™è¯¯ï¼Œæ¯”å¦‚æ— æ³•å®‰è£…ç›¸åº”çš„åŒ…æ‰©å±•æ–‡ä»¶ç­‰ï¼Œæˆ‘ä»¬å¯ä»¥è¿›å…¥åˆšåˆšç”Ÿæˆçš„è¯¥æ–‡ä»¶å¤¹æŠŠæ²¡æœ‰å®‰è£…ä¸Šçš„åŒ…å†å®‰è£…ä¸€éï¼š âœ cd &lt;folder&gt; âœ npm install è¿™æ ·å°±æŠŠæ‰€éœ€è¦çš„åŒ…å’Œæ–‡ä»¶å®‰è£…å®Œæˆï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š . â”œâ”€â”€ _config.yml â”œâ”€â”€ package.json â”œâ”€â”€ scaffolds â”œâ”€â”€ source | â”œâ”€â”€ _drafts | â””â”€â”€ _posts â””â”€â”€ themes ã€Œ_config.ymlã€æ˜¯ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œå¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚ ã€Œpackage.jsonã€æ˜¯åº”ç”¨ç¨‹åºçš„ä¿¡æ¯ï¼ŒEJSã€Stylus å’Œ Markdown renderer çš†å·²é»˜è®¤å®‰è£…ã€‚ ã€Œscaffoldsã€æ˜¯æ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼Œã€Hexoã€ä¼šæ ¹æ®ã€Œscaffoldsã€æ¥å»ºç«‹æ–‡ä»¶ã€‚ã€Hexoã€çš„æ¨¡æ¿æ˜¯æŒ‡åœ¨æ–°å»ºçš„ Markdown æ–‡ä»¶ä¸­é»˜è®¤å¡«å……çš„å†…å®¹ã€‚ ã€Œsourceã€æ˜¯èµ„æºæ–‡ä»¶å¤¹ï¼Œå­˜æ”¾ç”¨æˆ·èµ„æºçš„åœ°æ–¹ã€‚é™¤ã€Œ_postsã€æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º _ï¼ˆä¸‹åˆ’çº¿ï¼‰çš„æ–‡ä»¶ã€æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚Markdown å’Œ HTML æ–‡ä»¶ä¼šè¢«è§£æå¹¶æ”¾åˆ°ã€Œpublicã€æ–‡ä»¶å¤¹ï¼Œè€Œå…¶ä»–æ–‡ä»¶ä¼šè¢«æ‹·è´è¿‡å»ã€‚ ã€Œthemesã€æ˜¯ä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œã€Hexoã€ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥ç”Ÿæˆæˆ‘ä»¬çš„ç½‘ç«™é¡µé¢äº†ï¼Œåœ¨åˆ›å»ºçš„é¡¹ç›®æ–‡ä»¶å¤¹æ ¹ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½ä»¤ï¼š âœ hexo generate å› ä¸ºå•è¯æ¯”è¾ƒé•¿å®¹æ˜“è¾“é”™ï¼Œã€Hexoã€æ”¯æŒç”¨ç®€å†™çš„æ–¹å¼æ‰§è¡Œå‘½ä»¤ï¼Œä¸Šé¢è¿™æ¡å‘½ä»¤å¯ä»¥ç®€å†™æˆï¼š âœ hexo g å¦‚æœä½ ä½¿ç”¨ã€Windows PowerShellã€çš„è¯å¯èƒ½ä¼šé‡åˆ°è¾“å‡ºä¿¡æ¯ç¼ºå¤±çš„æƒ…å†µï¼š ä¸ç”¨å¤ªæ‹…å¿ƒï¼Œè¿™åªæ˜¯ã€Hexoã€å‘½ä»¤æ˜¾ç¤ºä¸å…¼å®¹ã€Windows PowerShellã€çš„ç¼˜æ•…ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯æ¯”è¾ƒä¹ æƒ¯ç”¨ã€Git Bashã€ï¼Œä¸è¿‡ã€Git Bashã€çœç•¥äº†æ¯”è¾ƒå¤šçš„ä¿¡æ¯ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ã€CMDã€ï¼Œå®ƒä¼šæ˜¾ç¤ºå®Œæ•´çš„ä¿¡æ¯ã€‚æ— è®ºä½ ä½¿ç”¨å“ªä¸ªç»ˆç«¯ï¼Œåªè¦å®ƒæ²¡æœ‰æŠ¥é”™ï¼Œæˆ‘ä»¬çš„å‘½ä»¤éƒ½æ˜¯æ­£å¸¸æ‰§è¡Œçš„ã€‚ è¯¥å‘½ä»¤æ‰§è¡Œå®Œæˆåï¼Œå¯ä»¥å‘ç°ç›®å½•ä¸‹å¤šäº†ä¸€ä¸ªåä¸ºã€Œpublicã€çš„æ–‡ä»¶å¤¹ï¼Œè¯¥ç›®å½•å°±æ˜¯ç”Ÿæˆçš„ç½‘ç«™ã€‚ è¿™æ—¶å€™å†æ‰§è¡Œå‘½ä»¤ï¼š âœ hexo server æˆ–è€…ç®€å†™ï¼š âœ hexo s åœ¨æµè§ˆå™¨ä¸­è®¿é—®ç½‘å€ï¼šhttp://localhost:4000ï¼Œå°±å¯ä»¥æŸ¥çœ‹åˆšåˆšç”Ÿæˆçš„ç½‘ç«™ã€‚ æˆ‘ä»¬çš„ç½‘ç«™å°±å»ºç«‹èµ·æ¥äº†ï¼ å†™ä½œ è™½ç„¶ç½‘ç«™æ­å»ºå¥½äº†ï¼Œä½†é‡Œé¢é™¤äº†ä¸€ä¸ªã€ŒHello Worldã€è¿˜æ˜¯ç©ºç©ºå¦‚ä¹Ÿï¼Œæ—¢ç„¶ä½œä¸ºæˆ‘ä»¬çš„ä¸ªäººåšå®¢ï¼Œé‚£ä¹ˆå°±éœ€è¦ç”¨è‡ªå·±çš„å†…å®¹æ¥æŠŠå®ƒå……å®èµ·æ¥ã€‚ æ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥åˆ›å»ºä¸€ç¯‡æ–°æ–‡ç« ï¼š âœ hexo new [layout] &lt;title&gt; ä½ å¯ä»¥åœ¨å‘½ä»¤ä¸­æŒ‡å®šæ–‡ç« çš„å¸ƒå±€ï¼ˆlayoutï¼‰ï¼Œé»˜è®¤ä¸º postï¼Œå¯é€šè¿‡ä¿®æ”¹ã€Œ_config.ymlã€ä¸­çš„ default_layout å‚æ•°æ¥æŒ‡å®šé»˜è®¤å¸ƒå±€ã€‚ post ç›¸å½“äºå‘å¸ƒçš„æ–‡ç« ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹© draft ç”Ÿæˆä¸€ä¸ªè‰ç¨¿ï¼Œè‰ç¨¿é¡µé¢ä¸ä¼šè¢«ã€Hexoã€æ¸²æŸ“ç”Ÿæˆä½†ä¹Ÿå¯ä»¥é¢„è§ˆå…¶æ•ˆæœã€‚ å¦‚æœä½ æ‹…å¿ƒå‘½ä»¤å¤ªé•¿å¤ªå¤šä½ è®°ä¸ä½ï¼Œä½ å¯ä»¥æŠŠè¿™ä¸ªå‚æ•°çœç•¥æ‰ï¼Œè®°ä½å¦‚ä¸‹å†™æ³•å³å¯ï¼š âœ hexo new &quot;æ–‡ç« æ ‡é¢˜&quot; æ‰§è¡Œå®Œå‘½ä»¤åä½ å¯ä»¥çœ‹åˆ°ã€Hexoã€å¸®æˆ‘ä»¬ç”Ÿæˆäº†ä¸€ä¸ªä¸ &lt;title&gt; åå­—ç›¸å¯¹åº”çš„ Markdown æ–‡ä»¶ï¼Œé»˜è®¤æƒ…å†µä¸‹ &lt;title&gt; å³æ–‡ç« çš„æ ‡é¢˜ã€‚ æ‰“å¼€è¯¥æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°ã€Hexoã€å·²ç»å¸®æˆ‘ä»¬åˆå§‹åŒ–äº†ä¸€äº›åŸºæœ¬ä¿¡æ¯ï¼š --- title: &lt;title&gt; date: 2019-06-03 20:49:47 tags: --- æ–‡ä»¶æœ€ä¸Šæ–¹ä»¥ --- åˆ†éš”çš„è¿™ä¸€éƒ¨åˆ†åŒºåŸŸå«ä½œã€ŒFront-matterã€ï¼Œç”¨äºæŒ‡å®šä¸ªåˆ«æ–‡ä»¶çš„å˜é‡ï¼Œç®€å•æ¥è¯´å°±æ˜¯è¿™ä¸ªæ–‡ç« çš„ä¸€äº›å±æ€§ã€‚ ã€ŒFront-matterã€é€šå¸¸ä½¿ç”¨ YAML è¯­æ³•ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ JSON æ¥ç¼–å†™ï¼Œä¸è¿‡ä¸ªäººè§‰å¾—è™½ç„¶å¤§éƒ¨åˆ†ç¨‹åºå‘˜éƒ½æ¯”è¾ƒç†Ÿæ‚‰ JSON ä½†åœ¨è¿™é‡Œæ— ç–‘ä½¿ç”¨ YAML è¦æ›´åŠ æ–¹ä¾¿æ˜“è¯»ï¼Œå†µä¸” YAML å­¦èµ·æ¥è·Ÿ JSON ä¸€æ ·æ— æˆæœ¬ä¸æ˜¯ä¹ˆã€‚ ä»¥ä¸‹æ˜¯é¢„å…ˆå®šä¹‰çš„å‚æ•°ï¼Œæ‚¨å¯åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨è¿™äº›å‚æ•°å€¼å¹¶åŠ ä»¥åˆ©ç”¨ã€‚ å‚æ•° æè¿° é»˜è®¤å€¼ layout å¸ƒå±€ ã€Œconfig.default_layoutã€ä¸­è®¾ç½®çš„é»˜è®¤å€¼ title æ ‡é¢˜ æ–‡ç« çš„æ–‡ä»¶å date å»ºç«‹æ—¥æœŸ æ–‡ä»¶å»ºç«‹æ—¥æœŸ updated æ›´æ–°æ—¥æœŸ æ–‡ä»¶æ›´æ–°æ—¥æœŸ comments å¼€å¯æ–‡ç« çš„è¯„è®ºåŠŸèƒ½ true tags æ ‡ç­¾ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ categories åˆ†ç±»ï¼ˆä¸é€‚ç”¨äºåˆ†é¡µï¼‰ permalink è¦†ç›–æ–‡ç« ç½‘å€ æˆ‘ä¸€èˆ¬è¿˜ä¼šä½¿ç”¨ subtitle æŒ‡å®šå‰¯æ ‡é¢˜ï¼Œä½¿ç”¨ cover æŒ‡å®šæ–‡ç« å°é¢å›¾ç­‰ï¼Œä¸è¿‡è¿™å¹¶ä¸æ˜¯ã€Hexoã€é¢„å…ˆå®šä¹‰çš„å‚æ•°ï¼Œè€Œæ˜¯è·Ÿå½“å‰ä½¿ç”¨çš„ä¸»é¢˜ç›¸å…³ï¼Œæˆ‘ä½¿ç”¨è¿™ä¸¤ä¸ªå‚æ•°è¿˜æ˜¯æ¥æºäºåœ¨ã€å¾®ä¿¡å…¬ä¼—å¹³å°ã€ä¸Šå†™æ¨æ–‡çš„ä¹ æƒ¯ã€‚ æ¥ä¸‹æ¥åªéœ€è¦åœ¨ã€ŒFront-matterã€ä¸‹æ–¹ä½¿ç”¨ Markdown è¯­æ³•è¿›è¡Œæ–‡ç« å†™ä½œå³å¯ï¼Œä»»æ„æ–‡æœ¬ç¼–è¾‘å™¨éƒ½å¯ä»¥å¯¹å…¶è¿›è¡Œç¼–è¾‘ï¼Œä¸ºäº†æ–¹ä¾¿ä¹Ÿå¯ä»¥ä½¿ç”¨ä¸“é—¨çš„ Markdown ç¼–è¾‘å™¨ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œã€Hexoã€ä¸­çš„ Markdown è¯­æ³•ä½¿ç”¨çš„æ˜¯ GFMï¼ˆGitHub Flavored Markdownï¼‰è€Œä¸æ˜¯æ ‡å‡†çš„ Markdown è¯­æ³•ï¼Œä¸¤è€…æœ‰ç‚¹åŒºåˆ«ä½†æ€»ä½“åŒºåˆ«ä¸å¤§ï¼Œå¯¹äºæˆ‘æ—¥å¸¸ä½¿ç”¨æ¥è¯´ï¼ŒGFM è¦ç›¸å¯¹ä¸¥æ ¼ä¸€äº›ï¼ˆå®¢è§‚ä¸Šæ¥è¯´å¹¶ä¸æ˜¯ï¼Œå› ä¸º GFM ä¹Ÿæœ‰æ¯”æ ‡å‡† Markdown è‡ªç”±çš„åœ°æ–¹ï¼‰ã€‚ å†™ä½œå®Œæˆåï¼Œå†æ¬¡è¿è¡Œä¸Šä¸€å°èŠ‚ç”Ÿæˆç½‘ç«™ä»¥åŠå¯åŠ¨æœåŠ¡å™¨çš„ä¸¤æ¡å‘½ä»¤ï¼š âœ hexo g âœ hexo s è®¿é—® http://localhost:4000 å³å¯æŸ¥çœ‹åˆšåˆšç”Ÿæˆçš„æ–‡ç« äº†ã€‚ è¿™ä¸¤æ¡å‘½ä»¤åº”å½“ç‰¢ç‰¢è®°ä½ï¼Œå› ä¸ºåœ¨å¯¹åšå®¢åšä»»ä½•æ›´æ–°åéƒ½è¦ç”¨è¿™ä¸¤æ¡å‘½ä»¤æ¥å¯åŠ¨é¢„è§ˆã€‚ é…ç½® å¯¹äºæ–°æ‰‹å…¶å®åªéœ€è¦äº†è§£å‡ ä¸ªå¸¸ç”¨çš„é…ç½®é¡¹å³å¯ï¼Œä½†å¦‚æœæƒ³è¦å®šåˆ¶æ›´åŠ ä¸ªæ€§çš„ç½‘ç«™ï¼Œå°±éœ€è¦äº†è§£å¦‚ä½•ç©è½¬é…ç½®æ–‡ä»¶äº†ã€‚ é¦–å…ˆï¼Œé…ç½®æ–‡ä»¶æŒ‡çš„æ˜¯ã€Œ_config.ymlã€ï¼Œå®ƒå¯ä»¥åˆ†ä¸ºç½‘ç«™é…ç½®æ–‡ä»¶å’Œä¸»é¢˜é…ç½®æ–‡ä»¶ï¼Œåˆ†åˆ«å­˜æ”¾äºé¡¹ç›®æ ¹ç›®å½•ä»¥åŠå¯¹åº”ä¸»é¢˜ç›®å½•ã€‚ æ­£å¦‚å®ƒçš„æ–‡ä»¶ååç¼€æ‰€ç¤ºï¼Œé…ç½®æ–‡ä»¶ä¹Ÿæ˜¯éµå¾ª YAML è¯­æ³•çš„ï¼ŒåŒæ ·ï¼Œå‡¡æ˜¯æ”¯æŒ YAML çš„åœ°æ–¹éƒ½æ˜¯å¯ä»¥ä½¿ç”¨ JSON æ¥æ›¿ä»£ã€‚ æœ€ä¸»è¦çš„é…ç½®æœ‰å‡ ä¸ªåœ°æ–¹ï¼Œç¬¬ä¸€æ˜¯ç½‘ç«™åŸºç¡€é…ç½®ã€‚ æ¯”å¦‚ä½ æ‰“å¼€ç½‘ç«™åä½ å¯ä»¥çœ‹åˆ°ç½‘ç«™çš„æ ‡é¢˜æ˜¯ã€ŒHexoã€ï¼š æˆ‘ä»¬çš„ä¸ªäººåšå®¢å½“ç„¶è¦è‡ªå·±èµ·ä¸€ä¸ªåå­—ï¼Œæ‰€ä»¥å¯ä»¥ä¿®æ”¹ï¼š # Site title: &quot;Liarr's Studio&quot; subtitle: description: keywords: author: Liarr language: timezone: title å°±æ˜¯ç½‘ç«™çš„æ ‡é¢˜ï¼Œæˆ‘è¿™é‡ŒæŠŠå®ƒå‘½åä¸ºã€ŒLiarr's Studioã€ï¼Œæ„ä¸ºæˆ‘çš„å·¥ä½œå°ã€‚é‡æ–°ç”Ÿæˆå¹¶é‡å¯æœåŠ¡å™¨ï¼Œå°±å¯ä»¥çœ‹åˆ°ç½‘ç«™çš„æ ‡é¢˜æ”¹ä¸ºäº†æˆ‘å®šä¹‰çš„åå­—äº†ã€‚ ç¬¬äºŒä¸ªéœ€è¦ä¿®æ”¹çš„æ˜¯éƒ¨ç½²çš„é…ç½®ã€‚ ä¸Šæ–‡è™½ç„¶ä½ çœ‹åˆ°çš„æ˜¯ä½ ç”Ÿæˆçš„ç½‘ç«™ï¼Œä½†è¿™ä¹Ÿä»…é™äºæœ¬åœ°æŸ¥çœ‹ï¼Œä»–äººè¿˜æ— æ³•åœ¨å…¬ç½‘ä¸Šè®¿é—®ä½ çš„åšå®¢ï¼Œæ‰€ä»¥ä½ è¿˜éœ€è¦æŠŠå®ƒéƒ¨ç½²åˆ°æœåŠ¡å™¨ä¸Šï¼Œå…·ä½“éƒ¨ç½²çš„æ­¥éª¤ä¸‹æ–‡ä¼šè¯¦ç»†è¯´ï¼Œåœ¨é…ç½®è¿™é‡Œéœ€è¦å¡«å†™ä½ éƒ¨ç½²çš„æ–¹å¼ä»¥åŠåœ°å€ï¼Œå¦‚æˆ‘è¿™é‡Œå¡«å†™çš„æ˜¯ï¼š # Deployment deploy: type: git repo: https://github.com/LiarrDev/LiarrDev.github.io.git ä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä½¿ç”¨ Git çš„æ–¹å¼æ¥éƒ¨ç½²ï¼Œå¹¶ä¸”å­˜æ”¾åœ¨ã€Githubã€å¯¹åº”çš„ä»“åº“ä¸­ã€‚ ç¬¬ä¸‰ä¸ªéœ€è¦ä¿®æ”¹çš„æ˜¯ä¸»é¢˜çš„é…ç½®ã€‚ ä½ ä¸€å®šä¼šè®¤ä¸ºé»˜è®¤çš„ä¸»é¢˜ã€ŒLandscapeã€ä¸‘æ­»äº†ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹ä¸»é¢˜æ¥ç¾åŒ–è‡ªå·±çš„ç½‘ç«™ï¼Œé…ç½®ä¸Šåªéœ€è¦å¡«å†™ä¸»é¢˜çš„åå­—å³å¯ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå¡«å†™ï¼š # Extensions theme: hexo-theme-clean-blog å°±æ˜¯ä½¿ç”¨è¿™æ¬¾åä¸ºã€ŒCleanBlogã€çš„ä¸»é¢˜ï¼Œå…·ä½“è®¾ç½®ä¸»é¢˜çš„æ­¥éª¤ä¸‹æ–‡ä¹Ÿä¼šæœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ ç”±äºé…ç½®é—¨æ§›è¾ƒé«˜ï¼Œæ‰€ä»¥å»ºè®®è¿˜æ˜¯å‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼Œå®˜æ–¹æ–‡æ¡£ä¸Šæœ‰æ›´è¯¦ç»†çš„ä»‹ç»ï¼Œä¸”è‹±æ–‡æ–‡æ¡£è¦æ¯”ä¸­æ–‡æ–‡æ¡£æ›´åŠ è¯¦ç»†ã€‚ éƒ¨ç½² ã€Hexoã€æ”¯æŒå¤šç§éƒ¨ç½²æ–¹å¼ï¼Œæ¯”å¦‚ Gitã€Herokuã€Netlifyã€Rsync ç­‰ï¼Œè¿™é‡Œä¸»è¦ä»‹ç»æµè¡Œçš„ Git éƒ¨ç½²æ–¹å¼ã€‚ æ­£å¦‚å‰æ–‡æ‰€æåˆ°ï¼Œæˆ‘çš„åšå®¢æ˜¯éƒ¨ç½²åœ¨ã€Githubã€ä¸Šçš„ï¼Œæ²¡é”™ï¼Œæˆ‘ä½¿ç”¨çš„æ­£æ˜¯ GitHub Pagesï¼Œè¿™æ˜¯ã€Githubã€ç»™å¼€å‘è€…å»ºç«‹ä¸€ä¸ªç§äººé¡µé¢ï¼Œç”¨æ¥åˆ†äº«æ–°é¢–çš„æƒ³æ³•å’Œè‡ªå·±å†™çš„ä»£ç ã€‚ ä¸è¿‡ç”±äºã€Githubã€çš„æœåŠ¡å™¨åœ¨æµ·å¤–ï¼Œæˆ‘ä»¬åœ¨å›½å†…è®¿é—®æœ‰æ—¶å€™ä¼šä¸ç¨³å®šï¼Œå†åŠ ä¸Šæ—¶ä¸æ—¶ä¼šé‡ä¸Š DNS æ±¡æŸ“ï¼Œå¯¹äºå›½å†…çš„éä¸“ä¸šç”¨æˆ·ï¼Œæˆ‘ä¸ªäººæ›´åŠ å»ºè®®é€‰ç”¨å›½å†…çš„ä»£ç æ‰˜ç®¡å¹³å°ï¼Œæ¯”å¦‚ã€Giteeã€å’Œã€CODINGã€ï¼Œéƒ¨ç½²æµç¨‹å’Œæˆ‘åœ¨ã€Githubã€ä¸Šéƒ¨ç½²åŸºæœ¬æ²¡æœ‰å¤ªå¤§å·®åˆ«ã€‚ æ³¨å†Œçš„æµç¨‹å°±ä¸èµ˜è¿°äº†ï¼Œç›´æ¥è®²éƒ¨ç½²æµç¨‹ã€‚ é¦–å…ˆå¾—æ–°å»ºä¸€ä¸ªä»£ç ä»“åº“ï¼Œæˆ‘ä»¬ä¸€èˆ¬å« Repoã€‚ åˆ›å»ºçš„ä¿¡æ¯å¿…é¡»å¾—ä¸¥æ ¼æŒ‰ç…§æ ‡å‡†æ¥å¡«å†™ã€‚ é¦–å…ˆæ˜¯ã€ŒRepository nameã€ï¼Œä¹Ÿå°±æ˜¯ä»“åº“çš„åç§°ï¼Œä½¿ç”¨ Github Pages å¿…é¡»æŒ‰ç…§ &lt;Username&gt;.github.io çš„æ–¹å¼å¡«å†™ï¼ŒUsername ä¸€èˆ¬è·Ÿå·¦è¾¹çš„ Owner æ˜¯ç›¸åŒçš„ï¼Œå°±æ˜¯ä½ æ³¨å†Œçš„æ—¶å€™å¡«å†™çš„ç”¨æˆ·åã€‚ç”±äºæˆ‘å·²ç»åˆ›å»ºå¥½æˆ‘çš„ä¸ªäººç½‘ç«™äº†ï¼Œæ‰€ä»¥è¿™é‡Œå®ƒä¼šæç¤ºè¯¥ä»“åº“å·²å­˜åœ¨ã€‚ å¦‚æœä½ ä½¿ç”¨å…¶ä»–ä»£ç æ‰˜ç®¡å¹³å°åˆ™å‚ç…§å¯¹åº”å¹³å°çš„å‘½åè§„èŒƒï¼Œå›½å†…çš„ä»£ç æ‰˜ç®¡å¹³å°ä¸€èˆ¬éƒ½æœ‰ä¸­æ–‡æ–‡æ¡£ï¼Œå¯ä»¥è½»æ¾å‚è€ƒã€‚ å…¶ä»–å†…å®¹å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€è¦è¿›è¡Œæ”¹åŠ¨ï¼Œæ¯”å¦‚ã€ŒDescriptionã€æ˜¯å¯¹è¿™ä¸ªä»“åº“çš„æè¿°ï¼Œå®ƒæ˜¯ä¸€ä¸ªé€‰å¡«é¡¹ï¼Œæ‰€ä»¥ä½ å¯ä»¥åœ¨ä»¥åå¯¹å®ƒè¿›è¡Œä¿®æ”¹ï¼Œæ¯”å¦‚æˆ‘çš„ä»“åº“æè¿°ä¸ºï¼š å¯ä»¥è®©åˆ«äººç›´æ¥é€šè¿‡ç‚¹å‡»è·³è½¬è‡³æˆ‘çš„åšå®¢ä¸»é¡µã€‚ å¯¹äºä»“åº“çš„æƒé™ä¸€èˆ¬ä¸ä¿®æ”¹ï¼Œå³é»˜è®¤çš„ã€ŒPublicã€å³å¯ã€‚ ã€Githubã€ä¹‹å‰å¯¹äºã€ŒPrivateã€ç§äººä»“åº“æ˜¯è¦æ”¶è´¹çš„ï¼Œè¢« Microsoft æ”¶è´­ä¹‹åä¸ªäººä¹Ÿå¯ä»¥å…è´¹åˆ›å»ºç§æœ‰ä»“åº“äº†ï¼Œå¹¶ä¸”æ•°é‡æ— é™åˆ¶ã€‚è®¾ç«‹ç§æœ‰ä»“åº“çš„ç›®çš„ä¸»è¦æ˜¯ä½¿ä»£ç ä»…ä¸ºå†…éƒ¨äººå‘˜ä½¿ç”¨é˜²æ­¢è¢«ç«äº‰å¯¹æ‰‹æ‹¿åˆ°æ ¸å¿ƒä»£ç ï¼Œè€Œæˆ‘ä»¬æ­å»ºä¸ªäººåšå®¢è¿™ç§åŸºäºå¼€æºé¡¹ç›®ä¸Šçš„ä»£ç ï¼Œä¹Ÿæ²¡å¿…è¦è®¾ä¸ºç§æœ‰ã€‚ åˆ›å»ºå®Œæˆåï¼Œæ‰“å¼€ä»“åº“ï¼Œç‚¹å‡»ã€ŒCloneã€èœå•çš„çš„å¤åˆ¶æŒ‰é’®æŠŠä»“åº“çš„åœ°å€å¤åˆ¶ä¸‹æ¥ã€‚ å¡«å†™åˆ°é…ç½®æ–‡ä»¶å½“ä¸­ï¼Œå¦‚ä¸Šæ–‡æåˆ°çš„éƒ¨ç½²é…ç½®æ‰€ç¤ºã€‚ # Deployment deploy: type: git repo: https://github.com/LiarrDev/LiarrDev.github.io.git è¿™æ ·ï¼Œã€Hexoã€å°±çŸ¥é“åº”è¯¥éƒ¨ç½²åˆ°å“ªä¸ªä»“åº“ä¸­å»äº†ã€‚ å†™ä½œå®Œæˆå¹¶åœ¨æœ¬åœ°é¢„è§ˆæ— è¯¯åï¼Œå°±å¯ä»¥é€šè¿‡å‘½ä»¤éƒ¨ç½²åˆ°ã€GitHub Pagesã€ä¸­å»ï¼š âœ hexo deploy ä¹Ÿå¯ä»¥ç®€å†™ï¼š âœ hexo d è¿™æ¡å‘½ä»¤åŒæ ·éå¸¸é‡è¦ï¼Œå½“ä½ æœ¬åœ°é¢„è§ˆç½‘ç«™è§‰å¾—æ²¡æœ‰é—®é¢˜åï¼Œé€šè¿‡è¿™æ¡å‘½ä»¤å°±èƒ½å°†ç½‘ç«™éƒ¨ç½²åˆ°çº¿ä¸Šã€‚ ç„¶åä½ å°±å¯ä»¥åœ¨å…¬ç½‘ä¸Šè®¿é—®ä½ çš„ä¸ªäººåšå®¢ç½‘ç«™äº†ã€‚ åœ°å€ä¸ºï¼šhttps://&lt;Username&gt;.github.ioã€‚ å¦‚æœä½ åˆæ¬¡æ‰§è¡Œå‘½ä»¤åæœ‰å…³äº Github æ–¹é¢çš„æŠ¥é”™ï¼Œä¹Ÿå¯ä»¥å°è¯•é€šè¿‡æŠŠä»“åº“ Clone ä¸‹æ¥å¹¶æŠŠé‡Œé¢çš„æ–‡ä»¶å¤åˆ¶åˆ°ä½ çš„ Hexo åšå®¢é¡¹ç›®ç›®å½•ä¸‹è¿›è¡Œè§£å†³ã€‚ å‡è‹¥æœ‰æ—¶å€™ä¿®æ”¹å†…å®¹åç½‘ç«™ä¾æ—§æ— æ³•æ­£å¸¸å±•ç¤ºï¼Œå¯ä»¥å°è¯•é€šè¿‡æ¸…é™¤ç¼“å­˜çš„å‘½ä»¤æ¥è§£å†³ï¼š âœ hexo clean æ¸…é™¤ç¼“å­˜åå†éƒ¨ç½²å°±èƒ½å¤Ÿçœ‹åˆ°ä¿®æ”¹åçš„æ•ˆæœï¼Œå¦‚æœä¾ç„¶ä¸è¡Œï¼Œæœ‰å¯èƒ½æ˜¯å…¶ä»–åœ°æ–¹çš„é—®é¢˜ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£æˆ–ç›¸å…³æ•™ç¨‹ä¸€ä¸€æ’æŸ¥ã€‚ ä¸»é¢˜ é»˜è®¤çš„ã€ŒLandscapeã€ä¸»é¢˜è™½ç„¶æ¯”ã€CSDNã€ä¹‹ç±»çš„å¹¿å‘Šæµè¦å¥½å¾ˆå¤šï¼Œç”šè‡³æ¯”å¾ˆå¤šå›½å†…ä½ è§åˆ°çš„åšå®¢éƒ½è¦å¥½çœ‹ï¼Œä½†ä¾ç„¶æ— æ³•æ»¡è¶³æˆ‘ä»¬å¯¹ç¾è§‚çš„è¿½æ±‚ï¼Œå¼€æºçš„ã€Hexoã€æœ‰ä¸€ä¸ªå¥½å¤„å°±æ˜¯å¤§å®¶éƒ½å¯ä»¥ä¸ºå…¶æ‰“é€ ä¸»é¢˜ã€‚ æˆªæ­¢è‡³æ–‡ç« å‘è¡¨æ—¶ï¼Œå®˜ç½‘ä¸Šç™»è®°çš„å·²ç»æœ‰ 331 ä¸ªä¸»é¢˜ï¼Œå…¶ä»–æœªè¢«ã€Hexoã€å®˜æ–¹æ”¶å½•çš„ä¸»é¢˜åº”è¯¥ä¹Ÿæ˜¯ä¸å°‘çš„ï¼Œæ‰€ä»¥ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„å–œå¥½æ¥é€‰æ‹©åˆé€‚çš„ä¸»é¢˜ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ èƒ½å¤Ÿè‡ªå·±åˆ¶ä½œä¸€æ¬¾ä¸»é¢˜ä¾›å¤§å®¶ä½¿ç”¨é‚£å°±å†å¥½ä¸è¿‡äº†ã€‚ æ‰“å¼€ã€Hexoã€å®˜æ–¹çš„ä¸»é¢˜é¡µï¼Œè¿™é‡Œå±•ç¤ºäº†å„ç§å„æ ·çš„ä¸»é¢˜ï¼Œå¯ä»¥èŠ±äº›æ—¶é—´æ…¢æ…¢æŒ‘é€‰ã€‚ é¼ æ ‡ç§»åŠ¨åˆ°ä¸»é¢˜çš„å°é¢å›¾ä¸Šï¼Œä¼šæœ‰ä¸€åªå°çœ¼ç›ï¼Œç‚¹è¿›å»å¯ä»¥å¯¹ä¸åŒä¸»é¢˜çš„æ•ˆæœè¿›è¡Œé¢„è§ˆã€‚ å…¶å®å¤§å¤šéƒ½æ˜¯å¼€å‘è€…çš„ä¸ªäººåšå®¢ï¼Œä¹Ÿåˆšå¥½çœ‹çœ‹æ•ˆæœå’Œå†…å®¹ã€‚ é€‰åˆ°åˆé€‚çš„ä¸»é¢˜åï¼Œå›åˆ°å®˜æ–¹çš„ä¸»é¢˜é¡µï¼Œç‚¹å‡»è¯¥ä¸»é¢˜çš„åå­—ï¼ˆæˆ‘è§‰å¾—è¿™ç§äº¤äº’æ–¹å¼ååˆ†ä¸å¥½ï¼Œå› ä¸ºç”¨æˆ·æ›´åŠ ä¹ æƒ¯ç‚¹å‡»å›¾ç‰‡ï¼Œè€Œä¸”é¼ æ ‡ç§»åŠ¨åˆ°åå­—æ—¶ä»…é¼ æ ‡æ‰‹åŠ¿æ”¹å˜äº†ï¼Œåå­—ä¹Ÿæ²¡æœ‰è¿›è¡Œé«˜äº®æˆ–è€…åŠ¨æ•ˆæç¤ºï¼‰ï¼Œå°±å¯ä»¥è¿›å…¥åˆ°è¯¥ä¸»é¢˜çš„é¡¹ç›®ä¸»é¡µã€‚ æ¥ç€æŠŠå¯¹åº”çš„ä¸»é¢˜ Clone è‡³åšå®¢é¡¹ç›®çš„ã€Œthemesã€ç›®å½•ä¸‹å³å¯ã€‚ ç„¶åå†åœ¨é¡¹ç›®é…ç½®æ–‡ä»¶ä¸­å¦‚ä¸Šæ–‡æ‰€è¿°è½½å…¥ä¸»é¢˜ã€‚ # Extensions theme: hexo-theme-clean-blog å¦‚æˆ‘è¿™é‡Œè½½å…¥çš„å°±æ˜¯åä¸ºã€ŒCleanBlogã€çš„ä¸»é¢˜ã€‚ ä¸åŒçš„ä¸»é¢˜ä¹Ÿæœ‰ä¸åŒçš„é…ç½®é¡¹ï¼Œå¦‚è¿™æ¬¾ã€ŒCleanBlogã€ä¸»é¢˜æˆ‘å¯ä»¥é…ç½® Headerï¼š # Header menu: Home: / Archives: /archives Tags: /tags Categories: /categories Github: url: https://github.com/LiarrDev icon: github é¦–é¡µçš„å°é¢å›¾æˆ‘æš‚æ—¶è¿˜æ˜¯ä½¿ç”¨å…¶é»˜è®¤å›¾ç‰‡ï¼š # URL of the Home page image index_cover: http://www.codeblocq.com/assets/projects/hexo-theme-clean-blog/img/home-bg.jpg ä¸Šé¢å¯ä»¥çœ‹åˆ°ï¼Œç½‘ç«™çš„ Favicon é»˜è®¤æ˜¯ä¸€ä¸ªç©ºç™½é¡µçš„ ICONï¼š è¿™æ ·çœ‹èµ·æ¥å°±ä¼šè§‰å¾—å¾ˆ Lowï¼Œä½ çœ‹çœ‹å„å¤§ç½‘ç«™ï¼Œå“ªä¸ªæ²¡æœ‰è‡ªå·±ä¸“å±çš„ LOGOï¼Ÿ é‚£æˆ‘ä»¬ä¹Ÿåº”è¯¥ç»™è‡ªå·±çš„ç½‘ç«™è®¾å®šä¸€ä¸ª Faviconï¼Œä¸ºäº†æ–¹ä¾¿ï¼Œæˆ‘å°±ç›´æ¥æŠŠæˆ‘ä¸ªäººå…¬ä¼—å·çš„å¤´åƒæ‹¿è¿‡æ¥äº†ï¼Œå…ˆæŠŠå®ƒè½¬æˆ ICO æ ¼å¼ï¼Œç„¶åå†å­˜æ”¾åœ¨è¯¥ä¸»é¢˜ç›®å½•ä¸‹çš„ /source/img/ ç›®å½•ä¸‹ï¼Œç„¶ååœ¨ä¸»é¢˜é…ç½®ä¸­å¼•å…¥ï¼š # set your own favicon favicon: /img/favicon.ico å°±å¯ä»¥æŠŠç½‘ç«™çš„ Favicon æ”¹ä¸ºæˆ‘è‡ªå·±è®¾è®¡çš„ LOGO äº†ã€‚ å¦å¤–ï¼Œã€ŒCleanBlogã€è¿™æ¬¾ä¸»é¢˜è¿˜æ”¯æŒåŠ ä¸Šè‡ªå·±çš„ç¤¾äº¤è´¦å·ï¼Œè¿™é‡Œæˆ‘ä»…è®¾å®šæˆ‘çš„ Github è´¦å·ï¼š # Social Accounts twitter_url: twitter_handle: facebook_url: github_url: https://github.com/LiarrDev gitlab_url: linkedin_url: mailto: æˆ‘çš„åšå®¢æœ€ç»ˆæˆå“å¤§è‡´å¦‚ä¸‹ï¼š å…¶å®æ¯ä¸€æ¬¾ä¸»é¢˜éƒ½æœ‰ä¸åŒçš„å‚æ•°é…ç½®ï¼Œå…·ä½“æ ¹æ®é€‰å®šçš„ä¸»é¢˜è¿›è¡Œé…ç½®å³å¯ã€‚ è‡³æ­¤ï¼Œå±äºè‡ªå·±çš„ä¸ªäººåšå®¢å°±åŸºæœ¬æ­å»ºå®Œæˆäº†ï¼Œæœ‰ç©ºä¹Ÿå¯ä»¥æ¥æˆ‘çš„æŠ€æœ¯åšå®¢ä¸­äº¤æµä¸€ä¸‹ã€‚ å…³äºã€Hexoã€æ›´è¯¦ç»†çš„ç©æ³•å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ã€‚ åœ¨å¿«é¤å¼äº’è”ç½‘æ—¶ä»£ï¼Œä¸ªäºº Blog å®é™…ä¸Šä¹Ÿè¶Šæ¥è¶Šå°‘è§ï¼Œå¤§ä¼—å¨±ä¹åŒ–ä½¿å¾—åˆ›ä½œè€…æ›´åŠ æ„¿æ„ä½¿ç”¨ç¢ç‰‡åŒ–çš„è®°å½•æ–¹å¼ï¼Œä¹Ÿå‡ ä¹æ²¡æœ‰å¤šå°‘äººæ„¿æ„è¯»é•¿ç¯‡å¤§è®ºçš„æ–‡ç« ï¼Œä½†æ— è®ºæ˜¯å¯¹å†™åšå®¢çš„ä½œè€…ï¼Œè¿˜æ˜¯è¯»åšå®¢çš„è¯»è€…æ¥è¯´ï¼Œéƒ½æ˜¯ä¸€ç§æ²‰æ·€ã€‚ å‚è€ƒå†…å®¹ Hexo ","link":"https://LiarrDev.github.io/post/Build-a-Blog-with-Hexo/"},{"title":"NestedScrollView è§£å†³ Android åµŒå¥—æ»šåŠ¨é—®é¢˜","content":"æ»šåŠ¨æ˜¯æ‰€æœ‰å®¢æˆ·ç«¯éƒ½å¾ˆå¸¸ç”¨çš„äº¤äº’ï¼Œæ¯•ç«Ÿå±å¹•å°±è¿™ä¹ˆå¤§ï¼Œæ˜¾ç¤ºçš„å†…å®¹å¾€å¾€éå¸¸å¤šã€‚ Android å¼€å‘ä¸­ï¼Œæ–°æ‰‹å¸¸å¸¸ä¼šä½¿ç”¨ ScrollView æ¥å®ç°æ»šåŠ¨çš„æ•ˆæœ â€”â€” Which is not wrongã€‚ éšç€éœ€æ±‚çš„å¢åŠ ï¼Œå¯èƒ½ä¼šéœ€è¦åšä¸€ä¸ªèƒ½æ»šåŠ¨çš„åˆ—è¡¨ï¼Œä½ é©¬ä¸Šå°±èƒ½ååº”è¿‡æ¥ï¼ŒRecyclerView æˆ–è€… ListView â€”â€” Which is also correctã€‚ éœ€æ±‚å†å¢åŠ ï¼Œéœ€è¦åšä¸€ä¸ªå¦‚åŒå„ç”µå•†å¹³å°ä¸€æ ·ï¼Œä¸ŠåŠéƒ¨åˆ†æ˜¯æŸç§å›ºå®šå½¢å¼çš„å¸ƒå±€ï¼Œä¸‹æ–¹æ˜¯åˆ—è¡¨çš„å¯æ»šåŠ¨çš„æ•ˆæœï¼š æ–°æ‰‹çš„ç›´è§‰æ˜¯ï¼šScrollView å†…åµŒå¥— RecyclerView æˆ–è€… ListView â€”â€” Which might be able to work â€”â€” But definitely not rightã€‚ æˆ‘ç”¨ ScrollView å’Œ RecyclerView ç®€å•å†™ä¸€ä¸‹ä¸Šé¢è¿™ä¸ªå¸ƒå±€ï¼š &lt;ScrollView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;vertical&quot;&gt; &lt;!-- ç½‘æ ¼å¸ƒå±€ --&gt; &lt;GridLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:columnCount=&quot;3&quot; android:rowCount=&quot;2&quot;&gt; ... &lt;/GridLayout&gt; &lt;!-- å±•ç¤ºåˆ—è¡¨ --&gt; &lt;androidx.recyclerview.widget.RecyclerView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; /&gt; &lt;/LinearLayout&gt; &lt;/ScrollView&gt; å®é™…ä¸Šä¼šå¾—åˆ°ä¸‹é¢è¿™ç§æ•ˆæœï¼š ä¸éš¾çœ‹å‡ºï¼ŒRecyclerView ä¸Šæ–¹çš„ç½‘æ ¼å¸ƒå±€åœ¨è·Ÿéš ScrollView æ»šåŠ¨ï¼Œä½† RecyclerView å´ç”±äºè‡ªèº«èƒ½å¤Ÿæ»šåŠ¨çš„ç‰¹æ€§ï¼Œåªèƒ½åœ¨è‡ªå·±æ‰€å¤„çš„ä½ç½®æ»šåŠ¨ï¼Œè€Œä¸èƒ½è·Ÿéš ScrollView ä¸€èµ·æ»šåŠ¨ã€‚ è¿™å…¶å®æ˜¯ä¸€ä¸ªæ»šåŠ¨å†²çªçš„é—®é¢˜ï¼Œè§£å†³åŠæ³•ä¹Ÿæœ‰å¾ˆå¤šï¼Œåˆå­¦è€…é‡åˆ°è¿™ä¸ªé—®é¢˜çš„æ—¶å€™å¾€å¾€æ˜¯å› ä¸ºä¸çŸ¥åº”å¦‚ä½•æè¿°é—®é¢˜è€Œæ‰¾ä¸åˆ°ç­”æ¡ˆã€‚ å…¶å®å…³äº ScrollView çš„ Android å®˜æ–¹æ–‡æ¡£ä¸­æœ‰ä¸“é—¨æåˆ°è¿™ä¸ªé—®é¢˜ï¼š Never add a RecyclerView or ListView to a scroll view. Doing so results in poor user interface performance and a poor user experience. åŒæ—¶ï¼Œæ–‡æ¡£è¿˜æä¾›äº†è§£å†³æ–¹æ¡ˆï¼š For vertical scrolling, consider NestedScrollView instead of scroll view which offers greater user interface flexibility and support for the material design scrolling patterns. NestedScrollView æ˜¯ Android æä¾›çš„ä¸“é—¨è§£å†³åµŒå¥—æ»šåŠ¨çš„å®¹å™¨ï¼Œã€ŒNestedã€å…¶å®å°±æ˜¯åµŒå¥—çš„æ„æ€ï¼Œå®ƒçš„ä½¿ç”¨æ–¹å¼å’Œ ScrollView åŸºæœ¬æ²¡ä»€ä¹ˆå·®åˆ«ï¼Œä½†å®ƒèƒ½å¤Ÿæ”¯æŒåµŒå¥—æ»šåŠ¨çš„çˆ¶ View æˆ–å­ Viewã€‚ å› æ­¤ï¼Œæˆ‘ä»¬åªè¦ç®€å•æ›¿æ¢ï¼Œå°±å¯ä»¥è§£å†³ä¸Šé¢çš„é—®é¢˜ï¼š &lt;androidx.core.widget.NestedScrollView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:fillViewport=&quot;true&quot;&gt; &lt;LinearLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:orientation=&quot;vertical&quot;&gt; &lt;!-- ç½‘æ ¼å¸ƒå±€ --&gt; &lt;GridLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:columnCount=&quot;3&quot; android:rowCount=&quot;2&quot;&gt; ... &lt;/GridLayout&gt; &lt;!-- å±•ç¤ºåˆ—è¡¨ --&gt; &lt;androidx.recyclerview.widget.RecyclerView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; /&gt; &lt;/LinearLayout&gt; &lt;/androidx.core.widget.NestedScrollView&gt; æ•ˆæœå¦‚ä¸‹ï¼š è™½ç„¶æœ¬æ–‡ä½¿ç”¨ RecyclerView ä½œä¸ºè®²è§£ï¼Œä½†å¦‚åŒæ–‡æ¡£ä¸­æ‰€è¯´ï¼Œè¿™ç§æ–¹æ³•åŒæ—¶è¿˜æ”¯æŒè§£å†³ ListView çš„åµŒå¥—æ»šåŠ¨é—®é¢˜ã€‚ ","link":"https://LiarrDev.github.io/post/Solve-the-Android-Nested-Scrolling-Problem-with-NestedScrollView/"},{"title":"Java å»é™¤ List ä¸­çš„é‡å¤å…ƒç´ ","content":"List æ˜¯æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨çš„æ•°æ®ç»“æ„ï¼Œæ˜¯æœ‰åºä¸”å¯é‡å¤çš„é›†åˆï¼Œæ—¢ç„¶æ˜¯å¯é‡å¤çš„é›†åˆï¼Œå¼€å‘ä¸­æˆ‘ä»¬ä¹Ÿå¸¸å¸¸éœ€è¦å¯¹å…¶åšå»é‡æ“ä½œï¼Œåœ¨ Java ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å¤šç§æ–¹å¼å®Œæˆ List çš„å»é‡ã€‚ éå† List åˆ é‡ public static List&lt;?&gt; removeDuplicate(List&lt;?&gt; list) { for (int i = 0; i &lt; list.size() - 1; i++) { for (int j = list.size() - 1; j &gt; i; j--) { if (list.get(j).equals(list.get(i))) { list.remove(j); } } } return list; } è¯¥æ–¹æ³•é€šè¿‡å¾ªç¯ List ä¸­çš„æ‰€æœ‰å…ƒç´ ç„¶ååˆ é™¤é‡å¤é¡¹è¾¾åˆ°å»é‡ã€‚ éå†æŠŠæœªé‡å¤çš„å…ƒç´ å­˜å…¥å¦ä¸€ä¸ª List public static List&lt;?&gt; removeDuplicate(List&lt;?&gt; list) { List tempList = new ArrayList(); for (int i = 0; i &lt; list.size(); i++) { if (!tempList.contains(list.get(i))) { tempList.add(list.get(i)); } } return tempList; } å¢åŠ äº†å¦ä¸€ä¸ª List æ¥ä½œå­˜å‚¨ï¼ŒæŠŠåŸ List çš„å…ƒç´ å’Œæ–° List çš„å…ƒç´ æ¯”è¾ƒï¼Œå¦‚æ–° List ä¸­æ²¡æœ‰è¯¥å…ƒç´ ï¼Œåˆ™å°†è¯¥å…ƒç´ å­˜å…¥æ–° Listã€‚ é€šè¿‡ HashSet å‰”é™¤é‡å¤å…ƒç´  public static List&lt;?&gt; removeDuplicate(List&lt;?&gt; list) { Set h = new HashSet(list); list.clear(); list.addAll(h); return list; } Set æ˜¯æ— åºã€ä¸å¯é‡å¤çš„é›†åˆï¼Œæ­£æ˜¯å…¶ä¸å…è®¸é‡å¤å…ƒç´ çš„ç‰¹ç‚¹ï¼Œé€šè¿‡ List å’Œ Set äº’è½¬ï¼Œå¯ä»¥å»æ‰é‡å¤å…ƒç´ ã€‚ ä¿æŒé¡ºåºåˆ é™¤ ArrayList ä¸­é‡å¤å…ƒç´  public static List&lt;?&gt; removeDuplicateWithOrder(List&lt;?&gt; list) { Set&lt;Object&gt; set = new HashSet&lt;&gt;(); List tempList = new ArrayList&lt;&gt;(); for (Object element : list) { if (set.add(element)) tempList.add(element); } return tempList; } è™½ç„¶åŒæ ·ç”¨åˆ°äº† HashSetï¼Œä½†åŠ å…¥äº†é€»è¾‘ä½¿å…¶ä¿æŒé¡ºåºã€‚ LinkedHashSet é«˜æ•ˆå»é‡ public static List&lt;?&gt; removeDuplicate(List&lt;?&gt; list) { Set set = new LinkedHashSet(list); list.clear(); list.addAll(set); return list; } åˆ©ç”¨ LinkedHashSet ä¸èƒ½æ·»åŠ é‡å¤æ•°æ®å¹¶èƒ½ä¿è¯æ·»åŠ é¡ºåºçš„ç‰¹æ€§ï¼Œè¯¥æ–¹æ³•æ•ˆç‡éå¸¸é«˜ã€‚ Java 8 çš„ Stream å»é‡ public static List&lt;?&gt; removeDuplicate(List&lt;?&gt; list) { return list.stream().distinct().collect(Collectors.toList()); } Java 8 æ”¯æŒ Stream æµæ“ä½œï¼Œå› æ­¤é›†åˆå»é‡å¯ä»¥ç®€å•åœ°å®ç°ã€‚ ä¸Šé¢çš„éƒ¨åˆ†ä»£ç æˆ‘ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºå°±ç›´æ¥åœ¨ä¼ å…¥çš„ List ä¸Šåšå»é‡äº†ï¼Œåœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œåº”æ ¹æ®é¡¹ç›®å®é™…æƒ…å†µæ¥åˆ¤æ–­ï¼Œå‡å¦‚åŸ List åœ¨å»é‡åä»ä¼šç»§ç»­ä½¿ç”¨ï¼Œå°±åº”è¯¥åˆ›å»ºä¸€ä¸ªæ–°çš„ List æ¥å­˜å‚¨å»é‡åçš„å…ƒç´ ï¼Œé¿å…é¡¹ç›®å‡ºç°æ„æƒ³ä¸åˆ°çš„ Bugã€‚ å¦å¤–ï¼Œä¸ºäº†å¯å¤ç”¨æ€§ï¼Œæˆ‘æ²¡æœ‰æŒ‡å®š List çš„ç±»å‹ï¼Œè€Œæ˜¯ä½¿ç”¨æ³›å‹æ— ç•Œé€šé…ç¬¦ ?ï¼Œåœ¨ IDE ä¸­å¯èƒ½ä¼šæŠ¥è­¦å‘Šï¼ŒæŒ‰éœ€ä¿®å¤å³å¯ã€‚ ","link":"https://LiarrDev.github.io/post/Java-Remove-Duplicate-Objects-in-List/"},{"title":"Android ç”¨ Dialog è½»æ¾å®ç°å•é€‰èœå•","content":"ç§»åŠ¨åº”ç”¨çš„äº¤äº’ä¸­å¸¸å¸¸ä¼šç”¨åˆ°å•é€‰èœå•ï¼Œå•é€‰èœå•çš„å®ç°æ–¹å¼ä¹Ÿæœ‰å¾ˆå¤šç§ï¼Œæ¯”å¦‚ã€WeChatã€ä¸­å°±å¯ä»¥è§åˆ°å¤šç§æ ·å¼çš„å•é€‰èœå•ï¼š ä¸Šé¢è¿™ä¸¤ç§æ ·å¼ï¼Œæˆ‘æ²¡æœ‰å»äº†è§£å®ƒçš„å®é™…ä»£ç ï¼Œå•ä»äº¤äº’æ¥çœ‹ï¼Œæˆ‘çŒœåº”è¯¥æ˜¯ä½¿ç”¨äº† PopupWindow å’Œ BottomSheetDialogã€‚ é™¤äº†è¿™ä¸¤ç§æ–¹å¼ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨æ›´åŠ ç®€å•çš„ Dialog æ¥å®ç°ã€‚ ç”¨ Dialog æ¥åšçš„è¯ï¼Œå¾ˆå®¹æ˜“å°±æƒ³åˆ°äº†ã€Android è‡ªå®šä¹‰ Dialog å¸ƒå±€ã€ä¸­å¼•å…¥è‡ªå®šä¹‰å¸ƒå±€çš„æ–¹å¼ï¼Œç„¶åä½¿ç”¨ RadioButton æˆ–å…¶ä»–æ§ä»¶æ¥åšå•é€‰ã€‚ è¿™ç§æ–¹å¼å½“ç„¶å¯ä»¥ï¼Œä½†æˆ‘ä»¬æœ‰æ›´åŠ ç®€å•çš„å®ç°æ–¹å¼ï¼š public static void showMenuDialog(Context context, String[] options) { AlertDialog.Builder builder = new AlertDialog.Builder(context); builder.setItems(options, new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialogInterface, int i) { // Do Something... } }).show(); } AlertDialog.Builder æä¾›äº† setItems() æ–¹æ³•æ¥åˆ›å»ºç®€å•çš„åˆ—è¡¨å¯¹è¯æ¡†ï¼Œä»ä¼ å…¥çš„å­—ç¬¦ä¸²æ•°ç»„ä¸­è·å–å„é€‰é¡¹çš„åå­—ï¼ŒåŒæ—¶è¿˜éœ€è¦ä¼ å…¥å“åº”äº‹ä»¶ï¼Œä½¿ç”¨æ—¶æˆ‘ä»¬å¯ä»¥æ ¹æ®æ•°ç»„çš„ç´¢å¼•æ¥ç»‘å®šå¯¹åº”é€‰é¡¹çš„ç‚¹å‡»äº‹ä»¶ã€‚ å½“ç„¶ï¼Œä¸ºäº†å°è£…å¤ç”¨ï¼Œæˆ‘ä»¬åº”è¯¥å°†å“åº”äº‹ä»¶çš„é€»è¾‘äº¤ç”±å‡½æ•°çš„ä¸Šå±‚è°ƒç”¨è€…æ¥å®ç°ï¼Œæ‰€ä»¥å¯ä»¥å°è£…æˆï¼š public static void showMenuDialog(Context context, String[] options, DialogInterface.OnClickListener listener) { new AlertDialog.Builder(context) .setItems(options, listener) .show(); } æ•ˆæœå¦‚ä¸‹ï¼š ","link":"https://LiarrDev.github.io/post/Android-Build-an-Single-Selection-Menu-with-Dialog-Easily/"},{"title":"Android ä¸å¯ç¼–è¾‘çš„ EditText","content":"é¡¹ç›®ä¸­æœ‰æ—¶ä¼šéœ€è¦ç”¨åˆ°ä¸€ä¸ªä¸å¯ç¼–è¾‘çš„ EditTextï¼Œç”¨äºå±•ç¤ºï¼Œå¾ˆå¥‡æ€ªçš„éœ€æ±‚å¯¹å§ï¼Œæ˜æ˜å°±åº”è¯¥ä½¿ç”¨ TextView æ¥åšå±•ç¤ºï¼Œä½¿ç”¨ EditText æ¥åšè¾“å…¥ï¼Œä½†ç°å®å°±æ˜¯å¯èƒ½ä¸ºäº† UI ç»Ÿä¸€ï¼Œåˆæˆ–è€…æ˜¯å…¶ä»–ä¹±ä¸ƒå…«ç³Ÿçš„åŸå› ï¼Œå°±å¾—è¿™ä¹ˆå®ç°ã€‚ æ¯”å¦‚åœ¨ä¹‹å‰çš„ã€PassBoxã€å’Œã€HacppleStoreã€ï¼Œæˆ‘å°±æ˜¯è¿™ä¹ˆå¹²çš„ã€‚ é‚£ä¹ˆåœ¨ Android ä¸­åº”å¦‚ä½•å°† EditText è®¾ç½®ä¸ºä¸å¯ç¼–è¾‘çŠ¶æ€å‘¢ï¼Ÿ æˆ‘æ€»ç»“äº†å‡ ç§æ–¹æ³•ï¼š android:editable &lt;EditText ... android:editable=&quot;false&quot; /&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒEditText å¹¶æ²¡æœ‰è·å–åˆ°ç„¦ç‚¹ï¼Œä½†ç‚¹å‡» EditText åï¼Œå°½ç®¡ç„¦ç‚¹é©¬ä¸Šè¢«æ¿€æ´»ï¼Œä½†è¾“å…¥æ³•å¹¶æ²¡æœ‰å¼¹å‡ºã€‚ éœ€è¦æé†’çš„æ˜¯ï¼Œè¯¥å±æ€§å·²ç»è¢«æ ‡è®°ä¸º @Deprecatedï¼š &lt;!-- If set, specifies that this TextView has an input method. It will be a textual one unless it has otherwise been specified. For TextView, this is false by default. For EditText, it is true by default. {@deprecated Use inputType instead.} --&gt; &lt;attr name=&quot;editable&quot; format=&quot;boolean&quot; /&gt; è™½ç„¶ä¸Šé¢æåˆ°ä½¿ç”¨ android:inputType æ¥ä»£æ›¿ï¼Œä½†æˆ‘æš‚æ—¶æ²¡æ‰¾åˆ°è¯¥å±æ€§çš„æ›¿ä»£æ–¹æ³•ã€‚ setKeyListener() åœ¨é€»è¾‘ä¸­ä½¿ç”¨ï¼š editText.setKeyListener(false); æ•ˆæœä¸ android:editable ç›¸åŒï¼Œé»˜è®¤æƒ…å†µä¸‹æ²¡æœ‰è·å–åˆ°ç„¦ç‚¹ï¼Œç‚¹å‡»åç„¦ç‚¹è¢«æ¿€æ´»ï¼Œè¾“å…¥æ³•æ²¡æœ‰å¼¹å‡ºã€‚ setKeyListener() å®é™…ä¸Šæ˜¯ç»§æ‰¿è‡ª TextView çš„ä¸€ä¸ªæ–¹æ³•ï¼Œä¼ å…¥ null å³ä¸ºç¦æ­¢ç”¨æˆ·è¾“å…¥ã€‚ android:focusable / setFocusable() åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼š &lt;EditText ... android:focusable=&quot;false&quot; /&gt; æˆ–ä½¿ç”¨é€»è¾‘æ§åˆ¶ï¼š editText.setFocusable(false) // boolean editText.setFocusable(View.NOT_FOCUSABLE); // int æ•ˆæœå¦‚ä¸‹ï¼š è¿™å…¶å®æ˜¯ç»§æ‰¿è‡ª View çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºæ§åˆ¶å¯¹åº”çš„ View èƒ½å¦è·å–ç„¦ç‚¹ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒEditText å¹¶æ²¡æœ‰è·å–åˆ°ç„¦ç‚¹ï¼Œè§¦æ‘¸æ—¶ EditText è·å–åˆ°ç„¦ç‚¹ï¼Œå¹¶åœ¨è§¦æ‘¸ç»“æŸåå¤±å»ç„¦ç‚¹ï¼Œè€Œé€šè¿‡é•¿æŒ‰å¯ä»¥å°†å‰ªè´´æ¿çš„å†…å®¹ç²˜è´´è‡³ EditText å†…ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒsetFocusable() åšäº†æ–¹æ³•é‡è½½ï¼Œä½¿ç”¨ int ç±»å‹å‚æ•°åˆ™éœ€è¦åˆ° API 26 æ‰æ”¯æŒã€‚ android:focusableInTouchMode / setFocusableInTouchMode() åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼š &lt;EditText ... android:focusableInTouchMode=&quot;false&quot; /&gt; æˆ–ä½¿ç”¨é€»è¾‘æ§åˆ¶ï¼š editText.setFocusableInTouchMode(false); è¯¥æ–¹æ³•æ•ˆæœå’Œ android:focusable ä¹Ÿä¸€æ ·ï¼ŒåŒæ ·æ˜¯ç»§æ‰¿è‡ª View çš„ä¸€ä¸ªå±æ€§ï¼Œç”¨äºæ§åˆ¶å¯¹åº”çš„ View åœ¨è§¦æ‘¸æ—¶èƒ½å¦è·å–ç„¦ç‚¹ã€‚ android:enabled / setEnabled() åœ¨å¸ƒå±€æ–‡ä»¶ä¸­ï¼š &lt;EditText ... android:enabled=&quot;false&quot; /&gt; æˆ–ä½¿ç”¨é€»è¾‘æ§åˆ¶ï¼š editText.setEnabled(false); æ•ˆæœå¦‚ä¸‹ï¼š ç¼–è¾‘æ¡†å®Œå…¨å¤±å»ç„¦ç‚¹ï¼Œå³æ— æ³•é€šè¿‡ç²˜è´´çš„æ–¹æ³•ä¿®æ”¹è¾“å…¥å†…å®¹ï¼Œä½†æ˜¯æ•´ä¸ªç¼–è¾‘æ¡†å˜æˆäº†æš—è‰²çŠ¶æ€ï¼Œä¸æ˜“äºé˜…è¯»ã€‚ android:longClickable / setLongClickable() ä¸ºäº†å¯ä»¥æ¸…æ™°æ˜¾ç¤ºï¼Œå¹¶ä¸”ä¸å¯ä»¥é€šè¿‡ç²˜è´´çš„æ–¹å¼ç¼–è¾‘ï¼Œæˆ‘ä»¬å¯ä»¥è€ƒè™‘å¼•å…¥ä¸€äº›å…¶ä»–çš„è§£å†³æ–¹æ³•ã€‚ é€šè¿‡ç²˜è´´æ–¹å¼ç¼–è¾‘ï¼Œå®é™…æ“ä½œè¿‡ç¨‹æ˜¯é€šè¿‡é•¿æŒ‰ EditText ä»¥å¼¹å‡ºå¯¹åº”çš„æ“ä½œæµ®çª—ï¼Œæ‰å¾—ä»¥å®Œæˆç²˜è´´æ“ä½œï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥ç¦ç”¨é•¿æŒ‰æ“ä½œï¼Œæ¥é¿å…ç”¨æˆ·è¿›è¡Œç²˜è´´ã€‚ åœ¨å¸ƒå±€ä¸­ï¼š &lt;EditText ... android:focusable=&quot;false&quot; android:longClickable=&quot;false&quot; /&gt; æˆ–ä½¿ç”¨é€»è¾‘æ§åˆ¶ï¼š editText.setFocusable(false); editText.setLongClickable(false); æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ–‡å­—èƒ½å¤Ÿæ¸…æ™°æ˜¾ç¤ºï¼Œé•¿æŒ‰ EditText æ—¶ä¹Ÿæ— æ³•å‘¼å‡ºæ“ä½œæµ®çª—ï¼Œä½¿ç”¨ android:focusable æˆ– setFocusable() æ¥æ­é…ä½¿ç”¨ï¼Œå› æ­¤åŒæ—¶ä¹Ÿå…·å¤‡äº†ç›¸åŒçš„ç¼ºç‚¹ï¼Œå°±æ˜¯è§¦æ‘¸æ—¶ EditText ä»ç„¶ä¼šè·å–ç„¦ç‚¹ï¼Œä½†å› ä¸ºå·²ç»ç¦ç”¨äº†é•¿æŒ‰ï¼Œæ‰€ä»¥ä¸ä¼šäº§ç”ŸåŠŸèƒ½ä¸Šçš„é—®é¢˜ã€‚ å¦‚æœè¿˜æ˜¯ä¸æƒ³å­˜åœ¨ç„¦ç‚¹æ•ˆæœï¼Œæ·»åŠ ä¸ªèƒŒæ™¯å³å¯ã€‚ è‡ªå®šä¹‰ EditText æ²¡æœ‰ä»€ä¹ˆæ•ˆæœæ˜¯è‡ªå®šä¹‰ View è§£å†³ä¸äº†çš„ã€‚ public class NonEditableEditText extends AppCompatEditText { public NonEditableEditText(Context context, AttributeSet attrs) { super(context, attrs); } @Override public boolean onTouchEvent(MotionEvent event) { return true; } } å…¶å®ä¸éœ€è¦å¤šå¤æ‚ï¼Œåªéœ€è¦é‡å†™ onTouchEvent() æ–¹æ³•å³å¯ï¼Œè¿™é‡Œæ¶‰åŠåˆ° View çš„äº‹ä»¶åˆ†å‘æœºåˆ¶ï¼Œç®€å•æ¥è¯´ï¼Œè¿”å› true ä»£è¡¨å½“å‰ View å·²ç»å®Œæ•´åœ°å¤„ç†äº†è¯¥äº‹ä»¶ï¼Œä¸”ä¸å¸Œæœ›ä¸Šå±‚ ViewGroup å…¶ä»–å›è°ƒæ–¹æ³•å†æ¬¡å¤„ç†ã€‚ æˆ‘ä»¬åªéœ€è¦åœ¨å¸ƒå±€ä¸­ä½¿ç”¨è¯¥è‡ªå®šä¹‰æ§ä»¶ï¼š &lt;com.custom.widget.NonEditableEditText ... /&gt; æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ— è®ºæ˜¯ç‚¹å‡»è¿˜æ˜¯é•¿æŒ‰ï¼Œè¯¥è‡ªå®šä¹‰çš„ EditText éƒ½ä¸ä¼šè·å–ç„¦ç‚¹ï¼Œå› ä¸ºå®ƒå¹¶ä¸ä¼šå¯¹æˆ‘ä»¬çš„è§¦æ‘¸äº‹ä»¶åšä»»ä½•å¤„ç†ã€‚ ","link":"https://LiarrDev.github.io/post/Android-Non-Editable-EditText/"},{"title":"Android åˆ©ç”¨ Glide è·å–å›¾ç‰‡çš„å®é™…å°ºå¯¸","content":"æœ€è¿‘æœ‰ä¸ªç¾¤å‹æäº†ä¸€ä¸ªæŒºæœ‰æ„æ€çš„é—®é¢˜ï¼Œå½“ä½¿ç”¨ Glide åŠ è½½å›¾ç‰‡æ—¶ï¼Œå‡å¦‚ä¸è®¾ç½® ImageView çš„å®½é«˜ï¼Œä¼šå‡ºç°æ˜¾ç¤ºä¸å¯æ§çš„æƒ…å†µã€‚ ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿæˆ‘ä»¬æ¥å¤ç°ä¸€ä¸‹ä»–çš„æƒ…å†µã€‚ è¿™ä½ç¾¤å‹ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€å¼ è¡¨æƒ…åŒ…å›¾ç‰‡ï¼š è¦ä¸æ˜¯æˆ‘ä»¬æ˜¯æ­£å„¿å…«ç»çš„å­¦æœ¯è®¨è®ºç¾¤ï¼Œå¯èƒ½è¿™ä½ç¾¤å‹å·²ç»è¢«é”¤æ­»äº†â€¦ å½“ç„¶ï¼Œè¿™ä¸ªè¡¨æƒ…åŒ…æ˜¯ä½¿ç”¨ä¸€ä¸ª URL æä¾›çš„ï¼Œå®é™…ä¸Šåªæ˜¯ç›¸å½“äºæ¨¡æ‹Ÿä»åç«¯è·å–å›¾ç‰‡æ—¶çš„åœºæ™¯ï¼Œå› ä¸ºä¸€èˆ¬è¿™ç§æƒ…å†µåç«¯æ˜¯ä¸ä¼šç‰¹æ„å°†å›¾ç‰‡å°ºå¯¸æä¾›ç»™æˆ‘ä»¬çš„ï¼Œå…¶å®ä½ ä¹Ÿå¯ä»¥å°†å›¾ç‰‡æ”¾åœ¨ Assets Folder ä¸­ï¼ŒåŒæ ·èƒ½å¤Ÿå¤ç°ï¼Œä½†åˆ«æ”¾åœ¨ /res/drawable æˆ–è€… /res/mipmap æ–‡ä»¶å¤¹å†…ï¼Œå› ä¸ºç³»ç»Ÿä¼šæ ¹æ®å±å¹•åˆ†è¾¨ç‡å¯¹å…¶è¿›è¡Œç¼©æ”¾ã€‚ æˆ‘å…ˆæŠŠè¿™å¼ å›¾ç‰‡ä¸‹è½½ä¸‹æ¥ï¼Œçœ‹ä¸€ä¸‹å®ƒçš„å®é™…å°ºå¯¸ï¼š å¯ä»¥çœ‹åˆ°è¿™å¼ å›¾ç‰‡çš„å°ºå¯¸ä¸º 100 Ã— 97 åƒç´ ï¼Œå¹¶ä¸å¤§ï¼Œæˆ‘ä»¬åœ¨é¡¹ç›®ä¸­å®é™…åŠ è½½çœ‹çœ‹ã€‚ é¦–å…ˆéšä¾¿å†™ä¸€ä¸ªç®€å•çš„å¸ƒå±€ç”¨äºåŠ è½½è¿™å¼ å›¾ç‰‡ï¼š &lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:background=&quot;@android:color/background_dark&quot; tools:context=&quot;.MainActivity&quot;&gt; &lt;ImageView android:id=&quot;@+id/image&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; app:layout_constraintLeft_toLeftOf=&quot;parent&quot; app:layout_constraintRight_toRightOf=&quot;parent&quot; app:layout_constraintTop_toTopOf=&quot;parent&quot; /&gt; &lt;/androidx.constraintlayout.widget.ConstraintLayout&gt; å› ä¸ºã€Android Studioã€æ–°å»ºé¡¹ç›®æ—¶é»˜è®¤å°±é‡‡ç”¨äº†çº¦æŸå¸ƒå±€ï¼Œé‚£æˆ‘è¿™é‡Œå°±ä¸åšä¿®æ”¹äº†ï¼Œè®© ImageView ç½®äºå±å¹•çš„ä¸­å¤®ï¼Œå› ä¸ºç¾¤å‹æåˆ°ä¸è®¾ç½®å®½é«˜ï¼Œæ‰€ä»¥è¿™é‡Œå®½é«˜æˆ‘éƒ½å®šä¸º wrap_contentï¼Œå¦å¤–ç”±äºè¡¨æƒ…åŒ…æ˜¯ç™½åº•çš„ï¼Œæ‰€ä»¥æˆ‘ç»™äº†ä¸€ä¸ªæ·±è‰²çš„èƒŒæ™¯ä»¥æ›´å¥½çš„çœ‹å‡ºå…¶æ˜¾ç¤ºè¾¹ç•Œã€‚ ä¸ºäº†å¯¹æ¯”ï¼Œæˆ‘è¦é‡‡ç”¨ä¸¤ç§åŠ è½½æ–¹å¼ï¼Œä¸€ç§æ˜¯åŸç”Ÿ API çš„åŠ è½½ï¼Œå¦ä¸€ç§å°±æ˜¯ Glideã€‚ åŸç”ŸåŠ è½½æ–¹å¼ä¸å¤æ‚ï¼Œé€šè¿‡ URL è·å–æµå¹¶å°†å…¶è§£ç ä¸º Bitmap å³å¯ï¼š public class MainActivity extends AppCompatActivity { String url = &quot;http://wx4.sinaimg.cn/bmiddle/b64da6adly1gjbwvv4es7j202s02p0sk.jpg&quot;; @Override protected void onCreate(Bundle savedInstanceState) { ... final ImageView imageView = findViewById(R.id.sticker); new Thread(() -&gt; { try { final Bitmap bitmap = BitmapFactory.decodeStream(new URL(url).openStream()); runOnUiThread(() -&gt; imageView.setImageBitmap(bitmap)); } catch (IOException e) { e.printStackTrace(); } }).start(); } } éœ€è¦æ³¨æ„çš„æ˜¯ç”±äºæˆ‘ä»¬æ˜¯åŠ è½½ç½‘ç»œå›¾ç‰‡ï¼Œå°½ç®¡æˆ‘ä»¬å¹¶æ²¡æœ‰æ˜¾å¼çš„å†™å‡ºç½‘ç»œè¯·æ±‚çš„ä»£ç ï¼Œå®ƒå®é™…ä¸Šæ˜¯åšäº†ç½‘ç»œè¯·æ±‚çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½åœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œè€Œå°†å›¾ç‰‡åŠ è½½åˆ° ImageView æ—¶æ˜¯ UI æ“ä½œï¼Œåˆéœ€è¦åˆ‡å›åˆ°ä¸»çº¿ç¨‹ã€‚ Glide çš„åŠ è½½æ–¹å¼æ›´åŠ ç®€å•ï¼Œä¹‹å‰ã€ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€ŒGlideã€ã€ä¸€æ–‡ä¹Ÿåšäº†è¯¦ç»†çš„ä»‹ç»ï¼Œè€Œä¸”å› ä¸º Glide å†…éƒ¨å·²ç»å¸®æˆ‘ä»¬åšäº†å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸å†éœ€è¦å…³å¿ƒçº¿ç¨‹çš„é—®é¢˜äº†ï¼Œä¸€è¡Œä»£ç æå®šï¼š public class MainActivity extends AppCompatActivity { String url = &quot;http://wx4.sinaimg.cn/bmiddle/b64da6adly1gjbwvv4es7j202s02p0sk.jpg&quot;; @Override protected void onCreate(Bundle savedInstanceState) { ... final ImageView imageView = findViewById(R.id.sticker); Glide.with(this).load(url).into(imageView); } } ç»“æœçš„ç¡®å¦‚ç¾¤å‹æ‰€è¯´ï¼ŒGlide åŠ è½½çš„å›¾ç‰‡æ˜¾ç¤ºçš„å¹¶ä¸æ˜¯å®é™…å°ºå¯¸ï¼š å›¾ç‰‡å®é™…å¤§å° Glide åŠ è½½å‡ºæ¥çš„å¤§å° æˆ‘ä»¬ç›‘å¬ä¸€ä¸‹ Glide åŠ è½½å‡ºæ¥çš„å°ºå¯¸ï¼š Glide.with(this) .asBitmap() .load(url) .listener(new RequestListener&lt;Bitmap&gt;() { @Override public boolean onLoadFailed(@Nullable GlideException e, Object model, Target&lt;Bitmap&gt; target, boolean isFirstResource) { return false; } @Override public boolean onResourceReady(Bitmap resource, Object model, Target&lt;Bitmap&gt; target, DataSource dataSource, boolean isFirstResource) { int width = resource.getWidth(); int height = resource.getHeight(); Log.d(TAG, &quot;Width: &quot; + width); Log.d(TAG, &quot;Height: &quot; + height); return false; } }) .into(imageView); å¥½å®¶ä¼™ï¼ŒåŠ è½½çš„å°ºå¯¸ä¸º 2139 Ã— 2075 åƒç´ ï¼Œè¿™æ˜æ˜¾ä¸å¯¹åŠ²å‘€ã€‚å…¶å®è¿™å¹¶ä¸æ˜¯å›¾ç‰‡çš„å°ºå¯¸å¤§å°ï¼Œè€Œæ˜¯åŠ è½½å›¾ç‰‡åçš„ ImageView çš„å¤§å°ï¼Œä¹Ÿå°±æ˜¯å›¾ç‰‡æ˜¾ç¤ºæ—¶çš„å¤§å°ã€‚ é‚£æˆ‘ä»¬èƒ½å¦è·å–åˆ°å›¾ç‰‡çš„å®é™…å°ºå¯¸å‘¢ï¼Ÿ å½“ç„¶å¯ä»¥ã€‚ Glide.with(this) .asBitmap() .load(url) .into(new SimpleTarget&lt;Bitmap&gt;() { @Override public void onResourceReady(@NonNull Bitmap resource, @Nullable Transition&lt;? super Bitmap&gt; transition) { int realWidth = resource.getWidth(); int realHeight = resource.getHeight(); Log.d(TAG, &quot;Real Width: &quot; + realWidth); Log.d(TAG, &quot;Real Height: &quot; + realHeight); } }); è¿™é‡Œè·å–åˆ°çš„å°ºå¯¸å°±æ˜¯å®é™…çš„ 100 Ã— 97 åƒç´ äº†ã€‚ ç„¶åä½ å¯èƒ½ä¼šå‘ç°ï¼Œè¿™ä¸ªè·å–å®é™…å°ºå¯¸çš„æ–¹æ³•æ˜¯åœ¨ into() é‡Œé¢çš„ï¼Œé‚£æ²¡æœ‰æŠŠ ImageView å®ä¾‹ä¼ è¿›å»ï¼Œå®ƒä¸èƒ½å¤ŸåŠ è½½æˆ‘ä»¬çš„å›¾ç‰‡å•Šã€‚ å…¶å®æˆ‘ä»¬åªéœ€è¦ç”¨å›æœ€åŸå§‹çš„æ–¹æ³•å³å¯ï¼š Glide.with(this) .asBitmap() .load(url) .into(new SimpleTarget&lt;Bitmap&gt;() { @Override public void onResourceReady(@NonNull Bitmap resource, @Nullable Transition&lt;? super Bitmap&gt; transition) { imageView.setImageBitmap(resource); } }); å½“ç„¶ä½ ä¸å«Œéº»çƒ¦çš„è¯ä¹Ÿå¯ä»¥ç”¨ Glide é‡æ–°åŠ è½½ä¸€éï¼š Glide.with(this) .asBitmap() .load(url) .into(new SimpleTarget&lt;Bitmap&gt;() { @Override public void onResourceReady(@NonNull Bitmap resource, @Nullable Transition&lt;? super Bitmap&gt; transition) { Glide.with(imageView) .load(resource) .override(resource.getWidth(), resource.getHeight()) .into(imageView); } }); è¯´å®è¯è¿™ç§åº”ç”¨åœºæ™¯æˆ‘è‡³ä»Šè¿˜æ²¡æœ‰é‡åˆ°è¿‡ï¼Œæ€»æ„Ÿè§‰ ImageView ä¸ç¡®å®šå°ºå¯¸çš„è¯å¾ˆå®¹æ˜“ä¼šäº§ç”Ÿå±å¹•é€‚é…é—®é¢˜ã€‚ ä½†è½¬å¿µä¸€æƒ³ï¼Œåœ¨å¾®ä¿¡èŠå¤©ç•Œé¢çš„è¡¨æƒ…åŒ…ä¼¼ä¹æ˜¯å¯ä»¥æ ¹æ®å›¾ç‰‡å°ºå¯¸æ˜¾ç¤ºçš„ï¼Œåº”è¯¥å­˜åœ¨ä¸€ä¸ªé˜ˆå€¼ï¼Œå½“è¡¨æƒ…åŒ…çš„å°ºå¯¸å¤§äºç­‰äºè¿™ä¸ªé˜ˆå€¼æ—¶ï¼ŒæŒ‰ç…§è¿™ä¸ªé˜ˆå€¼ç¼©æ”¾æ˜¾ç¤ºï¼Œå½“è¡¨æƒ…åŒ…çš„å°ºå¯¸å°äºè¿™ä¸ªé˜ˆå€¼æ—¶ï¼Œå°±æŒ‰ç…§å®é™…å¤§å°æ˜¾ç¤ºã€‚ ç”±äºä¸Šé¢çš„åœºæ™¯æˆ‘ä»¬åªå¤„ç†äº†å°å›¾åŠ è½½çš„é—®é¢˜ï¼Œå› æ­¤ä¸Šé¢çš„æ–¹æ³•ä¸èƒ½å¤Ÿç›´æ¥åº”ç”¨åˆ°é¡¹ç›®ä¸­ï¼Œå¦åˆ™åŠ è½½å¤§å›¾çš„æ—¶å€™ä¹Ÿä¼šäº§ç”Ÿä¸å¯æ§ï¼Œæ›´ç”šçš„æ˜¯å¤§å›¾è¿˜å®¹æ˜“é€ æˆ OOMã€‚ è€Œå¦ä¸€ç§åœºæ™¯ï¼Œä¸€äº› App æœ‰çœæµæ¨¡å¼çš„åŠŸèƒ½ï¼Œå¯ä»¥åªæ˜¾ç¤ºæ–‡å­—è€Œä¸åŠ è½½å›¾ç‰‡ï¼Œä½†æ˜¯å…¶æ˜¾ç¤ºçš„å ä½å›¾å’Œå®é™…å›¾ç‰‡çš„å®½é«˜æ˜¯ä¸€è‡´çš„ï¼Œè¿™ç§å°±ä¸èƒ½ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•æ¥å¤„ç†äº†ï¼Œå› ä¸ºä½¿ç”¨äº†ä¸Šé¢çš„æ–¹æ³•å°±ä¼šå»è¯·æ±‚å›¾ç‰‡ï¼Œä¹Ÿå°±è¾¾ä¸åˆ°çœæµçš„ç›®çš„ï¼Œç†è®ºä¸Šåº”ç”±åç«¯å°†å›¾ç‰‡çš„å°ºå¯¸è¿”å›ï¼Œå†ç”±å®¢æˆ·ç«¯ç”Ÿæˆå ä½å›¾ã€‚ ","link":"https://LiarrDev.github.io/post/Get-the-Actual-Size-of-Image-with-Glide-in-Android/"},{"title":"Android æ˜Ÿçº§è¯„åˆ†æ¡","content":"é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°ä¸€ä¸ªç±»ä¼¼æ·˜å®è¯„è®ºçš„æ˜Ÿçº§è¯„åˆ†æ¡ï¼Œæ—¢ä½œä¸ºè¯„ä»·æ—¶çš„è¯„åˆ†ï¼Œä¹Ÿç”¨äºç”¨æˆ·ä¸ªäººè¯„åˆ†å±•ç¤ºã€‚ ä¸€æƒ³ï¼Œè¿™è¿˜ä¸ç®€å•ï¼Œä»å›¾æ ‡åº“ä¸­è½½å…¥æ»¡æ˜Ÿã€åŠæ˜Ÿå’Œç©ºæ˜Ÿä¸‰ä¸ªå›¾æ ‡ï¼Œè®¾è®¡åˆ¤æ–­é€»è¾‘ï¼Œå½“è·å–åˆ†æ•°çš„å€¼æ—¶ï¼Œç‚¹äº®ç›¸åº”çš„æ˜Ÿæ˜Ÿæ•°é‡ï¼Œå®Œæˆã€‚ å†™å®Œè¯¥é€»è¾‘åï¼Œå´å‘ç°ä»£ç é‡ååˆ†å·¨å¤§ï¼Œè™½è¯´ç®€å•ï¼Œä½†å†—ä½™ã€‚ æŸ¥äº†æ–‡æ¡£å‘ç°ï¼ŒAndroid æ—©å·²å†…ç½®äº†è¯¥åŠŸèƒ½ï¼Œåˆ«å†å‚»å‚»çš„åˆ¤æ–­åˆ†æ•°äº†ï¼Œä½ å¯ä»¥ä½¿ç”¨ RatingBar æˆ– AppCompatRatingBar ç®€å•ä¾¿æ·åœ°å®ç°ç›¸åŒçš„åŠŸèƒ½ã€‚ åŸºæœ¬ç”¨æ³• AppCompatRatingBar ç»§æ‰¿è‡ª RatingBarï¼Œè€Œ RatingBar ç»§æ‰¿è‡ª AbsSeekBarï¼ŒAbsSeekBar åˆç»§æ‰¿è‡ª ProgressBarï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒåŒæ ·æœ‰ ProgressBar çš„ç›¸å…³å±æ€§ã€‚ ä¸‹é¢æˆ‘ä½¿ç”¨ AppCompatRatingBar è¿›è¡Œæ¼”ç¤ºã€‚ çœ‹çœ‹ç›¸å…³å±æ€§ï¼š android:isIndicatorï¼šæ˜¯å¦ç”¨ä½œæŒ‡ç¤ºï¼Œé»˜è®¤ä¸º false android:numStarsï¼šæ˜Ÿæ˜Ÿæ€»æ•°ï¼Œæ•´å‹ï¼Œé»˜è®¤ä¸º 5 android:ratingï¼šé»˜è®¤è¯„åˆ†å€¼ï¼Œæµ®ç‚¹å‹ï¼Œé»˜è®¤ä¸º 0 android:stepSizeï¼šè¯„åˆ†æ¯æ¬¡å¢åŠ çš„å€¼ï¼Œæµ®ç‚¹å‹ï¼Œé»˜è®¤ä¸º 0.5 äº”æ˜Ÿè¯„åˆ†æ¡å°±å¯ä»¥åšæˆå¦‚ä¸‹çš„æ•ˆæœï¼š ä¸éš¾çœ‹å‡ºç”¨ä½œæŒ‡ç¤ºçš„æ˜Ÿæ˜Ÿæ¡ç‚¹å‡»æ— æ³•ä¿®æ”¹å…¶æ•°å€¼ã€‚ å…¶è¿˜å†…ç½®äº†å‡ ç§å¸¸ç”¨çš„ Style ä¾›ä½ é€‰æ‹©ï¼Œå¦‚åå°äº›çš„ï¼š &lt;androidx.appcompat.widget.AppCompatRatingBar ... style=&quot;?attr/ratingBarStyleIndicator&quot; /&gt; å¦‚å…¶åï¼Œè¯¥ Style é€‚ç”¨äºå±•ç¤ºã€‚ è¿˜æœ‰æ›´å°çš„ï¼š &lt;androidx.appcompat.widget.AppCompatRatingBar ... style=&quot;?attr/ratingBarStyleSmall&quot; /&gt; é»˜è®¤ä½¿ç”¨æœ€å¤§çš„ï¼š &lt;androidx.appcompat.widget.AppCompatRatingBar ... style=&quot;?attr/ratingBarStyle&quot; /&gt; ä¸‰ç§ Style æ¯”è¾ƒå¦‚ä¸‹ï¼š è‡ªå®šä¹‰ Style å¦‚æœä¸æƒ³ä½¿ç”¨é»˜è®¤çš„æ˜Ÿæ˜Ÿï¼Œå…¶ä¹Ÿæ”¯æŒè‡ªå®šä¹‰ã€‚ è¿™é‡Œéœ€è¦ç”¨åˆ° layer-listï¼Œç®€å•è§£é‡Šä¸€ä¸‹ï¼Œlayer æ˜¯å±‚ï¼Œlist æ˜¯åˆ—è¡¨ï¼Œé‚£ä¹ˆ layer-list å°±æ˜¯å±‚åˆ—è¡¨çš„æ„æ€ï¼ŒåŸç†æ˜¯å›¾å±‚ä¸€å±‚å±‚çš„å åŠ ï¼Œåæ·»åŠ çš„ä¼šè¦†ç›–å…ˆæ·»åŠ çš„ï¼Œä¹Ÿå°±æ˜¯å¯ä»¥å°†å¤šä¸ª Drawable æŒ‰ç…§é¡ºåºå±‚å åœ¨ä¸€èµ·æ˜¾ç¤ºï¼Œæ‰€ä»¥ layer-list å®é™…ä¸Šä¹Ÿæ˜¯ä¸ª Drawable èµ„æºã€‚ å…ˆæ‰¾æ¥ä¸¤ä¸ªç¬‘è„¸ç´ æï¼š åœ¨ã€Œdrawableã€æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºã€Œratingbar_layerlist.xmlã€æ–‡ä»¶ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;item android:id=&quot;@android:id/background&quot; android:drawable=&quot;@drawable/ic_rating_off&quot; /&gt; &lt;item android:id=&quot;@android:id/progress&quot; android:drawable=&quot;@drawable/ic_rating_on&quot; /&gt; &lt;/layer-list&gt; è¿™é‡Œéœ€è¦è®¾ç½®ä¸ºæŒ‡å®šçš„ ID åç§°ï¼Œæ‰å¯ä»¥å®ç° RatingBar çš„æ•ˆæœã€‚ ç´§æ¥ç€åœ¨ã€Œvaluesã€æ–‡ä»¶å¤¹ä¸‹çš„ã€Œstyles.xmlã€æ–‡ä»¶ä¸­å¢åŠ è‡ªå®šä¹‰çš„ Styleï¼š &lt;resources&gt; ... &lt;style name=&quot;smileRatingBar&quot; parent=&quot;Widget.AppCompat.RatingBar&quot;&gt; &lt;item name=&quot;android:progressDrawable&quot;&gt;@drawable/ratingbar_layerlist&lt;/item&gt; &lt;item name=&quot;android:minHeight&quot;&gt;24dp&lt;/item&gt; &lt;item name=&quot;android:maxHeight&quot;&gt;24dp&lt;/item&gt; &lt;/style&gt; &lt;/resources&gt; ç„¶åå°±å¯ä»¥åœ¨ AppCompatRatingBar ä¸­ä½¿ç”¨äº†ï¼š &lt;androidx.appcompat.widget.AppCompatRatingBar ... style=&quot;@style/smileRatingBar&quot; /&gt; æ•ˆæœå¦‚ä¸‹ï¼š ç›‘å¬ RatingBar æä¾›äº†ä¸€äº›æ–¹æ³•è®©æˆ‘ä»¬èƒ½å¤Ÿæ–¹ä¾¿åœ°ç›‘å¬çŠ¶æ€ã€‚ æ¯”å¦‚ç›‘å¬å…¶ rating å€¼çš„å˜åŒ–ï¼š ratingBar.setOnRatingBarChangeListener(new RatingBar.OnRatingBarChangeListener() { @Override public void onRatingChanged(RatingBar ratingBar, float rating, boolean fromUser) { Toast.makeText(MainActivity.this, &quot;Rating: &quot; + rating, Toast.LENGTH_LONG).show(); } }); å…¶å®ç›‘å¬äº‹ä»¶æˆ‘ä¸€èˆ¬ä½¿ç”¨å¾—æ¯”è¾ƒå°‘ï¼Œå› ä¸ºæ²¡æœ‰å¤ªå¤šå¿…è¦æ—¶åˆ»ç›‘å¬å…¶åŠ¨æ€å˜åŒ–ï¼Œæ¯”å¦‚è¯„ä»·çš„æ—¶å€™ï¼Œæˆ‘åªéœ€åœ¨ç”¨æˆ·æäº¤çš„æ—¶å€™è·å–å…¶æœ€ç»ˆçš„ç»“æœå€¼å³å¯ï¼š float rating = ratingBar.getRating(); æ—¢ç„¶æœ‰ Get æ–¹æ³•ï¼Œé‚£åŒæ ·ä¹Ÿæœ‰ Set æ–¹æ³•ï¼Œä¸€èˆ¬ä½œä¸ºæŒ‡ç¤ºçš„æ—¶å€™ä½¿ç”¨ï¼š ratingBar.setRating(rating); å¯ä»¥çœ‹åˆ°ï¼Œæ‰€æœ‰å…³äºåˆ†å€¼çš„å‚æ•°éƒ½æ˜¯ float ç±»å‹ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­è¦æ³¨æ„ä¸è¦å¼„é”™ï¼Œé¿å…ä¸å¿…è¦çš„éº»çƒ¦ã€‚ ","link":"https://LiarrDev.github.io/post/Android-Rating-Bar/"},{"title":"Android æ—¥æœŸé€‰æ‹©å™¨","content":"é¡¹ç›®éœ€è¦å®ç°é¢„çº¦åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±éœ€è¦è·å–ç”¨æˆ·é¢„çº¦çš„æ—¥æœŸï¼Œè®©ç”¨æˆ·å¡«å†™æ˜¯ä¸æ˜æ™ºçš„é€‰æ‹©ï¼Œå› ä¸ºæ¯ä¸ªäººçš„å†™æ³•ä¸ä¸€è‡´ï¼Œå¦‚æœ‰äººå–œæ¬¢å†™æˆâ€œ2019.01.01â€ï¼Œè€Œæœ‰äººå–œæ¬¢å†™æˆâ€œ2019-01-01â€ï¼Œè¿˜æœ‰äººå–œæ¬¢å†™â€œ2019 å¹´ 1 æœˆ 1 æ—¥â€ï¼Œè¿™æ ·æ··ä¹±çš„æ ¼å¼å­˜å‚¨åœ¨åå°ä¸­ä¼šä¸æ–¹ä¾¿æ£€ç´¢ã€‚ é‚£ä¹ˆä½¿ç”¨æ—¥æœŸé€‰æ‹©å™¨æ¥ç»Ÿä¸€æ ¼å¼æ— è®ºæ˜¯å¯¹ç”¨æˆ·è¿˜æ˜¯å¯¹å¼€å‘è€…è€Œè¨€éƒ½æ˜¯æ›´åŠ å‹å¥½çš„ã€‚ é€šå¸¸æƒ…å†µä¸‹æˆ‘ä»¬ä¼šä½¿ç”¨å¼¹çª—æ¥å±•ç¤ºæ—¥æœŸé€‰æ‹©å™¨ï¼Œæˆ‘ä»¬åˆ©ç”¨ Android ä¸­å†…ç½®çš„æ§ä»¶å°±å¯ä»¥å®ç°ã€‚ DatePicker DatePicker å®é™…ä¸Šå°±æ˜¯ä¸€ä¸ªå•çº¯çš„æ—¥æœŸé€‰æ‹©å™¨æ§ä»¶ï¼Œä¸ºäº†ä½¿ç”¨å¼¹çª—å±•ç¤ºï¼Œæˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰ä¸€ä¸ª Dialog æ¥å®ç°ï¼Œå¯å‚è€ƒã€Android è‡ªå®šä¹‰ Dialog å¸ƒå±€ã€ã€‚ åœ¨å¸ƒå±€ä¸­åŠ å…¥ DatePickerï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:gravity=&quot;center&quot; android:padding=&quot;8dp&quot;&gt; &lt;DatePicker android:id=&quot;@+id/date_picker&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; /&gt; &lt;/LinearLayout&gt; å†è®¾è®¡å…¶å“åº”é€»è¾‘ï¼š public static void showDatePicker(Context context) { final Calendar calendar = Calendar.getInstance(); View datePickerView = LayoutInflater.from(context).inflate(R.layout.date_picker_dialog, null); DatePicker datePicker = datePickerView.findViewById(R.id.date_picker); datePicker.setMinDate(calendar.getTimeInMillis()); datePicker.init(calendar.get(Calendar.YEAR), calendar.get(Calendar.MONTH), calendar.get(Calendar.DAY_OF_MONTH), new DatePicker.OnDateChangedListener() { @Override public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) { calendar.set(year, monthOfYear, dayOfMonth); SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); textView.setText(format.format(calendar.getTime())); // textView.setText(year + &quot;-&quot; + (monthOfYear + 1) + &quot;-&quot; + dayOfMonth); } }); final AlertDialog dialog = new AlertDialog.Builder(context).create(); dialog.setCanceledOnTouchOutside(false); dialog.setCancelable(false); dialog.setView(datePickerView); dialog.setButton(DialogInterface.BUTTON_POSITIVE, &quot;OK&quot;, new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialog, int which) { dialog.dismiss(); } }); dialog.show(); } è½½å…¥è‡ªå®šä¹‰å¸ƒå±€åï¼Œè°ƒç”¨ DatePicker.setMinDate() æ–¹æ³•æ¥è®¾ç½®æœ€å°å¯é€‰æ‹©çš„æ—¥æœŸï¼ŒåŒç†ï¼Œè°ƒç”¨ DatePicker.setMaxDate() æ–¹æ³•æ¥è®¾ç½®æœ€å¤§å¯é€‰æ‹©çš„æ—¥æœŸï¼Œå¦å¤–è¿˜æœ‰å¦‚ DatePicker.setFirstDayOfWeek() è®¾ç½®æ¯å‘¨çš„ç¬¬ä¸€å¤©ç­‰å„ç§é…ç½®ï¼Œéœ€è¦çš„æ—¶å€™æŸ¥æŸ¥æ–‡æ¡£å³å¯ã€‚ æ¥ç€å°±æ˜¯å¯¹ DatePicker çš„åˆå§‹åŒ–æ“ä½œï¼ŒDatePicker.init() æ¥æ”¶ 4 ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯é»˜è®¤çš„å¹´æœˆæ—¥å’Œ DatePicker è¢«ä¿®æ”¹æ—¶å“åº”çš„äº‹ä»¶ï¼Œé»˜è®¤çš„å¹´æœˆæ—¥ä¸€èˆ¬è®¾å®šä¸ºå½“å‰æ—¶é—´ï¼Œå“åº”äº‹ä»¶ä¸ºäº†æ–¹ä¾¿æ¼”ç¤ºæˆ‘å°±ç”¨ TextView æ¥å±•ç¤ºè¿™ä¸ªæ—¥æœŸï¼Œè¿™é‡Œéœ€è¦æ³¨æ„ï¼Œå»ºè®®ä½¿ç”¨ SimpleDateFormat æ¥æ ¼å¼åŒ–æ—¥æœŸï¼Œå› ä¸ºæœˆä»½çš„è®¡æ•°æ˜¯ä» 0 å¼€å§‹çš„ï¼Œæ‰€ä»¥å¦‚æœç›´æ¥ä½¿ç”¨çš„è¯è¦è®°å¾—åŠ  1ã€‚ DatePicker è™½ç„¶æœ‰å•ç‹¬çš„ setOnDateChangedListener() æ–¹æ³•ï¼Œä½†å…¶è¦æ±‚ API 26 æ‰èƒ½å¤Ÿä½¿ç”¨ï¼š if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) { datePicker.setOnDateChangedListener(new DatePicker.OnDateChangedListener() { @Override public void onDateChanged(DatePicker view, int year, int monthOfYear, int dayOfMonth) { calendar.set(year, monthOfYear, dayOfMonth); SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); textView.setText(format.format(calendar.getTime())); } }); } å¦‚æœä»…è®¾å®šäº†å“åº”äº‹ä»¶è€Œæ²¡æœ‰åˆå§‹åŒ–é»˜è®¤æ—¥æœŸï¼ŒDatePicker ä¼šæŠŠå½“å‰æ—¥æœŸè®¾ä¸ºé»˜è®¤æ—¥æœŸã€‚ ç„¶åæ˜¯å…³äº AlertDialog çš„ä¸€äº›è®¾ç½®ï¼Œæˆ‘è®¾ç½®ä¸ºä¸å¯ä»¥ä»»ä½•æ–¹å¼å–æ¶ˆï¼Œå¹¶åŠ å…¥ä¸€ä¸ª PositiveButton å…³é—­è¿™ä¸ª AlertDialogï¼ŒåŸå› æ˜¯å½“ç”¨æˆ·ç‚¹å‡»æ—¥æœŸçš„æ—¶å€™ DatePicker å°±å·²å“åº”ï¼Œè€Œå½“å“åº”ç»“æŸä¹‹åï¼Œæ²¡æœ‰ä»»ä½•æç¤ºå‘Šè¯‰ç”¨æˆ·å·²ç»å¤„ç†å®Œè¯¥äº‹ä»¶ï¼Œé™¤éç”¨æˆ·ç‚¹å‡»è¿”å›æˆ–å…¶ä»–åœ°æ–¹å…³é—­è¯¥ AlertDialogï¼Œæ‰€ä»¥ç¦ç”¨å–æ¶ˆä»¥åŠä½¿ç”¨è¯¥ PositiveButton å…³é—­ AlertDialog æ˜¯ä¸ºäº†æ›´åŠ å‹å¥½çš„äº¤äº’ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥åœ¨ç”¨æˆ·ç‚¹å‡»æ—¥æœŸåç«‹å³å…³é—­ï¼Œä½†æˆ‘è®¤ä¸ºè¿™æ ·å‡å¦‚ç”¨æˆ·è¯¯è§¦åçš„ä¿®æ­£æ­¥éª¤å˜é•¿äº†ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š å¦å¤–ï¼Œä½¿ç”¨ DatePicker æ—¶å»ºè®®å…ˆåœ¨éœ€è¦ç”¨åˆ°çš„åœ°æ–¹è®¾å®šä¸€ä¸ªé»˜è®¤æ—¥æœŸï¼Œä¸€èˆ¬ä¹Ÿå°±æ˜¯ DatePicker.init() ä¸­è®¾å®šçš„æ—¥æœŸï¼Œå› ä¸º DatePicker ä»…åœ¨æ—¥æœŸæ”¹å˜æ—¶æ‰ä¼šä½œå‡ºå“åº”ï¼Œå¦‚æœç”¨æˆ·æ‰“å¼€ DatePicker æ—¥æœŸé€‰æ‹©å™¨åæ²¡æœ‰ç‚¹å‡»æ“ä½œè€Œæ˜¯ç›´æ¥å…³é—­æ—¥æœŸé€‰æ‹©å™¨ï¼ˆå› ä¸ºæœ‰é€‰æ‹©å™¨ä¸Šé»˜è®¤æ—¥æœŸï¼‰æ—¶ï¼Œå“åº”äº‹ä»¶å†…çš„é€»è¾‘å°†å¾—ä¸åˆ°æ‰§è¡Œï¼Œä¹Ÿå°±æ— æ³•è·å–åˆ°é€‰ä¸­çš„æ—¥æœŸï¼ˆå³é»˜è®¤çš„æ—¥æœŸï¼‰ã€‚å¦‚å›¾ï¼š é™¤äº†é»˜è®¤çš„æ—¥å†å¡æ ·å¼å¤–ï¼ŒDatePicker è¿˜æä¾›äº†å¸¸è§çš„æ»šè½®æ ·å¼ï¼š åªéœ€åœ¨æ§ä»¶ä¸­åŠ å…¥ä¸¤è¡Œå±æ€§ä»£ç å³å¯ï¼š &lt;DatePicker ... android:calendarViewShown=&quot;false&quot; android:datePickerMode=&quot;spinner&quot; /&gt; æ„æ€å°±æ˜¯æŒ‡å®šé€‰æ‹©å™¨æ ·å¼ä¸ºæ»šè½®æ ·å¼å¹¶éšè—æ—¥å†å¡ï¼Œå¦‚æœä»…è®¾ç½®æ»šè½®æ ·å¼è€Œä¸éšè—æ—¥å†å¡æ ·å¼çš„è¯é»˜è®¤æ˜¯ä¼šä¸¤ä¸ªåŒæ—¶å­˜åœ¨çš„ï¼š ä¸€æ¥æ²¡æœ‰å¿…è¦ï¼ŒäºŒæ¥ä¹Ÿå¤ªä¸‘ï¼Œç‰¹åˆ«åœ¨ç«–å±æ—¶æ§ä»¶å°±æŒ¤åˆ°å˜å½¢ï¼Œå½±å“ä½“éªŒã€‚ DatePickerDialog å†æ¥çœ‹çœ‹ DatePickerDialogï¼Œæœ›æ–‡ç”Ÿä¹‰ï¼ŒDatePickerDialog å°±æ˜¯ä¸€ä¸ªåŒ…å«äº† DatePicker çš„å¯¹è¯æ¡†ï¼Œä¹Ÿå°±æ˜¯è¯´ Android å¸®æˆ‘ä»¬æŠŠä¸Šé¢çš„å°è£…å®Œæˆäº†ï¼Œå®é™…ä¸Š DatePickerDialog åœ¨ API 24 æ‰è¢«åŠ è¿›æ¥ï¼Œä½¿ç”¨å®ƒæœ‰ä¸€ä¸ªå¥½å¤„ï¼Œå°±æ˜¯ä¸éœ€è¦å†™å¸ƒå±€æ–‡ä»¶ã€‚ public static void showDatePickerDialog(Context context) { if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) { final Calendar calendar = Calendar.getInstance(); DatePickerDialog dialog = new DatePickerDialog(context); dialog.setOnDateSetListener(new DatePickerDialog.OnDateSetListener() { @Override public void onDateSet(DatePicker view, int year, int month, int dayOfMonth) { calendar.set(year, month, dayOfMonth); SimpleDateFormat format = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;); textView.setText(format.format(calendar.getTime())); // textView.setText(year + &quot;-&quot; + (monthOfYear + 1) + &quot;-&quot; + dayOfMonth); } }); DatePicker datePicker = dialog.getDatePicker(); datePicker.setMinDate(calendar.getTimeInMillis()); dialog.show(); } } ä¸ DatePicker ä¸åŒï¼ŒDatePickerDialog æœ‰å¤šä¸ªæ„é€ æ–¹æ³•ï¼Œå¯ä»¥ä¸è®¾å®šé»˜è®¤çš„æ—¥æœŸï¼Œå½“ä¸è®¾å®šæ—¶ï¼ŒDatePickerDialog ä¼šæŠŠå½“å‰æ—¶é—´è®¾ä¸ºé»˜è®¤æ—¥æœŸã€‚ ä¸” DatePickerDialog ç»§æ‰¿è‡ª AlertDialogï¼Œæ‰€ä»¥ä¼šæœ‰ PositiveButton å’Œ NegativeButtonï¼Œå› æ­¤å“åº”äº‹ä»¶å›è°ƒä¸å†æ˜¯ onDateChanged() è€Œæ˜¯ onDateSet()ï¼Œå³ç”¨æˆ·ç‚¹å‡» PositiveButton æ—¶æ‰ä¼šå“åº”äº‹ä»¶ï¼ŒæŠŠé€‰ä¸­çš„æ—¥æœŸå›ä¼ ï¼Œè¿™æ ·å°±ä¸ä¼šé‡åˆ°åƒ DatePicker æœªç‚¹å‡»æ‰€ä»¥è·å–ä¸åˆ°æ—¥æœŸçš„å°´å°¬æƒ…å†µã€‚ ä½† DatePickerDialog æ¯”è¾ƒä¸æ–¹ä¾¿çš„æ˜¯ä¸èƒ½å¤Ÿç›´æ¥è®¾ç½®æœ€å°å¯é€‰æ—¥æœŸï¼Œæ‰€ä»¥éœ€è¦å€ŸåŠ© DatePicker æ¥å®ç°ï¼Œé€šè¿‡ DatePickerDialog.getDatePicker() å°±å¯ä»¥è·å¾— DatePick å®ä¾‹ï¼Œå†è°ƒç”¨ DatePicker çš„æ–¹æ³•å°±å¯ä»¥è¿›è¡Œç›¸å…³çš„æ“ä½œã€‚ æ•ˆæœå¦‚ä¸‹ï¼š DatePickerDialog å› ä¸ºä¸éœ€è¦å¸ƒå±€æ–‡ä»¶æ¥æ„å»ºï¼Œæ‰€ä»¥æ²¡æœ‰åƒ DatePicker ä¸€æ ·å¯ä»¥åˆ‡æ¢ä¸ºæ»šè½®æ ·å¼çš„é€‰é¡¹ã€‚ æœ€åéœ€è¦æé†’çš„æ˜¯ï¼Œç”±äºå…¼å®¹æ€§é—®é¢˜åŸç”Ÿçš„æ—¥æœŸé€‰æ‹©å™¨åœ¨ä¸åŒçš„ Android ç‰ˆæœ¬ä¸­æ ·å¼ä¸ä¸€ï¼Œåœ¨ Android 4.xã€Android 5.x ä»¥åŠ Android 6.0 ä»¥ä¸Šçš„ç‰ˆæœ¬ä¸­æœ‰å¾ˆå¤§çš„å‡ºå…¥ï¼š è€Œä¸”åŸç”Ÿçš„æ—¥æœŸé€‰æ‹©å™¨æœ¬èº«å¯å®šåˆ¶çš„ API ä¹Ÿè¾ƒå°‘ï¼Œå¦‚æœä»‹æ„çš„è¯è¯·æ…ç”¨ã€‚ ","link":"https://LiarrDev.github.io/post/Android-Date-Picker/"},{"title":"Android åˆ¤æ–­ç½‘ç»œæ˜¯å¦è¿é€š","content":"åœ¨ Android å¼€å‘ä¸­ï¼Œå¦‚æœæ¶‰åŠåˆ°ç½‘ç»œè¯·æ±‚ï¼Œè€Œç½‘ç»œæœªè¿é€šçš„æƒ…å†µä¸‹ï¼Œåº”ç”¨å°±ä¼šå´©æºƒé—ªé€€ï¼Œåœ¨ DEBUG çš„æ—¶å€™å‡ºç°è¯¥æƒ…å†µè¿˜å¥½ï¼Œä½†å¦‚æœåœ¨ç”¨æˆ·çš„æ‰‹æœºä¸­ï¼Œç”¨æˆ·å°±ä¼šè®¤ä¸ºæ˜¯ä½ çš„åº”ç”¨å‡º Bug äº†ã€‚ å¦å¤–è¿˜ä¼šæœ‰ä¸€ç§æƒ…å†µï¼Œæœ‰æ—¶å€™å½“æ‰‹æœºæ˜¾ç¤ºç½‘ç»œè¿æ¥æˆåŠŸæ—¶ï¼Œå¹¶ä¸ä¸€å®šè¡¨ç¤ºå¯ä»¥çœŸçš„ä¸Šç½‘ï¼Œæ¯”å¦‚è‚¯å¾·åŸºæˆ–è€…ä¸€äº›é…’åº—çš„æ— çº¿ç½‘ç»œæ—¶å¸¸éœ€è¦ç™»å½•éªŒè¯æ‰èƒ½ä½¿ç”¨ï¼Œåˆæ¯”å¦‚åˆšå¯åŠ¨è·¯ç”±å™¨æ—¶è™½ç„¶æ‰‹æœºä¸Šä¼šæ˜¾ç¤ºè¿æ¥åˆ°è·¯ç”±å™¨ä½†å®é™…ä¸Šè·¯ç”±å™¨è¿˜æœªåˆå§‹åŒ–å®Œæˆæ‰€ä»¥æœªèƒ½ä¸Šç½‘ï¼Œç”šè‡³æ˜¯ç½‘ç»œæ¬ è´¹äº†è€Œä½ ä¾ç„¶èƒ½å¤Ÿè¿æ¥åˆ°è·¯ç”±å™¨ï¼Œéƒ½ä¼šå‡ºç°ä¸Šé¢çš„æƒ…å†µã€‚ å› æ­¤åœ¨è¿›è¡Œç½‘ç»œé€šè®¯å‰ï¼Œå°±éœ€è¦ç¡®è®¤ç½‘ç»œæ˜¯å¦çœŸæ­£è”é€šã€‚ PING åœ¨ PC ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ ping å‘½ä»¤æ¥åˆ¤æ–­ç½‘ç»œæ˜¯å¦è”é€šï¼ŒPING å…¨ç§°ä¸º Packet Internet Groperï¼Œå³å› ç‰¹ç½‘åŒ…æ¢ç´¢å™¨ï¼Œå¯ä»¥å°†å®ƒä½œä¸ºç½‘ç»œè¯Šæ–­å·¥å…·ï¼Œping å‘½ä»¤åœ¨ Windowsã€macOS å’Œ Linux ä¸‹éƒ½æ˜¯å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ï¼Œé‚£ Android å½“ç„¶ä¹Ÿä¸ä¾‹å¤–ï¼š public static boolean isNetPingUsable() { Runtime runtime = Runtime.getRuntime(); try { Process process = runtime.exec(&quot;ping -c 3 www.baidu.com&quot;); int ret = process.waitFor(); if (ret == 0) { return true; } else { return false; } } catch (Exception e) { e.printStackTrace(); } return false; } ä½¿ç”¨ ping å‘½ä»¤å¯ä»¥è·å¾—ä¸åŒç½‘ç»œçŠ¶æ€ä¸‹çš„ç»“æœï¼Œå¦‚ä¸‹ï¼š è¿é€šçš„ç§»åŠ¨æ•°æ®ç½‘ç»œä¸‹ï¼š0 éœ€è¦ç½‘é¡µè®¤è¯çš„ Wi-Fi ä¸‹ï¼š1 Wi-Fi æ‰“å¼€ä½†æ²¡æœ‰ç½‘ç»œè¿æ¥ï¼Œæ•°æ®ä¹Ÿä¸å¯ç”¨çš„çŠ¶æ€ä¸‹ï¼š2 åœ¨ä¸å¯ç”¨çš„ Wi-Fi ä¸‹ï¼š2 åœ¨å¯ç”¨çš„ Wi-Fi ä¸‹ï¼š0 æ‰€ä»¥åªè¦åˆ¤æ–­ç»“æœä¸º 0 å³è¡¨ç¤ºç½‘ç»œå·²è¿é€šã€‚ ä½†è¯¥æ–¹æ³•æœ‰ä¸ªè‡´å‘½çš„ç¼ºç‚¹ï¼Œå½“ç½‘ç»œæœªè¿é€šæ—¶ï¼Œå®ƒå¯ä»¥é©¬ä¸Šè¿”å› falseï¼Œä½†æ˜¯å½“ç½‘ç»œè¿é€šæ—¶ï¼Œå®ƒéœ€è¦è€—è´¹çº¦ 10 ç§’çš„æ—¶é—´æ‰èƒ½è¿”å›ç»“æœã€‚ã€å¹¿ä¸œç§»åŠ¨ã€çš„ Android App æ—©æœŸç‰ˆæœ¬åœ¨ç™»å½•é¡µé¢è·å–çŸ­ä¿¡éªŒè¯ç çš„æ—¶å€™ä¹Ÿå‡ºç°è¿‡è¯¥æƒ…å†µï¼Œç‚¹å‡»ã€Œè·å–éªŒè¯ç ã€æŒ‰é’®åä¼šå‡ºç°ä¸€ä¸ª ProgressDialog ç­‰å¾…çº¦ 10 ç§’åæ‰è¿›è¡Œè·å–è¯·æ±‚ï¼Œä¼°è®¡ä¹Ÿæ˜¯ä½¿ç”¨ä¸Šé¢çš„è¿™ä¸ªæ–¹æ³•ã€‚ NetworkCapabilities NetworkCapabilities æ˜¯ API 21 æ–°å¢åŠ çš„ä¸€ä¸ªå·¥å…·ç±»ï¼Œè¿™ç±»æœ¬èº«æ²¡æœ‰å¤ªå¤šå†…å®¹ï¼Œä¸»è¦æ˜¯ç”¨æ¥æè¿°ç½‘ç»œçŠ¶æ€å’Œä¼ è¾“ç±»å‹ï¼Œå®ƒæä¾›äº†ç›¸åº”çš„æ–¹æ³•ç”¨æ¥åˆ¤æ–­å½“å‰ç½‘ç»œæ˜¯å¦å¯ç”¨ï¼Œå¹¶ä¸”ä¸ä¼šå‡ºç°ä¸Šæ–¹çš„è€—æ—¶æ“ä½œã€‚ä»£ç å¦‚ä¸‹ï¼š public static boolean isNetworkAvailable(Context context) { ConnectivityManager connectivity = (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE); if (connectivity != null) { NetworkInfo info = connectivity.getActiveNetworkInfo(); if (info != null &amp;&amp; info.isConnected()) { // å½“å‰ç½‘ç»œæ˜¯è¿æ¥çš„ return info.getState() == NetworkInfo.State.CONNECTED; // å½“å‰æ‰€è¿æ¥çš„ç½‘ç»œå¯ç”¨ } } return false; } è¿™æ ·ï¼Œå½“ç½‘ç»œæœªè¿é€šçš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥é©¬ä¸Šè·å¾—ç»“æœï¼Œé…åˆ ProgressDialog å’Œ Toast æé†’å¯ä»¥ä½¿äº¤äº’æ›´åŠ å‹å¥½ã€‚ å»ºè®®åœ¨å°è£…ç½‘ç»œè¯·æ±‚å·¥å…·æ—¶åŠ å…¥è”ç½‘åˆ¤æ–­ï¼Œä»¥é˜²æ­¢ App å› ç½‘ç»œé—®é¢˜å´©æºƒã€‚å½“ç„¶ï¼Œç°åœ¨å¾ˆå¤šç¬¬ä¸‰æ–¹ç½‘ç»œæ¡†æ¶ä¹Ÿå·²ç»å°è£…äº†è”ç½‘åˆ¤æ–­ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚ ","link":"https://LiarrDev.github.io/post/Determines-the-Network-is-Available-in-Android/"},{"title":"å®šåˆ¶ Android æ—¥å¿—å·¥å…·","content":"åœ¨ Android å¼€å‘æˆ–æ˜¯å…¶ä»–ä»»ä½•ç¨‹åºå¼€å‘ä¸­ï¼Œæ—¥å¿—å¯¹æˆ‘ä»¬æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„å·¥å…·ï¼Œä¼´éšæˆ‘ä»¬æ•´ä¸ªå¼€å‘è¿‡ç¨‹çš„åˆ©å™¨ï¼Œå®ƒå¯ä»¥å¸®åŠ©æˆ‘ä»¬è°ƒè¯•ä»£ç ï¼Œäº†è§£ç¨‹åºé€»è¾‘ï¼Œä»¥æ›´å¥½çš„å®šä½é—®é¢˜ã€‚ è™½ç„¶ Android ä¸­è‡ªå¸¦çš„æ—¥å¿—å·¥å…·åŠŸèƒ½å·²ç»èƒ½å¤Ÿæ»¡è¶³æˆ‘ä»¬çš„å¼€å‘éœ€è¦ï¼Œä½†æ˜¯ä½œä¸ºå®¢æˆ·ç«¯ï¼Œç”¨äºè°ƒè¯•çš„æ—¥å¿—ä¿¡æ¯åœ¨é¡¹ç›®æ­£å¼ä¸Šçº¿åä»ç„¶ä¼šç…§å¸¸æ‰“å°ï¼Œä¸ä»…ä¼šé™ä½ç¨‹åºçš„è¿è¡Œæ•ˆç‡ï¼Œè€Œä¸”è¿˜æœ‰å¯èƒ½å°†ä¸€äº›æœºå¯†æ€§çš„æ•°æ®æ³„æ¼å‡ºå»ã€‚ éš¾é“è¦ä¸€è¡Œä¸€è¡Œåœ°æŠŠæ‰€æœ‰æ‰“å°æ—¥å¿—çš„ä»£ç åˆ é™¤æˆ–è€…æ³¨é‡Šæ‰ï¼Ÿæ˜¾ç„¶è¿™ä¸æ˜¯ä»€ä¹ˆå¥½ç‚¹å­ï¼Œä¸ä»…è´¹æ—¶è´¹åŠ›ï¼Œè€Œä¸”ä»¥åç»§ç»­ç»´æŠ¤è¿™ä¸ªé¡¹ç›®çš„æ—¶å€™å¯èƒ½è¿˜ä¼šéœ€è¦è¿™äº›æ—¥å¿—ã€‚ å› æ­¤æœ€ç†æƒ³çš„æƒ…å†µæ˜¯èƒ½å¤Ÿè‡ªç”±åœ°æ§åˆ¶æ—¥å¿—çš„æ‰“å°ï¼Œå½“ç¨‹åºå¤„äºå¼€å‘é˜¶æ®µæ—¶å°±è®©æ—¥å¿—æ‰“å°å‡ºæ¥ï¼Œå½“ç¨‹åºä¸Šçº¿äº†ä¹‹åå°±æŠŠæ—¥å¿—å±è”½æ‰ã€‚ çœ‹èµ·æ¥å¥½åƒæ˜¯æŒºé«˜çº§çš„åŠŸèƒ½ï¼Œå…¶å®å¹¶ä¸å¤æ‚ï¼Œåªéœ€è¦å¯¹ç³»ç»Ÿæä¾›çš„æ—¥å¿—å·¥å…·åšç®€å•çš„å°è£…å³å¯ã€‚ public class LogUtil { private static final int VERBOSE = 1; private static final int DEBUG = 2; private static final int INFO = 3; private static final int WARN = 4; private static final int ERROR = 5; private static final int NOTHING = 6; private static final String TAG = &quot;TAG_NAME&quot;; private static int level = VERBOSE; public static void v(String msg) { v(TAG, msg); } public static void v(String tag, String msg) { if (level &lt;= VERBOSE) { Log.v(tag, msg); } } public static void d(String msg) { d(TAG, msg); } public static void d(String tag, String msg) { if (level &lt;= DEBUG) { Log.d(tag, msg); } } public static void i(String msg) { i(TAG, msg); } public static void i(String tag, String msg) { if (level &lt;= INFO) { Log.i(tag, msg); } } public static void w(String msg) { w(TAG, msg); } public static void w(String tag, String msg) { if (level &lt;= WARN) { Log.w(tag, msg); } } public static void e(String msg) { e(TAG, msg); } public static void e(String tag, String msg) { if (level &lt;= ERROR) { Log.e(tag, msg); } } } å¯ä»¥çœ‹åˆ°ï¼Œåœ¨ LogUtil ä¸­å…ˆæ˜¯å®šä¹‰äº† VERBOSEã€DEBUGã€INFOã€WARNã€ERRORã€NOTHING è¿™ 6 ä¸ªæ•´å‹å¸¸é‡ï¼Œå¹¶ä¸”å®ƒä»¬å¯¹åº”çš„å€¼éƒ½æ˜¯é€’å¢çš„ã€‚ç„¶ååˆå®šä¹‰äº†ä¸€ä¸ªé™æ€å˜é‡ levelï¼Œå¯ä»¥å°†å®ƒçš„å€¼æŒ‡å®šä¸ºä¸Šé¢ 6 ä¸ªå¸¸é‡ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚ æ¥ä¸‹æ¥æä¾› 5 ä¸ªè‡ªå®šä¹‰çš„æ—¥å¿—æ–¹æ³•ï¼Œåœ¨å…¶å†…éƒ¨åˆ†åˆ«è°ƒç”¨åŸç”Ÿçš„æ—¥å¿—å·¥å…·æ¥æ‰“å°æ—¥å¿—ï¼Œåªä¸è¿‡åœ¨è¿™äº›è‡ªå®šä¹‰çš„æ–¹æ³•ä¸­éƒ½åŠ å…¥æ¥ä¸€ä¸ªåˆ¤æ–­ï¼Œåªæœ‰å½“ level çš„å€¼å°äºæˆ–ç­‰äºå¯¹åº”æ—¥å¿—çº§åˆ«å€¼çš„æ—¶å€™ï¼Œæ‰ä¼šå°†æ—¥å¿—æ‰“å°å‡ºæ¥ã€‚ åŒæ—¶ï¼Œè¿˜å¯¹è¿™ 5 ä¸ªè‡ªå®šä¹‰çš„æ—¥å¿—æ–¹æ³•åšäº†æ–¹æ³•é‡è½½ï¼Œå‚æ•°çœç•¥äº† TAGï¼Œå¹¶ç”¨ä¸€ä¸ªç»Ÿä¸€çš„ TAG æ¥ä»£æ›¿ï¼Œè¿™æ ·åœ¨è°ƒç”¨çš„æ—¶å€™ï¼Œå°±å¯ä»¥é¿å…é‡å¤è¾“å…¥ TAG çš„éº»çƒ¦ã€‚ åœ¨ä½¿ç”¨è¯¥æ—¥å¿—å·¥å…·æ—¶æˆ‘ä»¬åªéœ€ä¿®æ”¹ level å˜é‡çš„å€¼ï¼Œå°±å¯ä»¥è‡ªç”±åœ°æ§åˆ¶æ—¥å¿—çš„æ‰“å°è¡Œä¸ºï¼Œæ¯”å¦‚è®© level ç­‰äº WARN å°±å¯ä»¥åªæ‰“å°è­¦å‘Šä»¥ä¸Šçº§åˆ«çš„æ—¥å¿—ï¼Œè®© level ç­‰äº NOTHING å°±å¯ä»¥æŠŠæ‰€æœ‰æ—¥å¿—éƒ½å±è”½æ‰ã€‚ ä½¿ç”¨è¿™ç§æ–¹æ³•ä¹‹åï¼Œåˆšæ‰æ‰€è¯´çš„é‚£ä¸ªé—®é¢˜å°±ä¸å¤å­˜åœ¨äº†ã€‚åªéœ€è¦åœ¨å¼€å‘é˜¶æ®µå°† level æŒ‡å®šæˆ VERBOSEï¼Œå½“é¡¹ç›®æ­£å¼ä¸Šçº¿çš„æ—¶å€™å°† level æŒ‡å®šæˆ NOTHING å³å¯ã€‚ ","link":"https://LiarrDev.github.io/post/Customize-a-Android-LogUtil/"},{"title":"Android æ”¹å˜ TextView å†…å±€éƒ¨æ ·å¼","content":"Android å¼€å‘ä¸­ç»å¸¸ä¼šæœ‰å¯¹ TextView çš„å±€éƒ¨æ–‡å­—æ ·å¼åšå•ç‹¬å¤„ç†çš„éœ€æ±‚ï¼Œæ¯”å¦‚é’ˆå¯¹æŸäº›æ–‡å­—è¿›è¡ŒåŠ ç²—æˆ–æ˜¯æ”¹å˜é¢œè‰²ç­‰ç­‰ã€‚ è¿™ç§å¤„ç†åœ¨ Web å¼€å‘ä¸­ååˆ†ç®€å•ï¼ŒHTML çš„æ ‡ç­¾èƒ½å¤Ÿå¾ˆæ–¹ä¾¿çš„è¿›è¡Œè°ƒæ•´ã€‚ä½†æ˜¯åœ¨ Android å¼€å‘ä¸­ï¼Œå´è¦ç¨å¾®éº»çƒ¦ä¸€äº›ï¼Œæˆ‘ä»¬æ¥çœ‹å‡ ç§å¤„ç†æ–¹å¼ã€‚ å¤š TextView æ‹¼æ¥ åˆ©ç”¨å¤šä¸ª TextView æ‹¼æ¥çš„æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥é’ˆå¯¹ä¸åŒçš„ TextView æ ·å¼è¿›è¡Œè°ƒæ•´ï¼Œè¿™ç§æ–¹æ³•ä¼¼ä¹è·Ÿ HTML æ ‡ç­¾æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†å®é™…ä¸Šå´ç›¸å»ç”šè¿œã€‚ å½“ä½ æœ‰å¤šä¸ªä¸è¿ç»­çš„æ–‡å­—éœ€è¦ä½¿ç”¨åŒä¸€ç§æ ·å¼çš„æ—¶å€™ï¼Œä½ å°±éœ€è¦å»ºç«‹å¤šä¸ªå…·æœ‰ç›¸åŒæ ·å¼çš„ TextViewï¼Œä»è€Œå¯¹åŒä¸€ä¸ªå¥å­æˆ–æ®µè½å½¢æˆå‰²è£‚æ„Ÿã€‚ å¦ä¸€æ–¹é¢ï¼Œä½ ç”šè‡³è¿˜éœ€è¦å¤„ç†å¥½æ¯ä¸€ä¸ª TextView çš„ Padding ä»¥åŠ Margin è¾¹è·å±æ€§ä»¥åŠé€‚å½“çš„æ¢è¡Œç­‰ï¼Œå¦åˆ™ UI å°±ä¼šä¹±å¾—æƒ¨ä¸å¿ç¹ã€‚ æ€»ä½“æ¥è¯´ï¼Œå¤š TextView æ‹¼æ¥æ¥å¤„ç†åŒä¸€æ®µæ–‡å­—æ˜¯éå¸¸ä¸æ¨èçš„æ–¹æ³•ã€‚ åˆ©ç”¨ HTML æ ‡ç­¾è®¾ç½®æ ·å¼ æ—¢ç„¶ HTML åœ¨å¤„ç†è¿™ç§éœ€æ±‚æœ‰æå¤§çš„ä¼˜åŠ¿ï¼Œé‚£ä¹ˆæˆ‘ä»¬èƒ½ä¸èƒ½ä½¿ç”¨ç±»ä¼¼çš„å¤„ç†æ–¹å¼å‘¢ï¼Ÿ Android SDK ä¸­å…¶å®ä¸ºæˆ‘ä»¬æä¾›äº†ç›´æ¥è§£æ HTML çš„æ–¹æ³•ï¼Œæ‰€ä»¥åªè¦å°†å­—ç¬¦ä¸²åŒ…è£…æˆ HTML ä»£ç å³å¯å®ç°å±€éƒ¨æ ·å¼ä¿®æ”¹ï¼Œæ¯”å¦‚ï¼š TextView textView = findViewById(R.id.sign_up_link); textView.setText(Html.fromHtml(&quot;No account yet? &lt;font color='#FFFFFF'&gt;&lt;big&gt;Create one&lt;/big&gt;&lt;/font&gt;.&quot;)); åˆ©ç”¨ Html.fromHtml() æ–¹æ³•å¯ä»¥å°†å­—ç¬¦ä¸²è§£ææˆ HTML æ ·å¼ï¼Œå†åƒå¹³æ—¶ä¸€æ ·ä½¿ç”¨çš„ setText() æ–¹æ³•å³å¯æŠŠæ–‡å­—åŠ è½½åˆ° TextView ä¸­å»ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š å¯ä»¥çœ‹åˆ°ï¼Œåº•éƒ¨çš„é‚£è¡Œå°å­—å¯¹ååŠå¥åšäº†åŠ ç²—ä»¥åŠé¢œè‰²è°ƒæ•´ã€‚ åˆ©ç”¨ HTML è®¾ç½®æ ·å¼ååˆ†æ–¹ä¾¿ï¼Œè§£å†³äº†å¤š TextView æ‹¼æ¥çš„å‰²è£‚æ„Ÿï¼Œä½†å®ƒä¾ç„¶å­˜åœ¨é—®é¢˜ã€‚ ä½ å¯ä»¥çœ‹åˆ°æˆ‘çš„ç¤ºä¾‹ä»£ç ä¸­ä½¿ç”¨äº† &lt;big&gt; æ ‡ç­¾æ¥è®¾ç½®å­—ä½“çš„å¤§å°ï¼Œå…¶å®åœ¨å¸¸è§„çš„ HTML ä»£ç ä¸­ï¼Œæˆ‘æ›´åŠ å€¾å‘äºä½¿ç”¨ &lt;font&gt; æ ‡ç­¾çš„ size å±æ€§æ¥è¿›è¡Œè°ƒæ•´ï¼Œå› ä¸ºå¯ä»¥å‡å°‘æ ‡ç­¾åµŒå¥—ã€‚ ä½†æ˜¯æˆ‘åœ¨è¿™é‡Œä½¿ç”¨ &lt;big&gt; æ ‡ç­¾çš„åŸå› æ˜¯ï¼ŒHtml.fromHtml() æ–¹æ³•æ— æ³•è§£æ size å±æ€§ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹çœ‹æºç ï¼š public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException { handleStartTag(localName, attributes); } private void handleStartTag(String tag, Attributes attributes) { if (...) { ... } else if (...) { ... } else if (tag.equalsIgnoreCase(&quot;font&quot;)) { startFont(mSpannableStringBuilder, attributes); } else if (...) { ... } } private void startFont(Editable text, Attributes attributes) { String color = attributes.getValue(&quot;&quot;, &quot;color&quot;); String face = attributes.getValue(&quot;&quot;, &quot;face&quot;); if (!TextUtils.isEmpty(color)) { int c = getHtmlColor(color); if (c != -1) { start(text, new Foreground(c | 0xFF000000)); } } if (!TextUtils.isEmpty(face)) { start(text, new Font(face)); } } å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äº &lt;font&gt; æ ‡ç­¾ï¼Œåªè§£æ color å’Œ face ä¸¤ä¸ªå±æ€§ï¼Œå…¶ä»–å±æ€§æ¯”å¦‚åˆšæåˆ°çš„ size å¹¶æ²¡æœ‰è¿›è¡Œè§£æï¼Œè‡ªç„¶ä¹Ÿå°±ä¸å¯ä»¥é€šè¿‡å…¶è®¾ç½®å­—ä½“å¤§å°äº†ã€‚ è¿™é‡Œä»…ä»…æ‹¿äº† &lt;font&gt; æ ‡ç­¾è¿›è¡Œä¸¾ä¾‹ï¼Œå…¶ä»–æ ‡ç­¾ä¹Ÿæœ‰ç±»ä¼¼çš„æƒ…å†µï¼Œä¹Ÿå°±æ˜¯è¯´ Android çš„ Html.fromHtml() æ–¹æ³•å¹¶æ²¡æœ‰åŠæ³•å¯¹æ‰€æœ‰çš„ HTML æ ·å¼è¿›è¡Œè§£æã€‚ åˆ©ç”¨ SpannableString è®¾ç½®æ ·å¼ å…¶å® Android SDK ä¹Ÿä¸ºæˆ‘ä»¬æä¾›äº†ä¿®æ”¹ TextView å±€éƒ¨æ ·å¼çš„æ–¹æ³•ï¼Œåˆ©ç”¨ SpannableString ä¹Ÿå¯ä»¥å®ç°ç±»ä¼¼çš„åŠŸèƒ½ï¼š SpannableString spannableString = new SpannableString(&quot;Hello World!&quot;); BackgroundColorSpan backgroundColorSpan = new BackgroundColorSpan(Color.RED); spannableString.setSpan(backgroundColorSpan, 0, 4, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE); TextView textView = findViewById(R.id.tv); textView.setText(spannableString); è¿™æ˜¯ TextView çš„ Span æ ·å¼ç±»ï¼Œé¦–å…ˆåœ¨ SpannableString å¯¹è±¡ä¸­ä¼ å…¥è¦æ˜¾ç¤ºçš„å†…å®¹ï¼Œè°ƒç”¨ setSpan() æ–¹æ³•å®ç°å­—ç¬¦ä¸²å„ç§é£æ ¼çš„æ˜¾ç¤ºã€‚ setSpan() æ–¹æ³•æœ‰ 4 ä¸ªå‚æ•°ã€‚ç¬¬ä¸€ä¸ªå‚æ•°è¡¨ç¤ºæ ¼å¼ï¼Œå¯ä»¥æ˜¯å‰æ™¯è‰²ã€èƒŒæ™¯è‰²ç­‰ï¼Œè¿™é‡ŒæŒ‡å®šå…¶èƒŒæ™¯è‰²ä¸ºçº¢è‰²ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯æ ¼å¼å¼€å§‹çš„ Indexï¼›ç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯æ ¼å¼ç»“æŸçš„ Indexï¼›ç¬¬å››ä¸ªå‚æ•°æ˜¯ä¸€ä¸ªå¸¸é‡ï¼Œæœ‰ä»¥ä¸‹ 4 ä¸ªå€¼ï¼š Spannable.SPAN_INCLUSIVE_EXCLUSIVEï¼šå‰é¢åŒ…æ‹¬ï¼Œåé¢ä¸åŒ…æ‹¬ã€‚å³åœ¨æ–‡æœ¬å‰æ’å…¥æ–°æ–‡æœ¬ä¼šåº”ç”¨è¯¥æ ·å¼ï¼Œè€Œåœ¨æ–‡æœ¬åæ’å…¥æ–°æ–‡æœ¬ä¸ä¼šåº”ç”¨è¯¥æ ·å¼ã€‚ Spannable.SPAN_INCLUSIVE_INCLUSIVEï¼šå‰é¢åŒ…æ‹¬ï¼Œåé¢åŒ…æ‹¬ã€‚å³åœ¨æ–‡æœ¬å‰æ’å…¥æ–°æ–‡æœ¬ä¼šåº”ç”¨è¯¥æ ·å¼ï¼Œåœ¨æ–‡æœ¬åæ’å…¥æ–°æ–‡æœ¬ä¹Ÿä¼šåº”ç”¨è¯¥æ ·å¼ã€‚ Spannable.SPAN_EXCLUSIVE_EXCLUSIVEï¼šå‰é¢ä¸åŒ…æ‹¬ï¼Œåé¢ä¸åŒ…æ‹¬ã€‚å³åœ¨æ–‡æœ¬å‰æ’å…¥æ–°æ–‡æœ¬ä¸ä¼šåº”ç”¨è¯¥æ ·å¼ï¼Œåœ¨æ–‡æœ¬åæ’å…¥æ–°æ–‡æœ¬ä¹Ÿä¸ä¼šåº”ç”¨è¯¥æ ·å¼ã€‚ Spannable.SPAN_EXCLUSIVE_INCLUSIVEï¼šå‰é¢ä¸åŒ…æ‹¬ï¼Œåé¢åŒ…æ‹¬ã€‚å³åœ¨æ–‡æœ¬å‰æ’å…¥æ–°æ–‡æœ¬ä¸ä¼šåº”ç”¨è¯¥æ ·å¼ï¼Œè€Œåœ¨æ–‡æœ¬åæ’å…¥æ–°æ–‡æœ¬ä¼šåº”ç”¨è¯¥æ ·å¼ã€‚ æœ€åä¹Ÿæ˜¯è°ƒç”¨ TextView çš„ setText() æ–¹æ³•æŠŠè¿™ä¸ª SpannableString å¯¹è±¡è®¾ç½®è¿›å»ï¼Œæ•ˆæœå¦‚ä¸‹ï¼š ä½¿ç”¨ SpannableString ä¸ä»…å¯ä»¥è®¾ç½®å±€éƒ¨æ ·å¼ï¼Œè¿˜æ”¯æŒè®¾ç½®å±€éƒ¨ç‚¹å‡»äº‹ä»¶ï¼Œè¿™ç‚¹æ¯”åˆ©ç”¨ HTML æ ‡ç­¾è®¾ç½®æ ·å¼æ›´åŠ çµæ´»ã€‚ ","link":"https://LiarrDev.github.io/post/Change-the-Partial-Style-within-Android-TextView/"},{"title":"@ä»»æŒ¯é“­ çš„ DownloadModel","content":"æœ€è¿‘åœ¨åšä¸€ä¸ªç±»ä¼¼åº”ç”¨å•†åº—çš„é¡¹ç›®ï¼Œéœ€è¦åšå¤§æ–‡ä»¶ä¸‹è½½ã€‚ ä¸€å¼€å§‹æˆ‘åŸºäº OkHttp å’Œ AsyncTask å®ç°äº†ä¸€ä¸ªä¸‹è½½å™¨ï¼Œå¹¶ä¸”çˆ¬å–å…¶ä»–åº”ç”¨å•†åº—å†…çš„åº”ç”¨ä¸‹è½½é“¾æ¥æµ‹è¯•æˆåŠŸäº†ï¼Œä½†æ˜¯å½“æ¥å…¥åˆ°æˆ‘ä»¬è‡ªå·±çš„åå°æ—¶ï¼Œå´å‘ç°å¹¶ä¸èƒ½ä¸‹è½½æˆåŠŸï¼Œä¼šå‡ºç°ä¸‹è½½åˆ°æŸä¸€ä¸ªä¸ç¡®å®šçš„è¿›åº¦åï¼Œç½‘é€Ÿéª¤é™ï¼Œä¸‹è½½åœæ­¢ï¼Œå¹¶ç­‰å¾…ä¸€ä¸ªè¶…æ—¶çš„æ—¶é—´åï¼Œä¸‹è½½å¤±è´¥ã€‚OkHttp æŠ›å‡ºä¸€ä¸ªå¼‚å¸¸ï¼š W/System.err: java.net.ProtocolException: unexpected end of stream W/System.err: at okhttp3.internal.http1.Http1ExchangeCodec$FixedLengthSource.read(Http1ExchangeCodec.kt:371) W/System.err: at okhttp3.internal.connection.Exchange$ResponseBodySource.read(Exchange.kt:276) W/System.err: at okio.RealBufferedSource$inputStream$1.read(RealBufferedSource.kt:158) W/System.err: at java.io.InputStream.read(InputStream.java:101) W/System.err: at ... è¿™é‡Œçœ‹æ ·å­æ˜¯ Okio çš„å¼‚å¸¸ï¼Œå› ä¸º OkHttp åº•å±‚ç½‘ç»œè¿æ¥æ˜¯ä½¿ç”¨ Socketï¼Œè¿æ¥æˆåŠŸååˆ™é€šè¿‡ Okio åº“ä¸è¿œç¨‹ Socket å»ºç«‹äº† I/O è¿æ¥ã€‚ æˆ‘åœ¨å›½å†…çš„æŠ€æœ¯è®ºå›ä¸Šæ‰¾äº†ä¸€åœˆï¼Œèƒ½å°è¯•çš„æ–¹æ³•éƒ½ç”¨éäº†ï¼Œä¾ç„¶ä¸è¡Œï¼Œäºæ˜¯ä¸Šã€Githubã€å’Œã€Stack Overflowã€å¯»æ±‚ç­”æ¡ˆï¼Œå‘ç°è¿™ä¸ªé—®é¢˜ä¾ç„¶æ²¡æœ‰ä¸ªæœ€ç»ˆçš„è§£å†³æ–¹æ³•ï¼Œç”šè‡³ã€Githubã€çš„ OkHttp å’Œ Okio é¡¹ç›®ä¸‹å·²ç»æœ‰æ•°ä¸ªè¿™æ ·çš„ Issue äº†ï¼Œä½†åœ¨ä»¥ PHP ä¸ºåå°çš„é¡¹ç›®ä¸­å¤ç°ç‡è¾ƒé«˜ï¼Œä¸”å¾ˆæœ‰å¯èƒ½æ˜¯æœåŠ¡ç«¯çš„é—®é¢˜ã€‚ ä¸ä¿¡é‚ªçš„æˆ‘æ‹¿äº†å…¶ä»–æµ‹è¯•æœºè¿‡æ¥æµ‹è¯•åå‘ç°ï¼Œåœ¨åä¸ºæ‰‹æœºä¸Šå¤±è´¥ç‡æé«˜ï¼Œå…¶ä»–æ‰‹æœºåˆ™åŸºæœ¬æ­£å¸¸ï¼Œè¿™æ ·çœ‹æ¥åº”è¯¥æ˜¯ EMUI å¯¹ ROM åšäº†é­”æ”¹çš„é—®é¢˜äº†ï¼Œä½†æ˜¯ï¼Œå½“æˆ‘ä½¿ç”¨åä¸ºæ‰‹æœºåˆ‡æ¢è‡³æ•°æ®æµé‡è¿›è¡Œä¸‹è½½æ—¶ï¼Œä¸‹è½½å´æˆåŠŸäº†ï¼Œè¿æ¥ç½‘é€Ÿå¿«çš„ Wi-Fi ä¹Ÿèƒ½ä¸‹è½½æˆåŠŸï¼Œå› ä¸ºå…¬å¸çš„ç½‘ç»œæœ‰åšé™é€Ÿå¤„ç†ï¼Œå½“ä¸‹è½½åˆ°æŸä¸€è¿›åº¦åï¼Œä¸‹è½½åœæ­¢ï¼Œç­‰å¾…ä¸€ä¸ªè¶…æ—¶çš„æ—¶é—´å³ä¸‹è½½å¤±è´¥ã€‚ æˆ‘ä¸ªäººçŒœæµ‹æ˜¯æœåŠ¡å™¨æœ‰ä¸€ä¸ªå®šæ—¶æ–­å¼€è¿æ¥çš„è®¾ç½®ï¼Œå½“åˆ°è¾¾è¿™ä¸ªæ—¶é—´ç‚¹æ—¶ï¼Œå®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„è¿æ¥æ–­å¼€äº†ï¼Œç„¶åå®¢æˆ·ç«¯ç»§ç»­ç­‰å¾…ï¼Œç›´è‡³è¶…æ—¶ï¼ŒæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä½¿ç”¨æ•°æ®æµé‡æˆ–è€…ç½‘é€Ÿå¿«çš„ Wi-Fi æ—¶ï¼Œç”±äºä¸‹è½½æ—¶é—´çŸ­äº†ï¼Œé‚£ä¹ˆå°±ç›¸å¯¹æ²¡æœ‰è¿™ä¹ˆå®¹æ˜“åˆ°è¾¾æ–­å¼€è¿æ¥çš„æ—¶é—´ç‚¹ï¼Œæ‰€ä»¥å°±èƒ½å¤Ÿä¸‹è½½æˆåŠŸã€‚ äºæ˜¯å»æ‰¾æˆ‘ä»¬çš„ PHP å¤§ä½¬èŠèŠï¼Œå¤§ä½¬ä¹Ÿæ²¡å¤´ç»ªï¼Œæ— å¥ˆï¼Œåªèƒ½å…ˆæ›´æ¢æˆ‘è¿™è¾¹çš„ä¸‹è½½æ–¹å¼äº†ã€‚é‡æ–°è°ƒæ•´äº†ä¸‹è½½æ¨¡å—ï¼Œæ”¹ç”¨ Android SDK ä¸­çš„ DownloadManagerï¼Œè¿™å°±ç›¸å½“äºæŠŠä¸‹è½½çš„å®ç°äº¤ç»™äº†ç³»ç»Ÿï¼Œæˆ‘è¿™è¾¹å°±ä¸éœ€è¦ç®¡è¿™ä¹ˆå¤šäº†ã€‚ æµ‹è¯•å‘ç°è¯¥æ–¹å¼æ›´åŠ ä¸ç¨³å®šï¼Œç»å¸¸ä¸‹ç€ä¸‹ç€ç”¨äºæ˜¾ç¤ºè¿›åº¦çš„ Notification å°±ä¸è§äº†ï¼Œç„¶åè¿‡ä¸€æ®µæ—¶é—´ååˆå¼¹å‡ºç»§ç»­ä¸‹è½½ï¼Œæˆ‘çŒœæµ‹è¿™ç§æƒ…å†µå¯èƒ½è·Ÿæˆ‘è‡ªå·±å®ç°çš„ç±»ä¼¼ï¼Œä½†æ˜¯ DownloadManager å¯èƒ½é»˜è®¤æœ‰æ–­çº¿é‡è¿çš„æœºåˆ¶ï¼Œæ‰€ä»¥å°±ä¼šå‡ºç°è¿™ç§æƒ…å†µã€‚ å°½ç®¡æœ‰äº†æ–­çº¿é‡è¿ï¼Œä¸è¿‡ Notification çš„æ¶ˆå¤±å¯¹ç”¨æˆ·æ¥è¯´è¿™å¹¶ä¸æ˜¯å¥½çš„äº¤äº’ï¼Œæœ€ç»ˆæ”¾å¼ƒè¯¥æ–¹æ¡ˆï¼Œè½¬è€Œå¯»æ‰¾ç½‘ä¸Šå¼€æºçš„ä¸‹è½½å™¨æ–¹æ¡ˆã€‚ Android å¼€æºçš„ä¸‹è½½å™¨ä¼¼ä¹å¹¶ä¸å¤šï¼Œæˆ‘åªçŸ¥é“ LAIXï¼ˆæµåˆ©è¯´ï¼Œæ²¡é”™ï¼Œå°±æ˜¯é‚£ä¸ªã€è‹±è¯­æµåˆ©è¯´ã€App çš„å…¬å¸ï¼‰å¼€æºçš„ OkDownloadï¼ŒOkDownload çš„å‰èº«å…¶å®æ˜¯ FileDownloaderï¼Œè‡³äºæ”¹å OkDownloadï¼Œæ˜¯è·Ÿ Square å«æ¿è¿˜æ˜¯â€¦â€¦ ä½† OkDownload å¯¹äºæˆ‘çš„é¡¹ç›®ä¼¼ä¹åˆå¤ªè¿‡ç¬¨é‡ï¼Œäºæ˜¯æˆ‘åˆå¼€å§‹å¯»æ‰¾åˆ«çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ— æ„ä¸­å°±å‘ç°äº† @ä»»æŒ¯é“­ çš„ DownloadModelã€‚ ä¸å¾—ä¸è¯´çš„æ˜¯ï¼Œ@ä»»æŒ¯é“­ çš„ DownloadModel çš„ README æ–‡æ¡£çœŸæ˜¯å¤ªçƒ‚äº†ï¼Œæˆ‘ä½¿ç”¨çš„æ—¶å€™ï¼Œå·²ç»æ›´æ–°åˆ°äº† V1.0.5ï¼Œä½†æ–‡æ¡£å´è¿˜æ˜¯åŸºäº V1.0.2ï¼Œè€Œä¸”è¿˜æ¶‰åŠåˆ°äº† API çš„å˜æ›´ï¼Œå› æ­¤æˆ‘ä¸å¾—ä¸æŠŠæºç æ‰’ä¸‹æ¥æ‰ææ‡‚ä½¿ç”¨çš„æ–¹æ³•ã€‚ å…ˆåŸºäº V1.0.5 ç®€å•è¯´ä¸€ä¸‹ç”¨æ³•å§ã€‚ é¦–å…ˆåœ¨ Project çš„ã€Œbuild.gradleã€ä¸­é…ç½® JitPack ä»“åº“ï¼š allprojects { repositories { ... maven { url 'https://www.jitpack.io' } } } ç„¶ååœ¨ Module çš„ã€Œbuild.gradleã€ä¸­æ·»åŠ ä¾èµ–ï¼š dependencies { ... implementation 'com.github.renzhenming:DownloadModel:(insert latest version)' } å¯åŠ¨ä¸‹è½½ä»»åŠ¡æ—¶ï¼š DownloadManager.getInstance(context).download(new DownloadInfo.Builder() .setDownloadUrl(url) .setUniqueKey(uniqueKey) .setName(name) .build()); è·å–å•ä¾‹åè°ƒç”¨ download() æ–¹æ³•è¿›è¡Œä¸‹è½½ï¼Œæ¥æ”¶ä¸€ä¸ªå°è£…äº†ä¸‹è½½ä¿¡æ¯çš„ DownloadInfo å‚æ•°ï¼Œä¸”ä¼šæ ¹æ® DownloadInfo ä¸­çš„ uniqueKey æ¥åˆ¤æ–­ä¸‹è½½ä»»åŠ¡ï¼Œç”±äºåº“å†…æœ‰ MD5 çš„å·¥å…·ç±»ï¼Œæ‰€ä»¥æˆ‘ä¸€èˆ¬å°†å…¶è®¾ç½®ä¸ºä¸‹è½½åœ°å€çš„ MD5 å€¼ã€‚ å¦‚éœ€æš‚åœä¸‹è½½ä»»åŠ¡ï¼š DownloadManager.getInstance(context).pause(uniqueKey); æ ¹æ® uniqueKey æ¥æš‚åœç›¸åº”çš„ä¸‹è½½ä»»åŠ¡å³å¯ã€‚ é™¤äº†æˆ‘ä»¬å°è£…çš„ä¸‹è½½ä¿¡æ¯å¤–ï¼ŒDownloadInfo ä¸­è¿˜ä¼šåŒ…å«ä¸€äº›ä¸‹è½½æ—¶çš„å…¶ä»–ä¿¡æ¯ï¼Œæ¯”å¦‚ä¸‹è½½çŠ¶æ€å’Œä¸‹è½½è¿›åº¦ç­‰ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ ¹æ® uniqueKey æ¥è·å–ï¼š DownloadInfo downloadInfo = DownloadManager.getInstance(context).getDownloadInfo(uniqueKey); if (downloadInfo != null) { float progress = downloadInfo.getProgress(); int currentState = downloadInfo.getCurrentState(); ... } æœ€é‡è¦çš„ï¼Œæˆ‘ä»¬éœ€è¦ç›‘å¬ä¸‹è½½è¿›åº¦ï¼Œå°±æ³¨å†Œä¸€ä¸ª Observerï¼š DownloadManager.getInstance(context).registerObserver(new DownloadManager.DownloadObserver() { @Override public void onDownloadStateChanged(DownloadInfo info) { if (info.getDownloadUrl().equals(downloadUrl)) { ... } } }); ä½†æ˜¯ä¸€èˆ¬ä¸ä¼šé‡‡å–åŒ¿åç±»çš„æ–¹å¼ï¼Œè€Œæ˜¯åœ¨æœ€å¤–å±‚çš„ç±»ä¸­ implements è¿™ä¸ª DownloadManager.DownloadObserver æ¥å£ï¼š public class ClassName implements DownloadManager.DownloadObserver { ... @Override public void onDownloadStateChanged(DownloadInfo info) { if (info.getDownloadUrl().equals(downloadUrl)) { ... } } } å¹¶åœ¨éœ€è¦æ³¨å†Œç›‘å¬çš„ä½ç½®è°ƒç”¨ï¼š DownloadManager.getInstance(context).registerObserver(this); è¿™æ ·æˆ‘ä»¬å¦‚æœéœ€è¦ç§»é™¤ç›‘å¬ï¼Œå°±å¯ä»¥ç›´æ¥è°ƒç”¨ï¼š DownloadManager.getInstance(context).unregisterObserver(this); ä¸‹è½½çš„æ–‡ä»¶ä½ç½®ä¸º /å†…éƒ¨å­˜å‚¨/download_asset/ ç›®å½•ä¸‹ã€‚ å‡å¦‚ä½¿ç”¨å®ƒæ¥ä¸‹è½½ Apk æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å…¶æä¾›çš„ API æ¥è·³è½¬å®‰è£…ï¼š DownloadManager.getInstance(context).install(context, uniqueKey); è·³è½¬å®‰è£…åº”ç”¨éœ€è¦é…ç½®ä»¥ä¸‹æƒé™ï¼š &lt;uses-permission android:name=&quot;android.permission.REQUEST_INSTALL_PACKAGES&quot; /&gt; ä¸ºäº†é€‚é… Android 7.0ï¼ˆNougatï¼ŒAPI Level 24ï¼‰çš„åº”ç”¨é—´æ–‡ä»¶å…±äº«ï¼Œè¿˜éœ€è¦é…ç½®åœ¨ã€ŒAndroidManifest.xmlã€ä¸­é…ç½®ï¼š &lt;application ...&gt; ... &lt;provider android:name=&quot;androidx.core.content.FileProvider&quot; android:authorities=&quot;${applicationId}.download.fileprovider&quot; android:exported=&quot;false&quot; android:grantUriPermissions=&quot;true&quot;&gt; &lt;meta-data android:name=&quot;android.support.FILE_PROVIDER_PATHS&quot; android:resource=&quot;@xml/filepath&quot; /&gt; &lt;/provider&gt; &lt;/application&gt; å¹¶æ–°å»º /res/xml/filepath.xml æ–‡ä»¶ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;resources&gt; &lt;paths&gt; &lt;external-path name=&quot;external_storage_root&quot; path=&quot;.&quot; /&gt; &lt;files-path name=&quot;.&quot; path=&quot;.&quot; /&gt; &lt;/paths&gt; &lt;/resources&gt; ä½†æ˜¯ç›®å‰é¡¹ç›®è¿˜æ²¡æœ‰å…¼å®¹ Android Qï¼ˆQuince Tartï¼ŒAndroid 10ï¼ŒAPI Level 29ï¼‰çš„åˆ†åŒºå­˜å‚¨ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿç»™é¡¹ç›®æäº†ä¸ª Issueï¼ˆè¿˜æ˜¯è¿™ä¸ªé¡¹ç›®çš„ç¬¬ä¸€ä¸ª Issue å‘¢ï¼‰ï¼Œå¸Œæœ› @ä»»æŒ¯é“­ åç»­ä¼šæ”¯æŒã€‚ é‚£ä¹ˆç›®å‰æ¥è¯´ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹æ–¹å¼å…¼å®¹ Android Q çš„åˆ†åŒºå­˜å‚¨ï¼š &lt;application ... android:requestLegacyExternalStorage=&quot;true&quot; tools:targetApi=&quot;q&quot;&gt; ... &lt;/application&gt; @ä»»æŒ¯é“­ çš„ DownloadModel çš„åŸºæœ¬ç”¨æ³•å°±æ˜¯è¿™äº›ï¼Œå…¶å®æ”¯æŒçš„åŠŸèƒ½ä¹Ÿæ˜¯ä¸å°‘çš„ï¼š å¤šçº¿ç¨‹ä¸‹è½½ï¼šæœ‰äº›å¤§æ–‡ä»¶ä¸‹è½½çš„éœ€æ±‚ä¸­ï¼Œå•çº¿ç¨‹ä¸‹è½½æ— æ³•æ»¡è¶³å¯¹æ•ˆç‡çš„è¿½æ±‚ï¼Œæ­¤æ—¶æƒ³å°½å¯èƒ½å¤šçš„åˆ©ç”¨ç¡¬ä»¶èµ„æºæé«˜ä¸‹è½½é€Ÿåº¦ï¼Œé‚£å¯ä»¥é€‰æ‹©å¼€å¯ 2 ä¸ªçº¿ç¨‹æˆ– 3 ä¸ªçº¿ç¨‹ç”šè‡³ 10 ä¸ªçº¿ç¨‹ï¼ˆåªè¦ä½ å†…æ ¸è¶³å¤Ÿï¼‰æ¥ä¸‹è½½è¿™ä¸€ä¸ªæ–‡ä»¶ï¼Œè™½ç„¶æ•ˆç‡ä¸èƒ½è¯´æˆå€æé«˜ï¼Œä½†æ˜¯ä½œç”¨è¿˜æ˜¯å¾ˆæ˜æ˜¾çš„ã€‚ å¤šæ–‡ä»¶ä¸‹è½½ï¼šä½¿ç”¨è€…ä¸éœ€è¦å…³å¿ƒè¿™ä¹ˆå¤šæƒ…å†µï¼Œåªéœ€æŠŠæ¯ä¸ªä¸‹è½½é“¾æ¥éƒ½ä¸¢ç»™ä¸‹è½½å™¨å³å¯ï¼Œä¸‹è½½å™¨ä¼šå‘ŠçŸ¥ä¸‹è½½çŠ¶æ€ï¼Œä½¿ç”¨è€…æ ¹æ®çŠ¶æ€æ¥æ›´æ–°ç•Œé¢æ˜¾ç¤ºå³å¯ï¼Œå…¶ä»–çš„ä¸€åˆ‡äº¤ç»™ä¸‹è½½å™¨æ¥å¤„ç†ã€‚ä½¿ç”¨è€…ä¹Ÿå¯ä»¥è‡ªå®šä¹‰çº¿ç¨‹æ± æ¥ç®¡ç†æ¯ä¸€ä¸ªä¸‹è½½ä»»åŠ¡ï¼Œè®¾ç½®ä¸‹è½½å™¨çš„äº§èƒ½ï¼Œè¿™äº›æ¥å£éƒ½é€šè¿‡ IThreadPool æ¥å£å¼€æ”¾å‡ºæ¥ï¼Œè‡ªä¸»æ€§å¾ˆé«˜ã€‚ æ–­ç‚¹ä¸‹è½½ï¼šæ–­ç‚¹ä¸‹è½½ç®—æ˜¯ä¸€ä¸ªåŸºæœ¬çš„åŠŸèƒ½äº†ã€‚ä¸‹è½½è¿‡ç¨‹ä¸­ç”¨æˆ·å¯èƒ½ä¸»åŠ¨åœæ­¢ä¸‹è½½ï¼Œä¹Ÿå¯èƒ½æ˜¯ç³»ç»ŸåŸå› å¯¼è‡´ä¸‹è½½è¢«è¿«ä¸­æ–­ï¼Œä½†æ˜¯è¿™äº›ä¹Ÿä¸éœ€è¦å¼€å‘è€…å»å…³å¿ƒï¼Œéœ€è¦åšçš„ä¾ç„¶æ˜¯ä¸¢ä¸€ä¸ªé“¾æ¥è¿›å»ï¼Œå…¶ä»–çš„ä¸ç”¨è€ƒè™‘ã€‚ è‡ªå®šä¹‰ä¸‹è½½è·¯å¾„ï¼šæ¯ä¸ªé¡¹ç›®ä¸‹è½½çš„å­˜å‚¨è·¯å¾„éƒ½æ˜¯ä¸åŒçš„ï¼Œæ‰€ä»¥å¿…é¡»å°†ä¸‹è½½è·¯å¾„çš„è®¾ç½®æ¥å£å¼€æ”¾ç»™ä½¿ç”¨è€…ï¼Œä¸ç„¶è¿™å°±ä¸èƒ½ç§°ä¹‹ä¸ºä¸€ä¸ªé€šç”¨çš„æ¡†æ¶ï¼ŒIPath æ¥å£å·²ç»æä¾›äº†æ”¯æŒã€‚ è‡ªå®šä¹‰ç¼“å­˜ç®¡ç†ï¼šä¸‹è½½è¿‡ç¨‹ä¸­çš„çŠ¶æ€ä¿¡æ¯éœ€è¦ä¿å­˜èµ·æ¥ï¼Œä»¥å¤‡åè¾¹ä½¿ç”¨ï¼Œæ¯”å¦‚ä»ç¼“å­˜ä¸­æ‹¿åˆ°ä¸Šæ¬¡çš„ä¸‹è½½èŠ‚ç‚¹æ¥æ›´æ–°å½“å‰çš„ä¸‹è½½è¿›åº¦ï¼ŒICache æŠŠç¼“å­˜çš„è¯»å–å’Œå†™å…¥çš„èƒ½åŠ›æä¾›ç»™ä½¿ç”¨è€…ï¼Œåªéœ€è¦å®ç°è¿™ä¸ªæ¥å£ï¼Œæ¥å¤„ç†è‡ªå·±çš„é€»è¾‘å³å¯ï¼Œå½“ç„¶å¦‚æœå›¾çœäº‹ï¼Œä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨æˆ‘é»˜è®¤çš„ç¼“å­˜å·¥å…·ã€‚ çº¿ç¨‹æ± ç®¡ç†ï¼šæ¯ä¸ªé¡¹ç›®é€‰ç”¨çš„çº¿ç¨‹æ± ç­–ç•¥ä¹Ÿæ˜¯å„æœ‰ä¸åŒçš„ï¼Œæœ‰çš„éœ€è¦å•çº¿ç¨‹é¡ºåºä¸‹è½½ï¼Œæœ‰çš„éœ€è¦å¤šçº¿ç¨‹å¹¶åˆ—æ‰§è¡Œï¼Œæ‰€ä»¥ä½œè€…æŠŠçº¿ç¨‹æ± çš„æ¥å£ä¹Ÿå¼€æ”¾å‡ºæ¥ï¼Œç»™ä½¿ç”¨è€…è‡ªå®šä¹‰çš„èƒ½åŠ›ï¼Œå°±æ˜¯ä¸Šæ–‡æåˆ°çš„ IThreadPool æ¥å£ã€‚ å¼€æ”¾çš„ç½‘ç»œæ¥å£ï¼šé¡¹ç›®é‡Œç½‘ç»œè¯·æ±‚æ˜¯ç›´æ¥é€šè¿‡ HttpUrlConnection å®ç°çš„ï¼Œä½¿ç”¨è€…å¯èƒ½å¸Œæœ›é€šè¿‡å…¶ä»–ç¬¬ä¸‰æ–¹çš„å¼€æºç½‘ç»œæ¡†æ¶å®ç°ï¼Œé‚£ä¹ˆå°±å¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç±»å®ç° IConnection æ¥å£æ¥å®ç°è‡ªå·±çš„ç½‘ç»œã€‚ å°½ç®¡ä¸Šé¢å·²ç»åšäº†ä»‹ç»ï¼Œä½†å®é™…çš„ä½¿ç”¨æˆ‘å¼ºçƒˆå»ºè®®å‚ç…§ @ä»»æŒ¯é“­ æä¾›çš„ Demoï¼Œå¦åˆ™ä¸ä¸€å®šèƒ½æŠŠè¿™ä¸ªæ¡†æ¶ä½¿ç”¨å¾—åˆç†ï¼Œå°¤å…¶æ˜¯åœ¨ RecyclerView çš„åˆ—è¡¨ä¸­å»ä¸‹è½½ï¼Œå½“ç„¶å½’æ ¹ç»“åº•æˆ‘è®¤ä¸ºæ˜¯ API çš„è®¾è®¡ä¸å¤Ÿç®€å•åˆç†ä»¥åŠæ–‡æ¡£çš„ä¸å®Œå–„ã€‚ è¿˜éœ€è¦æä¸ªé†’ï¼Œå‡å¦‚åœ¨é¡¹ç›®ä¸­æƒ³ä½¿ç”¨ Notification æ¥æ˜¾ç¤ºè¿›åº¦çš„è¯ï¼Œå»ºè®®åšä¸€å±‚è¿‡æ»¤ï¼Œå¯ä»¥å‚ç…§æˆ‘çš„ä»£ç ï¼š private void refreshNotification(float progress, int downloadState, String downloadUrl) { ... switch (downloadState) { case DownloadInfo.STATE_DOWNLOAD: if ((int) (progress * 100) &gt; mProgress) { mProgress = (int) (progress * 100); // åˆ·æ–° Notification æ›´æ–° Progress } break; ... } } å› ä¸ºç›‘å¬çš„è¿›åº¦æ›´æ–°æå¿«ï¼Œå‡ æ¯«ç§’å°±èƒ½æ”¶åˆ°ä¸€æ¬¡è¿›åº¦çš„å›è°ƒï¼Œè¿›åº¦ç²¾ç¡®åˆ°å°æ•°ç‚¹å 7 ä½ï¼Œå½“æ–‡ä»¶è¾ƒå¤§æ—¶ï¼Œæœ‰å¯èƒ½å‡ ç§’é’Ÿå†…è¿›åº¦çš„å‰ä¸¤ä½å°æ•°åŸºæœ¬ä¸ä¼šæœ‰å˜åŒ–ï¼Œè€Œé¢‘ç¹çš„æ— ç”¨æ›´æ–°ä¼šå¯¼è‡´æ•´ä¸ª App å¡é¡¿ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åšè¿‡æ»¤ï¼Œåªæœ‰åœ¨å‰ä¸¤ä½å°æ•°æœ‰å˜æ›´æ—¶æ‰å»åˆ·æ–° Notificationã€‚ æƒ³äº†è§£æ›´å¤šå…³äºè¯¥åº“çš„å®ç°å¯ä»¥å‰å¾€å…¶é¡¹ç›®ä¸»é¡µã€‚ ","link":"https://LiarrDev.github.io/post/DownloadModel-Designed-by-renzhenming/"},{"title":"åœ¨ Android P ä¸Šä½¿ç”¨ HttpClient","content":"åœ¨è¿‡å»ï¼ŒAndroid ä¸Šå‘é€ HTTP è¯·æ±‚ä¸€èˆ¬æœ‰ä¸¤ç§æ–¹å¼ï¼Œä¸€ç§æ˜¯ HttpURLConnectionï¼Œå¦ä¸€ç§æ˜¯ HttpClientã€‚ ä¸è¿‡ç”±äº HttpClient å­˜åœ¨ API æ•°é‡è¿‡å¤šã€æ‰©å±•å›°éš¾ç­‰ç‰¹ç‚¹ï¼ŒAndroid å›¢é˜Ÿè¶Šæ¥è¶Šä¸å»ºè®®æˆ‘ä»¬ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œä» Android 2.3ï¼ˆGingerbreadï¼ŒAPI Level 9ï¼‰å¼€å§‹ï¼Œæ•ˆç‡æ›´é«˜çš„ HttpURLConnection ä¾¿æˆäº†ä¸»æµï¼ŒHttpURLConnection å¯ä»¥é€šè¿‡é€æ˜å‹ç¼©å’Œå“åº”ç¼“å­˜å‡å°‘ç½‘ç»œä½¿ç”¨ï¼Œå¹¶å¯æœ€å¤§é™åº¦é™ä½è€—ç”µé‡ã€‚ ç»ˆäºåœ¨ Android Mï¼ˆMarshmallowï¼ŒAndroid 6.0ï¼ŒAPI Level 23ï¼‰ä¸­ï¼ŒHttpClient çš„åŠŸèƒ½è¢«å®Œå…¨ç§»é™¤ï¼Œæ ‡å¿—ç€æ­¤åŠŸèƒ½è¢«æ­£å¼å¼ƒç”¨ï¼Œæ‰€ä»¥ç°åœ¨ HttpURLConnection ä¾¿æ˜¯ Android SDK ä¸­ä½ èƒ½è§åˆ°çš„å”¯ä¸€ç½‘ç»œè¯·æ±‚ APIã€‚ è€Œåˆ°äº† Android Pï¼ˆPieï¼ŒAndroid 9ï¼ŒAPI Level 28ï¼‰ï¼ŒAndroid å®˜æ–¹å†ä¸‹é‡æ‰‹ï¼Œå°† HttpClient ä» bootclasspath ä¸­ç§»é™¤ä¸”é»˜è®¤æƒ…å†µä¸‹åº”ç”¨æ— æ³•ä½¿ç”¨å®ƒã€‚ ä½†ç°å®æƒ…å†µæ˜¯ï¼Œä»ç„¶æœ‰è®¸å¤šè€é¡¹ç›®ä¾ç„¶åœ¨è¿è¡Œç€ HttpClientï¼Œç»´æŠ¤è¿™äº›è€é¡¹ç›®çš„å¼€å‘äººå‘˜å¾€å¾€å› ä¸ºå„ç§åŸå› è€Œæ²¡æœ‰å¯¹å…¶è¿›è¡Œé‡æ„ï¼Œç”šè‡³æ— æ³•å¯¹å…¶è¿›è¡Œé‡æ„ï¼Œå› æ­¤è¿™å°ç ´æ—§çš„è€çˆ·è½¦ä¾ç„¶åœ¨å­å‘²å­å‘²åœ°è¡Œé©¶ç€ã€‚ å¦‚æœä½ å°è¯•å°†ä½¿ç”¨ HttpClient çš„è€é¡¹ç›®çš„ targetSdkVersion æŒ‡å®šåˆ° 28 æˆ–ä»¥ä¸Šï¼Œé‚£ä¹ˆä½ åœ¨è¿›è¡Œç½‘ç»œè¯·æ±‚æ—¶ï¼Œå¾ˆå¯èƒ½ä¼šé‡åˆ°å¡æ­»çš„æƒ…å†µï¼Œé¡¹ç›®ä¼šæŠ›å‡ºç±»ä¼¼å¦‚ä¸‹å¼‚å¸¸ï¼š E/AndroidRuntime: FATAL EXCEPTION: main java.lang.RuntimeException: Unable to start activity ComponentInfo{&lt;packageName&gt;/&lt;classpath&gt;}: java.lang.RuntimeException: Stub! at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:3782) at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:3961) at android.app.servertransaction.LaunchActivityItem.execute(LaunchActivityItem.java:91) at android.app.servertransaction.TransactionExecutor.executeCallbacks(TransactionExecutor.java:149) at android.app.servertransaction.TransactionExecutor.execute(TransactionExecutor.java:103) at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2386) at android.os.Handler.dispatchMessage(Handler.java:107) at android.os.Looper.loop(Looper.java:213) at android.app.ActivityThread.main(ActivityThread.java:8178) at java.lang.reflect.Method.invoke(Native Method) at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:513) at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1101) Caused by: java.lang.RuntimeException: Stub! at org.apache.http.conn.scheme.SchemeRegistry.&lt;init&gt;(SchemeRegistry.java:5) at ... å…¶å®è¿™ä¸ªå †æ ˆä¿¡æ¯å¾ˆå…·è¿·æƒ‘æ€§ï¼Œä¼šè®©ä½ è¯¯ä»¥ä¸ºæ˜¯é€»è¾‘é—®é¢˜ã€æ··æ·†é”™è¯¯ã€ç±»åº“é”™ç”¨ç­‰ç­‰çš„é—®é¢˜ï¼Œä½†å®é™…ä¸Šåªæ˜¯å› ä¸º Android P å°† HttpClient ä» bootclasspath ä¸­ç§»é™¤æ‰€äº§ç”Ÿçš„é”™è¯¯ç½¢äº†ã€‚ è·Ÿä¹‹å‰ã€Android P è§£é™¤ HTTP æ˜æ–‡é€šä¿¡é™åˆ¶ã€ç±»ä¼¼ï¼ŒAndroid å®˜æ–¹ä¾ç„¶ç»™æˆ‘ä»¬ç•™äº†åé—¨ï¼Œåªéœ€åœ¨ AndroidManifest.xml æ·»åŠ ä»¥ä¸‹å†…å®¹å³å¯ï¼š &lt;manifest ...&gt; &lt;application ...&gt; ... &lt;uses-library android:name=&quot;org.apache.http.legacy&quot; android:required=&quot;false&quot; /&gt; &lt;/application&gt; &lt;/manifest&gt; æ¥ä¸‹æ¥ä½ å°±å¯ä»¥ç»§ç»­å¼€ç€è¿™å°è€çˆ·è½¦å­å‘²å­å‘²åœ°ä¸Šè·¯äº†ã€‚ å‚è€ƒå†…å®¹ Android 6.0 Changes | Android Developers Behavior changes: apps targeting API level 28+ | Android Developers ","link":"https://LiarrDev.github.io/post/Using-HttpClient-above-Android-P/"},{"title":"Android P è§£é™¤ HTTP æ˜æ–‡é€šä¿¡é™åˆ¶","content":"éšç€å›½å†…åº”ç”¨å¸‚åœºçš„é€æ­¥è§„èŒƒï¼Œä¸Šæ¶å„åº”ç”¨å¸‚åœºçš„è¦æ±‚ä¹Ÿè¶Šæ¥è¶Šé«˜ï¼Œå°±ç›®å‰æ¥çœ‹ï¼Œå›½å†…åº”ç”¨å¸‚åœºå¹³å°ä¸Šæ¶æ™®éè¦æ±‚åº”ç”¨çš„ targetSdkVersion ä¸å¾—ä½äº 26ï¼Œä¹Ÿç®—æ˜¯ç´§è·Ÿã€Google Playã€ï¼ˆtargetSdkVersion ä¸å¾—ä½äº 28ï¼‰çš„æ­¥ä¼äº†ã€‚ å½“ç„¶ï¼Œä¸ºäº†è®©ç”¨æˆ·æœ‰æ›´åŠ èˆ’é€‚çš„ä½“éªŒï¼Œæˆ‘ä»¬å¼€å‘åº”ç”¨çš„æ—¶å€™ç†åº”å°† targetSdkVersion è®¾ç½®å¾—è¶Šé«˜è¶Šå¥½ï¼Œå°½ç®¡è¿™æ„å‘³ç€å¼€å‘è€…å°†é¢ä¸´æ›´åŠ ä¸¥æ ¼çš„æƒé™ç®¡æ§å’Œç¹ççš„é€‚é…ã€‚ å…¶ä¸­å°±åŒ…æ‹¬äº† Android Mï¼ˆMarshmallowï¼ŒAndroid 6.0ï¼ŒAPI Levle 23ï¼‰çš„åŠ¨æ€æƒé™ã€Android Oï¼ˆOreoï¼ŒAndroid 8.0ï¼ŒAPI Level 26ï¼‰çš„æ¸ é“é€šçŸ¥ç­‰ã€‚ è€Œåœ¨ Android Pï¼ˆPieï¼ŒAndroid 9ï¼ŒAPI Level 28ï¼‰ä¸­ï¼Œåˆ™å¯¹ HTTP æ˜æ–‡é€šä¿¡åšå‡ºäº†é™åˆ¶ã€‚ Starting with Android 9 (API level 28), cleartext support is disabled by default. ä» Android 9ï¼ˆAPI Level 28ï¼‰å¼€å§‹ï¼Œç³»ç»Ÿé»˜è®¤æƒ…å†µä¸‹å·²åœç”¨æ˜æ–‡æ”¯æŒã€‚ å¦‚æœä½ ä½¿ç”¨ã€OkHttpã€è¿›è¡Œæ˜æ–‡çš„ HTTP ç½‘ç»œè¯·æ±‚ï¼Œä¼šæŠ›å‡ºå¦‚ä¸‹å¼‚å¸¸ï¼š W/System.err: java.net.UnknownServiceException: CLEARTEXT communication to &lt;HOST&gt; not permitted by network security policy è§¦å‘æºç å¦‚ä¸‹ï¼š if (!Platform.get().isCleartextTrafficPermitted(host)) { throw new RouteException(new UnknownServiceException( &quot;CLEARTEXT communication to &quot; + host + &quot; not permitted by network security policy&quot;)); } ä½¿ç”¨ Android ä¸­æ ‡å‡† Java æ¥å£ HttpURLConnection æ¥è¿›è¡Œ HTTP è¯·æ±‚ï¼Œä¹ŸåŒæ ·ä¼šæŠ›å‡ºå¼‚å¸¸ï¼š W/System.err: java.io.IOException: Cleartext HTTP traffic to &lt;HOST&gt; not permitted è€Œä½¿ç”¨ HTTPS è¯·æ±‚åˆ™ä¸ä¼šå‡ºç°é—®é¢˜ã€‚ Android P ä¹‹åç³»ç»Ÿé™åˆ¶äº†æ˜æ–‡çš„ç½‘ç»œè¯·æ±‚ï¼ŒéåŠ å¯†è¯·æ±‚ä¼šè¢«ç³»ç»Ÿç¦æ­¢æ‰ï¼Œä¹Ÿå°±æ˜¯è¯´å¦‚æœå½“å‰åº”ç”¨çš„è¯·æ±‚æ˜¯ HTTP è¯·æ±‚è€Œé HTTPSï¼Œå°±ä¼šå¯¼ç³»ç»Ÿç¦æ­¢å½“å‰åº”ç”¨è¿›è¡Œè¯¥è¯·æ±‚ã€‚ æ—¢ç„¶æ˜¯ Android P çš„é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯è¯´åªè¦æŒ‡å®šäº† targetSdkVersion ä¸º 28ï¼Œå°±å¿…å®šä¼šæ‰§è¡Œè¿™æ®µä»£ç ï¼Œé‚£ä¹ˆæˆ‘åªè¦æŠŠå…¶ä¿®æ”¹ä¸ºä½ç‰ˆæœ¬å°±å¯ä»¥é¿å…äº†ã€‚ ä½†æ˜¯ï¼Œåœ¨å„å¤§åº”ç”¨å¹³å°éƒ½åœ¨é€æ¸æé«˜åº”ç”¨ä¸Šæ¶é—¨æ§›çš„æƒ…å†µä¸‹ï¼Œè¿™å¿…å®šä¸æ˜¯é•¿ä¹…ä¹‹è®¡ï¼Œè¿™ä¸æµè§ˆå™¨å¯¹ HTTPS çš„è¦æ±‚æ˜¯å»åˆçš„ï¼Œä¸è¿‡åœ¨ Android ä¸­æˆ‘ä»¬ä¾ç„¶å¯ä»¥é€šè¿‡ä¸€äº›ç®€å•çš„é…ç½®è®©åº”ç”¨æ”¯æŒ HTTP è¯·æ±‚ã€‚ æœ€ç®€å•çš„æ–¹æ³•ï¼Œç›´æ¥åœ¨ AndroidManifest ä¸­è®¾ç½®æ˜æ–‡å¼€å¯ï¼š &lt;application ... android:usesCleartextTraffic=&quot;true&quot;&gt; ... &lt;/application&gt; å¤æ‚ä¸€ç‚¹å„¿çš„æ–¹æ³•ï¼Œè®¾ç½®å•ç‹¬çš„ç½‘ç»œå®‰å…¨é…ç½®æ–‡ä»¶ï¼Œéœ€åœ¨ã€Œresã€ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªã€Œxmlã€æ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸­åˆ›å»ºä¸€ä¸ªã€Œnetwork_security_config.xmlã€æ–‡ä»¶ï¼Œå†…å®¹å¦‚ä¸‹ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;network-security-config&gt; &lt;base-config cleartextTrafficPermitted=&quot;true&quot; /&gt; &lt;/network-security-config&gt; ç„¶ååœ¨ AndroidManifest ä¸­å¼•ç”¨è¯¥ç½‘ç»œå®‰å…¨é…ç½®æ–‡ä»¶ï¼š &lt;application ... android:networkSecurityConfig=&quot;@xml/network_security_config&quot;&gt; ... &lt;/application&gt; å°½ç®¡è¿™æ ·çœ‹æ¥ä½¿ç”¨å•ç‹¬çš„ç½‘ç»œå®‰å…¨é…ç½®æ–‡ä»¶ä¼¼ä¹æœ‰ç‚¹å„¿ç¹çï¼Œä½†æœ‰ä¸ªå¥½å¤„æ˜¯å¯ä»¥é’ˆå¯¹ç‰¹å®šç½‘åŸŸå’Œç‰¹å®šåº”ç”¨é…ç½®è‡ªå®šä¹‰ä¿¡ä»»é”šã€é…ç½®ç”¨äºè°ƒè¯•çš„ CA ç­‰ï¼Œæ‹¥æœ‰æ›´å¤§çš„é…ç½®æƒé™ã€‚ æœ€åï¼Œè¿˜æ˜¯å»ºè®®ç£ä¿ƒä¸‹åç«¯å’Œè¿ç»´äººå‘˜èµ¶ç´§ä¸Š HTTPS å§ã€‚ å‚è€ƒå†…å®¹ï¼š Network security configuration | Android Developers ","link":"https://LiarrDev.github.io/post/Remove-Cleartext-Restrictions-above-Android-P/"},{"title":"ç”¨è„šæœ¬æ‰¹é‡åˆ é™¤è‡ªå·±å‘è¿‡çš„å¾®åš","content":"äº‹éš”ç»å¹´ï¼Œä»Šå¤©ç»ˆäºâ€œç‹ ä¸‹å¿ƒâ€ç»™è‡ªå·±çš„å¾®åšè´¦å·è§£é™¤è´¦å·å¼‚å¸¸é™åˆ¶äº†ï¼Œç„¶åå¿ƒè¡€æ¥æ½®æƒ³æ¸…ç©ºä¹‹å‰å‘çš„æ‰€æœ‰å¾®åšï¼Œå¯æ˜¯æ²¡æƒ³åˆ°å½“å¹´å¹´å°‘æ— çŸ¥ï¼Œè½¬å‘äº†ä¸€å¤§å †ä¹±ä¸ƒå…«ç³Ÿçš„ä¸œè¥¿ï¼Œå¾®åšå·²æœ‰åƒä½™æ¡ï¼Œæ‰‹åŠ¨ä¸€æ¡æ¡åˆ é™¤éƒ½ä¸çŸ¥é“è¦åˆ åˆ°çŒ´å¹´é©¬æœˆã€‚ ä½œä¸ºä¸€ä¸ªå¼€å‘è€…æˆ‘çŸ¥é“è‚¯å®šæ˜¯å¯ä»¥å€ŸåŠ©è„šæœ¬æ¥å¸®åŠ©æˆ‘å®Œæˆæ‰¹é‡åˆ é™¤æ“ä½œçš„ï¼Œå¼€æã€‚ å½“ç„¶ï¼Œä¸ºäº†æˆ‘çš„è´¦å·å®‰å…¨ï¼Œä¸æƒ³ä½¿ç”¨ç¬¬ä¸‰æ–¹çš„å·¥å…·ï¼Œä»¥é¿å…å› ä¸ºæˆæƒæ‰€äº§ç”Ÿçš„ä¿¡æ¯æ³„æ¼ã€‚åœ¨æ‰‹æœºä¸Šä½¿ç”¨è„šæœ¬åˆä¸å¤Ÿæ–¹ä¾¿ï¼Œå¹¸å¥½æœ‰ç½‘é¡µç‰ˆï¼Œæµè§ˆå™¨å¯ä»¥å¾ˆè½»æ¾åœ°å¸®æˆ‘æ‰§è¡Œè„šæœ¬ã€‚ å¥½äº†ï¼Œå¤§æ–¹å‘ç¡®å®šäº†ï¼Œå°±å¼€å§‹æ‰¾è½®å­äº†ã€‚ æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œçš„ç¡®æ˜¯ã€Œæ‰¾ã€ï¼Œè€Œä¸æ˜¯ã€Œé€ ã€ï¼Œè¿™ç§å°é—®é¢˜è‚¯å®šæœ‰æ— æ•°äººé‡åˆ°è¿‡ï¼Œä½•å¿…è‡ªå·±åŠ¨æ‰‹å‘¢ï¼Ÿ æ™®éçœ‹æ¥ï¼Œç½‘ä¸Šä½¿ç”¨æ¯”è¾ƒå¤šçš„æ˜¯å¦‚ä¸‹ä»£ç ï¼š var s = document.createElement('script'); s.setAttribute( 'src', 'https://lib.sinaapp.com/js/jquery/2.0.3/jquery-2.0.3.min.js' ); s.onload = function() { setInterval(function() { if (!$('a[action-type=&quot;feed_list_delete&quot;]')) { $('a.next').click(); } else { $('a[action-type=&quot;feed_list_delete&quot;]')[0].click(); $('a[action-type=&quot;ok&quot;]')[0].click(); } // scroll bottom let auto load $('html, body').animate({ scrollTop: $(document).height() }, 'slow'); var len = $('div[action-type=&quot;feed_list_item&quot;]').length; if (len &lt; 5) { $('a[class=&quot;page next S_txt1 S_line1&quot;]')[0].click(); } }, 800); }; document.head.appendChild(s); åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€å¾®åšå¹¶ç™»å½•ï¼Œè¿›å…¥åˆ°ä¸ªäººä¸»é¡µçš„é¡µé¢ï¼Œæ‰“å¼€æµè§ˆå™¨çš„ã€Œå¼€å‘è€…å·¥å…·ã€å¹¶åˆ‡æ¢è‡³ã€ŒConsoleã€çš„ Tabï¼ŒæŠŠä¸Šæ–¹ä»£ç å¤åˆ¶è¿›å»å›è½¦æ‰§è¡Œå³å¯ã€‚ è„šæœ¬æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½ä¼šé‡åˆ°ç³»ç»Ÿç¹å¿™çš„å¼¹çª—ï¼Œåªè¦è„šæœ¬è¿˜åœ¨æ‰§è¡Œä¸­å¯ä»¥æš‚æ—¶ä¸ç†ä¼šï¼Œå¾…è„šæœ¬æ‰§è¡Œç»“æŸæ—¶åˆ·æ–°é¡µé¢å³å¯ã€‚ è¯¥å¼¹çª—çš„åŸå› æ˜¯ç”±äºè¯·æ±‚å¤ªè¿‡é¢‘ç¹å¯¼è‡´çš„ï¼Œå…¶å®è„šæœ¬æ‰€åšçš„å·¥ä½œå°±æ˜¯æ¨¡æ‹Ÿæ»šåŠ¨ç‚¹å‡»ç­‰æ“ä½œï¼Œæ¯ä¸€æ¬¡åˆ é™¤æˆ–è€…åŠ è½½éƒ½æ˜¯ä¸€æ¬¡ç½‘ç»œè¯·æ±‚ï¼Œç”±äºè„šæœ¬çš„é€Ÿåº¦è¿œè¿œå¿«äºäººæ‰‹æ“ä½œçš„é€Ÿåº¦ï¼Œåœ¨çŸ­æ—¶é—´å†…è¿›è¡Œé«˜é¢‘çš„è¯·æ±‚å°±ä¼šè§¦å‘å¾®åšçš„é˜²å¾¡ã€‚ é‚£å¦‚ä½•åˆ¤æ–­è„šæœ¬æ˜¯å¦è¿˜åœ¨æ‰§è¡Œä¸­å‘¢ï¼Œåªè¦ä½ çœ‹åˆ°é¡µé¢æœ‰é—ªåŠ¨å°±ä»£è¡¨è„šæœ¬è¿˜åœ¨æ‰§è¡Œï¼Œå¦‚æœé¡µé¢åœæ­¢é—ªåŠ¨äº†ï¼Œä¸”ä½ çš„å¾®åšä»æœªåˆ é™¤å®Œæˆï¼Œå¯ä»¥åˆ·æ–°ä¸€æ¬¡é¡µé¢å†æ‰§è¡Œè„šæœ¬ï¼Œå¦‚æ­¤åå¤ï¼Œç›´è‡³å¾®åšå®Œå…¨åˆ é™¤ä¸ºæ­¢ã€‚ å®æµ‹ä¸‹æ¥ï¼Œè„šæœ¬æ‰§è¡Œä¸€æ¬¡æœ€å°‘å¯ä»¥åˆ é™¤ä¸‰å››åæ¡å¾®åšå†…å®¹ï¼Œæˆ‘ä¼°è®¡åº”è¯¥æ˜¯ä¸€é¡µçš„å¾®åšæ•°ï¼Œæœ€å¤šçš„æƒ…å†µä¸‹ï¼Œæˆ‘æ²¡æœ‰æµ‹è¯•åˆ°ä¸Šé™ï¼Œä½†æ˜¯å‡ ç™¾æ¡ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œåªæ˜¯å¾®åšå®˜æ–¹å¯èƒ½ä¼šæœ‰å•æ—¥åˆ é™¤ä¸Šé™æ§åˆ¶ï¼Œç½‘ä¸Šæœ‰äººè¯´æ˜¯ 2000 æ¡å·¦å³ï¼Œæˆ‘æ²¡æœ‰è€ƒè¯ã€‚ å‚è€ƒå†…å®¹ï¼š æ–°æµªå¾®åšå¦‚ä½•æ‰¹é‡åˆ é™¤ä»¥å‰å‘è¿‡çš„å¾®åš ï¼Ÿ - çŸ¥ä¹ ","link":"https://LiarrDev.github.io/post/Delete-Weibos-with-a-Script/"},{"title":"Android ä¸º WebView æ·»åŠ è¿›åº¦æ¡","content":"ä¹‹å‰ã€Android Toolbar æ˜¾ç¤º WebView Titleã€ç­‰æ–‡ç« ä¸­æåˆ°ç°åœ¨å¾ˆå¤š App éƒ½ä½¿ç”¨å†…åµŒç½‘é¡µçš„æ–¹å¼æ¥æé«˜è¿­ä»£æ•ˆç‡ï¼Œè€Œã€WeChatã€ä¾¿æ˜¯å…¶ä¸€ï¼Œæœ€å¤§çš„ä½“ç°å°±æ˜¯åœ¨å…¬ä¼—å·æ–‡ç« ä¸­ï¼Œä¸è¿‡å…¶ä½¿ç”¨çš„ä¸æ˜¯åŸç”Ÿçš„ WebViewï¼Œè€Œæ˜¯å®šåˆ¶çš„è…¾è®¯ X5 å†…æ ¸ TBSã€‚ å…¶ä¸­æ¯”è¾ƒæœ‰ç”¨çš„æ˜¯ï¼Œåœ¨åŠ è½½ç½‘é¡µæ—¶ï¼Œä¸Šæ–¹ä¼šæœ‰ä¸€ä¸ªè¿›åº¦æ¡ç”¨äºå±•ç¤ºå½“å‰ç½‘é¡µçš„åŠ è½½è¿›åº¦ï¼š è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„äº¤äº’æ§ä»¶ï¼Œèƒ½å¤Ÿè®©ç”¨æˆ·çŸ¥æ™“å½“å‰çš„åŠ è½½çŠ¶æ€ï¼Œæ¥ä½œå‡ºå¯¹åº”çš„æ“ä½œã€‚ é‚£ä¹ˆåŸç”Ÿ WebView èƒ½å¦åŠ ä¸Šä¸€ä¸ªè¿›åº¦æ¡å‘¢ï¼Ÿå½“ç„¶å¯ä»¥ã€‚ é¦–å…ˆéœ€è¦åœ¨ã€Œdrawableã€æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºä¸€ä¸ªè¿›åº¦æ¡ ProgressBar çš„èƒŒæ™¯æ ·å¼ï¼Œè¿™é‡Œæˆ‘æŠŠå®ƒå‘½åä¸ºã€Œprogress_bar.xmlã€ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;layer-list xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; &gt; &lt;item android:id=&quot;@android:id/background&quot;&gt; &lt;shape&gt; &lt;corners android:radius=&quot;2dp&quot; /&gt; &lt;gradient android:angle=&quot;270&quot; android:centerColor=&quot;#E3E3E3&quot; android:endColor=&quot;#E6E6E6&quot; android:startColor=&quot;#C8C8C8&quot; /&gt; &lt;/shape&gt; &lt;/item&gt; &lt;item android:id=&quot;@android:id/progress&quot;&gt; &lt;clip&gt; &lt;shape&gt; &lt;corners android:radius=&quot;2dp&quot; /&gt; &lt;gradient android:centerColor=&quot;#999999&quot; android:endColor=&quot;#999999&quot; android:startColor=&quot;#999999&quot; /&gt; &lt;/shape&gt; &lt;/clip&gt; &lt;/item&gt; &lt;/layer-list&gt; åœ¨å¸ƒå±€æ–‡ä»¶å†…åŠ å…¥ ProgressBar æ§ä»¶ï¼š &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot; tools:context=&quot;.MainActivity&quot;&gt; &lt;android.support.v7.widget.Toolbar android:id=&quot;@+id/toolbar&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;?attr/actionBarSize&quot; /&gt; &lt;ProgressBar android:id=&quot;@+id/progress_bar&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;3dp&quot; android:progressDrawable=&quot;@drawable/progress_bar&quot; android:visibility=&quot;gone&quot; style=&quot;?android:attr/progressBarStyleHorizontal&quot; /&gt; &lt;WebView android:id=&quot;@+id/web_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; /&gt; &lt;/LinearLayout&gt; ProgressBar æ§ä»¶å¯¼å…¥äº†åˆšæ‰çš„èƒŒæ™¯æ ·å¼ï¼Œå¹¶æŒ‡å®šäº†å…¶ styleã€‚ æœ€åå†™å‡ºå…¶æ˜¾ç¤ºé€»è¾‘ï¼š ProgressBar progressBar = (ProgressBar) findViewById(R.id.progress_bar); WebView webView = (WebView) findViewById(R.id.web_view); webView.setWebChromeClient(new WebChromeClient() { @Override public void onProgressChanged(WebView view, int newProgress) { if (newProgress == 100) { progressBar.setVisibility(View.GONE); } else { progressBar.setVisibility(View.VISIBLE); progressBar.setProgress(newProgress); } } }); WebChromeClient çš„ onProgressChanged() æ–¹æ³•ä¼šå›è°ƒ WebView çš„åŠ è½½è¿›åº¦ï¼Œæˆ‘ä»¬åœ¨è¿™é‡Œè·å–åˆ°è¿›åº¦å€¼å¹¶è®¾ç½®åˆ° ProgressBar ä¸­å»ï¼Œå¹¶ä¸”åœ¨è¿›åº¦ä¸º 100% ä¹Ÿå°±æ˜¯åŠ è½½å®Œæˆæ—¶æ¶ˆå¤±ï¼Œå³å¯å®ç°å¦‚åŒã€WeChatã€èˆ¬åŠ è½½ç½‘é¡µçš„è¿›åº¦æ¡æ•ˆæœäº†ã€‚ ","link":"https://LiarrDev.github.io/post/Progress-Bar-for-Android-WebView/"},{"title":"Android Activity è½¬åœºåŠ¨ç”»","content":"åœ¨ Android å¼€å‘ä¸­ï¼ŒActivity çš„è·³è½¬æ˜¯æœ‰é»˜è®¤çš„è½¬åœºåŠ¨ç”»çš„ï¼Œæ¯”å¦‚åœ¨å›½å†…çš„å¤§å¤šæ•° ROM ä¸­ï¼Œé»˜è®¤çš„ Activity åˆ‡æ¢æ–¹å¼æ˜¯ä»å³å¾€å·¦è¿›å…¥ï¼Œä»å·¦å¾€å³é€€å‡ºï¼Œè¿™ä¹Ÿæ˜¯å¤§å¤šæ•° App æ‰€ä½¿ç”¨çš„åˆ‡æ¢æ–¹å¼ã€‚ ä½†æ˜¯ï¼Œå½“æœ‰æ—¶å€™åŸå‹è®¾è®¡å‡ºæ¥ä¹‹åï¼Œä¼šå‘ç°è¿™ç§æ–¹å¼å¹¶ä¸é‚£ä¹ˆåˆç†ï¼Œæ¯”å¦‚åœ¨ã€ã€ŒZXingã€å®ç° Android æ‰«æäºŒç»´ç ã€ä¸€æ–‡ä¸­å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘æŠŠæ‰«ææŒ‰é’®æ”¾åœ¨äº†åº•éƒ¨å¯¼èˆªæ çš„ä¸­å¤®ï¼Œé‚£ä¹ˆå·¦å³åˆ‡æ¢çš„æ–¹å¼å°±æœ‰äº›è¿å’Œäº†ï¼Œæ‰€ä»¥æˆ‘æ”¹æˆäº†ä»åº•éƒ¨å‘ä¸Šå¼¹å…¥ã€‚ é‚£ä¹ˆè¯¥å¦‚ä½•å®ç°è¿™ç§åˆ‡æ¢çš„æ–¹å¼å‘¢ï¼Ÿ ç¼–å†™åŠ¨ç”»æ–‡ä»¶ è™½ç„¶è¿™ä¸ª Demo æ˜¯ç”¨ React Native å†™çš„ï¼Œä½†æ˜¯ç”±äºæ‰«æäºŒç»´ç çš„åŠŸèƒ½æ˜¯ä½¿ç”¨åŸç”Ÿ Androidï¼Œæ‰€ä»¥è¿™ä¹Ÿæ˜¯åŸç”Ÿ Android çš„å®ç°æ–¹å¼ã€‚ é¦–å…ˆåœ¨ã€Œresã€ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€Œanimã€ï¼Œä¸éš¾çœ‹å‡ºè¿™æ˜¯ä¸€ä¸ªç”¨äºå­˜æ”¾åŠ¨ç”»æ–‡ä»¶çš„æ–‡ä»¶å¤¹ï¼Œä¹Ÿå°±æ˜¯ã€ŒAnimationã€çš„ç¼©å†™ï¼Œåœ¨ã€Œanimã€æ–‡ä»¶å¤¹ä¸‹æ–°å»º Animation Resource Fileï¼Œæ¯ä¸€ä¸ªåŠ¨ç”»éƒ½è¦åŒ¹é…ä¸€ä¸ªåŠ¨ç”»æ–‡ä»¶ã€‚ æ¯”å¦‚æˆ‘æƒ³è¦ä¸€ä¸ª Activity çš„å…¥åœºåŠ¨ç”»ï¼Œæˆ‘å¯ä»¥æ–°å»ºä¸€ä¸ªåä¸ºã€Œanim_activity_open.xmlã€çš„åŠ¨ç”»æ–‡ä»¶ï¼Œç„¶åå†åœ¨è¯¥æ–‡ä»¶å†…æŒ‡å®šåŠ¨ç”»çš„æ•ˆæœã€‚ å…ˆæ¥çœ‹ä»åº•éƒ¨å¼¹å…¥ Activity çš„å®ç°ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;translate android:duration=&quot;@android:integer/config_mediumAnimTime&quot; android:fromYDelta=&quot;100%p&quot; android:interpolator=&quot;@android:anim/decelerate_interpolator&quot; android:toYDelta=&quot;0&quot; /&gt; &lt;/set&gt; è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå±æ€§çš„ä½œç”¨ï¼š android:durationï¼šåŠ¨ç”»è¿è¡Œçš„æ—¶é—´ï¼Œå•ä½æ˜¯æ¯«ç§’ã€‚ android:fromYDeltaï¼šåŠ¨ç”»èµ·å§‹æ—¶ï¼ŒY åæ ‡ä¸Šçš„ä½ç½®ã€‚ android:toYDeltaï¼šåŠ¨ç”»ç»“æŸæ—¶ï¼ŒY åæ ‡ä¸Šçš„ä½ç½®ã€‚ android:fromXDeltaï¼šåŠ¨ç”»èµ·å§‹æ—¶ï¼ŒX åæ ‡ä¸Šçš„ä½ç½®ã€‚ android:toYDeltaï¼šåŠ¨ç”»ç»“æŸæ—¶ï¼ŒX åæ ‡ä¸Šçš„ä½ç½®ã€‚ android:interpolatorï¼šç”¨æ¥ä¿®é¥°åŠ¨ç”»æ•ˆæœï¼Œå®šä¹‰åŠ¨ç”»çš„å˜åŒ–ç‡ï¼Œå¯ä»¥ä½¿åŠ¨ç”»æ•ˆæœ acceleratedï¼ˆåŠ é€Ÿï¼‰ã€deceleratedï¼ˆå‡é€Ÿï¼‰ã€repeatedï¼ˆé‡å¤ï¼‰ã€bouncedï¼ˆå¼¹è·³ï¼‰ç­‰ã€‚ ä¸éš¾ç†è§£ï¼Œè¯¥åŠ¨ç”»å®ç°çš„æ•ˆæœå°±æ˜¯ä» Y è½´ 100%p çš„ä½ç½®å¼€å§‹ï¼Œåˆ° Y è½´ 0 çš„ä½ç½®ç»“æŸï¼ŒæŒç»­æ—¶é—´æ˜¯ 500 æ¯«ç§’ï¼Œå¹¶ä¼´æœ‰åŠ é€Ÿæ•ˆæœã€‚ è§£é‡Šä¸€ä¸‹è½´ï¼Œåªéœ€è®°ä½ï¼Œä»¥å±å¹•å·¦ä¸Šè§’ä¸ºåæ ‡åŸç‚¹ï¼Œä¸ä¹‹ç›¸è¿çš„ä¸¤ç«¯å±å¹•åˆ™ä¸ºåæ ‡è½´ï¼Œå¾€å³æ˜¯ X è½´ï¼Œå¾€ä¸‹æ˜¯ Y è½´ã€‚å–å€¼å¯ä»¥æœ‰å¤šç§å†™æ³•ï¼š æ•°å€¼ï¼ˆå¦‚ 50ï¼‰ï¼šè¡¨ç¤º View å·¦ä¸Šè§’åæ ‡åŠ ä¸Šå…·ä½“æ•°å€¼çš„åƒç´ ã€‚ ç™¾åˆ†æ•°ï¼ˆå¦‚ 50%ï¼‰ï¼šè¡¨ç¤ºåœ¨å½“å‰ View å·¦ä¸Šè§’åæ ‡åŠ ä¸Š View å®½åº¦çš„å…·ä½“ç™¾åˆ†æ¯”ã€‚ çˆ¶ç™¾åˆ†æ•°ï¼ˆå¦‚ 50%pï¼‰ï¼šè¡¨ç¤ºåœ¨ View å·¦ä¸Šè§’åæ ‡åŠ ä¸Šçˆ¶æ§ä»¶å®½åº¦çš„å…·ä½“ç™¾åˆ†æ¯”ã€‚ åŒç†ï¼Œä»åº•éƒ¨é€€å‡ºï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;translate android:duration=&quot;@android:integer/config_mediumAnimTime&quot; android:fromYDelta=&quot;0&quot; android:interpolator=&quot;@android:anim/decelerate_interpolator&quot; android:toYDelta=&quot;100%p&quot; /&gt; &lt;/set&gt; ä»å³è¾¹è¿›å…¥ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;translate android:duration=&quot;@android:integer/config_mediumAnimTime&quot; android:fromXDelta=&quot;100%p&quot; android:interpolator=&quot;@android:anim/decelerate_interpolator&quot; android:toXDelta=&quot;0&quot; /&gt; &lt;/set&gt; å…¶ä»–å°±ä¸ä¸€ä¸€è¯¦è¿°äº†ï¼Œå‚ç…§ä¿®æ”¹å³å¯ã€‚ æ¥ä¸‹æ¥å°±æ˜¯è°ƒç”¨ï¼Œåªéœ€åœ¨å¯åŠ¨å’Œé”€æ¯ Activity æ—¶è°ƒç”¨ç›¸åº”çš„åŠ¨ç”»å³å¯ã€‚ æ¯”å¦‚ï¼Œåœ¨è°ƒç”¨ startActivity() å¯åŠ¨æ–°çš„ Activity æ—¶åœ¨åé¢æ·»åŠ ä¸€å¥ä»£ç å³å¯ï¼š startActivity(intent); overridePendingTransition(R.anim.anim_activity_open, 0); å…¶ä¸­ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦å¯åŠ¨çš„ Activity çš„å¼¹å…¥åŠ¨ç”»ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å½“å‰ Activity çš„é€€å‡ºåŠ¨ç”»ï¼Œå½“å‚æ•°ä¸º 0 æ—¶è¡¨ç¤ºæ— åŠ¨ç”»ã€‚ åœ¨ startActivityForResult() ä¸­ä¹Ÿæ˜¯åŒç†ï¼š startActivityForResult(intent, CODE); overridePendingTransition(R.anim.anim_activity_open, 0); å½“é”€æ¯ Activity æ—¶ï¼Œåˆ™åœ¨é‡å†™çš„ finish() æ–¹æ³•ä¸­è°ƒç”¨ï¼š @Override public void finish() { super.finish(); overridePendingTransition(0, R.anim.anim_activity_close); } ä½†æ˜¯æˆ‘åœ¨é¡¹ç›®ä¸­å¶å°”ä¼šé‡åˆ°é€€å‡º Activity æ—¶çŸ­æš‚é»‘å±çš„æƒ…å†µï¼Œç›´è‡³è¯¥ Activity å®Œå…¨é€€å‡ºæ‰ä¼šæ­£å¸¸æ˜¾ç¤ºï¼Œæ¯”å¦‚æˆ‘åœ¨ä¸Šæ–¹è®¾ç½®äº†åŠ¨ç”»æŒç»­æ—¶é•¿ä¸º 0.5 ç§’ï¼Œé‚£ä¹ˆå°±ä¼šæœ‰ 0.5 ç§’çš„é»‘å±ï¼Œè¿™æ˜¯å¾ˆä¸å¥½çš„ä½“éªŒã€‚ è€Œåæˆ‘å‘ç°æ–°å»ºä¸€ä¸ªåŠ¨ç”»å¯ä»¥é¿å…è¿™ç§æƒ…å†µï¼Œäºæ˜¯å°±æœ‰äº†ã€Œanim_activity_stay.xmlã€è¿™ä¸ªåŠ¨ç”»æ–‡ä»¶ï¼Œè™½è¯´æ˜¯â€œåŠ¨ç”»â€ï¼Œä½†å®é™…ä¸Šå¦‚å…¶åæ‰€è¿°ï¼Œæ˜¯ä¸€ä¸ªâ€œä¸åŠ¨ç”»â€ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;translate android:fromYDelta=&quot;0&quot; android:toYDelta=&quot;0&quot; android:duration=&quot;@android:integer/config_mediumAnimTime&quot; /&gt; &lt;/set&gt; ä¸€ç›®äº†ç„¶ï¼Œèµ·å§‹ä½ç½®ä¸ç»“æŸä½ç½®ç›¸åŒï¼Œå³ä¸äº§ç”Ÿç§»åŠ¨ã€‚ åœ¨è°ƒç”¨æ—¶ï¼Œåˆ™ä½¿ç”¨ï¼š overridePendingTransition(R.anim.activity_stay, R.anim.activity_close); è¿™æ ·å°±èƒ½å¤Ÿäº§ç”Ÿç›¸åŒçš„æ•ˆæœã€‚ å¯¹äº†ï¼ŒAndroid æœ¬èº«ä¹Ÿè‡ªå¸¦äº†ä¸€äº›åˆ‡æ¢ Activity çš„åŠ¨ç”»æ–‡ä»¶ï¼Œå¯ä»¥è®©ä½ çœä¸‹é€ è½®å­çš„æ—¶é—´ï¼Œå¦‚ä»å±å¹•å·¦è¾¹åˆ‡å…¥ï¼Œå¯ä»¥ç›´æ¥è°ƒç”¨ï¼š overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right); å½“ç„¶ï¼Œå®˜æ–¹è‡ªå¸¦çš„åŠ¨ç”»æ•ˆæœæ€»æ˜¯æœ‰é™çš„ï¼Œæ‰€ä»¥çŸ¥é“å¦‚ä½•è‡ªå®šä¹‰ä¹Ÿæ˜¯ååˆ†é‡è¦çš„ã€‚ æ¥ä¸‹æ¥çœ‹çœ‹è¿˜æœ‰å“ªäº›æ•ˆæœã€‚ æ¯”å¦‚æˆ‘ä»¬æƒ³å®ç° iOS çš„ç¼©æ”¾æ•ˆæœï¼Œè¿›åœºåŠ¨ç”»å¯ä»¥è¿™æ ·å†™ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:interpolator=&quot;@android:anim/accelerate_interpolator&quot;&gt; &lt;scale android:duration=&quot;@android:integer/config_mediumAnimTime&quot; android:fromXScale=&quot;2.0&quot; android:fromYScale=&quot;2.0&quot; android:pivotX=&quot;50%p&quot; android:pivotY=&quot;50%p&quot; android:toXScale=&quot;1.0&quot; android:toYScale=&quot;1.0&quot; /&gt; &lt;/set&gt; &lt;scale&gt; åœ¨è¿™é‡Œå°±æ˜¯ç”¨æ¥å®ç°ç¼©æ”¾çš„ï¼Œå±æ€§çš„ä½œç”¨å¦‚ä¸‹ï¼š android:fromXScaleï¼šèµ·å§‹ X å°ºå¯¸æ¯”ä¾‹ã€‚ android:fromYScaleï¼šèµ·å§‹ Y å°ºå¯¸æ¯”ä¾‹ã€‚ android:pivotXï¼šç¼©æ”¾èµ·ç‚¹ X è½´åæ ‡ã€‚ android:pivotYï¼šç¼©æ”¾èµ·ç‚¹ Y è½´åæ ‡ã€‚ android:toXScaleï¼šæœ€ç»ˆ X å°ºå¯¸æ¯”ä¾‹ã€‚ android:toYScaleï¼šæœ€ç»ˆ Y å°ºå¯¸æ¯”ä¾‹ã€‚ å†æ¥å†™ä¸ªé€€åœºåŠ¨ç”»ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;set xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:interpolator=&quot;@android:anim/decelerate_interpolator&quot; android:zAdjustment=&quot;top&quot;&gt; &lt;scale android:duration=&quot;@android:integer/config_mediumAnimTime&quot; android:fromXScale=&quot;1.0&quot; android:fromYScale=&quot;1.0&quot; android:pivotX=&quot;50%p&quot; android:pivotY=&quot;50%p&quot; android:toXScale=&quot;0.5&quot; android:toYScale=&quot;0.5&quot; /&gt; &lt;alpha android:duration=&quot;@android:integer/config_mediumAnimTime&quot; android:fromAlpha=&quot;1.0&quot; android:toAlpha=&quot;0&quot; /&gt; &lt;/set&gt; ç›¸æ¯”è¿›åœºåŠ¨ç”»ï¼Œè¿™é‡Œè¿˜å¢åŠ äº†ä¸€ä¸ª &lt;alpha&gt; æ ‡ç­¾ï¼Œç”¨äºæ”¹å˜é€æ˜åº¦ï¼Œå±æ€§ä½œç”¨å¦‚ä¸‹ï¼š android:fromAlphaï¼šåŠ¨ç”»å¼€å§‹çš„é€æ˜åº¦ã€‚ android:toAlphaï¼šåŠ¨ç”»ç»“æŸçš„é€æ˜åº¦ã€‚ è¿™ä¸¤ä¸ªå±æ€§çš„å–å€¼ä¸º 0.0 ~ 1.0ï¼Œ0.0 è¡¨ç¤ºå®Œå…¨é€æ˜ï¼Œ1.0 è¡¨ç¤ºä¿æŒåŸæœ‰çŠ¶æ€ä¸å˜ã€‚ æœ€å¤–å±‚çš„ &lt;set&gt; æ ‡ç­¾æˆ‘è¿˜å¢åŠ äº†ä¸€ä¸ªå±æ€§ï¼š android:zAdjustmentï¼šå…è®¸åœ¨åŠ¨ç”»æ’­æ”¾æœŸé—´ï¼Œè°ƒæ•´æ’­æ”¾å†…å®¹åœ¨ Z è½´æ–¹å‘çš„é¡ºåºã€‚ å–å€¼æœ‰ä¸‰ï¼š normalï¼ˆ0ï¼‰ï¼šæ­£åœ¨æ’­æ”¾çš„åŠ¨ç”»å†…å®¹ä¿æŒå½“å‰çš„ Z è½´é¡ºåºã€‚ topï¼ˆ1ï¼‰ï¼šåœ¨åŠ¨ç”»æ’­æ”¾æœŸé—´ï¼Œå¼ºåˆ¶æŠŠå½“å‰æ’­æ”¾çš„å†…å®¹æ”¾åˆ°å…¶ä»–å†…å®¹çš„ä¸Šé¢ã€‚ bottomï¼ˆ-1ï¼‰ï¼šåœ¨åŠ¨ç”»æ’­æ”¾æœŸé—´ï¼Œå¼ºåˆ¶æŠŠå½“å‰æ’­æ”¾çš„å†…å®¹æ”¾åˆ°å…¶ä»–å†…å®¹ä¹‹ä¸‹ã€‚ è°ƒç”¨ä¹Ÿæ˜¯ç›¸åŒï¼š overridePendingTransition(R.anim.anim_zoom_in, R.anim.anim_zoom_out); æ•ˆæœå¦‚ä¸‹ï¼š Android L çš„è¿‡æ¸¡æ•ˆæœ ä¸Šé¢çš„åˆ‡æ¢åŠ¨ç”»åŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³æ—¥å¸¸ä¸­å¯¹ Activity è·³è½¬çš„éœ€æ±‚äº†ï¼Œä½†æ˜¯æ€»ä½“æ¥è¯´è¿˜æ˜¯ç›¸å¯¹æ¯”è¾ƒå¹³æ·¡ï¼Œç¬¦åˆç”¨æˆ·ä¹ æƒ¯ï¼Œä½†ä¸æƒŠè‰³ã€‚ Android 5.0 ä¹‹åï¼ŒMaterial Design ä¸º Android æ³¨å…¥äº†æ›´åŠ ç‚«é…·çš„è¿‡æ¸¡ï¼Œé€šè¿‡å…¶å¯ä»¥å®ç°æ›´åŠ ä¼˜ç§€çš„åŠ¨ç”»æ•ˆæœã€‚ Explode é¦–å…ˆåœ¨ã€Œresã€ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ã€Œtransitionã€ï¼Œç„¶åå»ºä¸€ä¸ª Transition Resource Fileï¼Œå¦‚ã€Œexplode.xmlã€ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;explode xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:duration=&quot;1000&quot; /&gt; å¤ªç®€å•äº†å°±ä¸å¤šè§£é‡Šäº†ï¼Œæ¥ä¸‹æ¥åœ¨è¦å¯åŠ¨çš„ Activity ä¸­åŠ å…¥å¦‚ä¸‹ä»£ç ï¼š @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_explode); if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) { Transition explode = TransitionInflater.from(this).inflateTransition(R.transition.explode); getWindow().setEnterTransition(explode); } } ç”¨ Transition ç±»åˆå§‹åŒ–åŠ¨ç”»æ–‡ä»¶åè°ƒç”¨ Window çš„ setEnterTransition() æ–¹æ³•è®¾ç½®è¿›å»å³å¯ã€‚ å¯åŠ¨ Activity çš„æ–¹å¼ç¨å¾®æœ‰ç‚¹åŒºåˆ«ï¼Œå¦‚ä¸‹ï¼š if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP) { startActivity(intent, ActivityOptions.makeSceneTransitionAnimation(activityContext).toBundle()); } else { startActivity(intent); } startActivity() çš„ç¬¬äºŒå‚æ•°æ˜¯ç”¨ makeSceneTransitionAnimation() æ–¹æ³•åˆ›å»ºçš„ ActivityOptions è½¬æˆçš„ Bundle å¯¹è±¡ï¼Œä¸” makeSceneTransitionAnimation() æ–¹æ³•çš„å‚æ•°å¿…é¡»ä¸º Activityï¼Œä¸èƒ½æ˜¯å…¶ä»– Contextã€‚ å¦å¤–ï¼Œç”±äºè¯¥è¿‡æ¸¡åŠ¨ç”»æ˜¯ä» API 21 å¼•å…¥çš„ï¼Œæ‰€ä»¥å¦‚æœé¡¹ç›®çš„ minSdkVersion å°äº 21 çš„è¯è¦åŠ å…¥ä¸Šæ–¹çš„åˆ¤æ–­é€»è¾‘ã€‚ æ•ˆæœå¦‚ä¸‹ï¼š Slide ä½¿ç”¨æ–¹æ³•ç›¸ä¼¼ï¼Œå»ºä¸€ä¸ª Transition Resource Fileï¼Œå¦‚ã€Œslide.xmlã€ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;slide xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:duration=&quot;1000&quot; android:interpolator=&quot;@android:interpolator/decelerate_cubic&quot; android:slideEdge=&quot;end&quot;&gt; &lt;targets&gt; &lt;target android:excludeId=&quot;@android:id/statusBarBackground&quot; /&gt; &lt;/targets&gt; &lt;/slide&gt; è§£é‡Šä¸€ä¸‹å±æ€§ï¼š android:interpolatorï¼šå±æ€§è®¾ç½®æ’å€¼å™¨ï¼Œç”¨æ¥æ§åˆ¶æ»‘åŠ¨é€Ÿåº¦ã€‚ android:slideEdgeï¼šæ»‘åŠ¨æ–¹å‘ã€‚æœ‰ 4 ä¸ªå€¼ï¼š endï¼šæ ¹æ®åœ°åŒºä½¿ç”¨ä¹ æƒ¯ä¸åŒï¼Œä¸­å›½ä¸€èˆ¬åœ¨å³ä¾§ã€‚ startï¼šæ ¹æ®åœ°åŒºä½¿ç”¨ä¹ æƒ¯ä¸åŒï¼Œä¸­å›½ä¸€èˆ¬åœ¨å·¦ä¾§ã€‚ topï¼šé¡¶éƒ¨ã€‚ bottomï¼šåº•éƒ¨ã€‚ é»˜è®¤æƒ…å†µä¸‹é¡¶éƒ¨çš„çŠ¶æ€æ ä¹Ÿä¼šæ‰§è¡ŒåŠ¨ç”»ï¼Œå¯ä»¥ä½¿ç”¨ &lt;target&gt; æ ‡ç­¾å¿½ç•¥ï¼Œandroid:excludeId å±æ€§çš„å€¼å°±æ˜¯å¿½ç•¥çš„æ§ä»¶çš„ IDï¼Œå¦‚æœéœ€è¦å¿½ç•¥å¤šä¸ª Viewï¼Œåˆ™åœ¨ &lt;targets&gt; ç»„å†…ç»§ç»­æ·»åŠ å³å¯ã€‚ è°ƒç”¨æ–¹æ³•ä¹Ÿç›¸ä¼¼ï¼Œä¸è´´ä»£ç äº†ï¼Œç›´æ¥çœ‹æ•ˆæœï¼š Fade ä½¿ç”¨æ–¹æ³•ç›¸ä¼¼ï¼Œå»ºä¸€ä¸ª Transition Resource Fileï¼Œå¦‚ã€Œfade.xmlã€ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;fade xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:duration=&quot;1000&quot; /&gt; å±æ€§ä»…æŒ‡å®šäº†åŠ¨ç”»æŒç»­æ—¶é—´ï¼Œå³ç”¨ 1000 æ¯«ç§’çš„æ—¶é—´æŠŠ View ä»æ— åˆ°æœ‰ï¼Œé€æ˜åº¦ä» 0 åˆ° 1ã€‚ è°ƒç”¨æ–¹æ³•ä¹Ÿç›¸ä¼¼ï¼Œä¸è´´ä»£ç äº†ï¼Œç›´æ¥çœ‹æ•ˆæœï¼š Shared Element è¯¥æ•ˆæœä¸å‰ä¸‰ç§ä¸åŒï¼Œå¯ä»¥åœ¨åˆ‡æ¢çš„æ—¶å€™æŒ‡å®šå…ƒç´ è¿‡æ¸¡ï¼Œä½¿ç”¨è¿™ç§åˆ‡æ¢åŠ¨ç”»ï¼Œç”¨æˆ·å¯èƒ½æ„Ÿè§‰ä¸åˆ°å¼€å¯äº†ä¸€ä¸ªæ–°çš„ Activityï¼Œå¯ä»¥è¯´æ˜¯æˆ‘æœ€å–œæ¬¢çš„äº¤äº’æ–¹æ¡ˆäº†ï¼Œå…ˆæ¥çœ‹æ•ˆæœå§ï¼š å®ç°æ–¹æ³•ä¸å‰ä¸‰ç§ä¸åŒï¼Œä¸éœ€è¦åˆ›å»º Transition resource fileï¼Œåªéœ€ä¸ºä¸¤ä¸ª Activity éœ€è¦å…±äº«åŠ¨ç”»çš„å…ƒç´ æŒ‡å®šåŒä¸€ä¸ª android:transitionName å³å¯ã€‚ å¦‚æˆ‘ä¸ºåŸ Activity çš„å¤´åƒæŒ‡å®šä¸º profileï¼Œç™»å½•æŒ‰é’®æŒ‡å®šä¸º buttonï¼š &lt;ImageView android:id=&quot;@+id/profile&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:src=&quot;@mipmap/ic_launcher_round&quot; android:transitionName=&quot;profile&quot; /&gt; &lt;Button android:id=&quot;@+id/login_btn&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:text=&quot;LOGIN&quot; android:transitionName=&quot;button&quot; /&gt; é‚£ä¹ˆåœ¨éœ€è¦å¯åŠ¨çš„ Activity ä¸­é€‰æ‹©éœ€è¦å…±äº«çš„å…ƒç´ ï¼Œä¹ŸæŒ‡å®šä¸ºç›¸åŒçš„åç§°ï¼š &lt;ImageView android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;256dp&quot; android:scaleType=&quot;centerCrop&quot; android:transitionName=&quot;profile&quot; /&gt; &lt;android.support.design.widget.FloatingActionButton android:id=&quot;@+id/edit&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_gravity=&quot;bottom|end&quot; android:layout_margin=&quot;16dp&quot; android:src=&quot;@drawable/ic_edit&quot; android:transitionName=&quot;button&quot; /&gt; ç„¶ååœ¨åŸ Activity ä¸­ä½œå¦‚ä¸‹é…ç½®ï¼š ImageView profile = findViewById(R.id.profile);; Button loginBtn = findViewById(R.id.login_btn); loginBtn.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { Pair profilePair = new Pair&lt;&gt;(profile, ViewCompat.getTransitionName(profile)); Pair btnPair = new Pair&lt;&gt;(loginBtn, ViewCompat.getTransitionName(loginBtn)); ActivityOptionsCompat transitionActivityOptions = ActivityOptionsCompat.makeSceneTransitionAnimation(this, profilePair, btnPair); Intent intent = new Intent(MainActivity.this, SharedElementActivity.class); ActivityCompat.startActivity(this, intent, transitionActivityOptions.toBundle()); } }); å°†éœ€è¦å…±äº«çš„å…ƒç´ æ„å»ºæˆ Pair å¯¹è±¡ï¼Œä½¿ç”¨ ViewCompat.getTransitionName() æ–¹æ³•è·å–æˆ‘ä»¬åœ¨å¸ƒå±€æ–‡ä»¶ä¸­è®¾ç½®çš„ android:transitionName çš„å€¼ã€‚è¦æ³¨æ„ï¼Œå¿…é¡»å¯¼å…¥ android.support.v4.util.Pair è€Œä¸æ˜¯ android.util.Pairï¼Œå¦åˆ™ä¼šå‡ºç°é—®é¢˜ã€‚ é€šè¿‡ ActivityOptionsCompat.makeSceneTransitionAnimation() é™æ€æ–¹æ³•å¾—åˆ° ActivityOptionsCompat å¯¹è±¡ï¼Œè¯¥æ–¹æ³•çš„ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥ä¼ å…¥å¤šä¸ª Pair å¯¹è±¡ã€‚ æœ€åå†è°ƒç”¨ ActivityCompat.startActivity() å¯åŠ¨ Intent æŒ‡å®šçš„ Activityï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸Šé¢çš„æ•ˆæœã€‚ ","link":"https://LiarrDev.github.io/post/Transition-and-Animation-of-Android-Activity/"},{"title":"ä»å“ªé‡Œèƒ½æ‰¾åˆ° Android æºç ","content":"ä¸çŸ¥ä½ ä»¬æœ‰æ²¡æœ‰æ³¨æ„åˆ°ï¼Œæˆ‘æœ€è¿‘å‘å¸ƒçš„å…³äº Android çš„æ–‡ç« éƒ½å¼€å§‹æ¶‰åŠåˆ°åœ¨æºç é‡Œé¢æ‰¾é—®é¢˜äº†ï¼Œæ¯”å¦‚ä¸ä¹…å‰çš„ã€Toolbar NavigationIcon &amp; Title è¿·ä¹‹é—´è·ã€å’Œã€Android CountDownTimer å®ç°å€’è®¡æ—¶ã€ç­‰ã€‚ ç”±äº Android æ˜¯å¼€æºçš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¼€å‘è€…å¯ä»¥äº†è§£åˆ°å…¶ç³»ç»Ÿå†…éƒ¨çš„å®ç°åŸç†ï¼Œä»¥å¸®åŠ©æˆ‘ä»¬æ›´å¥½çš„è®¾è®¡é€»è¾‘ä»£ç ã€‚ Android æºç é›†æˆçš„é¡¹ç›®ç§°ä¸º Android Open Source Projectï¼Œæˆ‘ä»¬ä¸€èˆ¬ç®€ç§° AOSPã€‚é‚£ä¹ˆä»å“ªèƒ½æ‰¾åˆ° Android çš„æºç å‘¢ï¼Ÿ å…¶ä¸­æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯é€šè¿‡ã€Android Studioã€ä¸­çš„è·³è½¬ï¼ŒæŒ‰ä½ Ctrl é”®ï¼ˆWindowsï¼‰æˆ– Command é”®ï¼ˆmacOSï¼‰ç„¶åç§»åŠ¨é¼ æ ‡åˆ°ç›¸åº”çš„ç±»æˆ–æ–¹æ³•ä¸­ç‚¹å‡»å³å¯è·³è½¬ã€‚ è¿™ç§æ–¹å¼æ¯”è¾ƒé€‚åˆç”¨æ¥æŸ¥çœ‹å±æ€§ç±»å‹çš„æºç æ–‡ä»¶ï¼Œæ¯”å¦‚åœ¨ã€Toolbar NavigationIcon &amp; Title è¿·ä¹‹é—´è·ã€ä¸€æ–‡ä¸­çš„ã€Œvalues.xmlã€æ–‡ä»¶ã€‚ è€Œé€»è¾‘å®ç°çš„æ–‡ä»¶é€šå¸¸ä¸ä¼šä½¿ç”¨è¿™ç§æ–¹å¼æ‰“å¼€ï¼Œå› ä¸ºé€šè¿‡è¿™ç§æ–¹æ³•æ‰“å¼€çš„æ˜¯ã€Œ.classã€æ–‡ä»¶ï¼Œå³é€šè¿‡å­—èŠ‚ç æ–‡ä»¶åç¼–è¯‘å‡ºæ¥çš„ä»£ç ï¼Œä¼šæœ‰ä¸€äº›é€»è¾‘çš„ç¼ºå¤±ï¼Œä½ éœ€è¦ç‚¹å‡»ã€Android Studioã€ä¸Šæ–¹çš„ã€ŒDownload Sourcesã€æ¥ä¸‹è½½å®Œæ•´çš„æºç ã€‚ ç”±äº Android é¡¹ç›®çš„åºå¤§ï¼Œæ‰€ä»¥å¾ˆå¤šæ—¶å€™æˆ‘ä¹Ÿä¼šä½¿ç”¨ä¸€äº›åœ¨çº¿çš„ç½‘ç«™æ¥æŸ¥çœ‹ã€é˜…è¯»ä¸ä¸‹è½½ï¼Œä»Šå¤©å°±æ¥æ¨èå‡ ä¸ªæˆ‘å¸¸ç”¨çš„æŸ¥çœ‹ Android æºç çš„ç½‘ç«™ã€‚ Android Open Source Project å®˜ç½‘ï¼šhttps://source.android.com ä¸­æ–‡å®˜ç½‘ï¼šhttps://source.android.google.cn æœ€å®˜æ–¹çš„é€”å¾„æ€»æ˜¯æœ€æƒå¨ï¼Œå› æ­¤æˆ‘æ¯”è¾ƒå»ºè®®åœ¨ Android Source ä¸­è·å–æºç ä»¥åŠæ–‡æ¡£ï¼Œä¸” Google è¿˜ç‰¹æ„ä¸ºä¸­å›½å¼€å‘è€…æ­å»ºäº†ä¸€ä¸ªä¸­æ–‡ç«™ç‚¹ï¼Œç…§é¡¾å¢™å¤–çš„äººã€‚ AOSP Mirror Â· Github åœ°å€ï¼šhttps://github.com/aosp-mirror ä» AOSP å®˜ç½‘ä¸­æä¾›çš„ä¿¡æ¯æˆ‘ä»¬å¯ä»¥çŸ¥é“ï¼ŒAndroid çš„æºç å­˜å‚¨åœ¨ Google çš„ Gerrit æœåŠ¡å™¨ä¸Šï¼Œå¦‚æœä½ æ‡’å¾—é…ç½®ï¼Œå¯ä»¥åœ¨ã€Githubã€ä¸Šå¯»æ‰¾å¯¹åº”çš„é•œåƒ Repoã€‚ Android OS åœ¨çº¿æºä»£ç  åœ°å€ï¼šhttps://www.androidos.net.cn/sourcecode ç”±äº Github å’Œ Google çš„ä¸ç¨³å®šæ€§ï¼Œæœ‰æ—¶å€™ä»å›½å†…çš„ç«™ç‚¹è·å– Android æºç åè€Œæ›´æ–¹ä¾¿ï¼Œã€Androidç¤¾åŒºã€æä¾›äº† Android ç³»ç»Ÿæ‰€æœ‰ç‰ˆæœ¬æºç çš„æŸ¥çœ‹ä¸ä¸‹è½½ï¼Œååˆ†æ–¹ä¾¿ã€‚ AndroidXRef åœ°å€ï¼šhttp://androidxref.com ã€AndroidXRefã€åœ¨å›½å†…çš„è®¿é—®é€Ÿåº¦ä¹Ÿæ˜¯æŒºå¿«çš„ï¼Œåªä¸è¿‡ç½‘ç«™æ•´ä½“æ¯”è¾ƒç®€é™‹ï¼Œä¸”å°±ç›®å‰æ¥çœ‹ï¼Œæ›´æ–°ä¸åŠæ—¶ï¼Œä¸çŸ¥æ˜¯ç»´æŠ¤è€…å¼ƒäº†è¿˜æ˜¯å•çº¯çš„ä½›ç³»æ›´æ–°ï¼Œä½†å…¶æœç´¢åŠŸèƒ½è¿˜æ˜¯æŒºä¸é”™çš„ã€‚ Opersys AOSP Portal åœ°å€ï¼šhttp://aosp.opersys.com ã€Opersys AOSP Portalã€æä¾›äº†ç±»ä¼¼ã€AndroidXRefã€çš„äº¤å‰ç´¢å¼•åŠŸèƒ½ï¼Œä¸”æ›´æ–°æ¯”è¾ƒåŠæ—¶ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹æ›´æ–°æ—¥å¿—ï¼Œæ˜¯ã€AndroidXRefã€çš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£å“ã€‚ Android Code Search åœ°å€ï¼šhttps://cs.android.com Android å®˜æ–¹æ¨å‡ºçš„å¼€æºä»£ç æœç´¢å·¥å…·ï¼Œé™¤äº†æœç´¢ AOSP çš„ä»£ç ä¹‹å¤–ï¼Œå®ƒåŒæ—¶æä¾›äº† CameraXã€Jetpack Compose ç­‰ AndroidX åº“çš„æºç æœç´¢ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä½†ç›®å‰å¢™å¤–æ— æ³•è®¿é—®ï¼Œç›¸ä¿¡ä»¥åä¼šé€æ­¥å¼€æ”¾ã€‚ Git repositories on Android åœ°å€ï¼šhttps://android.googlesource.com Android çš„ Git ä»“åº“ï¼ŒåŒ…å«äº†ä¸€äº›åº“çš„æ–‡æ¡£å’Œä»£ç ï¼Œä½†ç”±äºæ— æ£€ç´¢èƒ½åŠ›ï¼Œä»…é€‚åˆé˜…è¯»ã€‚ æ¸…åå¤§å­¦å¼€æºè½¯ä»¶é•œåƒç«™ åœ°å€ï¼šhttps://mirrors.tuna.tsinghua.edu.cn/help/AOSP/ æ¸…åå¤§å­¦ä¸ºæˆ‘ä»¬æä¾›çš„å¼€æºè½¯ä»¶é•œåƒï¼Œæ›´æ–°é€Ÿåº¦æ¯”è¾ƒå¿«ï¼Œä»…æ”¯æŒä¸‹è½½ï¼Œæ“ä½œè·Ÿå®˜æ–¹ç±»ä¼¼ã€‚ å…¶å®ï¼Œåœ¨çº¿æŸ¥çœ‹ Android æºç çš„ç½‘ç«™è¿œè¿œä¸æ­¢è¿™äº›ï¼Œå‡ ä¹æ¯éš”ä¸€æ®µæ—¶é—´éƒ½æœ‰ä¸€æ‰¹ç±»ä¼¼çš„ç½‘ç«™è¯ç”Ÿï¼Œä¹Ÿæœ‰ä¸€æ‰¹ç±»ä¼¼çš„ç½‘ç«™æ­»å»ï¼Œå› æ­¤å®˜æ–¹çš„é€”å¾„æ€»æ˜¯ç›¸å¯¹ç¨³å®šï¼Œå¦‚æœæ¡ä»¶å…è®¸ï¼Œå»ºè®®è¿˜æ˜¯å®˜æ–¹ç½‘ç«™æ¥è·å–ã€‚ ","link":"https://LiarrDev.github.io/post/Where-to-Find-Android-Source-Code/"},{"title":"ä¸º EMUI 10 åˆ¶ä½œå­—ä½“åŒ…","content":"ä» MIUI åˆ‡æ¢åˆ° EMUI åï¼Œå…¶å®ç”¨èµ·æ¥æ„Ÿè§‰å¹¶æ²¡æœ‰ç‰¹åˆ«é¡ºæ‰‹ï¼Œä¸è¿‡ä¹Ÿç½¢ï¼Œæ¯•ç«Ÿä¸‡ç‰©åŸºäº MIUIï¼Œé€  ROM å‘å®¶çš„å°ç±³è¿™çœ‹å®¶æœ¬äº‹ä¹Ÿä¸æ˜¯ç›–çš„ã€‚ å³ä¾¿å¦‚æ­¤ï¼Œææœºè¿™ä¹ˆå¤šå¹´ï¼ŒèŠ±ç‚¹å„¿æ—¶é—´æˆ‘è¿˜æ˜¯èƒ½å®šåˆ¶å‡ºä¸€å¥—é€‚åˆè‡ªå·±çš„è½¯ä»¶ç³»ç»Ÿçš„ã€‚ ä»Šå¤©æ¥å” å” å¦‚ä½•æ›´æ¢ EMUI çš„å­—ä½“ã€‚ è¿™å‡ å¹´ç”¨å°ç±³çš„æœ‹å‹åº”è¯¥çŸ¥é“ï¼ŒMIUI å†…ç½®äº†ä¸€å¥—å°ç±³å…°äº­å­—ä½“ï¼Œè¯´å®è¯ï¼Œå°½ç®¡è¿˜æœ‰ä¸€ç‚¹å„¿ç‘•ç–µï¼Œä½†æˆ‘è¿˜æ˜¯éå¸¸å–œæ¬¢ã€‚ä¸­æ–‡å­—ä½“å…¶å®æˆ‘å€’æ˜¯æ²¡æœ‰ç‰¹åˆ«æ„Ÿå†’ï¼Œå€’æ˜¯è‹±æ–‡å­—ä½“çš„åœ†æ¶¦æ„Ÿï¼Œè®©æˆ‘çœ‹èµ·æ¥ååˆ†èˆ’æœã€‚ ä½†æ˜¯çœ‹çœ‹ EMUI ç³»ç»Ÿé¢„ç½®çš„å­—ä½“ï¼Œä¸‰ä¸ªé¢„ç½®çš„å­—ä½“å…¶å®éƒ½å¹¶ä¸æ€ä¹ˆæ ·ï¼Œè€Œä¸»é¢˜å•†åº—é‡Œçš„å…è´¹å­—ä½“ä¹Ÿå°‘å¾—å¯æ€œï¼Œä»˜è´¹å­—ä½“ä¹Ÿå¤§éƒ½èŠ±é‡Œèƒ¡å“¨ã€‚ é‚£æˆ‘ä½•ä¸ä¸Šä¼ ä¸€å¥—è‡ªå·±å–œæ¬¢çš„å­—ä½“å‘¢ï¼Ÿ ç”±äºå›½å†… ROM è¶Šæ¥è¶Šå¼ºå¤§ï¼Œä» Android 5.0 å¼€å§‹æˆ‘ä¹Ÿä¸æ€ä¹ˆæŠ˜è…¾ç³»ç»Ÿä¸»é¢˜ç¾åŒ–äº†ï¼Œåœ¨æ‰‹æœºé‡Œæ‰¾äº†ä¸€ä¸‹ï¼Œç«Ÿæ²¡å‘ç°å¯ä»¥ä¸Šä¼ å­—ä½“çš„åœ°æ–¹ï¼Œä¸çŸ¥æ˜¯ EMUI çš„é—®é¢˜è¿˜æ˜¯æ‰€æœ‰ ROM éƒ½è¿™æ ·ï¼Œæ˜¯æˆ‘å¤ªè½åäº†ã€‚ æ—¢ç„¶æ‰‹æœºä¸èƒ½ç›´æ¥æï¼Œé‚£å°±æ€¼ä¸Šç”µè„‘å¼€å¹²å§ã€‚ çœ‹çœ‹ç³»ç»Ÿçš„ç›®å½•ï¼Œæ‰¾æ‰¾ä¸»é¢˜ç›¸å…³çš„æ–‡ä»¶å¤¹ï¼Œä¸éš¾å®šä½åˆ° æœ¬åœ°/å†…éƒ¨å­˜å‚¨/Huawei/Themesï¼Œä½†æ˜¯é‡Œé¢åªæœ‰ä¸»é¢˜ç¼“å­˜æ–‡ä»¶å¤¹ï¼Œå¹¶æ²¡æœ‰å…¶ä»–å†…å®¹ã€‚ å¥‡æ€ªäº†ï¼Œæœä¸€ä¸‹å­—ä½“æ–‡ä»¶çš„æ‰©å±•åã€Œ.ttfã€ï¼Œå¯ä»¥å‘ç°åœ¨ä¸»é¢˜çš„ç¼“å­˜æ–‡ä»¶å¤¹ä¸­æœ‰ç›¸å…³çš„æ–‡ä»¶ã€‚ çœ‹æ¥æ˜¯ä¸èƒ½ç›´æ¥ä¸¢ä¸€ä¸ªå­—ä½“æ–‡ä»¶è¿›æ¥å°±å®Œäº‹çš„ï¼Œè¦æŠŠå­—ä½“å°è£…ä¸»é¢˜æ‰è¡Œã€‚ ç”±äºæˆ‘å¯¹ä¸­æ–‡å­—ä½“æ²¡æœ‰å¤ªé«˜è¦æ±‚ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥åªé€‰ç”¨ä¸€æ¬¾åªæœ‰è‹±æ–‡çš„å­—ä½“ï¼Œè¿™æ ·è¿˜å¯ä»¥è¾¾åˆ°å‡å°ä½“ç§¯çš„ç›®çš„ã€‚æ­£å¥½ï¼ŒGoogle åœ¨å‡ å¹´å‰å‘å¸ƒçš„ä¸€æ¬¾å­—ä½“ Google Sans ä¹Ÿå¾ˆç¬¦åˆæˆ‘çš„èƒƒå£ï¼Œä¸è¿‡æ²¡æœ‰é€‚é…ä¸­æ–‡ã€‚ é¦–å…ˆå‚è€ƒä¸»é¢˜æ–‡ä»¶å¤¹ï¼Œæˆ‘ä»¬å¯ä»¥å»ºç«‹è¿™æ ·çš„æ–‡ä»¶å¤¹ç›®å½•ï¼š |-- GoogleSans.hwt |-- fonts | |-- DroidSansChinese.ttf | |-- pic_font_default.jpg |-- preview | |-- preview_fonts_0_50.png |-- description.xml |-- icons è§£é‡Šä¸€ä¸‹ï¼ŒHWT æ˜¯ EMUI ä¸»é¢˜æ–‡ä»¶ï¼Œå¿…é¡»è¦ä½¿ç”¨è¿™æ ·çš„æ‰©å±•åæ‰å¯ä»¥è¢«ç³»ç»Ÿè¯†åˆ«ï¼›ã€Œfontsã€æ˜¯å­—ä½“æ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€ä¸ª TTF å­—ä½“æ–‡ä»¶ï¼Œè¿˜æœ‰ä¸€å¼ å­—ä½“å°é¢å›¾ï¼›ã€Œpreviewã€æ˜¯é¢„è§ˆæ–‡ä»¶å¤¹ï¼Œé‡Œé¢æœ‰ä¸€å¼ å­—ä½“é¢„è§ˆå›¾ï¼›ã€Œdescription.xmlã€æ˜¯å…³äºè¿™æ¬¾ä¸»é¢˜çš„ä¸€äº›æè¿°ä¿¡æ¯ï¼›ã€Œiconsã€æ˜¯ä¸€ä¸ªæ— æ‰©å±•åå‹ç¼©æ–‡ä»¶ï¼Œç”¨äºè§„å®šæ¡Œé¢è½¯ä»¶å›¾æ ‡ã€‚ ä»¥ä¸Šå°±æ˜¯ç»™ EMUI æ·»åŠ ä¸€æ¬¾å­—ä½“çš„æœ€å°ç»„æˆï¼Œå®ƒå»é™¤äº†å®Œæ•´ä¸»é¢˜æ–‡ä»¶ä¸­å…¶ä»–æ— å…³çš„æ–‡ä»¶ï¼Œå¦‚å£çº¸æˆ–é”å±ç­‰ã€‚ ä¸‹é¢ï¼Œå°±æ•™å¤§å®¶å¦‚ä½•ä¸€æ­¥ä¸€æ­¥å®Œæˆè¿™ä¸ªå­—ä½“ä¸»é¢˜åŒ…ã€‚ é¦–å…ˆæ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¯ä»¥ä½¿ç”¨ä»»ä½•ä½ å–œæ¬¢çš„åå­—å‘½åï¼Œä¸ºäº†æ˜“äºè¯†åˆ«ï¼Œæˆ‘ä½¿ç”¨è¯¥å­—ä½“åå­—å‘½åï¼Œå³ã€ŒGoogleSansã€ã€‚ ç„¶åæŒ‰ç…§ä¸Šé¢çš„ç›®å½•ç»“æ„ï¼Œå»ºç«‹å¥½æ–‡ä»¶å¤¹ã€Œfontsã€å’Œã€Œpreviewã€ï¼Œä»¥åŠæ–‡æœ¬æ–‡ä»¶ã€Œdescription.xmlã€ï¼Œè‡³äºã€Œiconsã€ï¼Œå¦‚æœä½ æ²¡æœ‰ç‰¹åˆ«çš„éœ€è¦ï¼Œä»å…¶ä»–ä¸»é¢˜æ–‡ä»¶å¤¹å¤åˆ¶è¿‡æ¥å³å¯ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨ä¿®æ”¹å­—ä½“çš„æ—¶å€™å…¶å®ç”¨ä¸ä¸Šï¼Œä½†æ˜¯ç¼ºå°‘è¯¥æ–‡ä»¶çš„è¯ä¸»é¢˜ä¹Ÿæ˜¯æ— æ³•æ­£å¸¸ä½¿ç”¨çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä»å…¶ä»–ä¸»é¢˜æ–‡ä»¶ä¸­å¤åˆ¶è¿‡æ¥å ä½ã€‚ æ¥ç€ï¼Œå°±æ˜¯æŠŠä½ å–œæ¬¢çš„å­—ä½“æ–‡ä»¶å‘½åä¸ºã€ŒDroidSansChinese.ttfã€ï¼Œå¹¶æ”¾ç½®åœ¨ã€Œfontsã€æ–‡ä»¶å¤¹å†…ï¼Œè¿˜è¦åšä¸€å¼ å°é¢å›¾ï¼Œæˆ‘è¿™é‡Œå°±ç§‰æ‰¿ç®€å•çš„ç†å¿µï¼Œéšä¾¿åšäº†ä¸€å¼ ï¼š è¿˜æœ‰ä¸€å¼ å­—ä½“é¢„è§ˆå›¾ï¼ŒåŒæ ·æŒ‰ç…§è§„èŒƒå‘½åï¼Œæ”¾ç½®åœ¨ã€Œpreviewã€æ–‡ä»¶å¤¹ä¸‹ï¼Œè¿™å¼ å›¾ä¸»è¦ç”¨äºé¢„è§ˆå­—ä½“æ•ˆæœçš„ï¼Œæˆ‘è´ªå›¾æ–¹ä¾¿ï¼Œç”¨æ‰‹æœºçš„ã€Notepadã€æ¥åšï¼š æœ€åå°±æ˜¯ä¸»é¢˜çš„æè¿°æ–‡ä»¶ï¼Œå‚è€ƒä¸‹é¢çš„ä¿®æ”¹å³å¯ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt; &lt;HwTheme&gt; &lt;title&gt;GoogleSans&lt;/title&gt; &lt;!-- ä¸»é¢˜è‹±æ–‡åå­— --&gt; &lt;title-cn&gt;GoogleSans&lt;/title-cn&gt; &lt;!-- ä¸»é¢˜ä¸­æ–‡åå­— --&gt; &lt;author&gt;Liarr&lt;/author&gt; &lt;!-- ä¸»é¢˜åˆ¶ä½œè€…åå­— --&gt; &lt;designer&gt;Google&lt;/designer&gt; &lt;!-- ä¸»é¢˜è®¾è®¡è€…åå­— --&gt; &lt;screen&gt;FHD+&lt;/screen&gt; &lt;!-- ä¸»é¢˜åˆ†è¾¨ç‡ --&gt; &lt;version&gt;1.0.0&lt;/version&gt; &lt;!-- ä¸»é¢˜ç‰ˆæœ¬å· --&gt; &lt;font&gt;GoogleSans&lt;/font&gt; &lt;!-- å­—ä½“è‹±æ–‡åç§° --&gt; &lt;font-cn&gt;GoogleSans&lt;/font-cn&gt; &lt;!-- å­—ä½“ä¸­æ–‡åç§° --&gt; &lt;transition&gt;None&lt;/transition&gt; &lt;type&gt;font&lt;/type&gt; &lt;/HwTheme&gt; è¿™æ ·ï¼Œå°±å®Œæˆäº†ä¸Šé¢ç›®å½•ç»“æ„ä¸­æ‰€éœ€çš„æ‰€æœ‰æ–‡ä»¶äº†ï¼Œå°†è¿™ä¸ªä¸»é¢˜æ–‡ä»¶å¤¹æ‰“åŒ…ä¸ºã€ŒGoogleSans.zipã€å‹ç¼©æ–‡ä»¶ï¼Œç„¶åä¿®æ”¹æ–‡ä»¶æ‰©å±•åï¼Œå¾—åˆ°ã€ŒGoogleSans.hwtã€ï¼Œå¤§åŠŸå‘Šæˆã€‚ å°†è¿™ä¸ªä¸»é¢˜å‹ç¼©åŒ…æ”¾ç½®åœ¨ æœ¬åœ°/å†…éƒ¨å­˜å‚¨/Huawei/Themes ç›®å½•ä¸‹ï¼Œæ‰“å¼€æ‰‹æœºçš„ä¸»é¢˜å•†åº—ï¼Œå°±å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšåˆšçš„å­—ä½“å·²ç»å¯¼å…¥æˆåŠŸã€‚ å°é¢å’Œé¢„è§ˆå›¾éƒ½åœ¨ç›¸åº”çš„åœ°æ–¹å±•ç¤ºå¥½ï¼Œåªè¦ç‚¹å‡»åº”ç”¨å°±å¯ä»¥åœ¨æ‰‹æœºç³»ç»Ÿä¸­å…¨å±€ä½¿ç”¨è¿™å¥—å­—ä½“äº†ã€‚ å‚è€ƒå†…å®¹ï¼š [å­—ä½“åˆ†äº«] å°ç±³å…°äº­PRO ä¼˜åŒ–é€‚é… - åä¸ºP30ç³»åˆ—åº”ç”¨èµ„æº èŠ±ç²‰ä¿±ä¹éƒ¨ åä¸ºEMUIç³»ç»Ÿhwtä¸»é¢˜æ–‡ä»¶ä¿®æ”¹åŠåˆ¶ä½œè¶…è¯¦ç»†æ•™ç¨‹ - è£è€€10åˆ†äº«äº¤æµ èŠ±ç²‰ä¿±ä¹éƒ¨ åä¸ºEMUIç³»ç»Ÿhwtä¸»é¢˜æ–‡ä»¶ä¿®æ”¹åŠåˆ¶ä½œè¶…è¯¦ç»†æ–°æ‰‹æ•™å­¦ - è£è€€10åˆ†äº«äº¤æµ èŠ±ç²‰ä¿±ä¹éƒ¨ ","link":"https://LiarrDev.github.io/post/Pack-a-Font-for-EMUI-10/"},{"title":"@å”¯å¤œ çš„ã€WaveViewã€æ§ä»¶","content":"æ”¶åˆ°ç¾å·¥çš„éœ€æ±‚ï¼Œæƒ³è¦åœ¨ä¸»é¡µèƒŒæ™¯ä¸­åŠ å…¥æ°´çš„å…ƒç´ ã€‚ æ°´å…¶å®ä¸ç®—ä¸€ä¸ªå¾ˆå¥½è¡¨è¾¾çš„äº‹ç‰©ï¼Œå› ä¸ºé™æ€çš„æ°´æ¯”è¾ƒéš¾å‘ˆç°ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰“ç®—ä½¿ç”¨æ³¢çº¹æ¥è¡¨ç¤ºæµåŠ¨çš„æ°´ã€‚ æœ¬ç€ä¸è‡ªå·±é€ è½®å­ï¼ˆå®é™…ä¸Šæ˜¯è‡ªå·±å¯¹ Canvas çš„ç†è§£è¿˜ä¸å¤Ÿé€å½»ï¼‰ä»¥åŠæ•æ·å¼€å‘çš„åŸåˆ™ï¼Œä¸Šã€GitHubã€è–…ä¸€ä¸ªå§ã€‚ ã€GitHubã€ä¸Šè¿™ç±»å‹çš„å¼€æºæ§ä»¶å¹¶ä¸å°‘ï¼Œä¸€èˆ¬éƒ½å« WaveViewï¼Œåå­—å¾ˆè´´åˆ‡ï¼Œå¯¹æ¯”äº†å‡ ä¸ªï¼Œè¿˜æ˜¯å†³å®šé€‰ä¸€ä¸ªæ¯”è¾ƒç®€å•çš„ â€”â€” ç”±å›½å†…å¼€å‘è€… @å”¯å¤œï¼ˆGithub ID: @onlynightï¼‰å¼€å‘çš„ WaveView æ§ä»¶ã€‚ å…ˆæ¥çœ‹çœ‹ä»–æä¾›çš„ Demo æ•ˆæœï¼š é¦–å…ˆåœ¨ Project çš„ã€Œbuild.gradleã€ä¸­æ·»åŠ è¿œç¨‹ä»“åº“ï¼š allprojects { repositories { ... maven { url 'https://jitpack.io' } } } ç„¶ååœ¨ Module çš„ã€Œbuild.gradleã€ä¸­æ·»åŠ ä¾èµ–ï¼š dependencies { ... implementation 'com.github.onlynight:WaveView:(insert latest version)' } è¿™æ ·å°±å°† WaveView å¼•å…¥åˆ°é¡¹ç›®ä¸­äº†ï¼Œæ¥ä¸‹æ¥åœ¨å¸ƒå±€æ–‡ä»¶ä¸­æ·»åŠ æ­¤æ§ä»¶ï¼š &lt;com.github.onlynight.waveview.WaveView android:id=&quot;@+id/wave_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;240dp&quot; app:isCircle=&quot;false&quot; app:period=&quot;1&quot; app:waveHeightPercent=&quot;0.9&quot; app:waveRange=&quot;15dp&quot; app:waveSpeed=&quot;4&quot; app:wave1Color=&quot;@color/waveBackColor&quot; app:wave2Color=&quot;@color/waveFrontColor&quot; app:layout_constraintBottom_toBottomOf=&quot;parent&quot; /&gt; è¯´ä¸€ä¸‹å…¶ä¸“æœ‰å±æ€§ï¼š &lt;declare-styleable name=&quot;WaveView&quot;&gt; &lt;!-- define wave speed, example value 10 --&gt; &lt;!-- å®šä¹‰æ³¢é€Ÿï¼Œç±»å‹ä¸º Float --&gt; &lt;attr name=&quot;waveSpeed&quot; format=&quot;float&quot; /&gt; &lt;!-- define wave range, example value 15dp --&gt; &lt;!-- å®šä¹‰æ³¢åŠ¨èŒƒå›´ï¼Œç±»å‹ä¸º Dimension --&gt; &lt;attr name=&quot;waveRange&quot; format=&quot;dimension|reference&quot; /&gt; &lt;!-- define wave 1 color --&gt; &lt;!-- å®šä¹‰èƒŒæ™¯æ³¢çº¹é¢œè‰²ï¼Œç±»å‹æ˜¯ Color --&gt; &lt;attr name=&quot;wave1Color&quot; format=&quot;color|reference&quot; /&gt; &lt;!-- define wave 2 color --&gt; &lt;!-- å®šä¹‰å‰æ™¯æ³¢çº¹é¢œè‰²ï¼Œç±»å‹æ˜¯ Color --&gt; &lt;attr name=&quot;wave2Color&quot; format=&quot;color|reference&quot; /&gt; &lt;!-- define wave height percent, the value is between 0 to 1 --&gt; &lt;!-- å®šä¹‰æ³¢é«˜ç™¾åˆ†æ¯”ï¼Œç±»å‹æ˜¯ Floatï¼Œå–å€¼èŒƒå›´ä¸º 0ï½1 --&gt; &lt;attr name=&quot;waveHeightPercent&quot; format=&quot;float&quot; /&gt; &lt;!-- define paint stroke width, if you want optimizing view, you should change the stroke width more --&gt; &lt;!-- å®šä¹‰ç»˜ç”»ç¬”åˆ’å®½åº¦ï¼Œå¦‚æœè¦ä¼˜åŒ–è§†å›¾ï¼Œåˆ™åº”æ›´æ”¹ç”»ç¬”å®½åº¦ï¼Œç±»å‹ä¸º Dimension --&gt; &lt;attr name=&quot;waveStrokeWidth&quot; format=&quot;dimension|reference&quot; /&gt; &lt;!-- if the view is circle --&gt; &lt;!-- è§†å›¾æ˜¯å¦ä¸ºåœ†å½¢ --&gt; &lt;attr name=&quot;isCircle&quot; format=&quot;boolean&quot; /&gt; &lt;!-- the sine wave period, value range 0 to all --&gt; &lt;!-- æ­£å¼¦æ³¢å‘¨æœŸï¼Œç±»å‹æ˜¯ Floatï¼Œå–å€¼èŒƒå›´ä¸º 0ï½âˆ --&gt; &lt;attr name=&quot;period&quot; format=&quot;float&quot; /&gt; &lt;/declare-styleable&gt; å¯ä»¥çœ‹åˆ°æˆ‘ä¸Šæ–¹çš„ä»£ç åªé€‰å–äº†å…¶ä¸­ä¸€éƒ¨åˆ†å±æ€§è¿›è¡Œè®¾ç½®ã€‚ æœ€åæˆ‘ä»¬è¿˜éœ€åœ¨ Activity ä¸­å¯åŠ¨åŠ¨ç”»ï¼š WaveView waveView = (WaveView) findViewById(R.id.wave_view); // When you want start wave you should call this method. waveView.start(); // When you want stop wave you should call this method. waveView.stop(); å°½ç®¡å¾ˆå¤šæ—¶å€™æˆ‘ä»¬å¹¶æ²¡æœ‰å¿…è¦åœæ­¢æ³¢çº¹åŠ¨ç”»ä½†å®ƒè¿˜æ˜¯æä¾›äº†ç›¸åº”çš„æ–¹æ³•ã€‚ æœ€åæ¥çœ‹çœ‹æˆ‘åšçš„æ•ˆæœå›¾ï¼š ä¸éš¾çœ‹å‡ºæ§ä»¶çš„ç»˜åˆ¶å¹¶ä¸è¿™ä¹ˆå¹³æ»‘ï¼Œæˆ‘çŒœæƒ³åº”è¯¥ä½¿ç”¨çš„æ˜¯çŸ©å½¢ç»˜åˆ¶ï¼Œäºæ˜¯æˆªäº†ä¸ªå›¾æ”¾å¤§ä¸€çœ‹ï¼Œæœç„¶å¦‚æ­¤ã€‚ å…¶å®æ•°å­¦å‡ ä½•å’Œç´ æå‡ ä½•ä¸­ä¹Ÿç»å¸¸ä½¿ç”¨æ­¤æ–¹æ³•è¿›è¡Œç»˜åˆ¶ã€‚ æ¯”å¦‚å¾®ç§¯åˆ†ä¸­ï¼Œä½¿ç”¨å®¹æ˜“è®¡ç®—çš„çŸ©å½¢é¢ç§¯æ¥ä»£æ›¿ä¸è§„åˆ™å›¾å½¢çš„é¢ç§¯ï¼Œè€Œå½“çŸ©å½¢çš„å®½è¶³å¤Ÿå°å¹¶è¶‹è¿‘äºé›¶çš„æ—¶å€™ï¼ŒçŸ©å½¢ä»£æ›¿çš„é¢ç§¯ä¹Ÿå°±è¶Šè¶‹è¿‘äºä¸è§„åˆ™å›¾å½¢çš„é¢ç§¯äº†ã€‚ åœ¨ç«‹ä½“å‡ ä½•ç´ æä¸­æˆ‘ä»¬éƒ½ä¸ä¼šä½¿ç”¨åœ†è§„ä½œåœ†ï¼Œè€Œæ˜¯é€šè¿‡åˆ‡åœ†æ³•ï¼Œå³å…ˆç”»å‡ºä¸€ä¸ªçŸ©å½¢ï¼Œå†é€šè¿‡å–åŠå¾„ä¸­ç‚¹åˆ‡åœ†çš„æ–¹æ³•é€æ¸æŠŠåœ†åˆ‡å‡ºæ¥ï¼Œå½“åˆ‡çš„æ¬¡æ•°è¶Šå¤šï¼Œè¯¥å¤šè¾¹å½¢ä¹Ÿå°±è¶Šæ¥è¿‘äºåœ†ã€‚ å¯ä»¥ä» WaveView çš„æºç ä¸­çœ‹ä¸€ä¸‹å…¶å®ç°çš„åŸç†ã€‚ æˆ‘ä»¬è§†è§‰ä¸Šçœ‹åˆ°çš„æ˜¯æ°´æ³¢çº¹ï¼Œå®é™…ä¸Šåªæ˜¯ä¸€ä¸ªæ­£å¼¦æ³¢å’Œä½™å¼¦æ³¢å‘å·¦ä½ç§»ï¼Œç„¶åå°†ä¸‰è§’å‡½æ•°çš„å‘¨æœŸåŠ é•¿ï¼Œåœ¨ä¸€ä¸ª View ä¸­ä¸æ˜¾ç¤ºæ•´ä¸ªä¸‰è§’å‡½æ•°çš„æ³¢å½¢ï¼Œè¿™æ ·ä»è§†è§‰ä¸Šæ¥è¯´å°±å®ç°äº†æ°´æ³¢çº¹æ•ˆæœã€‚ æ ¹æ®ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬çŸ¥é“éœ€è¦è®¡ç®—ä¸€ä¸ªæ­£å¼¦æ³¢å’Œä¸€ä¸ªä½™å¼¦æ³¢ï¼Œå¹¶ä¸”æ ¹æ®æ—¶é—´çš„æ¨ç§»å°†æ­£å¼¦æ³¢æˆ–è€…ä½™å¼¦æ³¢å‘å·¦æˆ–è€…å‘å³å¹³ç§»ï¼Œæœ€åæ¯æ¬¡è®¡ç®—å®Œæ³¢å½¢å›¾çš„æ—¶å€™ç»˜åˆ¶ä¸‹æ¥å°±å®Œæˆäº†ã€‚ æ¥çœ‹ä¸‹ WaveView ä¸­çš„å…³é”®ä»£ç ï¼š private void drawWave(Canvas canvas, int width, int height) { setPaint(); double lineX = 0; double lineY1 = 0; double lineY2 = 0; for (int i = 0; i &lt; width; i += mStrokeWidth) { lineX = i; if (mIsRunning) { lineY1 = mWaveRange * Math.sin((mAngle + i) * Math.PI / 180 / mPeriod) + height * (1 - mWaveHeightPercent); lineY2 = mWaveRange * Math.cos((mAngle + i) * Math.PI / 180 / mPeriod) + height * (1 - mWaveHeightPercent); } else { lineY1 = 0; lineY2 = 0; } canvas.drawLine((int) lineX, (int) lineY1, (int) lineX + 1, height, mWavePaint1); canvas.drawLine((int) lineX, (int) lineY2, (int) lineX + 1, height, mWavePaint2); } } å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œæ²¡æœ‰é€‰æ‹© Path è¿›è¡Œç»˜åˆ¶ï¼Œå› ä¸º @å”¯å¤œ è®¤ä¸º Path ç»˜åˆ¶æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œæ‰€ä»¥é€šè¿‡ç”»ç«–çº¿ï¼Œè®¡ç®—æ¯ä¸ªç‚¹èµ·å§‹çš„ä½ç½®ï¼Œç„¶åä»è¿™ä¸ªç‚¹ç”»ä¸€æ¡çº¿åˆ° View çš„åº•éƒ¨ï¼Œç„¶åå¾ªç¯å¤šæ¬¡ç›´åˆ° View çš„è¾¹ç•Œå¤„ç»“æŸç»˜åˆ¶ï¼Œè¿™æ ·å°±çœ‹åˆ°æ­£å¼¦æ³¢äº†ã€‚è¿™æ—¶å€™åœ¨æ¯æ¬¡ç»˜åˆ¶è¿‡ç¨‹ä¸­ç»™ä¸‰è§’å‡½æ•°æ·»åŠ ä¸€ä¸ªåç§»é‡ï¼Œæ¯æ¬¡è®¡ç®—çš„æ—¶å€™æ³¢å½¢å°±ä¼šåç§»ï¼Œå°±å®Œæˆäº†æ³¢çº¹ã€‚ è¿™ä¹Ÿå°±è§£é‡Šä¸Šæ–¹çš„çŸ©å½¢å¡«å……ç†è®ºäº†ï¼Œå¯ä»¥é€šè¿‡ä¿®æ”¹ waveStrokeWidth å±æ€§æ¥ä½¿å…¶æ›´å¹³æ»‘ï¼Œæˆ‘ä½¿ç”¨æ—¶å‘ç°å¤§æ¦‚ä½¿ç”¨ 1dp å·¦å³æ¯”è¾ƒåˆé€‚ï¼ŒåŒæ—¶ä¹Ÿå‘ç°ä¸€ä¸ªé—®é¢˜ï¼Œå½“ä¿®æ”¹åè™½ç„¶æ›²çº¿æ›´åŠ å¹³æ»‘ï¼Œä½†ä¼šå‡ºç°å°‘è®¸å¡é¡¿çš„ç°è±¡ï¼Œè¿™ä¸ªå¹³è¡¡è¿˜æ˜¯éœ€è¦å¼€å‘è€…è‡ªå·±æ¥æ‰¾ã€‚ é¡ºä¾¿å†è¯´ä¸€ä¸ªä½œè€…å¼€å‘æ—¶é‡åˆ°çš„ä¸€ä¸ªå‘ï¼Œä»ä¸Šæ–¹çš„ Demo å›¾çŸ¥é“å…¶å¯è®¾ç½®ä¸ºåœ†å½¢ï¼›å¸¸è§„çš„æ€è·¯æ˜¯ç”»å®Œä»¥åå†å°†å…¶åˆ‡æˆä¸€ä¸ªåœ†å½¢ï¼Œä½œè€…å°è¯•äº†å„ç§æ–¹æ³•è¯æ˜è¿™ç§æ€è·¯æœ‰é—®é¢˜ã€‚ æœ€åå‘ç°éœ€è¦å…ˆé™å®š Canvas çš„ç»˜åˆ¶åŒºåŸŸï¼Œç„¶åå†å°†å›¾å½¢ç»˜åˆ¶åˆ° View ä¸Šå»ï¼Œè¿™æ ·æ‰èƒ½å®ç°æ•ˆæœã€‚ @Override protected void onDraw(Canvas canvas) { super.onDraw(canvas); if (mIsRunning) { int height = getHeight(); int width = getWidth(); // æ³¨æ„è¿™é‡Œçš„æ‰§è¡Œé¡ºåº clipContainer(canvas, width, height); drawWave(canvas, width, height); } } private void clipContainer(Canvas canvas, int width, int height) { if (mIsCircle) { mContainerPath.reset(); canvas.clipPath(mContainerPath); mContainerPath.addCircle(width / 2, height / 2, width / 2, Path.Direction.CCW); canvas.clipPath(mContainerPath, Region.Op.REPLACE); } } å…¶å®çœ‹å®Œæºç ä¹‹åå‘ç°å®ç°è¯¥åŠŸèƒ½ä¹Ÿä¸æ˜¯ç‰¹åˆ«å¤æ‚ï¼Œä½†å‰æè¿˜æ˜¯å¾—ææ‡‚è‡ªå®šä¹‰ View çš„åŸºæœ¬åŸç†ã€‚ è¯¥æ§ä»¶çš„é¡¹ç›®ä¸»é¡µå¯ ğŸ‘‰æˆ³è¿™é‡ŒğŸ‘ˆ è·³è½¬ã€‚ ","link":"https://LiarrDev.github.io/post/Waveview-Designed-by-onlynight/"},{"title":"Android Toolbar æ˜¾ç¤º WebView Title","content":"å› ä¸ºæ‰€è°“çš„æ•æ·å¼€å‘ï¼Œç°åœ¨å¾ˆå¤š App éƒ½å†…åµŒäº†ç½‘é¡µï¼Œä»¥æ­¤æ¥æ»¡è¶³å¿«é€Ÿè¿­ä»£ä»¥åŠè·¨å¹³å°çš„éœ€æ±‚ï¼Œç”šè‡³å¤§å‹ App å¦‚ã€QQã€ã€ã€æ·˜å®ã€ã€ã€æ”¯ä»˜å®ã€ç­‰ç­‰ï¼Œé™¤äº†æœ€åŸºç¡€çš„åŠŸèƒ½å¤–ï¼Œå¤§å¤šæ•°éƒ½äº¤ç”±ç½‘é¡µæ¥å®ç°ã€‚ æˆ‘ä»¬çŸ¥é“ï¼Œåœ¨ Android ä¸­æƒ³è¦åŠ è½½ç½‘é¡µï¼Œåªéœ€è¦åµŒå…¥ WebView æ§ä»¶å°±å¯ä»¥äº†ï¼Œä½†é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¸ä¼šä½¿ WebView å æ»¡å±å¹•çš„æ•´ä¸ªç©ºé—´ï¼Œé¡¶éƒ¨è¿˜ä¼šåŠ å…¥ä¸€ä¸ª Toolbar æ¥ä¸ç”¨æˆ·äº¤äº’ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬å¯ä»¥æ‰“å¼€ã€Œå¼€å‘è€…é€‰é¡¹ã€ä¸­çš„ã€Œæ˜¾ç¤ºå¸ƒå±€è¾¹ç•Œã€åŠŸèƒ½æ¥çœ‹çœ‹ã€QQã€çš„ã€Œä¼šå‘˜ä¸­å¿ƒã€é¡µé¢ï¼š Toolbar åœ¨è¿™é‡Œä¸€èˆ¬æœ‰ä¸¤ä¸ªä½œç”¨ï¼Œä¸€æ˜¯æä¾›æ“ä½œåŠŸèƒ½ï¼Œæ¯”å¦‚å·¦ä¾§çš„å›é€€æŒ‰é’®ï¼Œä»¥åŠå³è¾¹çš„ Menu èœå•ï¼Œå¯ä»¥åœ¨ä¸å ç”¨ç•Œé¢å¤ªå¤šç©ºé—´çš„æƒ…å†µä¸‹ä¸ºç”¨æˆ·æä¾›äº¤äº’ï¼›äºŒæ˜¯å±•ç¤º Titleï¼Œè®©ç”¨æˆ·çŸ¥æ™“å½“å‰é¡µé¢çš„æ„ä¹‰ã€‚ ä½†æ˜¯å¹³æ—¶æˆ‘ä»¬ä½¿ç”¨ Title æ—¶å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯æ ¹æ®åŸç”Ÿé¡µé¢è®¾ç½®ï¼Œå³ä¸ºæ¯ä¸€ä¸ª Activity æˆ– Fragment è®¾å®šä¸€ä¸ª Titleï¼Œå³æˆ‘ä»¬åœ¨å¼€å‘ä¸­çŸ¥é“æ¯ä¸€ä¸ªé¡µé¢å¯¹åº”çš„ Title æ˜¯ä»€ä¹ˆã€‚ è€Œå¦‚æœä½¿ç”¨ WebView çš„è¯ï¼Œå°±å­˜åœ¨äº†ä¸ç¡®å®šæ€§ï¼Œå› ä¸º WebView æ‰€åŠ è½½çš„é¡µé¢å¾€å¾€ä¸æ˜¯ç”±æˆ‘ä»¬è‡ªå·±å¼€å‘ï¼Œè€Œä¸”è·³è½¬ä¹Ÿä¼šæ›´åŠ éšæ„ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸èƒ½å¤Ÿç›´æ¥ç¡®å®š Titleã€‚ ä¸è¿‡ä¸è¦æ…Œï¼Œå¦‚æœä½ å†™è¿‡ HTML ä½ å°±çŸ¥é“ï¼ŒHTML ä¸­ä¹Ÿæ˜¯æœ‰ä¸€ä¸ªå« &lt;title&gt; çš„æ ‡ç­¾çš„ï¼š &lt;html&gt; &lt;head&gt; &lt;title&gt;Title&lt;/title&gt; &lt;/head&gt; ... &lt;/html&gt; å¦‚æœä½ æ²¡æœ‰å†™è¿‡ HTMLï¼Œé‚£ä¹ˆä½ æ‰“å¼€ç½‘ç«™çš„æ—¶å€™ä¹Ÿä¼šåœ¨æµè§ˆå™¨çš„æ ‡ç­¾ä¸­è§åˆ°ç›¸åº”çš„åå­—ï¼š æˆ‘ä»¬æ‰“å¼€ç½‘é¡µçš„æºç ï¼Œå°±å¯ä»¥çœ‹åˆ°å®šä¹‰è¿™ä¸ªåå­—çš„åœ°æ–¹ï¼š æ—¢ç„¶å¦‚æ­¤ï¼Œæˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ WebView è·å–æ‰€åŠ è½½çš„ç½‘é¡µè®¾ç½®çš„ &lt;title&gt; å¹¶å°†å…¶é…ç½®åˆ° Toolbar ä¸­å»ã€‚ æ–¹æ³•ä¸€ï¼šåœ¨ WebViewClient å†…è·å– webView.setWebViewClient(new WebViewClient() { @Override public void onPageFinished(WebView view, String url) { super.onPageFinished(view, url); String title = view.getTitle(); if (!TextUtils.isEmpty(title)) { toolbar.setTitle(title); } } }); æˆ‘ä»¬çŸ¥é“ onPageFinished() åœ¨ç½‘é¡µåŠ è½½å®Œæˆçš„æ—¶å€™ä¼šè°ƒç”¨ï¼Œè¯¥æ–¹æ³•ä¸­æœ‰ä¸¤ä¸ªå‚æ•°ï¼Œå…¶ä¸­ä¸€ä¸ªå°±æ˜¯ WebView å®ä¾‹ï¼Œé€šè¿‡å®ƒçš„ getTitle() æ–¹æ³•å³å¯è·å–åˆ°ç½‘é¡µçš„ &lt;title&gt;ï¼ŒæŠŠå®ƒè®¾ç½®åˆ° Toolbar çš„ Title ä¸­å³å¯ã€‚ å½“ç„¶ä½ ä¹Ÿå‘ç°äº†å…¶ä»–å‡ ä¸ªæ¥å£å¦‚ shouldOverrideUrlLoading() ä¸­ä¹Ÿæœ‰ WebView å‚æ•°ï¼Œé‚£èƒ½å¦åœ¨å…¶ä¸­ä½¿ç”¨ä¸Šé¢çš„æ–¹å¼è·å–å‘¢ï¼Ÿç†è®ºä¸Šæ˜¯å¯ä»¥çš„ï¼Œä½†ä¸å»ºè®®ï¼ŒshouldOverrideUrlLoading() çš„ä¸»è¦ä½œç”¨æ˜¯ç»™ WebView æä¾›æ—¶æœºï¼Œè®©å…¶é€‰æ‹©æ˜¯å¦å¯¹ Url è¿›è¡Œæ‹¦æˆªï¼Œå¦‚æœæ‹¦æˆªäº†å°±ä¸åŠ è½½å¯¹åº”çš„ Url äº†ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥åœ¨ç½‘é¡µåŠ è½½å®Œæˆåå†è·å–ã€‚ æ–¹æ³•äºŒï¼šåœ¨ WebChromeClient å†…è·å–ï¼š webView.setWebChromeClient(new WebChromeClient() { @Override public void onReceivedTitle(WebView view, String title) { if (!TextUtils.isEmpty(title)) { toolbar.setTitle(title); } } }); WebChromeClient å†…åˆ™æä¾›äº†æ›´åŠ ç›´æˆªäº†å½“çš„æ¥å£ onReceivedTitle()ï¼Œä»å‡½æ•°å‘½åå°±å¯ä»¥çŸ¥é“è¿™ä¸ªæ–¹æ³•å°±æ˜¯ä¸“é—¨ä¸ºäº†è·å– &lt;title&gt; è€Œç”Ÿçš„ï¼Œç›´æ¥è®¾ç½®åˆ° Toolbar ä¸­å°±å¯ä»¥ã€‚ ","link":"https://LiarrDev.github.io/post/Show-Webview-Title-at-Android-Toolbar/"},{"title":"Toolbar NavigationIcon & Title è¿·ä¹‹é—´è·","content":"æ•´ç†äº†ä¸€ä¸‹ä¹‹å‰çš„é¡¹ç›®ï¼Œå‘ç°ä¸€ä¸ªå…³äº Toolbar çš„é—®é¢˜ï¼ŒToolbar ä¸­çš„ NavigationIcon ä¸ Title çš„è·ç¦»ä¼¼ä¹æœ‰ç‚¹è¿‡å¤§ï¼š ç½‘ä¸ŠæŸ¥äº†ä¸€ä¸‹å‘ç°æ˜¯ä» Support åŒ… V23.0.0 ä¹‹åæ‰å‡ºç°è¿™ç§æƒ…å†µï¼Œè€Œæˆ‘çš„è¿™ä¸ªé¡¹ç›®ä½¿ç”¨çš„æ˜¯ V28.0.0 çš„åŒ…ï¼Œçœ‹æ¥è¿™ä¸ªé—®é¢˜å†å²æ‚ ä¹…å•Šã€‚ æ‰“å¼€ Toolbar çš„æºç ï¼š public class Toolbar extends ViewGroup { private RtlSpacingHelper mContentInsets; // å¯¹åº”çš„å±æ€§åç§°ä¸º contentInsetStart private int mContentInsetStartWithNavigation; // å¯¹åº”çš„å±æ€§åç§°ä¸º contentInsetStartWithNavigation ... @Override protected void onLayout(boolean changed, int l, int t, int r, int b) { final boolean isRtl = getLayoutDirection() == LAYOUT_DIRECTION_RTL; final int paddingLeft = getPaddingLeft(); // è·å–ç³»ç»Ÿçš„åç§»é‡ int left = paddingLeft; ... // è®¡ç®— Navigation çš„ Layout if (shouldLayout(mNavButtonView)) { if (isRtl) { ... } else { left = layoutChildLeft(mNavButtonView, left, collapsingMargins, alignmentHeight); } } ... final int contentInsetLeft = getCurrentContentInsetLeft(); left = Math.max(left, contentInsetLeft); ... if (layoutTitle || layoutSubtitle) { ... if (isRtl) { ... } else { ... int titleLeft = left; if (layoutTitle) { ... mTitleTextView.layout(titleLeft, titleTop, titleRight, titleBottom); } ... } } ... } ... private int layoutChildLeft(View child, int left, int[] collapsingMargins, int alignmentHeight) { final LayoutParams lp = (LayoutParams) child.getLayoutParams(); final int l = lp.leftMargin - collapsingMargins[0]; left += Math.max(0, l); collapsingMargins[0] = Math.max(0, -l); final int top = getChildTop(child, alignmentHeight); final int childWidth = child.getMeasuredWidth(); child.layout(left, top, left + childWidth, top + child.getMeasuredHeight()); left += childWidth + lp.rightMargin; return left; } /** * Gets the content inset that will be used on the left side of the bar in the current toolbar configuration. * * @return the current content inset left in pixels * @see #getContentInsetStartWithNavigation() * @see #getContentInsetEndWithActions() */ public int getCurrentContentInsetLeft() { return isLayoutRtl() ? getCurrentContentInsetEnd() : getCurrentContentInsetStart(); } /** * Gets the content inset that will be used on the starting side of the bar in the current toolbar configuration. * * @return the current content inset start in pixels * @see #getContentInsetStartWithNavigation() */ public int getCurrentContentInsetStart() { return getNavigationIcon() != null ? Math.max(getContentInsetStart(), Math.max(mContentInsetStartWithNavigation, 0)) : getContentInsetStart(); } } çœ‹ onLayout() é‡Œé¢ï¼ŒisRtl è¿™ä¸ªå˜é‡ç”¨äºåˆ¤æ–­æ˜¯å¦ä»å³å¾€å·¦æ˜¾ç¤ºï¼Œæˆ‘ä»¬çš„ Toolbar æ˜¯ä»å·¦å¾€å³æ˜¾ç¤ºçš„ï¼Œæ‰€ä»¥åªéœ€è¦çœ‹å€¼ä¸º false çš„æƒ…å†µå³å¯ã€‚ åœ¨è®¡ç®— Navigation çš„ Layout ä¸­ï¼Œè¿›åˆ° layoutChildLeft() æ–¹æ³•é‡Œè¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—å®Œä¹‹å left çš„è·ç¦»ä¸º paddingLeft + mNavButtonView çš„å®½åº¦ + mNavButtonView è‡ªèº«çš„åç§»é‡ã€‚ æ¥ä¸‹æ¥å°±è¿›åˆ° getCurrentContentInsetLeft() æ–¹æ³•ï¼Œå› ä¸ºæ˜¯ä»å·¦å‘å³æ˜¾ç¤ºæ‰€ä»¥ä¼šè°ƒç”¨ getCurrentContentInsetStart() è¿™ä¸ªæ–¹æ³•ï¼Œç”±äºæœ‰ NavigationIconï¼Œæ‰€ä»¥å°±ä¼šèµ°å‰é¢çš„åˆ†æ”¯ã€‚ å…¶ä¸­ Math.max(mContentInsetStartWithNavigation, 0) è¿”å›çš„å°±æ˜¯ mContentInsetStartWithNavigation è¿™ä¸ªå€¼ï¼ŒmContentInsetStartWithNavigation è¿™ä¸ªå€¼å°±æ˜¯ä» contentInsetStartWithNavigation è¿™ä¸ªå±æ€§ä¸­å–å¾—çš„ï¼›getContentInsetStart() è¿™ä¸ªæ–¹æ³•çš„è¿”å›å€¼å°±æ˜¯ contentInsetStart è¿™ä¸ªå±æ€§å¯¹åº”çš„å€¼ã€‚ æ‰€ä»¥æœ€åå°±æ˜¯æ¯”è¾ƒ contentInsetStart å’Œ contentInsetStartWithNavigation è¿™ä¸¤ä¸ªå±æ€§çš„å€¼ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬æ¥çœ‹è¿™ä¸¤ä¸ªå±æ€§çš„å€¼åœ¨ä¿®æ”¹å‰åçš„ç‰ˆæœ¬ä¸­åˆ°åº•æ˜¯å¤šå°‘ï¼Œå…·ä½“çš„æ–‡ä»¶åº”æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„ appcompact-v7 åŒ…çš„ã€Œarrã€æ–‡ä»¶ï¼Œç„¶åè§£å‹æ‰¾åˆ° /res/values/values.xmlï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ã€Android Studioã€çš„è·³è½¬æŸ¥æ‰¾åŠŸèƒ½ã€‚ åœ¨ V22.2.0 çš„ç‰ˆæœ¬ä¸­ï¼Œæè¿° Toolbar å±æ€§çš„å†…å®¹å¦‚ä¸‹ï¼š &lt;style name=&quot;Base.Widget.AppCompat.Toolbar&quot; parent=&quot;android:Widget&quot;&gt; ... &lt;item name=&quot;contentInsetStart&quot;&gt;16dp&lt;/item&gt; &lt;/style&gt; å¯ä»¥å‘ç° contentInsetStart çš„å€¼æ˜¯ 16dpï¼Œä½†æ²¡æœ‰ contentInsetStartWithNavigation è¿™ä¸ªå±æ€§ï¼Œè¿™æ˜¯å› ä¸º contentInsetStartWithNavigation è¿™ä¸ªå±æ€§æ˜¯åœ¨ä¹‹åçš„ç‰ˆæœ¬æ‰åŠ ä¸Šçš„ï¼Œè€Œä¹‹å‰çš„ç‰ˆæœ¬ Toolbar ä»£ç ä¸­åªä¼šæ ¹æ® contentInsetStart æ¥è®¡ç®— Title çš„å·¦è¾¹è·ã€‚ å†æ¥çœ‹çœ‹åœ¨ V28.0.0 ç‰ˆæœ¬ä¸­çš„ä»£ç ï¼š &lt;style name=&quot;Base.V7.Widget.AppCompat.Toolbar&quot; parent=&quot;android:Widget&quot;&gt; ... &lt;item name=&quot;contentInsetStart&quot;&gt;16dp&lt;/item&gt; &lt;item name=&quot;contentInsetStartWithNavigation&quot;&gt;@dimen/abc_action_bar_content_inset_with_nav&lt;/item&gt; &lt;/style&gt; contentInsetStart çš„å€¼ä¹Ÿè¿˜æ˜¯ 16dpï¼ŒcontentInsetStartWithNavigation è¿™ä¸ªå€¼å®šä¹‰åœ¨ &lt;dimen&gt; ä¸­ï¼Œæˆ‘ä»¬å»æ‰¾æ‰¾è¿™ä¸ªå€¼ï¼š &lt;dimen name=&quot;abc_action_bar_content_inset_with_nav&quot;&gt;72dp&lt;/dimen&gt; å†å›åˆ°ä¸€å¼€å§‹çš„é‚£æ®µä»£ç ï¼š final int contentInsetLeft = getCurrentContentInsetLeft(); // æ ¸å¿ƒçš„æ–¹æ³•ï¼Œè¿”å›å°±æ˜¯é‚£ä¸ªè®©è·ç¦»é”™è¯¯çš„å€¼ left = Math.max(left, contentInsetLeft); // left ä¼šä»ä¹‹å‰çš„ left å€¼ä¹Ÿå°±æ˜¯è®¡ç®—è¿‡ Navigation çš„è·ç¦»ä¹‹åï¼Œå’Œ contentInsetLeft æ¯”è¾ƒï¼Œå–æœ€å¤§å€¼ left çš„å€¼ä¸€å¼€å§‹æ˜¯ NavigationIcon çš„å®½åº¦ï¼Œä¸€èˆ¬ä¸º 56dpï¼Œè€Œ contentInsetLeft è¿™ä¸ªå€¼æ˜¯ 72dpï¼Œå–æœ€å¤§å€¼ä¹‹å left çš„å€¼å°±å˜æˆäº† 72dpï¼Œå°±æœ€åå¯¼è‡´äº†è·ç¦»æ˜¾ç¤ºå¼‚å¸¸ã€‚ äº†è§£äº†é—®é¢˜äº§ç”Ÿçš„åŸå› ï¼Œå°±è¯¥è¯´è¯´è§£å†³æ–¹æ³•äº†ï¼Œè§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œåœ¨ Toolbar æ§ä»¶å±æ€§ä¸­æ·»åŠ ä¸€å¥å³å¯ï¼š &lt;android.support.v7.widget.Toolbar ... app:contentInsetStartWithNavigation=&quot;0dp&quot; /&gt; ä¹Ÿå¯ä»¥é€šè¿‡æŒ‡å®š &lt;style&gt; çš„æ–¹æ³•ï¼š &lt;style name=&quot;NoSpaceActionBarTheme&quot; parent=&quot;Base.Widget.AppCompat.Toolbar&quot;&gt; &lt;item name=&quot;contentInsetStart&quot;&gt;0dp&lt;/item&gt; &lt;item name=&quot;contentInsetStartWithNavigation&quot;&gt;0dp&lt;/item&gt; &lt;/style&gt; å†åœ¨ Toolbar æ§ä»¶å±æ€§ä¸­æŒ‡å®šï¼š &lt;android.support.v7.widget.Toolbar ... style=&quot;@style/NoSpaceActionBarTheme&quot; /&gt; å®Œç¾è§£å†³ï¼Œçœ‹çœ‹å®é™…æ•ˆæœå›¾ï¼š ä¸è¿‡ä¸€æ—¶åŠä¼šçœŸçš„æƒ³ä¸é€šä¸ºä»€ä¹ˆ Android è¦åŠ ä¸€ä¸ªè¿™æ ·çš„ä¸œè¥¿â€¦ ","link":"https://LiarrDev.github.io/post/Space-between-Navigationicon-and-Title-in-Toolbar/"},{"title":"Android Shape çš„ç®€å•ä½¿ç”¨","content":"åœ¨åŸç”Ÿ Android å¼€å‘ä¸­ï¼Œè®¸å¤šæ§ä»¶é»˜è®¤éƒ½æ˜¯æ–¹æ–¹æ­£æ­£çš„ï¼Œè€Œæˆ‘ä¸ªäººä¹Ÿæ¯”è¾ƒå–œæ¬¢è¿™ç§è®¾è®¡ï¼Œå› ä¸º Google çš„ Material Design å°±æ˜¯ä»çº¸ç‰‡ä¸­æç‚¼å‡ºæ¥çš„ã€‚ ä½†æ˜¯è¿‘å¹´æ¥ Material Design çš„å‘å±•ï¼Œä¼¼ä¹æ›´åŠ å¾€å¤§åœ†è§’çš„æ–¹å‘é æ‹¢äº†ã€‚ Android çš„åŸç”Ÿæ§ä»¶ä¸­æ˜¯ä¸æ”¯æŒç›´æ¥è®¾ç½®ç±»ä¼¼ Radius çš„å±æ€§ï¼Œæ‰€ä»¥åˆå¾—å¦è¾Ÿè¹Šå¾„äº†ã€‚ Shape Attr å¯ä»¥é€šè¿‡ä¸€ä¸ª XML èµ„æºæ–‡ä»¶æ¥å®šä¹‰ï¼Œå±æ€§å‚è€ƒå¦‚ä¸‹ï¼š shape ï¼ˆå½¢çŠ¶ï¼‰ æœ€å¤–å±‚æ ‡ç­¾ï¼Œç”¨äºå®šä¹‰æ§ä»¶çš„å½¢çŠ¶ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:shape=&quot;ring&quot; android:dither=&quot;false&quot; android:innerRadius=&quot;16dp&quot; android:innerRadiusRatio=&quot;8&quot; android:thickness=&quot;8dp&quot; android:thicknessRatio=&quot;8&quot; android:tint=&quot;@color/colorAccent&quot; android:tintMode=&quot;add&quot; android:useLevel=&quot;false&quot;&gt; ... &lt;/shape&gt; å±æ€§æ¯”è¾ƒå¤šï¼Œå¬æˆ‘ä¸€ä¸€é“æ¥ã€‚ android:shape æ˜¯æ§ä»¶çš„å½¢çŠ¶ï¼Œé»˜è®¤ä¸ºçŸ©å½¢ rectangleï¼Œå…¶ä»–å¯é€‰å€¼è¿˜æœ‰æ¤­åœ† ovalã€çº¿ line å’Œ ç¯ ringã€‚ android:dither ç”¨äºæŒ‡å®šåœ¨ä½å›¾çš„åƒç´ é…ç½®ä¸å±å¹•ä¸åŒæ—¶ï¼ˆä¾‹å¦‚ï¼šARGB_8888 ä½å›¾å’Œ RGB_565 å±å¹•ï¼‰æ˜¯å¦å¯ç”¨ä½å›¾çš„æŠ–åŠ¨ï¼Œé»˜è®¤å€¼ trueï¼Œå½“å€¼ä¸º false æ—¶åˆ™åœç”¨æŠ–åŠ¨ã€‚ android:innerRadius æ˜¯å†…ç¯åŠå¾„ï¼›android:innerRadius æ˜¯å†…ç¯åšåº¦æ¯”ï¼Œå³ç¯çš„å®½åº¦æ¯”è¡¨ç¤ºå†…ç¯åŠå¾„ï¼Œé»˜è®¤ä¸º 3ï¼Œå¯è¢« android:innerRadius çš„å€¼è¦†ç›–ã€‚android:thickness æ˜¯ç¯çš„åšåº¦ï¼Œandroid:thicknessRatio æ˜¯ç¯çš„åšåº¦æ¯”ï¼Œå³ç¯çš„å®½åº¦æ¯”è¡¨ç¤ºç¯çš„åšåº¦ï¼Œé»˜è®¤ä¸º 9ï¼Œå¯è¢« android:thicknessRatio çš„å€¼è¦†ç›–ã€‚è¿™å››ä¸ªå±æ€§åªæœ‰å½“å½¢çŠ¶ä¸º ring çš„æ—¶å€™æ‰æœ‰æ•ˆã€‚ android:tint ç”¨äºç€è‰²ï¼Œè¿™ä¸ªæˆ‘ä»¬åœ¨å…¶ä»–æ§ä»¶ä¹Ÿæœ‰ç”¨åˆ°ã€‚ android:tintMode æ˜¯ç€è‰²ç±»å‹ï¼Œæœ‰ addã€multiplyã€screenã€src_atopã€src_in å’Œ src_over å…­ä¸ªå¯é€‰å€¼ï¼Œè¿™é‡Œä¸ç»†è¯´ã€‚ android:useLevel è¿™ä¸ªå±æ€§æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ä¸ªå¸ƒå°”ç±»å‹ï¼Œé»˜è®¤å€¼ä¸º falseï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹å®ƒï¼Œä¸º true æ—¶å¯åœ¨ LevelListDrawable ä½¿ç”¨ã€‚ corners ï¼ˆåœ†è§’ï¼‰ Creates rounded corners for the shape. Applies only when the shape is a rectangle. ç”¨äºå®šä¹‰æ§ä»¶çš„åœ†è§’å±æ€§ï¼Œä»…å¯ç”¨äºçŸ©å½¢ Shapeã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;corners android:radius=&quot;8dp&quot; android:topLeftRadius=&quot;8dp&quot; android:topRightRadius=&quot;8dp&quot; android:bottomLeftRadius=&quot;8dp&quot; android:bottomRightRadius=&quot;8dp&quot; /&gt; &lt;/shape&gt; è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œä¸è¿‡å¤šè§£é‡Šã€‚ solid ï¼ˆå¡«å……ï¼‰ A solid color to fill the shape. ç”¨äºå®šä¹‰æ§ä»¶çš„å¡«å……é¢œè‰²ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;solid android:color=&quot;@color/colorAccent&quot; /&gt; &lt;/shape&gt; æœ‰ä¸”ä»…æœ‰é¢œè‰²è¿™ä¸€å±æ€§ã€‚ gradient ï¼ˆæ¸å˜ï¼‰ Specifies a gradient color for the shape. ç”¨äºå®šä¹‰æ§ä»¶çš„æ¸å˜è‰²åŠæ¸å˜æ ·å¼ç­‰ã€‚ &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;gradient android:type=&quot;radial&quot; android:angle=&quot;90&quot; android:startColor=&quot;@color/colorPrimaryDark&quot; android:centerColor=&quot;@color/colorAccent&quot; android:endColor=&quot;@color/colorPrimary&quot; android:centerX=&quot;50%&quot; android:centerY=&quot;50%&quot; android:gradientRadius=&quot;8dp&quot; android:useLevel=&quot;false&quot; /&gt; &lt;/shape&gt; è¿™ä¸ªç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œåˆ†ç»„æ¥è¯´ã€‚ android:type æ˜¯æ¸å˜çš„æ ·å¼ï¼Œæœ‰ä¸‰ä¸ªå¯é€‰å€¼ï¼Œçº¿æ€§æ¸å˜ linear æ˜¯é»˜è®¤å€¼ï¼Œå¦å¤–è¿˜æœ‰æ”¾å°„æ¸å˜ radial å’Œæ‰«ææ¸å˜ sweepã€‚ android:angle æ˜¯æ¸å˜è§’åº¦ï¼Œé¡»ä¸º 45 çš„æ•´å€æ•°ï¼Œå…¶ä¸­ 0 ä¸ºä»å·¦åˆ°å³ï¼Œ90 ä¸ºä»ä¸Šåˆ°ä¸‹ã€‚ android:startColorã€android:centerColor å’Œ android:endColor åˆ†åˆ«æ˜¯æ¸å˜çš„èµ·å§‹ç‚¹ã€ä¸­é—´ç‚¹å’Œç»“æŸç‚¹é¢œè‰²ï¼Œä½†ä½ å¯ä»¥æŒ‰éœ€è®¾ç½®ï¼Œå› ä¸ºå…¶æ”¯æŒä¸¤è‰²æ¸å˜å’Œä¸‰è‰²æ¸å˜ï¼Œå³å½“é€‰æ‹©ä¸¤è‰²æ¸å˜æ—¶ï¼Œandroid:centerColor å¯ä»¥ä¸ç”¨å¡«å†™ã€‚ android:centerX å’Œ android:centerY æ˜¯æ¸å˜ä¸­å¿ƒç‚¹ X å’Œ Y çš„ç›¸å¯¹ä½ç½®ï¼Œå–å€¼èŒƒå›´ä¸º 0~1ã€‚ android:gradientRadius æ˜¯æ¸å˜çš„åŠå¾„ï¼Œåªæœ‰å½“æ¸å˜ç±»å‹ä¸º radial æ—¶æ‰æœ‰æ•ˆã€‚ android:useLevel è¿™ä¸ªå±æ€§æ¯”è¾ƒç‰¹æ®Šï¼Œæ˜¯ä¸ªå¸ƒå°”ç±»å‹ï¼Œé»˜è®¤å€¼ä¸º falseï¼Œä¸€èˆ¬æƒ…å†µä¸‹ä¸éœ€è¦ä¿®æ”¹å®ƒï¼Œè€Œä½¿ç”¨ LevelListDrawable æ—¶å°±è¦è®¾ç½®å…¶ä¸º trueã€‚ stroke ï¼ˆæè¾¹ï¼‰ A stroke line for the shape. ç”¨äºå®šä¹‰æ§ä»¶çš„æè¾¹å±æ€§ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;stroke android:width=&quot;8dp&quot; android:color=&quot;@color/colorAccent&quot; android:dashWidth=&quot;8dp&quot; android:dashGap=&quot;8dp&quot; /&gt; &lt;/shape&gt; android:width æ˜¯æè¾¹çš„å®½åº¦ã€‚android:color æ˜¯æè¾¹çš„é¢œè‰²ã€‚ ä¸€èˆ¬æƒ…å†µä¸‹æè¾¹ä¸ºå®çº¿ï¼Œå¦‚æœæƒ³è®¾ç½®è™šçº¿ï¼Œåˆ™éœ€è¦å¦å¤–ä¸¤ä¸ªå±æ€§ï¼Œandroid:dashWidth æ˜¯æŒ‡è™šçº¿æ®µçš„é•¿åº¦ï¼Œandroid:dashGap æ˜¯æŒ‡è™šçº¿æ®µé—´éš”çš„é•¿åº¦ã€‚ padding ï¼ˆè¾¹è·ï¼‰ Padding to apply to the containing View element (this pads the position of the View content, not the shape). ç”¨äºå®šä¹‰æ§ä»¶çš„è¾¹è·å±æ€§ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;padding android:bottom=&quot;4dp&quot; android:left=&quot;4dp&quot; android:right=&quot;4dp&quot; android:top=&quot;4dp&quot; /&gt; &lt;/shape&gt; è¿™ä¸ªä¹Ÿæ¯”è¾ƒç®€å•ï¼Œä¸è¿‡å¤šè§£é‡Šã€‚ size ï¼ˆå¤§å°ï¼‰ The size of the shape. ç”¨äºå®šä¹‰æ§ä»¶çš„å°ºå¯¸å±æ€§ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt; &lt;size android:width=&quot;128dp&quot; android:height=&quot;128dp&quot; /&gt; &lt;/shape&gt; åŒæ ·æ¯”è¾ƒç®€å•ï¼Œä¸è¿‡å¤šè§£é‡Šã€‚ Usage ç”¨æ³•ä¹Ÿä¸å¤æ‚ï¼Œåœ¨ã€Œdrawableã€æ–‡ä»¶å¤¹ä¸­æ–°å»ºä¸€ä¸ª XML èµ„æºæ–‡ä»¶ï¼Œå°†ä¸Šé¢çš„å±æ€§æŒ‰ç…§éœ€è¦è¿›è¡Œç»„åˆå³å¯ã€‚ æ¯”å¦‚ï¼Œæˆ‘å»ºä¸€ä¸ªã€Œbutton_shape.xmlã€ï¼Œç”¨æ¥å®šä¹‰ Button æ§ä»¶çš„å½¢çŠ¶ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;shape xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:shape=&quot;rectangle&quot;&gt; &lt;solid android:color=&quot;@color/colorAccent&quot; /&gt; &lt;corners android:topLeftRadius=&quot;5dp&quot; android:topRightRadius=&quot;10dp&quot; android:bottomLeftRadius=&quot;15dp&quot; android:bottomRightRadius=&quot;0dp&quot; /&gt; &lt;/shape&gt; ä»£ç å¹¶ä¸éš¾ç†è§£ï¼Œå½¢çŠ¶ä¸ºçŸ©å½¢ï¼Œé¢œè‰²è®¾å®šä¸ºä¸»é¢˜è‰²ï¼Œä¸ºå››ä¸ªåœ†è§’åŠå¾„è®¾å®šä¸º ä¸åŒçš„å€¼ã€‚ ç„¶åä½¿ç”¨å…¶åœ¨æ§ä»¶å±æ€§ä¸­è®¾ç½®ä¸º android:backgroundï¼š &lt;Button android:layout_width=&quot;128dp&quot; android:layout_height=&quot;wrap_content&quot; android:background=&quot;@drawable/button_shape&quot; android:text=&quot;Button&quot; /&gt; æ•ˆæœå¦‚ä¸‹ï¼š å…¶å® Shape çš„å¯é…ç½®å±æ€§å¹¶æ²¡æœ‰å¾ˆå¤æ‚ï¼Œæ‰€ä»¥å­¦èµ·æ¥ä¹Ÿä¸ä¼šå¾ˆéš¾ä¸Šæ‰‹ï¼Œä½†æ˜¯å´è¶³å¤Ÿæˆ‘ä»¬ä½¿ç”¨ã€‚ ","link":"https://LiarrDev.github.io/post/Simple-Use-of-Android-Shape/"},{"title":"Android CountDownTimer å®ç°å€’è®¡æ—¶","content":"åœ¨ä¹‹å‰ã€Android è§£ç  Base64 å›¾ç‰‡ã€å’Œã€Android è‡ªå®šä¹‰ Dialog å¸ƒå±€ã€ä¸­æåˆ°äº†å›¾å½¢éªŒè¯ç çš„ç›¸å…³å†…å®¹ï¼Œè¿™æœŸæ¥èŠèŠçŸ­ä¿¡éªŒè¯ç ã€‚ ç°åœ¨åŸºæœ¬ä¸Šæ‰€æœ‰çš„ App éƒ½è¦æ±‚ç”¨æ‰‹æœºå·ç æ³¨å†Œäº†ï¼Œè€ŒçŸ­ä¿¡éªŒè¯ç æ˜¯ä¸€ä¸ªç›¸å¯¹æ¯”è¾ƒæ–¹ä¾¿çš„éªŒè¯æ–¹å¼ï¼Œä»å¤§å¤šæ•° App çš„äº¤äº’ä½“éªŒå¾—çŸ¥ï¼Œè·å–çŸ­ä¿¡éªŒè¯ç åï¼Œä¼šè®¾ç½®ä¸€ä¸ªè®¡æ—¶å™¨è®©ç”¨æˆ·åœ¨çŸ­æ—¶é—´å†…ä¸èƒ½é¢‘ç¹è·å–éªŒè¯ç ï¼Œè¿™æ˜¯å› ä¸ºæœåŠ¡å™¨æä¾›å•†æœ‰ç›¸åº”çš„é™åˆ¶ï¼Œä»¥ç¼“è§£å…¶æœåŠ¡å™¨çš„å‹åŠ›ï¼Œé™ä½å¹¶å‘é‡ã€‚ æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨é˜¿é‡Œäº‘çš„çŸ­ä¿¡æœåŠ¡æ¥å£ï¼Œå°±é™å®šäº†æ¯ä¸ªæ‰‹æœºå·ç æ¯åˆ†é’Ÿåªèƒ½è·å– 1 æ¬¡ï¼Œæ¯å°æ—¶å†…åªèƒ½è·å– 5 æ¬¡ï¼Œæ¯å¤©å†…åªèƒ½è·å– 40 æ¬¡ï¼Œä½†ç”¨æˆ·æ˜¯ä¸çŸ¥é“è¿™äº›è§„åˆ™çš„ï¼Œæˆ‘ä»¬ä¹Ÿæ²¡æœ‰å¿…è¦å»ä¸ºç”¨æˆ·ä»‹ç»è¿™äº›è§„åˆ™ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­å°±è¦ç”¨ç®€å•æ˜“æ‡‚çš„æ–¹å¼ä¸ºç”¨æˆ·è§„é¿è¿™äº›å› ä¸ºè§„åˆ™è€Œäº§ç”Ÿçš„ä¸å¿…è¦çš„éº»çƒ¦ã€‚ äºæ˜¯ä¹Ÿå°±æœ‰äº†å¤§å¤šæ•° App çš„è®¡æ—¶å™¨æŒ‰é’®ã€‚ é‚£ä¹ˆåœ¨ Android å¼€å‘ä¸­è¯¥å¦‚ä½•å®ç°è¿™ä¸ªå€’è®¡æ—¶å‘¢ï¼Œæƒ³äº†ä¸€ä¸‹å‘ç°å®ç°çš„æ–¹å¼è¿˜æ˜¯æŒºå¤šçš„ï¼Œæ¯”å¦‚ TimerTask æˆ–è€… Handlerï¼Œä½†è‡ªå·±å®ç°çš„è¯å°±æ˜¯é‡å¤é€ è½®å­äº†ï¼Œæˆ‘æŸ¥äº†ä¸€ä¸‹ APIï¼Œå‘ç°æœ‰ä¸€ä¸ªç‰¹åˆ«ç®€å•çš„æ–¹æ³•ï¼ŒAndroid ä¸ºæˆ‘ä»¬å°è£…çš„ CountDownTimer å¯ä»¥å¸®åŠ©æˆ‘ä»¬è½»æ¾å®ç°ï¼Œè€Œä¸”å…¶å†…éƒ¨åŸç†å°±æ˜¯é€šè¿‡ Handler æœºåˆ¶å®ç°çš„ã€‚ è¯´å®è¯è¿™ä¹Ÿæ˜¯æˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°å¦‚æ­¤ç®€å•çš„å®˜æ–¹æ¥å£ï¼Œæºç ä¸ç”¨æ€ä¹ˆè´¹å¿ƒæ€å°±çœ‹æ‡‚äº†ï¼Œå¯ä»¥æ¥çœ‹çœ‹ï¼š public abstract class CountDownTimer { private final long mMillisInFuture; private final long mCountdownInterval; private long mStopTimeInFuture; private boolean mCancelled = false; /** * @param millisInFuture The number of millis in the future from the call * to {@link #start()} until the countdown is done and {@link #onFinish()} * is called. * @param countDownInterval The interval along the way to receive * {@link #onTick(long)} callbacks. */ public CountDownTimer(long millisInFuture, long countDownInterval) { mMillisInFuture = millisInFuture; mCountdownInterval = countDownInterval; } /** * Cancel the countdown. */ public synchronized final void cancel() { mCancelled = true; mHandler.removeMessages(MSG); } /** * Start the countdown. */ public synchronized final CountDownTimer start() { mCancelled = false; if (mMillisInFuture &lt;= 0) { onFinish(); return this; } mStopTimeInFuture = SystemClock.elapsedRealtime() + mMillisInFuture; mHandler.sendMessage(mHandler.obtainMessage(MSG)); return this; } /** * Callback fired on regular interval. * @param millisUntilFinished The amount of time until finished. */ public abstract void onTick(long millisUntilFinished); /** * Callback fired when the time is up. */ public abstract void onFinish(); private static final int MSG = 1; /** * Handles counting down. */ private Handler mHandler = new Handler() { @Override public void handleMessage(Message msg) { synchronized (CountDownTimer.this) { if (mCancelled) { return; } final long millisLeft = mStopTimeInFuture - SystemClock.elapsedRealtime(); if (millisLeft &lt;= 0) { onFinish(); } else { long lastTickStart = SystemClock.elapsedRealtime(); onTick(millisLeft); long lastTickDuration = SystemClock.elapsedRealtime() - lastTickStart; // take into account user's onTick taking time to execute long delay; if (millisLeft &lt; mCountdownInterval) { delay = millisLeft - lastTickDuration; // just delay until done if (delay &lt; 0) delay = 0; // special case: user's onTick took more than interval to complete, trigger onFinish without delay } else { delay = mCountdownInterval - lastTickDuration; while (delay &lt; 0) delay += mCountdownInterval; // special case: user's onTick took more than interval to complete, skip to next interval } sendMessageDelayed(obtainMessage(MSG), delay); } } } }; } å…ˆçœ‹æ„é€ æ–¹æ³•ï¼ŒmillisInFuture è®¾ç½®çš„æ˜¯å€’è®¡æ—¶çš„æ€»æ—¶é•¿ï¼ŒcountDownInterval è®¾ç½®çš„å€’è®¡æ—¶çš„é—´éš”æ—¶é—´ï¼Œå•ä½éƒ½æ˜¯æ¯«ç§’ã€‚ å€’è®¡æ—¶æ€»æ—¶é•¿å¥½ç†è§£ï¼ŒcountDownInterval è¿™ä¸ªå‚æ•°è§£é‡Šä¸€ä¸‹ï¼Œæ‰“ä¸ªæ¯”æ–¹ï¼Œå¦‚æœæ€»æ—¶é•¿æ˜¯ 6 ç§’ï¼Œé—´éš”æ—¶é—´æ˜¯ 1 ç§’ï¼Œè®¡æ—¶å™¨å°±ä¼šæŒ‰ç…§ 6-5-4-3-2-1-0 çš„æ–¹å¼è®¡æ—¶ï¼›å¦‚æœæ€»æ—¶é•¿æ˜¯ 6 ç§’ï¼Œé—´éš”æ—¶é—´æ˜¯ 2 ç§’ï¼Œè®¡æ—¶å™¨å°±ä¼šæŒ‰ç…§ 6-4-2-0 çš„æ–¹å¼è®¡æ—¶ã€‚ å¦‚å‰æ–‡æ‰€è¯´ï¼Œé‡ç‚¹å®ç°å°±æ˜¯åœ¨ Handler ä¸­ï¼Œæœ‰ onTick() å’Œ onFinish() ä¸¤ä¸ªæŠ½è±¡æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€é‡å†™è¿™ä¸¤ä¸ªæ–¹æ³•æ¥å®ç°è‡ªå·±çš„é€»è¾‘å³å¯ï¼Œæ¯ä¸ªè®¡æ—¶é—´éš” onTick() éƒ½ä¼šè§¦å‘ä¸€æ¬¡ï¼Œå½“è®¡æ—¶ç»“æŸå onFinish() æ‰ä¼šè§¦å‘ã€‚ ç»“åˆçŸ­ä¿¡éªŒè¯ç çš„éœ€æ±‚æ¥çœ‹çœ‹ä½¿ç”¨ç¤ºä¾‹ï¼š Button btnGetSms = findViewById(R.id.get_sms_btn); btnGetSms.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { CountDownTimer countDownTimer = new CountDownTimer(60 * 1000, 1 * 1000) { @Override public void onTick(long millisUntilFinished) { btnGetSms.setEnabled(false); btnGetSms.setText(millisUntilFinished / 1000 + &quot;s&quot;); } @Override public void onFinish() { btnGetSms.setEnabled(true); btnGetSms.setText(&quot;ç‚¹å‡»è·å–&quot;); } }; countDownTimer.start(); requestSmsCode(tel); // å‘æœåŠ¡å™¨å‘é€è·å–çŸ­ä¿¡éªŒè¯ç è¯·æ±‚ } } åœ¨æ„é€ æ–¹æ³•ä¸­ä¼ å…¥ä¸¤ä¸ªæ—¶é—´å‚æ•°ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œå°±è®¾ç½®å…¶è®¡æ—¶ 60 ç§’ï¼Œè®¡æ—¶é—´éš”ä¸º 1 ç§’ï¼Œç„¶åé‡å†™ onTick() å’Œ onFinish() ä¸¤ä¸ªæ–¹æ³•ï¼Œä½¿è¿™ä¸ª Button åœ¨å€’è®¡æ—¶æœŸé—´ä¸å¯ç”¨ï¼Œä»¥é¿å…ç”¨æˆ·é‡å¤ç‚¹å‡»ï¼ŒåŒæ—¶ï¼Œå°†å€’è®¡æ—¶æ˜¾ç¤ºåœ¨ Button ä¸Šï¼Œè®©ç”¨æˆ·çŸ¥é“é‡æ–°å¯ç‚¹å‡»çš„æ—¶é—´ï¼Œå½“å€’è®¡æ—¶ç»“æŸåï¼Œå°† Button é‡æ–°ç½®ä¸ºå¯ç”¨çŠ¶æ€ï¼Œå¹¶ä¿®æ”¹ä¸Šé¢çš„æ–‡å­—ä»¥æç¤ºç”¨æˆ·ã€‚ æœ€åæˆ‘ä»¬è¿˜éœ€è¦è°ƒç”¨ start() æ¥è®©è®¡æ—¶å™¨å¯åŠ¨ï¼Œæ˜¯ä¸æ˜¯è·Ÿçº¿ç¨‹çš„å¯åŠ¨å·®ä¸å¤šï¼Ÿè¿™å°±è¯´æ˜è¿™ä¸ªè®¡æ—¶æ˜¯å¼‚æ­¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å€’è®¡æ—¶çš„åŒæ—¶åšå…¶ä»–æ“ä½œï¼Œæ¯”å¦‚åœ¨è¿™é‡Œå°±æ˜¯å‘æœåŠ¡å™¨å‘é€è·å–éªŒè¯ç çš„è¯·æ±‚ï¼Œè¿™æ ·çŸ­ä¿¡éªŒè¯ç å°±å¯ä»¥é€šè¿‡è¿è¥å•†ä¸‹å‘åˆ°ç”¨æˆ·çš„æ‰‹æœºäº†ã€‚ çœ‹å› CountDownTimer çš„æºç ï¼Œæ˜¯ä¸æ˜¯å‘ç°è¿˜æœ‰ä¸ª cancel() æ–¹æ³•æ²¡æœ‰ä½¿ç”¨ï¼Ÿ æ­£æ˜¯ç”±äº CountDownTimer ä½¿ç”¨äº† Handlerï¼Œæ‰€ä»¥å¾ˆå®¹æ˜“é€ æˆå†…å­˜æ³„æ¼é—®é¢˜ï¼Œå…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œè¦è®°å¾—æŠŠ cancel() æ–¹æ³•è¡¥ä¸Šï¼Œå› ä¸ºå…¶é‡Œé¢æœ‰èµ„æºå›æ”¶çš„æ“ä½œï¼Œä¸è°ƒç”¨çš„è¯å°±æœ‰å¯èƒ½ä¼šé€ æˆå†…å­˜æ³„æ¼ã€‚ æ¯”å¦‚ï¼Œåœ¨ Activity æˆ–è€… Fragment è¢«å›æ”¶æ—¶å¹¶æœªè°ƒç”¨ CountDownTimer çš„ cancel() æ–¹æ³•ç»“æŸè‡ªå·±ï¼Œè¿™ä¸ªæ—¶å€™ CountDownTimer çš„ Handler å¦‚æœåˆ¤æ–­åˆ°å½“å‰çš„æ—¶é—´æœªèµ°å®Œï¼Œé‚£ä¹ˆä¼šç»§ç»­è°ƒç”¨ onTick() æ–¹æ³•ï¼ŒActivity æˆ–è€… Fragment å·²ç»è¢«ç³»ç»Ÿå›æ”¶ï¼Œä»è€Œé‡Œé¢çš„å˜é‡è¢«è®¾ç½®ä¸º Nullï¼ŒåŒæ—¶ CountDownTimer ä¸­çš„ Handler è¿˜åœ¨ç»§ç»­è¿è¡Œï¼Œè¿™ä¸€å—ç©ºé—´å§‹ç»ˆæ— æ³•è¢«ç³»ç»Ÿå›æ”¶ï¼Œä¹Ÿå°±é€ æˆäº†å†…å­˜æ³„æ¼ã€‚ æˆ‘ä»¬å¯ä»¥åœ¨ CountDownTimer çš„ onTick() æ–¹æ³•ä¸­å¯¹å½“å‰å¯¹è±¡åšåˆ¤ç©ºå¤„ç†ã€‚åœ¨ Activity ä¸­å¯ä½¿ç”¨ï¼š if (!activity.isFinishing()) { // å¤„ç†ç›¸åº”é€»è¾‘ } åœ¨ Fragment ä¸­å¯ä½¿ç”¨ï¼š if (!fragment.isDetached()) { // å¤„ç†ç›¸åº”é€»è¾‘ } åœ¨ Activity æˆ– Fragment ç”Ÿå‘½å‘¨æœŸç»“æŸæ—¶ï¼Œè¦è®°å¾—è°ƒç”¨ cancel() æ–¹æ³•ï¼Œå¦‚ï¼š @Override protected void onDestroy() { super.onDestroy(); if (countDownTimer != null) { countDownTimer.cancel(); countDownTimer = null; } } æœ€åï¼Œå†æä¸€ä¸ªå°ç»†èŠ‚ï¼Œåœ¨æ‰§è¡Œ onTick() æ–¹æ³•æ—¶ï¼Œæºç é‡Œé¢å‡å»äº†ç¨‹åºæ‰§è¡Œåˆ°å½“å‰è¡Œæ—¶æ‰€æ¶ˆè€—çš„æ—¶é—´ï¼Œæ‰€ä»¥ä¸€ä¸ª 60 ç§’çš„å€’è®¡æ—¶ï¼Œç‚¹å‡»åçœ‹åˆ°ç¬¬ä¸€ä¸ªæ˜¾ç¤ºçš„æ˜¯ 59 è€Œä¸æ˜¯ 60ï¼Œä¸éš¾çœ‹å‡º Google åœ¨è¿™æ–¹é¢è¿˜æ˜¯å¾ˆä¸¥è°¨çš„ã€‚ ","link":"https://LiarrDev.github.io/post/Android-CountDownTimer/"},{"title":"Android è‡ªå®šä¹‰ Dialog å¸ƒå±€","content":"ç°åœ¨å¤§å¤šæ•° Appï¼Œåªè¦ä¸æ˜¯çº¯ Material Design é£æ ¼çš„ Appï¼ŒåŸºæœ¬éƒ½ä¼šå¯¹ Dialog çš„æ ·å¼è¿›è¡Œä¸€äº›è‡ªå®šä¹‰ã€‚ä¸€æ–¹é¢å¯èƒ½æ˜¯å› ä¸ºç¾å·¥åªé’ˆå¯¹ iOS åšäº†ä¸€å¥—è®¾è®¡ï¼Œè€Œ Android å°±åªèƒ½è·Ÿéšè¿™å¥—è®¾è®¡èµ°ï¼Œå¦ä¸€æ–¹é¢ï¼Œå¯¹ Dialog æ ·å¼çš„è‡ªå®šä¹‰ä¹Ÿæ˜¯ä¸ºäº†èƒ½å¤Ÿåœ¨å„åœºæ™¯ä¸‹æœ‰åˆç†çš„åº”ç”¨ã€‚ ä¹‹å‰ã€Android ä½¿ç”¨ Dialog æ ·å¼çš„ Activityã€ä¸€æ–‡ä¸­åˆ©ç”¨è®¾ç½® Activity çš„ android:theme å±æ€§æ¥ä»¿é€ äº†ä¸€ä¸ªè‡ªå®šä¹‰æ ·å¼çš„ Dialogï¼Œä½†å…¶å®é™…æœ¬è´¨ä»ç„¶æ˜¯ä¸€ä¸ª Activityï¼Œä¸”å¦‚æœåœ¨æ¯ä¸ªéœ€è¦è‡ªå®šä¹‰ Dialog çš„åœºæ™¯éƒ½ä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œæ— ç–‘æ˜¯å¤§æå°ç”¨ï¼Œå¹¶ä¸”ä¼šä½¿ App å˜å¾—ç¬¨é‡ã€‚è¿™ä¹Ÿæ˜¯ Dialog è¿™ä¸ªæ§ä»¶å­˜åœ¨çš„æ„ä¹‰ã€‚ é‚£ä¹ˆè¯¥å¦‚ä½•è‡ªå®šä¹‰ Dialog çš„æ ·å¼å‘¢ï¼Ÿ å…¶å®å¹¶ä¸éš¾ï¼ŒAndroid ä¸­çš„æ ·å¼å¤§å¤šæ•°æƒ…å†µéƒ½æ˜¯å¯ä»¥æ ¹æ® Layout æ¥å¸ƒå±€çš„ï¼Œå¦‚æœæ²¡æœ‰æ·±åº¦çš„è‡ªå®šä¹‰ View ç»˜åˆ¶éœ€æ±‚ï¼Œä½¿ç”¨è‡ªå¸¦çš„æ§ä»¶ç»„åˆå°±å¯ä»¥è½»æ˜“çš„å¸®æˆ‘ä»¬å®Œæˆè‡ªå®šä¹‰çš„ Dialog å¸ƒå±€ã€‚ ä»¥ä¹‹å‰ã€Android è§£ç  Base64 å›¾ç‰‡ã€ä¸€æ–‡ä¸­çš„éªŒè¯ç éœ€æ±‚ä¸ºç¤ºä¾‹ï¼Œå¯ä»¥å†™å‡ºå¦‚ä¸‹ç®€å•çš„å¸ƒå±€ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot;&gt; &lt;ImageView android:id=&quot;@+id/code_view&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; android:layout_gravity=&quot;center&quot; android:layout_marginTop=&quot;24dp&quot; android:src=&quot;@drawable/loading&quot; /&gt; &lt;EditText android:id=&quot;@+id/code_edit&quot; android:layout_width=&quot;256dp&quot; android:layout_height=&quot;wrap_content&quot; android:layout_margin=&quot;12dp&quot; android:layout_gravity=&quot;center&quot; android:inputType=&quot;number&quot; android:maxLength=&quot;4&quot; android:gravity=&quot;center&quot; /&gt; &lt;/LinearLayout&gt; ImageView ç”¨äºå±•ç¤ºå›¾å½¢éªŒè¯ç ï¼ŒEditText ç”¨äºæ¥æ”¶ç”¨æˆ·è¾“å…¥çš„éªŒè¯ç ï¼Œå¾ˆå¥½ç†è§£å§ã€‚ç”±äºå›¾ç‰‡æ˜¯é€šè¿‡ç½‘ç»œè·å–çš„ï¼Œæ‰€ä»¥è¿™é‡Œé»˜è®¤å›¾æˆ‘ç»™äº†ä¸€å¼  Loading çš„å›¾ç‰‡ï¼Œç­‰é€šè¿‡ç½‘ç»œè¯·æ±‚åˆ°å®é™…çš„éªŒè¯ç å›¾ç‰‡æ—¶å†æ›¿æ¢ï¼›è‡³äºè¾“å…¥æ¡†ï¼Œåˆ™åŠ å…¥äº†æœ€å¤§é•¿åº¦ä»¥åŠè¾“å…¥ç±»å‹ç­‰é™åˆ¶ï¼Œè¿™é‡Œæ¶‰åŠåˆ°å…·ä½“çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸åšè¿‡å¤šè§£é‡Šã€‚ ä¸éš¾å‘ç°ï¼Œå¯¹äº Dialog çš„æ ·å¼å®šåˆ¶ï¼Œå…¶å®è·Ÿæˆ‘ä»¬å¹³æ—¶å†™ Activity çš„å¸ƒå±€ç›¸å·®æ— å‡ ã€‚ é€šè¿‡ã€Android Studioã€çš„å®æ—¶å¸ƒå±€é¢„è§ˆé¢æ¿ï¼Œä¹Ÿå¯ä»¥åƒå¹³æ—¶å†™å¸ƒå±€ä¸€æ ·é¢„è§ˆåˆ°æ•ˆæœï¼š åœ¨è‡ªå®šä¹‰ Dialog æ—¶ï¼Œæˆ‘ä»¬éœ€è¦å°†å¯¹åº”çš„å¸ƒå±€æ‰¾åˆ°ï¼Œå¹¶ä¸”ç»‘å®šåˆ°å¯¹åº” Dialog ä¸­ï¼š View imageCodeDialog = getLayoutInflater().inflate(R.layout.image_code_layout, null); ImageView codeView = (ImageView) imageCodeDialog.findViewById(R.id.code_view); EditText codeEdit = (EditText) imageCodeDialog.findViewById(R.id.code_edit); ... new AlertDialog.Builder(this) .setView(imageCodeDialog) .setPositiveButton(&quot;æäº¤&quot;, new DialogInterface.OnClickListener() { @Override public void onClick(DialogInterface dialog, int which) { â€¦ } }) .setCancelable(false) .show(); å¯ä»¥çœ‹åˆ°ï¼Œéœ€è¦å…ˆé€šè¿‡ inflate() æ–¹æ³•è·å–åˆ°åˆšåˆšçš„å¸ƒå±€æ–‡ä»¶åï¼Œæ‰å¯ä»¥é€šè¿‡ findViewById() æ¥ç»‘å®šå¯¹åº”çš„æ§ä»¶ï¼Œåœ¨è¿™é‡Œä½ å¯ä»¥å°† inflate() ç†è§£ä¸ºç±»ä¼¼æ§ä»¶ä¸­ findViewById() æ–¹æ³•æ‰€åšçš„æ“ä½œï¼Œåªä¸è¿‡ findViewById() ç»‘å®šçš„æ˜¯æ§ä»¶ IDï¼Œè€Œ inflate() ç»‘å®šçš„æ˜¯å¸ƒå±€æ–‡ä»¶ã€‚ è·å–åˆ°å¯¹åº”çš„æ§ä»¶å®ä¾‹åå°±å¯ä»¥è·Ÿå¹³æ—¶ä¸€æ ·å¯¹å…¶åšäº‹ä»¶å“åº”äº†ï¼Œè¿™é‡Œä¸æ˜¯é‡ç‚¹ï¼Œçœç•¥ã€‚ å½“ä½ æŠŠäº‹ä»¶å“åº”éƒ½ç¼–å†™å®Œåï¼Œæœ€é‡è¦çš„å¼¹å‡º Dialog æ­¥éª¤æ¥äº†ï¼Œå…¶å®è·Ÿä¸€èˆ¬æƒ…å†µä¸‹å¼¹å‡º Dialog åŒºåˆ«ä¹Ÿä¸å¤§ï¼Œåªä¸è¿‡æ˜¯åœ¨ show() æ–¹æ³•æ‰§è¡Œä¹‹å‰ï¼Œè°ƒç”¨ setView() æ–¹æ³•å°†é€šè¿‡ inflate() ç»‘å®šçš„ View è®¾ç½®è¿›æ¥å°±å¯ä»¥äº†ï¼ŒsetView() ä¹Ÿå¯ä»¥ç†è§£ä¸ºç±»ä¼¼ Activity ä¸­çš„ setContentView() æ–¹æ³•æ‰€åšçš„æ“ä½œã€‚ æ•ˆæœå¦‚ä¸‹ï¼š ","link":"https://LiarrDev.github.io/post/Android-Customize-Dialog-Layout/"},{"title":"Android è§£ç  Base64 å›¾ç‰‡","content":"å¼€å‘ä¸­éœ€è¦åšå›¾å½¢éªŒè¯ç æ ¡éªŒçš„åŠŸèƒ½ï¼ŒéªŒè¯ç ç”±åç«¯ç”Ÿæˆï¼Œç„¶åä¼ è¾“åˆ°å‰ç«¯æ˜¾ç¤ºã€‚ ä¸ºäº†ä¼ è¾“æ–¹ä¾¿ï¼Œæˆ‘ä»¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ JPG æˆ–è€… PNG æ ¼å¼ï¼Œè€Œæ˜¯é‡‡ç”¨ Base64 æ ¼å¼ã€‚ ä»€ä¹ˆæ˜¯ Base64ï¼Ÿ Base64 æ˜¯ç½‘ç»œä¸Šæœ€å¸¸è§çš„ç”¨äºä¼ è¾“ 8Bit å­—èŠ‚ç çš„ç¼–ç æ–¹å¼ä¹‹ä¸€ï¼ŒBase64 å°±æ˜¯ä¸€ç§åŸºäº 64 ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„æ–¹æ³•ã€‚ Base64 ç¼–ç è¦æ±‚æŠŠ 3 ä¸ª 8 ä½å­—èŠ‚ï¼ˆ3*8=24ï¼‰è½¬åŒ–ä¸º 4 ä¸ª 6 ä½çš„å­—èŠ‚ï¼ˆ4*6=24ï¼‰ï¼Œä¹‹ååœ¨ 6 ä½çš„å‰é¢è¡¥ä¸¤ä¸ª 0ï¼Œå½¢æˆ 8 ä½ä¸€ä¸ªå­—èŠ‚çš„å½¢å¼ã€‚å¦‚æœå‰©ä¸‹çš„å­—ç¬¦ä¸è¶³ 3 ä¸ªå­—èŠ‚ï¼Œåˆ™ç”¨ 0 å¡«å……ï¼Œè¾“å‡ºå­—ç¬¦ä½¿ç”¨ =ï¼Œå› æ­¤ç¼–ç åè¾“å‡ºçš„æ–‡æœ¬æœ«å°¾å¯èƒ½ä¼šå‡ºç° 1 æˆ– 2 ä¸ª =ã€‚ ä¸ºäº†ä¿è¯æ‰€è¾“å‡ºçš„ç¼–ç ä¸ºå¯è¯»å­—ç¬¦ï¼ŒBase64 åˆ¶å®šäº†ä¸€ä¸ªç¼–ç è¡¨ï¼Œä»¥ä¾¿è¿›è¡Œç»Ÿä¸€è½¬æ¢ã€‚ç¼–ç è¡¨çš„å¤§å°ä¸º 2â¶=64ï¼Œè¿™ä¹Ÿæ˜¯ Base64 åç§°çš„ç”±æ¥ã€‚ ç å€¼ å­—ç¬¦ ç å€¼ å­—ç¬¦ ç å€¼ å­—ç¬¦ ç å€¼ å­—ç¬¦ 0 A 16 Q 32 g 48 w 1 B 17 R 33 h 49 x 2 C 18 S 34 i 50 y 3 D 19 T 35 j 51 z 4 E 20 U 36 k 52 0 5 F 21 V 37 l 53 1 6 G 22 W 38 m 54 2 7 H 23 X 39 n 55 3 8 I 24 Y 40 o 56 4 9 J 25 Z 41 p 57 5 10 K 26 a 42 q 58 6 11 L 27 b 43 r 59 7 12 M 28 c 44 s 60 8 13 N 29 d 45 t 61 9 14 O 30 e 46 u 62 + 15 P 31 f 47 v 63 / è¿™æ ·ä¹Ÿå°±äº†è§£ Base64 çš„ç¼–ç æ–¹å¼äº†ã€‚ Android ç«¯æ‹¿åˆ° Base64 åï¼Œæ˜¯ä¸èƒ½å¤Ÿåƒ JPG æˆ–è€… PNG å›¾ç‰‡ä¸€æ ·ç›´æ¥æ˜¾ç¤ºçš„ï¼Œè¿˜éœ€è¦å¯¹å…¶è¿›è¡Œè½¬ç æ“ä½œã€‚ åœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹ï¼Œå‘ç° Android SDK å°±ä¸ºæˆ‘ä»¬æä¾›äº†ç›¸åº”çš„ APIï¼š æ‹¿æ¥å³ç”¨ï¼Œå‘ç°æ€ä¹ˆä¹Ÿè§£ä¸äº†ï¼ŒæŠŠä»æœåŠ¡å™¨è·å–åˆ°çš„ Base64 æ”¾åˆ°æµ‹è¯•ç½‘ç«™ä¸ŠæŸ¥çœ‹äº†ä¸€ä¸‹ï¼Œå‘ç°æ˜¯å¯ä»¥åŠ è½½çš„ï¼Œé‚£å°±è‚¯å®šæ˜¯ä¸Šé¢è¿™ç§åŠ è½½æ–¹æ³•æœ‰é—®é¢˜äº†ã€‚ æˆ‘çš„ç”¨æ³•æ˜¯ï¼Œä»æœåŠ¡å™¨è·å–åˆ° Base64 çš„å­—ç¬¦ä¸²ï¼ŒBase64 çš„å­—ç¬¦ä¸²æ ¼å¼å¦‚ä¸‹ï¼š iVBORw0KGgoAAAANSUhEUgAAAFAAAAAeCAMAAACMnWmDAAAAGFBMVEUAAABQUFAAAAAAAAAAAAAAAAAAAAAAAABiRp8mAAAACHRSTlMA/wAAAAAAACXRGJEAAAmJSURBVHjaAX4JgfYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAQEBAQEBAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAQEBAQEBAQEBAQAAAAAAAAAAAAAAAAAAAAEBAQEBAQAAAAAAAAAAAAAAAAABAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAQEBAQEBAQEBAQAAAAAAAAAAAAAAAAAAAAEBAQEBAQAAAAAAAAAAAAAAAAEBAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQEBAQAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQEBAQAAAAAAAAAAAAAAAQABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAQEBAQABAQEAAAAAAAAAAAAAAAAAAAAAAQEBAQEBAQAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAQEBAQEBAQEBAAAAAAAAAAAAAAAAAAABAQEAAQEBAQAAAAAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAQEBAQEBAQEBAQAAAAAAAAAAAAAAAAABAQEAAQEBAQAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAQEBAQAAAQEBAQAAAAAAAAAAAAAAAAABAQEAAQEBAQAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAQEBAQAAAQEBAQAAAAAAAAAAAAAAAAEBAQAAAQEBAQAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAEBAQAAAQEBAQAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAEBAQAAAQEBAQAAAAAAAAAAAAABAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAQEBAQAAAAAAAAAAAAAAAQEBAAAAAQEBAQAAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAQEBAQAAAAAAAAAAAAAAAQEBAQEBAQEBAQEAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAQEBAQAAAAAAAAAAAAAAAQEBAQEBAQEBAQEAAAAAAAAAAAEBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAQEBAQAAAAAAAAAAAAAAAQEBAQEBAQEBAQEAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQEBAQEBAQAAAAAAAAAAAAAAAQEBAQEBAQEBAQEAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQEBAQEBAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQEBAQEAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQEBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAB5zgFrGnILCQAAAABJRU5ErkJggg== ç”±äºå…¶å¹¶æ²¡æœ‰ä¸Šé¢ç¤ºä¾‹çš„ Base64 çš„è§£æå¤´ data:image/png;base64,â€¦ï¼Œæ‰€ä»¥æˆ‘ä¾¿è‡ªä½œä¸»å¼ ç»™å®ƒæ·»åŠ ä¸Šå»äº†ï¼Œè€Œä¸”åœ¨ä½¿ç”¨ä¸€äº› Base64 è§£ç å·¥å…·æ—¶ï¼Œä¹Ÿè¦æ±‚æœ‰è¯¥éƒ¨åˆ†å†…å®¹æ‰èƒ½æˆåŠŸè§£ç ï¼Œæ‰€ä»¥æˆ‘ä¸€ç›´è®¤ä¸ºè¿™æ ·åšå¹¶æ²¡æœ‰é”™ã€‚ åæ¥çœŸçš„æƒ³ä¸åˆ°åŸå› å°±æŠ±ç€è¯•ä¸€ä¸‹çš„å¿ƒæ€æŠŠè¿™éƒ¨åˆ†å†…å®¹å»æ‰äº†ï¼Œå‘ç°å±…ç„¶å¯ä»¥ç”¨ï¼Œè¢«ç½‘ä¸Šçš„é‚£äº›äººç»™å‘æƒ¨äº†ã€‚ æ‰€ä»¥æ­£ç¡®çš„ä½¿ç”¨æ–¹å¼åº”è¯¥å¦‚ä¸‹ï¼š public static void setImageViewWithBase64(ImageView imageView, String base64) { if (TextUtils.isEmpty(base64)) { throw new NullPointerException(&quot;The string of Base64 is empty&quot;); } if (base64.startsWith(&quot;data:image/png;base64,&quot;) || base64.startsWith(&quot;data:image/*;base64,&quot;) || base64.startsWith(&quot;data:image/jpg;base64,&quot;)) { base64 = base64.split(&quot;,&quot;)[1]; } byte[] decodedString = Base64.decode(base64, Base64.DEFAULT); Bitmap decodedByte = BitmapFactory.decodeByteArray(decodedString, 0, decodedString.length); imageView.setImageBitmap(decodedByte); } ä¸ºäº†èƒ½å¤Ÿæ­£å¸¸æ˜¾ç¤ºå›¾ç‰‡ï¼Œè¿™é‡Œå…ˆå¯¹ Base64 çš„å­—ç¬¦ä¸²è¿›è¡Œåˆ¤ç©ºï¼Œå¦‚æœä¸ºç©ºåˆ™æŠ›å‡º NullPointerException å¼‚å¸¸ï¼Œæ¥ç€å†çœ‹è¿™ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ä»¥ Base64 çš„è§£æå¤´å¼€å¤´ï¼Œå¦‚æœæ˜¯ï¼Œå°±æŠŠè¿™éƒ¨åˆ†å»æ‰ï¼Œæœ€åå†æŠŠ Base64 è§£ç è½¬ä¸º Bitmapï¼Œå¹¶æ˜¾ç¤ºåˆ° ImageView ä¸­å»ã€‚ å³ä½¿æˆ‘ä»¬å¯¹ Base64 å­—ç¬¦ä¸²è¿›è¡Œäº†åˆ¤ç©ºå’Œå»æ‰è§£æå¤´çš„æ“ä½œï¼Œè¿™ä¸ªå­—ç¬¦ä¸²ä»ç„¶æœ‰å¯èƒ½æ˜¯é”™è¯¯çš„ï¼Œå³å®ƒæœ‰å¯èƒ½ä¸æ˜¯ä¸€ä¸ªç¬¦åˆ Base64 è§„èŒƒçš„å­—ç¬¦ä¸²ï¼Œåˆ«æ‹…å¿ƒï¼Œè¿™ç§æƒ…å†µä¸‹ Base64 çš„åº“ä¼šå¸®æˆ‘ä»¬æŠ›å‡º IllegalArgumentException çš„å¼‚å¸¸ã€‚ ","link":"https://LiarrDev.github.io/post/Android-decode-Base64-Picture/"},{"title":"ä¸€è¡Œä»£ç å®ç°ç½‘é¡µå˜ç°æ•ˆæœ","content":"2020 å¹´ 4 æœˆ 4 æ—¥ï¼Œæ¸…æ˜ã€‚åŒæ—¶ç”±äº COVID-19ï¼Œè¿™å¤©è¿˜æ˜¯å…¨å›½æ‚¼å¿µçš„æ—¥å­ã€‚ ä¸Šç½‘çš„ä½ ä¼šå‘ç°ï¼Œè®¸å¤šç½‘ç«™åœ¨è¿™å¤©éƒ½å°†ç½‘ç«™é¦–é¡µå’Œéƒ¨åˆ†å†…å®¹å˜æˆç°è‰²ï¼š ä½ å¯èƒ½ä¼šè®¤ä¸ºè¿™æ˜¯é€šè¿‡æ›´æ¢ä¸€ä¸ªç»Ÿä¸€çš„ CSS æ ·å¼ï¼Œå›¾ç‰‡ä¹ŸåŠ ä¸Šè’™ç‰ˆç­‰æ“ä½œå®ç°çš„ã€‚ä½†è¿™æ ·æˆæœ¬æœªå…ä¹Ÿå¤ªé«˜äº†ï¼Œæœ‰æ•ˆæœŸåªæœ‰ä¸€å¤©ï¼Œè€Œä¸”ä¸‡ä¸€æŸä¸ªæ§ä»¶å¿˜äº†è®¾ç½®ç°è‰²çš„æ ·å¼ä¹Ÿä¼šæ˜¾å¾—æ ¼å¤–çªå…€ã€‚ å…¶å®ï¼Œæˆ‘ä»¬æœ‰æ›´ç®€å•çš„å®ç°æ–¹æ³•ï¼Œåªéœ€è¦ä¸€è¡Œä»£ç å³å¯æå®šã€‚ åœ¨è¿™é‡Œæˆ‘å°±æ‹¿æˆ‘è‡ªå·±çš„ Blog æ¥åšæ¼”ç¤ºï¼Œå…ˆçœ‹çœ‹è¿˜æ²¡æœ‰æ›´æ”¹å‰çš„æ•ˆæœå›¾ï¼š åœ¨éœ€è¦ä¿®æ”¹çš„å…ƒç´ ä¸­æ·»åŠ å¦‚ä¸‹ CSS æ ·å¼ï¼š filter: grayscale(); æ¯”å¦‚æˆ‘æƒ³å°†æ•´ä¸ªé¡µé¢éƒ½æ”¹ä¸ºç°è‰²ï¼Œé‚£ä¹ˆåªéœ€ä¸º &lt;html&gt; æ ‡ç­¾è®¾ç½®è¯¥æ ·å¼å³å¯ï¼š html { ... filter: grayscale(); } è®¾ç½®åæ•ˆæœå¦‚ä¸‹ï¼š å¦‚æœæˆ‘åªæƒ³ &lt;body&gt; å˜ç°ï¼Œé‚£æˆ‘åªéœ€åœ¨ &lt;body&gt; ä¸­è®¾ç½®è¯¥æ ·å¼ï¼š body { ... filter: grayscale(); } è®¾ç½®åå°±åªæœ‰è¯¥æ ‡ç­¾å†…çš„å†…å®¹æ‰ä¼šå˜ç°ï¼š æˆ‘ä»¬è¿˜å¯ä»¥è®¾ç½®ç°åº¦ï¼š html { ... filter: grayscale(50%); } æ¯”å¦‚æˆ‘è®¾ç½®ç°åº¦ä¸º 50% åæ•ˆæœæ˜¯è¿™æ ·çš„ï¼š è¿™ä¸ªå€¼æ˜¯è½¬æ¢æ¯”ä¾‹ï¼Œå–å€¼èŒƒå›´ä¸º 0%ï½100%ï¼Œä¹Ÿå°±æ˜¯ 0ï½1ï¼Œæ¥å—æµ®ç‚¹æ•°ï¼Œå½“ä¸º 0% æ—¶å›¾åƒæ— å˜åŒ–ï¼Œä¸º 100% æ—¶å®Œå…¨è½¬ä¸ºç°åº¦å›¾åƒã€‚ ä¸è¿‡ï¼Œå› ä¸ºä¼—æ‰€å‘¨çŸ¥çš„å…¼å®¹æ€§é—®é¢˜ï¼Œå»ºè®®è¿˜æ˜¯æ·»åŠ å¤šå‡ ä¸ªç±»ä¼¼çš„å±æ€§ï¼š html { ... -webkit-filter: grayscale(); -moz-filter: grayscale(); -ms-filter: grayscale(); -o-filter: grayscale(); filter: grayscale(); filter: progid:DXImageTransform.Microsoft.BasicImage(grayscale=1); } å…¶ä¸­æœ€åä¸€è¡Œæ˜¯ç”¨äºå…¼å®¹ã€Internet Explorerã€çš„ï¼Œè¿™ä¸ªå…¶å® filter æ˜¯ CSS1 çš„å±æ€§äº†ï¼Œä½†æ˜¯å› ä¸ºè€ç‰ˆæœ¬çš„ã€Internet Explorerã€ï¼ˆIE 4.0 ~ IE 9ï¼‰å¯¹æ­¤æ”¯æŒä¸æ€ä¹ˆæ„Ÿå†’ï¼Œå¯¹æµè§ˆå™¨çš„æ”¯æŒä¹Ÿä¸ç¨³å®šï¼Œå› æ­¤è¿™ä¸ªå±æ€§åªèƒ½å½“åšå®éªŒæ€§æŠ€æœ¯æ¥è§‚å¯Ÿã€‚è‡³äºä¸ºä»€ä¹ˆè¦åœ¨å¼€å¤´å†™ä¸Š progid:DXImageTransform.Microsoftï¼Œå…¶å®æˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ¸…æ¥šï¼Œæœ‰å¯èƒ½åªæ˜¯ä¸ºäº†åŒºåˆ†ã€‚ filter å±æ€§è§åçŸ¥ä¹‰ï¼Œå°±æ˜¯æ»¤é•œçš„æ„æ€ï¼Œå¯ä»¥å°†æ¨¡ç³Šæˆ–é¢œè‰²åç§»ç­‰å›¾åƒæ•ˆæœåº”ç”¨äºå…ƒç´ ï¼Œé€šå¸¸ç”¨äºè°ƒæ•´å›¾åƒã€èƒŒæ™¯å’Œè¾¹æ¡†çš„æ¸²æŸ“ã€‚CSS æ ‡å‡†å†…å·²å®ç°äº†é¢„å®šä¹‰æ•ˆæœçš„å‡½æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥æ‹¿æ¥å³ç”¨ã€‚ æœ€åï¼Œå†çœ‹çœ‹æµè§ˆå™¨å¯¹ filter çš„å…¼å®¹æ€§ï¼š å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†ã€Internet Explorerã€ï¼Œå…¶ä»–æµè§ˆå™¨éƒ½æ”¯æŒ filterï¼Œå¦å¤–ã€Firefoxã€è¿˜å•ç‹¬å¯¹ SVG å›¾åƒæä¾›äº†æ”¯æŒã€‚ å‚è€ƒå†…å®¹ï¼š filter - CSSï¼ˆå±‚å æ ·å¼è¡¨ï¼‰ | MDN ä¸å¾—ä¸æ”¶è—çš„â€”â€”IEä¸­CSS-filteræ»¤é•œå°çŸ¥è¯†å¤§å…¨ ","link":"https://LiarrDev.github.io/post/Turn-Webpage-Gray-with-One-Line-of-Code/"},{"title":"åœ¨ macOS ä¸Šä½¿ç”¨ ADB","content":"é€æ¸å¼€å§‹è½¬ç”¨ macOS è¿›è¡Œå¼€å‘å·¥ä½œï¼Œå¯æ˜¯æœ‰æ—¶å€™æŒ‰ç…§ Windows çš„å¥—è·¯åœ¨ macOS ä¸Šå´æ€»æ˜¯è¡Œä¸é€šï¼Œæ¯”å¦‚éœ€è¦åœ¨ macOS å¾€ Android æ‰‹æœºå®‰è£…ä¸€ä¸ªè½¯ä»¶ã€‚åœ¨ Windows ä¸Šï¼Œåªéœ€æŠŠ Android æ‰‹æœºå’Œ PC ä½¿ç”¨ USB æ•°æ®çº¿è¿æ¥ï¼Œå³å¯å®ç°ä¸¤è€…äº’ç›¸ä¼ é€æ–‡ä»¶ï¼Œä½†æ˜¯åœ¨ macOS ä¸Šï¼Œä½¿ç”¨ USB æ•°æ®çº¿å°†ä¸¤è€…è¿æ¥ä¹‹åï¼Œæ˜¯çœ‹ä¸åˆ°è¿æ¥çš„ Android æ‰‹æœºçš„ã€‚ åœ¨å°½é‡ä¸å®‰è£…å¤šä½™è½¯ä»¶çš„æƒ…å†µä¸‹è§£å†³é—®é¢˜ï¼Œæˆ‘æœ€å…ˆæƒ³åˆ°çš„æ˜¯ ADBï¼Œå³ Android Debug Bridgeï¼Œå› ä¸ºä½œä¸º Android å¼€å‘è€…ï¼Œæœ€å¸¸ä½¿ç”¨çš„ Android SDK é‡Œå°±å·²é›†æˆäº† ADBï¼Œè¿™åœ¨ä¹‹å‰ã€Android Device Monitor æƒé™ç¬”è®°ã€ä¸­æœ‰ä½¿ç”¨è¿‡ï¼Œä¸è¿‡æˆ‘å½“æ—¶ä½¿ç”¨çš„ä¹Ÿæ˜¯ Windows ç³»ç»Ÿã€‚ macOS ä¸Šï¼Œç›´æ¥åœ¨ã€Terminalã€ä¸­è¾“å…¥ adb devicesï¼Œæç¤ºæ‰¾ä¸åˆ°ç›¸åº”çš„å‘½ä»¤ï¼š å‡ºç°è¿™ä¸ªé—®é¢˜åº”è¯¥è€ƒè™‘æ˜¯å¦å·²ç»é…ç½®ç¯å¢ƒå˜é‡ï¼Œåœ¨æ²¡æœ‰é…ç½®ç¯å¢ƒå˜é‡çš„æƒ…å†µä¸‹æ˜¯ä¸èƒ½å¤Ÿå…¨å±€è°ƒç”¨çš„ã€‚ ä¸è¿‡ä½ ç›´æ¥è¿›å…¥åˆ° ADB æ‰€åœ¨ç›®å½•æ‰§è¡Œä¹Ÿæ˜¯ä¼šæç¤ºç›¸åŒçš„é”™è¯¯ï¼š è¦æŠŠ ADB çš„å®Œæ•´è·¯å¾„å†™ä¸Šæ‰å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼š ä½†æ˜¯å†™å®Œæ•´è·¯å¾„ç»ˆç©¶æ˜¯ä¸æ–¹ä¾¿ï¼Œè¿˜æ˜¯é…ç½®ç¯å¢ƒå˜é‡æ‰èƒ½å¤Ÿä¸€åŠ³æ°¸é€¸ã€‚ é¦–å…ˆæ‰“å¼€ã€Terminalã€ç»ˆç«¯å‘½ä»¤çª—å£ï¼Œè¿›å…¥ HOME ç›®å½•ä¸‹ï¼š âœ cd ~ å¦‚æœæœ¬æ¥å°±åœ¨è¿™ä¸ªç›®å½•å¯ä»¥ä¸ç”¨æ‰§è¡Œè¿™æ¡å‘½ä»¤ã€‚ æ¥ç€ä½¿ç”¨ touch å‘½ä»¤æ‰§è¡Œï¼š âœ touch .bash_profile è¯¥å‘½ä»¤æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š å¦‚æœæ–‡ä»¶å­˜åœ¨ï¼ŒæŠŠå·²å­˜åœ¨æ–‡ä»¶çš„æ—¶é—´æ ‡ç­¾æ›´æ–°ä¸ºç³»ç»Ÿå½“å‰æ—¶é—´ã€‚ å¦‚æœæ–‡ä»¶ä¸å­˜åœ¨ï¼Œå°±åˆ›å»ºæ–°çš„ç©ºæ–‡ä»¶ã€‚ ç”±äº macOS ä¸åƒ Windows ä¸€æ ·å¯ä»¥ç›´æ¥ä½¿ç”¨å³é”®åœ¨å½“å‰ç›®å½•ä¸‹åˆ›å»ºæ–‡ä»¶ï¼Œæ‰€ä»¥ä¸€èˆ¬éƒ½ä¼šä½¿ç”¨ touch å‘½ä»¤æ¥æ–°å»ºæ–‡ä»¶ã€‚ åˆ›å»ºå®Œæˆåè¾“å…¥å‘½ä»¤æ‰“å¼€æ–‡ä»¶ï¼š âœ open -e .bash_profile åœ¨æ‰“å¼€çš„æ–‡ä»¶æœ€åå¢åŠ å¦‚ä¸‹ä¸¤è¡Œä»£ç å†ä¿å­˜ï¼š export ANDROID_SDK=/Users/&lt;Username&gt;/Library/Android/sdk export PATH=${PATH}:${ANDROID_SDK}/platform-tools ANDROID_SDK æŒ‡å‘çš„è·¯å¾„éœ€è¦æ›¿æ¢æˆè‡ªå·±çš„ SDK è·¯å¾„ã€‚ æœ€åå†ç”¨å‘½ä»¤æ›´æ–°ä¿®æ”¹ï¼š âœ source .bash_profile ç¯å¢ƒå˜é‡å³é…ç½®æˆåŠŸã€‚ ","link":"https://LiarrDev.github.io/post/use-ADB-on-macOS/"},{"title":"Android å­çº¿ç¨‹è°ƒç”¨ Toast","content":"Android ä¸­ç»å¸¸éœ€è¦å¼€å¯å­çº¿ç¨‹è¿›è¡Œè€—æ—¶æ“ä½œï¼Œè€Œåœ¨è€—æ—¶æ“ä½œç»“æŸåï¼Œæˆ‘ä»¬åˆå¸¸éœ€è¦ä½¿ç”¨ Toast å‘ŠçŸ¥ç”¨æˆ·ï¼Œä½†å¦‚æœç›´æ¥åœ¨å­çº¿ç¨‹ä¸­è°ƒç”¨ Toastï¼Œå¾€å¾€ä¸èƒ½å¦‚æ„¿ï¼Œå¾—åˆ°å¦‚ä¸‹ Warn çº§æŠ¥é”™ï¼š W/System.err: java.lang.RuntimeException: Can't create handler inside thread that has not called Looper.prepare() W/System.err: at android.os.Handler.&lt;init&gt;(Handler.java:200) W/System.err: at android.os.Handler.&lt;init&gt;(Handler.java:114) W/System.err: at android.widget.Toast$TN$2.&lt;init&gt;(Toast.java:340) W/System.err: at android.widget.Toast$TN.&lt;init&gt;(Toast.java:340) W/System.err: at android.widget.Toast.&lt;init&gt;(Toast.java:103) W/System.err: at android.widget.Toast.makeText(Toast.java:256) W/System.err: at com.example.liarr.View.Activity.LoginActivity$4.run(LoginActivity.java:209) W/System.err: at java.lang.Thread.run(Thread.java:760) é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ï¼Œåœ¨æˆ‘å°è±¡ä¸­ Toast æ˜¯ä¸éœ€è¦ä¾èµ–äº UI çº¿ç¨‹çš„ï¼Œæ‰€ä»¥ä¸éœ€è¦ runOnUiThread() æ¥åŠ è½½ï¼ŒåŒæ ·ä¹Ÿä¸éœ€è¦åƒã€Android ä½¿ç”¨ Dialog æ ·å¼çš„ Activityã€ä¸­æåˆ°çš„ Dialog ä¸€æ ·éœ€è¦ä¾èµ–äº Activityï¼Œé‚£åˆ°åº•æ˜¯ä»€ä¹ˆåŸå› å¯¼è‡´ Toast ä¸èƒ½æ­£å¸¸æ˜¾ç¤ºå‘¢ï¼Ÿ ä»è¿™ä¸ªé”™è¯¯ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼Œæ˜¯å› ä¸º Looper å¯¹è±¡çš„åŸå› ã€‚ ä¸‹é¢åˆ†æä¸€ä¸‹ Toast åœ¨ä¸»çº¿ç¨‹ä¸å­çº¿ç¨‹è¿è¡Œçš„ç¼ºå¤±é¡¹ï¼Œæ¥çœ‹çœ‹ Toast çš„éƒ¨åˆ†æºç ï¼š /** * Show the view for the specified duration. */ public void show() { if (mNextView == null) { throw new RuntimeException(&quot;setView must have been called&quot;); } INotificationManager service = getService(); String pkg = mContext.getOpPackageName(); TN tn = mTN; tn.mNextView = mNextView; final int displayId = mContext.getDisplayId(); try { service.enqueueToast(pkg, tn, mDuration, displayId); } catch (RemoteException e) { // Empty } } private static INotificationManager sService; static private INotificationManager getService() { if (sService != null) { return sService; } sService = INotificationManager.Stub.asInterface(ServiceManager.getService(&quot;notification&quot;)); return sService; } Toast å†…éƒ¨æœ‰ä¸¤ç±» IPC è¿‡ç¨‹ï¼Œç¬¬ä¸€ç±»æ˜¯ Toast è®¿é—® NotificationManagerServiceï¼Œç¬¬äºŒç±»æ˜¯ NotificationManagerService å›è°ƒ Toast é‡Œé¢çš„ TN æ¥å£ï¼Œè¿™é‡Œæ¶‰åŠåˆ° AIDL è¿›ç¨‹é—´é€šè®¯ï¼ŒTN ç»§æ‰¿è‡ªè¿œç¨‹ NotificationService çš„ä»£ç†ç±»ï¼Œå®é™…å¼¹ Toast çš„å·¥ä½œæ˜¯åœ¨ TN è¿™ä¸ªç±»é‡Œé¢å®Œæˆçš„ï¼š private static class TN extends ITransientNotification.Stub { ... final Handler mHandler; TN(String packageName, @Nullable Looper looper) { ... if (looper == null) { // Use Looper.myLooper() if looper is not specified. looper = Looper.myLooper(); if (looper == null) { throw new RuntimeException(&quot;Can't toast on a thread that has not called Looper.prepare()&quot;); } } mHandler = new Handler(looper, null) { @Override public void handleMessage(Message msg) { switch (msg.what) { case SHOW: { IBinder token = (IBinder) msg.obj; handleShow(token); break; } case HIDE: { handleHide(); // Don't do this in handleHide() because it is also invoked by handleShow() mNextView = null; break; } case CANCEL: { handleHide(); // Don't do this in handleHide() because it is also invoked by handleShow() mNextView = null; try { getService().cancelToast(mPackageName, TN.this); } catch (RemoteException e) {} break; } } } }; } /** * schedule handleShow into the right thread */ @Override public void show(IBinder windowToken) { if (localLOGV) Log.v(TAG, &quot;SHOW: &quot; + this); mHandler.obtainMessage(SHOW, windowToken).sendToTarget(); } /** * schedule handleHide into the right thread */ @Override public void hide() { if (localLOGV) Log.v(TAG, &quot;HIDE: &quot; + this); mHandler.obtainMessage(HIDE).sendToTarget(); } public void cancel() { if (localLOGV) Log.v(TAG, &quot;CANCEL: &quot; + this); mHandler.obtainMessage(CANCEL).sendToTarget(); } public void handleShow(IBinder windowToken) { ... } public void handleHide() { ... } } å¯ä»¥çœ‹åˆ°ï¼ŒTN é‡Œçš„ show() è¿è¡Œåœ¨ Binder çº¿ç¨‹æ± ä¸­ï¼Œæ‰€ä»¥éœ€è¦ä½¿ç”¨ Handler å°†å…¶åˆ‡æ¢åˆ°å½“å‰çº¿ç¨‹ä¸­ï¼Œå®é™…ä¸Š show() å’Œ hide() æ–¹æ³•å®é™…ä¸Šéƒ½æ˜¯ TN ç±»é€šè¿‡ Handler å‘å½“å‰çº¿ç¨‹å‘é€æ¶ˆæ¯ï¼Œæ‰§è¡Œç›¸åº”çš„ä»»åŠ¡ã€‚ è¿™é‡Œåˆæ¶‰åŠåˆ° Handler çš„æ¶ˆæ¯æœºåˆ¶ã€‚Handler çš„æ¶ˆæ¯æœºåˆ¶æ¶‰åŠåˆ°ä¸‰ä¸ªé‡è¦çš„ç±»ï¼šHandlerã€MessageQueue å’Œ Looperï¼Œè¯¥æ¶ˆæ¯æœºåˆ¶è¦å®Œæ•´è¿è¡Œè¿™ä¸‰ä¸ªå¿…ä¸å¯å°‘ï¼Œè€Œ Handler çš„åˆ›å»ºè¿‡ç¨‹ä¸­ï¼š /** * Use the {@link Looper} for the current thread with the specified callback interface and set whether the handler should be asynchronous. * * Handlers are synchronous by default unless this constructor is used to make one that is strictly asynchronous. * * Asynchronous messages represent interrupts or events that do not require global ordering with respect to synchronous messages. Asynchronous messages are not subject to the synchronization barriers introduced by {@link MessageQueue#enqueueSyncBarrier(long)}. * * @param callback The callback interface in which to handle messages, or null. * @param async If true, the handler calls {@link Message#setAsynchronous(boolean)} for each {@link Message} that is sent to it or {@link Runnable} that is posted to it. * * @hide */ public Handler(@Nullable Callback callback, boolean async) { if (FIND_POTENTIAL_LEAKS) { final Class&lt;? extends Handler&gt; klass = getClass(); if ((klass.isAnonymousClass() || klass.isMemberClass() || klass.isLocalClass()) &amp;&amp; (klass.getModifiers() &amp; Modifier.STATIC) == 0) { Log.w(TAG, &quot;The following Handler class should be static or leaks might occur: &quot; + klass.getCanonicalName()); } } mLooper = Looper.myLooper(); if (mLooper == null) { throw new RuntimeException(&quot;Can't create handler inside thread &quot; + Thread.currentThread() + &quot; that has not called Looper.prepare()&quot;); } mQueue = mLooper.mQueue; mCallback = callback; mAsynchronous = async; } å¿…è¦æ¡ä»¶ä¹‹ä¸€æ˜¯éœ€è¦ä¸€ä¸ª Looper, è¿™é‡Œå°±å·²ç»çœ‹åˆ°å¼€å¤´çš„é‚£ä¸ªæŠ¥é”™äº†ã€‚ æ²¡é”™ï¼Œå°±æ˜¯å› ä¸ºç¼ºå°‘ Looperã€‚é‚£ä¸ºä»€ä¹ˆä¸»çº¿ç¨‹ä¸ä¼šæŠ¥é”™å‘¢ï¼Ÿå› ä¸ºä¸»çº¿ç¨‹åœ¨åˆ›å»ºçš„æ—¶å€™å·²ç»é»˜è®¤æ‰§è¡Œäº† Looper.prepare() è¿™ä¸ªæ–¹æ³•å¹¶ä¸”è°ƒç”¨ Looper.loop() ä½¿å…¶å¼€å§‹è½®è¯¢å·¥ä½œã€‚è€Œå­çº¿ç¨‹æ˜¯é»˜è®¤æ²¡æœ‰åˆå§‹åŒ–è¿™ä¸ª Looper çš„ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†ä¸ºä»€ä¹ˆ Looper.myLooper() è¿”å›çš„æ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡ã€‚ æ‰’æºç æ‰’äº†è¿™ä¹ˆä¹…ï¼Œç®€å•æ¥è¯´ï¼ŒAndroid çš„ä¸» UI çº¿ç¨‹ä¸­å…¶ Android æ¡†æ¶å·²ç»é»˜è®¤ç»™å‡ºäº†ä¸€ä¸ª Looper å¯¹è±¡ï¼Œ è€Œæˆ‘ä»¬è‡ªå·±åˆ›å»ºçš„å­çº¿ç¨‹ä¸­ï¼ŒLooper å¯¹è±¡éœ€è¦è‡ªå·±ç»™æ„å»ºå‡ºæ¥ã€‚è¿™ä¹Ÿå°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨å­çº¿ç¨‹ä¸­ç›´æ¥ä½¿ç”¨ Toast çš„æ—¶å€™ä¼šæŠ¥å‡ºä¸Šé¢å¼‚å¸¸ã€‚ æ—¢ç„¶å·²ç»çŸ¥é“äº†é—®é¢˜æ˜¯å¦‚ä½•äº§ç”Ÿçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬ç°åœ¨å°±åªéœ€è¦åœ¨æˆ‘ä»¬çš„å­çº¿ç¨‹ä¸­æŠŠ Toast æ‰€éœ€è¦çš„ Looper å¯¹è±¡ç»™æ„å»ºå‡ºæ¥å°±å¯ä»¥äº†ã€‚ new Thread(new Runnable() { @Override public void run() { ... Looper.prepare(); Toast.makeText(context, &quot;Toast Content&quot;, Toast.LENGTH_SHORT).show(); Looper.loop(); } }).start(); åœ¨å­çº¿ç¨‹é‡Œé¢åˆå§‹åŒ–ä¸€ä¸ª Looper å¯¹è±¡å¹¶å¼€å§‹è½®è¯¢ï¼Œè¿™æ · Toast å°±å¯ä»¥åŠ å…¥åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸­ï¼Œæ‰èƒ½å¤Ÿè¿›è¡Œè¾“å‡ºã€‚ å½“ç„¶ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ runOnUiThread() æ¥è§£å†³ï¼š new Thread(new Runnable() { @Override public void run() { ... runOnUiThread(new Runnable() { @Override public void run() { Toast.makeText(context, &quot;Toast Content&quot;, Toast.LENGTH_SHORT).show(); } }); } }).start(); Toast çš„ä»£ç åˆ›å»ºåœ¨ Runnable ä¸­ï¼Œç„¶ååœ¨éœ€è¦ Toast æ—¶ï¼ŒæŠŠè¿™ä¸ª Runnable å¯¹è±¡ä¼ ç»™ runOnUiThread()ï¼Œè¿™æ · Runnable å¯¹è±¡å°±èƒ½åœ¨ UI çº¿ç¨‹ä¸­è¢«è°ƒç”¨äº†ã€‚ æˆ‘åœ¨ã€ç®€ä¹¦ã€ä¸Šç•™æ„åˆ°æ›¾ä»»æ–°æµªé«˜çº§æ¶æ„å¸ˆã€58åŒåŸé¡¹ç›®è´Ÿè´£äººçš„ @åˆä¸€åäº”a åœ¨æ–‡ç« ã€Androidè¿›é˜¶ï¼šå…­ã€åœ¨å­çº¿ç¨‹ä¸­ç›´æ¥ä½¿ç”¨ Toast åŠå…¶åŸç†ã€ä¸­å°è£…ä¸€ä¸ªå¯ä»¥åœ¨ä»»ä½•çº¿ç¨‹ä¸­ä½¿ç”¨ Toast çš„å·¥å…·ç±»ï¼Œå…¶ä»£ç å¦‚ä¸‹ï¼š @åˆä¸€åäº”a è¿˜è§£é‡Šé“ï¼šåˆå§‹åŒ– Toast ä¹‹å‰å…ˆåˆ¤æ–­å½“å‰çº¿ç¨‹çš„ Looper æ˜¯å¦ä¸ºç©ºï¼Œä¸ºç©ºåˆ™åˆå§‹åŒ–ä¸€ä¸ªæ–°çš„ myLooperï¼Œç„¶ååœ¨è°ƒç”¨ Toast çš„ show() æ–¹æ³•ä¹‹åè®© Looper å¯åŠ¨èµ·æ¥å³å¯ã€‚å› ä¸º Looper.loop() æ–¹æ³•æ˜¯æ— é™å¾ªç¯çš„ï¼Œä¸ºäº†é˜²æ­¢ Looper é˜»å¡çº¿ç¨‹ï¼Œå¯¼è‡´å†…å­˜æ³„æ¼åº”è¯¥åŠæ—¶é€€å‡º Looperã€‚ ç›¸ä¿¡å¾ˆå¤šäººä¸€çœ‹ï¼Œè§‰å¾—æŒºæœ‰é“ç†ï¼Œæ‹¿æ¥å³ç”¨ï¼Œå¹¶ä¸ä¼šè€ƒè™‘å¤ªå¤šï¼Œå®é™…ä¸Šè¿™æ®µä»£ç ä¾ç„¶æ˜¯æœ‰ Bug çš„ï¼Œå¯è§ @åˆä¸€åäº”a çš„æµ‹è¯•ç”¨ä¾‹å¹¶ä¸å®Œå–„ï¼Œå¯èƒ½æ˜¯ä»–å¤ªå¤šæ³¨é‡åœ¨å­çº¿ç¨‹çš„å…¼å®¹ï¼Œä»¥è‡³äºé—æ¼äº†æœ€ç®€å•çš„æƒ…å†µï¼š public class MainActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); ToastUtil.showToast(MainActivity.this, &quot;Toast Content&quot;); } } å®é™…æ•ˆæœæ˜¯è¿™æ ·çš„ï¼š ä¸€å¼€å§‹çœ‹åˆ° Toast è¢«æ­£å¸¸å¼¹å‡ºï¼Œä½ å¯èƒ½ä¼šè§‰å¾—è¿™æ˜¯æ²¡é—®é¢˜çš„ï¼Œä½†æ˜¯å®é™…ä¸Šæ•´ä¸ª App éƒ½å¤„äºç™½å±çŠ¶æ€ï¼Œå½“ä½ æŒ‰ä¸‹ Back é”®ä¹‹åä½ å°±çŸ¥é“ç¨‹åºè¢«å¡æ­»äº†ã€‚ é—®é¢˜å‡ºåœ¨ Looper.loop() ä¸­ï¼Œå…¶å®æˆ‘ä»¬åº”å½“åˆ¤æ–­å½“å‰çº¿ç¨‹æ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯å­çº¿ç¨‹ï¼Œå†å†³å®šéœ€ä¸éœ€è¦æ„å»ºæ–°çš„ Looperï¼š public class ToastUtil { public static void showToast(Context context, String text) { if (isMainThread()) { Toast.makeText(context, text, Toast.LENGTH_SHORT).show(); } else { Looper mLooper = Looper.myLooper(); if (mLooper == null) { Looper.prepare(); mLooper = Looper.myLooper(); } Toast.makeText(context, text, Toast.LENGTH_SHORT).show(); if (mLooper != null) { Looper.loop(); mLooper.quit(); } } } private static boolean isMainThread() { return Looper.getMainLooper() == Looper.myLooper(); } } è¿™é‡Œå¯ä»¥ä½¿ç”¨ä¹‹å‰ã€Android åˆ¤æ–­å½“å‰æ˜¯å¦åœ¨ä¸»çº¿ç¨‹ã€ä¸€æ–‡ä¸­æåˆ°çš„æ–¹æ³•æ¥åˆ¤æ–­å½“å‰çº¿ç¨‹ï¼Œå¦‚æœæ˜¯ä¸»çº¿ç¨‹çš„è¯ï¼Œé‚£å°±ç›´æ¥å¼¹å‡º Toast å³å¯ï¼Œå¦‚æœæ˜¯å­çº¿ç¨‹ï¼Œåˆ™æ„å»º Looperã€‚ ä½†ä½ ä¾ç„¶éœ€è¦äº†è§£ï¼ŒLooper.loop() æ˜¯ä¼šé˜»å¡çº¿ç¨‹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ Looper.loop() åé¢çš„è¯­å¥å¹¶ä¸ä¼šæ‰§è¡Œï¼ˆä¸è¿‡è®¸å¤šæƒ…å†µä¸‹å¼¹ Toast çš„ç¡®æ˜¯å½“å‰é€»è¾‘çš„æœ€åä¸€æ­¥æ“ä½œï¼‰ï¼Œå³ä½¿ä½ è°ƒç”¨äº† quit() ä¹Ÿæ— æµäºäº‹ï¼Œæ‰€ä»¥æˆ‘ä¸ªäººè¿˜æ˜¯æ›´åŠ å–œæ¬¢ç”¨ Handler æ¥è¾…åŠ©å°è£…ï¼š public class ToastUtil { public static void showToast(final Context context, final String text) { if (isMainThread()) { Toast.makeText(context, text, Toast.LENGTH_SHORT).show(); } else { Handler handler = new Handler(Looper.getMainLooper()); handler.post(new Runnable() { @Override public void run() { Toast.makeText(context, text, Toast.LENGTH_LONG).show(); } }); } } private static boolean isMainThread() { return Looper.getMainLooper() == Looper.myLooper(); } } è·Ÿä¹‹å‰ä¸€æ ·ï¼Œå¦‚æœæ˜¯ä¸»çº¿ç¨‹é‚£å°±ç›´æ¥å¼¹å‡º Toastï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™é€šè¿‡ Looper.getMainLooper() è·å–ä¸»çº¿ç¨‹çš„ Looperï¼ŒHandler ä¼šå…³è” Looper å¯¹åº”çš„ MessageQueueï¼Œäºæ˜¯è¿™é‡Œå°±å°† Toast æ”¾åˆ°ä¸»çº¿ç¨‹çš„ MessageQueue ä¸­è¿›è¡Œå¤„ç†ã€‚è¿™ç§æ–¹æ³•å…¶å®å’Œ runOnUiThread() çš„åŸç†æ˜¯ç›¸ä¼¼çš„ã€‚ å…¶å®å¾ˆå¤šå…¥é—¨è€…ä¼šè®¤ä¸º Toast åœ¨å­çº¿ç¨‹ä¸­ä¸èƒ½æ­£å¸¸å¼¹å‡ºæ˜¯å› ä¸ºå­çº¿ç¨‹ä¸­è¿›è¡Œ UI æ›´æ–°æ˜¯éå®‰å…¨æ“ä½œï¼Œä½†å®é™…ä¸Šå¹¶ä¸æ˜¯æŠ›å‡ºå¼‚å¸¸çš„çœŸæ­£åŸå› ï¼Œå› ä¸ºæ ¹æœ¬è¿˜æ²¡æœ‰æ‰§è¡Œåˆ°æ›´æ–° UI é‚£ä¸€æ­¥ã€‚ Toast æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ª Windowï¼Œè·Ÿ Activity æ˜¯å¹³çº§çš„ï¼ŒcheckThread() åªæ˜¯ Activity ç»´æŠ¤çš„ View æ ‘çš„è¡Œä¸ºã€‚Toast æ“ä½œçš„æ˜¯ Windowï¼Œä¸å±äº checkThread() æŠ›éä¸»çº¿ç¨‹ä¸èƒ½æ›´æ–° UI å¼‚å¸¸çš„ç®¡ç†èŒƒç•´ï¼Œå®ƒç”¨ Handler åªæ˜¯ä¸ºäº†ç”¨é˜Ÿåˆ—å’Œæ—¶é—´æ§åˆ¶æ’é˜Ÿæ˜¾ç¤º Toast ç½¢äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Android-calls-up-Toast-in-child-thread/"},{"title":"Android åˆ¤æ–­å½“å‰æ˜¯å¦åœ¨ä¸»çº¿ç¨‹","content":"åœ¨ Android å¼€å‘ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸éœ€è¦äº†è§£å½“å‰ç¼–ç çš„é€»è¾‘å¤„äºå“ªä¸ªçº¿ç¨‹ï¼Œå› ä¸ºæˆ‘ä»¬çŸ¥é“ï¼Œè€—æ—¶æ“ä½œåº”è¯¥æ”¾åœ¨å­çº¿ç¨‹ï¼Œè€Œ UI æ“ä½œåˆ™åº”è¯¥åœ¨ä¸»çº¿ç¨‹ã€‚ å½“æˆ‘ä»¬å°è£…ä¸€äº›å·¥å…·ç±»çš„æ—¶å€™ï¼Œä¸ºäº†å¯å¤ç”¨æ€§ï¼Œéœ€è¦å¯¹å½“å‰çš„çº¿ç¨‹è¿›è¡Œåˆ¤æ–­ï¼Œå¦åˆ™å¦‚æœæ“ä½œä¸å½“ï¼Œå°±ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚ é‚£ä¹ˆï¼Œå¦‚ä½•åˆ¤æ–­å½“å‰çš„çº¿ç¨‹æ˜¯ä¸»çº¿ç¨‹è¿˜æ˜¯å­çº¿ç¨‹å‘¢ï¼Ÿ å€ŸåŠ© Looper æˆ‘ä»¬å¯ä»¥å¾ˆæ–¹ä¾¿åœ°çŸ¥é“ç­”æ¡ˆï¼š public boolean isMainThread() { return Looper.getMainLooper() == Looper.myLooper(); } æˆ‘ä»¬ä¹Ÿå¯ä»¥åˆ©ç”¨ Looper è·å–å½“å‰çš„çº¿ç¨‹ï¼š public boolean isMainThread() { return Looper.getMainLooper().getThread() == Thread.currentThread(); } è¿˜å¯ä»¥é€šè¿‡ Looper è·å–å½“å‰çº¿ç¨‹çš„ ID è¿›è¡Œæ¯”è¾ƒï¼š public boolean isMainThread() { return Looper.getMainLooper().getThread().getId() == Thread.currentThread().getId(); } å¯ä»¥çœ‹åˆ°ï¼ŒLooper åœ¨è¿™ä¸‰ä¸ªæ–¹æ³•ä¸­éƒ½èµ·åˆ°é‡è¦çš„ä½œç”¨ï¼Œè¿™å°±æ¶‰åŠåˆ° Android çš„æ¶ˆæ¯æœºåˆ¶ï¼Œç®€å•æ¥è¯´å°±æ˜¯åªæœ‰ä¸»çº¿ç¨‹ä¸­ Android é»˜è®¤ä¸ºæˆ‘ä»¬æ„å»ºäº† Looperï¼Œè€Œåœ¨å­çº¿ç¨‹ä¸­å¹¶æ²¡æœ‰ï¼Œæ‰€ä»¥ä¸»çº¿ç¨‹å’Œå­çº¿ç¨‹å½“ Looper æ˜¯ä¸ä¼šç›¸ç­‰çš„ï¼Œä¹Ÿå°±å¯ä»¥å¾ˆæ–¹ä¾¿åœ°çŸ¥é“å½“å‰çº¿ç¨‹æ˜¯å¦åœ¨ä¸»çº¿ç¨‹ä¸­äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Android-determines-main-Thread/"},{"title":"ç”¨ Node.js å†™ä¸€ä¸ªä¸‹è½½å›¾ç‰‡çš„çˆ¬è™«","content":"å°è¯•å­¦äº†ä¸€ä¸‹ Node.jsï¼Œè™½è¯´ä¹‹å‰æœ‰å­¦ä¹ ä½¿ç”¨è¿‡ React Nativeï¼Œä½†å¯èƒ½ Java çš„æ ¹æ·±è’‚å›ºï¼Œè®©æˆ‘å¾ˆéš¾ç†è§£ JavaScript å’Œ Node.js çš„æ€æƒ³ã€‚ éƒ½è¯´å†™ä¸€ä¸ªé¡¹ç›®èƒœè¿‡çœ‹åå¤©ä¹¦ï¼Œé‚£å°±ç›´æ¥å¼€ç»ƒå§ã€‚ æœ¬æƒ³å†™ä¸ªç®€å•çš„åå°ç†Ÿæ‚‰ä¸€ä¸‹ï¼Œä½†æ˜¯è€ƒè™‘åˆ°èŠ±è´¹çš„æ—¶é—´å¯èƒ½ä¼šæ¯”è¾ƒé•¿ï¼Œè€Œä¸”æ²¡ä»€ä¹ˆæ–¹å‘ï¼Œæ‰€ä»¥ä¹Ÿæ˜¯æ— ä»ä¸‹æ‰‹ã€‚ åæ¥å‘ç°ï¼ŒNode.js åŸæ¥ä¹Ÿå¯ä»¥å†™çˆ¬è™«ï¼Œé‚£å°±å†™äº†ä¸ªçˆ¬è™«ç©ä¸€ä¸‹å‘—ï¼Œä¹Ÿç®—æ˜¯äº†å´æˆ‘ä¸€ç›´æƒ³å­¦ Python å†™çˆ¬è™«ç©æ•°æ®åˆ†æçš„å¿ƒæ„¿ã€‚ æƒ³äº†ä¸€æƒ³ä¹Ÿä¸çŸ¥é“çˆ¬ç‚¹å•¥ï¼Œæ‰“å¼€ã€Bingã€æœç´¢çš„æ—¶å€™çªç„¶æƒ³åˆ°ï¼ŒMicrosoft çš„ã€Bingã€ä¸æ˜¯æ¯å¤©éƒ½æ›´æ–°å£çº¸çš„å—ï¼Œé‚£æˆ‘èƒ½ä¸èƒ½æŠŠã€Bingã€çš„å£çº¸çˆ¬ä¸‹æ¥å‘¢ï¼Ÿ å¥½çš„å¼€æã€‚ é¦–å…ˆæ‰“å¼€ã€å¿…åº”å£çº¸ã€é¦–é¡µã€‚ ç„¶åæŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œæˆ‘ä½¿ç”¨çš„æµè§ˆå™¨å¿«æ·é”®æ˜¯ Ctrl+Uï¼Œä¸€æŒ‰ï¼Œç»“æœæ²¡ååº”ï¼Œå³é”®èœå•è¿›å…¥å§ï¼Œå³é”®ï¼Œç»“æœè¿˜æ˜¯æ²¡ååº”ã€‚ å§æ§½ï¼Œæ²¡æƒ³åˆ°ã€å¿…åº”å£çº¸ã€çš„å·¥ç¨‹å¸ˆå±…ç„¶åšäº†è¿™æ ·çš„è®¾ç½®ï¼Œä¸è¿‡çš„ç¡®ç”¨æˆ·ä½“éªŒæ˜¯æŒºå¥½çš„ï¼Œåªä¸è¿‡å¯¹æˆ‘ä»¬è¿™ç¾¤â€œæç ´åçš„â€ä¸å‹å¥½ç½¢äº†ã€‚ æ—¢ç„¶ä¸èƒ½æŸ¥çœ‹é¡µé¢æºä»£ç ï¼Œé‚£æˆ‘èƒ½ä¸èƒ½ä½¿ç”¨å®ƒçš„æ£€æŸ¥å…ƒç´ åŠŸèƒ½å‘¢ï¼Ÿ æˆ‘çš„æµè§ˆå™¨å¿«æ·é”®æ˜¯ Ctrl+Shift+Cï¼Œä¸€æŒ‰ï¼Œæœ‰äº†ï¼ è¿™æ ·çœ‹èµ·æ¥è¿˜æ˜¯ä¸å¤ªæ–¹ä¾¿ï¼Œæ—¢ç„¶æ£€æŸ¥å…ƒç´ çš„çª—å£å·²ç»æ‰“å¼€äº†ï¼Œé‚£æˆ‘èƒ½ä¸èƒ½åœ¨è¿™é‡Œè¿›å…¥é¡µé¢æºä»£ç çš„çª—å£å‘¢ï¼ŒCtrl+U å°è¯•ä¸€ä¸‹ï¼Œæ¬¸ï¼Œè¿›å»äº†ã€‚ å…ˆçœ‹ä¸€ä¸‹ã€å¿…åº”å£çº¸ã€é¦–é¡µçš„å‰ç«¯æºä»£ç ï¼Œå¤ªå‡Œä¹±äº†ï¼Œå®ƒçš„å›¾ç‰‡é“¾æ¥ä¹Ÿä¸å¥½æ‰¾ï¼Œè¿™æ ·çˆ¬èµ·æ¥è‚¯å®šå°±ååˆ†éº»çƒ¦äº†ï¼Œè¿˜æ˜¯æ”¾å¼ƒå§ï¼Œäºæ˜¯æˆ‘æŠŠçˆ¬å–å¯¹è±¡è½¬å‘äº†å…¶ä»–å£çº¸ç½‘ç«™ã€‚ æœ€ç»ˆç¡®å®šæ˜¯ã€Stocksnap.ioã€ã€‚ ä¸ºä»€ä¹ˆé€‰å®ƒå‘¢ï¼Œé¦–å…ˆå®ƒçš„é¡µé¢é™¤äº†å£çº¸ä»¥å¤–å¹¶æ²¡æœ‰å…¶ä»–çš„å¤šä½™å…ƒç´ ï¼Œå¦å¤–å®ƒçš„é¡µé¢æºä»£ç å¯è¯»æ€§ä¹Ÿæ¯”ã€å¿…åº”å£çº¸ã€è¦é«˜ï¼Œå›¾ç‰‡é“¾æ¥ä¹Ÿååˆ†æ¸…æ™°ï¼Œå°±å®ƒäº†ã€‚ æ¥ä¸‹æ¥å°±æ˜¯ç¼–å†™ä»£ç äº†ã€‚ ç¼–å†™ä»£ç ä¹‹å‰è‚¯å®šéœ€è¦ Node.js ç¯å¢ƒï¼Œç›´æ¥å»å®˜ç½‘ä¸‹è½½å°±å¯ä»¥äº†ï¼Œè€Œæˆ‘åœ¨ä¹‹å‰ã€Windows å¹³å° React Native å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°ã€ä¸­æˆ‘å·²ç»å®‰è£…è¿‡ Node.js çš„ç¯å¢ƒäº†ï¼Œæ‰€ä»¥å°±ä¸ç”¨é‡æ–°å®‰è£…ã€‚ ç›´æ¥ä¸Šä»£ç ã€‚ var https = require('https'); var fs = require('fs'); var path = require('path'); var url = 'https://stocksnap.io'; // æ£€æŸ¥ç›®å½•ä¸­æ˜¯å¦å­˜åœ¨ images æ–‡ä»¶å¤¹ï¼Œå¦‚æœæ²¡æœ‰å°±åˆ›å»º fs.mkdir('./images', function(err) { if(err) { console.log('Directory already exists.'); } else { console.log('Directory creation success.'); } }); https.get(url, function(res) { var content = null; res.on('data', function(chunk) { content += chunk; }); res.on('end', function() { var reg = /src=&quot;(.*?\\.jpg)&quot;/img; // å…¨å±€åŒ¹é…ä»¥ã€src=ã€‘å¼€å¤´ï¼Œå¹¶ä»¥ã€.jpgã€‘ç»“å°¾çš„å†…å®¹ var filename; while (filename = reg.exec(content)) { getImage(filename[1]); // å­åŒ¹é… } }); }); function getImage(url) { var imageName = path.parse(url).base; var stream = fs.createWriteStream('./images/' + imageName); https.get(url, function(res) { res.pipe(stream); console.log(imageName + ' download completedï¼'); }); } è§£é‡Šä¸€ä¸‹æºä»£ç ã€‚ é¦–å…ˆæ˜¯å¼•å…¥å„æ¨¡å—ï¼Œè¿™é‡Œç”±äºéœ€è¦å‘èµ· HTTPS è¯·æ±‚ï¼Œéœ€è¦å†™å…¥æ–‡ä»¶ï¼Œè¿˜éœ€è¦åˆ†æ URL çš„è·¯å¾„ï¼Œæ‰€ä»¥å°±å¼•å…¥è¿™ä¸‰ä¸ªæ¨¡å—ã€‚ æ¥ç€éœ€è¦ä¸€ä¸ªç›®å½•æ¥å­˜å‚¨ä»ç½‘ç«™ä¸ŠæŠ“å–ä¸‹æ¥çš„å›¾ç‰‡ï¼Œä¸ºäº†ä¸ä½¿æ–‡ä»¶å¤¹é‡Œçš„æ–‡ä»¶ç±»åˆ«å‡Œä¹±ï¼Œæˆ‘å°±åœ¨é¡¹ç›®çš„æ ¹ç›®å½•åˆ›å»ºä¸€ä¸ªåä¸ºã€Œimagesã€çš„æ–‡ä»¶å¤¹ç”¨äºå­˜æ”¾ï¼Œå¦‚æœè¯¥æ–‡ä»¶å¤¹å·²å­˜åœ¨ï¼Œåˆ™ä¸éœ€è¦é‡å¤åˆ›å»ºï¼Œå¹¶åœ¨æ§åˆ¶å°ä¸­æ‰“å°ç›¸å…³ä¿¡æ¯ã€‚ åšå¥½è¿™äº›å‰æœŸå‡†å¤‡ä¹‹åï¼Œå°±å¯ä»¥å‘ã€Stocksnap.ioã€å‘èµ· HTTPS è¯·æ±‚äº†ã€‚ å…ˆæŠŠæ•´ä¸ªé¡µé¢çš„å‰ç«¯ä»£ç çˆ¬ä¸‹æ¥ï¼Œå¦‚æœæ•°æ®é‡å¤§çš„è¯ï¼Œè‚¯å®šä¸èƒ½ä¸€æ¬¡æ€§å°±èƒ½æŠŠæ‰€æœ‰çš„å†…å®¹è·å–ï¼Œæ‰€ä»¥ä½¿ç”¨æ‹¼æ¥çš„æ–¹å¼æŠŠè·å–çš„ç‰‡æ®µè¿æ¥å®Œæ•´ã€‚ å½“è¯·æ±‚ç»“æŸä¹‹åï¼Œä¼šè§¦å‘ end äº‹ä»¶ï¼Œå°±åœ¨ end äº‹ä»¶ä¸­å¤„ç†æˆ‘ä»¬å¯¹å…¶é¡µé¢ä»£ç çš„è§£æã€‚ æˆ‘ä»¬å†æ¬¡æ¥çœ‹çœ‹ã€Stocksnap.ioã€çš„å‰ç«¯ä»£ç ï¼š æ¯”ã€å¿…åº”å£çº¸ã€çš„ä»£ç æ¸…æ™°å¤šäº†ï¼Œå®šä½ä¸€ä¸‹æˆ‘éœ€è¦çš„å†…å®¹ï¼Œæˆ‘éœ€è¦çš„æ˜¯å›¾ç‰‡ï¼Œä¸€èˆ¬å›¾ç‰‡éƒ½ä¼šä½¿ç”¨ &lt;img&gt; æ ‡ç­¾ã€‚ å¤ªå¥½äº†ï¼Œå°±ä¸€ä¸ªå®Œæ•´çš„é“¾æ¥ï¼Œä¸éœ€è¦è¿›è¡Œ URL çš„æ‹¼æ¥æ“ä½œã€‚ æˆ‘åªéœ€è¦å†™ä¸ªæ­£åˆ™è¡¨è¾¾å¼å°†å®ƒåŒ¹é…ä¸Šå°±å¯ä»¥äº†ï¼ŒåŒ¹é…è§„åˆ™ä¹Ÿå¾ˆç®€å•ï¼Œä»¥ src=&quot; å¼€å¤´ï¼Œå¹¶ä»¥ .jpg&quot; ç»“å°¾çš„é“¾æ¥å°±æ˜¯æˆ‘ä»¬æƒ³è¦å¾—åˆ°çš„å›¾ç‰‡é“¾æ¥ã€‚ æ ¹æ®ä¹‹å‰åœ¨ã€å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼ã€ä¸­çš„å‚è€ƒï¼Œæˆ‘ä»¬å¯ä»¥å†™å‡ºç›¸åº”çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š/src=&quot;(.*?\\.jpg)&quot;/ã€‚ é‚£åé¢çš„ /img æ˜¯ä»€ä¹ˆæ„æ€å‘¢ï¼Ÿç”±äºæˆ‘å¯¹æ­£åˆ™ä¹Ÿæ˜¯ä¸€çŸ¥åŠè§£ï¼Œå°±ç…§æ¬ä¸€ä¸‹ç½‘ä¸Šçš„è§£é‡Šï¼š è¿™äº›æ˜¯æ¨¡å¼ä¿®æ­£ç¬¦ï¼Œæ˜¯è§£è¯´æ­£åˆ™è¡¨è¾¾å¼æ¨¡å¼ä¸­ä½¿ç”¨çš„ä¿®æ­£ç¬¦ã€‚å…¶ä¸­ï¼Œ/i è¡¨ç¤ºæ¨¡å¼ä¸­çš„å­—ç¬¦å°†åŒæ—¶åŒ¹é…å¤§å°å†™å­—æ¯ï¼›/m è¡¨ç¤ºâ€œè¡Œèµ·å§‹â€å’Œâ€œè¡Œç»“æŸâ€é™¤äº†åŒ¹é…æ•´ä¸ªå­—ç¬¦ä¸²å¼€å¤´å’Œç»“æŸå¤–ï¼Œè¿˜åˆ†åˆ«åŒ¹é…å…¶ä¸­çš„æ¢è¡Œç¬¦çš„ä¹‹åå’Œä¹‹å‰ï¼›/g è¡¨ç¤ºå…¨å±€å¾ªç¯ã€‚ å¦å¤–ï¼Œ/s è¡¨ç¤ºæ¨¡å¼ä¸­çš„åœ†ç‚¹å…ƒå­—ç¬¦ï¼ˆ.ï¼‰åŒ¹é…æ‰€æœ‰çš„å­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦ï¼›/x è¡¨ç¤ºæ¨¡å¼ä¸­çš„ç©ºç™½å­—ç¬¦é™¤äº†è¢«è½¬ä¹‰çš„æˆ–åœ¨å­—ç¬¦ç±»ä¸­çš„ä»¥å¤–å®Œå…¨è¢«å¿½ç•¥ï¼Œåœ¨æœªè½¬ä¹‰çš„å­—ç¬¦ç±»ä¹‹å¤–çš„ # ä»¥åŠä¸‹ä¸€ä¸ªæ¢è¡Œç¬¦ä¹‹é—´çš„æ‰€æœ‰å­—ç¬¦ï¼ŒåŒ…æ‹¬ä¸¤å¤´ï¼Œä¹Ÿéƒ½è¢«å¿½ç•¥ï¼›/e è¡¨ç¤º preg_replace() åœ¨æ›¿æ¢å­—ç¬¦ä¸²ä¸­å¯¹é€†å‘å¼•ç”¨ä½œæ­£å¸¸çš„æ›¿æ¢ã€‚ å½“æ­£åˆ™åŒ¹é…å®Œæˆåï¼ŒåŒ¹é…ç»“æœæ˜¯ä¸€ä¸ªæ•°ç»„å¯¹è±¡ï¼Œæœ‰ä¸¤é¡¹ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š [ 'src=&quot;https://cdn.stocksnap.io/img-thumbs/280h/G5Q3IISSYX.jpg&quot;', 'https://cdn.stocksnap.io/img-thumbs/280h/G5Q3IISSYX.jpg' ] å¯ä»¥å‘ç°å®ƒå·²ç»å¸®æˆ‘ä»¬æŠŠå›¾ç‰‡çš„ URL è§£æå‡ºæ¥äº†ï¼Œé‚£æˆ‘ä»¬åªéœ€è·å–è§£æå¥½çš„é“¾æ¥è¿›è¡Œä¸‹è½½å³å¯ã€‚ æ ¹æ®æ•°ç»„çš„ä¸‹æ ‡ç‰¹æ€§ï¼Œä¸‹æ ‡ä¸º 1 çš„é¡¹å°±æ˜¯å›¾ç‰‡çš„ URLã€‚ åœ¨ä¸‹è½½å›¾ç‰‡çš„å‡½æ•°ä¸­ï¼Œè°ƒç”¨ path æ¨¡å—çš„ parse() æ–¹æ³•ï¼Œå¯ä»¥å¯¹ URL ä¸­çš„ä¿¡æ¯å†æ¬¡è¿›è¡Œè§£æï¼Œå¾—åˆ°å¦‚ä¸‹ JSON å¯¹è±¡ï¼š { root: '', dir: 'https://cdn.stocksnap.io/img-thumbs/280h', base: 'G5Q3IISSYX.jpg', ext: '.jpg', name: 'G5Q3IISSYX' } å…¶ä¸­ï¼Œbase å°±æ˜¯å›¾ç‰‡çš„æ–‡ä»¶åï¼Œé€šè¿‡è¿ç¼€ .base å°±å¯ä»¥è·å–äº†ï¼Œè·å–çš„ä½œç”¨å°±æ˜¯ä¸ºäº†å¸®æˆ‘ä»¬æŠŠä¸‹è½½çš„å›¾ç‰‡å‘½åã€‚ æœ€åï¼Œé€šè¿‡ç®¡é“æµ pipe() æ–¹æ³•æŠŠå›¾ç‰‡ä¸‹è½½ä¸‹æ¥å°±å¯ä»¥äº†ã€‚ å¦‚æœç¨‹åºæ²¡æœ‰æŠ¥é”™ï¼Œå¯ä»¥åœ¨é¡¹ç›®æ ¹ç›®å½•å‘ç°æœ‰ä¸€ä¸ªã€Œimagesã€æ–‡ä»¶å¤¹ï¼Œé‡Œé¢å·²ç»æœ‰æˆ‘ä»¬åˆšæ‰çˆ¬ä¸‹æ¥çš„å›¾ç‰‡äº†ã€‚ ä¸è¿‡ï¼Œç”±äºé¦–é¡µå±•ç¤ºçš„åªæ˜¯ç¼©ç•¥å›¾ï¼Œæ‰€ä»¥è¿™ä¸ªå›¾ç‰‡æ¯”è¾ƒå°ï¼Œå¦å¤–ï¼Œç”±äºé¡µé¢ä½¿ç”¨çš„æ˜¯æ»‘åŠ¨åˆ°åº•éƒ¨è‡ªåŠ¨åŠ è½½çš„æŠ€æœ¯ï¼Œæ‰€ä»¥çˆ¬å–çš„æ•°é‡ä¹Ÿä¸ä¼šå¤ªå¤šã€‚ ç”±äºè¿™å¯¹äºæˆ‘æ¥è¯´ä¹Ÿåªèƒ½ç®—æ˜¯ä¸€ä¸ªç»ƒæ‰‹çš„å°é¡¹ç›®ï¼Œæˆ‘ä¹Ÿä¸æ‰“ç®—ç»§ç»­æ·±å…¥ç ”ç©¶äº†ï¼Œå¦‚æœæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å¯¹å…¶åŠŸèƒ½è¿›è¡Œæ‰©å±•ä»¥åŠæ”¹è¿›ã€‚ æˆ‘é¡ºä¾¿ä¹ŸæŠŠè¿™ä¸ªé¡¹ç›®æ”¾åˆ°äº† Github ä¸Šï¼Œæœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»çœ‹çœ‹ã€‚ ","link":"https://LiarrDev.github.io/post/An-Images-Crawler-Written-with-NodeJS/"},{"title":"è…¾è®¯åº”ç”¨å¼€æ”¾å¹³å°ä¸Šçº¿ App è¸©å‘è®°å½•","content":"ç»è¿‡æ¼«é•¿è€Œç—›è‹¦çš„æ”¹ Bug æŠ˜ç£¨ï¼Œæˆ‘ä¸ºå…¬å¸å¼€å‘çš„ App ç»ˆäºè¦ä¸Šçº¿äº†ï¼ æˆ‘ä»¿ä½›çœ‹åˆ°äº†å·¥èµ„åœ¨å‘æˆ‘æ‹›æ‰‹ï¼Œä»¿ä½›å¬åˆ°äº†å¹´ç»ˆå¥–ä¸ºæˆ‘æ¬¢å‘¼ï¼ ç„¶è€Œï¼Œç°å®æ€»æ˜¯å……æ»¡äº†å‘ï¼Œæ²¡æƒ³åˆ°ä¸Šçº¿åº”ç”¨çš„è·¯ä¾ç„¶æ›²æŠ˜ï¼Œä»Šå¤©å°±æ¥è¯´è¯´æˆ‘åœ¨ä¸Šçº¿ App æ—¶è¸©è¿‡çš„å‘ã€‚ è¿™æ¬¡ä¸Šæ¶çš„åªæœ‰ Android ç‰ˆçš„ Appï¼Œç» Leader å†³å®šï¼Œåªåœ¨ã€åº”ç”¨å®ã€ä¸Šçº¿ï¼Œè™½ç„¶è¿™æ ·é™åˆ¶äº†åˆ†å‘æ¸ é“ï¼Œä½†ä¹Ÿæ˜¯å‡å°‘äº†æˆ‘çš„å·¥ä½œé‡ï¼Œè€Œä¸”åœ¨ã€åº”ç”¨å®ã€ä¸Šçº¿çš„ä¸€ä¸ªå¥½å¤„å°±æ˜¯å¯ä»¥åˆ©ç”¨å¾®ä¿¡åŠå…¶å¼€æ”¾å¹³å°è¿›è¡Œè·³è½¬ä¸‹è½½ã€‚ å¥½çš„ï¼Œå¼€æã€‚ é¦–å…ˆå¾—åœ¨ã€è…¾è®¯å¼€æ”¾å¹³å°ã€æ³¨å†Œå¼€å‘è€…è´¦å·ï¼Œä¸è¿‡å¾—ç›Šäºè…¾è®¯å¹³å°ç¤¾äº¤èƒ½åŠ›ï¼Œæ”¯æŒä½¿ç”¨ QQ æˆæƒç™»é™†ï¼Œä½†æ˜¯ä¹Ÿä»…èƒ½æ”¯æŒ QQ æˆæƒç™»å½•ã€‚ è¿™ç§æ–¹å¼å¯¹äºä¸ªäººå¼€å‘è€…è€Œè¨€ï¼Œæ˜¯ååˆ†æ–¹ä¾¿çš„ï¼Œè€Œå¯¹äºå…¬å¸æ¥è¯´ï¼Œå°±ä¼šæ¶‰åŠåˆ°ä¸ªäººéšç§é—®é¢˜ï¼Œå°±åƒæˆ‘ä»¬å…¬å¸ï¼Œéœ€è¦å‘˜å·¥æ³¨å†Œä¸€ä¸ªæ–°çš„ QQ å·ï¼Œå¹¶ä½¿ç”¨å‘˜å·¥çš„æ‰‹æœºå·ç è¿›è¡Œç»‘å®šï¼Œé‰´äºå›½å†…éšç§ä¿æŠ¤èƒ½åŠ›ï¼Œè¿™æ ·å¯¹å‘˜å·¥çš„å½±å“ä¹Ÿæ˜¯ä¸å°çš„ï¼Œæ‰€ä»¥æˆ‘è®¤ä¸ºåº”è¯¥å¢åŠ ä¸€ä¸ªé‚®ç®±æ³¨å†Œç™»å½•çš„å…¥å£æ›´åŠ åˆé€‚ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œã€è…¾è®¯å¼€æ”¾å¹³å°ã€åœ¨æˆ‘ä½¿ç”¨æœŸé—´è¡¨ç°ååˆ†ä¸ç¨³å®šï¼Œé€šè¿‡æœç´¢å¼•æ“ç»“æœç™»å½•åå¸¸å¸¸è¿›ä¸å»ï¼Œæˆ‘åæ¥å‘ç°å¯ä»¥é€šè¿‡å…¶é‚®ä»¶ä¸Šçš„é“¾æ¥è·³è½¬ï¼Œè€Œè¿›å»åéƒ¨åˆ†é¡µé¢ä¹Ÿä¼šå‡ºç°åŠ è½½æ—¶é—´è¿‡é•¿çš„æƒ…å†µã€‚ ç™»å½•åè¿˜éœ€è¦ä½œä¸€ç³»åˆ—çš„ä¿¡æ¯è®¤è¯ï¼Œä¸ªäººå¼€å‘è€…éœ€è¦ä¸Šä¼ èº«ä»½è¯ç­‰ä¿¡æ¯ï¼Œå…¬å¸å¼€å‘è€…è¿˜éœ€è¦ä¸Šä¼ å…¬å¸çš„ä¿¡æ¯ï¼Œæ¯”å¦‚è¥ä¸šæ‰§ç…§ç­‰ã€‚ åšå®Œä¸€ç³»åˆ—çš„è®¤è¯å°±å¯ä»¥ä¸Šä¼ å¼€å‘å¥½çš„åº”ç”¨äº†ï¼Œåœ¨ã€Œç®¡ç†ä¸­å¿ƒã€ä¸­åˆ›å»ºåº”ç”¨å³å¯ã€‚ éšåè·³è½¬åˆ°ã€Œé€‰æ‹©å¹³å°ã€çš„é¡µé¢ï¼Œè¿™é‡Œå¯ä»¥é€‰æ‹© Androidã€iOS ä»¥åŠ Web ä¸‰ä¸ªå¹³å°ã€‚ ç”±äºæˆ‘ç›®å‰åªå¼€å‘äº† Android ç‰ˆæœ¬çš„ Appï¼Œæ‰€ä»¥è¿™é‡Œæˆ‘é€‰æ‹© Androidï¼Œç„¶åç‚¹å‡»ã€Œåˆ›å»ºåº”ç”¨ã€ï¼Œåˆ™ä¼šå¼¹å‡ºå¯¹è¯æ¡†é€‰æ‹©åº”ç”¨ç±»å‹ã€‚ æœ‰ã€Œæ¸¸æˆã€å’Œã€Œè½¯ä»¶ã€ä¸¤ä¸ªé€‰é¡¹ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©ã€Œè½¯ä»¶ã€ã€‚ å…³äºåº”ç”¨åˆ†æˆçš„é—®é¢˜ï¼Œæˆ‘åœ¨ã€Quick Appã€ä¸€æ–‡ä¸­æœ‰èŠè¿‡ï¼Œæœ‰å…´è¶£å¯ä»¥äº†è§£ä¸€ä¸‹ã€‚ æ¥ç€å°±åˆ°å…³é”®ä¸€æ­¥äº†ï¼Œå¡«å†™åº”ç”¨çš„ç›¸å…³ä¿¡æ¯ã€‚ è¿™å°±ç»å†äº†æˆ‘è¸©å‘æœ€å¤šçš„åœ°æ–¹ï¼Œå› ä¸ºæˆ‘ä¸€å…±æäº¤äº† 7 æ¬¡å®¡æ ¸ï¼Œå†æ—¶ä¸‰å‘¨ã€‚ å…ˆæ‰“ä¸ªæ¯”æ–¹è¯´ä¸€ä¸‹æˆ‘å…¬å¸çš„èƒŒæ™¯ï¼Œå‡è®¾æœ‰ A å’Œ B ä¸¤ä¸ªå…¬å¸ï¼Œå…¶ä¸­ B æ˜¯ A çš„ç‹¬ç«‹å­å…¬å¸ï¼Œæˆ‘å°±èŒäº B å…¬å¸ã€‚è¿™æ€ä¹ˆç†è§£å‘¢ï¼Œå¯ä»¥å‚è€ƒä¸€ä¸‹æ‰‹æœºå“ç‰Œä¸­çš„ HUAWEI å’Œ ZTE ç­‰ï¼ŒHonor æ˜¯ HUAWEI çš„ç‹¬ç«‹å­å“ç‰Œï¼Œnubia æ˜¯ ZTE çš„ç‹¬ç«‹å­å“ç‰Œï¼›ä¹Ÿå¯ä»¥å‚è€ƒä¸€ä¸‹ Alphabetï¼ŒGoogle å°±æ˜¯ Alphabet çš„å­å…¬å¸ï¼Œæ‰€ä»¥æˆ‘æ‰€åœ¨çš„å…¬å¸æ˜¯å­å…¬å¸ï¼Œä¸Šé¢è¿˜æœ‰ä¸€ä¸ªæ¯å…¬å¸ã€‚ ç¬¬ä¸€æ¬¡æäº¤ï¼Œé©³å›åŸå› æ˜¯è¯¥åº”ç”¨å­˜åœ¨ç‰ˆæƒé—®é¢˜ï¼Œéœ€æä¾›åº”ç”¨è½¯ä»¶è‘—ä½œæƒè¯ä¹¦ï¼Œè¯·åœ¨ç‰ˆæƒè¯æ˜å¤„ä¸Šä¼ ç›¸å…³ææ–™æ‰«æä»¶åé‡æ–°æäº¤ã€‚ åŸå› æ˜¯æœªä¸Šä¼ ç‰ˆæƒè¯æ˜ï¼Œç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼Œç‰ˆæƒè¯æ˜ä¸­å¹¶æ— å¿…å¡«é¡¹ï¼Œæ‰€ä»¥æˆ‘ä¸€å¼€å§‹å¹¶æ²¡æœ‰ä¸Šä¼ ã€‚ åæ¥æˆ‘æ‰å‘ç°ï¼Œç‰ˆæƒè¯æ˜ä¸‹æœ‰ä¸€è¡Œå°å­—ï¼š åº”ç”¨å¿…é¡»æä¾›ç‰ˆæƒè¯æ˜ï¼Œå¼€å‘è€…ç‰ˆæƒè¯æ˜æäº¤ï¼Œè¯·å‚è€ƒç‰ˆæƒè¯æ˜æŒ‡å¼•ï¼Œå¤§å°2Mä»¥å†…ï¼Œæ”¯æŒJPG/PNGæ ¼å¼çš„å›¾ç‰‡ã€‚ è¿‡åˆ†ï¼æ˜æ˜è¯´å¿…é¡»æä¾›ï¼Œä½†æ˜¯å´æ²¡æœ‰æ ‡è®°ä¸ºå¿…å¡«é¡¹ï¼Œè¿™ä¸æ˜¯æµªè´¹æˆ‘æ—¶é—´å˜›ï¼ ä¸Šç½‘æŸ¥äº†ä¸€ä¸‹ç›¸å…³æ‰‹ç»­ï¼Œæå…¶ç¹çï¼Œéœ€è¦å¡«å†™å„ç§èµ„æ–™ï¼Œæ›´éº»çƒ¦çš„æ˜¯éœ€è¦ä¸Šä¼ æºç åŠæ–‡æ¡£å…± 120 é¡µçš„é‰´å®šææ–™ï¼Œè€Œä¸”é‚®å¯„æäº¤åéœ€è¦ç­‰å¾…ä¸€ä¸ªæœˆçš„æ—¶é—´ï¼Œç”±äºæ–‡æ¡£æˆ‘åœ¨å¼€å‘çš„æ—¶å€™å¹¶æ²¡æœ‰å†™ï¼ˆåä¹ æƒ¯ï¼‰ï¼Œæ‰€ä»¥è¦å®Œæˆè¿™ä¸€æ•´å¥—æµç¨‹ä¼°è®¡ä¹Ÿå¾—ä¸€ä¸ªåŠæœˆï¼Œäºæ˜¯æˆ‘å°±ç»™ Leader æäº†ä¸¤ä¸ªæ–¹æ¡ˆï¼š ä¸€æ˜¯ç­‰å¾…æˆ‘å®Œæˆæ‰€æœ‰é‰´å®šææ–™å†ç”³è¯·ï¼Œä½†æ˜¯è¿™ä¸ªæ—¶é•¿å…·æœ‰ä¸ç¡®å®šæ€§ï¼Œå› ä¸ºè¿™ä¸ªææ–™å³ä½¿æäº¤äº†ï¼Œä¹Ÿå¯èƒ½å› ä¸ºå„ç§åŸå› ä¸èƒ½é€šè¿‡ï¼Œè¢«æ‰“å›æ¥è¿˜è¦ä¿®æ”¹ï¼Œç„¶åé‡æ–°æäº¤ä¸Šå»åå†å®¡æ ¸ï¼Œæ¯ä¸ªå®¡æ ¸å‘¨æœŸå¤§çº¦æ˜¯ä¸€ä¸ªæœˆï¼Œæ‰€ä»¥å¾€åçš„æƒ³ï¼Œç”³è¯·ä¸€ä¸ªè¿™æ ·çš„è¯ä¹¦å¯èƒ½éœ€è¦å‡ ä¸ªæœˆç”šè‡³æ˜¯åŠå¹´çš„æ—¶é—´ã€‚ äºŒæ˜¯äº¤ç»™ç¬¬ä¸‰æ–¹å¹³å°æ¥è¾…åŠ©å®Œæˆï¼Œè¿™äº›å¹³å°åŸºæœ¬ä¸Šéƒ½è‡ªç§°åŒ…è¿‡ï¼Œè€Œä¸”åŠ é’±è¿˜å¯ä»¥åŠ æ€¥ï¼Œå¯ä»¥ä¿è¯åœ¨çŸ­æ—¶é—´å†…æ‹¿åˆ°è¿™ä¸ªè½¯ä»¶è‘—ä½œæƒè¯ä¹¦ï¼Œä½†ä»·æ ¼ä¹Ÿä¸ä¾¿å®œã€‚ å½“æˆ‘æœé›†äº†ä¸€å¤©çš„èµ„æ–™é€’ç»™ Leader åï¼Œä»–è¯´å¯ä»¥æ‹¿æ¯å…¬å¸çš„è½¯ä»¶è‘—ä½œæƒè¯ä¹¦æ¥ä»£æ›¿ã€‚ çªç„¶å°±è§‰å¾—æˆ‘è¿™ä¸€æ•´å¤©çå¿™æ´»äº†â€¦ ä¸Šä¼ æ¯å…¬å¸çš„è‘—ä½œæƒè¯ä¹¦ï¼Œé™å€™ä½³éŸ³ã€‚ ç¬¬äºŒå¤©å†æ¬¡é©³å›ï¼ŒåŸå› æ˜¯è¯¥åº”ç”¨ç»ä¸‹è½½æ£€æµ‹ï¼Œåº”ç”¨å†…å®¹æ— æ³•åŠ è½½ï¼Œè¯·ä¿®å¤å¹¶æ ¸å®åé‡æ–°æäº¤ã€‚ å‡ºç°è¿™ä¸ªé—®é¢˜æ˜¯å› ä¸ºä¹‹å‰åœ¨ã€WeChat H5 Payment for Androidã€å’Œã€Android M ä» Service ä¸­å¯åŠ¨ Activityã€ç­‰æ–‡ç« ä¸­æåˆ°è¿™ä¸ª App é‡ŒåŒ…å«äº†å¤§é‡çš„ WebViewï¼Œè€Œç”±äºåå°ä»£ç è¿˜æœªå‘ç‰ˆæœ¬ï¼Œä»…åœ¨æµ‹è¯•æœåŠ¡å™¨ä¸Šå¯ç”¨ï¼Œè€Œåœ¨æ­£å¼æœåŠ¡å™¨ä¸Šä¸èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œæ‰€ä»¥å¯¼è‡´è¢«é©³å›ã€‚ å‚¬ä¿ƒåç«¯å·¥ç¨‹å¸ˆå‘ç‰ˆæœ¬ï¼Œä½¿å…¶èƒ½æ­£å¸¸æ˜¾ç¤ºï¼Œå†æ¬¡æäº¤ç”³è¯·ã€‚ è¿æ¥äº†ç¬¬ä¸‰æ¬¡é©³å›ï¼ŒåŸå› æ˜¯è¯¥åº”ç”¨ç»ä¸‹è½½ä½“éªŒï¼Œæ— æ³¨å†Œç«¯å£ï¼Œè¯·åœ¨ç‰ˆæƒè¯æ˜å¤„ä¸Šä¼ æµ‹è¯•è´¦å·å’Œå¯†ç çš„æˆªå›¾åé‡æ–°æäº¤ã€‚ å› ä¸ºå½“åˆæˆ‘ä»¬å¼€å‘çš„æ—¶å€™ä¸ºäº†æ–¹ä¾¿ç»´æŠ¤ï¼Œè¦æ±‚ç”¨æˆ·åœ¨å¾®ä¿¡ç«¯ç»‘å®šäº†æ‰‹æœºå·ç åï¼Œæ‰èƒ½åœ¨ App ä¸­ä½¿ç”¨æ‰‹æœºå·ç ç™»å½•ï¼Œè¿™æ ·å°±ä¸ä¼šåœ¨ App ç«¯ç™»å½•çš„æ—¶å€™éœ€è¦åˆ›å»ºä¸€ä¸ªæ–°çš„è´¦å·å‡ºæ¥ï¼Œè´¦å·ä¸­çš„å„ç§ä¿¡æ¯ä¹Ÿå¯ä»¥åŒæ­¥ï¼Œä½†æ˜æ˜¾ã€è…¾è®¯å¼€æ”¾å¹³å°ã€æ–¹å¹¶ä¸å…è®¸æˆ‘ä»¬è¿™æ ·åšã€‚ ä¸ºäº†é€šè¿‡è¿™ä¸ªå®¡æ ¸ï¼Œæˆ‘ä»¬åªèƒ½é‡æ–°ä¿®æ”¹ä»£ç ï¼Œä½¿ç”¨æˆ·åœ¨ä½¿ç”¨ App æ—¶ï¼Œç”¨æ‰‹æœºå·ç åˆ›å»ºä¸€ä¸ªæ–°çš„è´¦æˆ·ï¼Œä¸æ£€æµ‹å…¶æ˜¯å¦åœ¨å¾®ä¿¡ç»‘å®šã€‚ä¸è¿‡ç”±äºæˆ‘ä»¬çš„åç«¯å¤§ä½¬å¤ªå¿™éœ€æ±‚å¤ªå¤šï¼Œè¿™ä¸ªåå°éœ€æ±‚äº¤ç»™äº†ä¸€ä¸ªèœé¸¡å‰ç«¯æ¥å®Œæˆï¼Œç»“æœè¿™ä¸ªåŠŸèƒ½åšå¥½åï¼Œå…¶ä»–çš„åŠŸèƒ½éƒ½å‡ºäº† Bugã€‚ ä¸Šçº¿è¦ç´§ï¼Œæ¯•ç«Ÿæˆ‘ä»¬ä½¿ç”¨äº† WebViewï¼Œè¿™äº›åŠŸèƒ½å¯ä»¥åé¢å†è¿›è¡Œçƒ­ä¿®å¤ï¼Œè€Œä¸”ç”±äºæˆ‘ä»¬çš„ App éœ€è¦ç»“åˆç¡¬ä»¶ä½¿ç”¨ï¼Œæ‰€ä»¥ç›¸ä¿¡å®¡æ ¸çš„äººå‘˜ä¹Ÿæ²¡æœ‰æ¡ä»¶å¯ä»¥æµ‹å‡ºæˆ‘ä»¬çš„ Bugã€‚ æäº¤åï¼Œç¬¬å››æ¬¡é©³å›ï¼ŒåŸå› æ˜¯è¯¥åº”ç”¨å­˜åœ¨ç‰ˆæƒé—®é¢˜ï¼Œæä¾›è½¯ä»¶è‘—ä½œæƒè¯ä¹¦å½’å±ä¸ä¸Šä¼ è®¤è¯å¼€å‘å•†ä¸ä¸€è‡´ï¼Œè¯·æä¾›ç›¸å…³æˆæƒåé‡æ–°æäº¤ã€‚ ä¸Šé¢æåˆ°ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†æ¯å…¬å¸çš„è½¯ä»¶è‘—ä½œæƒè¯ä¹¦ï¼Œè€Œåœ¨ã€Œåº”ç”¨æä¾›æ–¹ã€ä¸€é¡¹ä¸­æˆ‘å¡«å†™çš„æ˜¯æˆ‘ä»¬å­å…¬å¸ï¼Œè¿™å°±å¯¼è‡´äº†ä¸ä¸€è‡´ï¼Œç»¼åˆè€ƒè™‘ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸€é¡¹ä¹Ÿæ”¹æˆäº†æ¯å…¬å¸ï¼Œå¹¶å†æ¬¡æäº¤ç”³è¯·ã€‚ ç¬¬äº”æ¬¡é©³å›ï¼Œè¯¥åº”ç”¨å­˜åœ¨ç‰ˆæƒé—®é¢˜ï¼Œæä¾›è½¯ä»¶è‘—ä½œæƒäººåç§°ä¸è®¤è¯å¼€å‘è€…åç§°ä¸ä¸€è‡´ï¼Œè¯·åœ¨ç‰ˆæƒè¯æ˜å¤„ä¸Šä¼ çœŸå®æœ‰æ•ˆçš„ææ–™æ‰«æä»¶åé‡æ–°æäº¤ã€‚ è¿™æ˜¯ç”±äºä¸€å¼€å§‹æˆ‘ä»¬åœ¨ç”³è¯·è¯¥å¼€å‘è€…è´¦å·çš„æ—¶å€™ï¼Œå¡«å†™çš„ä¹Ÿæ˜¯å­å…¬å¸çš„ä¿¡æ¯ï¼Œæ‰€ä»¥åŒæ ·é€ æˆäº†å†²çªï¼ŒæŠŠå¼€å‘è€…è´¦å·çš„è®¤è¯ä¿¡æ¯ä¹Ÿä¿®æ”¹æˆæ¯å…¬å¸ï¼Œå¹¶å†æ¬¡æäº¤å®¡æ ¸ã€‚ ç¬¬å…­æ¬¡é©³å›çš„åŸå› å’Œç¬¬äº”æ¬¡ç›¸åŒï¼Œä¸€å¼€å§‹æˆ‘è¿˜ä»¥ä¸ºæˆ‘ç†è§£é”™äº†ï¼Œå»åå°æŸ¥çœ‹äº†ä¸€ä¸‹æ‰å‘ç°ï¼Œå¼€å‘è€…è´¦å·çš„è®¤è¯ä¿¡æ¯ä¿®æ”¹ä¹Ÿæ˜¯éœ€è¦å®¡æ ¸çš„ï¼Œæ‰€ä»¥åœ¨å®¡æ ¸æœªæˆåŠŸä¹‹å‰ï¼Œä½¿ç”¨çš„è¿˜æ˜¯ä¹‹å‰çš„ä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯å­å…¬å¸çš„è®¤è¯ä¿¡æ¯ï¼Œå› æ­¤æ‰ä¼šå‡ºç°åŒæ ·çš„é©³å›åŸå› ã€‚ ç­‰å¾…è®¤è¯ä¿¡æ¯å®¡æ ¸æˆåŠŸåï¼Œå†æ¬¡æäº¤ App çš„ä¸Šçº¿ç”³è¯·ã€‚ ç»ˆäºï¼Œåœ¨ç¬¬ä¸ƒæ¬¡æäº¤çš„æ—¶å€™æˆåŠŸäº†ã€‚ æœ€åå°±å¯ä»¥åœ¨ã€Œç®¡ç†ä¸­å¿ƒã€ä¸­æŸ¥çœ‹ App çš„ç›¸å…³ä¿¡æ¯äº†ï¼Œæ¯”å¦‚åº”ç”¨ç­‰çº§å’Œä¸‹è½½é‡ç­‰ï¼Œä¹Ÿå¯ä»¥æ›´æ–°å®‰è£…åŒ…è¿›è¡Œç‰ˆæœ¬è¿­ä»£ï¼Œè¿˜å¯ä»¥ä¸ºåº”ç”¨æ¥å…¥å¹¿å‘ŠæœåŠ¡ç­‰ã€‚ è¿™æ—¶å€™å¯ä»¥å»ã€åº”ç”¨å®ã€æœç´¢ä¸€ä¸‹ç¡®è®¤æ˜¯å¦æˆåŠŸä¸Šçº¿ï¼Œå› ä¸ºä¸€å¼€å§‹æˆ‘æ¥æ”¶åˆ°è…¾è®¯å‘è¿‡æ¥çš„ä¸Šçº¿é‚®ä»¶æ—¶ï¼Œæˆ‘å»ã€åº”ç”¨å®ã€æœç´¢å¹¶æ²¡æœ‰ï¼Œç„¶ååœ¨ç½‘ä¸Šçœ‹äº†ä¸€ä¸‹å‘ç°æœ‰äººé‡åˆ°ç›¸åŒçš„æƒ…å†µï¼Œä»–ä»¬æ˜¯é€šè¿‡æäº¤å·¥å•ç»™è…¾è®¯æ–¹è¦æ±‚å…¶å±•ç¤ºçš„ï¼Œä¸è¿‡è¿‡äº†åå‡ åˆ†é’Ÿåæˆ‘å‡†å¤‡é‡‡å–ç›¸åŒçš„åšæ³•æ—¶ï¼Œå´å‘ç°åœ¨ã€åº”ç”¨å®ã€ä¸­å¯ä»¥æœç´¢åˆ°æˆ‘ä»¬çš„åº”ç”¨äº†ã€‚ æˆåŠŸä¸Šçº¿ï¼Œçš†å¤§æ¬¢å–œã€‚ ","link":"https://LiarrDev.github.io/post/Releasing-Apps-on-Tencent-Application-Open-Platform/"},{"title":"printf(\"%d\", printf(\"%d%d\", 1, 2));","content":"ä¹‹å‰ã€printf(&quot;%d&quot;, (1, 2), 3);ã€ä¸€æ–‡ç»™å¤§å®¶è®²è§£äº†ä¸€æ®µæœ‰è¶£ä½†æ˜¯æ²¡ä»€ä¹ˆåµç”¨çš„ä»£ç ï¼Œä»Šå¤©å†æ¥è®²ä¸€ä¸ªï¼š printf(&quot;%d&quot;, printf(&quot;%d%d&quot;, 1, 2)); è€è§„çŸ©ï¼Œå†™ä¸ª Demo è·‘ä¸€éï¼š #include &lt;stdio.h&gt; int main() { printf(&quot;%d&quot;, printf(&quot;%d%d&quot;, 1, 2)); return 0; } æ‰“å°çš„ç»“æœä¸º 122ã€‚ è¿™æ¬¡çš„ä»£ç ç›¸æ¯”ä¹‹å‰çš„è¦å¤æ‚ä¸€ä¸¢ä¸¢ï¼Œæ²¡å…³ç³»ï¼Œè·Ÿç€æˆ‘ä¸€æ­¥æ­¥æ¥è§£é‡Šã€‚ æœ€å¤–å±‚æ˜¯ printf() å‡½æ•°ï¼Œå…¶å€¼ä¸ºåé¢è¡¨è¾¾å¼çš„å€¼ï¼Œå› æ­¤éœ€è¦å…ˆè®¡ç®—åé¢çš„è¡¨è¾¾å¼ã€‚ åé¢çš„è¡¨è¾¾å¼åŒæ ·ä¹Ÿæ˜¯ä¸€ä¸ª printf() å‡½æ•°ï¼Œè¿™ä¸ªè¡¨è¾¾å¼å°±éå¸¸ç®€å•äº†ï¼Œè·Ÿæˆ‘ä»¬å¹³å¸¸ä½¿ç”¨æ— å·®ï¼Œå°±æ˜¯ 12ã€‚ æ‰€ä»¥æœ€å¤–å±‚çš„ printf() å‡½æ•°è·å–çš„ %d çš„å€¼å°±æ˜¯ 2ã€‚è¿™æ—¶å€™ä½ å¯èƒ½ä¼šæœ‰ç‚¹å„¿æ‡µï¼Œä¸ºä»€ä¹ˆç¨‹åºä¸ä¼šæŠ¥é”™å‘¢ï¼Ÿ æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ printf() æ˜¯åœ¨ C è¯­è¨€ä¸­äº§ç”Ÿæ ¼å¼åŒ–è¾“å‡ºçš„å‡½æ•°ï¼Œå®šä¹‰åœ¨ã€Œstdio.hã€å¤´æ–‡ä»¶ä¸­ï¼Œè™½ç„¶æˆ‘ä»¬å¸¸å¸¸æ˜¯ç›´æ¥å†™è¿™ä¸€è¡Œå°±å®Œäº‹äº†ï¼Œä½†å®é™…ä¸Šï¼Œprintf() æ˜¯æœ‰è¿”å›å€¼çš„ï¼Œè¿”å›å€¼çš„ç±»å‹ä¸º intï¼Œå’Œ %d å¯¹åº”ä¸Šäº†ï¼Œå› æ­¤ç¨‹åºå¯ä»¥æ­£å¸¸è¿è¡Œä¸ä¼šæŠ¥é”™ã€‚ é‚£ä¹ˆè¿™ä¸ªè¿”å›å€¼çš„å«ä¹‰æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥å†™å‡ ä¸ª Demo æ¥çœ‹çœ‹ï¼š #include &lt;stdio.h&gt; int main() { int result = printf(&quot;%s&quot;, &quot;ab&quot;); printf(&quot;%d&quot;, result); return 0; } æ‰“å°ç»“æœä¸º ab2ï¼Œå¯ä»¥çŸ¥é“ï¼Œæ‰“å°å­—ç¬¦ä¸² ab çš„è¿”å›å€¼ä¸º 2ã€‚ #include &lt;stdio.h&gt; int main() { int result = printf(&quot;%s&quot;, &quot;abc&quot;); printf(&quot;%d&quot;, result); return 0; } æ‰“å°ç»“æœä¸º abc3ï¼Œå¯ä»¥çŸ¥é“ï¼Œæ‰“å°å­—ç¬¦ä¸² abc çš„è¿”å›å€¼ä¸º 3ã€‚ æ ¹æ®è§„å¾‹ä¸éš¾å¾—å‡ºï¼Œè¯¥è¿”å›å€¼å®é™…ä¸Šå°±æ˜¯æ ¼å¼åŒ–æ•°æ®æ›¿æ¢åæ•´ä¸ªå­—ç¬¦ä¸²çš„æ€»å­—ç¬¦ä¸ªæ•°ï¼Œè¿™ä¹Ÿå°±è§£é‡Šäº†æ–‡ç« æœ€å¼€å§‹æ—¶çš„ç¨‹åºè¾“å‡ºç»“æœã€‚ æœ€åå†ç»“åˆä¸€ä¸‹ä¸Šæ¬¡çš„æ–‡ç« ï¼Œä¸‹é¢è¿™æ®µä»£ç çš„æ‰“å°ç»“æœæ˜¯ä»€ä¹ˆï¼š printf(&quot;%d&quot;, printf(&quot;%d&quot;, 1, 2)); ç»“æœæ˜¯ 11ï¼Œå› ä¸ºé‡Œå±‚çš„ printf() å‡½æ•°åªæ‰“å°äº† 1 ä¸ªå­—ç¬¦ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œåƒ \\n ä¹‹ç±»çš„è½¬ä¹‰å­—ç¬¦ä¹ŸåŒæ ·ä¼šè®¡å…¥å­—ç¬¦ä¸ªæ•°ä¸­ã€‚ ","link":"https://LiarrDev.github.io/post/printf-d-printf-d-d-1-2/"},{"title":"åŸç”Ÿ Android å’Œ React Native äº¤äº’","content":"åœ¨ä¹‹å‰çš„æ–‡ç« ã€ã€ŒZXingã€å®ç° Android æ‰«æäºŒç»´ç ã€ä¸­æåˆ°ï¼Œç”±äºæˆ‘åœ¨ React Native ä¸­æ‰¾ä¸åˆ°å¯ç”¨çš„æ‰«æäºŒç»´ç çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œæ‰€ä»¥è¢«è¿«ä½¿ç”¨ Android åŸç”Ÿæ¥å®ç°è¯¥åŠŸèƒ½ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°ä¸€ä¸ªæ–°çš„é—®é¢˜ï¼Œé€šè¿‡åŸç”Ÿ Android æ‰«ç å¾—åˆ°çš„æ•°æ®ï¼Œå¦‚ä½•ä¼ ç»™ React Native è¿›è¡Œå¤„ç†å‘¢ï¼Ÿ å…¶å®åŸç”Ÿ Android æ‰«ç åï¼Œç»§ç»­ç”±åŸç”Ÿ Android è¿›è¡Œå¤„ç†ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œè¿™æ ·å°±é¿å…äº†å†æ¬¡æŠŠæ•°æ®å›ä¼ çš„æ­¥éª¤ï¼Œä½†æ˜¯æ—¢ç„¶æˆ‘ä½¿ç”¨çš„æ˜¯ React Nativeï¼Œé‚£ä¹ˆçœ‹é‡çš„å°±æ˜¯å…¶è·¨å¹³å°çš„ç‰¹æ€§ï¼Œå³æ—¢å¯ä»¥åœ¨ Android ç³»ç»Ÿä¸­è¿è¡Œï¼Œä¹Ÿå¯ä»¥åœ¨ iOS ç³»ç»Ÿä¸­è¿è¡Œã€‚ ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘åœ¨ Android ä¸­è¿›è¡Œæ‰«ç åç»§ç»­ç”±åŸç”Ÿ Android åšé€»è¾‘å¤„ç†ï¼Œé‚£æˆ‘åŒæ ·éœ€è¦åœ¨ iOS å¼€å‘çš„æ—¶å€™åšä¸€å¥—ç±»ä¼¼çš„é€»è¾‘å¤„ç†ã€‚è¿™æ— ç–‘æ˜¯åŠ å¤§æ—¶é—´æˆæœ¬æ¥åšç›¸åŒçš„äº‹æƒ…ï¼Œä¸ä»£ç å¤ç”¨æ€§ç›¸æ‚–äº†ã€‚ æ‰€ä»¥ï¼Œè¿™å°±æ¶‰åŠåˆ°äº†åŸç”Ÿ Android å’Œ React Native äº¤äº’çš„é—®é¢˜ï¼ˆå¦‚æœä»¥åæˆ‘å°è¯•åš iOS å¼€å‘çš„è¯ä¼šè€ƒè™‘åŸç”Ÿ iOS å’Œ React Native çš„äº¤äº’ï¼‰ã€‚ è¯ä¸å¤šè¯´ï¼Œæ¥çœ‹çœ‹å¦‚ä½•å®ç°ã€‚ é¦–å…ˆåœ¨é¡¹ç›®ä¸­åˆ›å»º MyIntentModule ç±»ï¼Œå¹¶ç»§æ‰¿ ReactContextBaseJavaModuleï¼Œè¿™æ˜¯åŸç”Ÿ Activity å’Œ React çš„äº¤äº’æ¨¡å—ã€‚ /** * åŸç”Ÿ Activity ä¸ React äº¤äº’æ¨¡å— */ public class MyIntentModule extends ReactContextBaseJavaModule { public MyIntentModule(ReactApplicationContext reactContext) { super(reactContext); } @Override public String getName() { return &quot;IntentMoudle&quot;; } @ReactMethod public void startActivityFromJS(String name, String params) { try { Activity currentActivity = getCurrentActivity(); if (null != currentActivity) { Class toActivity = Class.forName(name); Intent intent = new Intent(currentActivity, toActivity); intent.putExtra(&quot;params&quot;, params); currentActivity.startActivity(intent); } } catch (Exception e) { throw new JSApplicationIllegalArgumentException(&quot;Could not open Activity: &quot; + e.getMessage()); } } @ReactMethod public void dataToJS(Callback successBack, Callback errorBack) { try { Activity currentActivity = getCurrentActivity(); String result = currentActivity.getIntent().getStringExtra(&quot;data&quot;); if (TextUtils.isEmpty(result)) { result = &quot;æ²¡æœ‰æ•°æ®&quot;; } successBack.invoke(result); } catch (Exception e) { errorBack.invoke(e.getMessage()); } } @ReactMethod public void startActivityForResult(String activityName, int requestCode, Callback successCallback, Callback erroCallback) { try { Activity currentActivity = getCurrentActivity(); if (null != currentActivity) { Class aimActivity = Class.forName(activityName); Intent intent = new Intent(currentActivity, aimActivity); currentActivity.startActivityForResult(intent, requestCode); String result = (String) myBlockingQueue.take(); successCallback.invoke(result); } } catch (Exception e) { erroCallback.invoke(e.getMessage()); throw new JSApplicationIllegalArgumentException(&quot;Could not open the Activity: &quot; + e.getMessage()); } } } è¿™é‡Œéœ€è¦è®°ä½ getName() æ–¹æ³•ä¸­çš„å‘½ååç§°ï¼Œåœ¨ React Native ä¸­è°ƒç”¨éœ€è¦ç”¨åˆ°ï¼Œè¿˜è¦è®°å¾—åœ¨ç›¸åº”çš„æ–¹æ³•ä¸­æ·»åŠ  @ReactMethod çš„æ³¨è§£ï¼Œå¦åˆ™è¯¥æ–¹æ³•å°†ä¸è¢«æ·»åŠ åˆ° React Native ä¸­ã€‚ ç„¶ååœ¨é¡¹ç›®ä¸­åˆ›å»º MyReactPackage ç±»ï¼Œå®ç° ReactPackage æ¥å£æš´éœ²ç»™ React Native è°ƒç”¨ï¼Œåœ¨ createNativeModules() é‡Œæ³¨å†Œä¸Šä¸€æ­¥æ·»åŠ çš„æ¨¡å—ï¼š /** * æ³¨å†Œæ¨¡å— * å®ç° ReactPackage æ¥å£æš´éœ²ç»™ React Native è°ƒç”¨ */ public class MyReactPackage implements ReactPackage { // æ³¨å†Œ MyIntentModule æ·»åŠ çš„äº¤äº’æ¨¡å— @Override public List&lt;NativeModule&gt; createNativeModules(ReactApplicationContext reactContext) { return Arrays.&lt;NativeModule&gt;asList(new MyIntentModule(reactContext)); } @Override public List&lt;ViewManager&gt; createViewManagers(ReactApplicationContext reactContext) { return Collections.emptyList(); } } å†åœ¨é¡¹ç›®çš„ MainApplication çš„ getPackages() æ–¹æ³•ä¸­æ³¨å†Œ MyReactPackage æ¨¡å—ï¼š @Override protected List&lt;ReactPackage&gt; getPackages() { return Arrays.&lt;ReactPackage&gt;asList( new MainReactPackage(), new MyReactPackage() // æ³¨å†Œ MyReactPackage æ¨¡å— ); } è¿™æ ·åœ¨ Android ç«¯çš„é…ç½®å°±åŸºæœ¬å®Œæˆäº†ï¼Œä½ å¯èƒ½ä¼šé—® Activity å‘¢ï¼Ÿ å…¶å®ä¸Šæ–‡æåˆ°æˆ‘æ˜¯ç”¨åœ¨äºŒç»´ç åŠŸèƒ½ä¸Šï¼Œæ‰€ä»¥å°±ç”¨ã€ZXingã€ä¸­çš„ CaptureActivity æ¥ä½œä¸ºç›®æ ‡ Activityã€‚ æ¥ä¸‹æ¥å°±æ˜¯åœ¨ React Native ä¸­çš„è°ƒç”¨äº†ï¼š export default class FootBar extends Component { _onPressScanBTN() { NativeModules.IntentMoudle.startActivityForResult(&quot;com.google.zxing.activity.CaptureActivity&quot;, 100, (successMsg) =&gt; {alert(successMsg)}, (erroMsg) =&gt; {alert(erroMsg)} ); } render() { return ( &lt;View style={styles.container}&gt; &lt;ImageBackground style={styles.footbarbg} source={require('./images/footbar/footbar_background.png')}&gt; ... &lt;TouchableOpacity onPress={this._onPressScanBTN}&gt; &lt;Image style={styles.scanbtn} source={require('./images/footbar/scan_btn.png')} /&gt; &lt;/TouchableOpacity&gt; ... &lt;/ImageBackground&gt; &lt;/View&gt; ); } } æˆ‘åœ¨è¿™é‡Œå°±å°†æ‰«æçš„ç»“æœè¿”å›å¹¶å¼¹çª—æé†’ï¼Œå½“ç„¶å®é™…ä¸Šæˆ‘ä»¬æ˜¯å°†å›ä¼ çš„æ•°æ®ä½œå…¶ä»–æ“ä½œçš„ï¼Œè¿™é‡Œåªæ˜¯ä½œç®€å•æ¼”ç¤ºã€‚ æ•ˆæœå¦‚ä¸‹ï¼š è¯¥ Demo å·²ä¸Šä¼ è‡³ Githubï¼Œè¯¦æƒ…å¯ğŸ‘‰æˆ³æ­¤å¤„ğŸ‘ˆæŸ¥çœ‹ã€‚ ","link":"https://LiarrDev.github.io/post/Communicate-with-React-Native-from-Android/"},{"title":"ã€ZXingã€å®ç° Android æ‰«æäºŒç»´ç ","content":"ä¹‹å‰åœ¨ã€React Native Swiperã€ä¸€æ–‡ä¸­æ•´ç†äº†æˆ‘åœ¨ React Native ä¸­ä½¿ç”¨çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ Swiperï¼Œè€Œå½“æ—¶é¡¹ç›®ä¸­è¿˜éœ€è¦é›†æˆæ‰«æäºŒç»´ç çš„åŠŸèƒ½ï¼Œäºæ˜¯æˆ‘å°±æŸ¥æ‰¾äº†ä¸€äº›æ‰«æäºŒç»´ç çš„ç¬¬ä¸‰æ–¹ç»„ä»¶ï¼Œä½†æ˜¯è£…ä¸Šä¹‹åå´å‘ç°æ²¡æœ‰ä¸€ä¸ªèƒ½å¤Ÿé¡ºåˆ©è°ƒç”¨ï¼Œæ— å¥ˆä¹‹ä¸‹å°±åªèƒ½é€‰æ‹©åœ¨åŸç”Ÿä¸Šå®ç°è¿™ä¸ªåŠŸèƒ½ã€‚ ç”±äºè¿™ä¸ª Demo ç›®å‰åªæœ‰ Android ç‰ˆæœ¬ï¼Œæ‰€ä»¥ä¹Ÿåªæ˜¯é›†æˆäº†åœ¨ Android ç¯å¢ƒä¸‹çš„æ‰«ç åŠŸèƒ½ã€‚ è€Œåœ¨ Android ç‰ˆæœ¬ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„æ˜¯ã€ZXingã€è¿™ä¸ªç¬¬ä¸‰æ–¹åº“ï¼ŒåŒ…æ‹¬åœ¨åæ¥ä¸Šçº¿çš„å…¬å¸é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨çš„ä¹Ÿæ˜¯è¿™ä¸ªåº“ï¼Œä»Šå¤©å°±æ¥æ•´ç†ä¸€ä¸‹ã€ZXingã€çš„ä½¿ç”¨ç¬”è®°ã€‚ ã€ZXingã€æˆ‘ç¬¬ä¸€æ¬¡å¬è¯´çš„æ—¶å€™è¿˜ä»¥ä¸ºæ˜¯ä¸€ä¸ªä¸­å›½äººå¼€å‘çš„é¡¹ç›®ï¼Œåæ¥æ‰çŸ¥é“å®ƒæ˜¯ã€ŒZebra Crossingã€çš„ç®€å†™ï¼Œå®ƒæ˜¯ä¸€ä¸ªç”¨ Java å®ç°çš„å¼€æºçš„å¤šæ ¼å¼ 1D/2D æ¡å½¢ç å›¾åƒå¤„ç†åº“ã€‚ æ”¯æŒçš„æ ¼å¼å¦‚ä¸‹ï¼š 1D product 1D industrial 2D UPC-A Code 39 QR Code UPC-E Code 93 Data Matrix EAN-8 Code 128 Aztec (beta) EAN-13 Codabar PDF 417 (beta) ITF MaxiCode RSS-14 RSS-Expanded è™½ç„¶å¾ˆå¤šæ ¼å¼æˆ‘éƒ½æ²¡å¬è¿‡ï¼Œä½†æˆ‘åªéœ€è¦çŸ¥é“å®ƒæ”¯æŒ QR Code å°±å¯ä»¥äº†ï¼Œæ¯•ç«Ÿ QR Code åœ¨å›½å†…çš„åº”ç”¨æ˜¯å‘æŒ¥åˆ°äº†æè‡´ã€‚ ç”±äºã€ZXingã€çš„å¯å®šåˆ¶æ€§é«˜ï¼Œæ‰€ä»¥ä¹Ÿè¡ç”Ÿå‡ºäº†è®¸å¤šåŸºäºã€ZXingã€çš„ç¬¬ä¸‰æ–¹å¼€æºé¡¹ç›®ï¼Œè€Œä¸”åœ¨å›½å†…çš„æŠ€æœ¯è®ºå›ä¹Ÿæœ‰å¾ˆå¤šæ°‘é—´çš„å®šåˆ¶ç‰ˆæœ¬ã€‚ è¯ä¸å¤šè¯´ï¼Œé©¬ä¸Šæ¥çœ‹çœ‹ã€ZXingã€çš„ä½¿ç”¨æ–¹æ³•ã€‚ é¦–å…ˆå¾—æ·»åŠ ä¾èµ–ï¼š dependencies { implementation 'com.google.zxing:core:(insert latest version)' } å…¶å®ç°åœ¨å·²ç»æœ‰å¤§é‡çš„å¼€å‘è€…åœ¨ã€ZXingã€ä¸Šè¿›è¡Œäº†é›†æˆã€ä¼˜åŒ–æˆ–è€…ç²¾ç®€ï¼Œä½¿å¾—æˆ‘ä»¬è¿™äº›å°ç™½ç”¨æˆ·èƒ½å¤Ÿåœ¨æœªææ‡‚åŸç†çš„æƒ…å†µä¸‹è½»æ˜“çš„æ¥å…¥åˆ°é¡¹ç›®ä¸­ã€‚ å› ä¸ºã€ZXingã€çš„é¡¹ç›®éå¸¸åºå¤§ï¼Œè€Œæˆ‘åœ¨é¡¹ç›®ä¸­ä»…éœ€ç”¨åˆ°æ‰«æäºŒç»´ç çš„åŠŸèƒ½ï¼Œå…¶ä»–è®¸å¤šåŠŸèƒ½æˆ‘å¹¶ä¸éœ€è¦ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯ä½¿ç”¨ç²¾ç®€è¿‡çš„ã€ZXingã€æ¯”è¾ƒåˆé€‚ã€‚ æ‰¾äº†ä¸€åœˆï¼Œå‘ç°å›½å†…å¼€å‘è€… ahuyangdong ä¿®æ”¹è¿‡å¹¶åšçš„ Demo ç®€å•æ˜“ç”¨ï¼Œæ¯”è¾ƒé€‚åˆæˆ‘ï¼Œäºæ˜¯å°±é‡‡ç”¨äº†ä»–çš„æ–¹æ¡ˆï¼Œ\bé¡¹ç›®ã€QrCodeDemo4ã€ã€‚ å¦å¤–ï¼Œå›½å†…å¼€å‘è€… HappyMiao çš„ã€QrCodeScanã€ä¹Ÿæœ‰ç›¸ä¼¼æ€§ã€‚ ã€QrCodeDemo4ã€æœ‰æŒç»­æ›´æ–°ï¼Œè€Œæˆ‘ä½¿ç”¨çš„æ˜¯è¾ƒè€ä¸€äº›çš„ç‰ˆæœ¬ã€‚ å…ˆæŠŠã€QrCodeDemo4ã€ä¸­ com.google.zxing æ•´ä¸ªåŒ… Copy åˆ°è‡ªå·±çš„é¡¹ç›®ï¼ŒåŒ…å†…å…±æœ‰ 5 ä¸ªç›®å½•ï¼š å†æŠŠã€QrCodeDemo4ã€çš„å¸ƒå±€æ–‡ä»¶ã€Œactivity_scanner.xmlã€å’Œã€Œtoolbar_scanner.xmlã€æ‹‰åˆ°è‡ªå·±çš„é¡¹ç›®ä¸­ï¼Œè¿™é‡Œå®ç°çš„æ˜¯æ‰«æäºŒç»´ç çš„é¡µé¢ï¼Œæˆ‘ä¸ªäººè§‰å¾—æ²¡æœ‰å¿…è¦åˆ†å¼€ï¼Œäºæ˜¯å°±æ•´åˆåˆ°äº†ä¸€èµ·ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot;&gt; &lt;ImageView android:id=&quot;@+id/drop_scanner&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;?attr/actionBarSize&quot; android:background=&quot;@color/colorPrimaryDark&quot; android:src=&quot;@drawable/ic_drop&quot; /&gt; &lt;FrameLayout android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot;&gt; &lt;SurfaceView android:id=&quot;@+id/scanner_view&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:layout_gravity=&quot;center&quot; /&gt; &lt;com.google.zxing.view.ViewfinderView android:id=&quot;@+id/viewfinder_content&quot; android:layout_width=&quot;wrap_content&quot; android:layout_height=&quot;wrap_content&quot; app:corner_color=&quot;@color/corner_color&quot; app:frame_color=&quot;@color/viewfinder_frame&quot; app:label_text=&quot;æ‰«æäºŒç»´ç &quot; app:label_text_color=&quot;@color/colorAccent&quot; app:laser_color=&quot;@color/laser_color&quot; app:mask_color=&quot;@color/viewfinder_mask&quot; app:result_color=&quot;@color/result_view&quot; app:result_point_color=&quot;@color/result_point_color&quot;/&gt; &lt;/FrameLayout&gt; &lt;/LinearLayout&gt; è¿™é‡Œæˆ‘åšäº†å°‘è®¸ä¿®æ”¹ï¼Œå› ä¸ºæˆ‘å·²ç»åœ¨è¶…è¿‡ 3 ä¸ªé¡¹ç›®ä¸­é›†æˆè¿‡ã€ZXingã€ï¼Œæ‰€ä»¥åœ¨ä¸åŒé¡¹ç›®ä¸­æˆ‘çš„ä¿®æ”¹æ–¹å¼éƒ½ä¸å°½ç›¸åŒï¼Œæ¯”å¦‚åœ¨è¿™é‡Œæˆ‘ç›´æ¥ä½¿ç”¨äº† ImageView æ¥ä»£æ›¿ Toolbarï¼Œè€Œåœ¨æœ‰çš„é¡¹ç›®ä¸­æˆ‘åˆ™æ˜¯ç›´æ¥ä½¿ç”¨ Toolbarã€‚ ç„¶åæŠŠã€Œrawã€ç›®å½•ä¸‹çš„ã€Œbeep.oggã€ä¹Ÿå¤åˆ¶åˆ°é¡¹ç›®ï¼š è¿™ä¸ªå…¶å®æ˜¯éŸ³é¢‘æ–‡ä»¶ï¼Œæ˜¯æ‰«ææˆåŠŸæ—¶çš„æç¤ºéŸ³ã€‚ æ¥ç€å†æŠŠã€Œvaluesã€ç›®å½•ä¸‹çš„ã€Œattrs.xmlã€ã€ã€Œids.xmlã€å’Œã€Œcolors.xmlã€è¿™ä¸‰ä¸ªæ–‡ä»¶è¿›è¡Œåˆå¹¶æˆ–æ‹·è´ï¼Œå³æ²¡æœ‰è¯¥æ–‡ä»¶åˆ™ç›´æ¥ Copy åˆ°é¡¹ç›®ï¼Œæœ‰åˆ™è·ŸåŸæ–‡ä»¶è¿›è¡Œåˆå¹¶ã€‚ æˆ‘è¿™é‡Œã€Œattrs.xmlã€å’Œã€Œids.xmlã€éƒ½æ²¡æœ‰ï¼Œæ‰€ä»¥ç›´æ¥å¤åˆ¶ï¼Œã€Œcolors.xmlã€é»˜è®¤å°±æœ‰äº†ï¼Œåˆ™åœ¨åé¢è¿½åŠ ç›¸åº”çš„å†…å®¹ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;resources&gt; &lt;color name=&quot;colorPrimary&quot;&gt;#008577&lt;/color&gt; &lt;color name=&quot;colorPrimaryDark&quot;&gt;#d9f3ff&lt;/color&gt; &lt;color name=&quot;colorAccent&quot;&gt;#00A0E9&lt;/color&gt; &lt;color name=&quot;waveBackColor&quot;&gt;#66C7F3&lt;/color&gt; &lt;!-- QRCode scanner color begin --&gt; &lt;color name=&quot;viewfinder_mask&quot;&gt;#B0000000&lt;/color&gt; &lt;color name=&quot;result_view&quot;&gt;#B0000000&lt;/color&gt; &lt;color name=&quot;viewfinder_frame&quot;&gt;#90FFFFFF&lt;/color&gt; &lt;color name=&quot;result_point_color&quot;&gt;#C0FFFF00&lt;/color&gt; &lt;color name=&quot;laser_color&quot;&gt;#00A0E9&lt;/color&gt; &lt;color name=&quot;corner_color&quot;&gt;#00A0E9&lt;/color&gt; &lt;!-- QRCode scanner color end --&gt; &lt;/resources&gt; å…¶å®å¯¹åº”çš„ç›®å½•ä¹Ÿæ˜¯å¯ä»¥ä»ã€ZXingã€å®˜æ–¹å¼€æºé¡¹ç›®ä¸­æ‰¾åˆ°çš„ï¼Œæ ¹æ®ä¸ªäººå–œå¥½ä¸‹è½½å³å¯ã€‚ ç°åœ¨æ‰“å¼€ com.google.zxing åŒ…å†…çš„æ–‡ä»¶å¦‚æ— æ„å¤–åº”è¯¥æ˜¯ä¼šæœ‰æŠ¥é”™çš„ï¼Œåº”è¯¥æ˜¯ R æ–‡ä»¶å¼•ç”¨æœ‰è¯¯ï¼Œä¿®æ”¹ä¸ºæœ¬é¡¹ç›®çš„ R å³å¯ï¼Œç›¸åº”æ–‡ä»¶å‚è€ƒå¦‚ä¸‹ï¼š com.google.zxing.activity.CaptureActivity com.google.zxing.decoding.CaptureActivityHandler com.google.zxing.decoding.DecodeHandler com.google.zxing.view.ViewfinderView é›†æˆéƒ¨åˆ†ç»ˆäºå®Œæˆäº†ï¼Œæ¥ä¸‹æ¥å°±è¯¥ç¼–ç å®ç°åŠŸèƒ½äº†ã€‚ åœ¨ã€ŒAndroidManifest.xmlã€ä¸­æ·»åŠ ç›¸åº”çš„æƒé™ï¼š &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt; &lt;!-- ç½‘ç»œæƒé™ --&gt; &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt; &lt;!-- éœ‡åŠ¨æƒé™ --&gt; &lt;uses-permission android:name=&quot;android.permission.CAMERA&quot; /&gt; &lt;!-- æ‘„åƒå¤´æƒé™ --&gt; &lt;uses-feature android:name=&quot;android.hardware.camera.autofocus&quot; /&gt; &lt;!-- è‡ªåŠ¨èšç„¦æƒ --&gt; å¹¶æ³¨å†Œ CaptureActivityï¼Œè¯¥ Activity å°±æ˜¯æ‰«æäºŒç»´ç é¡µé¢ã€‚ &lt;application ... &gt; ... &lt;activity android:name=&quot;com.google.zxing.activity.CaptureActivity&quot; /&gt; &lt;/application&gt; éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œé«˜ç‰ˆæœ¬çš„ Android ä¸­éœ€è¦åŠ¨æ€ç”³è¯· Camera æƒé™ï¼Œè°ƒç”¨æºç å¦‚ä¸‹ï¼š public class MainActivity extends AppCompatActivity { final static int REQ_PERM_CAMERA = 1; final static int REQ_QR_CODE = 2; @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_main); Button scanButton = (Button) findViewById(R.id.scan_btn); scanButton.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View v) { startScanQrCode(); } }); } /** * å¼€å§‹æ‰«æäºŒç»´ç  */ void startScanQrCode() { if (ContextCompat.checkSelfPermission(this, Manifest.permission.CAMERA) != PackageManager.PERMISSION_GRANTED) { // ç”³è¯·æƒé™ ActivityCompat.requestPermissions(MainActivity.this, new String[] {Manifest.permission.CAMERA}, REQ_PERM_CAMERA); return; } // äºŒç»´ç æ‰«æ Intent intent = new Intent(MainActivity.this, CaptureActivity.class); startActivityForResult(intent, REQ_QR_CODE); overridePendingTransition(R.anim.activity_open, R.anim.activity_stay); } /** * åŠ¨æ€ç”³è¯·æƒé™ * @param requestCode * @param permissions * @param grantResults */ @Override public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) { super.onRequestPermissionsResult(requestCode, permissions, grantResults); switch (requestCode) { case REQ_PERM_CAMERA: // æ‘„åƒå¤´æƒé™ç”³è¯· if (grantResults.length &gt; 0 &amp;&amp; grantResults[0] == PackageManager.PERMISSION_GRANTED) { startScanQrCode(); } else { // æˆæƒè¢«ç¦æ­¢ Toast.makeText(MainActivity.this, &quot;è¯·è‡³æƒé™ä¸­å¿ƒæ‰“å¼€æœ¬åº”ç”¨çš„ç›¸æœºè®¿é—®æƒé™&quot;, Toast.LENGTH_LONG).show(); } break; default: } } /** * æ‰«ç ç»“æœå›è°ƒ * @param requestCode * @param resultCode * @param data */ @Override protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) { super.onActivityResult(requestCode, resultCode, data); // æ‰«æç»“æœå›è°ƒ if (requestCode == REQ_QR_CODE &amp;&amp; resultCode == 161) { Bundle bundle = data.getExtras(); String scanResult = bundle.getString(INTENT_EXTRA_KEY_QR_SCAN); // scanResult å°±æ˜¯æ‰«æäºŒç»´ç å¾—åˆ°çš„å­—ç¬¦ä¸²ï¼Œå†æ¬¡å¯ä»¥æ ¹æ®è‡ªå·±çš„é€»è¾‘ç¼–å†™ä»£ç  } } } è¿™é‡Œæœ‰ä¸ªå°é—®é¢˜ï¼Œåœ¨å›è°ƒçš„è¿™æ®µä»£ç ä¸­ï¼š @Override protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) { super.onActivityResult(requestCode, resultCode, data); // æ‰«æç»“æœå›è°ƒ if (requestCode == REQ_QR_CODE &amp;&amp; resultCode == 161) { ... } } å¾ˆå¤šæŠ€æœ¯åšå®¢ä¸­ä½¿ç”¨çš„æ˜¯ resultCode==RESULT_OKï¼Œå…¶ä¸­ RESULT_OK çš„å€¼æ˜¯ -1ï¼Œä½†æ˜¯æˆ‘å‘ç°åœ¨æˆ‘ç¬¬ä¸€ä¸ªé›†æˆçš„é¡¹ç›®ï¼ˆå°±æ˜¯ç”¨ React Native å†™çš„ Demoï¼‰ä¸­å‡ºç°äº†é—®é¢˜ï¼Œä¿®æ”¹åå‘ç°ä¿®æ”¹ä¸º resultCode==161 åè¡Œå¾—é€šï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“ä¸ºä»€ä¹ˆï¼Œæ‰€ä»¥åœ¨åæœŸæˆ‘æ‰€æœ‰çš„é¡¹ç›®ä¸­æˆ‘éƒ½å°†å…¶å†™ä¸º 161ï¼Œä¸çŸ¥é“æ˜¯å› ä¸ºæˆ‘é¡¹ç›®çš„ç‰¹æ®Šæ€§è¿˜æ˜¯ä»€ä¹ˆåŸå› ï¼Œå¹¶æ²¡æœ‰æ·±ç©¶ã€‚ æ”¾ä¸€ä¸‹å½“åˆ React Native å†™çš„ Demo é›†æˆã€ZXingã€åè¿è¡Œæ‰«æäºŒç»´ç çš„åŠŸèƒ½å§ï¼š æˆ‘å°è¯•å»çœ‹ã€ZXingã€çš„æºç ï¼Œæ¢ç´¢ä¸€ä¸‹åŸç†ï¼Œä½†å‘ç°å¤ªé«˜æ·±äº†ï¼Œå¾ˆéš¾çœ‹æ‡‚ï¼Œè¿˜æ˜¯ç­‰å“ªå¤©æŠ€æœ¯æå‡äº†å†æ¥ç ”ç©¶å§ã€‚ å¤§æ¦‚è¯´ä¸€ä¸‹å‡ ä¸ªä¸»è¦ç±»çš„åŠŸèƒ½ï¼š CaptureActivity æ˜¯æ‰«æç•Œé¢ï¼Œä¹Ÿæ˜¯å®˜æ–¹ Demo çš„ä¸»ç•Œé¢ã€‚ CaptureActivityHandler æ˜¯è¾…åŠ©æ‰«æç•Œé¢ï¼Œè¿›è¡Œä¸€äº›é€»è¾‘çš„å¤„ç†å’Œæ¶ˆæ¯çš„è½¬å‘ã€‚ CameraManager å’Œ Camera æ˜¯ç›¸æœºæœ‰å…³çš„éƒ¨åˆ†ï¼Œå¦‚é¢„è§ˆå’Œè‡ªåŠ¨èšç„¦ç­‰ã€‚ DecodeThread å’Œ DecodeHandler æ˜¯è·Ÿè§£ç æœ‰å…³çš„ç±»ï¼ŒåŒ…æ‹¬çº¿ç¨‹å’Œæ¶ˆæ¯å¤„ç†ã€‚ BarcodeFormat å’Œ DecodeHintType å†…æœ‰æ”¯æŒçš„ä¸€äº›ç±»å‹ã€æ ¼å¼å’Œé…ç½®ç­‰ã€‚å¦‚äºŒç»´ç ã€å„ç§æ¡å½¢ç å’Œå­—ç¬¦é›†ã€‚ å…¶ä»–å°±ä¸ä¸€ä¸€è¯´æ˜äº†ï¼Œçœ‹ä¸€ä¸‹æ‰«ç æµç¨‹ï¼š ","link":"https://LiarrDev.github.io/post/Android-QR-Code-Scanning-with-ZXing/"},{"title":"printf(\"%d\", (1, 2), 3);","content":"ä»Šå¤©å‘ç°äº†ä¸€æ®µæœ‰è¶£çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š printf(&quot;%d&quot;, (1, 2), 3); å¥½ä¹…æ²¡ç¢° C è¯­è¨€äº†ï¼Œçœ‹åˆ°è¿™æ®µä»£ç æœ‰ä¸€ç§ç†Ÿæ‚‰è€Œåˆé™Œç”Ÿçš„æ„Ÿè§‰ã€‚ é‚£ä¹ˆç»“æœæ˜¯å¤šå°‘å‘¢ï¼Ÿ å†™ä¸ª Demo è·‘ä¸€ä¸‹å°±çŸ¥é“äº†å‘—ï¼š #include &lt;stdio.h&gt; int main () { printf(&quot;%d&quot;, (1, 2), 3); return 0; } ç¼–è¯‘è¿è¡Œï¼Œç»“æœä¸º 2ã€‚ ä½†æ˜¯ä¸ºä»€ä¹ˆå‘¢ï¼Ÿ å…ˆæŠŠè¿™ä¸ªè¡¨è¾¾å¼ç®€åŒ–ä¸€ä¸‹ï¼š printf(&quot;%d&quot;, 2, 3); ç¼–è¯‘è¿è¡Œä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œå€¼åŒæ ·ä¸º 2ã€‚ è¿™æ ·å°±å¯ä»¥çŸ¥é“ (1,2) çš„å€¼å°±æ˜¯ 2ï¼Œé‚£ä¹ˆ 3 å‘¢ï¼Ÿ å…¶å®ä½¿ç”¨ %d æ¥åŒ¹é…çš„æ—¶å€™ï¼Œä¼šæ ¹æ®ä¸ªæ•°æ¥è¿›è¡ŒåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯è¯´å½“ %d åªæœ‰ä¸€ä¸ªçš„æ—¶å€™ï¼Œå°±åŒ¹é…ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œæ‰€ä»¥è¿™é‡Œå°±åŒ¹é…äº† 2ã€‚ å½“æœ‰å¤šä¸ª %d æ—¶ï¼Œå°±ç»§ç»­åŒ¹é…åé¢çš„è¡¨è¾¾å¼ï¼Œè¿™æ ·çš„å†™æ³•ä¹Ÿæ›´ä¸ºç†Ÿæ‚‰ï¼š printf(&quot;%d%d&quot;, 2, 3); ç»“æœä¸º 23ã€‚ è¿™ä¸ªé—®é¢˜è§£å†³äº†ï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹è¡¨è¾¾å¼ (1,2) ä¸ºä»€ä¹ˆç­‰äº 2ã€‚ æ ¹æ® C è¯­è¨€è¯­æ³•ï¼Œ, ä¸ºè¯­å¥åˆ†éš”ç¬¦ï¼Œç¨‹åºå…ˆåæ‰§è¡Œä¸¤æ¡è¯­å¥ï¼Œå› æ­¤è¡¨è¾¾å¼ (1,2) çš„å€¼æ˜¯æœ€æœ«å°¾çš„è¡¨è¾¾å¼ 2 çš„å€¼ï¼Œç­‰äº 2ã€‚ è¿™å±äºèµ‹å€¼è¡¨è¾¾å¼ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹ä¸€ä¸ªç›¸ä¼¼çš„ä»£ç ï¼š int x = ((1, 2), 3); x çš„å€¼ä¸º 3ï¼Œå› ä¸ºæŒ‰ç…§è¯­å¥æ‰§è¡Œé¡ºåº 3 ä¸ºæœ€åæ‰§è¡Œã€‚ åŒç†å³å¯çŸ¥é“ (1,2) çš„å€¼å°±æ˜¯ 2ã€‚ ","link":"https://LiarrDev.github.io/post/printf-d-1-2-3/"},{"title":"Android M ä» Service ä¸­å¯åŠ¨ Activity","content":"æœ€è¿‘åœ¨é¡¹ç›®ä¸­é‡åˆ°äº†ä¸€ä¸ªç‰ˆæœ¬é€‚é…é—®é¢˜ï¼Œç”±äºä¹‹å‰æµ‹è¯•çš„æ—¶å€™ä¸€ç›´åœ¨æˆ‘è‡ªå·±çš„æ‰‹æœºä¸Šæµ‹è¯•çš„ï¼Œæˆ‘æ‰‹æœºçš„ Android ç‰ˆæœ¬æ˜¯ 7.1.2ï¼Œæµ‹è¯•æ˜¯å®Œå…¨æ²¡æœ‰é—®é¢˜çš„ï¼Œç»“æœæœ‰å¤©å€Ÿäº†åŒäº‹çš„ Lenovo X3c50 è¿‡æ¥ä¸€æµ‹ï¼Œå®Œäº†ï¼Œå‡º Bug äº†ã€‚ Lenovo X3c50 çš„ Android ç‰ˆæœ¬æ˜¯ 6.0.1ï¼ŒAPI 23ï¼Œå‡ºç° Bug çš„å…·ä½“ä½“ç°ä¸º App ä¸èƒ½ä» Service ä¸­å¯åŠ¨ Activityï¼Œä¸ºäº†ç¡®å®šæ˜¯å¦ä¸º Android M ä»¥ä¸‹ç‰ˆæœ¬çš„é—®é¢˜ï¼Œæˆ‘ç‰¹æ„æ‰¾æ¥äº†å¦ä¸€å° Android L çš„æ‰‹æœºï¼Œå‘ç°å‡ºç°åŒæ ·çš„æƒ…å†µã€‚ ç”±äºé¡¹ç›®ä¸­æœ‰ä½¿ç”¨ WebViewï¼Œå†…æœ‰å¤§é‡çš„ç½‘é¡µï¼Œè€Œç½‘é¡µä½¿ç”¨çš„ JQuery åœ¨ Android L åŠä»¥ä¸‹ç‰ˆæœ¬éƒ½éƒ½å‡ºç°äº†ä¸€äº›å¼‚å¸¸ï¼Œæ‰€ä»¥æˆ‘éœ€è¦è§£å†³ä¸Šé¢æåˆ°çš„ Bugï¼Œä½¿å…¶å…¼å®¹è‡³ Android Mã€‚ åœ¨ Android N åŠä»¥ä¸Šç‰ˆæœ¬ä¸­ï¼Œä» Service ä¸­å¯åŠ¨ Activity çš„æ–¹å¼å¯ä»¥ä¸ä» Activity ä¸­å¯åŠ¨ Activity çš„æ–¹å¼ç±»ä¼¼ï¼š Intent intent = new Intent(getApplicationContext(), NewActivity.class); startActivity(intent); ä½†æ˜¯åœ¨ Android M ä¸­è¿™ç§æ–¹æ³•å¹¶ä¸å‡‘æ•ˆï¼Œäºæ˜¯å¯»æ±‚å…¶ä»–æ–¹æ³•ï¼Œå‘ç°åªéœ€å¢æ·»ä¸€è¡Œä»£ç å³å¯ï¼š Intent intent = new Intent(getApplicationContext(), NewActivity.class); intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK); startActivity(intent); ä¸ºä»€ä¹ˆ Android åœ¨ Service é‡Œé¢å¯åŠ¨ Activity è¦å¼ºåˆ¶è§„å®šä½¿ç”¨å‚æ•° FLAG_ACTIVITY_NEW_TASK å‘¢ï¼Ÿ å› ä¸ºåœ¨ Service ä¸­æˆ‘ä»¬ä¸€èˆ¬ä¼šè¿›è¡Œè€—æ—¶æ“ä½œï¼Œä¹Ÿå°±æ˜¯è¯´å¯èƒ½è¿™ä¸ªè€—æ—¶æ“ä½œè¿˜æ²¡æ‰§è¡Œå®Œï¼Œç”¨æˆ·å°±æ‰“å¼€äº†å…¶ä»–çš„ç¨‹åºï¼Œæ¯”å¦‚ã€Browserã€ï¼Œè€Œå½“å‰çš„ TASK å°±ä¸æ˜¯åŸç¨‹åºä¸­çš„ TASKï¼Œå¦‚æœæ­¤æ—¶åŸç¨‹åºçš„ Service å¼¹å‡ºäº† Activityï¼Œè¯¥ Activity å°±ä¸ã€Browserã€å¤„äºåŒä¸€ä¸ª TASKï¼Œç”¨æˆ·å°±ä¼šè«åå…¶å¦™ï¼Œå› ä¸ºè¿™ä¸ª Activity æ˜¯å±äºåŸç¨‹åºçš„ï¼Œè€Œä¸æ˜¯ã€Browserã€çš„ã€‚ æ‰€ä»¥å¯¹äº Service è€Œè¨€ï¼Œå¹²è„†å¼ºåˆ¶å®šä¹‰å¯åŠ¨çš„ Activity è¦åˆ›å»ºä¸€ä¸ªæ–°çš„ TASK è¦åˆç†å¾—å¤šã€‚ ","link":"https://LiarrDev.github.io/post/Start-Activity-from-Service-uppon-Android-M/"},{"title":"Color Themes","content":"ä¹‹å‰åœ¨ã€æ‰“é€ ä¸ªæ€§åŒ–ã€ŒAndroid Studioã€ã€æ–‡æœ«æŒ–äº†ä¸€ä¸ªå‘ï¼Œè¦ä»‹ç»å¦ä¸€ä¸ªå…³äºã€Android Studioã€ä¸ªæ€§åŒ–å®šåˆ¶çš„å°æŠ€å·§ï¼Œä»Šå¤©å°±æ¥å¡«è¿™ä¸ªå‘ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œã€Android Studioã€æ˜¯åŸºäº JetBrains å®¶çš„ã€IntelliJ IDEAã€å¼€å‘çš„ï¼Œé‚£ä¹ˆæ‰€æœ‰ã€IntelliJ IDEAã€çš„ä¸»é¢˜ç†è®ºä¸Šéƒ½å¯ä»¥ä¸ºã€Android Studioã€æ‰€ç”¨ã€‚ ä»Šå¤©å°±æ¨èä¸€ä¸ªæä¾›ã€IntelliJ IDEAã€ä¸»é¢˜çš„ç½‘ç«™ï¼Œå¦å¤–å®ƒçš„ä¸»é¢˜è¿˜é€‚ç”¨äºã€Webstormã€ã€ã€PyCharmã€ã€ã€RubyMineã€ã€ã€PhpStormã€å’Œã€AppCodeã€ç­‰ JetBrains æ——ä¸‹çš„ IDEã€‚ å®ƒçš„ä¸»é¢˜ä¸»è¦é€‚ç”¨äº Editorï¼Œä¹Ÿå°±æ˜¯è¯´ä¿®æ”¹åçš„ä¸»é¢˜æ•ˆæœä¸»è¦åº”ç”¨åœ¨ Editor åŒºã€‚ å…ˆæ¥çœ‹ä¸‹æˆ‘æœªè®¾ç½®å‰çš„ã€Android Studioã€ä¸»é¢˜æ•ˆæœã€‚ è¿™æ˜¯åœ¨ã€æ‰“é€ ä¸ªæ€§åŒ–ã€ŒAndroid Studioã€ã€ä¸­è®¾ç½®äº†ã€ŒMaterial Theme UIã€åçš„æ•ˆæœï¼Œè‡³äºã€ŒSexy Editorã€ï¼Œä¸ºäº†åœ¨è¿™æ¬¡çš„è®¾ç½®ä¸­æ›´åŠ å®¹æ˜“çœ‹å‡ºå˜åŒ–ï¼Œæˆ‘æš‚æ—¶å…ˆæŠŠå®ƒå¸è½½äº†ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼ŒEditor çš„è®¾ç½®æ— éå°±æ˜¯èƒŒæ™¯é¢œè‰²å·²ç»ä»£ç é«˜äº®ï¼Œä½†æ˜¯ç”±äºä»£ç çš„æ€§è´¨ä¸åŒï¼Œæ¯”å¦‚å…³é”®å­—ã€å˜é‡ã€å¸¸é‡ã€å­—ç¬¦ä¸²ç­‰ç­‰ï¼Œé«˜äº®çš„é¢œè‰²ä»¥åŠæ•ˆæœéƒ½ä¸å°½ç›¸åŒï¼Œæ‰€ä»¥æƒ³è¦è‡ªå·±å®šåˆ¶ä¸€å¥—ä¸“å±çš„ Editor ä¸»é¢˜ï¼Œæ˜¯ä¸€ä»¶å·¥ä½œé‡ååˆ†åºå¤§çš„äº‹æƒ…ã€‚ æ‰€ä»¥ç±»ä¼¼ã€Color Themesã€çš„ä¸»é¢˜ç½‘ç«™åˆ™èƒ½å¤Ÿå¤§å¤§çš„å‡è½»æˆ‘ä»¬çš„å·¥ä½œé‡ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å…¶ç½‘ç«™ä¸Šé€‰æ‹©ä¸€å¥—é€‚åˆè‡ªå·±çš„ä¸»é¢˜å³å¯ï¼Œå½“ç„¶å¦‚æœä½ æœ‰ä½™åŠ›ä¹Ÿå¯ä»¥å®šåˆ¶ä¸€å¥—å±äºè‡ªå·±çš„ä¸»é¢˜å¹¶ä¸Šä¼ åˆ°å…¶ç½‘ç«™ä¸Šä¾›å…¶ä»–å¼€å‘è€…ä½¿ç”¨ã€‚ åºŸè¯å°‘è¯´ï¼Œæ‰“å¼€ã€Color Themesã€é¦–é¡µï¼Œå¯ä»¥çœ‹åˆ°æœ‰å¤§é‡çš„ä¸»é¢˜ã€‚ å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œæœ‰ä¸€ä¸ªç›¸ä¼¼çš„ç½‘ç«™ã€Color Themes Testã€ï¼Œåªæœ‰å°‘é‡çš„ä¸»é¢˜ï¼Œä½†æ˜¯ç”±äºè¿™ä¸¤ä¸ªç½‘ç«™çš„ç›¸ä¼¼åº¦æé«˜ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿä¸æ¸…æ¥šå®ƒæ˜¯å¦ä¸ºã€Color Themesã€çš„æµ‹è¯•ç½‘ç«™ã€‚ å¯ä»¥çœ‹åˆ°ã€Color Themes Testã€åªæœ‰ä¸€é¡µçš„å†…å®¹ï¼Œä¸ºäº†æ›´å¥½çš„é€‰æ‹©ä¸»é¢˜ï¼Œè¿˜æ˜¯å»ºè®®ä½¿ç”¨ã€Color Themesã€ã€‚ ä½ å¯ä»¥é€ä¸ªæŸ¥çœ‹ä¸»é¢˜ä»¥é€‰æ‹©é€‚åˆè‡ªå·±çš„ä¸»é¢˜ï¼Œä½†åŒæ—¶ã€Color Themesã€ä¹Ÿæä¾›äº†æœç´¢åŠŸèƒ½ï¼Œç”±äºæˆ‘ä¹‹å‰å·²ç»å®‰è£…äº†ã€ŒMaterial Theme UIã€æ’ä»¶ï¼Œé‚£ä¹ˆæˆ‘æ›´å¸Œæœ›å¯ä»¥æ‰¾åˆ°é£æ ¼ç›¸æ­çš„ Editor ä¸»é¢˜ï¼Œæ‰€ä»¥æˆ‘å¯ä»¥åœ¨æœç´¢ä¸­è¾“å…¥ã€ŒMaterialã€è¿›è¡Œæ£€ç´¢ã€‚ æ£€ç´¢åˆ°äº† 4 ä¸ªä¸»é¢˜ï¼Œè¿˜å¯ä»¥çœ‹åˆ°æ¯ä¸ªä¸»é¢˜çš„ä¸‹è½½é‡ï¼Œç¬¬ä¸€ä¸ªã€ŒMaterial Defaultã€ä¸»é¢˜æ„Ÿè§‰è·Ÿæˆ‘å·²ç»å®‰è£…çš„ã€ŒMaterial Theme UIã€æ’ä»¶ååˆ†ç›¸ä¼¼ï¼Œä¸ºäº†æ›´å¥½çš„ä½“ç°å®‰è£…å‰åçš„å¯¹æ¯”ï¼Œæˆ‘é€‰æ‹©ç¬¬å››ä¸ªç´«è‰²çš„ã€ŒMaterial-Customã€è¿›è¡Œå®‰è£…ï¼Œè¿™ä¸ªä¸»é¢˜åº”è¯¥æ˜¯ç”¨æˆ·ä¸Šä¼ çš„ã€‚ ç‚¹è¿›å»å¯ä»¥å¯¹è¯¥ä¸»é¢˜ä½œç®€å•çš„é¢„è§ˆï¼ŒæŸ¥çœ‹å…¶ä»£ç é«˜äº®æ•ˆæœæ˜¯å¦å¯¹è‡ªå·±çš„èƒƒå£ã€‚ ç‚¹å‡»ä¸Šæ–¹çš„ç»¿è‰²æŒ‰é’®å³å¯ä¸‹è½½ï¼Œä¸‹è½½å®Œæˆåä¼šå¾—åˆ°ä¸€ä¸ª JAR åŒ…ã€‚ æ¥ä¸‹æ¥æ‰“å¼€ã€Android Studioã€æˆ–ä¸Šé¢æåˆ°çš„å…¶ä»– IDEï¼Œé€‰æ‹©èœå•ã€ŒImport Settingsã€ã€‚ è¿™æ—¶å€™å°±ä¼šå¼¹å‡ºä¸€ä¸ªæ–‡ä»¶é€‰æ‹©æ¡†ï¼Œé€‰æ‹©åˆšä¸‹è½½çš„ JAR åŒ…ã€‚ ç„¶åå°±ä¼šå¼¹å‡ºä¸€ä¸ªå¯¼å…¥é€‰é¡¹çš„å¯¹è¯æ¡†ã€‚ è¿™é‡Œæˆ‘æŒ‰ç…§é»˜è®¤å…¨é€‰ï¼Œæœ€åå°±ä¼šè·Ÿä¹‹å‰å®‰è£…ä¸»é¢˜æ’ä»¶ä¸€æ ·ï¼Œè¦æ±‚é‡å¯ã€Android Studioã€ã€‚ é‡å¯åå°±å¯ä»¥çœ‹åˆ°è¯¥ä¸»é¢˜å·²ç»ç”Ÿæ•ˆäº†ã€‚ å­—ä½“å¾ˆå¯èƒ½ä¹Ÿè¢«ä¿®æ”¹äº†ï¼Œå¦‚æœä¸å–œæ¬¢åˆ™æŒ‰ç…§ä¹‹å‰åœ¨ã€æ‰“é€ ä¸ªæ€§åŒ–ã€ŒAndroid Studioã€ã€ä¸­æåˆ°çš„æ–¹å¼é‡æ–°ä¿®æ”¹å³å¯ã€‚ ç½‘ä¸Šçš„æ•™ç¨‹å¤§å¤šæ•°åˆ°è¿™å„¿å°±ç»“æŸäº†ï¼Œè€Œæ²¡æœ‰åˆ é™¤ä¸»é¢˜ JAR åŒ…çš„æ•™ç¨‹ï¼Œè€Œå½“æŸä¸€å¤©çªç„¶ä¸å–œæ¬¢è¿™ä¸ªä¸»é¢˜çš„æ—¶å€™åªèƒ½æ›¿æ¢è€Œä¸çŸ¥é“å¦‚ä½•åˆ é™¤ï¼Œè¿™å¯¹äºæˆ‘è¿™ç§æœ‰æ´ç™–çš„äººæ¥è¯´æ˜¯ä¸èƒ½å®¹å¿çš„ï¼Œæ¥ä¸‹æ¥å°±æ•™ä½ å¦‚ä½•åˆ é™¤å¯¼å…¥çš„è¿™ä¸ªä¸»é¢˜ã€‚ è¿›å…¥åˆ°ã€ŒColor Schemeã€çš„è®¾ç½®ä¸­ï¼Œé€‰æ‹©å¯¹åº”çš„ä¸»é¢˜ï¼Œå¹¶åœ¨å³è¾¹çš„ä¸‹æ‹‰èœå•ä¸­é€‰æ‹© Delete å³å¯ã€‚ Delete ä¸»é¢˜åä¸éœ€è¦é‡å¯ã€Android Studioã€ï¼Œç«‹å³ç”Ÿæ•ˆã€‚ ã€Android Studioã€æ”¹é€ æ•™ç¨‹åˆ°è¿™å„¿å°±æš‚å‘Šä¸€æ®µè½äº†ï¼Œå¦‚æœä»¥åè¿˜å‘ç°æœ‰ä»€ä¹ˆå¥½ç©çš„ä¸»é¢˜æ’ä»¶å†åšä»‹ç»å§ã€‚ ","link":"https://LiarrDev.github.io/post/Color-Themes/"},{"title":"æ‰“é€ ä¸ªæ€§åŒ–ã€Android Studioã€","content":"åš Android å¼€å‘ä¹Ÿå¥½é•¿ä¸€æ®µæ—¶é—´äº†ï¼Œè™½ç„¶èµ¶ä¸Šäº† Google çˆ¸çˆ¸çš„ã€Android Studioã€é¦–ç­è½¦ï¼Œä½†ä¸€ç›´éƒ½ä¸“æ³¨äºå¼€å‘ï¼Œæ²¡æœ‰æ—¶é—´ä¸ºè‡ªå·±æ‰“é€ ä¸€ä¸ªè¶æ‰‹çš„å¼€å‘ç¯å¢ƒã€‚ æ­£å¥½ä»Šå¤©é—²ä¸‹æ¥äº†ï¼Œå°±æ‰“ç®—å¥½å¥½ç¾åŒ–ä¸€ä¸‹ã€Android Studioã€ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œã€Android Studioã€ç»™æˆ‘ä»¬å†…ç½®äº†ä¸¤æ¬¾ä¸»é¢˜ï¼Œä¸€æ¬¾æ˜¯é»˜è®¤çš„çº¯ç™½è‰²çš„ã€ŒIntelliJã€ï¼Œå¦ä¸€æ¬¾åˆ™æ˜¯å·ç§°ç¨‹åºå‘˜ä¸“å±ä¸»é¢˜çš„æ·±ç°è‰²çš„ã€ŒDarculaã€ï¼Œä¸ºäº†ä¿æŠ¤çœ¼ç›ï¼Œæˆ‘å°±ä¸€ç›´ä½¿ç”¨çš„ã€ŒDarculaã€ä½œä¸ºæˆ‘çš„é»˜è®¤ä¸»é¢˜ã€‚ åˆšå¼€å§‹ä½¿ç”¨çš„æ—¶å€™è§‰å¾—è¿˜æ˜¯æŒºä¸é”™çš„ï¼Œä½†æ˜¯ç”¨åˆ°åé¢å´æœ‰ç‚¹è§†è§‰ç–²åŠ³ï¼ŒEditor ä¸­çš„å­—ä½“éƒ½é‡‡ç”¨äº†æ˜åº¦è¾ƒä½çš„é¢œè‰²ï¼Œè¿™æ ·ä¸èƒŒæ™¯é¢œè‰²ç›¸å·®ä¸ä¼šå¾ˆå¤§ï¼Œä½†æœ‰æ—¶å€™é˜…è¯»ä»£ç ä¼šæ¯”è¾ƒç´¯ã€‚ è€Œä¸‹æ–¹çš„ Logcat åªæœ‰çº¢è‰²è·Ÿç™½è‰²ä¸¤ç§é¢œè‰²ï¼Œä½¿å¾—æˆ‘åœ¨è°ƒè¯•çš„æ—¶å€™ä¸å¾—ä¸åœ¨æ‰€æœ‰æƒ…å†µä¸‹ä½¿ç”¨ Log.e() è¿™ç§æ‰“å°æ—¥å¿—çš„æ–¹å¼ï¼Œè€Œè¿™ç§æ–¹æ³•è·Ÿå…¶æ€§è´¨æ˜¯ç›¸æ‚–çš„ã€‚ ã€Android Studioã€ä¸ºæˆ‘ä»¬è§„å®šäº† 6 ä¸ªä¸åŒç­‰çº§çš„ Logï¼Œæˆ‘ä»¬åº”è¯¥æ ¹æ®ä¸åŒæƒ…å†µè€Œå¯¹æˆ‘ä»¬çš„ Log è¿›è¡Œè°ƒæ•´ï¼Œä½†å®é™…ä¸Šï¼Œé»˜è®¤çš„ Logcat åªä¼šåœ¨ã€ŒErrorã€å’Œã€ŒAssertã€ä¸¤ä¸ªç­‰çº§ä¼šæ˜¾ç¤ºçº¢è‰²ï¼Œå…¶ä»–ç­‰çº§åˆ™æ˜¾ç¤ºç™½è‰²ï¼Œè¿™å¯¹äºæˆ‘çš„è°ƒè¯•æ¥è¯´ï¼Œæ˜¯åŠå…¶ä¸æ–¹ä¾¿çš„ã€‚ æ¥ä¸‹æ¥å°±æ ¹æ®ä»¥ä¸Šçš„éœ€æ±‚ï¼Œé‡æ–°æ”¹é€ ä¸€ä¸‹æˆ‘çš„ã€Android Studioã€å§ã€‚ Font é¦–å…ˆæ˜¯å­—ä½“ï¼Œé»˜è®¤çš„å­—ä½“å…¶å®çœ‹èµ·æ¥å¹¶ä¸ååˆ†èˆ’æœï¼Œæ‰€ä»¥æˆ‘çš„æ‰€æœ‰æ–‡æœ¬ç¼–è¾‘å™¨éƒ½ä½¿ç”¨äº†ç­‰å®½æ— è¡¬çº¿å­—ä½“ï¼Œå…¶ä¸­å·ç§°ç¨‹åºå‘˜ä¸“å±çš„ã€ŒConsolasã€å­—ä½“ä¹Ÿæ˜¯æˆ‘ä½¿ç”¨æœ€å¤šçš„å­—ä½“ã€‚ å­—ä½“å¤§å°ä»¥åŠè¡Œè·æ ¹æ®è‡ªå·±éœ€è¦è®¾ç½®å°±è¡Œï¼Œä¸€èˆ¬å¤–æ¥æ˜¾ç¤ºå±çš„æ—¶å€™å­—ä½“å¤§å°æˆ‘ä¼šè®¾ä¸º 16ï¼Œåœ¨ç¬”è®°æœ¬ä¸Šåˆ™æ˜¯ 14ï¼Œä¸è¿‡å¾ˆå¤šäººéƒ½è¯´æˆ‘è®¾ç½®å¾—è¿˜æ˜¯æœ‰ç‚¹å°ï¼Œå¯èƒ½æˆ‘å¯¹ä»£ç ä¸Šä¸‹æ–‡æ¯”è¾ƒå…³æ³¨ï¼Œå­—ä½“è®¾å°ä¸€ç‚¹å¯ä»¥çœ‹åˆ°æ›´å¤šçš„ä»£ç ï¼Œæ›´åŠ æ¸…æ¥šè‡ªå·±çš„ç¼–ç é€»è¾‘ã€‚ Logcat ä¸Šæ–‡ä¹Ÿæåˆ°ï¼ŒLogcat å•è°ƒçš„é¢œè‰²è®©æˆ‘ååˆ†è‹¦æ¼ï¼Œäºæ˜¯æˆ‘å‚è€ƒäº†ã€Making Android Studio prettyã€è¿™ç¯‡æ–‡ç« ï¼Œæ”¹é€ äº†ä¸€ä¸‹è‡ªå·±çš„ Logcatã€‚ è¿™ç¯‡æ–‡ç« æåˆ°çš„ Logcat é…è‰²æ–¹æ¡ˆå¦‚ä¸‹ï¼š Verbose: #BBB Debug: #33B5E5 Info: #9C0 Assert: #A6C Error: #F44 Warning: #FB3 è€Œæˆ‘è‡ªå·±ä½¿ç”¨çš„é…è‰²æ–¹æ¡ˆä¹Ÿååˆ†ç›¸ä¼¼ï¼š Assert: #AA66CC Debug: #33B5E5 Error: #FF4444 Info: #99CC00 Verbose: #FFFFFF Warning: #FFBB33 æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š è¿™æ ·å°±ä¸ç”¨å†ä¸ºäº†æ›´å¥½çš„æŸ¥çœ‹ä¿¡æ¯è€ŒæŠŠä¸€ä¸ªã€ŒDebugã€ç­‰çº§çš„ Log è®¾ç½®æˆã€ŒErrorã€ç­‰çº§äº†ã€‚ å¦å¤–ï¼Œä¸ºäº†é˜…è¯»æ–¹ä¾¿ï¼Œæˆ‘è¿˜ä¸ºæ‰€æœ‰çš„ç­‰çº§ Log å­—ä½“éƒ½è®¾ç½®äº†ã€ŒBoldã€å±æ€§è¿›è¡ŒåŠ ç²—ã€‚ Material Theme UI æ¥ç€å°±æ˜¯ç•Œé¢ä¸»é¢˜äº†ï¼Œè¿™ä¸ªæˆ‘å°†å€ŸåŠ©æ’ä»¶æ¥å®ç°ã€‚ åœ¨ã€ŒPluginsã€ä¸­æœç´¢ã€ŒMaterial Theme UIã€ï¼Œä¼šæç¤ºæ‰¾ä¸åˆ°ï¼Œå› ä¸ºè¿˜æœªä¸‹è½½ã€‚ ç„¶åç‚¹å‡»ã€ŒSearch in repositoriesã€ï¼Œå°±å¯ä»¥çœ‹åˆ°ç›¸åº”çš„æœç´¢ç»“æœã€‚ é€‰æ‹©ã€ŒMaterial Theme UIã€å¹¶ç‚¹å‡»ã€ŒInstallã€ã€‚ è¿™æ—¶å€™ã€Android Studioã€ä¼šå¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ã€‚ å¤§æ¦‚æ„æ€å°±æ˜¯è¯´è¿™æ˜¯ç¬¬ä¸‰æ–¹æä¾›çš„æ’ä»¶ï¼Œä½ åº”è¯¥ä»”ç»†é˜…è¯»ç›¸å…³çš„æ–‡æ¡£ï¼ŒJetBrains ä¸ä¸ºä½ çš„ä¸ªäººä¿¡æ¯è´Ÿè´£ã€‚è¿™ç§æ¡æ¬¾æˆ‘ä»¬ä¸€èˆ¬éƒ½æ˜¯æ‡’å¾—çœ‹çš„ï¼Œç‚¹å‡»ã€ŒAcceptã€å³å¯ã€‚ è¿™æ ·æ’ä»¶å°±å¼€å§‹ä¸‹è½½äº†ï¼Œæ¥ä¸‹æ¥è¦åšçš„å°±æ˜¯è€å¿ƒç­‰å¾…ï¼Œå¦‚æœç½‘ç»œç•…é€šçš„è¯å¾ˆå¿«å°±å¯ä»¥ä¸‹è½½å®Œæˆã€‚ ä¸‹è½½å®Œæˆåï¼Œè¦æ±‚é‡å¯ã€Android Studioã€æ‰èƒ½ä½¿è¯¥æ’ä»¶ç”Ÿæ•ˆã€‚ å½“ç„¶å¦‚æœä½ æ­£å¿™äºç¼–ç çš„è¯ä¹Ÿå¯ä»¥é€‰æ‹©ç¨åå†é‡å¯ï¼Œä¸è¿‡ç”±äºå¹¶ä¸éœ€è¦èŠ±è´¹å¤ªå¤šçš„æ—¶é—´ï¼Œæˆ‘é€‰æ‹©äº†é©¬ä¸Šé‡å¯ã€‚ æ¥ä¸‹æ¥å°±æ˜¯è§è¯å¥‡è¿¹çš„æ—¶åˆ»ï¼Œé‡å¯åå¯ä»¥å¾ˆæ˜æ˜¾çš„å‘ç°ã€ŒMaterial Theme UIã€å·²ç»åœ¨æˆ‘ä»¬çš„ç•Œé¢ä¸Šåº”ç”¨äº†ã€‚ ä½†æ˜¯ Editor åŒºåŸŸä¾ç„¶æ˜¯åŸæ¥çš„æ ·å¼ï¼Œæ‰“å¼€ã€ŒColor Schemeã€å¯ä»¥é‡æ–°é€‰æ‹© Editor çš„ä¸»é¢˜ã€‚ é€‰æ‹©å¯¹åº”çš„ä¸»é¢˜åå¹¶åº”ç”¨ï¼Œå°±å¯ä»¥çœ‹åˆ° Editor åŒºåŸŸçš„ä¸»é¢˜ä¹Ÿæ›´æ¢äº†ã€‚ ä½†æ˜¯é»˜è®¤çš„å­—ä½“ä¹Ÿæ›´æ¢äº†ï¼Œæƒ³è¦æ›´æ¢å­—ä½“åˆ™éœ€è¦åˆ°ã€ŒColor Scheme Fontã€ä¸­ä¿®æ”¹ã€‚ ä¿®æ”¹å®Œæˆå¹¶åº”ç”¨ï¼Œå¯ä»¥å‘ç° Editor çš„å­—ä½“ä¹Ÿå›åˆ°åŸæ¥ç†Ÿæ‚‰çš„æ ·å­äº†ã€‚ è¿™æ ·å°±å’Œè°å¤šäº†ã€‚ Sexy Editor å†æ¥ä»‹ç»å¦ä¸€æ¬¾æ’ä»¶ã€Sexy Editorã€ã€‚ å¹¶ä¸çŸ¥é“ä¸ºä»€ä¹ˆè¿™æ¬¾æ’ä»¶çš„å¼€å‘è€…ä¼šèµ·ä¸€ä¸ªè¿™æ ·çš„åå­—ï¼Œå¯èƒ½æ˜¯ä»–è§‰å¾—å†™ä»£ç æ˜¯ä¸€ä»¶éå¸¸ Sexy çš„äº‹æƒ…å§ã€‚ å®‰è£…æ–¹å¼è·Ÿä¸Šé¢å¹¶æ²¡æœ‰å¤ªå¤§çš„å·®åˆ«ï¼Œä½†æ˜¯å®‰è£…å®Œé‡å¯åä½ ä¼šå‘ç°å¹¶æ²¡æœ‰å˜åŒ–ï¼Œå› ä¸ºè¿˜éœ€è¦è¿›è¡Œä¸€ç³»åˆ—çš„è®¾ç½®ã€‚ ç‚¹å‡»å³ä¸Šæ–¹çš„ã€ŒADD EDITORã€å¯ä»¥ä¸º Editor åˆ›å»ºä¸åŒçš„ä¸»é¢˜ï¼Œæˆ‘ä¸€èˆ¬åªåœ¨ä¸€ä¸ªä¸»é¢˜ä¸Šè®¾ç½®ï¼Œå°±ä¸éœ€è¦ä¿®æ”¹äº†ï¼Œå†ç‚¹å‡»åº•éƒ¨çš„ã€ŒADD IMAGE(S)â€¦ã€æŒ‰é’®å¯ä»¥é€‰æ‹©èƒŒæ™¯å›¾ç‰‡ã€‚ åœ¨æœ¬åœ°é€‰æ‹©ä¸€å¼ è‡ªå·±å–œæ¬¢çš„å›¾ç‰‡åå°±å¯ä»¥åº”ç”¨åˆ° Editor ä¸­å»äº†ï¼Œå¦‚æœä»ç„¶æ²¡æœ‰æ”¹å˜çš„è¯å¯ä»¥å°è¯•ä¿®æ”¹ä¸€ä¸‹ä¸Šæ–¹çš„ç›¸å…³è®¾ç½®ã€‚ æœ€ç»ˆæ•ˆæœå¦‚ä¸‹ï¼š ä½ å¯ä»¥é€‰æ‹©ä¸åŒçš„å›¾ç‰‡ä»¥æ‰“é€ ä¸€ä¸ªé€‚åˆè‡ªå·±çš„ Editorã€‚ activate-power-mode æœ‰äººè¯´å†™ä»£ç æ²¡æ¿€æƒ…æ€ä¹ˆåŠï¼Œã€Œactivate-power-modeã€å¯ä»¥è®©ä½ å†™ä»£ç çš„æ—¶å€™ä½“éªŒç‹‚æ‹½é…·ç‚«çš„æ•ˆæœï¼Œè®©ä½ çš„ä»£ç å……æ»¡æ¿€æƒ…ã€‚ å…¶å®ã€Œactivate-power-modeã€æ˜¯æ ¹æ®ã€Atomã€ä¸Šçš„åŒåæ’ä»¶ç§»æ¤è¿‡æ¥çš„ï¼Œå…·ä½“æ•ˆæœè¯·çœ‹ä¸‹æ–‡ã€‚ é¦–å…ˆå°±æ˜¯åœ¨ Editor çš„å³ä¸Šè§’å‡ºç°äº†ä¸€ä¸ªå¤§å¤§çš„è®¡æ•°å™¨ï¼Œç”¨æ¥è®°å½• Comboã€‚ å…·ä½“æ˜¯ä»€ä¹ˆçš„ Comboâ€¦ æ‡‚äº†å§ï¼Œæ˜¯ä¸æ˜¯æ„Ÿè§‰æ•²ä¸ªä»£ç éƒ½åƒåœ¨æ®´æ‰“äº§å“ç»ç†ï¼Ÿ Power Mode II å¦‚æœä½ å¹¶ä¸å–œæ¬¢ä¸Šé¢è¿™ç§ Combo å¼çš„æ•ˆæœï¼Œè€Œæ˜¯æƒ³æ¯ä¸€æ¬¡ç‚¹å‡»éƒ½æœ‰ç‰¹æ•ˆï¼Œé‚£å°±è¯•è¯•ã€ŒPower Mode IIã€å§ã€‚ ç‰¹æ•ˆè·Ÿã€Œactivate-power-modeã€ç›¸å·®ä¸å¤šã€‚ åˆ é™¤æŸæ®µä»£ç çš„æ—¶å€™ï¼Œè¿˜ä¼šè¹¦å‡ºä¸€ä¸ªå…¨å±çš„ç‰¹æ•ˆã€‚ ä¸è¿‡æ„Ÿè§‰ã€ŒPower Mode IIã€çš„æµç•…åº¦æ²¡æœ‰ã€Œactivate-power-modeã€é«˜ï¼Œè‡ªè¡Œé€‰æ‹©å³å¯ã€‚ ä»¥ä¸Šæ’ä»¶å½“ä¸éœ€è¦æƒ³è¦å¸è½½çš„æ—¶å€™ï¼Œå¯ä»¥å›åˆ°ã€ŒPluginsã€ä¸­è¿›è¡Œç®¡ç†ã€‚ é€‰ä¸­ç›¸åº”çš„æ’ä»¶ï¼Œå†ç‚¹å‡»å³è¾¹çš„ã€ŒUninstallã€å¸è½½å³å¯ã€‚ åˆ°è¿™é‡ŒåŸºæœ¬å®šåˆ¶å†…å®¹ä¹Ÿå·®ä¸å¤šç»“æŸäº†ã€‚ ä¸è¿‡è¿˜æœ‰å¦ä¸€ä¸ªå®šåˆ¶çš„å°æŠ€å·§ï¼Œä½†æ˜¯æˆ‘æ‰“ç®—å¦å¤–å†™ä¸€ç¯‡æ¨æ–‡è¿›è¡Œä»‹ç»ï¼Œè¯·æŒç»­å…³æ³¨ã€‚ ","link":"https://LiarrDev.github.io/post/Customize-Your-Android-Studio/"},{"title":"React Native Swiper","content":"è™½ç„¶ä¸åš React Native å¼€å‘å¥½ä¹…äº†ï¼Œä½†æ˜¯æœ€è¿‘æ•´ç†æ–‡ä»¶çš„æ—¶å€™å‘ç°äº†å½“åˆå­¦ä¹  React Native çš„æ—¶å€™åšçš„ Demoï¼Œé‚£å°±é¡ºä¾¿æ•´ç†ä¸€ä¸‹å¼€å‘ç¬”è®°ï¼Œæ¸©æ•…è€ŒçŸ¥æ–°ã€‚ ç¯å¢ƒæ­å»ºå¯ä»¥å‚è€ƒä¹‹å‰çš„æ–‡ç« ã€Windows å¹³å° React Native å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°ã€ã€‚ ç”±äº React Native æºäº Reactï¼Œæ‰€ä»¥å…¶ä½¿ç”¨çš„ä¹Ÿæ˜¯ React ç›¸å…³çš„è¯­æ³•ï¼Œä¹Ÿå°±æ˜¯ JavaScriptï¼Œè€Œåœ¨é¡µé¢è§†å›¾ä¸Šï¼Œåˆ™ä½¿ç”¨äº†ç±»ä¼¼ HTML å’Œ CSS çš„ JSXï¼Œæœ‰è¿‡å‰ç«¯åŸºç¡€çš„æˆ‘å…¶å®ä¸Šæ‰‹å¹¶ä¸ååˆ†å›°éš¾ï¼Œä¸è¿‡ç”±äºè½¬å‘ Android å¼€å‘å¾ˆé•¿ä¸€æ®µæ—¶é—´äº†ï¼Œå†™èµ·æ¥ä¹Ÿå¹¶ä¸ååˆ†å®¹æ˜“ã€‚ ä¸è¿‡å¥½åœ¨å¾ˆå¤šç»„ä»¶éƒ½å·²ç»æœ‰å¤§ç¥åšäº†å°è£…ï¼Œå¹¶æä¾›ç»™å¹¿å¤§å¼€å‘è€…ä½¿ç”¨ï¼Œè¿™å°±åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šæ–¹ä¾¿äº†æˆ‘ä»¬è¿™äº›æ¬ç –å·¥çš„å¼€å‘ã€‚ è€Œã€react-native-swiperã€åˆ™æ˜¯æˆ‘æ¥è§¦çš„ç¬¬ä¸€ä¸ªç¬¬ä¸‰æ–¹ç»„ä»¶ã€‚ åœ¨å…¶ Github é¡¹ç›®ä¸»é¡µä¸Šï¼Œå®ƒè¿˜ååˆ†åš£å¼ çš„æ‰“å‡ºäº†è‡ªå·±çš„ Titleï¼šThe best Swiper component for React Native. é‚£ä¹ˆå°±æ¥çœ‹çœ‹å®ƒæ˜¯å¦çœŸçš„é…å¾—ä¸Š The Best è¿™ä¸ªå¤´è¡”ã€‚ é¦–å…ˆé€šè¿‡ npm å·¥å…·æŠŠã€react-native-swiperã€å®‰è£…åˆ°é¡¹ç›®ä¸­ï¼š âœ npm i react-native-swiper --save ç„¶åå°†è¿™ä¸ª Component å¯¼å…¥åˆ°éœ€è¦åº”ç”¨çš„é¡µé¢ä¸­ï¼š import Swiper from 'react-native-swiper'; æ¥ä¸‹æ¥å°±å¯ä»¥åœ¨é¡µé¢ä¸­åº”ç”¨äº†ï¼š export default class MainLeafContent extends Component { render() { return ( &lt;View&gt; &lt;View style={styles.banner}&gt; &lt;Swiper style={styles.wrapper} autoplay={true}&gt; &lt;Image style={styles.banner_image_size} source={require('./images/banner/0.png')} /&gt; &lt;Image style={styles.banner_image_size} source={require('./images/banner/1.png')} /&gt; &lt;Image style={styles.banner_image_size} source={require('./images/banner/2.png')} /&gt; &lt;/Swiper&gt; &lt;/View&gt; ... &lt;/View&gt; ); } } const styles = StyleSheet.create({ banner: { height: screenwidth * 673 / 1090, width: screenwidth }, banner_image_size: { height: screenwidth * 673 / 1090, width: screenwidth } ... }); module.exports = MainLeafContent; ä½¿ç”¨çš„æ˜¯ React çš„ JSX è¯­æ³•ï¼Œåœ¨ &lt;View&gt; ä¸­ä½¿ç”¨ &lt;Swiper&gt; æ ‡ç­¾æŠŠéœ€è¦çš„ &lt;Image&gt; è®¾å®šå¥½ï¼Œå¹¶æŒ‡å®šæ ·å¼å’Œèµ„æºå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ æ¯”å¦‚æˆ‘è¿™é‡Œåœ¨ &lt;Swiper&gt; ä¸­å¼•å…¥äº† 3 å¼ æœ¬åœ°å›¾ç‰‡ï¼Œå›¾ç‰‡å­˜å‚¨åœ¨ ./images/banner/ ç›®å½•ä¸‹ï¼Œè€Œ &lt;Swiper&gt; çš„çˆ¶ View ä»¥åŠ &lt;Image&gt; éƒ½æŒ‡å®šå®½åº¦å¡«æ»¡å±å¹•ï¼Œç”±äºå›¾ç‰‡çš„å°ºå¯¸æ˜¯å›ºå®šçš„ï¼Œæ‰€ä»¥æˆ‘æŒ‰æ¯”ä¾‹æ¥è®¾å®šäº†é«˜åº¦ã€‚åŒæ—¶ï¼Œæˆ‘è¿˜ä¸ºå…¶è®¾å®šäº†è‡ªåŠ¨è½®æ’­çš„åŠŸèƒ½ã€‚ æœ€åæˆ‘æŠŠå®ƒå¯¼å‡ºä¸ºä¸€ä¸ªè‡ªå®šä¹‰ç»„ä»¶ï¼Œä¾›æˆ‘åœ¨å…¶ä»–é¡µé¢ä½¿ç”¨ã€‚æ•ˆæœå›¾å¦‚ä¸‹ï¼š ä¸Šé¢ç”¨åˆ°äº† autoplay å±æ€§ï¼Œå…¶å®ã€react-native-swiperã€è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†å…¶ä»–å±æ€§ï¼ŒåŸºæœ¬å±æ€§å¦‚ä¸‹ï¼š Prop Defalt Type Description horizontal true bool å¦‚æœå€¼ä¸º true æ—¶ï¼Œé‚£ä¹ˆæ»šåŠ¨çš„å†…å®¹å°†æ˜¯æ¨ªå‘æ’åˆ—çš„ï¼Œè€Œä¸æ˜¯å‚ç›´äºåˆ—ä¸­çš„ loop true bool å¦‚æœè®¾ç½®ä¸º falseï¼Œé‚£ä¹ˆæ»‘åŠ¨åˆ°æœ€åä¸€å¼ æ—¶ï¼Œå†æ¬¡æ»‘åŠ¨å°†ä¸ä¼šå±•ç¤ºç¬¬ä¸€å¼ å›¾ç‰‡ index 0 number åˆå§‹è¿›å…¥çš„é¡µé¢æ ‡è¯†ä¸º 0 çš„é¡µé¢ showsButton false bool å¦‚æœè®¾ç½®ä¸º trueï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿æ§åˆ¶æŒ‰é’®ï¼ˆå³ï¼šå·¦å³ä¸¤ä¾§çš„ç®­å¤´ï¼‰å¯è§ autoplay false bool è®¾ç½®ä¸º trueï¼Œåˆ™é¡µé¢å¯ä»¥è‡ªåŠ¨æ’­æ”¾ å½“ç„¶è¿˜æœ‰ä¸€äº›è‡ªå®šä¹‰å±æ€§å…è®¸å¼€å‘è€…é€‰æ‹©ï¼Œä½†ç”±äºå¯¹æˆ‘æ¥è¯´ä½¿ç”¨é¢‘ç‡å¹¶ä¸é«˜ï¼Œå°±ä¸è´´ä¸Šæ¥äº†ï¼Œéœ€è¦çš„æ—¶å€™æŸ¥æŸ¥æ–‡æ¡£å°±å¯ä»¥ï¼Œè¯¦æƒ…å¯è‡³å…¶ Github é¡¹ç›®ä¸»é¡µæŸ¥çœ‹ã€‚ ","link":"https://LiarrDev.github.io/post/React-Native-Swiper/"},{"title":"å¾®ä¿¡å‘é€å®šæ—¶æ¶ˆæ¯","content":"ç°åœ¨å¤§å¤šæ•°æ‰‹æœºéƒ½æœ‰å®šæ—¶çŸ­ä¿¡çš„åŠŸèƒ½äº†ï¼Œåœ¨ä¸­å­¦æ—¶ä»£æˆ‘å¸¸ç”¨è¿™ä¸ªåŠŸèƒ½ä¸ºå¥½å‹é€ä¸Šæ•´ç‚¹çš„ç”Ÿæ—¥ç¥ç¦ã€‚ è™½ç„¶é‚£ä¸ªæ—¶å€™ QQ å¾ˆæµè¡Œï¼Œä½†æˆ‘ä¹Ÿè®°ä¸æ¸…ä¸ºä»€ä¹ˆè¦ç”¨çŸ­ä¿¡æ¥å‘ç”Ÿæ—¥ç¥ç¦äº†ï¼Œæˆ–è®¸æ˜¯å› ä¸ºå½“æ—¶çš„ 3G æµé‡ä¸ä¾¿å®œï¼Œæˆ–è®¸æ˜¯å› ä¸ºå½“æ—¶å­¦æ ¡çš„ä¿¡å·ä¸å¥½ï¼Œåˆæˆ–è®¸åªæ˜¯å› ä¸ºå¥—é¤å†…çš„å…è´¹çŸ­ä¿¡å¤ªå¤šâ€¦ å†åæ¥å¾®ä¿¡å´›èµ·äº†ï¼Œäºæ˜¯æˆ‘ä»¬å°±è¿›å…¥äº†å…¨æ°‘å¾®ä¿¡æ—¶ä»£ï¼ŒçŸ­ä¿¡åŸºæœ¬åªç”¨æ¥æŸ¥è¯¢è¯è´¹ä»¥åŠæ¥æ”¶å„ç§éªŒè¯ç ï¼Œå¾®ä¿¡æ‰æ˜¯ IM ä¸»æˆ˜åœºã€‚ ä½†æ˜¯å®šæ—¶çŸ­ä¿¡åŠŸèƒ½ä¸€ç›´è®©æˆ‘å¿µå¿µä¸å¿˜ï¼Œç‰¹åˆ«æ˜¯éšç€å¹´é¾„å¢å¤§ï¼Œå‡ºæ¥å·¥ä½œåå‹åŠ›ä¹Ÿä¸å°ï¼Œå®åœ¨æ˜¯ç†¬ä¸èµ·å¤œï¼Œä¹Ÿæ›´ä¸æ„¿æ„ç†¬åˆ° 12 ç‚¹æ•´ç»™åˆ«äººå‘ä¸€æ¡ç¥ç¦äº†ã€‚ ä¸è¿‡æˆ‘ä¹Ÿå‘ç°äº†ä¸€ç§å¯ä»¥ä½¿ç”¨å¾®ä¿¡å‘é€å®šæ—¶æ¶ˆæ¯çš„æ–¹æ³•ã€‚ å½“ç„¶ï¼Œè¿™ç§æ–¹æ³•ä¹Ÿå¾ˆç¨‹åºå‘˜ï¼Œå¯èƒ½è¿™ä¹Ÿæ˜¯å½“ç¨‹åºå‘˜çš„é™„åŠ ç¦åˆ©å’Œé™„åŠ è¯…å’’å§ã€‚ æ¥çœ‹çœ‹å®ç°æ–¹æ³•ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ç™»å½•å¾®ä¿¡ç½‘é¡µç‰ˆï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯ç½‘é¡µç‰ˆï¼Œæ˜¯å› ä¸ºåœ¨æ‰‹æœºå®¢æˆ·ç«¯ä»¥åŠç”µè„‘å®¢æˆ·ç«¯ä¸èƒ½å¾ˆæ–¹ä¾¿çš„æ‰§è¡Œæˆ‘ä»¬è‡ªå®šä¹‰çš„è„šæœ¬ï¼Œè€Œæµè§ˆå™¨å¯ä»¥ã€‚ ç™»å½•æˆåŠŸåï¼Œé€‰æ‹©éœ€è¦å‘é€å®šæ—¶æ¶ˆæ¯çš„å¥½å‹æˆ–ç¾¤ï¼Œå³æ‰“å¼€å¯¹è¯æ¡†ï¼Œéšåå¯¹è¯¥é¡µé¢ä½¿ç”¨ã€Œæ£€æŸ¥å…ƒç´ ã€ï¼Œå¹¶åˆ‡æ¢åˆ°ã€ŒConsoleã€çš„ Tabã€‚ åœ¨ã€ŒConsoleã€çš„ Tab ä¸­å³å¯ç¼–å†™è„šæœ¬å¯¹è¯¥ç½‘é¡µè¿›è¡Œé€»è¾‘æ§åˆ¶ï¼Œæˆ‘ä»¬è¾“å…¥ä¸‹æ–¹ä»£ç ï¼š var appElement = document.querySelector('[ng-controller=chatSenderController]'); var $scope = angular.element(appElement).scope(); setInterval(function() { var now = new Date(); var date = now.getDate(); var hour = now.getHours(); var min = now.getMinutes(); var second = now.getSeconds(); if (second == 0 &amp;&amp; min == 30 &amp;&amp; hour == 15) { // å‘é€æ—¶é—´ var output = &quot;This is test message.&quot; // å‘é€å†…å®¹ $scope.editAreaCtn = output; $scope.sendTextMessage(); } }, 1000); æˆ‘ä»¬å¯ä»¥ä¿®æ”¹å¯¹åº”çš„æ—¶é—´ä»¥åŠå†…å®¹ï¼Œæ¥ä¸ºæˆ‘ä»¬çš„éœ€æ±‚åšå®šåˆ¶æ“ä½œï¼Œç¼–å†™å®Œæˆå¹¶å›è½¦ï¼Œåˆ°è¾¾æŒ‡å®šçš„æ—¶é—´åï¼Œæ¶ˆæ¯å³å¯å‘é€ï¼š å¦‚æœæˆ‘ä»¬éœ€è¦å‘é€è¡¨æƒ…å‘¢ï¼Ÿ ä¹Ÿå¾ˆç®€å•ï¼Œå…ˆåœ¨å¯¹è¯æ¡†ä¸­è¾“å…¥ä¸€ä¸ªè¡¨æƒ…ï¼Œç„¶åä½¿ç”¨ã€Œæ£€æŸ¥å…ƒç´ ã€åŠŸèƒ½æ‰¾åˆ°è¯¥è¡¨æƒ…çš„ä»£ç å³å¯ï¼š æ¯”å¦‚æˆ‘åœ¨è¿™é‡Œé€‰æ‹©äº†ã€Œã€è¿™ä¸ªè¡¨æƒ…ï¼Œé‚£ä¹ˆå¯ä»¥ä»ã€ŒElementsã€çš„ Tab ä¸­çœ‹åˆ°å…¶ä»£ç ä¸ºï¼š &lt;img class=&quot;qqemoji qqemoji36&quot; text=&quot;[è¡°]_web&quot; src=&quot;/zh_CN/htmledition/v2/images/spacer.gif&quot;&gt; å°†ä¸Šæ–¹ä»£ç ä¸­å‘é€çš„å†…å®¹æ›¿æ¢ä¸ºè¯¥è¡¨æƒ…çš„ä»£ç å³å¯ï¼š var appElement = document.querySelector('[ng-controller=chatSenderController]'); var $scope = angular.element(appElement).scope(); setInterval(function() { var now = new Date(); var date = now.getDate(); var hour = now.getHours(); var min = now.getMinutes(); var second = now.getSeconds(); if (second == 0 &amp;&amp; min == 30 &amp;&amp; hour == 15) { // å‘é€æ—¶é—´ var output = &quot;&lt;img class=\\&quot;qqemoji qqemoji36\\&quot; text=\\&quot;[è¡°]_web\\&quot; src=\\&quot;/zh_CN/htmledition/v2/images/spacer.gif\\&quot;&gt;&quot; // å‘é€å†…å®¹ $scope.editAreaCtn = output; $scope.sendTextMessage(); } }, 1000); è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºè¡¨æƒ…ä¸­å«æœ‰ &quot; ç¬¦å·ï¼Œä¼šæœ‰è¯­æ³•å†²çªï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦åœ¨å¯¹åº”çš„ &quot; å‰åŠ è½¬ä¹‰å­—ç¬¦ \\ è¿›è¡Œè½¬ä¹‰ï¼Œæˆ–å°†å¯¹åº”çš„ &quot; æ”¹ä¸º 'ï¼š var appElement = document.querySelector('[ng-controller=chatSenderController]'); var $scope = angular.element(appElement).scope(); setInterval(function() { var now = new Date(); var date = now.getDate(); var hour = now.getHours(); var min = now.getMinutes(); var second = now.getSeconds(); if (second == 0 &amp;&amp; min == 30 &amp;&amp; hour == 15) { // å‘é€æ—¶é—´ var output = &quot;&lt;img class='qqemoji qqemoji36' text='[è¡°]_web' src='/zh_CN/htmledition/v2/images/spacer.gif'&gt;&quot; // å‘é€å†…å®¹ $scope.editAreaCtn = output; $scope.sendTextMessage(); } }, 1000); å›è½¦æ‰§è¡Œåå¯ä»¥çœ‹åˆ°è¡¨æƒ…ä¹Ÿå¦‚æœŸå‘é€ï¼š æœ‰å‡ ç‚¹éœ€è¦æ³¨æ„ï¼š ä¸€å®šè¦ä¿æŒç½‘ç»œé€šç•…ï¼ˆè¿™ä¸æ˜¯åºŸè¯å—ï¼‰ã€‚ å®šæ—¶æ¶ˆæ¯ä¼šå‘é€åˆ°å½“å‰æ‰“å¼€çš„ä¼šè¯çª—å£ä¸­ã€‚ è„šæœ¬è¯»å–çš„æ˜¯æœ¬åœ°æ—¶é—´ï¼Œæ‰€ä»¥è¯·ä»¥ç”µè„‘çš„æ—¶é—´ä¸ºå‡†ï¼Œå…¶å®æœ€å¥½çš„æ–¹æ³•æ˜¯è®¾ç½®åŒæ­¥ç½‘ç»œæ—¶é—´ï¼Œæ–¹ä¾¿åˆå¯ä»¥é¿å…ä¸å¿…è¦çš„éº»çƒ¦ã€‚ macOS éœ€è¦æ³¨æ„æ˜¯å¦åœ¨èŠ‚èƒ½æ—¶é—´èŒƒå›´å†…ï¼ŒWindows ç¬”è®°æœ¬ä¹Ÿéœ€æ³¨æ„è¿™ç§æƒ…å†µã€‚ æ¥ä¸‹æ¥å°±å¯ä»¥ç»™ä½ å¿ƒä»ªçš„ TA é€ä¸Šæœ€å‡†æ—¶çš„ç¥ç¦äº†ï½ ","link":"https://LiarrDev.github.io/post/Send-Timed-Messages-with-WeChat/"},{"title":"åœ¨ IIS 7 é…ç½® TLS 1.2","content":"ä¹‹å‰åœ¨ã€IIS 7 ä¸ºå¤šä¸ªåŸŸåç»‘å®šè¯ä¹¦ã€ä¸€æ–‡ä¸­ä»‹ç»äº†å¦‚ä½•ç”³è¯·å…è´¹çš„æ³›åŸŸåè¯ä¹¦å¹¶åœ¨æœåŠ¡å™¨ä¸Šç»‘å®šäº† SSL è¯ä¹¦ï¼Œä½†æ˜¯å¦‚æœéœ€è¦åšå¾®ä¿¡å°ç¨‹åºï¼Œæ ¹æ®å¾®ä¿¡å°ç¨‹åºçš„å®˜æ–¹å¼€å‘æ–‡æ¡£ï¼ŒHTTPS è¯ä¹¦è¿˜éœ€æ”¯æŒ TLS 1.2 ç‰ˆæœ¬ã€‚ TLS æ˜¯ä»€ä¹ˆï¼Ÿ TLSï¼ˆTransport Layer Securityï¼Œå®‰å…¨ä¼ è¾“å±‚åè®®ï¼‰ç”¨äºåœ¨ä¸¤ä¸ªé€šä¿¡åº”ç”¨ç¨‹åºä¹‹é—´æä¾›ä¿å¯†æ€§å’Œæ•°æ®å®Œæ•´æ€§ã€‚ è¯¶è¿™ä¸æ˜¯è·Ÿ SSLï¼ˆSecure Socket Layerï¼Œå®‰å…¨å¥—æ¥å±‚ï¼‰å¾ˆåƒå—ï¼Ÿ SSL æ˜¯åŸºäº HTTPS ä¸‹çš„ä¸€ä¸ªåè®®åŠ å¯†å±‚ï¼Œèµ·åˆæ˜¯å› ä¸º HTTP åœ¨ä¼ è¾“æ•°æ®æ—¶ä½¿ç”¨çš„æ˜¯æ˜æ–‡ï¼ˆè™½ç„¶è¯´ POST æäº¤çš„æ•°æ®æ—¶æ”¾åœ¨æŠ¥ä½“é‡Œçœ‹ä¸åˆ°çš„ï¼Œä½†æ˜¯è¿˜æ˜¯å¯ä»¥é€šè¿‡æŠ“åŒ…å·¥å…·çªƒå–åˆ°ï¼‰æ˜¯ä¸å®‰å…¨çš„ï¼Œä¸ºäº†è§£å†³è¿™ä¸€éšæ‚£ Netscape å…¬å¸æ¨å‡ºäº† SSL å®‰å…¨å¥—æ¥å­—åè®®å±‚ï¼ŒSSL æ˜¯åŸºäº HTTP ä¹‹ä¸‹ TCP ä¹‹ä¸Šçš„ä¸€ä¸ªåè®®å±‚ï¼Œæ˜¯åŸºäº HTTP æ ‡å‡†å¹¶å¯¹ TCP ä¼ è¾“æ•°æ®æ—¶è¿›è¡ŒåŠ å¯†ï¼Œæ‰€ä»¥ HPPTS æ˜¯ HTTP+SSL/TCP çš„ç®€ç§°ã€‚ ç”±äº HTTPS çš„æ¨å‡ºå—åˆ°äº†å¾ˆå¤šäººçš„æ¬¢è¿ï¼Œåœ¨ SSL æ›´æ–°åˆ° 3.0 æ—¶ï¼ŒIETF å¯¹ SSL 3.0 è¿›è¡Œäº†æ ‡å‡†åŒ–ï¼Œå¹¶æ·»åŠ äº†å°‘æ•°æœºåˆ¶ï¼ˆä½†æ˜¯å‡ ä¹å’Œ SSL 3.0 æ— å·®å¼‚ï¼‰ï¼Œæ ‡å‡†åŒ–åçš„ IETF æ›´åä¸º TLS 1.0ï¼Œå¯ä»¥è¯´ TLS å°±æ˜¯ SSL çš„æ–°ç‰ˆæœ¬3.1ã€‚ TLS ä¸ SSL è¿æ¥è¿‡ç¨‹å…¶å®æ— ä»»ä½•å·®å¼‚ã€‚ SSL ä¸ TLS ä¸¤è€…æ‰€ä½¿ç”¨çš„ç®—æ³•æ˜¯ä¸åŒçš„ï¼ŒSSL ä½¿ç”¨çš„æ˜¯ MAC å“ˆå¸Œç®—æ³•ï¼ŒTLS ä½¿ç”¨çš„æ˜¯ RFC-2104 å®šä¹‰çš„ HMAC ç®—æ³•ï¼Œä¸¤è€…å·®å¼‚æ˜¯åœ¨å¡«å……å­—èŠ‚ä¸å¯†é’¥ä¹‹é—´ä¸€ä¸ªä½¿ç”¨çš„æ˜¯è¿æ¥è¿ç®—ï¼Œä¸€ä¸ªä½¿ç”¨çš„æ˜¯å¼‚æˆ–è¿ç®—ï¼ŒMAC å’Œ HMAC åœ¨å–å€¼èŒƒå›´ä¹Ÿæ˜¯ä¸åŒçš„ï¼Œä½†æ˜¯å®‰å…¨åº¦æ˜¯ç›¸åŒçš„ã€‚ SSL å¯ä»¥åˆ†ä¸ºä¸¤ä¸ªåè®®ï¼ŒSSL è®°å½•åè®®ï¼ˆSSL Record Protocolï¼‰ä¸º TCP åè®®åœ¨é€šä¿¡æäº¤æ•°æ®æ—¶æä¾›æ•°æ®å°è£…ã€å‹ç¼©ã€åŠ å¯†ç­‰åŸºæœ¬æ“ä½œï¼ŒSSL æ¡æ‰‹åè®®ï¼ˆSSL Handshake Protocolï¼‰å»ºç«‹åœ¨ SSL è®°å½•åè®®ä¹‹ä¸Šï¼Œç”¨äºåœ¨å®é™…çš„æ•°æ®ä¼ è¾“å¼€å§‹å‰ï¼Œé€šè®¯åŒæ–¹è¿›è¡Œèº«ä»½è®¤è¯ã€åå•†åŠ å¯†ç®—æ³•ã€äº¤æ¢åŠ å¯†å¯†é’¥ç­‰ã€‚ TLS ä¸ SSL çš„ä¸¤ä¸ªåè®®å·¥ä½œæ–¹å¼ä¸ SSL æ˜¯ä¸€æ ·çš„ã€‚ SSL æ‰€ä½¿ç”¨çš„ç‰ˆæœ¬ä¸º 3.0ï¼Œç‰ˆæœ¬å·ä¹Ÿä¸º 3.0.xï¼ˆx ä»£è¡¨æœªçŸ¥æ•°å› ä¸º SSL è¿˜åœ¨æ›´æ–°ï¼‰ï¼Œè€Œ TLS ç‰ˆæœ¬ä¸º 1.0ï¼Œä½†ç‰ˆæœ¬å·å´ä¸º SSL 3.1.0ã€‚ TLS å¢åŠ äº†è®¸å¤šæ–°çš„æŠ¥è­¦ä»£ç ï¼Œæ¯”å¦‚è§£å¯†å¤±è´¥ï¼ˆdecryption_failedï¼‰ã€è®°å½•æº¢å‡ºï¼ˆrecord_overflowï¼‰ã€æœªçŸ¥ CAï¼ˆunknown_caï¼‰ã€æ‹’ç»è®¿é—®ï¼ˆaccess_deniedï¼‰ç­‰ï¼Œä½†åŒæ—¶ä¹Ÿæ”¯æŒ SSL åè®®ä¸Šæ‰€æœ‰çš„æŠ¥è­¦ä»£ç ã€‚ ç®€å•æ¥è¯´ï¼ŒTLS å°±æ˜¯åœ¨ SSL çš„åŸºç¡€ä¸Šåšäº†å°‘è®¸å‡çº§ã€‚ æŠ›ä¹¦åŒ…æŠ›äº†è¿™ä¹ˆä¹…ï¼Œè¿˜æ˜¯å›åˆ°é¡¹ç›®é—®é¢˜ä¸Šï¼Œç”±äºå¾®ä¿¡å°ç¨‹åºéœ€è¦æ”¯æŒ TLS 1.2ï¼Œé‚£ä¹ˆåªåœ¨æœåŠ¡å™¨ä¸Šç»‘å®šäº†æ™®é€šçš„ SSL è¯ä¹¦ï¼Œå°±ä¼šå¯¼è‡´å°ç¨‹åºæ— æ³•æ­£å¸¸è¿è¡Œã€‚ è¦è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œé¦–å…ˆè¦ç¡®å®šæ“ä½œç³»ç»Ÿç¯å¢ƒæ˜¯å¦æ”¯æŒ TLS 1.2ï¼Œå‚è€ƒä¸€ä¸‹è¡¨æ ¼ï¼š ä¹‹å‰åœ¨ã€IIS 7 ä¸ºå¤šä¸ªåŸŸåç»‘å®šè¯ä¹¦ã€é‡Œä¹Ÿæåˆ°ï¼Œæˆ‘ä»¬æœåŠ¡å™¨çš„ç¯å¢ƒæ˜¯ Windows Server 2008 R2 Enterpriseï¼Œåˆšå¥½å¯ä»¥æ”¯æŒ TLS 1.2ã€‚ æ ¹æ®ç½‘ä¸Šçš„è¯´æ³•ï¼Œååˆ†ç®€å•ï¼Œè¿›å…¥æœåŠ¡å™¨ä¿®æ”¹æ³¨å†Œè¡¨å³å¯ï¼Œäºæ˜¯æˆ‘æŠŠå¯¹åº”æ³¨å†Œè¡¨çš„å€¼è¿›è¡Œä¿®æ”¹ã€‚ ç„¶åé‡å¯ IISï¼Œç»“æœå‘ç°å¹¶æ²¡æœ‰æˆåŠŸæ”¯æŒ TLSã€‚ æœå¯»å…¶ä»–è§£å†³æ–¹æ³•ï¼Œæ‰¾åˆ°äº†ä¸€æ¬¾é¢å‘å°ç™½çš„ GUI å·¥å…·â€”â€”ã€IIS Cryptoã€ã€‚ ã€IIS Cryptoã€æ˜¯ä¸€ä¸ªå›¾å½¢åŒ–çš„ TLS è®¾ç½®å·¥å…·ã€‚ åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…å¥½ã€IIS Cryptoã€ï¼Œæ‰“å¼€ï¼Œè™½ç„¶æ˜¯å…¨è‹±æ–‡çš„ç•Œé¢ï¼Œä½†æ˜¯çœ‹è§é‚£å‡ ä¸ªå…³é”®è¯å°±å¤§æ¦‚çŸ¥é“æ€ä¹ˆæ“ä½œäº†ã€‚ å®ƒé»˜è®¤å·²ç»å¸®æˆ‘å‹¾é€‰å¥½ TLS çš„ä¸‰ä¸ªç‰ˆæœ¬ï¼Œè™½ç„¶å°ç¨‹åºçš„å®˜æ–¹æ–‡æ¡£è¦æ±‚æœ€å¥½æ”¯æŒ TLS 1.2 ä»¥ä¸Šçš„ç‰ˆæœ¬ï¼Œä½†è¿™é‡Œå¹¶æ²¡æœ‰æ›´é«˜ç‰ˆæœ¬çš„é€‰é¡¹ï¼Œä¸è¿‡å¹¶ä¸è¦ç´§ï¼Œæˆ‘ä»¬åªè¦èƒ½åˆ°è¾¾ 1.2 çš„ç‰ˆæœ¬å°±å¤Ÿäº†ï¼Œå½“ç„¶ä¸ºäº†å…¼å®¹éƒ¨åˆ†æ—§ Android æœºå‹ï¼ŒæŠŠ 1.0 å’Œ 1.1 çš„ç‰ˆæœ¬ä¹Ÿå‹¾ä¸Šã€‚ ç„¶åç‚¹å‡»ã€ŒApplyã€ï¼Œä¼šå¼¹å‡ºä¸€ä¸ªæç¤ºæ¡†ã€‚ ä»”ç»†é˜…è¯»æç¤ºçš„å†…å®¹ï¼Œå‘ç°è¦æ±‚ reboot computerï¼Œé‡å¯ IIS çš„è¯æ˜¯æ²¡ä»€ä¹ˆé—®é¢˜ï¼Œä½†æ˜¯é‡å¯æœåŠ¡å™¨çš„ Computerï¼Œä¼šä¸ä¼šå‡ºç°ä»€ä¹ˆé—®é¢˜å‘¢ï¼Œå’¨è¯¢äº†åç«¯å·¥ç¨‹å¸ˆï¼Œå¾—åˆ°çš„å›å¤æ˜¯çš„ç¡®æœ‰å¯èƒ½ä¼šå¯¼è‡´ä¸€äº›ä¸ç¡®å®šçš„å¼‚å¸¸ï¼Œä½œäº†ä¸€å®šçš„è¡¡é‡ä¹‹åï¼Œæ—¢æ— å¯¹ç­–äº†ï¼Œå°±é‡å¯å§ï¼ äºæ˜¯é‡å¯åè¿›è¡Œæ£€æµ‹ï¼Œä½¿ç”¨ã€GETSSLã€çš„ã€ŒSSLå®‰è£…æ£€æµ‹å·¥å…·ã€æ£€æµ‹ç»“æœå¦‚ä¸‹ï¼š ä¸ºäº†è¿›ä¸€æ­¥ç¡®è®¤ï¼Œæˆ‘è¿˜æ‰¾äº†ä¸€ä¸ªå›½å¤–çš„ç½‘ç«™è¿›è¡ŒäºŒæ¬¡æ£€æµ‹ï¼Œã€Qualys SSL Labsã€çš„ã€ŒSSL Server Testã€æ£€æµ‹ç»“æœå¦‚ä¸‹ï¼š ä¸è¿‡ã€ŒSSL Server Testã€çš„æ£€æµ‹ç»“æœç›¸å¯¹æ¥è¯´æ¯”è¾ƒæ…¢ï¼Œä¸çŸ¥é“æ˜¯éœ€è¦æ£€æµ‹çš„æ¡ç›®æ¯”è¾ƒå¤šè¿˜æ˜¯ä»€ä¹ˆåŸå› ï¼Œæ¯•ç«Ÿæˆ‘ä¹Ÿä¸æ˜¯å¾ˆæ‡‚å…¶ä»–æ¡ç›®çš„ä½œç”¨ã€‚ æ‰€ä»¥æœ€ç»ˆç»“æœæ˜¯ï¼ŒTLS ç»ˆäºè®¾ç½®æˆåŠŸäº†ã€‚ è¿‡åæƒ³ä¸€æƒ³ï¼Œå…¶å®ä¹‹å‰ä¿®æ”¹æ³¨å†Œè¡¨çš„æ–¹æ³•åº”è¯¥ä¹Ÿæ˜¯å¯ä»¥çš„ï¼Œåªä¸è¿‡æˆ‘æŒ‰ç…§ç½‘ä¸Šçš„è¯´æ³•åªæ˜¯é‡å¯äº† IISï¼Œè€Œæ²¡æœ‰é‡å¯æœåŠ¡å™¨ Computerï¼Œæ‰€ä»¥å¯¼è‡´ä¿®æ”¹çš„æ³¨å†Œè¡¨æ²¡æœ‰ç”Ÿæ•ˆï¼Œå½“ç„¶ä¹Ÿæ²¡æœ‰éªŒè¯è¿™ä¸ªæƒ³æ³•ï¼Œæ€»ä¸èƒ½åœ¨ç”Ÿäº§ç¯å¢ƒä¸­å»è¯•éªŒè¿™äº›ä¸œè¥¿å§ã€‚ ","link":"https://LiarrDev.github.io/post/Configuring-TLS-1_2-in-IIS-7/"},{"title":"IIS 7 ä¸ºå¤šä¸ªåŸŸåç»‘å®šè¯ä¹¦","content":"IIS 7 å¹¶ä¸æ”¯æŒä¸ºä¸åŒåŸŸåç»‘å®šä¸åŒçš„è¯ä¹¦ã€‚è§£å†³æ–¹æ³•å°±åªæœ‰ä¸¤ä¸ªäº†ï¼Œä¸€æ˜¯å‡çº§ IIS 8ï¼ŒäºŒæ˜¯é‡æ–°ç”³è¯·ä¸€ä¸ªé€šé…çš„æ³›åŸŸå SSL è¯ä¹¦ã€‚ å‡çº§ IIS 8 ä¹Ÿä¸æ˜¯ä¸€ä»¶ç®€å•äº‹ï¼Œå› ä¸ºç›®å‰çš„ IIS 7 æ˜¯åœ¨ Windows Server 2008 R2 Enterprise ä¸Šé¢è·‘çš„ï¼Œå¦‚æœæƒ³å‡çº§åˆ° IIS 8ï¼Œåˆ™éœ€è¦æŠŠæœåŠ¡å™¨ä¹Ÿå‡çº§åˆ° Windows Server 2012ï¼Œè¿™ç›¸å½“äºé‡è£…æœåŠ¡å™¨çš„ç³»ç»Ÿã€‚ é€šé…æ³›åŸŸå SSL è¯ä¹¦åœ¨é˜¿é‡Œäº‘ä¸Šçš„å®šä»·ä¹Ÿä¸ä¾¿å®œã€‚ äºæ˜¯æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€æ‰¾äº†æ‰¾å…è´¹çš„è¯ä¹¦é¢å‘æœºæ„ï¼Œç»“æœæœ‰å¿ƒæ ½èŠ±èŠ±ä¸å¼€ï¼Œæ— å¿ƒæ’æŸ³æŸ³æˆè«ï¼Œè¿˜çœŸè®©æˆ‘æ‰¾åˆ°äº†ä¸€ä¸ªã€‚ Let's Encrypt ã€Let's Encryptã€æ˜¯å›½å¤–ä¸€ä¸ªå…¬å…±çš„å…è´¹ SSL é¡¹ç›®ï¼Œç”± ISRG è”æ‰‹ç»„æˆè¯ä¹¦é¢å‘æœºæ„ï¼Œå¯ä»¥ç­¾å‘å…è´¹ SSL/TLS è¯ä¹¦ã€‚ISRGï¼ˆInternet Security Research Groupï¼Œäº’è”ç½‘å®‰å…¨ç ”ç©¶å°ç»„ï¼‰æ˜¯ä¸€ä¸ªå…³æ³¨ç½‘ç»œå®‰å…¨çš„å…¬ç›Šç»„ç»‡ï¼Œå…¶èµåŠ©å•†ä»éå•†ä¸šç»„ç»‡åˆ°è´¢å¯Œ 100 å¼ºå…¬å¸éƒ½æœ‰ï¼ŒåŒ…æ‹¬ Mozillaã€Akamaiã€Ciscoã€Facebookã€University of Michigan ç­‰ç­‰ã€‚ ã€Let's Encryptã€æ˜¯ä¸ºæ™®åŠ HTTPS è€Œå‘èµ·çš„ï¼Œå®ƒæ¨åŠ¨äº†åŸºç¡€ DV SSL è¯ä¹¦çš„æ™®åŠã€‚å…¶è¯ä¹¦å·²ç»è¢« Mozillaã€Googleã€Microsoft å’Œ Apple ç­‰ä¸»æµæµè§ˆå™¨æ”¯æŒï¼Œåªéœ€è¦ Web æœåŠ¡å™¨é…ç½®å¥½ HTTPS è¯ä¹¦ï¼Œæµè§ˆå™¨ä¼šåœ¨åŠ è½½æ—¶éªŒè¯ Web æœåŠ¡å™¨ HTTPS è¯ä¹¦æ˜¯å¦æœ‰æ•ˆã€‚éšç€ HTTPS çš„æ™®åŠï¼Œã€Let's Encryptã€ç›®å‰å·²æˆä¸ºå…¨çƒæœ€å—æ¬¢è¿çš„å…è´¹ SSL è¯ä¹¦ç­¾å‘æœºæ„ã€‚ ã€Let's Encryptã€çš„ä¼˜ç‚¹æœ‰ä¸¤ä¸ªï¼šå®Œå…¨å…è´¹ï¼Œé¿å… ISP åŠ«æŒï¼›ç”³è¯·é€Ÿåº¦å¿«ã€æ— éœ€æ³¨å†Œè´¦æˆ·ã€‚ ä½†æ˜¯æœ‰ä¸¤ç‚¹ä¹Ÿéœ€è¦æ³¨æ„ï¼š ã€Let's Encryptã€çš„åŸºç¡€ DV SSL è¯ä¹¦ï¼Œåªæä¾›äº†æ•°æ®åŠ å¯†ï¼Œä¸éªŒè¯èº«ä»½ï¼Œæ— æ³•å‘ç”¨æˆ·è¯æ˜ç½‘ç«™çš„æ‰€æœ‰è€…ã€‚ä½†å³ä½¿è¿™æ ·ä¹Ÿæ»¡è¶³äº†åŸºæœ¬éœ€è¦äº†ã€‚ ã€Let's Encryptã€ä¸€æ¬¡åªä¼šé¢å‘ 3 ä¸ªæœˆæœ‰æ•ˆæœŸçš„è¯ä¹¦ï¼Œåˆ°æœŸä¹‹åéœ€è¦è‡ªå·±å†ç»­ä¸Šï¼ˆä»ç„¶æ˜¯å…è´¹çš„ï¼‰ã€‚ æ—¢ç„¶æœ‰äº†å¯ä»¥å…è´¹ä½¿ç”¨çš„ SSL ç”³è¯·æœºæ„ï¼Œé‚£å°±ç”³è¯·è¿™ä¸ªå…è´¹çš„æ³›åŸŸå SSL è¯ä¹¦å§ã€‚ Cerbot ã€Let's Encryptã€å®˜ç½‘å¼•å¯¼æˆ‘ä»¬è¿›å…¥ã€Certbotã€è¿›è¡Œæ“ä½œã€‚ ä¸è¿‡ååˆ†å°´å°¬çš„æ˜¯ï¼Œæˆ‘çœ‹äº†åŠå¤©ä¸çŸ¥å¦‚ä½•ä¸‹æ‰‹ï¼Œç„¶åä¸Šç½‘æŸ¥äº†ä¸€åœˆå‘ç°ï¼Œå¤§ç¥ä»¬éƒ½æ˜¯ç”¨ä»£ç å‘½ä»¤æ¥å®Œæˆè¿™ä¸ªç¹ççš„æ“ä½œçš„ï¼Œè®©æˆ‘æœ›è€Œå´æ­¥ã€‚ Certify ç»æœ›ä¸­åˆæ‰¾åˆ°äº†ä¸€ä¸ªå¯ä»¥è·å–ã€Let's Encryptã€å…è´¹ SSL è¯ä¹¦çš„è½¯ä»¶ â€”â€” ã€Certifyã€ã€‚ ã€Certifyã€æ˜¯ä¸€ä¸ªå¯ä»¥è‡ªåŠ¨ç»­è®¢ã€Let's Encryptã€é¢å‘è¯ä¹¦çš„ç¬¬ä¸‰æ–¹ GUI è½¯ä»¶ï¼Œä½¿ç”¨å®ƒå¯ä»¥è‡ªåŠ¨é…ç½®ã€åˆ›å»ºå’Œè‡ªåŠ¨ç»­è®¢è¯ä¹¦ï¼Œå¹¶ä¸”åˆ°å¿«è¦ç»­è®¢çš„æ—¶å€™ä¼šè‡ªåŠ¨å‘é‚®ä»¶é€šçŸ¥æˆ‘ä»¬ã€‚ çœ‹åˆ°æ²¡çœ‹åˆ°æ²¡ï¼Ÿå®ƒè¯´ GUIï¼å›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ç®€ç›´å°ç™½ç¦éŸ³äº†å¥½å—ï¼Ÿ é¦–å…ˆå°†ã€Certifyã€ä¸‹è½½åˆ°æœåŠ¡å™¨ä¸Šå¹¶å®‰è£…ï¼Œæ³¨æ„å…¶ä¾èµ– Microsoft .NET Framework 4.5ï¼Œå®‰è£…æ—¶å¯èƒ½ä¼šæ”¶åˆ°ç›¸å…³æç¤ºã€‚ ç¬¬ä¸€æ¬¡å¯åŠ¨ç¨‹åºæ—¶ä¼šå¼¹å‡ºå¯¹è¯æ¡†è®©æˆ‘ä»¬å¡«å†™ä¸ªé‚®ç®±åœ°å€ï¼Œç­‰è¯ä¹¦å¿«è¦è¿‡æœŸçš„æ—¶å€™æˆ‘ä»¬ä¼šæ”¶åˆ°ç»­è®¢è¯ä¹¦çš„æé†’é‚®ä»¶ã€‚ ç„¶åè¿›åˆ°ä¸»ç•Œé¢ç‚¹å‡»å·¦ä¸Šè§’çš„ã€Œæ–°å»ºè¯ä¹¦ã€ï¼Œåœ¨ã€ŒCertificate Domainsã€ä¸­ï¼Œã€Certifyã€ä¼šè‡ªåŠ¨æ‰«æ IIS ä¸­çš„ç«™ç‚¹ï¼Œé€‰æ‹©æˆ‘ä»¬è¦ç”³è¯·è¯ä¹¦çš„åŸŸåï¼Œåœ¨ã€Œæ·»åŠ åŸŸåã€ä¸€æ ä¸­å¡«å†™æ³›åŸŸåï¼Œå³ã€Œ*.free.comã€ã€‚ ç‚¹å‡»ã€ŒADD DOMAINSã€ï¼Œç„¶åã€Certifyã€å°±ä¼šå¼¹å‡ºä»¥ä¸‹æç¤ºï¼š ç‚¹å‡»ç¡®å®šåï¼Œå°±å¯ä»¥çœ‹åˆ°ä¸‹æ–¹ã€Œè¦åŒ…å«çš„åŸŸåæˆ–å­åŸŸåã€ä¸­å‡ºç°äº†ã€Œ*.free.comã€å’Œã€Œfree.comã€ã€‚ ç„¶åç‚¹å‡»å³æ–¹ã€ŒAuthorizationã€ä¸­ä¿®æ”¹ã€ŒAuthorization Settingsã€ä¸­çš„ã€ŒéªŒè¯ç±»å‹ã€ä¸ºã€Œdns-01ã€ï¼Œå¹¶é€‰æ‹©ã€ŒDNS Update Methodã€ä¸ºã€Œ(Update DNS Manually))ã€ã€‚ è¿™ä¸€æ­¥æˆ‘æœ¬æ¥æƒ³é€‰çš„æ˜¯ã€ŒAliyun (Alibaba Cloud) DNS APIã€ï¼Œå› ä¸ºé˜¿é‡Œäº‘æ¯•ç«Ÿåœ¨å›½å†…ï¼Œå‡çº§çš„è¯æ€»ä¼šæ–¹ä¾¿ä¸€ç‚¹ï¼Œä½†æ˜¯å‘ç°é€‰æ‹©è¿™ä¸€é¡¹åå®ƒè¦æ±‚æˆ‘å¡«å†™ã€ŒDNS Zone Idã€ï¼Œç”±äºä¸çŸ¥é“è¿™ä¸€é¡¹æ€ä¹ˆå¡«å†™ï¼Œæ‰€ä»¥æˆ‘è¿˜æ˜¯é€‰äº†ã€Œ(Update DNS Manually)ã€ã€‚ ç„¶åå°±å¯ä»¥ç‚¹å‡»ã€Œè¯·æ±‚è¯ä¹¦ã€äº†ã€‚ ä½†æ˜¯ï¼Œå¯èƒ½ä¼šå‘ç°é‡åˆ° Pause çš„æƒ…å†µï¼Œè¿™æ—¶å€™å°±ä¼šæ”¶åˆ°é‚®ä»¶ï¼ŒåŸŸåè§£æéœ€è¦æ·»åŠ ä¸¤æ¡ TXT è®°å½•ï¼Œæ”¶åˆ°é‚®ä»¶ååœ¨é˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°ä¸­å¡«ä¸Šå»äº†å†æ¬¡è¯·æ±‚è¯ä¹¦ï¼Œå°±é€šè¿‡äº†ã€‚ å¾…å…¶æ‰§è¡Œå®Œæ¯•åï¼Œè¿”å›ã€Certifyã€çš„é¦–é¡µé¢å¯ä»¥çœ‹åˆ°ç«™ç«™ç‚¹å·²ç»æˆåŠŸä½¿ç”¨äº†ã€Let's Encryptã€çš„è¯ä¹¦äº†ã€‚ è¿™æ—¶å€™æ‰“å¼€ã€Internetä¿¡æ¯æœåŠ¡ï¼ˆIISï¼‰ç®¡ç†å™¨ã€å°±ä¼šå‘ç°ï¼Œã€Certifyã€å·²ç»è‡ªåŠ¨å¸®æˆ‘ä»¬ç»‘å®šå¥½è¯ä¹¦äº†ï¼ŒçœŸæ˜¯å¤ªäººæ€§åŒ–äº†ï¼Œæœ€åå†æ‰“å¼€ HTTPS çš„ç½‘ç«™æŸ¥çœ‹ä¸€ä¸‹ï¼Œæ­£å¸¸æ‰“å¼€ï¼Œå®Œç¾ã€‚ SSL For Free ä¸æƒ³ä¸‹è½½è½¯ä»¶çš„å¯ä»¥å°è¯•ä¸€ä¸‹ã€SSL For Freeã€è¿™ä¸ªç½‘ç«™ï¼Œå®ƒä¹Ÿæ˜¯ä¸€ä¸ªå¯ä»¥è·å–ã€Let's Encryptã€å…è´¹ SSL è¯ä¹¦çš„ç½‘ç«™ã€‚ è™½ç„¶æ˜¯å…¨è‹±æ–‡çš„ç½‘ç«™ï¼Œä½†ã€SSL For Freeã€è¿™ä¸ªç½‘ç«™å¯¹äºå°ç™½çš„æˆ‘æ¥è¯´å·²ç»æ˜¯éå¸¸å‹å¥½äº†ï¼Œé¦–å…ˆå¡«å†™å¥½æ³›åŸŸåï¼Œæ¯”å¦‚æˆ‘è¦ç”³è¯·å‡ ä¸ªç±»ä¼¼ã€Œ*.free.comã€çš„åŸŸåï¼Œåˆ™éœ€è¦åœ¨ä¸Šæ–¹å¡«å†™ã€Œfree.com *.free.comã€ï¼Œå³éœ€è¦åœ¨è¾“å…¥æ¡†è¾“å…¥æ ¹åŸŸåç©ºæ ¼å†è¾“å…¥â€œ*.åŸŸåâ€ã€‚ ä¸ä¸Šé¢æ­¥éª¤ç±»ä¼¼ï¼ŒåŸŸåè§£æéœ€è¦æ·»åŠ ä¸¤æ¡ TXT è®°å½•ï¼Œè¿›å…¥é˜¿é‡Œäº‘ç®¡ç†æ§åˆ¶å°æ·»åŠ å³å¯ã€‚ Something Else... è¯ä¹¦éœ€è¦æ¨é€åˆ°ã€Œè´Ÿè½½å‡è¡¡ï¼ˆSBLï¼‰ã€ä¸­ï¼Œåœ¨é˜¿é‡Œäº‘çš„ç®¡ç†æ§åˆ¶å°ä¸­å°†å…¶æ¨é€å³å¯ã€‚ åœ¨ Windowsã€Œè¿è¡Œã€ä¸­è¾“å…¥ mstsc å¯è¿œç¨‹è¿æ¥æœåŠ¡å™¨æ¡Œé¢ã€‚ åœ¨ Windows æœåŠ¡å™¨ã€Œè¿è¡Œã€ä¸­è¾“å…¥ iisreset /stop ä»¥åœæ­¢ IIS æœåŠ¡ã€‚ åœ¨ Windows æœåŠ¡å™¨ã€Œè¿è¡Œã€ä¸­è¾“å…¥ iisreset /start ä»¥å¯åŠ¨ IIS æœåŠ¡ã€‚ ","link":"https://LiarrDev.github.io/post/IIS-7-Binding-Certificates-for-Multiple-Domains/"},{"title":"Android Menu çš„æ ·å¼å®šåˆ¶","content":"å…¶å®åšåŸç”Ÿ Android å¼€å‘è¿™ä¹ˆä¹…ï¼Œå¯¹ Android çš„åŸç”Ÿæ§ä»¶è¿˜æ˜¯æ¯”è¾ƒæ»¡æ„çš„ï¼Œæ¯•ç«Ÿ Material Design ä¹Ÿä¸æ˜¯åƒç´ çš„ï¼Œä½†æ˜¯ç›®å‰ä¸å¤ªæ»¡æ„çš„åœ°æ–¹å¯èƒ½å°±æ˜¯ Menu äº†ã€‚ åŸç”Ÿ Menu çš„é»˜è®¤æ ·å¼å…¶å®å’Œå…¶ä»–æ§ä»¶ä¸€æ ·ï¼Œéƒ½æ˜¯ååˆ†ç®€çº¦çš„ã€‚ å¯ä»¥å‘ç°ï¼Œé»˜è®¤çš„ Menu å½“ Item æŠ˜å çš„æ—¶å€™ï¼Œä¸‹æ‹‰çš„ Menu æ˜¯ä¼šæŠŠ Toolbar æŒ¡ä½çš„ï¼Œè™½ç„¶è¿™å¹¶ä¸å½±å“æˆ‘ä»¬çš„ä½¿ç”¨ï¼Œä½†æ˜¯å´å’Œæˆ‘ä»¬æ—¢æœ‰çš„äº¤äº’ä¹ æƒ¯ç›¸æ‚–ï¼Œè€Œä¸”é»˜è®¤çš„ç™½è‰²èƒŒæ™¯ä¹Ÿå’Œæˆ‘ä»¬çš„ä¸»é¢˜é¢œè‰²ä¸æ­ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ¹æ®æˆ‘ä»¬çš„éœ€è¦å®šåˆ¶ã€‚ ä½†å®šåˆ¶çš„æ—¶å€™ï¼Œä½ ä¼šå‘ç°å®šåˆ¶çš„æ–¹å¼æ¯”å…¶ä»–æ§ä»¶è¦ç›¸å¯¹ç¹çï¼Œä¸åƒå…¶ä»–æ§ä»¶ä¸€æ ·ï¼Œåªéœ€è¦åˆ°ç›¸åº”çš„ layout æ–‡ä»¶ä¸­ä¿®æ”¹æ§ä»¶çš„å±æ€§å³å¯ï¼Œå®ƒè¿˜éœ€è¦ä¿®æ”¹å…¶ values æ–‡ä»¶å¹¶åœ¨ layout ä¸­å¼•ç”¨æ‰è¡Œã€‚ é¦–å…ˆä¿®æ”¹ã€Œstyles.xmlã€æ–‡ä»¶ï¼Œæ·»åŠ ä¸€ä¸ª &lt;style&gt; å®šä¹‰å…¶ Style å±æ€§ï¼š &lt;resources&gt; &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.DayNight.NoActionBar&quot;&gt; &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt; &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt; &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt; &lt;item name=&quot;actionOverflowMenuStyle&quot;&gt;@style/OverflowMenu&lt;/item&gt; &lt;/style&gt; &lt;style name=&quot;OverflowMenu&quot; parent=&quot;Base.Widget.AppCompat.PopupMenu.Overflow&quot;&gt; &lt;item name=&quot;overlapAnchor&quot;&gt;false&lt;/item&gt; &lt;item name=&quot;android:popupBackground&quot;&gt;@color/colorPrimary&lt;/item&gt; &lt;/style&gt; &lt;/resources&gt; å…¶ä¸­ overlapAnchor æ˜¯ç”¨æ¥ä¿®æ”¹ Menu æ‚¬æµ®ä½ç½®çš„ï¼Œé»˜è®¤ä¸º TRUEï¼Œå½“ä¸º FALSE çš„æ—¶å€™åˆ™ä¸é®æŒ¡ Toolbarã€‚ å¦‚æœä½¿ç”¨çš„æ˜¯ Toolbar è€Œä¸æ˜¯é»˜è®¤çš„ ActionBarï¼Œåˆ™ä¸è¦å¿˜äº†åœ¨ Toolbar æ§ä»¶ä¸­æ·»åŠ  app:popupTheme å±æ€§ï¼š &lt;android.support.v7.widget.Toolbar android:id=&quot;@+id/toolbar&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;?attr/actionBarSize&quot; android:background=&quot;?attr/colorPrimary&quot; android:theme=&quot;@style/ThemeOverlay.AppCompat.Dark.ActionBar&quot; app:popupTheme=&quot;@style/OverflowMenu&quot; /&gt; ä¸ºäº†ç¬¦åˆ Material Design ä»¥åŠå¼€å‘æ–¹ä¾¿éœ€è¦ï¼Œååˆ†å»ºè®®ä½¿ç”¨ Toolbar è€Œä¸æ˜¯ ActionBarï¼Œåœ¨å®šåˆ¶ Menu è¿™ä¸ªåœºæ™¯ä¸­ï¼Œå¦‚æœä½¿ç”¨ ActionBar åˆ™è¿˜éœ€è¦ä½¿ç”¨æ¯”è¾ƒç¹ççš„æ–¹æ³•æ‰‹åŠ¨ä¿®æ”¹ Menu ä¸­çš„å­—ä½“é¢œè‰²ï¼Œè€Œ Toolbar åªéœ€å®šä¹‰å¥½å…¶ä¸»é¢˜å³å¯è‡ªåŠ¨ä¿®æ”¹ã€‚ android:popupBackground åˆ™æ˜¯ç”¨æ¥ä¿®æ”¹ä¸‹æ‹‰ Menu æ—¶çš„èƒŒæ™¯é¢œè‰²ï¼Œé»˜è®¤æ˜¯æ·±ç°è‰²ï¼Œæˆ‘è¿™é‡Œåˆ™æŠŠå®ƒè®¾ç½®ä¸ºä¸ Toolbar ä¸€æ ·ï¼Œè¿™æ ·ä¼šæ¯”è¾ƒå’Œè°ã€‚ Toolbar ä¸Šçš„ Menu æˆ‘ä»¬ä¸€èˆ¬éƒ½ä¼šä¸ºå…¶è®¾ç½® ICONï¼Œå› ä¸ºç”¨æˆ·å¯¹å›¾å½¢çš„æ„ŸçŸ¥ä¼šå¼ºäºæ–‡å­—ï¼Œæ‰€ä»¥ ICON å¾ˆé‡è¦ï¼Œä½†æ˜¯ Menu é»˜è®¤æƒ…å†µä¸‹åªä¼šåœ¨ Toolbar ä¸Šæ˜¾ç¤º ICONï¼Œè€Œä¸‹æ‹‰åˆ™ä»…æ˜¾ç¤ºæ–‡å­—ï¼Œè¿™å°±ååˆ†ä¸å‹å¥½äº†ï¼Œç”šè‡³è¿˜æµªè´¹äº†ç¾å·¥çš„è®¾è®¡æˆæœï¼Œå¿…é¡»è¦æ”¹ã€‚ ä½†æ˜¯è¿™ä¸ªå±…ç„¶åœ¨æ ·å¼æ–‡ä»¶ä¸­æ˜¯ä¸èƒ½ç›´æ¥è®¾ç½®çš„ï¼Œéœ€è¦åˆ° Activity ä¸­é€šè¿‡åå°„è®¾ç½®å…¶æ˜¾ç¤ºã€‚ @Override public boolean onMenuOpened(int featureId, Menu menu) { if (menu != null) { if (menu.getClass() == MenuBuilder.class) { try { Method method = menu.getClass().getDeclaredMethod(&quot;setOptionalIconsVisible&quot;, Boolean.TYPE); method.setAccessible(true); method.invoke(menu, true); } catch (Exception e) { e.printStackTrace(); } } } return super.onMenuOpened(featureId, menu); } è¿™æ ·ï¼Œå°±èƒ½å¤Ÿå°† ICON å’Œæ–‡å­—åŒæ—¶æ˜¾ç¤ºå‡ºæ¥äº†ã€‚ è¿˜æœ‰åœ¨æœ€è¿‘çš„å¼€å‘ä¸­æˆ‘æ¯”è¾ƒå–œæ¬¢ä¸€ä½“åŒ–å¸ƒå±€ï¼Œå³ Toolbar å’Œä¸‹æ–¹èä¸ºä¸€ä½“ï¼Œè™½ç„¶ä¸çŸ¥é“ Material Design æ˜¯å¦æ¨å´‡è¿™ç§è®¾è®¡æ–¹å¼ï¼Œä½†æˆ‘ä¸ªäººè¿˜æ˜¯è§‰å¾—æŒºå¥½çœ‹çš„ã€‚ é‚£ä¹ˆå°±ä¼šå‡ºç°ä¸€ç§æƒ…å†µï¼ŒMenu çš„ã€ŒMoreã€ä¸‰ä¸ªç‚¹æ˜¯é»˜è®¤çš„ï¼Œé¢œè‰²ä¹Ÿæ˜¯è·Ÿéšé»˜è®¤çš„ä¸»é¢˜ï¼Œé‚£ä¹ˆå¦‚æœæˆ‘åœ¨é¡¹ç›®ä¸­æƒ³ä¿®æ”¹å®ƒçš„é¢œè‰²ä¹Ÿä¼šæ¯”è¾ƒéº»çƒ¦ï¼Œå¦‚ä¸‹ï¼š æˆ‘ä¸€å¼€å§‹çš„æƒ³æ³•æ˜¯ï¼Œä¼šæœ‰ä¸€ä¸ªå…³äº Color çš„å±æ€§è®©æˆ‘å¯ä»¥ç›´æ¥è®¾ç½®ï¼Œä½†æ˜¯æ€ä¹ˆæ‰¾éƒ½æ‰¾ä¸åˆ°ï¼Œæ— å¥ˆä¹‹ä¸‹åªèƒ½é€‰æ‹©å…¶ä»–æ–¹å¼ï¼Œä¿®æ”¹è¿™ä¸ªé»˜è®¤çš„å›¾æ ‡ã€‚ å…ˆå¯¼å…¥ä¸€ä¸ªå–œæ¬¢çš„ ICONï¼Œæˆ‘è¿™é‡Œåœ¨ã€Android Studioã€ä¸­æä¾›çš„å›¾æ ‡åº“ä¸­é€‰æ‹©äº†è·ŸåŸæ¥ç›¸åŒçš„ã€Œmore vertã€å›¾æ ‡ï¼Œå¹¶ä¿®æ”¹ä¸ºåˆé€‚çš„é¢œè‰²ã€‚ ç„¶ååœ¨ã€Œstyles.xmlã€æ–‡ä»¶ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„ &lt;style&gt;ï¼š &lt;resources&gt; &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt; &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt; &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt; &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt; &lt;item name=&quot;actionOverflowMenuStyle&quot;&gt;@style/OverflowMenu&lt;/item&gt; &lt;item name=&quot;actionOverflowButtonStyle&quot;&gt;@style/OverflowButtonStyle&lt;/item&gt; &lt;/style&gt; ... &lt;style name=&quot;OverflowButtonStyle&quot; parent=&quot;Base.Widget.AppCompat.ActionButton.Overflow&quot;&gt; &lt;item name=&quot;android:src&quot;&gt;@drawable/ic_more&lt;/item&gt; &lt;/style&gt; &lt;/resources&gt; è¿™é‡Œé€šè¿‡æŒ‡å®š actionOverflowButtonStyle çš„ Style è®¾å®šå…¶å›¾æ ‡ã€‚ åŒæ—¶ï¼Œæˆ‘è¿˜æƒ³æŒ‡å®š Menu ä¸­çš„å­—ä½“é¢œè‰²ï¼Œé‚£ä¹ˆæˆ‘å¯ä»¥æ·»åŠ å±æ€§ï¼š &lt;resources&gt; &lt;style name=&quot;AppTheme&quot; parent=&quot;Theme.AppCompat.Light.NoActionBar&quot;&gt; &lt;item name=&quot;colorPrimary&quot;&gt;@color/colorPrimary&lt;/item&gt; &lt;item name=&quot;colorPrimaryDark&quot;&gt;@color/colorPrimaryDark&lt;/item&gt; &lt;item name=&quot;colorAccent&quot;&gt;@color/colorAccent&lt;/item&gt; &lt;item name=&quot;actionOverflowMenuStyle&quot;&gt;@style/OverflowMenu&lt;/item&gt; &lt;item name=&quot;actionOverflowButtonStyle&quot;&gt;@style/OverflowButtonStyle&lt;/item&gt; &lt;item name=&quot;actionMenuTextColor&quot;&gt;@android:color/white&lt;/item&gt; &lt;/style&gt; ... &lt;/resources&gt; åªéœ€æŒ‡å®š actionMenuTextColor çš„é¢œè‰²å³å¯ï¼Œæˆ‘åœ¨è¿™é‡Œç›´æ¥æŒ‡å®šä¸ºç™½è‰²ã€‚ å…¶å® Menu è¿˜æœ‰å…¶ä»–å¯å®šåˆ¶çš„å±æ€§ï¼Œæ¯”å¦‚èƒŒæ™¯é€æ˜ä¹‹ç±»çš„ï¼Œä½†éƒ½ä¸èƒ½ç›´æ¥åœ¨ layout ä¸­ä¿®æ”¹æ§ä»¶å±æ€§ï¼Œæ‰€ä»¥çš„ç¡®æ˜¯æ¯”è¾ƒæŠ˜è…¾çš„ã€‚ ","link":"https://LiarrDev.github.io/post/Android-Menu-Style-Customization/"},{"title":"WeChat H5 Payment for Android","content":"é¡¹ç›® App éœ€è¦åšåˆ°æ”¯ä»˜åŠŸèƒ½ï¼Œé¦–å…ˆæ¥å…¥çš„æ˜¯ WeChat Payã€‚ä¸šåŠ¡é€»è¾‘éœ€è¦ï¼Œæ”¯ä»˜åŠŸèƒ½éœ€è¦åœ¨ WebView ä¸­å®ç°ï¼Œä¹Ÿå°±æ˜¯ä½¿ç”¨ H5 æ”¯ä»˜ã€‚ æˆ‘åªè¦å†™ä¸€ä¸ªæ­è½½ WebView ç»„ä»¶çš„ Activity å¹¶åˆå§‹åŒ–å¥½ç›¸å…³è®¾ç½®ï¼Œç„¶åå‰©ä¸‹çš„äº¤ç»™ Web å¼€å‘å°±å¥½äº†ã€‚ é¦–å…ˆï¼Œæƒ³è¦ä½¿ç”¨ WeChat Pay çš„æ¥å£ï¼Œè¦å…ˆå‘å¾®ä¿¡æ”¯ä»˜å•†æˆ·å¹³å°æäº¤ç”³è¯·ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯éœ€è¦åœ¨ H5 ä¸­è°ƒèµ·å¾®ä¿¡æ”¯ä»˜ï¼Œæ‰€ä»¥å°±éœ€è¦ç”³è¯· H5 æ”¯ä»˜çš„æƒé™ï¼Œæäº¤ç”³è¯·ææ–™åéœ€è¦ç­‰å¾… 3~5 ä¸ªå·¥ä½œæ—¥åæ‰èƒ½çŸ¥é“ç”³è¯·ç»“æœï¼Œç”±äºæ˜¯æµ‹è¯•ç‰ˆæœ¬çš„åŸå› ï¼Œå†…å®¹å¡«å†™çš„å¹¶ä¸æ˜¯å¤ªå®Œå–„ï¼Œä½†æ˜¯å®¡æ ¸ä¹Ÿä¸æ˜¯å¤ªä¸¥æ ¼ã€‚ æ¥ä¸‹æ¥å°±æ˜¯åœ¨ H5 ä¸­æŒ‰ç…§å¾®ä¿¡å®˜æ–¹æä¾›çš„å¼€å‘æ–‡æ¡£æ¥æ­å»ºè¿™ä¸ªæ”¯ä»˜æ¥å£äº†ã€‚ Android æ–¹é¢ï¼Œä¹Ÿéœ€è¦é…ç½®ä¸€å®šçš„ä»£ç ï¼Œç›´æ¥è¯·æ±‚çš„è¯ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š å¾®ä¿¡æ”¯ä»˜çš„å¼€å‘æ–‡æ¡£æœ‰ç›¸å…³çš„é”™è¯¯æè¿°ï¼šå•†å®¶å‚æ•°æ ¼å¼æœ‰è¯¯ï¼Œè¯·è”ç³»å•†å®¶è§£å†³ã€‚ å®˜æ–¹æä¾›çš„è§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š å½“å‰è°ƒèµ·H5æ”¯ä»˜çš„refererä¸ºç©ºå¯¼è‡´ï¼Œä¸€èˆ¬æ˜¯å› ä¸ºç›´æ¥è®¿é—®é¡µé¢è°ƒèµ·H5æ”¯ä»˜ï¼Œè¯·æŒ‰æ­£å¸¸æµç¨‹è¿›è¡Œé¡µé¢è·³è½¬åå‘èµ·æ”¯ä»˜ï¼Œæˆ–è‡ªè¡ŒæŠ“åŒ…ç¡®è®¤refererå€¼æ˜¯å¦ä¸ºç©º å¦‚æœæ˜¯APPé‡Œè°ƒèµ·H5æ”¯ä»˜ï¼Œéœ€è¦åœ¨webviewä¸­æ‰‹åŠ¨è®¾ç½®refererï¼Œå¦‚ï¼ˆ Map extraHeaders = new HashMap(); extraHeaders.put(&quot;Referer&quot;, &quot;å•†æˆ·ç”³è¯·H5æ—¶æäº¤çš„æˆæƒåŸŸå&quot;);//ä¾‹å¦‚ http://www.baidu.com )ï¼‰ ä¸è¿‡è¿™ä¸ªç¤ºä¾‹ä¹Ÿå¯¹å°ç™½å¤ªä¸å‹å¥½äº†ï¼Œå°±è¿™ä¹ˆä¸¤è¡Œä»£ç ï¼Œååˆ†è€ƒéªŒæƒ³è±¡åŠ›ã€‚ åœ¨ç½‘ä¸ŠæŸ¥äº†ä¸‹å‰è¾ˆä»¬çš„åšæ³•ï¼Œå¾—å‡ºä»¥ä¸‹ä»£ç ï¼š webView.getSettings().setJavaScriptEnabled(true); webView.getSettings().setDomStorageEnabled(true); // åˆ¤æ–­ä¸ºå¾®ä¿¡æ”¯ä»˜å¤´åˆ™è°ƒèµ·å¾®ä¿¡æ”¯ä»˜ webView.setWebViewClient(new WebViewClient() { @Override public boolean shouldOverrideUrlLoading(WebView view, String url) { if (url.startsWith(&quot;weixin://wap/pay?&quot;)) { Intent intent = new Intent(); intent.setAction(Intent.ACTION_VIEW); intent.setData(Uri.parse(url)); startActivity(intent); return true; } else { Map extraHeaders = new HashMap(); extraHeaders.put(&quot;Referer&quot;, domain); // å•†æˆ·ç”³è¯·H5æ—¶æäº¤çš„æˆæƒåŸŸå view.loadUrl(url, extraHeaders); } return super.shouldOverrideUrlLoading(view, url); } }); webView.loadUrl(payUrl); è¿™é‡Œé‡å†™äº† WebViewClient å†…çš„ shouldOverrideUrlLoading(WebView, String) æ–¹æ³•ï¼Œä½¿å…¶æ£€æµ‹ URL ä¸­æ˜¯å¦å¸¦æœ‰å¾®ä¿¡æ”¯ä»˜å¤´ï¼Œå³ weixin://wap/pay?ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è°ƒèµ· WeChat Payï¼Œè€Œåœ¨å®æµ‹ä¸­ï¼ŒåŸºæœ¬éƒ½ä¼šè·‘åˆ°è¿™ä¸ªåˆ¤æ–­ä¸­ï¼Œè€Œä¸ä¼šè·‘åˆ°ä¸‹æ–¹å¾®ä¿¡æä¾›çš„æ–¹æ³•ï¼Œæ‰€ä»¥æš‚æ—¶ä¸çŸ¥é“å…¶æœ‰ä½•ä½œç”¨ã€‚ å¦å¤–ï¼Œä½¿ç”¨ shouldOverrideUrlLoading(WebView, String) çš„æ—¶å€™å‘ç°è¯¥æ–¹æ³•è¢«æ ‡è®°ä¸ºå·²è¿‡æ—¶ï¼Œè™½ç„¶æš‚æ—¶åªæ˜¯ä¸æ¨èä½¿ç”¨ï¼Œæœªè¢«æŠ›å¼ƒï¼Œä¸è¿‡è¿˜æ˜¯å°½å¿«è½¬ç§»åˆ°æ›´æ–°çš„æ–¹æ³•ä¸Šæ¯”è¾ƒå¥½ï¼Œæˆ‘åœ¨æ–‡æ¡£ä¸­çœ‹åˆ°æœ‰ä¸€ä¸ªç›¸ä¼¼çš„æ–¹æ³• shouldOverrideUrlLoading(WebView, WebResourceRequest)ï¼Œç²—ç•¥çš„æµè§ˆäº†ä¸€ä¸‹ï¼Œä¼¼ä¹è¿˜æ²¡æœ‰äººä½¿ç”¨è¯¥æ–¹æ³•æ›¿ä»£ä¸Šé¢çš„æ–¹æ³•ï¼Œäºæ˜¯è‡ªè¡Œå°è¯•äº†ä¸€ä¸‹ï¼Œå‘ç°å¯ä»¥æŠŠä¸Šæ–¹çš„ä»£ç æ”¹å†™ä¸ºï¼š @Override public boolean shouldOverrideUrlLoading(WebView view, WebResourceRequest request) { if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.LOLLIPOP) { String url = request.getUrl().toString(); if (url.startsWith(&quot;weixin://wap/pay?&quot;)) { Intent intent = new Intent(); intent.setAction(Intent.ACTION_VIEW); intent.setData(Uri.parse(url)); startActivity(intent); return true; } else { Map extraHeaders = new HashMap(); extraHeaders.put(&quot;Referer&quot;, DOMAIN); // å•†æˆ·ç”³è¯·H5æ—¶æäº¤çš„æˆæƒåŸŸå view.loadUrl(url, extraHeaders); } } return super.shouldOverrideUrlLoading(view, request); } å…¶å®å·®åˆ«ä¹Ÿä¸å¤§ï¼Œåªä¸è¿‡ URL ä¸èƒ½ä»å½¢å‚ä¸­ç›´æ¥è·å–è€Œæ˜¯è¦ä» WebResourceRequest ä¸­è·å–ç½¢äº†ã€‚ æœ‰æ—¶å€™ä¸è¡Œå¯èƒ½æ˜¯å› ä¸º Referer æ²¡å†™è¿›å»ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•æŠ“å– Refererï¼š MyWebViewClient myWebViewClient = new MyWebViewClient() { @Override public boolean shouldOverrideUrlLoading(WebView view, String url) { ... Log.d(&quot;===WebViewURL===&quot;, view.getUrl()); // æ‰“å°å½“å‰é¡µé¢çš„ Url Uri ref = getReferrer(); // æŠ“å– Referer if (ref != null) { Log.d(&quot;====REFERER====&quot;, ref.toString()); } else { Log.e(&quot;====REFERER====&quot;, &quot;NULL&quot;); } return super.shouldOverrideUrlLoading(view, url); } }; ","link":"https://LiarrDev.github.io/post/Wechat-H5-Payment-For-Android/"},{"title":"Android è·å–å’Œæ¸…é™¤ WebView ä¸­çš„ Cookie","content":"é¡¹ç›®ä¸­å¦‚æœç”¨åˆ°äº† WebViewï¼Œé‚£å°±å…ä¸äº†è·Ÿ Cookie æ‰“äº¤é“ã€‚ æ¯”å¦‚ï¼Œä½ æ—¶å¸¸éœ€è¦åˆ¤æ–­ç”¨æˆ·çš„ç™»å½•çŠ¶æ€ï¼Œå¦‚æœç”¨æˆ·æœªç™»å½•ï¼Œé‚£å°±å¿…é¡»é™åˆ¶éƒ¨åˆ†åŠŸèƒ½çš„ä½¿ç”¨ã€‚ é‚£ä¹ˆåŸç”Ÿ Android è¯¥å¦‚ä½•è·å– WebView ä¸­çš„ Cookie å‘¢ï¼Ÿ æˆ‘ä»¬å¯ä»¥å®šåˆ¶ä¸€ä¸ª WebViewClient å¹¶é‡å†™å†…éƒ¨çš„ç›¸å…³æ–¹æ³•æ¥å®ç°ï¼Œå¹¶ä¸å»ºè®®ä½¿ç”¨åŒ¿åç±»çš„æ–¹å¼ã€‚æ–°å»ºä¸€ä¸ªç±» MyWebViewClient ç»§æ‰¿è‡ª WebViewClientï¼Œç„¶åé‡å†™å…¶ onPageFinished(WebView, String) æ–¹æ³•ï¼š public class MyWebViewClient extends WebViewClient { String cookieTag = null; String cookieTel = null; @Override public void onPageFinished(WebView view, String url) { super.onPageFinished(view, url); CookieManager cookieManager = CookieManager.getInstance(); String cookieStr = cookieManager.getCookie(url); try { cookieTag = cookieStr.substring(0, 8); // ç¡®å®šå‰ç¼€æ˜¯ä¸æ˜¯ phoneNum if (cookieTag.equals(&quot;phoneNum&quot;)) { cookieTel = cookieStr.substring(9, 20); // phoneNum åé¢çš„ç”µè¯å·ç  } } catch (Exception e) { e.printStackTrace(); } } public String getCookieTag() { return cookieTag; } public String getCookieTel() { return cookieTel; } } ä½¿ç”¨ CookieManager çš„ getCookie() æ–¹æ³•æ¥è·å–å­˜å‚¨çš„ Cookieï¼Œè¿™é‡Œåˆ¤æ–­ Cookie ä¸­çš„å‰ç¼€æ˜¯å¦ä¸º phoneNumï¼Œå¦‚æœæ˜¯çš„è¯è¯æ˜å·²ç»ç™»å½•ï¼Œå¹¶æˆªå–åé¢ 11 ä½æ•°å­—ä¸ºç”¨æˆ·çš„æ‰‹æœºå·ç ï¼Œç„¶åé€šè¿‡ Getter æ¥æä¾›ä¼ å€¼æ–¹æ³•ã€‚ ç„¶ååœ¨ WebView ä¸­é…ç½®è¿™ä¸ªè‡ªå®šä¹‰çš„ WebViewClientï¼š MyWebViewClient myWebViewClient = new MyWebViewClient(); webView.setWebViewClient(myWebViewClient); æ¥ç€å°±å¯ä»¥é€šè¿‡ç›¸å…³çš„ Getter æ–¹æ³•æ¥è·å–ä¼ å€¼ï¼š String tel = myWebViewClient.getCookieTel(); äºæ˜¯è·å– Cookie çš„æ–¹æ³•å°±å®Œæˆäº†ã€‚ æœ‰äº† Cookieï¼Œå½“ç”¨æˆ·é€€å‡ºç™»å½•æ—¶ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦æ¸…é™¤ Cookieï¼š logOutBtn.setOnClickListener(v -&gt; { CookieSyncManager.createInstance(this); CookieSyncManager.getInstance().startSync(); CookieManager.getInstance().removeSessionCookie(); CookieManager.getInstance().removeAllCookie(); CookieSyncManager.getInstance().sync(); webView.clearCache(true); webView.getSettings().setCacheMode(WebSettings.LOAD_NO_CACHE); webView.loadUrl(loginUrl); // é‡æ–°åŠ è½½ç™»å½•é¡µé¢ Intent intent = getIntent(); finish(); startActivity(intent); }); Android ä¸ºæˆ‘ä»¬æä¾›äº†å¾ˆå¤šä¸æ¸…é™¤ Cookie ç›¸å…³çš„æ“ä½œï¼Œæˆ‘åŸºæœ¬éƒ½å†™ä¸Šå»äº†ï¼Œä½ ä¼šå‘ç°æˆ‘åœ¨ä¸‹é¢é”€æ¯äº†å½“å‰ Activity å¹¶é‡æ–°å¯åŠ¨ï¼ŒåŸå› æ˜¯ä¸Šé¢æ¸…é™¤çš„æ˜¯æœ¬åœ°çš„ Cookieï¼Œä½†æœ‰äº›é€»è¾‘æˆ‘ä»¬å·²ç»ä» Cookie ä¸­è·å–äº†å€¼å¹¶å­˜å‚¨åœ¨å…¨å±€å˜é‡ä¸­ï¼Œä½¿æŸäº›ç™»å½•åæ‰èƒ½ä½¿ç”¨çš„åŠŸèƒ½å³ä½¿åœ¨æ¸…é™¤ Cookie åä¾ç„¶å¯ä»¥ä½¿ç”¨ï¼Œæ‰€ä»¥é”€æ¯å½“å‰ Activity å¯ä»¥æŠŠä¾é™„è¯¥ Activity ä¸Šçš„å˜é‡æˆ–å¼•ç”¨éšç€ Activity çš„ç”Ÿå‘½å‘¨æœŸè€Œæ¶ˆäº¡ã€‚ å½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡å…¶ä»–çš„é€»è¾‘é¿å…è¿™ä¸ªé—®é¢˜ï¼Œä¸è¿‡æˆ‘è§‰å¾—ä¼šå¤æ‚å¾ˆå¤šï¼Œä¸å¦‚è¿™ä¸ªæ–¹æ³•ç”¨å¾—æ–¹ä¾¿ã€‚ ","link":"https://LiarrDev.github.io/post/Get-and-Clear-Cookies-in-WebView/"},{"title":"Android ä½¿ç”¨ Dialog æ ·å¼çš„ Activity","content":"é¡¹ç›®ä¸­é‡åˆ°ä¸€ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨ Service ä¸­å¼¹å‡º Dialog ä»¥æ˜¾ç¤ºæ¶ˆè´¹ä¿¡æ¯ï¼Œä½†æ˜¯ Dialog éœ€è¦ä¾é™„äºä¸€ä¸ª Activityï¼Œä½†æ˜¯å½“ç”¨æˆ·é€€å‡ºåº”ç”¨ä¹‹åï¼Œè¯¥åº”ç”¨çš„ Activity å°±å·²å…¨éƒ¨é”€æ¯ï¼Œæ‰€ä»¥åœ¨ Service ä¸­å¼¹å‡ºçš„ Dialog ä¹Ÿå°±æ²¡æœ‰äº†å¯ä»¥ä¾é™„çš„ Activity äº†ã€‚ ç½‘ä¸Šæ™®éæ˜¯å°†è¿™ä¸ªåº”ç”¨çš„ Dialog è®¾ç½®æˆä¸€ä¸ªç³»ç»Ÿçº§çš„ Dialogï¼Œå³ä¸€ä¸ªå…¨å±€æ€§è´¨çš„æç¤ºæ¡†ï¼Œè¿™æ ·ï¼Œæ— è®ºå®ƒç°åœ¨å¤„äºä½•ç§ç•Œé¢ä¹‹ä¸‹ï¼Œåªè¦è°ƒç”¨ show() å°±å¯ä»¥å¼¹å‡ºæç¤ºæ¡†äº†ã€‚ è¯¥æ–¹æ³•ç”±äºé…ç½®èµ·æ¥ç›¸å¯¹éº»çƒ¦ï¼Œè€Œä¸”å„å¤§å‚å•†çš„æƒé™ç®¡ç†å„ä¸ç›¸åŒï¼Œäºæ˜¯æˆ‘æ”¹ç”¨äº†ä¸€ç§æ›´ä¸ºç®€å•ç²—æš´çš„æ–¹æ³•â€”â€”ç›´æ¥ä» Service ä¸­å¼¹å‡º Activityï¼ŒActivity ä¸ºæˆ‘ä»¬æä¾›äº†å¤šç§ä¸»é¢˜ï¼Œæˆ‘ä»¬åªéœ€é€‰æ‹©ä¸€ä¸ªå¼¹çª—ç±»å‹çš„ä¸»é¢˜å³å¯ã€‚ é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Activityï¼Œç„¶ååœ¨ã€ŒAndroidManifest.xmlã€ä¸­ä¿®æ”¹è¿™ä¸ª Activity çš„ä¸»é¢˜ï¼š &lt;activity android:name=&quot;.DialogActivity&quot; android:theme=&quot;@style/Theme.AppCompat.Light.Dialog.Alert&quot; /&gt; å…¶å® Dialog ä¸»é¢˜ä¹ŸæŒºå¤šçš„ï¼Œæœ‰ç¾æœ‰ä¸‘ï¼Œå¾—ç›Šäº IDE çš„æ™ºèƒ½æé†’ï¼Œè¾“å…¥â€œDialogâ€å°±åˆ—å‡ºäº†ä¸€å¤§å †ï¼Œæˆ‘ä¹Ÿæ‡’å¾—ä¸€ä¸ªä¸ªè¯•äº†ï¼ŒæŒ‘äº†ä¸¤ä¸‰ä¸ªçœ‹ä¸‹æ•ˆæœï¼Œå‘ç°æœ€å¥½çœ‹å°±æ˜¯ä¸Šé¢è¿™ä¸ªï¼Œæ‰€ä»¥å°±é€‰å®ƒäº†ã€‚ ç„¶åå¼€å§‹å†™å¸ƒå±€æ–‡ä»¶ï¼Œè™½ç„¶æ˜¯ Dialog æ ·å¼ï¼Œä½†åªéœ€æŒ‰ç…§å¹³å¸¸å†™ Activity å¸ƒå±€çš„ä¹ æƒ¯æ¥å†™å³å¯ã€‚ &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;match_parent&quot; android:orientation=&quot;vertical&quot; android:padding=&quot;10dp&quot; tools:context=&quot;.DialogActivity&quot;&gt; &lt;TextView android:id=&quot;@+id/dialog_message&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_margin=&quot;15dp&quot; /&gt; &lt;Button android:id=&quot;@+id/dialog_positive_button&quot; android:layout_width=&quot;match_parent&quot; android:layout_height=&quot;wrap_content&quot; android:layout_marginTop=&quot;10dp&quot; android:background=&quot;@color/colorPrimary&quot; android:text=&quot;ç¡®å®š&quot; android:textColor=&quot;#FFFFFF&quot; /&gt; &lt;/LinearLayout&gt; å¸ƒå±€ååˆ†ç®€å•ï¼Œä¸€ä¸ªçºµå‘çº¿æ€§å¸ƒå±€ï¼Œé‡Œé¢å°±ä¸€ä¸ªæ–‡æœ¬æ˜¾ç¤ºæ¡†å’Œä¸€ä¸ªæŒ‰é’®ï¼Œå®½åº¦éƒ½å¡«æ»¡çˆ¶è§†å›¾ï¼Œé«˜åº¦åˆ™åŒ…è£¹è¯¥ç»„ä»¶ï¼Œè¿™åº”è¯¥æ˜¯å¤šå¹´ Windows ç³»ç»Ÿä»¥åŠå¤šç§æ“ä½œç³»ç»Ÿå’Œåº”ç”¨è¾¾æˆçš„ä¸€ç§ä¸æˆæ–‡çš„å…±è¯†ï¼Œä½¿æˆ‘ä»¬ä½œä¸ºç”¨æˆ·ä¹Ÿå½¢æˆäº†å›ºæœ‰çš„å°è±¡ã€‚ æœ€åå°±æ˜¯é€»è¾‘ä»£ç å®ç°äº†ï¼ŒåŒæ ·æå…¶ç®€å•ï¼Œå°±åƒå¹³å¸¸å†™ Activity çš„é€»è¾‘ä¸€æ ·ã€‚ public class DialogActivity extends AppCompatActivity { @Override protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.activity_dialog); TextView dialogMessage = (TextView) findViewById(R.id.dialog_message); String details = getIntent().getStringExtra(&quot;dialogMessage&quot;); dialogMessage.setText(details); Button dialogPositiveButton = (Button) findViewById(R.id.dialog_positive_button); dialogPositiveButton.setOnClickListener(new View.OnClickListener() { @Override public void onClick(View view) { finish(); } }); } } è·å–åˆ° TextView å’Œ Button çš„å®ä¾‹ï¼ŒTextView é€šè¿‡ getIntent() è·å– Service ä¸­ä¼ è¿‡æ¥çš„å†…å®¹å¹¶æ˜¾ç¤ºï¼Œè€Œ Button åˆ™è´Ÿè´£å…³é—­è¿™ä¸ª Activityã€‚ å®é™…æ•ˆæœå¦‚ä¸‹ï¼š ","link":"https://LiarrDev.github.io/post/Android-Activity-with-Dialog-Theme/"},{"title":"Android ä¸º WebView é‡å†™ Back é”®","content":"ç°åœ¨å¾ˆå¤š App ä¸Šè®¸å¤šå†…å®¹éƒ½é‡‡ç”¨ WebView æ¥å±•ç¤º H5 å†…å®¹ï¼Œä»¥å‡å°‘å¼€å‘æ—¶é—´å’Œå¼€å‘æˆæœ¬ï¼Œä½†æ˜¯è¿™ä¹Ÿå°±é‡åˆ°äº†ä¸€ä¸ªé—®é¢˜ã€‚ åœ¨ Android åº”ç”¨ä¸­ï¼Œæ˜¯ä»¥æ ˆæ¥å±•ç¤ºä¸åŒçš„ UI ç•Œé¢çš„ï¼Œæ ˆçš„æ¦‚å¿µç›¸ä¿¡å­¦è¿‡å¼€å‘çš„äººéƒ½ä¸ä¼šé™Œç”Ÿï¼Œå…ˆè¿›åå‡ºå˜›ã€‚ ä½†æ˜¯ï¼ŒWebView ç›¸å½“äºä¸€ä¸ªæµè§ˆå™¨å®¹å™¨ï¼Œæ˜¯åµŒåœ¨ä¸€ä¸ª Activity ä¸­çš„ï¼Œæ‰€ä»¥é‡åˆ°çš„é—®é¢˜å°±æ˜¯ï¼Œå½“åº”ç”¨æ£€æµ‹åˆ°ç”¨æˆ·è§¦æ‘¸ Back é”®æ—¶ï¼Œä¼šæŠŠè¿™ä¸ª Activity ä»æ ˆä¸­ç§»é™¤ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœæˆ‘åœ¨ç¬¬ä¸€ä¸ª Activity ä¸­ä½¿ç”¨ WebView çš„è¯ï¼Œæ— è®ºç”¨æˆ·åœ¨è¿™ä¸ª WebView ä¸­è¿›è¡Œäº†ä»€ä¹ˆæ“ä½œï¼Œåªè¦è§¦æ‘¸ Back é”®ï¼Œå°±ç›¸å½“äºé€€å‡ºç¨‹åºã€‚ è¿™æ˜¾ç„¶ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™ Back é”®çš„å“åº”æ–¹æ³•ï¼Œè®©ç¨‹åºç›‘æµ‹åˆ°å½“ç”¨æˆ·è§¦æ‘¸ Back é”®æ—¶ï¼Œå¦‚æœ WebView èƒ½å¤Ÿè¿”å›ï¼Œåˆ™ä½¿ç½‘é¡µè¿”å›ä¸Šä¸€é¡µï¼Œå¦‚æœæ²¡æœ‰ä¸Šä¸€é¡µï¼Œåˆ™æŒ‰ç…§æ­£å¸¸çš„ Back é”®é€»è¾‘æ“ä½œã€‚ æ–¹æ³•ä¸€ï¼Œé‡å†™ onKeyDown() æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š @Override public boolean onKeyDown(int keyCode, KeyEvent event) { if(keyCode == KeyEvent.KEYCODE_BACK &amp;&amp; webView.canGoBack()) { webView.goBack(); return true; } return super.onKeyDown(keyCode, event); } ç›‘æµ‹å½“ keyCode ä¸º Back é”®å¹¶ä¸”ç½‘é¡µå¯å›é€€æ—¶åˆ™ä½¿ç½‘é¡µè¿”å›ã€‚è¿”å›å€¼åœ¨è¿™é‡Œè¡¨ç¤ºæ˜¯å¦èƒ½å®Œå…¨å¤„ç†è¯¥äº‹ä»¶ï¼Œåœ¨æ­¤å¤„è¿”å› TRUEï¼Œä»¥é˜²æ­¢æ­¤äº‹ä»¶è¢«è¿›ä¸€æ­¥ä¼ æ’­ï¼Œå¦‚æœè¿”å› FALSEï¼Œåˆ™è¡¨ç¤ºè¿˜æ²¡æœ‰å¤„ç†å®Œè¿™ä¸ªäº‹ä»¶ï¼Œå®ƒåº”è¯¥ç»§ç»­ä¼ æ’­åˆ°å…¶ä»–ç›‘å¬ã€‚ æ–¹æ³•äºŒï¼šé‡å†™ onBackPressed() æ–¹æ³•ï¼Œä»£ç å¦‚ä¸‹ï¼š @Override public void onBackPressed() { if (webView.canGoBack()) { webView.goBack(); } else { super.onBackPressed(); } } éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œsuper.onBackPressed() ä¼šè‡ªåŠ¨è°ƒç”¨ finish() æ–¹æ³•ï¼Œå…³é—­å½“å‰ Activityï¼Œæ‰€ä»¥è¿™é‡Œæ”¾åœ¨ ELSE åˆ†æ”¯æ‰§è¡Œï¼Œå³å½“ç½‘é¡µä¸å¯å›é€€çš„æƒ…å†µä¸‹é”€æ¯å½“å‰ Activityã€‚ è¿™ä¸¤ä¸ªæ–¹æ³•å…¶å®å¤§åŒå°å¼‚ï¼Œéƒ½æ˜¯å…ˆä½¿ç”¨ WebView.canGoBack() æ–¹æ³•æ¥åˆ¤æ–­ç½‘é¡µæ˜¯å¦å¯ä»¥å›é€€ï¼Œå¦‚æœå¯ä»¥çš„è¯å°±æ‰§è¡Œ WebView.goBack() ä½¿å…¶è¿”å›ä¸Šä¸€é¡µï¼Œå¦‚æœä¸å¯ä»¥å›é€€ï¼Œåˆ™è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œé”€æ¯å½“å‰ Activityï¼Œå”¯ä¸€çš„åŒºåˆ«å°±æ˜¯ï¼ŒonKeyDown() æ–¹æ³•ç›‘å¬çš„æ˜¯æ‰‹æœºä¸Šæ‰€æœ‰æŒ‰é”®ï¼Œç„¶åå†åœ¨è¯¥æ–¹æ³•å†…éƒ¨è¿›è¡Œåˆ¤æ–­æ˜¯å¦ä¸º Back é”®ï¼Œè€Œ onBackPressed() æ–¹æ³•åˆ™ä»…ç›‘å¬ Back é”®ã€‚ å½“ç„¶ï¼Œè¿™æ ·è¿˜ä¼šé‡åˆ°ä¸€ä¸ªäº¤äº’ååˆ†ä¸å‹å¥½çš„æƒ…å†µï¼Œå°±æ˜¯å¦‚æœç”¨æˆ·åœ¨ WebView ä¸­è¿›è¡Œäº†å¤šæ­¥æ“ä½œï¼Œå½“ç”¨æˆ·æƒ³è¦é€€å‡ºåº”ç”¨æ—¶ï¼Œéœ€è¦è¿ç»­ç‚¹å‡»å¤šæ¬¡ Back é”®ï¼Œä½¿ WebView ä¸­çš„ç½‘é¡µå›åˆ°æœ€å¼€å§‹çš„é¡µé¢æ‰èƒ½é€€å‡ºã€‚ å¯¹äºè¿™ç§æƒ…å†µï¼Œæˆ‘çš„åšæ³•æ˜¯åœ¨ Toolbar ä¸Šæ·»åŠ ä¸€ä¸ªä¸€é”®é€€å‡ºçš„æŒ‰é’®ï¼Œç›´æ¥æŠŠè¿™ä¸ª Activity ç»™ finish() æ‰ï¼Œè¿™ä¹Ÿæ˜¯ç›®å‰å¤§å¤šæ•° App ä½¿ç”¨çš„æ–¹æ¡ˆã€‚ ","link":"https://LiarrDev.github.io/post/Override-Key-BACK-for-WebView-in-Android/"},{"title":"ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€Glideã€","content":"æœ€è¿‘å†™äº†ä¸€ä¸ªå•æœºç‰ˆçš„å•†åŸé¡¹ç›®ã€HacppleStoreã€ï¼Œæ¶‰åŠåˆ°äº†å•†å“å±•ç¤ºç­‰å†…å®¹ï¼Œéœ€è¦åŠ è½½å¤§é‡å›¾ç‰‡ï¼Œå› ä¸ºæˆ‘æ˜¯ä½¿ç”¨åŸç”Ÿ Android è¿›è¡Œå¼€å‘ï¼Œè€Œä¸æ˜¯åƒç°å®ä¸­å¤§å¤šæ•°å•†åŸä¸€æ ·ä½¿ç”¨ H5 åŠ è½½ï¼Œæ‰€ä»¥å›¾ç‰‡çš„åŠ è½½ä¸å­˜å‚¨å°±ä¼šåœ¨æœ¬åœ°è¿›è¡Œã€‚ å¦å¤–ï¼Œæˆ‘è¿˜å¸Œæœ›èƒ½å¤Ÿå¯¹å›¾ç‰‡çš„æ“ä½œæ›´åŠ ç®€ä¾¿ï¼Œå¹¶ä¸”æœ€å¥½èƒ½å¯¹å›¾ç‰‡è¿›è¡Œä¸€å®šçš„å‹ç¼©å¤„ç†ï¼Œä»¥æé«˜æ€§èƒ½ã€‚ æ ¹æ®ä»ã€ç¬¬ä¸€è¡Œä»£ç â€”â€”Androidã€å­¦æ¥çš„ç»éªŒï¼Œæˆ‘é¦–å…ˆå°±æƒ³åˆ°äº†ã€Glideã€ã€‚ ã€Glideã€æ˜¯ä¸€ä¸ªè¢« Google æ‰€æ¨èçš„å›¾ç‰‡åŠ è½½åº“ï¼Œç”± bumptechï¼ˆBump Technologiesï¼‰å¼€å‘ã€‚è¿™ä¸ªåº“è¢«å¹¿æ³›è¿ç”¨åœ¨ Google çš„å¼€æºé¡¹ç›®ä¸­ï¼ŒåŒ…æ‹¬ 2014 å¹´çš„ Google I/O å¤§ä¼šä¸Šå‘å¸ƒçš„å®˜æ–¹ Appã€‚ æåˆ°ã€Glideã€å°±ä¸å¾—ä¸ææã€Picassoã€äº†ï¼Œã€Glideã€æ˜¯ Google å‘˜å·¥çš„å¼€æºé¡¹ç›®ï¼ˆè¿™ä¹Ÿè§£é‡Šäº†ä¸ºä»€ä¹ˆ Google å¦‚æ­¤æ¨èå®ƒï¼‰ï¼Œæ˜¯åŸºäºã€Picassoã€çš„ä¸€ä¸ªå›¾ç‰‡åŠ è½½æ¡†æ¶ã€‚ é‚£ã€Picassoã€åˆæ˜¯å•¥ï¼Ÿ è¿˜è®°å¾—åœ¨ã€ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€ŒOkHttpã€ã€ä¸­æåˆ°çš„ Square å—ï¼Ÿé™¤äº†ã€OkHttpã€ä»¥å¤–ï¼ŒSquare è¿˜å¼€å‘äº†è®¸å¤šå®ç”¨çš„å¼€æºæ¡†æ¶ï¼ŒSquare å‡ºå“å¿…å±ç²¾å“ï¼Œã€Picassoã€å°±æ˜¯å…¶ä¸€ã€‚ æ•¢äºå† ä¸Šæ¯•åŠ ç´¢ä¹‹åï¼Œç›¸ä¿¡ä¹Ÿä¸ä¼šå¤ªå·®ï¼Œä¸»è¦ç‰¹ç‚¹å°±æ˜¯ä½¿ç”¨ç®€å•ï¼Œæ‰©å±•æ€§å¼ºï¼Œæ”¯æŒå„ç§æ¥æºçš„å›¾ç‰‡ï¼ŒåŒ…æ‹¬ç½‘ç»œã€Resourcesã€Assetsã€Filesã€Content Providers ç­‰ã€‚å†…éƒ¨é›†æˆäº†ã€OkHttpã€çš„ç½‘ç»œæ¡†æ¶ï¼Œæ‰€ä»¥å¦‚æœé¡¹ç›®ä¸­ä½¿ç”¨äº† Square å…¬å¸çš„å…¶ä»–æ¡†æ¶ï¼Œé‚£ä¹ˆå°±æ›´æ¨èä½¿ç”¨ã€Picassoã€äº†ã€‚ ç”±äºã€Glideã€åœ¨ã€Picassoã€åŸºç¡€ä¸Šè¿›è¡Œçš„äºŒæ¬¡å¼€å‘çš„ï¼Œæ‰€ä»¥ä¸¤è€…æœ‰è¿‘ 90% çš„ç›¸ä¼¼åº¦ï¼Œè€Œå…¶ä¼˜åŠ¿ä¹Ÿæ˜¯æ˜¾è€Œæ˜“è§çš„ã€‚ å½“ç„¶ï¼Œã€Picassoã€æˆ‘ç›®å‰ä»…ä»…ç®€å•äº†è§£ï¼Œå¹¶æœªæ·±å…¥å­¦ä¹ ï¼Œç”±äºã€Glideã€çš„æ˜“ç”¨æ€§æˆ‘ä¸€ç›´ä½¿ç”¨çš„éƒ½æ˜¯ã€Glideã€ï¼Œæ‰€ä»¥å¦‚æœä»¥åé—²ä¸‹æ¥æœ‰æœºä¼šæ·±æ¢ã€Picassoã€çš„æ—¶å€™å¯ä»¥å•ç‹¬å” ä¸€å” ã€‚ ã€Glideã€çš„ä»£ç é£æ ¼ä¸ã€Picassoã€éå¸¸ç›¸ä¼¼ï¼Œå¢åŠ äº†æ›´å¤šçš„åŠŸèƒ½ï¼Œéå¸¸é‡è¦çš„å°±æ˜¯æ”¯æŒ GIFï¼Œå½“ç„¶å®ƒçš„åŒ…ä¼šå¤§ä¸€äº›ã€‚ Glide æ˜¯æ»‘è¡Œçš„æ„æ€ï¼Œå¯ä»¥çœ‹å‡ºè¿™ä¸ªåº“çš„ä¸»æ—¨å°±åœ¨äºè®©å›¾ç‰‡åŠ è½½å˜çš„æµç•…ã€‚å®ƒä¸ä»…å¯ä»¥ç”¨äºåŠ è½½æœ¬åœ°å›¾ç‰‡ï¼Œè¿˜å¯ä»¥åŠ è½½ç½‘ç»œå›¾ç‰‡ã€GIF å›¾ç‰‡ã€ç”šè‡³æ˜¯æœ¬åœ°è§†é¢‘ã€‚æˆ‘åªèƒ½ç”¨è¶…çº§å¼ºå¤§è¿™ä¸ªè¯æ¥å½¢å®¹å®ƒäº†ã€‚ å¹å®Œã€Glideã€çš„ä¼˜ç‚¹ï¼Œå°±ç›´æ¥ä»‹ç»ç”¨æ³•å§ã€‚ ç¬¬ä¸€ä»¶äº‹ä¾ç„¶æ˜¯æ·»åŠ ä¾èµ–ï¼š dependencies { implementation 'com.github.bumptech.glide:glide:(insert latest version)' } ã€Glideã€çš„ç”¨æ³•éå¸¸ç®€å•ï¼Œä½¿ç”¨ç®€æ˜çš„æµå¼è¯­æ³• APIï¼Œå®ƒå…è®¸ä½ åœ¨å¤§éƒ¨åˆ†æƒ…å†µä¸‹åªéœ€ä¸€è¡Œä»£ç å°±èƒ½è½»æ¾å®ç°å¤æ‚çš„å›¾ç‰‡åŠ è½½åŠŸèƒ½ï¼š Glide.with(context).load(url).into(imageView); è¿™å°±æ˜¯ã€Glideã€ä¸€ä¸ªå®Œæ•´çš„è¯·æ±‚è‡³å°‘éœ€è¦çš„ä¸‰ä¸ªå‚æ•°ï¼Œwith() ä¸­ä¼ å…¥ä¸€ä¸ª Contextã€Activity æˆ– Fragmentï¼Œç„¶åè°ƒç”¨ load() æ–¹æ³•å»åŠ è½½å›¾ç‰‡ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ª URL åœ°å€ï¼Œä¹Ÿå¯ä»¥æ˜¯ä¸€ä¸ªæœ¬åœ°è·¯å¾„ï¼Œæˆ–è€…æ˜¯ä¸€ä¸ªèµ„æº IDï¼Œæœ€åè°ƒç”¨ into() æ–¹æ³•å°†å›¾ç‰‡è®¾ç½®åˆ°å…·ä½“æŸä¸€ä¸ª ImageView ä¸­å°±å¯ä»¥äº†ã€‚ åœ¨ã€HacppleStoreã€çš„å¼€å‘ä¸­ï¼Œæˆ‘æƒŠè®¶çš„å‘ç°ï¼Œã€Glideã€è¿˜æ”¯æŒå¯¹äºŒè¿›åˆ¶å›¾ç‰‡çš„åŠ è½½ï¼Œè¿™å°±ä½¿æˆ‘ä»¬çš„å¼€å‘æ›´åŠ æ–¹ä¾¿äº†ã€‚ åœ¨ã€ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€ŒLitePalã€ã€ä¸€æ–‡ä¸­ï¼Œæˆ‘æŠŠå›¾ç‰‡å­˜å‚¨åœ¨äº†ã€SQLiteã€ä¸­ï¼Œå½“è¯»å–å‡ºæ¥åŠ è½½æ—¶ï¼Œä¹Ÿç»å†äº†ä¸å°‘éº»çƒ¦çš„æ“ä½œã€‚ ä¸€å¼€å§‹æˆ‘æ˜¯ä½¿ç”¨åŸç”Ÿçš„å†™æ³•ï¼Œå°†äºŒè¿›åˆ¶å›¾ç‰‡è½¬ä¸º Bitmap å†è¿›è¡ŒåŠ è½½ã€‚ ImageView goodsImageView = (ImageView) findViewById(R.id.goods_image_view); byte[] goodsImg; List&lt;Goods&gt; goods = LitePal.where(&quot;name = ?&quot;, goodsName).find(Goods.class); for (Goods good: goods) { goodsImg.setImageBitmap(BitmapFactory.decodeByteArray(good.getImage(), 0, good.getImage().length)); } è€Œåæ¥æŸ¥é˜…æ–‡æ¡£åå‘ç°ï¼Œä½¿ç”¨ã€Glideã€ä¸ç”¨è¿›è¡Œè½¬æ¢å°±å¯ä»¥ä¸€æ­¥åˆ°ä½ã€‚ ImageView goodsImageView = (ImageView) findViewById(R.id.goods_image_view); byte[] goodsImg; List&lt;Goods&gt; goods = LitePal.where(&quot;name = ?&quot;, goodsName).find(Goods.class); for (Goods good: goods) { goodsImg = good.getImage(); Glide.with(this).load(goodsImg).into(goodsImageView); } å½“ç„¶ï¼Œã€Glideã€ä¹Ÿæ˜¯å¯ä»¥åŠ è½½ Bitmap çš„ï¼Œåªä¸è¿‡åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œç”±äºå…¶å¼ºå¤§çš„ APIï¼Œæ‰€ä»¥æˆ‘å¹¶ä¸éœ€è¦åšå¤šä½™çš„æ“ä½œã€‚ å½“ç„¶ï¼Œé™¤äº†åŠ è½½å›¾ç‰‡æ–¹ä¾¿è¿™ä¸ªåŸå› ï¼Œã€Glideã€è¿˜æœ‰ä¸€ä¸ªç‰¹ç‚¹è®©æˆ‘åšæŒä½¿ç”¨ï¼Œå› ä¸ºæˆ‘ä½¿ç”¨çš„å¾ˆå¤šå›¾ç‰‡åƒç´ éƒ½éå¸¸é«˜ï¼Œå¦‚æœä¸è¿›è¡Œå‹ç¼©å°±ç›´æ¥å±•ç¤ºçš„è¯ï¼Œå¾ˆå®¹æ˜“å°±ä¼šå¼•èµ·å†…å­˜æº¢å‡ºã€‚è€Œä½¿ç”¨ã€Glideã€å°±å®Œå…¨ä¸éœ€è¦æ‹…å¿ƒè¿™å›äº‹ï¼Œå› ä¸ºã€Glideã€åœ¨å†…éƒ¨åšäº†è®¸å¤šéå¸¸å¤æ‚çš„é€»è¾‘æ“ä½œï¼Œå…¶ä¸­å°±åŒ…æ‹¬äº†å›¾ç‰‡å‹ç¼©ï¼Œæˆ‘ä»¬åªéœ€å®‰å¿ƒæŒ‰ç…§å®ƒçš„æ ‡å‡†ç”¨æ³•å»åŠ è½½å›¾ç‰‡å³å¯ã€‚ ã€Glideã€é»˜è®¤çš„ Bitmap æ ¼å¼æ˜¯ RGB_565ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œã€Picassoã€ç”¨çš„æ˜¯ ARGB_8888ï¼Œæ‰€ä»¥æ€»ä½“æ¥è¯´ï¼Œã€Glideã€åŠ è½½çš„å›¾ç‰‡åœ¨è´¨é‡ä¸Šä¸å¦‚ã€Picassoã€ã€‚ ä½†æ˜¯ç”±äºæ‰‹æœºå±å¹•å°ºå¯¸çš„é™åˆ¶ï¼Œç”¨æˆ·å¾€å¾€å¾ˆéš¾å¯Ÿè§‰å‡ºè¿™ç§å·®åˆ«ï¼Œæ‰€ä»¥ã€Glideã€çš„ä¼˜åŠ¿å°±å±•ç°å‡ºæ¥äº†ã€‚ ä½ ä»¥ä¸ºæˆ‘è¯´çš„ä¼˜åŠ¿æ˜¯å¯¹ç”¨æˆ·çœ¼ç›çš„æ¬ºéª—ï¼Ÿå¹¶ä¸æ˜¯ã€‚ ã€Glideã€åŠ è½½çš„ RGB_565 æ ¼å¼çš„å›¾ç‰‡ä»…ä»…æ¶ˆè€—ã€Picassoã€ARGB_8888 æ ¼å¼å›¾ç‰‡ä¸€åŠçš„å†…å­˜ï¼š å½“ç„¶ï¼Œç”±äºæ¡ä»¶ä¸ä¸€æ ·ï¼Œæ‰€ä»¥è¿™æ ·å¯¹æ¯”ä¹Ÿå¹¶ä¸å¤ªå¦¥å½“ã€‚ä½†æ˜¯ã€Glideã€åŒæ ·æ”¯æŒæŠŠå›¾ç‰‡çš„æ ¼å¼è½¬æ¢ä¸º ARGB_8888ï¼Œé‚£å°±å…¬å¹³çš„æ¥æ¯”ä¸€æ¬¡å§ã€‚ ä¿®æ”¹æ˜¯å…¨å±€ä¿®æ”¹ï¼Œå³æ•´ä¸ªé¡¹ç›®ä½¿ç”¨ã€Glideã€éƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸º ARGB_8888ã€‚ é¦–å…ˆè‡ªå®šä¹‰ä¸€ä¸ªå…¨å±€çš„ GlideModuleï¼š public class GlideConfiguration implements GlideModule { @Override public void applyOptions(Context context, GlideBuilder builder) { // Apply options to the builder here. builder.setDecodeFormat(DecodeFormat.PREFER_ARGB_8888); } @Override public void registerComponents(Context context, Glide glide) { // register ModelLoaders here. } } ç„¶ååœ¨ã€ŒAndroidManifest.xmlã€ä¸­é…ç½®ï¼š. &lt;meta-data android:name=&quot;packagename.MyGlideModule &quot; android:value=&quot;GlideModule&quot;/&gt; ä¹‹åå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­æŒ‰ç…§æ ‡å‡†æ–¹å¼ä½¿ç”¨äº†ã€‚ è¿™ç§æ–¹æ³•ä¼˜ç‚¹æ˜¯ä¸€æ¬¡è®¾ç½®ï¼Œå…¨å±€ä½¿ç”¨ï¼Œååˆ†æ–¹ä¾¿ï¼Œä½†æ˜¯ç¼ºç‚¹ä¹Ÿååˆ†æ˜æ˜¾ï¼Œæ‰€æœ‰åŠ è½½çš„å›¾ç‰‡éƒ½ä½¿ç”¨é«˜è´¨é‡ä¼šå¤§å¤§å¢åŠ å†…å­˜çš„æ¶ˆè€—ï¼Œæœ‰äº›å¾—ä¸å¿å¤±ã€‚ å½“ç„¶è¿˜æœ‰ç¬¬äºŒç§æ–¹æ³•ï¼Œæˆ‘æ‰“ç®—æ”¾åˆ°ä¸‹æ–‡å†è®²ã€‚ æŒ‰ç…§ç¬¬ä¸€ç§æ–¹æ³•è®¾ç½®æˆåŠŸåå¯ä»¥çœ‹ä¸‹å¯¹æ¯”å›¾ï¼š å›¾ç‰‡è´¨é‡æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ã€‚ å†çœ‹çœ‹ä¸¤è€…ä¹‹é—´çš„å†…å­˜æ¶ˆè€—ï¼š è™½ç„¶ç”¨çš„å›¾ç‰‡æ ¼å¼ä¸€æ ·ï¼Œå¹¶ä¸”ã€Glideã€åŠ è½½çš„å‡ ä¹æ˜¯å…ˆå‰çš„ä¸¤å€å†…å­˜ï¼Œä½†æ˜¯ã€Picassoã€æ¶ˆè€—çš„å†…å­˜ä»ç„¶è¿œå¤§äºã€Glideã€ã€‚ å…¶åŸå› åœ¨äºä¸¤è€…çš„åŠ è½½æ–¹å¼ä¸åŒï¼Œä¸Šæ–¹å›¾ç‰‡åŸå°ºå¯¸æ˜¯ 1920Ã—1080 åƒç´ ï¼ŒåŠ è½½åˆ° 768Ã—432 åƒç´ çš„ ImageView ä¸­ï¼Œã€Picassoã€ä½¿ç”¨çš„æ–¹æ³•æ˜¯åŠ è½½äº†å®Œæ•´å°ºå¯¸çš„å›¾ç‰‡è¿›å…¥å†…å­˜ï¼Œå½“ç»˜å›¾çš„æ—¶å€™ï¼Œè®© GPU å³æ—¶çš„æ¢å¤åˆ°æ‰€éœ€è¦çš„å°ºå¯¸ï¼Œç„¶è€Œã€Glideã€åˆ™åŠ è½½ç²¾ç¡®çš„ ImageView å°ºå¯¸è¿›å…¥å†…å­˜ï¼Œæ‰€ä»¥é¿å…äº†å†…å­˜æŸè€—ã€‚ ã€Glideã€è¿˜å¯ä»¥å–æ¶ˆå›¾ç‰‡çš„åŠ è½½ï¼š Glide.with(context).clear(imageView); ä¸è¿‡è¯¥æ–¹æ³•å¹¶ä¸å¸¸ä½¿ç”¨ï¼Œå› ä¸ºå›¾ç‰‡ä¼šè·Ÿéš Context çš„ç”Ÿå‘½å‘¨æœŸæ¶ˆäº¡è€Œæ¶ˆäº¡çš„ã€‚ æ¥ä¸‹æ¥å¯ä»¥è°ˆè°ˆã€Glideã€å…¶ä»–çš„ä¸€äº›ç”¨æ³•äº†ã€‚ å…ˆè¯´å‰æ–‡æåˆ°çš„ä¿®æ”¹å›¾ç‰‡è´¨é‡ã€‚ ã€Glideã€ä½¿ç”¨æ³¨è§£å¤„ç†å™¨ç”Ÿæˆä¸€ä¸ªæµå¼ APIï¼Œå…¶ç›®çš„ä¸€æ˜¯ä¸ºäº†æ›´å¥½åœ°æ‰©å±•è‡ªå®šä¹‰é€‰é¡¹ï¼Œå…¶äºŒæ˜¯ä¸ºäº†æ–¹ä¾¿æ‰“åŒ…å¸¸ç”¨é€‰é¡¹ç»„ã€‚ ä½¿ç”¨ Generated API ä»…ä»…éœ€è¦ä¸¤æ­¥ã€‚ç¬¬ä¸€æ­¥ï¼Œä¾ç„¶æ˜¯æ·»åŠ ä¾èµ–ï¼š dependencies { annotationProcessor 'com.github.bumptech.glide:compiler:(insert latest version)' } ç¬¬äºŒæ­¥ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸€ä¸ªç±»ç»§æ‰¿ AppGlideModuleï¼Œå¹¶ä¸ºè¯¥ç±»æ·»åŠ  @GlideModule æ³¨è§£ã€‚ import com.bumptech.glide.annotation.GlideModule; import com.bumptech.glide.module.AppGlideModule; @GlideModule public class ExampleAppGlideModule extends AppGlideModule {} AppGlideModule è™½ç„¶æ˜¯æŠ½è±¡ç±»ï¼Œå´å¯ä»¥ä¸ç”¨é‡å†™ä»»ä½•æ–¹æ³•ã€‚ä½†å¿…é¡»ä½¿ç”¨ @GlideModule æ³¨è§£æ ‡è®°è¯¥ç±»ï¼Œå¦åˆ™æ²¡æ³•é¡ºåˆ©çš„ç”Ÿæˆ GlideAppçš„APIï¼Œå› ä¸ºè¯¥ Module å°†ä¸ä¼šè¢«ã€Glideã€å‘ç°ã€‚ ç¬¬ä¸€æ¬¡æ·»åŠ  AppGlideModule æˆ–è€…å¯¹ AppGlideModule åšäº†æŸäº›ä¿®æ”¹æ—¶ï¼Œæˆ‘ä»¬éœ€è¦é‡æ–°æ„å»ºé¡¹ç›®é‡æ–°ç”Ÿæˆ APIã€‚å¦‚æœã€Android Studioã€æ²¡æ³•è‡ªåŠ¨å®Œæˆæ„å»ºï¼Œå¯ä»¥ä½¿ç”¨ã€ŒMake Projectã€æ‰‹åŠ¨é‡æ–°æ„å»ºã€‚ ç”Ÿæˆ API çš„é»˜è®¤åä¸º GlideAppï¼Œå…¶åŒ…åä¸æ‰€åœ¨çš„ Module çš„åŒ…åç›¸åŒï¼Œè€ŒåŸºæœ¬ç”¨æ³•ä¹Ÿäºä¹‹å‰ç›¸åŒï¼Œåªæ˜¯å°† Glide æ›¿æ¢æˆäº† GlideAppï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ã€‚ æ¯”å¦‚ä¸Šæ–‡ä¸­çš„åŠ è½½å›¾ç‰‡å¯ä»¥å†™æˆï¼š GlideApp.with(context).load(url).into(imageView); è€Œä¿®æ”¹å›¾ç‰‡è´¨é‡åˆ™å†™æˆï¼š GlideApp.with(context).load(url).format(PREFER_ARGB_8888).into(imageView);. ä½¿ç”¨è¿™ä¸ªæ–¹æ³•å¯ä»¥å•ç‹¬åœ¨ä¸€ä¸ªåŠ è½½é¡¹ä¸­è®¾ç½®æƒ³è¦çš„å›¾ç‰‡è´¨é‡ï¼Œè€Œä¸ç”¨å»å…¨å±€è®¾å®šï¼Œå¯ä»¥å¤§å¤§çš„å‡å°‘å†…å­˜å ç”¨ã€‚ å¦å¤–ï¼Œã€Glideã€å…è®¸ç”¨æˆ·ä½¿ç”¨è¿™ç§æ–¹æ³•æŒ‡å®šä¸‰ç§ä¸åŒç±»å‹çš„å ä½ç¬¦ï¼Œåˆ†åˆ«åœ¨ä¸‰ç§ä¸åŒåœºæ™¯ä½¿ç”¨ã€‚ å…¶ä¸­ï¼ŒPlaceholder æ˜¯å½“è¯·æ±‚æ­£åœ¨æ‰§è¡Œæ—¶è¢«å±•ç¤ºçš„ Drawableã€‚å½“è¯·æ±‚æˆåŠŸå®Œæˆæ—¶ï¼ŒPlaceholder ä¼šè¢«è¯·æ±‚åˆ°çš„èµ„æºæ›¿æ¢ã€‚å¦‚æœè¢«è¯·æ±‚çš„èµ„æºæ˜¯ä»å†…å­˜ä¸­åŠ è½½å‡ºæ¥çš„ï¼Œé‚£ä¹ˆ Placeholder å¯èƒ½æ ¹æœ¬ä¸ä¼šè¢«æ˜¾ç¤ºã€‚å¦‚æœè¯·æ±‚å¤±è´¥å¹¶ä¸”æ²¡æœ‰è®¾ç½® Errorï¼Œåˆ™ Placeholder å°†è¢«æŒç»­å±•ç¤ºã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœè¯·æ±‚çš„ url/model ä¸º nullï¼Œå¹¶ä¸” Error å’Œ Fallback éƒ½æ²¡æœ‰è®¾ç½®ï¼Œé‚£ä¹ˆ Placeholder ä¹Ÿä¼šç»§ç»­æ˜¾ç¤ºã€‚ Error åœ¨è¯·æ±‚æ°¸ä¹…æ€§å¤±è´¥æ—¶å±•ç¤ºã€‚Error åŒæ ·ä¹Ÿåœ¨è¯·æ±‚çš„ url/model ä¸º nullï¼Œä¸”å¹¶æ²¡æœ‰è®¾ç½® Fallback æ—¶å±•ç¤ºã€‚ Fallback åœ¨è¯·æ±‚çš„ url/model ä¸º null æ—¶å±•ç¤ºã€‚è®¾è®¡ Fallback çš„ä¸»è¦ç›®çš„æ˜¯å…è®¸ç”¨æˆ·æŒ‡ç¤º null æ˜¯å¦ä¸ºå¯æ¥å—çš„æ­£å¸¸æƒ…å†µã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª null çš„ä¸ªäººèµ„æ–™ URL å¯èƒ½æš—ç¤ºè¿™ä¸ªç”¨æˆ·æ²¡æœ‰è®¾ç½®å¤´åƒï¼Œå› æ­¤åº”è¯¥ä½¿ç”¨é»˜è®¤å¤´åƒã€‚ç„¶è€Œï¼Œnull ä¹Ÿå¯èƒ½è¡¨æ˜è¿™ä¸ªå…ƒæ•°æ®æ ¹æœ¬å°±æ˜¯ä¸åˆæ³•çš„ï¼Œæˆ–è€…å–ä¸åˆ°ã€‚é»˜è®¤æƒ…å†µä¸‹ã€Glideã€å°† null ä½œä¸ºé”™è¯¯å¤„ç†ï¼Œæ‰€ä»¥å¯ä»¥æ¥å— null çš„åº”ç”¨åº”å½“æ˜¾å¼åœ°è®¾ç½®ä¸€ä¸ª Fallbackã€‚ ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š GlideApp.with(context) .load(url) .placeholder(R.drawable.placeholder) .error(R.drawable.error) .fallback(R.drawable.fallback) .into(imageView); ã€Glideã€è¿˜ä¸ºæˆ‘ä»¬æä¾›äº†è¿‡æ¸¡æ•ˆæœï¼Œå…è®¸å®šä¹‰å¦‚ä½•ä»å ä½ç¬¦åˆ°æ–°åŠ è½½çš„å›¾ç‰‡ï¼Œæˆ–ä»ç¼©ç•¥å›¾åˆ°å…¨å°ºå¯¸å›¾åƒè¿‡æ¸¡ã€‚ ç”±äºç‰ˆæœ¬çš„å‡çº§ï¼Œã€Glideã€å°†ä¸ä¼šé»˜è®¤åº”ç”¨äº¤å‰æ·¡å…¥æˆ–ä»»ä½•å…¶ä»–çš„è¿‡æ¸¡æ•ˆæœï¼Œæ¯ä¸ªè¯·æ±‚å¿…é¡»æ‰‹åŠ¨åº”ç”¨è¿‡æ¸¡ã€‚ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š Glide.with(context) .load(url) .transition(DrawableTransitionOptions.withCrossFade()) .into(imageView); TransitionOptions ç”¨äºç»™ä¸€ä¸ªç‰¹å®šçš„è¯·æ±‚æŒ‡å®šè¿‡æ¸¡ï¼Œè€Œä¸åŒçš„èµ„æºç±»å‹èƒ½å†³å®šä½¿ç”¨ä»€ä¹ˆç±»å‹çš„è¿‡æ¸¡é€‰é¡¹ã€‚Bitmap å’Œ Drawable å¯ä»¥å¯¹åº”ä½¿ç”¨ä½¿ç”¨ BitmapTransitionOptions æˆ– DrawableTransitionOptions æ¥æŒ‡å®šç±»å‹ç‰¹å®šçš„è¿‡æ¸¡åŠ¨ç”»ã€‚å¯¹äº Bitmap å’Œ Drawable ä¹‹å¤–çš„èµ„æºç±»å‹ï¼Œå¯ä»¥ä½¿ç”¨ GenericTransitionOptionsã€‚ ã€Glideã€æä¾›äº†å˜æ¢åŠŸèƒ½ï¼Œåœ¨è·å–åˆ°è¯·æ±‚çš„å›¾ç‰‡ä¹‹åï¼Œèƒ½å¯¹å›¾ç‰‡è¿›è¡Œä¸€äº›å¤„ç†ï¼Œä¾‹å¦‚ï¼šè£å‰ªã€æ¨¡ç³Šç­‰ï¼›è€Œå®ƒçš„å¼ºå¤§åœ¨äºå¯ä»¥è‡ªå®šä¹‰ï¼Œè¿™æ ·ä¸€æ¥ä¸ä»…èƒ½å¤„ç† Bitmapï¼ŒåŒæ ·å¯ä»¥ç”¨äºå¤„ç† GIF åŠ¨ç”»å’Œè‡ªå®šä¹‰èµ„æºç±»å‹ã€‚ ä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š Glide.with(context) .load(url) .apply(fitCenterTransform()) .into(imageView); å¦‚æœä½¿ç”¨ Generated APIï¼Œé‚£ä¹ˆè¿™äº›å˜æ¢æ–¹æ³•å·²ç»è¢«å†…è”äº†ï¼Œæ‰€ä»¥ä½¿ç”¨èµ·æ¥ç”šè‡³æ›´ä¸ºè½»æ¾ï¼š GlideApp.with(context) .load(url) .fitCenter() .into(imageView); ä¸è¿‡æˆ‘ä¸ªäººæ›´å€¾å‘äºåœ¨ç¼–å†™å¸ƒå±€æ–‡ä»¶çš„æ—¶å€™å°±è®¾ç½® ImageView çš„ ScaleType å±æ€§ï¼Œè¿™æ ·èƒ½ä½¿ç•Œé¢å’Œé€»è¾‘æ›´å¥½çš„åŒºåˆ†å¼€æ¥ã€‚ åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å¯¹å›¾ç‰‡çš„å¤§å°è¿›è¡Œä¿®æ”¹ï¼š GlideApp.with(context) .load(url) .override(width, height) // å•ä½æ˜¯ px .into(imageView); å‰æ–‡æåˆ°ï¼ŒåŠ è½½ GIF å›¾æ˜¯ã€Glideã€æ¯”è¾ƒç‰¹åˆ«çš„åŠŸèƒ½ä¹‹ä¸€ï¼Œè€Œä¸”ä½¿ç”¨èµ·æ¥åŒæ ·ååˆ†ç®€å•ï¼š Glide.with(context) .load(gifUrl) .placeholder(R.drawable.placeholder) .error(R.drawable.error) .into(imageView); å¦‚æœå¸Œæœ›åŠ è½½ GIF æ—¶åªåŠ è½½ GIF çš„ç¬¬ä¸€å¸§ï¼ŒæŠŠ GIF å½“ä½œæ™®é€šå›¾ç‰‡ä¸€æ ·åŠ è½½ï¼Œé‚£ä¹ˆåªéœ€è¦åšå¦‚ä¸‹ä¿®æ”¹å³å¯ï¼š Glide.with(context) .load(gifUrl) .asBitmap() .error(R.drawable.error) .into(imageView); å¦‚æœå¸Œæœ›åŠ è½½çš„åªæ˜¯ GIF å›¾ï¼Œå¦‚æœä¸æ˜¯ GIF å°±æ˜¾ç¤ºé”™è¯¯å›¾ç‰‡ï¼Œåˆ™ï¼š Glide.with(context) .load(gifUrl) .asGif() .error(R.drawable.error) .into(imageView); ä¸Šé¢è¿˜æåˆ°äº†ç¼©ç•¥å›¾ï¼Œå†æ¥çœ‹çœ‹ç¼©ç•¥å›¾çš„åŠ è½½æ–¹æ³•ï¼š Glide.with(context) .load(url) .thumbnail(0.1f) .into(imageView); è¿™é‡Œä¼ å…¥ä¸€ä¸ªæµ®ç‚¹æ•°ï¼Œå®ƒä»£è¡¨å°ºå¯¸çš„å€æ•°ã€‚æ¯”å¦‚æˆ‘ä¼ äº† 0.1f ä½œä¸ºå‚æ•°ï¼Œé‚£ä¹ˆã€Glideã€åˆ™ä¼šæ˜¾ç¤ºåŸå›¾å¤§å°çš„ 10%ã€‚å¦‚æœåŸå›¾çš„å°ºå¯¸æ˜¯ 1000Ã—1000 åƒç´ ï¼Œé‚£ä¹ˆç¼©ç•¥å›¾å°±æ˜¯ 100Ã—100 åƒç´ ã€‚ç”±äºç¼©ç•¥å›¾ä¼šæ¯” ImageView è¦å°è®¸å¤šï¼Œæ‰€ä»¥è¦ç¡®ä¿ä¸€ä¸ªå‡†ç¡®çš„ç¼©æ”¾æ¯”ä¾‹ã€‚ æœ€åå†è¯´ä¸€ä¸ªéå¸¸å¼ºå¤§ä½†å´ä½¿ç”¨å¾—æ¯”è¾ƒå°‘çš„åŠŸèƒ½ï¼Œå°±æ˜¯ä¸Šæ–¹æåˆ°çš„åŠ è½½è§†é¢‘ï¼Œå› ä¸ºä½œä¸ºä¸€ä¸ªå›¾ç‰‡åŠ è½½åº“å¯ä»¥åŠ è½½è§†é¢‘çš„ç¡®æ˜¯å¾ˆå¼ºå¤§ï¼Œåªä¸è¿‡å¾ˆå¤šäººéƒ½ä¸ä¼šç”¨å®ƒæ¥åŠ è½½è§†é¢‘ã€‚ Glide.with(context) .load(Uri.fromFile(new File(filePath))) .into(view); ã€Glideã€åªèƒ½åŠ è½½æœ¬åœ°è§†é¢‘ï¼Œç½‘ç»œè§†é¢‘æˆ–å…¶ä»–é€”å¾„è·å¾—çš„è§†é¢‘æ˜¯æ— æ•ˆçš„ã€‚ æ®å¼€å‘è€…ç»Ÿè®¡ï¼Œã€Glideã€æä¾›äº†ä¸¤åƒå¤šä¸ªæ–¹æ³•ï¼Œç›¸ä¿¡æ•°é‡è¿˜åœ¨å¢åŠ ï¼Œæ‰€ä»¥ï¼Œå°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œä¸Šæ–¹æåˆ°çš„æ–¹æ³•åº”è¯¥ç®—æ˜¯æ¯”è¾ƒç»å…¸çš„ï¼Œå¦‚æœæœ‰éœ€è¦è¿˜æ˜¯é å®˜æ–¹æ–‡æ¡£å§ã€‚ æ›´å€¼å¾—ä¸€æçš„æ˜¯ï¼Œã€Glideã€æœ‰ä¸­æ–‡æ–‡æ¡£ï¼ ","link":"https://LiarrDev.github.io/post/Enjoy-Glide-in-One-Shot/"},{"title":"ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€LitePalã€","content":"ã€SQLiteã€æ˜¯ä¸€æ¬¾è½»é‡çº§çš„å…³ç³»å‹æ•°æ®åº“ï¼Œæ˜¯éµå®ˆ ACID çš„å…³ç³»å‹æ•°æ®åº“ç®¡ç†ç³»ç»Ÿï¼Œå®ƒåŒ…å«åœ¨ä¸€ä¸ªç›¸å¯¹å°çš„ C åº“ä¸­ã€‚å®ƒçš„è®¾è®¡ç›®æ ‡æ˜¯åµŒå…¥å¼çš„ï¼Œè€Œä¸”ç›®å‰å·²ç»åœ¨å¾ˆå¤šåµŒå…¥å¼äº§å“ä¸­ä½¿ç”¨äº†å®ƒï¼Œåœ¨åµŒå…¥å¼è®¾å¤‡ä¸­ï¼Œå®ƒçš„è¿ç®—é€Ÿåº¦éå¸¸å¿«ï¼Œå ç”¨èµ„æºå¾ˆå°‘ï¼Œé€šå¸¸åªéœ€è¦å‡ ç™¾ KB çš„å†…å­˜å°±è¶³å¤Ÿäº†ï¼Œå®ƒå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ï¼Œå› è€Œç‰¹åˆ«é€‚åˆåœ¨ç§»åŠ¨è®¾å¤‡ä¸Šä½¿ç”¨ã€‚ã€SQLiteã€æ˜¯åœ¨ä¸–ç•Œä¸Šæœ€å¹¿æ³›éƒ¨ç½²çš„ SQL æ•°æ®åº“å¼•æ“ï¼Œå®ƒçš„æºä»£ç ä¸å—ç‰ˆæƒé™åˆ¶ã€‚ ä¸€ä¸ªå®Œæ•´çš„ã€SQLiteã€æ•°æ®åº“æ˜¯å­˜å‚¨åœ¨ä¸€ä¸ªå•ä¸€çš„è·¨å¹³å°çš„ç£ç›˜æ–‡ä»¶ï¼Œè¿™ä¹Ÿä¸ºå…¶ä¾¿æºæ€§æä¾›äº†è‰¯å¥½çš„æ¡ä»¶ã€‚è€Œä¸”ã€SQLiteã€ä¸ä»…æ”¯æŒæ ‡å‡†çš„ SQL è¯­æ³•ï¼Œè¿˜éµå¾ªäº†æ•°æ®åº“çš„ ACIDï¼ˆæŒ‡æ•°æ®åº“äº‹åŠ¡æ­£ç¡®æ‰§è¡Œçš„å››ä¸ªåŸºæœ¬è¦ç´ ã€‚åŒ…å«ï¼šAtomicity &lt;åŸå­æ€§&gt;ã€Consistency &lt;ä¸€è‡´æ€§&gt;ã€Isolation &lt;éš”ç¦»æ€§&gt;ã€Durability &lt;æŒä¹…æ€§&gt;ã€‚ä¸€ä¸ªæ”¯æŒ Transaction &lt;äº‹åŠ¡&gt; çš„æ•°æ®åº“ï¼Œå¿…é¡»è¦å…·æœ‰è¿™å››ç§ç‰¹æ€§ï¼Œå¦åˆ™åœ¨ Transaction processing &lt;äº‹åŠ¡è¿‡ç¨‹&gt; å½“ä¸­æ— æ³•ä¿è¯æ•°æ®çš„æ­£ç¡®æ€§ï¼Œäº¤æ˜“è¿‡ç¨‹æå¯èƒ½è¾¾ä¸åˆ°äº¤æ˜“æ–¹çš„è¦æ±‚ï¼‰äº‹åŠ¡ï¼Œæ‰€ä»¥åªè¦ä»¥å‰ä½¿ç”¨è¿‡å…¶ä»–çš„å…³ç³»å‹æ•°æ®åº“ï¼Œå°±å¯ä»¥å¾ˆå¿«åœ°ä¸Šæ‰‹ã€SQLiteã€ã€‚ è€Œã€SQLiteã€åˆæ¯”ä¸€èˆ¬çš„æ•°æ®åº“è¦ç®€å•å¾—å¤šï¼Œå®ƒç”šè‡³ä¸ç”¨è®¾ç½®ç”¨æˆ·åå’Œå¯†ç å°±å¯ä»¥ä½¿ç”¨ã€‚Android æ­£æ˜¯æŠŠè¿™ä¸ªåŠŸèƒ½æä¸ºå¼ºå¤§çš„æ•°æ®åº“åµŒå…¥åˆ°äº†ç³»ç»Ÿå½“ä¸­ï¼Œä½¿å¾—æœ¬åœ°æ•°æ®æŒä¹…åŒ–çš„åŠŸèƒ½æœ‰äº†ä¸€æ¬¡è´¨çš„é£è·ƒã€‚ æŠ›å®Œä¹¦åŒ…æ¥çœ‹çœ‹åœ¨ Android ä¸­ã€SQLiteã€çš„ä½¿ç”¨æ–¹å¼ã€‚ ä¸€å¼€å§‹æˆ‘ä¾ç„¶æ˜¯åšæŒåŸç”Ÿçš„å†™æ³•ï¼ŒAndroid ä¸ºäº†è®©æˆ‘ä»¬èƒ½å¤Ÿæ›´åŠ æ–¹ä¾¿åœ°ç®¡ç†æ•°æ®åº“ï¼Œä¸“é—¨æä¾›äº†ä¸€ä¸ª SQLiteOpenHelper å¸®åŠ©ç±»ï¼Œå€ŸåŠ©è¿™ä¸ªç±»å°±å¯ä»¥å¯¹æ•°æ®åº“è¿›è¡Œåˆ›å»ºå’Œå‡çº§ã€‚ ç”±äº SQLiteOpenHelper æ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œè¿™å°±æ„å‘³ç€å¦‚æœæƒ³è¦ä½¿ç”¨å®ƒçš„è¯å°±éœ€è¦åˆ›å»ºä¸€ä¸ªè‡ªå·±çš„å¸®åŠ©ç±»å»ç»§æ‰¿å®ƒã€‚ public class DatabaseHelper extends SQLiteOpenHelper { public static final String CREATE_TABLE = &quot;CREATE TABLE TABLE_NAME (&quot; // TABLE_NAME æ˜¯è¡¨å + &quot;ID integer primary key autoincrement, &quot; // integer å¯¹åº” int ç±»å‹ + &quot;NAME text, &quot; // text å¯¹åº” String ç±»å‹ + &quot;PRICE real)&quot;; // real å¯¹åº” double ç±»å‹ private Context mContext; /** * @param context ä¸Šä¸‹æ–‡ï¼Œå¿…é¡»å­˜åœ¨æ‰èƒ½è¿›è¡Œæ•°æ®åº“æ“ä½œ * @param name æ•°æ®åº“å * @param factory å…è®¸åœ¨æŸ¥è¯¢æ•°æ®çš„æ—¶å€™è¿”å›ä¸€ä¸ªè‡ªå®šä¹‰çš„ Cursorï¼Œä¸€èˆ¬ä¼ å…¥ null å³å¯ * @param version å½“å‰æ•°æ®åº“ç‰ˆæœ¬å·ï¼Œå¯ç”¨äºå¯¹æ•°æ®åº“è¿›è¡Œå‡çº§æ“ä½œ */ public DatabaseHelper(Context context, String name, SQLiteDatabase.CursorFactory factory, int version) { super(context, name, factory, version); mContext = context; } @Override public void onCreate(SQLiteDatabase db) { db.execSQL(CREATE_TABLE); } @Override public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {} } ç„¶ååœ¨åˆ›å»ºæ•°æ®åº“çš„åœ°æ–¹è¿›è¡Œç›¸åº”çš„æ“ä½œï¼Œæ¯”å¦‚ï¼š DatabaseHelper dbHelper = new DatabaseHelper(this, &quot;DATABASE_NAME.db&quot;, null, 1); SQLiteDatabase db = dbHelper.getWriteableDatabase(); æ„å»ºä¸€ä¸ª DatabaseHelper å¯¹è±¡ï¼Œå¹¶é€šè¿‡æ„é€ å‡½æ•°çš„å‚æ•°å°†æ•°æ®åº“åæŒ‡å®šä¸º DATABASE_NAME.dbï¼Œç‰ˆæœ¬å·æŒ‡å®šä¸º 1ï¼Œå¹¶è°ƒç”¨ getWriteableDatabase() æ–¹æ³•ï¼Œç³»ç»Ÿä¼šæ£€æµ‹å½“å‰ç¨‹åºä¸­æœ‰æ²¡æœ‰ã€ŒDATABASE_NAME.dbã€è¿™ä¸ªæ•°æ®åº“ï¼Œå¦‚æœæ²¡æœ‰å°±ä¼šåˆ›å»ºè¯¥æ•°æ®åº“å¹¶è°ƒç”¨ DatabaseHelper ä¸­çš„ onCreate() æ–¹æ³•ï¼Œè¿™æ · TABLE_NAME è¡¨ä¹Ÿå°±å¾—åˆ°äº†åˆ›å»ºï¼Œå¦‚æœç³»ç»Ÿæ£€æµ‹åˆ°å½“å‰ç¨‹åºä¸­å·²å­˜åœ¨ã€ŒDATABASE_NAME.dbã€æ•°æ®åº“ï¼Œå°±ä¸ä¼šå†åˆ›å»ºä¸€æ¬¡äº†ã€‚ æ·»åŠ æ•°æ®æ“ä½œå¦‚ä¸‹ï¼š ContentValues values = new ContentValues(); // ç»„è£…ç¬¬ä¸€æ¡æ•°æ® values.put(&quot;NAME&quot;, NAME_1); values.put(&quot;PRICE&quot;, PRICE_1); // æ’å…¥ç¬¬ä¸€æ¡æ•°æ® db.insert(TABLE_NAME, null, value); // ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¡¨åï¼Œç¬¬äºŒä¸ªå‚æ•°ç”¨äºåœ¨æœªæŒ‡å®šæ·»åŠ æ•°æ®çš„æƒ…å†µä¸‹ç»™æŸäº›å¯ä¸ºç©ºçš„åˆ—è‡ªåŠ¨èµ‹å€¼ NULLï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å°†è¡¨ä¸­æ¯ä¸ªåˆ—åä»¥åŠç›¸åº”çš„å¾…æ·»åŠ æ•°æ®ä¼ å…¥çš„ ContentValues å¯¹è±¡ // æ¸…ç©º values ä¸­çš„æ•°æ® values.clear(); // ç»„è£…ç¬¬äºŒæ¡æ•°æ® values.put(&quot;NAME&quot;, NAME_2); values.put(&quot;PRICE&quot;, PRICE_2); // æ’å…¥ç¬¬äºŒæ¡æ•°æ® db.insert(TABLE_NAME, null, values); æ›´æ–°æ•°æ®çš„æ–¹å¼ä¹Ÿæ˜¯ååˆ†ç›¸ä¼¼ï¼š ContentValues values = new ContentValues(); values.put(&quot;PRICE&quot;, PRICE_3); db.update(TABLE_NAME, values, &quot;NAME = ?&quot;, new String[] { NAME_1 }); å…¶ä¸­ç¬¬ä¸€ä¸ªå‚æ•°æ¯«æ— ç–‘é—®æ˜¯è¡¨åï¼Œç¬¬äºŒä¸ªå‚æ•°åˆ™æ˜¯ ContentValues å¯¹è±¡ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°å¯¹åº”çš„æ˜¯ SQL è¯­å¥ä¸­çš„ WHERE éƒ¨åˆ†ï¼Œè¡¨ç¤ºæ›´æ–°æ‰€æœ‰ NAME ç­‰äº ? çš„è¡Œï¼Œè€Œ ? åˆ™æ˜¯ä¸€ä¸ªå ä½ç¬¦ï¼Œå¯ä»¥é€šè¿‡ç¬¬å››ä¸ªå‚æ•°æä¾›çš„ä¸€ä¸ªå­—ç¬¦ä¸²æ•°ç»„ä¸ºç¬¬ä¸‰ä¸ªå‚æ•°ä¸­çš„æ¯ä¸ªå ä½ç¬¦æŒ‡å®šç›¸åº”çš„å†…å®¹ã€‚ åˆ é™¤æ•°æ®åˆ™æ›´åŠ ç®€å•ï¼š db.delete(TABLE_NAME, &quot;NAME = ?&quot;, new String[] { NAME_2 }); æŸ¥è¯¢æ•°æ®åˆ™è¦å¤æ‚ä¸€äº›ï¼Œè¦çŸ¥é“ SQL çš„å…¨ç§°æ˜¯ Structured Query Languageï¼Œç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ç»“æ„åŒ–æŸ¥è¯¢è¯­å¥ï¼Œå®ƒçš„å¤§éƒ¨åˆ†åŠŸèƒ½éƒ½ä½“ç°åœ¨â€œæŸ¥â€è¿™ä¸ªå­—ä¸Šï¼ŒSQLiteDatabase ä¸­æä¾›äº†ä¸€ä¸ª query() æ–¹æ³•ç”¨äºå¯¹æ•°æ®åº“è¿›è¡ŒæŸ¥è¯¢ï¼Œä½†æ˜¯è¿™ä¸ªæ–¹æ³•çš„å‚æ•°ä¹Ÿæ˜¯éå¸¸å¤æ‚ï¼Œæœ€çŸ­çš„ä¸€ä¸ªæ–¹æ³•é‡è½½ä¹Ÿéœ€è¦ä¼ å…¥ 7 ä¸ªå‚æ•°ï¼š query(String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy); ç¬¬ä¸€ä¸ªå‚æ•°ä¸ç”¨è¯´ï¼Œå½“ç„¶è¿˜æ˜¯ç”¨äºæŒ‡å®šæŸ¥è¯¢çš„è¡¨åï¼Œå¯¹åº” SQL ä¸­çš„ FROM TABLE_NAMEã€‚ç¬¬äºŒä¸ªå‚æ•°ç”¨äºæŒ‡å®šæŸ¥è¯¢çš„åˆ—åï¼Œå¯¹åº” SQL ä¸­çš„ SELECT column_1, column_2ï¼Œå¦‚æœä¸æŒ‡å®šåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰åˆ—ã€‚ç¬¬ä¸‰ã€å››ä¸ªå‚æ•°ç”¨äºçº¦æŸæŸ¥è¯¢çš„åˆ—ï¼Œå¯¹åº” SQL ä¸­çš„ WHERE column = valueï¼Œä¸æŒ‡å®šåˆ™é»˜è®¤æŸ¥è¯¢æ‰€æœ‰è¡Œçš„æ•°æ®ï¼Œä¸ä¸Šæ–¹æ›´æ–°ä¸åˆ é™¤ç±»ä¼¼ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æŒ‡å®š WHERE çš„çº¦æŸæ¡ï¼Œç¬¬å››åˆ—ä¸º WHERE ä¸­çš„å ä½ç¬¦æä¾›å…·ä½“çš„å€¼ã€‚ç¬¬äº”ä¸ªå‚æ•°ç”¨äºæŒ‡å®šéœ€è¦ GROUP BY çš„åˆ—ï¼Œå¯¹åº” SQL ä¸­çš„ GROUP BY columnï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤ºä¸å¯¹æŸ¥è¯¢ç»“æœè¿›è¡Œ GROUP BY æ“ä½œã€‚ç¬¬å…­ä¸ªå‚æ•°ç”¨äºå¯¹ GROUP BY ä¹‹åçš„æ•°æ®ç»“æœè¿›è¡Œè¿›ä¸€æ­¥çš„çº¦æŸè¿‡æ»¤ï¼Œå¯¹åº” SQL ä¸­çš„ HAVING column = valueï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤ºä¸è¿›è¡Œè¿‡æ»¤ã€‚ç¬¬ä¸ƒä¸ªå‚æ•°ç”¨äºæŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ’åºæ–¹å¼ï¼Œå¯¹åº” SQL ä¸­çš„ ORDER BY column_1, column_2ï¼Œä¸æŒ‡å®šåˆ™è¡¨ç¤ºé»˜è®¤çš„æ’åºæ–¹å¼ã€‚ è€Œå…¶ä»–å‡ ä¸ª query() æ–¹æ³•çš„é‡è½½å…¶å®ä¹Ÿå¤§åŒå°å¼‚ï¼Œæ¯”å¦‚å¢åŠ äº† LIMIT åŠŸèƒ½ç­‰ã€‚ å®é™…ä½¿ç”¨ä»£ç å¦‚ä¸‹ï¼š Cursor cursor = db.query(TABLE_NAME, null, null, null, null, null, null); // æŸ¥è¯¢è¡¨ä¸­æ‰€æœ‰æ•°æ® if (cursor.moveToFirst) { do { // éå† Cursor å¯¹è±¡ï¼Œå–å‡ºæ•°æ® String name = cursor.getString(cursor.getColumnIndex(&quot;NAME&quot;)); double price = cursor.getDouble(cursor.getColumnIndex(&quot;PRICE&quot;)); // å¯¹æ•°æ®åšç›¸åº”çš„é€»è¾‘æ“ä½œ ... } while (cursor.moveToNext()); cursor.close(); } æŸ¥è¯¢å®Œä¹‹åå¯ä»¥å¾—åˆ°ä¸€ä¸ª Cursor å¯¹è±¡ï¼Œæ¥ç€è°ƒç”¨å®ƒçš„ moveToFirst() æ–¹æ³•å°†æ•°æ®çš„æŒ‡é’ˆç§»åŠ¨åˆ°ç¬¬ä¸€è¡Œçš„ä½ç½®ï¼Œç„¶åè¿›å…¥ä¸€ä¸ªå¾ªç¯å½“ä¸­ï¼Œå»éå†æŸ¥è¯¢åˆ°çš„æ¯ä¸€è¡Œæ•°æ®ï¼Œåœ¨è¿™ä¸ªå¾ªç¯ä¸­å¯ä»¥é€šè¿‡ Cursor çš„ getColumnIndex() æ–¹æ³•è·å–åˆ°æŸä¸€åˆ—åœ¨è¡¨ä¸­å¯¹åº”çš„ä½ç½®ç´¢å¼•ï¼Œç„¶åå°†è¿™ä¸ªç´¢å¼•ä¼ å…¥åˆ°å¯¹åº”çš„å–å€¼æ–¹æ³•ä¸­ï¼Œå°±å¯ä»¥å¾—åˆ°ä»æ•°æ®åº“ä¸­è¯»å–åˆ°çš„æ•°æ®äº†ã€‚ éœ€è¦æ³¨æ„ï¼Œå¯¹ SQLite çš„æ“ä½œç»“æŸåä¸€å®šè¦è®°å¾—å…³é—­ï¼Œå…»æˆè‰¯å¥½çš„ç¼–ç ä¹ æƒ¯ï¼Œå¦åˆ™åœ¨å½“ä½ å°è¯•å¯¼å‡ºçš„æ—¶å€™ï¼Œæœ‰å¯èƒ½ä¼šé‡åˆ°æ•°æ®åº“ä¸èƒ½æ­£å¸¸æ‰“å¼€çš„æƒ…å†µï¼š cursor.close(); db.close(); è™½ç„¶ Android å·²ç»æä¾›äº†å¾ˆå¤šéå¸¸æ–¹ä¾¿çš„ API ç”¨äºæ“ä½œæ•°æ®åº“ï¼Œä¸è¿‡æ€»ä¼šæœ‰æ—¶å€™ä½¿ç”¨èµ·æ¥åŠ›ä¸ä»å¿ƒï¼Œä¸å¦‚ SQL è¯­è¨€æ–¹ä¾¿ï¼Œè€Œ Android ä¹Ÿæä¾›äº†ä¸€ç³»åˆ—çš„æ–¹æ³•ä½¿å¾—å¯ä»¥ç›´æ¥é€šè¿‡ SQL æ¥æ“ä½œæ•°æ®åº“ï¼Œå®Œæˆ CRUD æ“ä½œï¼Œæ¯”å¦‚é€‚åˆäºå¢åˆ æ”¹çš„ execSQL() æ–¹æ³•å’Œé€‚ç”¨äºæŸ¥çš„ rawQuery() æ–¹æ³•ã€‚ ä»¥ä¸Šçš„ API ç”¨èµ·æ¥ä¹Ÿç®—æ˜¯æ–¹ä¾¿äº†ï¼ŒåŒ…æ‹¬æˆ‘åœ¨å­¦ä¹  Android å¼€å‘å‰æœŸä¹Ÿæ˜¯ä½¿ç”¨ä¸Šé¢çš„æ–¹æ³•ã€‚ ä½†æ˜¯å½“å¼€å‘ç»éªŒé€æ¸ç§¯ç´¯çš„æ—¶å€™ï¼Œå°±ä¼šå‘ç°ä½¿ç”¨è¿™ç§æ–¹æ³•åœ¨å‡çº§æ•°æ®åº“çš„æ—¶å€™å˜å¾—ååˆ†éº»çƒ¦ï¼Œè™½ç„¶ SQLiteOpenHelper ä¸­æä¾›äº† onUpgrade() æ–¹æ³•ï¼Œä½†å‡çº§çš„æ—¶å€™ä¾ç„¶ä¼šå‡ºç°å¾ˆå¤šä¸å¿…è¦çš„éº»çƒ¦ï¼Œè¿™å°±ç»ˆäºè¦è¿›å…¥æœ¬æ–‡çš„æ­£é¢˜äº†ã€‚ è¿˜æ˜¯æ¥æºäºã€Šç¬¬ä¸€è¡Œä»£ç â€”â€”Androidã€‹çš„å­¦ä¹ ç»éªŒï¼Œæˆ‘å¼€å§‹åœ¨æˆ‘çš„æ¯ä¸€ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨ã€LitePalã€è¿™ä¸ªå¼€æºåº“ï¼Œã€LitePalã€æ˜¯ä¸€æ¬¾å¼€æºçš„ Android æ•°æ®åº“æ¡†æ¶ï¼Œå®ƒé‡‡ç”¨äº†å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰çš„æ¨¡å¼ï¼Œå¹¶å°†æˆ‘ä»¬å¹³æ—¶å¼€å‘æœ€å¸¸ç”¨åˆ°çš„ä¸€äº›æ•°æ®åº“åŠŸèƒ½è¿›è¡Œäº†å°è£…ï¼Œä½¿å¾—æ˜“ç”¨æ€§è¦é«˜äº SQLiteOpenHelperã€‚ å…¶å®ä¹‹å‰ä¸€ç›´ä¹Ÿæ²¡å‘ç°ï¼ŒåŸæ¥ã€LitePalã€çš„å¼€å‘è€…æ­£æ˜¯ã€Šç¬¬ä¸€è¡Œä»£ç â€”â€”Androidã€‹çš„ä½œè€…éƒ­éœ–ï¼Œä¸è¿‡éƒ­ç¥ä¹Ÿæ˜¯æ¯”è¾ƒè°¦è™šï¼Œè™½ç„¶è¿™æ˜¯åœ¨ä¹¦ä¸­ç¬¬ä¸€ä¸ªä»‹ç»çš„å¼€æºåº“ï¼Œä½†æ˜¯éƒ­ç¥ä¹Ÿåªå­—æœªæè¿™æ˜¯ä»–æ‰€å¼€å‘çš„æ¡†æ¶ï¼Œæˆ‘ä¹Ÿæ˜¯åˆ°åæ¥ä½¿ç”¨å¤šäº†è€Œé¢‘ç¹è¿›å…¥å…¶ Github é¡¹ç›®ä¸»é¡µæ‰å‘ç°äº†è¿™ä¸ªçœŸç›¸ã€‚ è¿˜å€¼å¾—ä¸€æçš„æ˜¯ï¼Œéƒ­éœ–å·²ç»ç»´æŠ¤ã€LitePalã€äº”å¹´ä¹‹ä¹…äº†ï¼Œæˆªè‡³ç›®å‰ï¼Œå·²ç»å‘å¸ƒäº† Version 3.xï¼Œè€Œæˆ‘ä¹Ÿä» Version 1.x ä¸€ç›´å­¦ä¹ åˆ°äº† Version 3.xï¼Œä¹Ÿç®—æ˜¯äº†è§£å…¶ API çš„å˜åŒ–äº†ï¼Œå¦å¤–å…¶åœ¨ 2018 å¹´å°±è¿ç»­æ›´æ–°äº†ä¸¤æ¬¡å¤§ç‰ˆæœ¬ï¼ŒVersion 3.x æ›´æ˜¯åˆ†è£‚æˆäº†åˆ†åˆ«æ”¯æŒ Kotlin å’Œ Java çš„ä¸¤ä¸ªé¡¹ç›®ï¼Œé™¤äº†ç‰›é€¼æˆ‘å·²ç»æ‰¾ä¸åˆ°å…¶ä»–è¯æ¥å½¢å®¹äº†ï¼ èµ¶ç´§æ¥çœ‹çœ‹ä½¿ç”¨çš„æ–¹æ³•ã€‚ é¦–å…ˆå¾—åœ¨ã€Œapp/build.gradleã€æ–‡ä»¶ä¸­å£°æ˜ä¾èµ–ï¼Œä¸Šé¢ä¹Ÿæåˆ°ï¼Œä¸ºäº†æ›´å¥½åœ°å…¼å®¹ Kotlin è¯­è¨€ï¼Œã€LitePalã€ç°åœ¨ä¸å†æ˜¯ä¸€ä¸ªåº“äº†ï¼Œè€Œæ˜¯å˜æˆäº†ä¸¤ä¸ªåº“ï¼Œæ ¹æ®ä½¿ç”¨çš„è¯­è¨€ä¸åŒï¼Œå¼•å…¥çš„åº“ä¹Ÿä¸åŒã€‚ å¦‚æœä½¿ç”¨çš„æ˜¯ Javaï¼Œåˆ™å¼•å…¥å¦‚ä¸‹é…ç½®ï¼š dependencies { implementation 'org.litepal.android:java:(insert latest version)' } å¦‚æœä½¿ç”¨çš„æ˜¯ Kotlinï¼Œåˆ™å¼•å…¥å¦‚ä¸‹é…ç½®ï¼š dependencies { implementation 'org.litepal.android:kotlin:(insert latest version)' } å¦‚æœä½¿ç”¨ Version 2.x åŠä¹‹å‰ç‰ˆæœ¬çš„è¯ï¼Œåˆ™å¼•å…¥å¦‚ä¸‹é…ç½®ï¼š dependencies { implementation 'org.litepal.android:core:(insert version)' } ç”±äºæ‹†åˆ†æˆäº†ä¸¤ä¸ªåº“ï¼Œæ‰€ä»¥åœ¨ä½¿ç”¨ Version 2.x çš„é¡¹ç›®ä¸­ï¼Œã€Android Studioã€å¹¶ä¸ä¼šå¯¹ã€LitePalã€è¿›è¡Œå‡çº§æé†’ï¼Œä¹Ÿå°±æ˜¯è¯´ã€Android Studioã€é»˜è®¤æŠŠ Version 2.1.0 ä½œä¸ºæœªæ‹†åˆ†åº“å‰çš„æœ€æ–°ç‰ˆï¼Œè€Œåˆ†åº“ååˆ™ä»¥é¡¹ç›®æ–‡æ¡£ä¸ºå‡†ï¼Œå¦å¤–ï¼Œå› ä¸ºæˆ‘ä¸€ç›´éƒ½æ˜¯ä½¿ç”¨ Java è¿›è¡Œ Android å¼€å‘ï¼Œæ‰€ä»¥ä¸‹é¢çš„ä»‹ç»ä¹Ÿéƒ½ç”¨ Java è¿›è¡Œç¤ºä¾‹ã€‚ æŠŠã€LitePalã€æˆåŠŸå¼•å…¥åˆ°é¡¹ç›®ä¸­åï¼Œåˆ™éœ€è¦é…ç½® LitePalApplication äº†ï¼Œåœ¨ã€ŒAndroidManifest.xmlã€ä¸­æŒ‡å®š Application çš„ android:nameï¼Œä»£ç å¦‚ä¸‹ï¼š &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; package=&quot;com.liar.litepaldemo&quot;&gt; &lt;application ... android:name=&quot;org.litepal.LitePalApplication&quot; &gt; ... &lt;/application&gt; &lt;/manifest&gt; å½“ç„¶ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬è¿˜ä¼šä¸ºé¡¹ç›®é…ç½®å±äºè‡ªå·±çš„ Applicationï¼Œæ¯”å¦‚ï¼š &lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot; xmlns:tools=&quot;http://schemas.android.com/tools&quot; package=&quot;com.liar.litepaldemo&quot;&gt; &lt;application ... android:name=&quot;com.liar.MyOwnApplication&quot; &gt; ... &lt;/application&gt; &lt;/manifest&gt; è€Œä¸€ä¸ª Application åªèƒ½æœ‰ä¸€ä¸ª android:nameï¼Œè¿™æ ·éº»çƒ¦å°±æ¯”è¾ƒå¤§äº†ï¼Œä½†ã€LitePalã€å·²ç»ä¸ºæˆ‘ä»¬è€ƒè™‘äº†è¿™ä¸€ç‚¹ï¼Œåªéœ€åœ¨æˆ‘ä»¬è‡ªå®šä¹‰çš„ Application ä¸­è°ƒç”¨ã€LitePalã€æä¾›çš„æ–¹æ³•å³å¯ï¼š public class MyOwnApplication extends Application { @Override public void onCreate() { super.onCreate(); LitePal.initialize(this); } ... } é…ç½®å®Œ Applicationï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºæ•°æ®åº“äº†ã€‚ å¯¹æ¯”ä¹‹å‰è‡ªå®šä¹‰ç±»ç»§æ‰¿è‡ª SQLiteOpenHelper å¹¶åœ¨ onCreate() æ–¹æ³•ä¸­ç¼–å†™å»ºè¡¨è¯­å¥æ¥å®ç°çš„æ–¹æ³•ï¼Œã€LitePalã€æä¾›çš„æ–¹æ³•ååˆ†é¢ è¦†å´åˆæ›´åŠ å¥½ç”¨ã€‚ å‰é¢æåˆ°ã€LitePalã€é‡‡å–çš„æ˜¯å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰çš„æ¨¡å¼ï¼Œé‚£ä¹ˆä»€ä¹ˆæ˜¯å¯¹è±¡å…³ç³»æ˜ å°„å‘¢ï¼Ÿç®€å•ç‚¹è¯´ï¼Œæˆ‘ä»¬ä½¿ç”¨çš„ç¼–ç¨‹è¯­è¨€æ˜¯é¢å‘å¯¹è±¡è¯­è¨€ï¼Œè€Œä½¿ç”¨çš„æ•°æ®åº“åˆ™æ˜¯å…³ç³»å‹æ•°æ®åº“ï¼Œé‚£ä¹ˆå°†é¢å‘å¯¹è±¡çš„è¯­è¨€å’Œé¢å‘å…³ç³»çš„æ•°æ®åº“ä¹‹é—´å»ºç«‹ä¸€ç§æ˜ å°„å…³ç³»ï¼Œå°±æ˜¯å¯¹è±¡å…³ç³»æ˜ å°„äº†ã€‚ å¯¹è±¡å…³ç³»æ˜ å°„æ¨¡å¼èµ‹äºˆäº†æˆ‘ä»¬ä¸€ä¸ªå¼ºå¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´æ¥æ“ä½œæ•°æ®åº“ï¼Œè€Œä¸ç”¨å†å’Œ SQL è¯­å¥æ‰“äº¤é“ã€‚åˆ›å»ºä¸€å¼ è¡¨ï¼Œæˆ‘ä»¬åº”å…ˆåˆ†æè¡¨ä¸­åº”åŒ…å«å“ªäº›åˆ—ï¼Œåœ¨ã€LitePalã€ä¸­ï¼Œå¯ä»¥ç”¨é¢å‘å¯¹è±¡çš„æ€ç»´æ¥å®ç°ï¼Œæ¯”å¦‚æˆ‘åˆ›å»ºä¸€ä¸ª Users è¡¨ï¼Œå¸Œæœ›æœ‰ nameã€emailã€password ä¸‰ä¸ªå­—æ®µï¼Œæˆ‘å°±å¯ä»¥å®šä¹‰ä¸€ä¸ª Users ç±»æ¥å®Œæˆè¿™ä»¶äº‹æƒ…ï¼š public class Users extends LitePalSupport { private String name; private String email; private String password; public String getName() { return name; } public void setName(String name) { this.name = name; } public String getEmail() { return email; } public void setEmail(String email) { this.email = email; } public String getPassword() { return password; } public void setPassword(String password) { this.password = password; } } è¿™æ˜¯ä¸€ä¸ªå…¸å‹çš„ Java Beanï¼Œåœ¨ã€Android Studioã€ä¸­å¯ä»¥é€šè¿‡å¿«æ·é”®ï¼ˆWindows ç³»ç»Ÿä¸­æ˜¯ Alt+Insertï¼ŒMac ç³»ç»Ÿä¸­æ˜¯ Command+Nï¼‰åœ¨å¼¹å‡ºçš„èœå•ä¸­é€‰æ‹©ã€ŒGetter and Setterã€å¹¶é€‰ä¸­æ‰€æœ‰å­—æ®µæ¥å¿«é€Ÿç”Ÿæˆï¼Œåœ¨ Users ç±»ä¸­å®šä¹‰äº†ä¸Šè¿°çš„ä¸‰ä¸ªå­—æ®µï¼Œå¹¶ç”Ÿæˆäº†ç›¸åº”çš„ Getter å’Œ Setter æ–¹æ³•ï¼Œè¿™æ ·è¡¨å°±åˆ›å»ºå®Œæˆäº†ã€‚ éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªç±»éœ€è¦ç»§æ‰¿è‡ª LitePalSupport ç±»æ‰è¡Œï¼Œå…¶å®ã€LitePalã€è¿›è¡Œè¡¨ç®¡ç†æ“ä½œæ—¶ä¸éœ€è¦æ¨¡å‹ç±»æœ‰ä»»ä½•çš„ç»§æ‰¿ç»“æ„ï¼Œä½†æ˜¯è¿›è¡Œ CRUD æ“ä½œæ—¶å°±ä¸è¡Œäº†ï¼Œå¿…é¡»å¾—ç»§æ‰¿è‡ª LitePalSupport ç±»ï¼Œè€Œè¿™ä¸ªç±»ä¹Ÿæ˜¯åœ¨ Version 2.0.0 ä¸­æ‰ä¿®æ”¹çš„ï¼Œåœ¨ Version 1.x ä¸­ç»§æ‰¿è‡ª DataSupport ç±»ã€‚ ä» Version 2.0.0 å¼€å§‹ï¼Œå‡ ä¹æ‰€æœ‰çš„ API æ¥å£å…¨éƒ¨éƒ½å˜äº†ã€‚ä½†æ˜¯è¯·ä¸è¦æƒŠæ…Œï¼ŒVersion 2.0.0 æ˜¯å®Œå…¨å‘ä¸‹å…¼å®¹çš„ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¤§å®¶ä¸ç”¨æ‹…å¿ƒå‡çº§ä¹‹åä¼šå‡ºç°å¤§é‡çš„é”™è¯¯ï¼Œä¹‹å‰æ‰€æœ‰çš„ä»£ç éƒ½è¿˜æ˜¯å¯ä»¥æ­£å¸¸è¿è¡Œçš„ï¼Œåªæ˜¯åŸæ¥æ—§çš„ API ä¼šè¢«æ ‡è¯†ä¸ºåºŸå¼ƒï¼Œæé†’å¤§å®¶å°½å¿«ä½¿ç”¨æ–°çš„ API è€Œå·²ã€‚ å½“ç„¶ï¼Œå¤§å®¶ä¹Ÿä¸ç”¨ä¸€å¬åˆ°æ‰€æœ‰çš„ API éƒ½å˜äº†å°±è§‰å¾—ææ…Œï¼Œè™½ç„¶æˆ‘åˆšè¿‡æ¸¡ç‰ˆæœ¬çš„æ—¶å€™ä¹Ÿæœ‰ç‚¹æ‰‹è¶³æ— æªï¼Œä½†æ˜¯é˜…è¯»äº†æ–‡æ¡£ä¹‹åå°±å‘ç°ï¼Œå…¶å®ä¸€åˆ‡çš„å˜æ›´éƒ½æ˜¯æœ‰è§„å¾‹å¯å¾ªçš„ï¼Œå…·ä½“ä¸‹æ–‡ä¼šç»§ç»­ä»‹ç»ã€‚ ç»§ç»­æ¥çœ‹ä½¿ç”¨æ–¹æ³•ï¼Œå½“æ¨¡å‹ç±»åˆ›å»ºå®Œæˆåå°±è¯¥é…ç½®ã€Œlitepal.xmlã€æ–‡ä»¶äº†ï¼Œåœ¨ app/src/main/assets ç›®å½•ä¸‹æ–°å»ºã€Œlitepal.xmlã€æ–‡ä»¶ï¼Œç¼–è¾‘ä»£ç å¦‚ä¸‹ï¼š &lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt; &lt;litepal&gt; &lt;dbname value=&quot;HacppleStore&quot; /&gt; &lt;!-- æ•°æ®åº“åç§° --&gt; &lt;version value=&quot;1&quot; /&gt; &lt;!-- æ•°æ®åº“ç‰ˆæœ¬ --&gt; &lt;!-- æŒ‡å®šæ‰€æœ‰çš„æ˜ å°„æ¨¡å‹ --&gt; &lt;list&gt; &lt;mapping class=&quot;com.liar.hacpplestore.database.Users&quot; /&gt; &lt;/list&gt; &lt;!-- è®¾ç½®æ•°æ®åº“åœ¨ SD å¡ä¸­çš„å­˜å‚¨ç›®å½• --&gt; &lt;storage value=&quot;liar/database&quot; /&gt; &lt;/litepal&gt; è¿™é‡Œç”¨ &lt;mapping&gt; æ ‡ç­¾æ¥å£°æ˜æˆ‘ä»¬è¦é…ç½®çš„æ˜ å°„æ¨¡å‹ç±»ï¼Œæ³¨æ„ä¸€å®šè¦ä½¿ç”¨å®Œæ•´çš„ç±»åã€‚ä¸ç®¡æœ‰å¤šå°‘æ¨¡å‹ç±»éœ€è¦æ˜ å°„ï¼Œéƒ½ä½¿ç”¨åŒæ ·çš„æ–¹æ³•é…ç½®åœ¨ &lt;list&gt; æ ‡ç­¾ä¸‹å³å¯ã€‚ &lt;storage&gt; æ ‡ç­¾åˆ™æ˜¯ç”¨äºå°†æ•°æ®åº“ä¿å­˜åˆ° SD å¡ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯åœ¨ Version 1.6.0 ä¸­åŠ å…¥çš„ï¼Œæˆ‘åœ¨ä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸ä¼šç”¨åˆ°ã€‚ å°†æ•°æ®åº“ä¿å­˜åˆ° SD å¡çš„åŠŸèƒ½ä¸€ç›´å‘¼å£°æ˜¯æŒºé«˜çš„ï¼Œä¸è¿‡ã€LitePalã€ä¸€å¼€å§‹å¹¶æ²¡æœ‰åŠ å…¥è¿™ä¸ªåŠŸèƒ½ï¼Œå› ä¸ºæ•°æ®åº“æ–‡ä»¶ä¿å­˜åˆ° SD å¡æ˜¯ä¸€ä»¶å¾ˆä¸å®‰å…¨çš„äº‹æƒ…ï¼Œè¿™å°±æ„å‘³ç€åº”ç”¨ç¨‹åºçš„æ•°æ®å°†ä¼šé¢ä¸´æ³„éœ²çš„é£é™©ï¼Œä½†æ˜¯åœ¨ Version 1.6.0 å¼€å§‹æ”¯æŒæ•°æ®åŠ å¯†åŠŸèƒ½ï¼Œå› æ­¤å¼€æ”¾å°†æ•°æ®åº“å­˜å‚¨åˆ° SD å¡çš„è¿™ä¸ªåŠŸèƒ½ä¹Ÿå°±å˜å¾—é¡ºç†æˆç« äº†ã€‚ å…¶å®åœ¨ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯éå¸¸ä¸å»ºè®®å°†æ•°æ®åº“æ–‡ä»¶ä¿å­˜åˆ° SD å¡çš„ï¼Œä½†æ˜¯ä¿å­˜åˆ° SD å¡ä¹Ÿç¡®å®å­˜åœ¨ç€ä¸€äº›å¥½å¤„ï¼š ä¸€æ˜¯æ–¹ä¾¿è°ƒè¯•ã€‚å› ä¸ºæ•°æ®åº“çš„é»˜è®¤å­˜å‚¨è·¯å¾„æ˜¯åœ¨åº”ç”¨çš„æ²™ç›’å½“ä¸­ï¼Œå³ä½¿ä½œä¸ºå¼€å‘è€…çš„æˆ‘ä»¬ä¹Ÿæ˜¯è®¿é—®ä¸åˆ°çš„ã€‚å› æ­¤æœ‰æ—¶å€™ç¼–ç¨‹å‡ºç°äº†é—®é¢˜ï¼Œä½†æ˜¯æˆ‘ä»¬åˆçœ‹ä¸åˆ°æ•°æ®åº“åŸæ–‡ä»¶ï¼Œè°ƒè¯•èµ·æ¥éå¸¸ä¸æ–¹ä¾¿ã€‚è€Œå°†æ•°æ®åº“æ–‡ä»¶ä¿å­˜åˆ° SD å¡ï¼Œæˆ‘ä»¬å°±å¯ä»¥è½»æ˜“åœ°è®¿é—®åˆ°äº†ã€‚ äºŒæ˜¯åº”ç”¨å¸è½½åæ•°æ®ä¸ä¸¢å¤±ã€‚ç”±äºæ•°æ®åº“æ–‡ä»¶é»˜è®¤å­˜å‚¨åœ¨åº”ç”¨çš„æ²™ç›’ç›®å½•å½“ä¸­ï¼Œä¸€æ—¦åº”ç”¨è¢«å¸è½½äº†ï¼Œæ•°æ®åº“æ–‡ä»¶ä¹Ÿä¼šä¸€åŒè¢«æ¸…é™¤ã€‚å¦‚æœä½ æƒ³å®ç°è¿™æ ·çš„åŠŸèƒ½ï¼šåº”ç”¨è¢«å¸è½½äº†ï¼Œç„¶åç”¨æˆ·åˆé‡æ–°å®‰è£…ï¼Œä¾ç„¶èƒ½å¤Ÿè¯»å–åˆ°ä¹‹å‰çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±å¿…é¡»å°†æ•°æ®åº“æ–‡ä»¶ä¿å­˜åˆ° SD å¡ã€‚ å›åˆ°ä¸Šæ–¹çš„ç¤ºä¾‹ï¼Œéƒ­ç¥åœ¨è®¾è®¡ã€LitePalã€çš„æ¥å£æ—¶ï¼Œæ°¸è¿œéƒ½ä¼šå°†æ˜“ç”¨æ€§æ”¾åœ¨ç¬¬ä¸€ä½ï¼Œæ‰€ä»¥ä¸Šæ–¹ç¤ºä¾‹ä¸­çš„ä¸€è¡Œä»£ç å°±å·²ç»èƒ½å¤Ÿå°†æ•°æ®åº“æ–‡ä»¶ä¿å­˜åˆ° SD å¡çš„ liar/database ç›®å½•ä¸‹äº†ã€‚æ³¨æ„ä¸éœ€è¦å°† SD å¡çš„å®Œæ•´è·¯å¾„é…ç½®è¿›å»ï¼Œåªéœ€è¦é…ç½®ç›¸å¯¹è·¯å¾„å³å¯ã€‚ å¦å¤–è¿˜æœ‰éå¸¸é‡è¦çš„ä¸€ç‚¹éœ€è¦æ³¨æ„ï¼Œç”±äºä» Android M å¼€å§‹è®¿é—® SD å¡éœ€è¦ç”³è¯·è¿è¡Œæ—¶æƒé™ï¼Œè€Œã€LitePalã€ä¸­æ—¢æ²¡æœ‰ Activity ä¹Ÿæ²¡æœ‰ Fragmentï¼Œæ‰€ä»¥ã€LitePalã€æ˜¯ä¸ä¼šå»å¸®ä½ ç”³è¯·è¿è¡Œæ—¶æƒé™çš„ï¼Œå› æ­¤å¦‚æœä½ é€‰æ‹©å°†æ•°æ®åº“æ–‡ä»¶å­˜å‚¨åœ¨ SD å¡ä¸Šï¼Œé‚£ä¹ˆè¯·ä¸€å®šè¦ç¡®ä¿ä½ çš„åº”ç”¨ç¨‹åºå·²ç»å¯¹è®¿é—® SD å¡æƒé™è¿›è¡Œäº†è¿è¡Œæ—¶æƒé™å¤„ç†ï¼Œå¦åˆ™ã€LitePalã€çš„æ‰€æœ‰æ“ä½œéƒ½å°†ä¼šå¤±è´¥ã€‚ è¿™æ ·å°±æŠŠæ‰€æœ‰å‡†å¤‡å·¥ä½œå°±åšå®Œäº†ï¼Œåªè¦è¿›è¡Œä»»æ„ä¸€æ¬¡æ•°æ®åº“æ“ä½œï¼Œã€ŒHacppleStore.dbã€æ•°æ®åº“å°±ä¼šè‡ªåŠ¨åˆ›å»ºå‡ºæ¥äº†ï¼Œå¦‚ï¼š LitePal.getDatabase(); å‰é¢ä¹Ÿæåˆ°ï¼Œä½¿ç”¨ SQLiteOpenHelper æ¥å‡çº§æ•°æ®åº“ä¼šé‡åˆ°éå¸¸ä¸¥é‡çš„é—®é¢˜ï¼Œå®¹æ˜“é€ æˆæ•°æ®ä¸¢å¤±ï¼Œå½“ç„¶æœ‰ç»éªŒçš„ç¨‹åºå‘˜å¯ä»¥é€šè¿‡å¤æ‚çš„é€»è¾‘æ§åˆ¶æ¥é¿å…è¿™ç§æƒ…å†µï¼Œä½†æ˜¯ç»´æŠ¤æˆæœ¬å¾ˆé«˜ã€‚è€Œæœ‰äº†ã€LitePalã€ï¼Œè¿™äº›å°±éƒ½ä¸å†æ˜¯é—®é¢˜äº†ï¼Œä½¿ç”¨ã€LitePalã€æ¥å‡çº§æ•°æ®åº“éå¸¸éå¸¸ç®€å•ï¼Œå®Œå…¨ä¸ç”¨æ€è€ƒä»»ä½•é€»è¾‘ï¼Œåªéœ€è¦æ›´æ”¹æƒ³è¦æ›´æ”¹çš„å†…å®¹ï¼Œç„¶åå°†ç‰ˆæœ¬å·åŠ 1å°±å¯ä»¥äº†ã€‚ æ¯”å¦‚æˆ‘åœ¨ä¸Šé¢çš„ Users è¡¨ä¸­å¢åŠ ä¸€ä¸ª tel åˆ—ï¼Œé‚£ä¹ˆæˆ‘ç›´æ¥ä¿®æ”¹ Users ç±»ä¸­çš„ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ª tel å­—æ®µå³å¯ï¼š public class Users extends LitePalSupport { ... private String tel; public String getTel() { return tel; } public void setTel(String tel) { this.tel = tel; } ... } ä¸æ­¤åŒæ—¶ï¼Œæˆ‘è¿˜æƒ³æ·»åŠ ä¸€å¼  Orders è¡¨ï¼Œé‚£ä¹ˆåªéœ€æ–°å»ºä¸€ä¸ª Orders ç±»å³å¯ï¼š public class Orders extends LitePalSupport { private String orderNum; private String buyerName; private String buyerTel; private String buyerAddress; private String transactionTime; public String getOrderNum() { return orderNum; } public void setOrderNum(String orderNum) { this.orderNum = orderNum; } public String getBuyerName() { return buyerName; } public void setBuyerName(String buyerName) { this.buyerName = buyerName; } public String getBuyerTel() { return buyerTel; } public void setBuyerTel(String buyerTel) { this.buyerTel = buyerTel; } public String getBuyerAddress() { return buyerAddress; } public void setBuyerAddress(String buyerAddress) { this.buyerAddress = buyerAddress; } public String getTransactionTime() { return transactionTime; } public void setTransactionTime(String transactionTime) { this.transactionTime = transactionTime; } } å½“æ”¹å®Œäº†æ‰€æœ‰æˆ‘ä»¬æƒ³æ”¹çš„ä¸œè¥¿ï¼Œåªéœ€è¦è®°å¾—å°†ç‰ˆæœ¬å·åŠ  1 å³å¯ï¼Œå¦‚æœæ·»åŠ äº†ä¸€ä¸ªæ–°çš„æ¨¡å‹ç±»ï¼Œå› æ­¤ä¹Ÿéœ€è¦å°†å®ƒæ·»åŠ åˆ°æ˜ å°„æ¨¡å‹åˆ—è¡¨ä¸­ã€‚ä¿®æ”¹ã€Œlitepal.xmlã€ä¸­çš„ä»£ç ï¼š &lt;litepal&gt; &lt;dbname value=&quot;HacppleStore&quot; /&gt; &lt;version value=&quot;2&quot; /&gt; &lt;list&gt; &lt;mapping class=&quot;com.liar.hacpplestore.database.Users&quot; /&gt; &lt;mapping class=&quot;com.liar.hacpplestore.database.Orders&quot; /&gt; &lt;/list&gt; ... &lt;/litepal&gt; è¿è¡Œåå°±å¯ä»¥å‘ç°ã€LitePalã€åœ¨å†…éƒ¨å·²ç»è‡ªåŠ¨å¸®æˆ‘ä»¬ä¿ç•™äº†æ‰€æœ‰æ•°æ®å¹¶å®Œæˆäº†å‡çº§ã€‚ æ¥ä¸‹æ¥å°±è¯¥ä»‹ç» CRUD äº†ã€‚ å…¶å®å›è§‚å‰é¢çš„æ·»åŠ æ•°æ®çš„æ–¹æ³•å¹¶ä¸ååˆ†å¤æ‚ï¼Œä½†ã€LitePalã€åˆ™æŠŠè¿™ä¸€åˆ‡åšå¾—æ›´åŠ ç®€å•äº†ï¼š Users user = new Users(); user.setName(name); user.setTel(tel); user.setEmail(email); user.setPassword(password); user.save(); è¿˜è®°å¾—æˆ‘ä»¬åœ¨æ¨¡å‹ç±»ä¸­çš„ Java Bean å—ï¼Ÿæ·»åŠ æ•°æ®åªéœ€è°ƒç”¨ Users ç±»ä¸­çš„å„ç§ set æ–¹æ³•å¯¹æ•°æ®è¿›è¡Œè®¾ç½®ï¼Œæœ€åå†è°ƒç”¨ä» LitePalSupport ç±»ä¸­ç»§æ‰¿è€Œæ¥çš„ save() æ–¹æ³•å°±èƒ½å®Œæˆæ•°æ®æ·»åŠ æ“ä½œäº†ã€‚ æ›´æ–°æ•°æ®åˆ™è¦æ¯”æ·»åŠ æ•°æ®è¦ç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œå› ä¸ºå®ƒçš„ API æ¥å£æ¯”è¾ƒå¤šï¼Œè€Œæˆ‘æœ€å¸¸ç”¨çš„å°±æ˜¯ updateAll() æ–¹æ³•ï¼š Users user = new Users(); user.setTel(NEW_TEL); user.setPassword(NEW_PASSWORD); user.updateAll(&quot;name = ? and email = ?&quot;, name, email); è¿™é‡Œé¦–å…ˆ new å‡ºäº†ä¸€ä¸ª Users å®ä¾‹ï¼Œç„¶åç›´æ¥è°ƒç”¨ set æ–¹æ³•æ¥è®¾ç½®è¦æ›´æ–°çš„æ•°æ®ï¼Œæœ€ååœ¨è°ƒç”¨ updateAll() æ–¹æ³•å»æ‰§è¡Œæ›´æ–°æ“ä½œã€‚æ³¨æ„ updateAll() æ–¹æ³•ä¸­å¯ä»¥æŒ‡å®šä¸€ä¸ªæ¡ä»¶çº¦æŸï¼Œå’Œ SQLiteDatabase ä¸­ update() æ–¹æ³•çš„ where å‚æ•°éƒ¨åˆ†æœ‰ç‚¹ç±»ä¼¼ï¼Œä½†æ›´åŠ ç®€æ´ï¼Œä¸è¿‡ä¸æŒ‡å®šæ¡ä»¶è¯­å¥çš„è¯ï¼Œå°±è¡¨ç¤ºæ›´æ–°æ‰€æœ‰æ•°æ®ã€‚ åœ¨ä½¿ç”¨ updateAll() æ–¹æ³•æ—¶ï¼Œè¿˜æœ‰ä¸€ä¸ªéå¸¸é‡è¦çš„çŸ¥è¯†ç‚¹ï¼Œå°±æ˜¯å½“æƒ³æŠŠä¸€ä¸ªå­—æ®µçš„å€¼æ›´æ–°æˆé»˜è®¤å€¼æ—¶ï¼Œæ˜¯ä¸å¯ä»¥ä½¿ç”¨ä¸Šé¢çš„æ–¹å¼æ¥ set æ•°æ®çš„ã€‚ä¼—æ‰€å‘¨çŸ¥åœ¨ Java ä¸­ä»»ä½•ä¸€ç§æ•°æ®ç±»å‹çš„å­—æ®µéƒ½ä¼šæœ‰é»˜è®¤å€¼ï¼Œä¾‹å¦‚ int ç±»å‹çš„é»˜è®¤å€¼æ˜¯ 0ï¼Œboolean ç±»å‹çš„é»˜è®¤å€¼æ˜¯ falseï¼ŒString ç±»å‹çš„é»˜è®¤å€¼æ˜¯ nullï¼Œé‚£ä¹ˆå½“ new å‡ºä¸€ä¸ªæ¨¡å‹ç±»å¯¹è±¡æ—¶ï¼Œå…¶å®æ‰€æœ‰å­—æ®µéƒ½å·²ç»è¢«åˆå§‹åŒ–æˆé»˜è®¤å€¼äº†ã€‚å› æ­¤å¦‚æœæˆ‘ä»¬å‘æŠŠæ•°æ®åº“è¡¨ä¸­çš„æŸ int ç±»å‹åˆ—çš„æ›´æ–°æˆ 0ï¼Œç›´æ¥è°ƒç”¨ setVariable(0) æ˜¯ä¸å¯ä»¥çš„ï¼Œå› ä¸ºå³ä½¿ä¸è°ƒç”¨è¿™è¡Œä»£ç ï¼Œvariable è¿™ä¸ªå­—æ®µæœ¬èº«ä¹Ÿæ˜¯ 0ï¼Œã€LitePalã€æ­¤æ—¶æ˜¯ä¸ä¼šå¯¹è¿™ä¸ªåˆ—è¿›è¡Œæ›´æ–°çš„ã€‚ å¯¹äºæ‰€æœ‰æƒ³è¦å°†ä¸ºæ•°æ®æ›´æ–°æˆé»˜è®¤å€¼çš„æ“ä½œï¼Œã€LitePalã€ç»Ÿä¸€æä¾›äº†ä¸€ä¸ª setToDefault() æ–¹æ³•ï¼Œç„¶åä¼ å…¥ç›¸åº”çš„åˆ—åå°±å¯ä»¥å®ç°äº†ï¼š Users user = new Users(); user.setToDefault(&quot;tel&quot;); user.updateAll(); è¿™æ®µä»£ç çš„æ„æ€æ˜¯å°†æ‰€æœ‰ç”¨æˆ·çš„ tel éƒ½è®¾ä¸º nullï¼Œè™½ç„¶å®é™…ä¸Šæˆ‘ä»¬å¹¶ä¸ä¼šè¿™æ ·åšã€‚å› ä¸º updateAll() æ–¹æ³•ä¸­æ²¡æœ‰æŒ‡å®šçº¦æŸæ¡ä»¶ï¼Œå› æ­¤æ›´æ–°æ“ä½œå¯¹æ‰€æœ‰æ•°æ®éƒ½ç”Ÿæ•ˆäº†ã€‚ åˆ é™¤æ•°æ®ä¹Ÿæ˜¯éå¸¸ç®€å•çš„ï¼Œæˆ‘æœ€å¸¸ç”¨çš„æ–¹æ³•æ˜¯ç›´æ¥è°ƒç”¨ deleteAll() æ–¹æ³•ï¼š LitePal.deleteAll(Users.class, &quot;tel = ?&quot;, tel); åé¢çš„å‚æ•°åŒæ ·ç”¨äºæŒ‡å®šçº¦æŸæ¡ä»¶ï¼Œåº”è¯¥ä¸éš¾ç†è§£ã€‚å¦å¤–å¦‚æœä¸æŒ‡å®šçº¦æŸæ¡ä»¶ï¼Œå°±æ„å‘³ç€è¦åˆ é™¤è¡¨ä¸­æ‰€æœ‰çš„æ•°æ®ï¼Œè¿™ä¸€ç‚¹å’Œä¸Šé¢ updateAll() æ–¹æ³•æ˜¯æ¯”è¾ƒç›¸ä¼¼çš„ã€‚ è¿˜å€¼å¾—ä¸€æçš„æ˜¯ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨ Version 1.x ä¸­çš„å†™æ³•ä¸º DataSupport.deleteAll()ï¼Œåœ¨ Version 2.0.0 ä¸­è¢«æ”¹æˆäº†ç°åœ¨çš„å†™æ³•ã€‚ åˆåˆ°äº†æŸ¥è¯¢æ•°æ®éƒ¨åˆ†ï¼Œä½¿ç”¨äº†ã€LitePalã€åå¤æ‚çš„æŸ¥è¯¢æ“ä½œå°±æˆä¸ºäº†è¿‡å»å¼ï¼Œã€LitePalã€åœ¨æŸ¥è¯¢ API æ–¹é¢åšäº†éå¸¸å¤šçš„ä¼˜åŒ–ï¼ŒåŸºæœ¬ä¸Šå¯ä»¥æ»¡è¶³ç»å¤§å¤šæ•°åœºæ™¯çš„æŸ¥è¯¢éœ€æ±‚ï¼Œå¹¶ä¸”ä»£ç ååˆ†ç®€æ´ï¼Œæ¯”å¦‚å‘æŸ¥è¯¢ Users è¡¨ä¸­æ‰€æœ‰æ•°æ®ï¼Œä»£ç å¦‚ä¸‹ï¼š List&lt;Users&gt; users = LitePal.findAll(Users.class); for (Users user: users) { String name = user.getName(); String email = user.getEmail(); // å¯¹æ•°æ®åšç›¸åº”çš„é€»è¾‘æ“ä½œ ... } findAll() æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª List é›†åˆï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæˆ‘ä»¬ä¸ç”¨åƒä¹‹å‰é‚£æ ·å†é€šè¿‡ Cursor å¯¹è±¡ä¸€è¡Œè¡Œå»å–å€¼äº†ï¼Œã€LitePalã€å·²ç»è‡ªåŠ¨å¸®æˆ‘ä»¬å®Œæˆäº†èµ‹å€¼æ“ä½œã€‚ é™¤äº† findAll() æ–¹æ³•ä¹‹å¤–ï¼Œã€LitePalã€è¿˜æä¾›äº†å¾ˆå¤šå…¶ä»–éå¸¸æœ‰ç”¨çš„æŸ¥è¯¢ APIï¼Œæ¯”å¦‚æƒ³è¦æŸ¥è¯¢è¡¨ä¸­çš„ç¬¬ä¸€æ¡æ•°æ®å°±å¯ä»¥å†™ï¼š Users firstUser = LitePal.findFirst(Users.class); åŒæ ·çš„ï¼ŒæŸ¥è¯¢è¡¨ä¸­æœ€åä¸€æ¡æ•°æ®å¯ä»¥è¿™æ ·å†™ï¼š Users lastUser = LitePal.findLast(Users.class); æˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡è¿ç¼€æŸ¥è¯¢æ¥å®šåˆ¶æ›´å¤šçš„æŸ¥è¯¢åŠŸèƒ½ï¼Œæ¯”å¦‚ï¼š List&lt;Users&gt; users = LitePal.select(&quot;name&quot;, &quot;tel&quot;) .where(&quot;name = ?&quot;, name) .order(&quot;tel desc&quot;) .limit(10) .offset(10) .find(Users.class); ä¸éš¾ç†è§£ï¼Œselect() æ–¹æ³•ç”¨äºæŒ‡å®šæŸ¥è¯¢å“ªå‡ åˆ—çš„æ•°æ®ï¼Œwhere() æ–¹æ³•ç”¨äºæŒ‡å®šæŸ¥è¯¢çš„çº¦æŸæ¡ä»¶ï¼Œorder() æ–¹æ³•ç”¨äºæŒ‡å®šç»“æœçš„æ’åºæ–¹å¼ï¼Œlimit() æ–¹æ³•ç”¨äºæŒ‡å®šæŸ¥è¯¢ç»“æœçš„æ•°é‡ï¼Œoffset() ç”¨äºæŒ‡å®šæŸ¥è¯¢ç»“æœçš„åç§»é‡ã€‚ ä¸Šæ–¹çš„è¿™æ®µä»£ç å°±è¡¨ç¤ºï¼ŒæŸ¥è¯¢ Users è¡¨ä¸­ç¬¬ 11~20 æ¡æ»¡è¶³åå­—ä¸º nameï¼ˆå³åŒåï¼‰è¿™ä¸ªæ¡ä»¶çš„ name å’Œ tel è¿™ä¸¤åˆ—æ•°æ®ï¼Œå¹¶å°†æŸ¥è¯¢ç»“æœæŒ‰ç…§ tel é™åºæ’åˆ—ï¼Œå¦‚æœåªæŒ‡å®š .order(&quot;tel&quot;) åˆ™æŒ‰ç…§å‡åºæ’åˆ—ã€‚ è¿™äº› API å·²ç»è¶³å¤Ÿæˆ‘ä»¬åº”å¯¹ç»å¤§å¤šæ•°åœºæ™¯çš„æŸ¥è¯¢éœ€æ±‚äº†ï¼Œå¦‚æœå®åœ¨æœ‰ä¸€äº›ç‰¹æ®Šéœ€æ±‚ï¼Œä¸Šè¿° API éƒ½æ»¡è¶³ä¸äº†ä½¿ç”¨çš„æ—¶å€™ï¼Œã€LitePalã€ä»ç„¶æ”¯æŒä½¿ç”¨åŸç”Ÿçš„ SQL æ¥è¿›è¡ŒæŸ¥è¯¢ï¼š Cursor cursor = LitePal.findBySQL(&quot;SELECT * FROM Users WHERE name = ?&quot;, name); æ³¨æ„ findBySQL() æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª Cursor å¯¹è±¡ï¼Œæ¥ä¸‹æ¥è¿˜éœ€è¦é€šè¿‡ä¹‹å‰çš„è€æ–¹å¼å°†æ•°æ®ä¸€ä¸€å–å‡ºæ‰è¡Œã€‚ åŒæ ·ï¼Œä¸Šæ–¹çš„ LitePal.***() æ–¹æ³•éƒ½æ˜¯åœ¨ Version 2.0.0 ä¸­ä» DataSupport.***() ä¸­å‡çº§è¿‡æ¥çš„ã€‚æ€»ç»“ä¸€ä¸‹å…¶å®ä¸»è¦å°±åªæœ‰ä¸¤ç‚¹ï¼Œå¦‚æœæ˜¯åœ¨ç»§æ‰¿ç»“æ„ä¸­ä½¿ç”¨äº† DataSupportï¼Œé‚£ä¹ˆå°±å°†å®ƒæ”¹ä¸º LitePalSupportï¼Œå¦‚æœæ˜¯è°ƒç”¨äº† DataSupport ä¸­çš„é™æ€æ–¹æ³•ï¼Œé‚£ä¹ˆå°±å°†å®ƒæ”¹ä¸º LitePalã€‚ åœ¨å¼€å‘é¡¹ç›®è¿‡ç¨‹ä¸­ï¼Œæˆ‘è¿˜é‡åˆ°äº†éœ€è¦å­˜å‚¨å›¾ç‰‡çš„éœ€æ±‚ï¼Œè€Œæˆ‘æŸ¥äº†æ–‡æ¡£æ‰çŸ¥é“åŸæ¥ã€LitePalã€åœ¨ Version 1.3.1 å¼€å§‹å°±æ”¯æŒå­˜å‚¨å›¾ç‰‡äº†ã€‚ ã€LitePalã€ä¹‹å‰æ”¯æŒå­˜å‚¨çš„æ•°æ®ç±»å‹æœ‰ï¼šintã€longã€shortã€floatã€doubleã€booleanã€charã€Stringã€Dateä¹ç§ï¼ŒVersion 1.3.1 ä¸­å¼•å…¥äº†ç¬¬åç§æ•°æ®ç±»å‹ï¼šbyte[]ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåªè¦åœ¨ Model ä¸­å£°æ˜ä¸€ä¸ª byte[] ç±»å‹çš„å­—æ®µï¼Œè¿™ä¸ªå­—æ®µå°±ä¼šè¢«è‡ªåŠ¨æ˜ å°„åˆ°æ•°æ®åº“è¡¨å½“ä¸­äº†ã€‚ byte[]ç±»å‹çš„å­—æ®µçµæ´»æ€§éå¸¸é«˜ï¼Œå®ƒå¯ä»¥ç”¨æ¥å­˜å‚¨å›¾ç‰‡ï¼Œä½†åˆä¸ä»…é™äºå­˜å‚¨å›¾ç‰‡ï¼Œä»»ä½•äºŒè¿›åˆ¶çš„æ•°æ®éƒ½æ˜¯å¯ä»¥å­˜å‚¨çš„ï¼Œæ¯”å¦‚ä¸€æ®µå°è¯­éŸ³ï¼Œæˆ–è€…æ˜¯å°è§†é¢‘ï¼Œä¸è¿‡ä¾ç„¶ä¸å»ºè®®åœ¨æ‰‹æœºæ•°æ®åº“ä¸­å­˜å‚¨è¾ƒå¤§çš„äºŒè¿›åˆ¶æ•°æ®ã€‚ é¦–å…ˆéœ€è¦åœ¨ Modle ä¸­æ·»åŠ ä¸€ä¸ªç›¸åº”çš„å­—æ®µï¼Œæ¯”å¦‚æˆ‘ç”¨æ¥å­˜å‚¨å›¾ç‰‡ï¼š public class Product extends LitePalSupport { private String name; private byte[] image; public String getName() { return name; } public void setName(String name) { this.name = name; } public byte[] getImage() { return image; } public void setImage(byte[] image) { this.image = image; } } å½“æˆ‘å­˜å‚¨å›¾ç‰‡çš„æ—¶å€™å°±å¯ä»¥è¿™æ ·å†™ï¼š byte[] imageBytes = getImageBytesFromSomewhere(); Product product = new Product(); product.setName(name); product.setImage(imageBytes); product.save(); æŸ¥è¯¢çš„æ–¹æ³•ä¹Ÿè·Ÿä¸Šé¢ä¸€è‡´ï¼š byte[] imageBytes = product.getImage(); å¯¹äºå›¾ç‰‡çš„å¤„ç†å°±ä¸åœ¨æ­¤è®¨è®ºèŒƒå›´äº†ï¼Œåœ¨ä»¥åçš„é¡¹ç›®æ€»ç»“ä¸­æˆ‘ä¼šè¯¦è¿°è¿™ä¸€è¿‡ç¨‹ã€‚ æˆ‘è¿˜æ€è€ƒè¿‡ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœæˆ‘å¸Œæœ›åœ¨ã€SQLiteã€ä¸­å­˜å‚¨ä¸€ä¸ª List&lt;Object&gt; ä¼šæ€ä¹ˆæ ·ï¼Œä¹‹æ‰€ä»¥è¯´æ€è€ƒè¿‡æ˜¯å› ä¸ºæˆ‘åœ¨é¡¹ç›®ä¸­è¿˜æœªé‡åˆ°è¿‡è¿™æ ·çš„éœ€æ±‚ï¼Œä¹Ÿæ²¡æœ‰å°è¯•è¿‡ï¼Œä½†æ˜¯æŸ¥çœ‹äº†ã€LitePalã€çš„æ–‡æ¡£ï¼Œå‘ç°åœ¨ Version 1.4.0 ä¸­åŠ å…¥äº†è¿™ä¸ªåŠŸèƒ½ã€‚ å…¶å®å¯¹äº ORM æ˜ å°„æ¥è¯´ï¼Œé›†åˆæ•°æ®çœŸçš„æ˜¯éå¸¸éš¾å¤„ç†çš„ã€‚é¦–å…ˆæœ€åŸºæœ¬çš„ ORM æ˜ å°„è§„åˆ™å°±æ˜¯å°† Java ä¸­çš„ç±»æ˜ å°„æˆæ•°æ®åº“ä¸­çš„è¡¨ï¼Œå°† Java ä¸­çš„å­—æ®µæ˜ å°„æˆæ•°æ®åº“ä¸­çš„åˆ—ï¼Œç„¶åæ¯ä¸€ä¸ª Java å¯¹è±¡å°±å¯¹åº”ç€æ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œè®°å½•ã€‚é‚£ä¹ˆ Java ä¸­çš„ 8 ç§åŸºæœ¬æ•°æ®ç±»å‹ä»¥åŠ String ç±»å‹å½“ç„¶æ˜¯éå¸¸å¥½å¤„ç†çš„ï¼Œå°†å®ƒä»¬ç›´æ¥å­˜å‚¨åˆ°å¯¹åº”çš„åˆ—ä¸­å°±å¯ä»¥äº†ã€‚ ä½†é›†åˆæ•°æ®ä¸è¡Œï¼Œå› ä¸ºé›†åˆæ•°æ®ä¸­å¯èƒ½æ˜¯æœ‰ä»»æ„å¤šæ¡è®°å½•çš„ï¼Œè€Œæ¯ä¸ª Java å¯¹è±¡å°±åªèƒ½å¯¹åº”æ•°æ®åº“è¡¨ä¸­çš„ä¸€è¡Œè®°å½•è€Œå·²ï¼Œå› æ­¤æ ¹æœ¬æ²¡æœ‰åœ°æ–¹å¯ä»¥å»å­˜æ”¾é›†åˆæ•°æ®ã€‚ è€Œéƒ­ç¥æ¨¡ä»¿æ•°æ®åº“å…³è”è¡¨çš„æ–¹å¼æ¥å®ç°äº†è¿™ä¸ªåŠŸèƒ½ã€‚ æ¯”å¦‚è¯´ç°åœ¨æˆ‘ä»¬çš„ Album å®ä½“ç±»ä¸­æœ‰ä¸€ä¸ªé›†åˆå­—æ®µï¼š public class Album extends LitePalSupport { private String name; private List&lt;String&gt; titles = new ArrayList&lt;&gt;(); public String getName() { return name; } public void setName(String name) { this.name = name; } public List&lt;String&gt; getTitles() { return title; } public void setTitles(List&lt;String&gt; title) { this.title = title; } } è¿™ä¸ª titles é›†åˆè®°å½•äº†è¿™å¼ ä¸“è¾‘é‡Œé¢æœ‰å“ªäº›æ­Œåï¼Œä¸‹é¢æˆ‘ä»¬å°†è¿™ä¸ª Album å­˜å‚¨åˆ°æ•°æ®åº“ä¸­ï¼š Album album = new Album(); album.setName(&quot;èŒƒç‰¹è¥¿&quot;); album.getTitles().add(&quot;çˆ±åœ¨è¥¿å…ƒå‰&quot;); album.getTitles().add(&quot;åŒæˆªæ£&quot;); album.getTitles().add(&quot;å®‰é™&quot;); album.save(); ç„¶åæˆ‘ä»¬å»æŸ¥çœ‹ Album è¡¨ï¼Œä½ ä¼šå‘ç°é‡Œé¢å°±åªæœ‰ id å’Œ name è¿™ä¸¤åˆ—ï¼š id name 1 èŒƒç‰¹è¥¿ è¿™ä¹Ÿæ˜¯ä¹‹å‰ç‰ˆæœ¬ã€LitePalã€è¡¨ç°çš„è¡Œä¸ºã€‚è€Œåœ¨ Version 1.4.0 ä¸­ï¼Œã€LitePalã€ä¼šé¢å¤–è¿›è¡Œä¸€ä¸ªæ“ä½œï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ª album_titles è¡¨ï¼Œå¹¶å°†é›†åˆä¸­çš„æ•°æ®å­˜å‚¨åœ¨è¿™é‡Œï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š titles album_id çˆ±åœ¨è¥¿å…ƒå‰ 1 åŒæˆªæ£ 1 å®‰é™ 1 å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œè®°å½•äº†æ‰€æœ‰é›†åˆä¸­çš„æ•°æ®ï¼Œå¹¶å°†è¿™äº›æ•°æ®å’Œ album çš„ id è¿›è¡Œäº†å…³è”ï¼Œä»è€Œå¯ä»¥åŒºåˆ†å‡ºæ¯æ¡æ•°æ®åˆ°åº•æ˜¯å±äºå“ªä¸€ä¸ª Album å¯¹è±¡çš„ã€‚ å½“ç„¶äº†ï¼Œè¿™äº›éƒ½æ˜¯ã€LitePalã€åº•å±‚çš„å®ç°åŸç†ï¼Œæˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™å³ä½¿ä¸äº†è§£è¿™äº›åŸç†ä¹Ÿå®Œå…¨æ²¡é—®é¢˜ï¼Œå› ä¸ºã€LitePalã€éƒ½å°†è¿™äº›åŠŸèƒ½å°è£…å¥½äº†ã€‚ è¿™æ ·å½“æˆ‘ä»¬å»æŸ¥è¯¢ Album æ•°æ®çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨å°†å®ƒæ‰€å…³è”çš„é›†åˆæ•°æ®ä¸€èµ·æŸ¥å‡ºæ¥ï¼š Album album = LitePal.findFirst(Album.class); List&lt;String&gt; titles = album.getTitles(); for (String title : titles) { Log.d(TAG, &quot;title is &quot; + title); } è¿™æ ·å°±å¯ä»¥æŠŠæ‰€æœ‰ title éƒ½æ‰“å°å‡ºæ¥äº†ã€‚ é™¤äº†æ”¯æŒ List&lt;String&gt; é›†åˆä¹‹å¤–ï¼Œè¿˜æœ‰ List&lt;Integer&gt;ã€List&lt;Boolean&gt;ã€List&lt;Long&gt;ã€List&lt;Float&gt;ã€List&lt;Double&gt;ã€List&lt;Character&gt; è¿™å‡ ç§ç±»å‹çš„é›†åˆä¹Ÿæ˜¯æ”¯æŒçš„ã€‚ è¿˜æœ‰ä¸€ä¸ªå¸¸ç”¨çš„åŠŸèƒ½ä¹Ÿæ˜¯å€¼å¾—ä»‹ç»çš„ï¼Œè¯´å…¶å¸¸ç”¨ï¼Œæ˜¯å› ä¸ºå¾ˆå¤šæƒ…å†µä¸‹éƒ½ä¼šé‡åˆ°è¿™ä¹ˆä¸€ç§æƒ…å†µï¼Œå¦‚æœæ•°æ®ä¸å­˜åœ¨ï¼Œåˆ™å­˜å‚¨ï¼Œå¦‚æœæ•°æ®å·²å­˜åœ¨ï¼Œåˆ™æ›´æ–°ã€‚å…¶å®å®ç°è¿™ä¸ªåŠŸèƒ½å¹¶ä¸å¤æ‚ï¼Œåªéœ€è¿›è¡Œä¸€æ¬¡é€»è¾‘åˆ¤æ–­ï¼Œç„¶åæ ¹æ®åˆ¤æ–­çš„ç»“æœè¿›è¡Œç›¸åº”çš„é€»è¾‘å¤„ç†å°±å¯ä»¥äº†ï¼š Users user = new Users(); user.setName(name); user.setEmail(email); List&lt;Users&gt; users = LitePal.where(&quot;name = ?&quot;, name).find(Users.class); if (users.isEmpty()) { user.save(); } else { Users users = user.get(0); users.setEmail(user.getEmail()); users.save(); } å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œå…ˆæ˜¯é€šè¿‡ã€LitePalã€çš„æŸ¥è¯¢æ–¹æ³•æ¥æŸ¥ä¸€ä¸‹ Users è¡¨ä¸­æ˜¯ä¸æ˜¯æœ‰ nameï¼Œå¦‚æœæ²¡æœ‰çš„è¯ï¼Œå°±å°† name ä¿å­˜åˆ°è¡¨ä¸­ï¼Œå¦‚æœæœ‰çš„è¯ï¼Œå°±å°†è¡¨ä¸­çš„æ•°æ®è¿›è¡Œæ›´æ–°ã€‚ ä¸è¿‡ï¼Œå³ä½¿å°†é€»è¾‘æ¢³ç†çš„å¾ˆæ¸…æ¥šäº†ï¼Œä¸å¾—ä¸æ‰¿è®¤ï¼Œä¸Šè¿°ä»£ç ä¾ç„¶æœ‰é‚£ä¹ˆä¸€ä¸ç‚¹å„¿ç¹çï¼Œã€LitePalã€ä¹‹å‰ç¡®å®æ˜¯æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«å¥½çš„åŠæ³•æ¥å¤„ç†è¿™ç§éœ€æ±‚ã€‚ä½†æ˜¯æ‡’æƒ°æ˜¯ç¬¬ä¸€ç”Ÿäº§åŠ›ï¼Œä» Version 1.5.0 å¼€å§‹ï¼Œè¿™ç§éœ€æ±‚å°±å†ä¹Ÿä¸æ˜¯é—®é¢˜äº†ï¼Œã€LitePalã€æ–°å¢äº†ä¸€ä¸ª saveOrUpdate() æ–¹æ³•ï¼Œä¸“é—¨ç”¨æ¥å¤„ç†è¿™ç§ä¸å­˜åœ¨å°±å­˜å‚¨ï¼Œå·²å­˜åœ¨å°±æ›´æ–°çš„éœ€æ±‚ï¼š Users user = new Users(); user.setName(name); user.setEmail(email); user.saveOrUpdate(&quot;name = ?&quot;, user.getName()); æ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚è°ƒç”¨ saveOrUpdate() æ–¹æ³•åï¼Œã€LitePalã€å†…éƒ¨ä¼šè‡ªåŠ¨åˆ¤æ–­ï¼Œå¦‚æœè¡¨ä¸­å·²ç»å­˜åœ¨ name è¿™æ¡è®°å½•äº†ï¼Œå°±ä¼šè‡ªåŠ¨æ›´æ–°ï¼Œå¦‚æœä¸å­˜åœ¨çš„è¯ï¼Œå°±ä¼šè‡ªåŠ¨æ’å…¥ã€‚å’Œåˆšæ‰å‰é¢é‚£æ®µä»£ç ç›¸æ¯”ï¼Œçœå»äº†ç»å¤§éƒ¨åˆ†ç¹ççš„é€»è¾‘æ“ä½œã€‚ æœ€åå†ä»‹ç»ä¸€ä¸ªé‡ç£…åŠŸèƒ½ï¼Œå°±æ˜¯ä¸Šæ–‡æåˆ°çš„æ•°æ®åŠ å¯†è§£å¯†åŠŸèƒ½ï¼Œè¿™ä¸ªåŠŸèƒ½æ˜¯åœ¨ Version 1.6.0 ä¸­å®ç°çš„ã€‚ ä¸€ç›´ä»¥æ¥ï¼Œæˆ‘ä»¬ä½¿ç”¨ã€LitePalã€å°†æ•°æ®å­˜å‚¨åˆ°æ•°æ®åº“ä¸­éƒ½æ˜¯ç›´æ¥ä»¥æ˜æ–‡å½¢å¼å­˜å‚¨çš„ã€‚è™½è¯´å„ä¸ªåº”ç”¨çš„æ•°æ®åº“éƒ½æ˜¯å­˜æ”¾åœ¨ç‹¬ç«‹çš„æ²™ç›’ç¯å¢ƒä¸­ï¼Œæ— æ³•è¢«å…¶ä»–åº”ç”¨æ‰€è®¿é—®ï¼Œä¹Ÿæ— æ³•è¢«ç”¨æˆ·çœ‹åˆ°ï¼Œè€Œä¸”é‡è¦çš„æ•°æ®æˆ‘ä»¬ä¹ŸåŸºæœ¬ä¸ä¼šå­˜å‚¨åœ¨æœ¬åœ°ï¼Œä½†æ˜¯å¦‚æœç”¨æˆ·å°†æ‰‹æœº ROOT äº†ä¹‹åï¼Œå°±å¯ä»¥éšæ„åœ°æŸ¥çœ‹æ¯ä¸ªåº”ç”¨çš„æ•°æ®åº“æ–‡ä»¶ï¼Œæ‰€æœ‰æ•°æ®ä¸€è§ˆæ— ä½™ã€‚ å½“ç„¶ï¼Œä¼šå» ROOT æ‰‹æœºçš„ç”¨æˆ·æ¯•ç«Ÿåœ¨å°‘æ•°ï¼Œå› æ­¤å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯èƒ½å¹¶ä¸éœ€è¦è€ƒè™‘è¿™ç§æƒ…å†µã€‚ä½†æ˜¯ï¼Œå¦‚æœä½ å­˜å‚¨åœ¨æ•°æ®åº“ä¸­çš„æ•°æ®çœŸçš„ååˆ†æœºå¯†ï¼Œå¹¶ä¸”è¦æ±‚è¾ƒé«˜å®‰å…¨æ€§çš„è¯ï¼Œé‚£ä¹ˆæœ€å¥½è¿˜æ˜¯åŠ å¯†ä¸€ä¸‹å†å­˜å‚¨åˆ°æ•°æ®åº“å½“ä¸­ã€‚ ä¹‹å‰çš„ç‰ˆæœ¬ä¸æ”¯æŒæ•°æ®åŠ å¯†åŠŸèƒ½ï¼Œå› æ­¤å¦‚æœæƒ³è¦å®ç°è¿™ä¸ªåŠŸèƒ½è¿˜å¾—é å¤§å®¶è‡ªå·±å»å†™åŠ è§£å¯†ç®—æ³•ã€‚å€¼å¾—é«˜å…´çš„æ˜¯ï¼Œä» Version 1.6.0 å¼€å§‹å°±ä¸ç”¨å†è¿™ä¹ˆéº»çƒ¦äº†ï¼Œã€LitePalã€å†…ç½®äº†å¯¹æ•°æ®è¿›è¡ŒåŠ è§£å¯†çš„åŠŸèƒ½ï¼Œå¹¶ä¸”ï¼Œç”¨æ³•è¿˜æ˜¯ä¸€å¦‚æ—¢å¾€çš„ç®€å•ï¼Œä¸»è¦æ”¯æŒ AES å’Œ MD5 ä¸¤ç§åŠ å¯†ç®—æ³•ã€‚ AES åŠ å¯†ç®—æ³•æƒ³å¿…å¤§å®¶åº”è¯¥éƒ½ä¸ä¼šé™Œç”Ÿï¼Œå®ƒçš„å…¨ç§°æ˜¯ Advanced Encryption Standardï¼Œä¸­æ–‡åå«é«˜çº§åŠ å¯†æ ‡å‡†ï¼ŒåŒæ—¶å®ƒä¹Ÿæ˜¯ç¾å›½è”é‚¦æ”¿åºœé‡‡ç”¨çš„ä¸€ç§åŒºå—åŠ å¯†æ ‡å‡†ã€‚æˆ‘ä»¬å¦‚æœä½¿ç”¨å®ƒæ¥å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†çš„è¯ï¼Œåˆ™å¯ä»¥å¤§å¤§æå‡æ•°æ®çš„å®‰å…¨æ€§ã€‚ æ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª Book ç±»ï¼Œç±»ä¸­æœ‰ä¸€ä¸ª name å­—æ®µå’Œä¸€ä¸ª page å­—æ®µï¼Œç°åœ¨æˆ‘ä»¬å¸Œæœ›å°† name å­—æ®µçš„å€¼è¿›è¡ŒåŠ å¯†ï¼Œé‚£ä¹ˆåªéœ€è¦è¿™æ ·å†™ï¼š public class Book extends LitePalSupport { @Encrypt(algorithm = AES) private String name; private int page; // Getter and Setter } æ²¡é”™ï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚åªéœ€è¦åœ¨ name å­—æ®µçš„ä¸Šæ–¹åŠ ä¸Š @Encrypt(algorithm = AES) è¿™æ ·ä¸€è¡Œæ³¨è§£å³å¯ï¼Œå…¶ä»–çš„ä»»ä½•æ“ä½œéƒ½æ— éœ€æ”¹å˜ï¼Œæˆ‘ä»¬åŸæ¥è¯¥æ€æ ·å­˜å‚¨æ•°æ®è¿˜æ˜¯æ€æ ·å­˜å‚¨æ•°æ®ã€‚æ¯”å¦‚æ’å…¥ä¸€æ¡è¿™æ ·çš„æ•°æ®ï¼š Book book = new Book(); book.setName(&quot;ç¬¬ä¸€è¡Œä»£ç &quot;); book.setPage(500); book.save(); é‚£ä¹ˆç°åœ¨æˆ‘ä»¬åˆ°æ•°æ®åº“ä¸­æ¥æŸ¥çœ‹ä¸€ä¸‹è¿™æ¡æ•°æ®ï¼Œç»“æœå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œè¿™é‡Œä¹¦åå·²ç»è¢«åŠ å¯†äº†ï¼Œæˆ‘ä»¬ç›´æ¥æŸ¥çœ‹æ•°æ®åº“å°†å®Œå…¨æ— æ³•å¾—çŸ¥å®ƒçœŸå®çš„æ•°æ®æ˜¯ä»€ä¹ˆã€‚ æ›´åŠ æ–¹ä¾¿çš„æ˜¯ï¼Œè¿™ç§ AES åŠ å¯†åªæ˜¯é’ˆå¯¹äºç ´è§£è€…çš„ä¸€ç§é˜²æŠ¤æªæ–½ï¼Œä½†æ˜¯å¯¹äºå¼€å‘è€…è€Œè¨€ï¼ŒåŠ è§£å¯†æ“ä½œæ˜¯å®Œå…¨é€æ˜åŒ–çš„ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä½œä¸ºå¼€å‘è€…æˆ‘ä»¬å¹¶ä¸ç”¨è€ƒè™‘æŸä¸ªå­—æ®µæœ‰æ²¡æœ‰è¢«åŠ å¯†ï¼Œç„¶åè¦ä¸è¦è¿›è¡Œè§£å¯†ç­‰ç­‰ï¼Œæˆ‘ä»¬åªéœ€è¦ä»ç„¶ä½¿ç”¨æ ‡å‡†çš„ã€LitePalã€API æ¥æŸ¥è¯¢æ•°æ®å³å¯ï¼Œã€LitePalã€åœ¨åå°å·²ç»é»˜é»˜å¸®æˆ‘ä»¬åšäº†è§£å¯†æ“ä½œäº†ï¼Œå› æ­¤æ•´ä¸ªåŠ è§£å¯†å·¥ä½œå¯¹äºå¼€å‘è€…è€Œè¨€éƒ½æ˜¯å®Œå…¨é€æ˜çš„ã€‚ å¦å¤–ï¼Œå¯ä»¥ä¸º AES ç®—æ³•æ¥æŒ‡å®šä¸€ä¸ªä½ è‡ªå·±çš„åŠ å¯†å¯†é’¥ã€‚ä½¿ç”¨ä¸åŒçš„å¯†é’¥ï¼ŒåŠ å¯†å‡ºæ¥çš„ç»“æœä¹Ÿæ˜¯ä¸ä¸€æ ·çš„ã€‚å¦‚æœä½ æ²¡æœ‰æŒ‡å®šå¯†é’¥ï¼Œã€LitePalã€ä¼šä½¿ç”¨ä¸€ä¸ªé»˜è®¤çš„å¯†é’¥æ¥è¿›è¡ŒåŠ å¯†ã€‚å› æ­¤ï¼Œå°½å¯ä»¥åœ°è°ƒç”¨ LitePal.aesKey() æ–¹æ³•æ¥æŒ‡å®šä¸€ä¸ªä½ è‡ªå·±çš„åŠ å¯†å¯†é’¥ï¼Œè¿™æ ·ä¼šè®©ä½ çš„æ•°æ®æ›´åŠ å®‰å…¨ã€‚ åŠ å¯†åçš„æ•°æ®å­—æ®µä¸èƒ½å†é€šè¿‡ where() è¯­å¥æ¥è¿›è¡ŒæŸ¥è¯¢ã€ä¿®æ”¹æˆ–åˆ é™¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰§è¡Œç±»ä¼¼äº where(&quot;name = ?&quot;, &quot;ç¬¬ä¸€è¡Œä»£ç &quot;) è¿™æ ·çš„è¯­å¥å°†æ— æ³•æŸ¥åˆ°ä»»ä½•æ•°æ®ï¼Œå› ä¸ºåœ¨æ•°æ®åº“ä¸­å­˜å‚¨çš„çœŸå®å€¼å·²ç»ä¸æ˜¯è¿™ä¸ªå€¼äº†ã€‚ MD5 ç®—æ³•åˆ™æ›´å¸¸è§äº†ï¼Œå®ƒçš„å…¨ç§°æ˜¯ Message Digest Algorithm 5ï¼Œä¸­æ–‡åå«ä¿¡æ¯æ‘˜è¦ç®—æ³•ç¬¬äº”ç‰ˆã€‚è¦è¯´åˆ° MD5 åŠ å¯†ç®—æ³•çš„ç‰¹ç‚¹å…¶å®æœ‰å¾ˆå¤šå¾ˆå¤šï¼Œä½†æ˜¯å®ƒæœ€ä¸ºçªå‡ºçš„ä¸€ä¸ªç‰¹ç‚¹å°±æ˜¯ï¼Œä½¿ç”¨è¿™ç§åŠ å¯†ç®—æ³•è®¡ç®—å‡ºæ¥çš„ç»“æœæ˜¯ä¸å¯é€†çš„ã€‚é€šä¿—ç‚¹æ¥è¯´ï¼Œå°±æ˜¯ MD5 ç®—æ³•åªèƒ½è¿›è¡ŒåŠ å¯†ä½†ä¸èƒ½è¿›è¡Œè§£å¯†ã€‚ é‚£æœ‰çš„æœ‹å‹å¯èƒ½ä¼šç–‘æƒ‘äº†ï¼Œå¦‚æœæ•°æ®åŠ å¯†äº†ä¹‹åå°±ä¸èƒ½å†è§£å¯†ï¼Œé‚£æˆ‘è¦è¿™ä¸ªæ•°æ®è¿˜æœ‰ä»€ä¹ˆç”¨ï¼Ÿç„¶è€Œï¼Œå®é™…ä¸Šç¡®å®å­˜åœ¨ç€ä¸å°‘åœºæ™¯æ˜¯ä¸ç”¨å¯¹æ•°æ®è¿›è¡Œè§£å¯†çš„ã€‚ æ¯”å¦‚è¯´ç”¨æˆ·çš„å¯†ç ï¼Œå¯†ç å°±æ˜¯å±äºå®‰å…¨æ€§è¦æ±‚éå¸¸é«˜çš„æ•°æ®ï¼Œç›´æ¥å°†å¯†ç çš„æ˜æ–‡å­˜å‚¨åœ¨æ•°æ®åº“ä¸­æ˜¯ä¸€ä»¶éå¸¸å±é™©çš„äº‹æƒ…ï¼Œå› æ­¤è¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬ä¸€å®šè¦å¯¹æ•°æ®è¿›è¡ŒåŠ å¯†æ‰è¡Œã€‚ä½†æ˜¯å¦‚æœä½¿ç”¨ä¸Šè¿°çš„ AES ç®—æ³•æ¥å¯¹å¯†ç è¿›è¡ŒåŠ å¯†å¯èƒ½å¹¶ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ï¼Œå› ä¸ºAESåŠ å¯†çš„æ•°æ®æ˜¯å¯ä»¥è¢«è§£å¯†çš„ï¼Œä¸€æ—¦æˆ‘ä»¬çš„å¯†é’¥æ³„æ¼äº†å‡ºå»ï¼Œæ‰€æœ‰ç”¨æˆ·çš„å¯†ç å°±éƒ½æœ‰å¯èƒ½è¢«è§£å¯†å‡ºæ¥ã€‚ å› æ­¤ï¼Œè¿™ç§æƒ…å†µä¸‹ä½¿ç”¨ç±»ä¼¼äº MD5 è¿™ç§ä¸å¯é€†çš„åŠ å¯†ç®—æ³•æ‰æ˜¯æœ€å¥½çš„é€‰æ‹©ã€‚å› ä¸ºå¯†ç è¿™ç±»æ•°æ®å®Œå…¨ä¸éœ€è¦è§£å¯†ï¼ŒéªŒè¯ç”¨æˆ·è¾“å…¥çš„å¯†ç æ˜¯å¦æ­£ç¡®åªéœ€è¦å°†è¾“å…¥çš„å†…å®¹åŒæ ·ä½¿ç”¨MD5ç®—æ³•åŠ å¯†ä¸€ä¸‹ï¼Œç„¶åå’Œæ•°æ®åº“ä¸­å­˜å‚¨çš„å€¼è¿›è¡Œå¯¹æ¯”å°±å¯ä»¥äº†ã€‚ ç”¨æ³•æƒ³å¿…ä½ ä¹Ÿå·²ç»èƒ½çŒœåˆ°äº†ï¼Œå’Œå‰é¢çš„ AES åŠ å¯†å‡ ä¹æ˜¯ä¸€æ¨¡ä¸€æ ·çš„ç”¨æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å°† @Encrypt ä¸­æŒ‡å®šçš„åŠ å¯†ç®—æ³•æ”¹æˆ MD5 å³å¯ï¼š public class User extends LitePalSupport { @Encrypt(algorithm = MD5) private String password; private String username; // Getter and Setter } ç°åœ¨ä½¿ç”¨åŒæ ·çš„ä»£ç æ¥å­˜å‚¨ä¸€æ¡æ•°æ®ï¼š User user = new User(); user.setUsername(&quot;guolin&quot;); user.setPassword(&quot;123456&quot;); user.save(); ç„¶ååˆ°æ•°æ®åº“ä¸­æŸ¥çœ‹ä¸€ä¸‹ï¼Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š å¯ä»¥çœ‹åˆ°ï¼Œæ•°æ®åŒæ ·è¢«åŠ å¯†äº†ï¼Œä½†æ˜¯å¯†æ–‡çš„æ ¼å¼æ˜æ˜¾å’Œåˆšæ‰çš„AESåŠ å¯†ä¸ä¸€æ ·äº†ã€‚è€Œä¸”å› ä¸º MD5 ä¸èƒ½è§£å¯†çš„åŸå› ï¼Œã€LitePalã€ä¹Ÿä¸éœ€è¦åœ¨åå°å¯¹å®ƒè¿›è¡Œè§£å¯†å¤„ç†ï¼Œå³ä½¿ä½¿ç”¨æ ‡å‡†çš„ã€LitePalã€API æ¥æŸ¥è¯¢æ•°æ®ï¼Œå¾—åˆ°çš„ä¾ç„¶æ˜¯å¯†æ–‡ã€‚ æ›´éœ€è¦æ³¨æ„çš„æ˜¯ï¼ŒAES ç®—æ³•å’Œ MD5 ç®—æ³•éƒ½åªå¯¹ String ç±»å‹çš„å­—æ®µæœ‰æ•ˆï¼Œå¦‚æœä½ å°è¯•ç»™å…¶ä»–ç±»å‹çš„å­—æ®µï¼ˆæ¯”å¦‚è¯´ int å­—æ®µï¼‰æŒ‡å®š @Encrypt æ³¨è§£ï¼Œã€LitePalã€å¹¶ä¸ä¼šæ‰§è¡Œä»»ä½•åŠ å¯†æ“ä½œã€‚ ã€LitePalã€çš„åŸºæœ¬ä½¿ç”¨åˆ°è¿™é‡Œå°±ä»‹ç»ç»“æŸäº†ï¼Œå…¶å®è¿˜æœ‰å¾ˆå¤šå¾ˆå®ç”¨çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å¼‚æ­¥æ“ä½œæ•°æ®åº“ç­‰ï¼Œç”±äºæˆ‘å¹¶æ²¡æœ‰åœ¨é¡¹ç›®ä¸­ä½¿ç”¨è¿‡ï¼Œæ‰€ä»¥å°±ä¸ä¸€ä¸€ä»‹ç»äº†ï¼Œéœ€è¦äº†è§£çš„è¯æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£å³å¯ã€‚è€Œä¸”ã€LitePalã€åœ¨ Kotlin ä¸­çš„ API å¾—ç›Šäº Kotlin çš„ç‰¹æ€§ä¹Ÿå¾—åˆ°äº†æå¤§çš„ä¼˜åŒ–ï¼Œå®˜æ–¹æ–‡æ¡£ä¹Ÿæœ‰è¯¦ç»†çš„ä»‹ç»ã€‚ æœ€åçš„æœ€åï¼Œå†æ¥ä»‹ç»ä¸€æ¬¾ã€SQLiteã€çš„ GUI å·¥å…·ï¼Œç”±äºã€Android Studioã€çš„å‡çº§ï¼Œå¯¼è‡´åœ¨ã€Android Device Monitor æƒé™ç¬”è®°ã€ä¸­æåˆ°çš„è°ƒèµ·ã€Android Device Monitorã€æ–¹æ³•å˜å¾—ååˆ†å›°éš¾ï¼Œè€Œä¸”æŸ¥çœ‹é‡Œé¢çš„æ•°æ®ä¹Ÿå¾ˆéº»çƒ¦ï¼Œæ‰€ä»¥æˆ‘ä¸å¾—ä¸æ‰¾ä¸€æ¬¾ GUI å·¥å…·æ¥ä»£æ›¿â€”â€”ã€SQLite Developerã€ã€‚ ç”¨æ³•ä¹Ÿæ˜¯éå¸¸ç®€å•ï¼Œã€Android Studioã€ç•Œé¢å³ä¸‹è§’æœ‰ä¸€ä¸ªã€ŒDevice File Explorerã€é¢æ¿ï¼Œå®ƒå®ç°äº†ä¹‹å‰åœ¨ã€Android Device Monitorã€ä¸­æ–‡ä»¶ç®¡ç†çš„åŠŸèƒ½ï¼Œç‚¹å¼€å®ƒåæ‰¾åˆ°ç›¸åº”çš„ç›®å½•ï¼Œç„¶åå³é”®ä¿å­˜å³å¯ã€‚ åœ¨å¼¹å‡ºçš„çª—å£ä¸­é€‰æ‹©ç›¸åº”çš„ä¿å­˜è·¯å¾„ã€‚ ä¿å­˜æˆåŠŸä¸å¦åœ¨ã€Android Studioã€å³ä¸‹è§’ä¹Ÿä¼šæœ‰é€šçŸ¥æé†’ã€‚ å¦‚æœä¿å­˜æˆåŠŸï¼Œæ‰“å¼€ç›¸åº”çš„ç›®å½•å°±å¯ä»¥çœ‹åˆ°åˆšä¿å­˜çš„æ•°æ®åº“äº†ã€‚ å³é”®è¯¥æ–‡ä»¶é€‰æ‹©ä½¿ç”¨ã€SQLite Developerã€æ‰“å¼€ï¼Œæˆ–è€…ç›´æ¥æ‰“å¼€ã€SQLite Developerã€å¹¶æŠŠæ•°æ®åº“æ–‡ä»¶æ‹–åˆ°å·¦ä¾§ã€Œæ•°æ®åº“åˆ—è¡¨ã€çš„é¢æ¿ä¸­ï¼Œã€SQLite Developerã€å°±ä¼šå¼¹å‡ºä¸€ä¸ªã€Œæ³¨å†Œæ•°æ®åº“ã€çš„å¯¹è¯æ¡†ï¼Œç‚¹å‡»ã€Œç¡®å®šã€å³å¯æŠŠåˆšæ‰çš„æ•°æ®åº“æ–‡ä»¶æ³¨å†Œåˆ°ã€SQLite Developerã€ä¸­ã€‚ è¿™æ—¶å€™å¯ä»¥åœ¨å·¦ä¾§çš„ã€Œæ•°æ®åº“åˆ—è¡¨ã€é¢æ¿ä¸­çœ‹åˆ°è¯¥æ•°æ®åº“ï¼ŒåŒå‡»å¯æŸ¥çœ‹å†…éƒ¨çš„è¡¨æˆ–è§†å›¾ç­‰ã€‚ æ¯”å¦‚æˆ‘æƒ³æŸ¥çœ‹ Goods è¡¨ï¼Œåˆ™å¯åŒå‡»è¯¥è¡¨ï¼Œåœ¨å³ä¾§å³å¯æ‰“å¼€ç¼–è¾‘è¡¨çš„çª—å£ï¼Œå¯ä»¥æŸ¥çœ‹è¡¨çš„å„å­—æ®µã€çº¦æŸã€ç´¢å¼•ã€æ•°æ®ç­‰ï¼Œè¿˜å¯ä»¥æŸ¥çœ‹ DDL è¯­å¥ã€‚ å¦å¤–ï¼Œã€SQLite Developerã€æ˜¯å­˜åœ¨è¯•ç”¨æœŸçš„ï¼Œå½“è¯•ç”¨æœŸè¿‡äº†ä¹‹åå°±ä¼šæœ‰æé†’ï¼Œæƒ³è¦ç»§ç»­å…è´¹ä½¿ç”¨çš„è¯å¯ä»¥é€šè¿‡åˆ é™¤æ³¨å†Œè¡¨çš„æ–¹å¼æ¥ç»•è¿‡å®ƒçš„æ£€æµ‹ã€‚ åœ¨ã€Œè¿è¡Œã€ä¸­è¾“å…¥ regeditï¼Œæ‰“å¼€ã€Œæ³¨å†Œè¡¨ç¼–è¾‘å™¨ã€ï¼Œä¾æ¬¡å±•å¼€ç›®å½• HKEY_CURRENT_USER\\SharpPlus\\SqliteDevï¼Œåœ¨å³ä¾§æŠŠã€ŒStartDateã€é¡¹åˆ é™¤å³å¯ã€‚ è¿˜æœ‰å¦å¤–ä¸€ç§æ–¹æ³•ï¼Œå°±æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š âœ reg delete &quot;HKEY_CURRENT_USER\\SharpPlus\\SqliteDev&quot; /v &quot;StartDate&quot; /f ç³»ç»Ÿä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬åˆ é™¤è¯¥æ³¨å†Œè¡¨ã€‚ è¿™æ ·ä¹‹åå°±èƒ½ä¸€ç›´ä½¿ç”¨äº†ï¼Œå¦‚æœå†è¿‡æœŸäº†å°±å†æ¬¡æ‰§è¡Œä¸‹è¿™ä¸ªæ–¹æ³•å³å¯ã€‚ ","link":"https://LiarrDev.github.io/post/Enjoy-LitePal-in-One-Shot/"},{"title":"åœ¨ Java ä¸­è·å–ç½‘ç»œæ—¥æœŸå’Œæ—¶é—´","content":"Android é¡¹ç›®ä¸­éœ€è¦è·å–ç½‘ç»œæ—¶é—´ä»¥ç¡®ä¿æ¶ˆè´¹ä¿¡æ¯çš„å‡†ç¡®æ€§ï¼ŒæŸ¥äº†ä¸€ä¸‹ï¼Œå‘ç° Java ç»™æˆ‘ä»¬æä¾›äº†ç›¸åº”çš„æ–¹æ³•ï¼Œèƒ½è®©æˆ‘ä»¬ç®€å•åœ°é€šè¿‡å‡ è¡Œä»£ç å°±èƒ½å¤Ÿè·å–åˆ°ç½‘ç»œæ—¶é—´ï¼š URL url = new URL(&quot;https://cn.bing.com&quot;); // ä» Bing å–å¾—èµ„æºå¯¹è±¡ URLConnection urlConnection = url.openConnection(); // ç”Ÿæˆè¿æ¥å¯¹è±¡ urlConnection.connect(); // å‘å‡ºè¿æ¥ Date date = new Date(urlConnection.getDate()); // å–å¾—ç½‘ç«™æ—¥æœŸæ—¶é—´å¹¶è½¬æ¢ä¸ºæ ‡å‡†æ—¶é—´å¯¹è±¡ SimpleDateFormat formatter = new SimpleDateFormat(&quot;yyyy-MM-dd HH:mm:ss&quot;, Locale.CHINA); // è®¾å®šæ—¥æœŸæ—¶é—´æ ¼å¼å¹¶è®¾ä¸ºåŒ—äº¬æ—¶é—´ String dateString = formatter.format(date); // è½¬æ¢æ—¥æœŸæ—¶é—´æ ¼å¼ Log.i(&quot;TIME&quot;, dateString); é¦–å…ˆä» Bing ä¸­è·å–èµ„æºå¯¹è±¡ï¼Œè‡³äºä¸ºä»€ä¹ˆé€‰ Bingï¼Œé¦–å…ˆç½‘ä¸Šå¤§å¤šæ•°æ•™ç¨‹éƒ½é€‰ç”¨ä¹…ä¹…æ—¶é—´ç½‘æ¥è¿æ¥çš„ï¼Œä½†æ˜¯æœ‰æŠ€æœ¯åšå®¢æåˆ°ï¼Œå…¶æ—¶é—´å¹¶ä¸å‡†ç¡®ï¼Œå¯é æ€§è¾ƒä½ï¼Œç„¶åæˆ‘æ”¹ç”¨ä¸­å›½ç§‘å­¦é™¢å›½å®¶æˆæ—¶ä¸­å¿ƒæ¥è¿›è¡Œè¿æ¥ï¼Œæ¯•ç«Ÿ Windows 7 æ—¶ä»£æˆ‘è¿˜ä½¿ç”¨è¿‡å®ƒæ¥æ›´æ–° PC çš„æœ¬åœ°æ—¶é—´å‘¢ã€‚ ä½†åœ¨æµ‹è¯•ä¸­å´å‡ºä¹æ„æ–™çš„å‘ç°ï¼Œä¸­ç§‘é™¢å›½å®¶æˆæ—¶ä¸­å¿ƒçš„æ—¶é—´å´æ¯”å®é™…æ—¶é—´å¿«äº†å‡ åˆ†é’Ÿï¼Œå¹¶ä¸çŸ¥é“åŸå› ï¼Œèµ¶ç´§å¼ƒå‘ï¼ äºæ˜¯å°±è½¬æˆ˜ä¸€äº›äº’è”ç½‘å·¨å¤´çš„ç½‘ç«™å§ï¼Œè‡³å°‘æœåŠ¡å™¨ç¨³å®šå¯é ï¼Œé¦–å…ˆæƒ³åˆ°çš„æ˜¯ Googleï¼Œè¿™æ˜æ˜¾å°±ä¸ç°å®å˜›ï¼Œè¿™ä¸æ˜¯è¦ç­‰åˆ°ç”¨æˆ·è¿æ¥è¶…æ—¶å—ï¼æ‰€ä»¥æœ€åæ‰é€‰æ‹©äº† Bingã€‚ å–å¾—èµ„æºå¯¹è±¡åï¼Œé€šè¿‡ URLConnection ç”Ÿæˆè¿æ¥å¯¹è±¡å¹¶å»ºç«‹è¿æ¥ï¼Œåªéœ€è¦å»ºç«‹è¿æ¥å°±å¯ä»¥äº†ï¼Œä¸éœ€è¦ Request ä¸ Responseï¼Œæ‰€ä»¥æ¯”å•ç‹¬å†™æ¥å£æ•ˆç‡è¦é«˜ã€‚ æ¥ç€å†æŠŠå®ƒè½¬ä¸ºæ ‡å‡†æ—¶é—´å¯¹è±¡ï¼Œå¹¶æŒ‰ç…§æ‰€éœ€çš„æ ¼å¼è¿›è¡Œè½¬æ¢ï¼Œå› ä¸ºæˆ‘çš„é¡¹ç›®åªéœ€é¢å‘å›½å†…çš„ç”¨æˆ·ï¼Œæ‰€ä»¥ç”¨ Locale.CHINA æŠŠå®ƒè®¾å®šä¸ºåŒ—äº¬æ—¶é—´ã€‚ æœ€åå†æŠŠæ—¶é—´å¯¹è±¡è½¬æ¢æˆå­—ç¬¦ä¸²å°±å¯ä»¥äº†ã€‚ ","link":"https://LiarrDev.github.io/post/Get-Network-Date-and-Time-in-Java/"},{"title":"C / C++ ä¿®æ”¹æ§åˆ¶å°é¢œè‰²","content":"è™½ç„¶å¹³æ—¶å†™ Java æ¯”è¾ƒå¤šï¼Œä½†æœ‰æ—¶å€™éªŒè¯ä¸ªå°ç®—æ³•çš„æ—¶å€™ï¼Œæ‰“å¼€ã€Eclipseã€æˆ–è€…ã€IntelliJ IDEAã€åˆè´¹æ—¶ï¼Œæ„Ÿè§‰æ²¡æœ‰å¿…è¦ï¼Œè€Œ C å’Œ C++ æœ‰å¾ˆå¤šæ¯”è¾ƒè½»é‡çš„ç¼–è¯‘å™¨ï¼Œå‡ ä¹æ˜¯ç§’å¼€çš„ï¼Œæ¯”å¦‚ã€GCCã€ï¼Œå› æ­¤ç”¨æ¥å†™ä¸ªå°ç®—æ³•æ˜¯æœ€é€‚åˆä¸è¿‡çš„ã€‚ ä½†å½“å¤šæ‰“å¼€å‡ ä¸ªæ§åˆ¶å°çš„æ—¶å€™ï¼Œç”±äºèƒŒæ™¯é¢œè‰²éƒ½æ˜¯é»‘è‰²ï¼Œæ€»ä¸èƒ½ä¸€æ¬¡å°±æ‰¾åˆ°æƒ³è¦çš„é‚£ä¸ªï¼Œå½±å“æ•ˆç‡ã€‚ é‚£èƒ½ä¸èƒ½ä¿®æ”¹æ§åˆ¶å°çš„èƒŒæ™¯é¢œè‰²å‘¢ï¼Ÿ å½“ç„¶æ˜¯å¯ä»¥çš„ï¼Œå³å‡»æ§åˆ¶å°çš„æ ‡é¢˜æ è¿›å…¥ã€Œå±æ€§ã€è®¾ç½®ï¼Œå³å¯å¯¹æ§åˆ¶å°çš„å­—ä½“ã€é¢œè‰²ã€å¸ƒå±€ç­‰è¿›è¡Œä¿®æ”¹ã€‚ ä½†æ˜¯ä¿®æ”¹å®Œåä½ ä¼šå‘ç°ï¼Œè™½ç„¶ä¿®æ”¹æˆåŠŸï¼Œä½†æ‰€æœ‰æ§åˆ¶å°çš„å±æ€§éƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œè¿™ä¹Ÿæ²¡æœ‰åŠæ³•æå‡æˆ‘ä»¬çš„æ•ˆç‡ã€‚ é‚£èƒ½ä¸èƒ½å•ç‹¬ä¿®æ”¹å„ä¸ªæ§åˆ¶å°çš„é¢œè‰²å‘¢ï¼Ÿ å…¶å®ï¼ŒC å’Œ C++ çš„æ ‡å‡†åº“ä¸ºæˆ‘ä»¬æä¾›äº†ä¿®æ”¹æ§åˆ¶å°æ–‡ä»¶çš„å‡½æ•°ï¼Œæˆ‘ä»¬ç›´æ¥è°ƒç”¨å³å¯ä¿®æ”¹æ§åˆ¶å°çš„é¢œè‰²ã€‚ é¦–å…ˆæˆ‘ä»¬éœ€è¦æ·»åŠ æ ‡å‡†åº“çš„å¤´æ–‡ä»¶ï¼š #include &lt;stdlib.h&gt; ç„¶ååœ¨ä¸»å‡½æ•°ä¸­æ·»åŠ ä¸€æ¡ system() å‡½æ•°çš„è°ƒç”¨ä»£ç ï¼š system(&quot;COLOR..&quot;); è¿è¡Œç¨‹åºï¼Œå¯ä»¥åœ¨æ§åˆ¶å°ä¸­çœ‹åˆ°å…³äºé¢œè‰²è®¾ç½®çš„ä»‹ç»ã€‚ è®¾ç½®é»˜è®¤çš„æ§åˆ¶å°å‰æ™¯å’ŒèƒŒæ™¯é¢œè‰²ã€‚ COLOR [attr] attr æŒ‡å®šæ§åˆ¶å°è¾“å‡ºçš„é¢œè‰²å±æ€§ã€‚ é¢œè‰²å±æ€§ç”±ä¸¤ä¸ªåå…­è¿›åˆ¶æ•°å­—æŒ‡å®š -- ç¬¬ä¸€ä¸ª å¯¹åº”äºèƒŒæ™¯ï¼Œç¬¬äºŒä¸ªå¯¹åº”äºå‰æ™¯ã€‚æ¯ä¸ªæ•°å­— å¯ä»¥ä¸ºä»¥ä¸‹ä»»ä½•å€¼: 0 = é»‘è‰² 8 = ç°è‰² 1 = è“è‰² 9 = æ·¡è“è‰² 2 = ç»¿è‰² A = æ·¡ç»¿è‰² 3 = æµ…ç»¿è‰² B = æ·¡æµ…ç»¿è‰² 4 = çº¢è‰² C = æ·¡çº¢è‰² 5 = ç´«è‰² D = æ·¡ç´«è‰² 6 = é»„è‰² E = æ·¡é»„è‰² 7 = ç™½è‰² F = äº®ç™½è‰² å¦‚æœæ²¡æœ‰ç»™å®šä»»ä½•å‚æ•°ï¼Œæ­¤å‘½ä»¤ä¼šå°†é¢œè‰²è¿˜åŸåˆ° CMD.EXE å¯åŠ¨æ—¶ çš„é¢œè‰²ã€‚è¿™ä¸ªå€¼æ¥è‡ªå½“å‰æ§åˆ¶å° çª—å£ã€/T å‘½ä»¤è¡Œå¼€å…³æˆ– DefaultColor æ³¨å†Œè¡¨ å€¼ã€‚ å¦‚æœå°è¯•ä½¿ç”¨ç›¸åŒçš„ å‰æ™¯å’ŒèƒŒæ™¯é¢œè‰²æ¥æ‰§è¡Œ COLOR å‘½ä»¤ï¼ŒCOLOR å‘½ä»¤ä¼šå°† ERRORLEVEL è®¾ç½®ä¸º 1ã€‚ æ§åˆ¶å°çš„å¼¹çª—ä¸­è¯´æ˜å¾ˆæ¸…æ¥šï¼ŒCOLOR åçš„ç¬¬ä¸€ä¸ªåå…­è¿›åˆ¶æ•°å­—å†³å®šèƒŒæ™¯é¢œè‰²ï¼Œç¬¬äºŒä¸ªåå…­è¿›åˆ¶æ•°å­—å†³å®šæ–‡å­—é¢œè‰²ã€‚ å³å¦‚æœæˆ‘ä»¬æ·»åŠ ä»¥ä¸‹ä»£ç ï¼š system(&quot;COLOR FC&quot;); æ§åˆ¶å°çš„èƒŒæ™¯é¢œè‰²å°†æ”¹ä¸ºäº®ç™½è‰²ï¼Œæ–‡å­—é¢œè‰²å°†æ”¹ä¸ºæ·¡çº¢è‰²ã€‚ è¿™æ ·ï¼Œå½“æˆ‘ä»¬éœ€è¦äº§ç”Ÿå¤šä¸ªæ§åˆ¶å°çª—å£æ—¶ï¼Œå°±å¯ä»¥åœ¨ä»£ç ä¸­å¯¹å…¶é¢œè‰²è¿›è¡Œå®šä¹‰ï¼Œæ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹ä¸åŒçš„å†…å®¹ã€‚ ","link":"https://LiarrDev.github.io/post/C-and-CPP-Change-Console-Color/"},{"title":"ä¸€æ¬¡å®æˆ˜çˆ±ä¸Šã€OkHttpã€","content":"Android ä¸­å‘èµ· HTTP ç½‘ç»œè¯·æ±‚çš„æ–¹æ³•æœ‰å¾ˆå¤šç§ï¼Œåœ¨åˆšå¼€å§‹å­¦ Android çš„æ—¶å€™ï¼Œæˆ‘æ€»æ˜¯æ¯”è¾ƒå€¾å‘äºä½¿ç”¨åŸç”Ÿæä¾›çš„ APIï¼Œå…¶ä¸€æ˜¯å› ä¸ºä¸éœ€è¦å¯¼å…¥ç¬¬ä¸‰æ–¹çš„ä¾èµ–ï¼Œå…¶äºŒæ˜¯å› ä¸ºä»£ç é‡ä¹Ÿä¸å¤šï¼Œè€Œåœ¨å®ä¹ åæ‰å‘ç°ï¼Œæ¡†æ¶åŸæ¥å¦‚æ­¤æ–¹ä¾¿ã€‚ æ¯”å¦‚æˆ‘éœ€è¦å†™ä¸€ä¸ªç™»å½•åŠŸèƒ½ï¼Œå¸Œæœ›ä½¿ç”¨ POST æ–¹å¼æäº¤ï¼Œå…ˆæ¥çœ‹çœ‹åŸç”Ÿä¸­çš„ HttpURLConnectionï¼š private void sendRequestWithHttpURLConnection(final String tel, final String password) { new Thread(new Runnable() { @Override public void run() { HttpURLConnection httpURLConnection = null; try { URL url = new URL(&quot;http://url&quot;); // æ¥å£ String data = &quot;tel=&quot; + tel + &quot;&amp;password=&quot; + password; httpURLConnection = (HttpURLConnection) url.openConnection(); httpURLConnection.setConnectTimeout(8000); // è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ httpURLConnection.setReadTimeout(8000); // è®¾ç½®è¯»å–è¶…æ—¶æ—¶é—´ httpURLConnection.setRequestMethod(&quot;POST&quot;); // è®¾ç½®ä»¥ Post æ–¹å¼æäº¤æ•°æ® DataOutputStream out = new DataOutputStream(httpURLConnection.getOutputStream()); out.writeBytes(data); } catch (Exception e) { e.printStackTrace(); } finally { if (httpURLConnection != null) { httpURLConnection.disconnect(); } } } }).start(); } è¿™é‡Œçœç•¥äº†éƒ¨åˆ†ä»£ç ï¼ŒåŒ…æ‹¬å¾—åˆ°æ•°æ®åçš„è§£æä»¥åŠæ ¡éªŒç­‰ç­‰ï¼Œä»£ç å¹¶ä¸å¤šå˜›ï¼Œä½†æ˜¯å®é™…ä¸Šè·‘èµ·æ¥å°±æ˜¯ï¼ŒæœåŠ¡å™¨ä¸Šæ²¡æœ‰æ¥æ”¶åˆ°æˆ‘æäº¤çš„æ•°æ®ã€‚ å‡ ç»å‘¨æŠ˜ï¼Œç»ˆäºæŠŠæ®‹ç¼ºçš„ä»£ç è¡¥å…¨äº†ï¼š private void sendRequestWithHttpURLConnection(final String tel, final String password) { new Thread(new Runnable() { @Override public void run() { HttpURLConnection httpURLConnection = null; try { URL url = new URL(&quot;http://url&quot;); // æ¥å£ String data = &quot;tel=&quot; + tel + &quot;&amp;password=&quot; + password; httpURLConnection = (HttpURLConnection) url.openConnection(); httpURLConnection.setConnectTimeout(8000); // è®¾ç½®è¿æ¥è¶…æ—¶æ—¶é—´ httpURLConnection.setReadTimeout(8000); // è®¾ç½®è¯»å–è¶…æ—¶æ—¶é—´ httpURLConnection.setDoOutput(true); // æ‰“å¼€è¾“å‡ºæµï¼Œä»¥ä¾¿å‘æœåŠ¡å™¨æäº¤æ•°æ® httpURLConnection.setRequestMethod(&quot;POST&quot;); // è®¾ç½®ä»¥ Post æ–¹å¼æäº¤æ•°æ® httpURLConnection.setUseCaches(false); // ä½¿ç”¨ Post æ–¹å¼ä¸èƒ½ä½¿ç”¨ç¼“å­˜ httpURLConnection.setRequestProperty(&quot;Content-Type&quot;, &quot;application/x-www-form-urlencoded&quot;); //è®¾ç½®è¯·æ±‚ä½“çš„ç±»å‹æ˜¯æ–‡æœ¬ç±»å‹ httpURLConnection.setRequestProperty(&quot;Content-Length&quot;, data.length() + &quot;&quot;); // è®¾ç½®è¯·æ±‚ä½“çš„é•¿åº¦ httpURLConnection.connect(); // å»ºç«‹è¿æ¥ httpURLConnection.getOutputStream().write(data.getBytes()); int code = httpURLConnection.getResponseCode(); // æœåŠ¡å™¨çš„å“åº”ç  200 OK //404 é¡µé¢æ‰¾ä¸åˆ° // // 503æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ if (code == 200) { InputStream is = httpURLConnection.getInputStream(); // æŠŠisçš„å†…å®¹è½¬æ¢ä¸ºå­—ç¬¦ä¸² ByteArrayOutputStream bos = new ByteArrayOutputStream(); byte[] buffer = new byte[1024]; int len = -1; while ((len = is.read(buffer)) != -1) { bos.write(buffer, 0, len); } String result = new String(bos.toByteArray()); is.close(); Toast.makeText(LoginActivity.this, result, Toast.LENGTH_SHORT).show(); } else { Toast.makeText(LoginActivity.this, &quot;è¯·æ±‚å¤±è´¥ï¼Œå¤±è´¥åŸå› : &quot; + code, Toast.LENGTH_SHORT).show(); } } catch (Exception e) { e.printStackTrace(); } finally { if (httpURLConnection != null) { httpURLConnection.disconnect(); } } } }).start(); } æˆ‘è®¤ä¸ºæœ€é‡è¦çš„å¯èƒ½æ˜¯è¿™å¥ï¼š httpURLConnection.connect(); // å»ºç«‹è¿æ¥ ç½‘ä¸Šå¤§å¤šæ•°çš„èµ„æ–™éƒ½æ²¡æœ‰æåˆ°ï¼Œæˆ‘å°±ä¸çŸ¥é“ä»–ä»¬æ˜¯æ€ä¹ˆè¿æ¥çš„äº†ï¼Œå½“æˆ‘æŠŠè¿™å¥ä»£ç è¡¥ä¸Šåï¼ŒApp æ‰æˆåŠŸå’ŒæœåŠ¡å™¨å»ºç«‹èµ·è¿æ¥ã€‚ å¦å¤–ä¸‹æ–¹å…³äºæœåŠ¡å™¨å“åº”ç çš„é‚£æ®µä»£ç ä¹Ÿæ˜¯å¿…é¡»çš„ï¼Œå¾—åˆ°å“åº”ç ï¼Œåˆ¤æ–­ä¸æœåŠ¡å™¨è¿æ¥æ˜¯å¦æ­£å¸¸ï¼Œæ²¡äº†è¿™ä¸ªåˆ¤æ–­å°±ä¸èƒ½å’ŒæœåŠ¡å™¨è¿›è¡Œæ•°æ®çš„äº¤äº’ã€‚ è¿™æ ·çœ‹ä¸‹æ¥ï¼Œè·Ÿä¸€å¼€å§‹çš„â€œä»£ç å¹¶ä¸å¤šâ€å·®è·å°±å¤ªå¤§äº†ï¼Œä»£ç å†—ä½™æ™¦æ¶©ï¼Œé˜…è¯»èµ·æ¥ååˆ†ç—›è‹¦ï¼Œäºæ˜¯ä¾¿æ‰“ç®—å¯¹è¿™æ®µä»£ç è¿›è¡Œé‡æ„ã€‚ ä¹‹å‰é˜…è¯»ã€ç¬¬ä¸€è¡Œä»£ç â€”â€”Androidã€æ—¶æœ‰å­¦ä¹ è¿‡ OkHttpï¼Œæ‰€ä»¥æˆ‘å°±æ‰“ç®—ä½¿ç”¨å®ƒæ¥ä»£æ›¿ HttpURLConnectionã€‚ ä¸ºä»€ä¹ˆæˆ‘è™½ç„¶ä»ä¸€å¼€å§‹å°±çŸ¥é“è¿™ä¸ªç½‘ç»œé€šä¿¡åº“å´ä¸ä½¿ç”¨å‘¢ï¼Ÿå› ä¸ºå‰æ–‡ä¹Ÿæåˆ°ï¼Œæˆ‘ä»¥ä¸º HttpURLConnection çš„ä»£ç é‡ç›¸æ¯” OkHttp å¹¶æ²¡æœ‰å¤šå‡ºå¤šå°‘ï¼Œä½†æ˜¯å‡ºç°äº†å¦‚æ­¤å·¨å¤§çš„ Bugï¼Œä¿®å¤å®Œæˆåä»£ç é‡å±…ç„¶å¢åŠ äº†ä¸€å€ï¼Œæ‰€ä»¥å¿…é¡»è½¬æŠ• OkHttp çš„æ€€æŠ±ã€‚ é¦–å…ˆåœ¨é¡¹ç›®ä¸­æ·»åŠ  OkHttp åº“çš„ä¾èµ–ï¼š dependencies { implementation 'com.squareup.okhttp3:okhttp:(insert latest version)' } ä¸ºäº†ä½¿å…¶ä¿æŒæœ€æ–°ç‰ˆæœ¬ï¼Œæœ€å¥½ç™»å½•å…¶å®˜ç½‘æˆ–è€…å…¶ Github é¡¹ç›®ä¸»é¡µè¿›è¡ŒæŸ¥è¯¢ï¼Œå½“ç„¶ï¼Œæ·»åŠ ä¾èµ–æ—¶ã€Android Studioã€å†…ä¹Ÿä¼šæœ‰æç¤ºã€‚ ç„¶åå°±å¯ä»¥åœ¨é¡¹ç›®ä¸­ä½¿ç”¨äº†ï¼Œå°†ä¸Šæ–¹çš„ä»£ç è¿›è¡Œæ”¹é€ ï¼Œå°±å¯ä»¥å¾—å‡ºä¸€æ®µç®€æ´çš„ä»£ç ï¼š private void sendRequestWithOkHttp(final String tel, final String password) { new Thread(new Runnable() { @Override public void run() { try { OkHttpClient client = new OkHttpClient(); RequestBody requestBody = new FormBody.Builder() .add(&quot;tel&quot;, tel) .add(&quot;password&quot;, password) .build(); Request request = new Request.Builder() .url(&quot;http://url&quot;) // æ¥å£ .post(requestBody) .build(); Response response = client.newCall(request).execute(); String responseCode = response.body().string(); Log.e(&quot;GETCODE&quot;, responseCode); } catch (Exception e) { e.printStackTrace(); } } }).start(); } çœŸçš„å¤ªå¥½ç”¨äº†æœ‰æœ¨æœ‰ï¼å¦‚æ­¤æ¸…æ™°ç®€å•çš„ä»£ç å°±å®Œæˆäº†ä¸Šé¢çš„å†…å®¹ï¼Œå¹¶ä¸”è¿˜ååˆ†å®¹æ˜“è·å–ä»æœåŠ¡å™¨è¿”å›çš„æ•°æ®ï¼Œæ–¹ä¾¿æˆ‘åé¢å¯¹å…¶è¿›è¡Œè§£æï¼Œç®€ç›´è¦çˆ±ä¸Šå®ƒäº†ï¼ ","link":"https://LiarrDev.github.io/post/Enjoy-OkHttp-in-One-Shot/"},{"title":"Android Device Monitor æƒé™ç¬”è®°","content":"è¯»ã€Šç¬¬ä¸€è¡Œä»£ç â€”â€”Androidï¼ˆç¬¬ 2 ç‰ˆï¼‰ã€‹çš„æ—¶å€™é‡åˆ°äº†è¿™æ ·ä¸€ä¸ªé—®é¢˜ï¼Œåœ¨æ•°æ®æŒä¹…åŒ–æ–¹æ³•ä¹‹æ–‡ä»¶å­˜å‚¨çš„ç« èŠ‚ï¼Œä»£ç é€šè¿‡ Context ç±»ä¸­æä¾›çš„ openFileInput() å’Œ openFileOutput() æ–¹æ³•ä»¥åŠ Java çš„å„ç§æµæ¥è¿›è¡Œè¯»å†™æ“ä½œã€‚ ç„¶åç³»ç»Ÿä¼šåœ¨ /data/data/&lt;package name&gt;/files/ ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªåä¸ºã€Œdataã€çš„æ–‡ä»¶ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ã€Android Studioã€ä¸­çš„ã€Android Device Monitorã€å»æŸ¥çœ‹ã€‚ é‚£ä¹ˆé—®é¢˜æ¥äº†ï¼Œä¸ä¹¦ä¸Šçš„ä»‹ç»ä¸åŒï¼Œæˆ‘æ‰€ä½¿ç”¨çš„ã€Android Studioã€å¹¶æ²¡æœ‰ã€Android Device Monitorã€ï¼Œéš¾é“æ˜¯æˆ‘æ‰“å¼€çš„æ–¹å¼ä¸å¯¹ï¼Ÿ æˆ‘çš„ã€ŒToolsã€é‡Œæ ¹æœ¬å°±æ²¡æœ‰ã€Android Device Monitorã€å•Šï¼ åæ¥ä» Google å®˜æ–¹æ–‡æ¡£å¾—çŸ¥ï¼Œè‡ªã€Android Studioã€Version 3.0 å¼€å§‹å°±å·²å¼ƒç”¨äº†ã€Android Device Monitorã€ã€‚ However, most components of the Android Device Monitor are deprecated in favor of updated tools available in Android Studio 3.0 and higher. ä½†æ˜¯ï¼Œå¤§å¤šæ•° Android Device Monitor ç»„ä»¶å·²å¼ƒç”¨ï¼Œä»¥æ”¯æŒã€Android Studioã€Version 3.0 å’Œæ›´é«˜ç‰ˆæœ¬ä¸­æä¾›çš„æ›´æ–°å·¥å…·ã€‚ é‚£æ²¡æœ‰ã€Android Device Monitorã€ï¼Œè¦æ€ä¹ˆç»§ç»­ä¸‹ä¸€æ­¥å‘¢ï¼Ÿ å…¶å®è¿›å…¥ Android SDK çš„ç›®å½•çœ‹ä¸€ä¸‹å¯ä»¥å‘ç°ï¼Œå³ä½¿å¼ƒç”¨ï¼Œä½† SDK é‡Œé¢è¿˜æ˜¯æä¾›äº†ã€Android Device Monitorã€ã€‚ å¯ä»¥åœ¨å‘½ä»¤è¡Œä¸­è¿›å…¥ /AndroidSDK/tools/ ç›®å½•ï¼Œç„¶åè¾“å…¥ monitor å³å¯æ‰“å¼€ã€‚ ä¹Ÿå¯ä»¥ç›´æ¥è¿›å…¥åˆ°è¯¥ç›®å½•åŒå‡»æ–‡ä»¶ã€Œmonitor.batã€æ‰“å¼€ã€‚ æœ¬ä»¥ä¸ºæ‰“å¼€ã€Android Device Monitorã€å°±å¯ä»¥ç»§ç»­åé¢çš„å­¦ä¹ äº†ï¼Œè¿™æœªå…ä¹Ÿå¤ªé¡ºåˆ©ï¼Ÿ æŒ‰ç…§æ­¥éª¤ï¼Œæˆ‘éœ€è¦è¿›å…¥ã€ŒFile Explorerã€æ ‡ç­¾é¡µåˆ° /data/data/&lt;package name&gt;/files/ ç›®å½•ä¸‹å»å¯»æ‰¾è¿™ä¸ªåä¸ºã€Œdataã€çš„æ–‡ä»¶ï¼Œä½†æ˜¯å´å‘ç° /data/ ç›®å½•æ ¹æœ¬æ‰“ä¸å¼€ã€‚ åˆè¿›å…¥äº†çŸ¥è¯†çš„ç›²åŒºï¼Œèµ¶ç´§å»è¡¥äº†è¡¥è¯¾ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œ/data æ–‡ä»¶å¤¹çš„ Permissions æ˜¯ drwxrwx--xï¼Œè¿™æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿç›¸ä¿¡å­¦è¿‡ Linux çš„åŒå­¦å°±éå¸¸æ¸…æ¥šäº†ã€‚å› ä¸º Android çš„åº•å±‚æ˜¯ Linuxï¼Œæ‰€ä»¥æ¯ä¸ªæ–‡ä»¶å¤¹éƒ½æ˜¯æœ‰æƒé™æ§åˆ¶çš„ã€‚ å…·ä½“æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ è¿™ä¸€ä¸ªå­—ç¬¦ä¸²ä¸€å…±æœ‰ 10 ä¸ªå­—ç¬¦ï¼Œç¬¬ä¸€ä¸ªå­—ç¬¦è¡¨ç¤ºçš„æ˜¯æ–‡ä»¶ç±»å‹ã€‚d è¡¨ç¤ºæ˜¯æ–‡ä»¶å¤¹ï¼Œl è¡¨ç¤ºè¿æ¥æ–‡ä»¶ï¼Œ- è¡¨ç¤ºæ–‡ä»¶ã€‚ åé¢ 9 ä¸ªå­—ç¬¦åˆå¯ä»¥åˆ†ä¸ºä¸‰ä¸ªå…ƒç»„ï¼Œæ¯ 3 ä¸ªå­—ç¬¦ä¸ºä¸€ä¸ªå…ƒç»„ã€‚ç¬¬ä¸€ä¸ªç»„è¡¨ç¤ºæ–‡ä»¶æ‰€æœ‰è€…ï¼ˆuserï¼‰çš„æƒé™ï¼Œç¬¬äºŒä¸ªç»„è¡¨ç¤ºåŒç»„ç”¨æˆ·ï¼ˆgroupï¼‰çš„æƒé™ï¼Œç¬¬ä¸‰ä¸ªç»„è¡¨ç¤ºæ‰€æœ‰å…¶ä»–ç”¨æˆ·ï¼ˆotherï¼‰çš„æƒé™ã€‚ å…ƒç»„å†…å­—ç¬¦çš„é¡ºåºæ˜¯ rwxã€‚ r ï¼šreadï¼Œå¯è¯» w ï¼šwriteï¼Œå¯å†™ x ï¼šexecuteï¼Œå¯æ‰§è¡Œ - ï¼šæ— è¯¥æƒé™ æ‰€ä»¥ï¼Œdrwxrwx--x çš„æ„æ€æ˜¯ï¼Œæ²¡æœ‰ r å’Œ wï¼Œè¯´æ˜ /data æ–‡ä»¶å¤¹å¯¹å…¶ä»–äººæ¥è¯´æ˜¯ä¸å¯è¯»ä¸å¯å†™çš„ã€‚å› æ­¤æˆ‘ä»¬åˆ™éœ€è¦ä¿®æ”¹å…¶å¯¹åº”çš„æƒé™ã€‚ éœ€è¦ç”¨åˆ°çš„æ˜¯ Android SDK ä¸­çš„ adbã€‚ adb åœ¨ /AndroidSDK/platform-tools/ ç›®å½•ä¸‹ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å¤Ÿé€šè¿‡åŒå‡»æ¥è¿è¡Œå®ƒã€‚ è€Œæ˜¯éœ€è¦å°† /AndroidSDK/platform-tools/ è¿™ä¸ªç›®å½•æ·»åŠ åˆ°ç¯å¢ƒå˜é‡ï¼Œæ‰§è¡Œä¸‹ä¸€æ­¥ã€‚ æ¥ç€ç›´æ¥åœ¨ CMD ä¸­è¾“å…¥å‘½ä»¤ï¼š âœ adb shell ç„¶åæŒ‰ç…§ä¸‹å›¾å‘½ä»¤ç»§ç»­æ“ä½œã€‚ è§£é‡Šä¸€ä¸‹è¿™å‡ ä¸ªå‘½ä»¤ï¼š adb shell ï¼šæ‰“å¼€ adb å¤–å£³ç¨‹åº su ï¼šåˆ‡æ¢ä¸ºè¶…çº§ç®¡ç†å‘˜ï¼Œå³è·å– root æƒé™ï¼Œåªæœ‰ root æƒé™æ‰èƒ½ä¿®æ”¹æ–‡ä»¶çš„è®¿é—®æƒé™ chmod &lt;æƒé™&gt; &lt;æ–‡ä»¶å¤¹&gt; ï¼šä¸ºæ–‡ä»¶å¤¹è®¾ç½®æƒé™ è¿˜éœ€è¦æçš„æ˜¯ï¼Œ# æ˜¯è¶…çº§ç®¡ç†å‘˜çš„æ„æ€ï¼Œä¹Ÿå°±æ˜¯è¯´å¯ä»¥è®¿é—®æ¨¡æ‹Ÿå™¨ä¸­çš„ä¸€åˆ‡æ•°æ®ï¼Œè€Œ $ åˆ™è¡¨ç¤ºæ˜¯æ™®é€šç®¡ç†å‘˜ï¼Œè¾“å…¥ su å‘½ä»¤çš„ä½œç”¨å°±æ˜¯åˆ‡æ¢æˆè¶…çº§ç®¡ç†å‘˜ã€‚ å‘½ä»¤çš„å‰é¢ä¸¤é¡¹å¥½ç†è§£ï¼Œå…³äºæ–‡ä»¶å¤¹æƒé™ï¼Œè¿™ä¸€å † chmod 777 åˆæ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿ æ˜¯æŠŠå¯¹åº”çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹çš„è®¿é—®æƒé™çš„å 9 ä½è®¾ç½®æˆ rwxrwxrwxï¼Œ777 å°±ä¸‰ä¸ªäºŒè¿›åˆ¶ 111, åˆèµ·æ¥å°±æ˜¯ 111111111ï¼ˆ9 ä¸ª 1ï¼‰ï¼Œå³ç›¸å½“äºæŠŠå 9 ä½è®¿é—®æƒé™éƒ½ç½® 1ï¼Œäºæ˜¯å°±æˆäº† rwxrwxrwxï¼Œå³æ‰€æœ‰ç”¨æˆ·éƒ½å…·æœ‰è¯¥æ–‡ä»¶çš„å…¨éƒ¨è®¿é—®æƒé™ã€‚ æŒ‰é“ç†åˆ°è¿™é‡Œå°±å·²ç»è·å–äº†æƒé™å¯ä»¥è®¿é—®å¯¹åº”çš„æ–‡ä»¶äº†ï¼Œä½†äº‹æƒ…å¹¶æ²¡æœ‰æˆ‘æƒ³è±¡ä¸­çš„é‚£ä¹ˆé¡ºåˆ©ï¼Œæ–‡ä»¶å¤¹ä¾æ—§æ‰“ä¸å¼€â€¦ æˆ‘å°±çº³é—·äº†â€¦ ä¸çŸ¥æ€ä¹ˆçš„çªç„¶æœ‰ä¸ªæƒ³æ³•ï¼Œæ‰‹æœºå¯ä»¥é€šè¿‡è·å– root æƒé™ç„¶ååœ¨ã€REæ–‡ä»¶ç®¡ç†å™¨ã€ä¸­æŸ¥çœ‹æœ¬åœ°æ•°æ®åº“ï¼Œé‚£ä¹ˆæˆ‘å¯ä¸å¯ä»¥ç›´æ¥ root å‘¢ï¼Œè™½ç„¶ä¸Šé¢çš„ su ä¹Ÿæ˜¯è·å– root æƒé™ã€‚ æŠ±ç€è¯•ä¸€è¯•çš„å¿ƒæ€ï¼Œæˆ‘åœ¨ CMD ä¸­è¾“å…¥äº†ï¼š âœ adb root ç»“æœï¼Œæ–‡ä»¶å¤¹å°±çœŸçš„ç•…é€šæ— é˜»çš„è¢«æˆ‘æ‰“å¼€äº†â€¦ äº‹å®ä¸Šï¼Œä½¿ç”¨ adb root å¹¶æ²¡æœ‰ä¿®æ”¹å…¶ rwx æƒé™ï¼Œå®ƒåªæ˜¯è·å–äº†æœ€é«˜çº§çš„æ“ä½œæƒï¼Œå¯ä»¥çœ‹åˆ°åœ¨æ‰§è¡Œäº† adb root åï¼Œadb shell ä¸­çš„ $ å°±å·²ç»å˜æˆ # äº†ï¼Œæ— éœ€æ‰§è¡Œ suã€‚ å¦‚æœä»ä¸€å¼€å§‹å°±æ‰§è¡Œ adb root çš„è¯ï¼Œadb shell ä¸­çš„ç›¸å…³æ“ä½œåˆ™æ— éœ€æ‰§è¡Œï¼Œä¹Ÿå¯ä»¥æŸ¥çœ‹åˆ° /data/ ç›®å½•ä¸‹çš„æ–‡ä»¶ã€‚ å…¶ä»–å…³äºã€Android Device Monitorã€åŸºæœ¬å¯ä»¥é€šè¿‡ã€ŒReset Perspectiveã€æ“ä½œæˆ–é‡å¯è§£å†³ã€‚ è¿˜éœ€è¦æé†’çš„æ˜¯ï¼Œã€Android Device Monitorã€åœ¨ã€Android Studioã€Version 3.1 ä¸­å·²å¼ƒç”¨ï¼Œå¹¶åœ¨ã€Android Studioã€Version 3.2 ä¸­ç§»é™¤äº†ï¼Œå¹¶æä¾›äº†æ–°çš„åŠŸèƒ½æ¥æ›¿ä»£ã€‚ ","link":"https://LiarrDev.github.io/post/Permissions-of-Android-Device-Monitor/"},{"title":"Windows å¹³å° React Native å¼€å‘ç¯å¢ƒæ­å»ºç¬”è®°","content":"ç°åœ¨å„ç§ç¬¬ä¸‰æ–¹æ¡†æ¶æµè¡Œï¼Œæ¯æ¬¡å®‰è£…æ€»è¦èŠ±å¤ªå¤šçš„æ—¶é—´ï¼Œåœ¨é‡è£…ç³»ç»Ÿåè¿˜è¦å†ä¸€æ­¥ä¸€æ­¥çš„æ­èµ·æ¥ï¼Œå®åœ¨æ˜¯å¤ªéº»çƒ¦ã€‚ æ¥è®²è®² Windows å¹³å° React Native çš„å¼€å‘ç¯å¢ƒæ­å»ºã€‚ æ’°æ–‡æ—¶ React Native ç‰ˆæœ¬ä¸º 0.51ã€‚ Python ç¬¬ä¸€æ­¥å…ˆå®‰è£…ã€Pythonã€ï¼Œè¿›å…¥å®˜ç½‘ï¼Œå¯ä»¥å‘ç°æœ‰ä¸¤ä¸ªç‰ˆæœ¬ã€‚ è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸€å®šè¦ä¸‹è½½ Python 2ï¼Œä¸è¦ä¸‹è½½ Python 3ã€‚ ä¸‹è½½ä¸‹æ¥è¿è¡Œå®‰è£…å³å¯ï¼Œä¸­é—´æœ‰ä¸€ä¸ªéœ€è¦æ³¨æ„çš„åœ°æ–¹ï¼Œå®‰è£…è¿›å…¥åˆ°ä»¥ä¸‹ç•Œé¢æ—¶ï¼Œéœ€è¦ä¿®æ”¹é€‰é¡¹ã€‚ æœ€åä¸€é¡¹ï¼Œé»˜è®¤æ˜¯æ²¡æœ‰é€‰æ‹©ã€ŒAdd python.exe to Pathã€ï¼Œæ„æ€æ˜¯æŠŠã€Pythonã€çš„å®‰è£…è·¯å¾„æ·»åŠ åˆ°ç³»ç»Ÿè·¯å¾„ä¸‹é¢ï¼Œéœ€è¦æŠŠå®ƒé€‰ä¸Šï¼Œè¿™æ ·ä¼šçœå»å®‰è£…å®Œæˆåè¿˜è¦è‡ªå·±è®¾ç½®è·¯å¾„çš„åŠŸå¤«ã€‚ æŠŠå®ƒé€‰ä¸Šå®‰è£…å®Œæˆçš„æƒ…å†µä¸‹ï¼Œåœ¨ CMD ä¸­è¾“å…¥ python å°±ä¼šå»è°ƒç”¨ã€Œpython.exeã€ï¼Œå¦‚æœæ²¡æœ‰é€‰ä¸Šè¿™ä¸ªé€‰é¡¹ï¼ŒCMD åˆ™ä¼šæŠ¥ä»¥ä¸‹é”™è¯¯ï¼š 'python' ä¸æ˜¯å†…éƒ¨æˆ–å¤–éƒ¨å‘½ä»¤ï¼Œä¹Ÿä¸æ˜¯å¯è¿è¡Œçš„ç¨‹åºæˆ–æ‰¹å¤„ç†æ–‡ä»¶ã€‚ å®‰è£…å®Œæˆåï¼Œè¿›è¡Œä¸‹ä¸€æ­¥ã€‚ Node.js è¿›å…¥ã€Node.jsã€å®˜ç½‘æˆ–ä¸­æ–‡ç½‘ä¸‹è½½å³å¯ï¼Œå®˜ç½‘æœ‰ä¸€ä¸ªæ¨èç‰ˆæœ¬å’Œæœ€æ–°ç‰ˆæœ¬ï¼Œæˆ‘ä¸‹è½½çš„æ˜¯æ¨èç‰ˆæœ¬ï¼Œä¸­æ–‡ç½‘çš„ç‰ˆæœ¬æ¯”å®˜ç½‘çš„æ¨èç‰ˆæœ¬è¦ä½ã€‚ Node.js æä¾›äº† JavaScript ä»£ç çš„ç¼–è¯‘ç¯å¢ƒï¼Œè¿˜æä¾›äº† npm å·¥å…·ï¼Œnpm æ˜¯ä¸€ä¸ªåŒ…ç®¡ç†å™¨ï¼Œæ˜¯ä¸€ä¸ªä¸“é—¨è´Ÿè´£ JavaScript ä»£ç çš„åŒ…ç®¡ç†å™¨ã€‚ å®‰è£…å®Œ Node.js åå»ºè®®è®¾ç½® npm é•œåƒä»¥åŠ é€Ÿåé¢çš„è¿‡ç¨‹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ç§‘å­¦ä¸Šç½‘å·¥å…·ï¼Œç”±äºæˆ‘åœ¨ç”¨çš„ VPN æµé‡æœ‰é™ï¼Œè€Œä¸”ç¬¬ä¸€æ¬¡æ­ React Native ç¯å¢ƒçš„æ—¶å€™ä½¿ç”¨ VPN é€Ÿåº¦å¹¶æ²¡æœ‰å¤ªç†æƒ³ï¼Œæ‰€ä»¥æˆ‘ç”¨ npm æŠŠæœåŠ¡å™¨è®¾ç½®åˆ°å›½å†…çš„æ·˜å®æºã€‚ åœ¨ CMD ä¸­è¾“å…¥ä»¥ä¸‹ä¸¤è¡Œï¼š âœ npm config set registry https://registry.npm.taobao.org --global âœ npm config set disturl https://npm.taobao.org/dist --global è¿™æ ·å°±æ–¹ä¾¿æˆ‘ä»¬åé¢å»å®‰è£…ä¸‹è½½ JavaScript æ¨¡å—çš„æ—¶å€™é€Ÿåº¦æ›´å¿«ã€‚ Yarnã€React Native çš„å‘½ä»¤è¡Œå·¥å…· æˆ‘ä»¬ä½¿ç”¨ npm å®‰è£…ä¸¤ç§ JavaScript æ¨¡å—ï¼Œå…¶ä¸­ä¸€ç§æ˜¯ Yarn å’Œ CLI è¿™ç§å¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œçš„å‘½ä»¤ï¼Œä½¿ç”¨ä»¥ä¸‹çš„å‘½ä»¤ç›´æ¥åœ¨ CMD ä¸­è¿›è¡Œå®‰è£…ï¼š âœ npm install -g yarn react-native-cli npm install -g è¡¨ç¤ºå®‰è£…å…¨å±€æ¨¡å—ï¼ŒYarn å’Œ CLI å…¨å±€å®‰è£…æ˜¯å› ä¸ºå®ƒä»¬æ˜¯ç›´æ¥åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œçš„ï¼Œæ˜¯åœ¨ä»»ä½•ç›®å½•ä¸‹éƒ½å¯ä»¥ç›´æ¥æ‰§è¡Œçš„å‘½ä»¤ã€‚ å¦ä¸€ç±»åˆ™æ˜¯ä¹‹ååœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¼šå¼•ç”¨ä¸€äº›ç¬¬ä¸‰æ–¹çš„ç»„ä»¶æˆ–è€…å·¥å…·ï¼Œæ˜¯ä»£ç å±‚è€Œä¸æ˜¯å‘½ä»¤ï¼Œè¿™äº›æ¨¡å—åˆ™ä¸éœ€è¦åŠ  -g è¿›è¡Œå®‰è£…ã€‚ Yarn æ˜¯ Facebook æä¾›çš„æ›¿ä»£ npm çš„å·¥å…·ï¼Œå¯ä»¥åŠ é€Ÿ Node æ¨¡å—çš„ä¸‹è½½ï¼Œæ¯” npm æ›´å¿«ã€‚CLI åˆ™æ˜¯ React Native çš„å¤–å›´çš„å·¥å…·ï¼Œå®ƒç”¨äºæ‰§è¡Œåˆ›å»ºã€åˆå§‹åŒ–ã€æ›´æ–°é¡¹ç›®ã€è¿è¡Œæ‰“åŒ…æœåŠ¡ç­‰ä»»åŠ¡ã€‚ åˆ°è¿™é‡Œï¼Œç¬¬ä¸‰æ–¹çš„å·¥å…·å°±å®‰è£…çš„å·®ä¸å¤šäº†ï¼Œæ¥ä¸‹æ¥å®‰è£…æ ¸å¿ƒçš„å¼€å‘å·¥å…·ã€‚ Android Studio å› ä¸ºæˆ‘ä¸»è¦è¿˜æ˜¯åš Android å¼€å‘ï¼Œæ‰€ä»¥è¿™æ˜¯å¿…è£…å·¥å…·ã€‚ ä¸‹è½½å¹¶å®‰è£…å®Œæˆåï¼Œå…ˆåˆ›å»ºä¸ªé¡¹ç›®å¹¶åœ¨æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œä¸€ä¸‹ï¼Œä»¥ç¡®è®¤å®‰è£…æ˜¯å¦æ­£å¸¸ã€‚ Android SDK å®‰è£…å®Œã€Android Studioã€åèƒ½è¿è¡Œé¡¹ç›®è¯æ˜å·²ç»å®‰è£…äº†åŸºæœ¬çš„ SDK äº†ï¼Œä½†æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…å…¶ä»–çš„ SDKã€‚ è¿›å…¥ã€ŒSDK Managerã€ï¼Œæ‰“å¼€ã€ŒSDK Toolsã€æ ‡ç­¾é¡µï¼Œå¹¶é€‰æ‹©ä¸‹æ–¹çš„ã€ŒShow Package Detailsã€ï¼Œå¹¶åœ¨ã€ŒAndroid SDK Build-Toolsã€ä¸­å‹¾é€‰ 23.0.1 çš„ç‰ˆæœ¬ï¼Œç„¶åæŒ‰ã€ŒOKã€ä¸‹è½½ã€‚ ç½‘ä¸Šçš„æ•™ç¨‹åŸºæœ¬éƒ½è¯´æœ‰å¾ˆå¤šé¡¹æ˜¯å¿…é¡»ä¸‹è½½çš„ï¼Œä½†æ˜¯æˆ‘å‘ç°åªä¸‹è½½è¿™ä¸€é¡¹ä¹Ÿèƒ½å¤Ÿè¿è¡Œï¼Œä¸çŸ¥é“åç»­çš„å¼€å‘ä¼šä¸ä¼šå—å½±å“ï¼Œä½†æ˜¯ç›®å‰æ²¡æœ‰å‘ç°é—®é¢˜ã€‚ è®°ä½ SDK çš„å®‰è£…ç›®å½•ï¼Œè¿›å…¥ä¸‹ä¸€æ­¥ã€‚ é…ç½®ç¯å¢ƒå˜é‡ ç›¸ä¿¡æ‰€æœ‰å†™è¿‡ Java çš„äººéƒ½é…ç½®è¿‡ç¯å¢ƒå˜é‡äº†ï¼Œè¿™é‡Œè¦é…ç½® ANDROID_HOME ç¯å¢ƒå˜é‡ã€‚ åœ¨ã€Œç”¨æˆ·å˜é‡ã€ä¸­æ–°å»ºã€‚å˜é‡åä¸º ANDROID_HOMEï¼Œæ³¨æ„æ˜¯å¤§å†™ï¼Œç„¶åå˜é‡å€¼ä¸ºä¸Šä¸€æ­¥ä¸­ SDK çš„ç›®å½•ã€‚ ç„¶åè¿˜è¦åœ¨ã€Œç”¨æˆ·å˜é‡ã€çš„ Path ä¸­æ·»åŠ ä¸¤ä¸ªç›®å½•ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š è¿™ä¸¤ä¸ªç›®å½•ä¸­æœ‰ä¸€äº›æ¯”è¾ƒé‡è¦çš„ Android å‘½ä»¤ï¼Œåœ¨ä»¥åçš„å¼€å‘ä¸­å¯èƒ½ä¼šç”¨åˆ°ã€‚ JRE ä½ å¯èƒ½ä¼šå‘ç°æˆ‘å¹¶æ²¡æœ‰é…ç½® JDKï¼Œè¿™ä¸æ˜¯ Java æœ€åŸºæœ¬çš„ä¸œè¥¿å—ï¼Ÿ å…¶å®ï¼Œä»æˆ‘ç”¨ã€Eclipseã€å†™ Java å¼€å§‹å°±æ²¡æœ‰å†é…ç½®è¿‡ JDK äº†ï¼Œæ˜¯ä¸æ˜¯å¾ˆç¥å¥‡ï¼Œã€Eclipseã€éƒ¨åˆ†ç‰ˆæœ¬é‡Œé¢å†…ç½®äº† OpenJDKï¼Œå¹¶ä¸”è‡ªå¸¦äº† JREï¼Œæ‰€ä»¥æ— éœ€å†è‡ªå·±å®‰è£… JDK äº†ã€‚ ä»åˆšæ‰èƒ½è¿è¡Œ Android é¡¹ç›®ï¼Œå°±å¯ä»¥çŸ¥é“ã€Android Studioã€é‡Œé¢ä¹Ÿæ˜¯å†…ç½®äº† JRE çš„ï¼Œä¹Ÿå°±æ˜¯ Java è¿è¡Œç¯å¢ƒï¼Œæ‰€ä»¥æˆ‘ä»¬åªè¦å¼•ç”¨å…¶ JRE è·¯å¾„ï¼Œå°±å¯ä»¥åœ¨ React Native é¡¹ç›®ä¸­ä½¿ç”¨ã€‚ åœ¨ã€Android Studioã€çš„å®‰è£…ç›®å½•ä¸­æ‰¾åˆ° JRE çš„è·¯å¾„ï¼Œå¡«å…¥ã€Œç³»ç»Ÿå˜é‡ã€çš„ Path ä¸­å³å¯ã€‚ ç„¶åç¡®å®šï¼Œå¹¶é€€å‡ºæ‰€æœ‰çª—å£ã€‚ è¿™æ—¶å€™ï¼Œåœ¨ Windows ç³»ç»Ÿä¸‹ React Native çš„ Android è¿è¡Œç¯å¢ƒå°±åŸºæœ¬æ­å»ºå®Œæˆäº†ã€‚ ä¸ºäº†æ›´æ–¹ä¾¿çš„å¼€å‘ React Nativeï¼Œæˆ‘è¿˜éœ€è¦ä¸€ä¸ªå¥½ç”¨çš„ IDEã€‚ Atom è€ƒè™‘åˆ°é€‚åˆ React Native å¼€å‘çš„ IDE å®åœ¨ä¸å¤šï¼Œæ¯”å¦‚æœ€å¥½ç”¨çš„å¯èƒ½æ˜¯ä¸ã€Android Studioã€å¸ˆå‡ºåŒé—¨çš„ã€WebStormã€äº†ï¼Œä½†æ˜¯æ”¶è´¹ï¼›æ¯”å¦‚æ’ä»¶å¼ºå¤§çš„ã€Sublime Text 3ã€ï¼Œä¹Ÿæ˜¯æ”¶è´¹ï¼Œè™½ç„¶ç›®å‰è¿˜å¯ä»¥æ— é™æœŸè¯•ç”¨ï¼Œä½†é…ç½®èµ·æ¥ç›¸å¯¹éº»çƒ¦ï¼›æ¯”å¦‚ Mircosoft å®¶çš„è½»é‡çº§çš„å¼€æº Web é›†æˆå¼€å‘ç¯å¢ƒã€Visual Studio Codeã€ï¼Œä¸ªäººå–œå¥½é—®é¢˜ï¼Œä¸å¤ªå–œæ¬¢ï¼›æ¯”å¦‚å¼€æºçš„ä¸“é—¨ä¸º React Native æ‰“é€ çš„ã€Decoã€ï¼Œå¯æƒœç›®å‰åªæ”¯æŒ Mac OS Xã€‚ ç»¼åˆè€ƒè™‘ï¼Œåˆ°æœ€åæˆ‘é€‰æ‹©äº†ã€Atomã€ï¼Œç”±å…¨çƒæœ€å¤§çš„åŒæ€§äº¤å‹ç¤¾åŒºã€GitHubã€æ‰“é€ çš„ç¼–ç¨‹å¼€å‘åˆ©å™¨ã€‚ æ‰“å¼€å®˜ç½‘è¿›è¡Œä¸‹è½½ã€‚ç›´æ¥ä¸‹è½½å®‰è£…é»˜è®¤æ˜¯è£…åœ¨ C ç›˜ï¼Œæˆ‘çš„ C ç›˜å¯æ²¡æ‰“ç®—ç»™å®ƒç•™ä½ç½®ï¼Œä»”ç»†çœ‹å®˜ç½‘å¯ä»¥å‘ç°æœ‰ä¸€è¡Œå°å­—ï¼š ç‚¹å‡»è¿™ä¸ªã€ŒOther platformsã€å³å¯è·³è½¬åˆ°ã€GitHubã€çš„å…¨å¹³å°çš„ä¸‹è½½é¡µã€‚ åœ¨é‡Œé¢æ‰¾åˆ°å¯¹åº”çš„ç‰ˆæœ¬ä¸‹è½½å³å¯ï¼Œæ¯”å¦‚æˆ‘æ˜¯ 64 ä½çš„ Windows æ“ä½œç³»ç»Ÿï¼Œåˆ™ä¸‹è½½ã€Œatom-x64-windows.zipã€ã€‚ ä¸‹è½½å®Œæˆåè§£å‹å³å¯ã€‚ Nuclide ã€Atomã€æœ¬è´¨ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª IDEï¼Œå› æ­¤åœ¨ç”¨æ¥å¼€å‘ React Native æ—¶éœ€è¦é…åˆã€Nuclideã€ä¸€èµ·ä½¿ç”¨ï¼Œã€Nuclideã€æ˜¯ Facebook åŸºäºã€Atomã€çš„åŸºç¡€ä¸Šå¼€å‘çš„ä¸€ä¸ªæ’ä»¶ã€‚ åœ¨ã€Atomã€ä¸­æœç´¢ã€ŒNuclideã€è¿›è¡Œå®‰è£…å³å¯ï¼Œä¸è¿‡ã€Atomã€åœ¨å®‰è£…æ’ä»¶çš„è¿‡ç¨‹ä¸­æ²¡æœ‰è¿›åº¦æ¡ï¼Œå®‰è£…æ—¶é—´åˆé•¿ï¼Œå®åœ¨ä»¤äººæŠ“ç‹‚ï¼Œæœ€å¥½æŒ‚æ¢¯å­ã€‚ å®‰è£…å®Œæˆåï¼Œè¿›å…¥ã€Nuclideã€çš„ã€ŒSettingsã€ï¼Œå‹¾é€‰ã€ŒInstall Recommended Packets on Startupã€ã€‚ ç„¶åé€€å‡ºã€Atomã€å†æ‰“å¼€ï¼Œä¼šå‘ç°è‡ªåŠ¨å®‰è£…è¿™äº›ä¾èµ–åŒ…ã€‚ å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œã€Atomã€çš„æ’ä»¶æ˜¯é»˜è®¤è£…åœ¨ C ç›˜çš„ï¼Œç›®å‰ä¼¼ä¹æ²¡æœ‰åŠæ³•ä¿®æ”¹ã€‚ Others Chocolatey å®˜ç½‘åŒ…æ‹¬ä¸­æ–‡ç½‘æŠŠã€Chocolateyã€å½’ç±»åˆ°å¿…éœ€çš„è½¯ä»¶ä¸­ï¼Œå®ƒæ˜¯ä¸€ä¸ª Windows ä¸Šçš„åŒ…ç®¡ç†å™¨ï¼Œç±»ä¼¼äºåº”ç”¨å¸‚åœºã€‚ å¯ä»¥çœ‹åˆ°åœ¨ä¸Šé¢çš„æ­¥éª¤ä¸­å¹¶æ²¡æœ‰å®‰è£…ï¼Œå› ä¸ºå®ƒçš„å®‰è£…å’Œä½¿ç”¨éƒ½æ¯”è¾ƒå›°éš¾ï¼Œç”±äºåœ¨å›½å¤–ï¼Œæ‰€ä»¥å®ƒçš„ç½‘é€Ÿä¼šæ¯”è¾ƒæ…¢ï¼Œå› æ­¤å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„å¥½å¤„ï¼Œæ‰€ä»¥å°±ç›´æ¥è·³è¿‡äº†ã€‚ Git å®˜ç½‘æŠŠã€Gitã€å½’ç±»åˆ°å¯é€‰çš„å®‰è£…é¡¹ä¸­ï¼Œä¸è¿‡åœ¨ä¹‹å‰çš„ç‰ˆæœ¬æ˜¯å¿…é¡»å®‰è£…ã€‚ ã€Gitã€çš„è¯åœ¨æŸäº›æƒ…å†µä¹Ÿæ˜¯éœ€è¦ç”¨åˆ°çš„ï¼Œæ¯”å¦‚æœ‰æ—¶å€™éœ€è¦è¿è¡Œåœ¨ã€GitHubã€ä¸Šçš„å¼€æºé¡¹ç›®çš„æ—¶å€™ï¼Œæ²¡æœ‰ã€Gitã€ä¼šæŠ¥é”™ï¼Œè¿™ä¸ªåœ¨éœ€è¦çš„æ—¶å€™å®‰è£…å³å¯ã€‚ åœ¨å®‰è£…è¿‡ç¨‹ä¸­æ³¨æ„å‹¾é€‰ã€ŒRun Git from Windows Command Promptã€ï¼Œè¿™æ ·æ‰ä¼šæŠŠ git å‘½ä»¤æ·»åŠ åˆ° PATH ç¯å¢ƒå˜é‡ä¸­ï¼Œä¿è¯æˆ‘ä»¬åœ¨å‘½ä»¤è¡Œä¸­å¯ä»¥è°ƒç”¨ git å‘½ä»¤ã€‚ åˆ°è¿™é‡Œç¯å¢ƒå°±åŸºæœ¬æ­å»ºå®Œæˆäº†ï¼Œç„¶åå°±å¯ä»¥åˆ›å»ºä¸€ä¸ªé¡¹ç›®è¿è¡Œä¸€ä¸‹ã€‚ åœ¨ CMD è¿›å…¥éœ€è¦åˆ›å»ºé¡¹ç›®çš„ç›®å½•ä¸‹ï¼Œè¾“å…¥ï¼š âœ react-native init ProjectName å…¶ä¸­ï¼Œã€ŒProjectNameã€ä»£è¡¨é¡¹ç›®åï¼Œæ³¨æ„ä¸è¦ä½¿ç”¨ä¸­æ–‡çš„é¡¹ç›®åï¼Œä¹Ÿä¸è¦åœ¨ä»»ä½•ä¸­æ–‡ç›®å½•ä¸‹æ‰§è¡Œè¿™ä¸ªå‘½ä»¤ï¼Œé¿å…ä¸å¿…è¦çš„éº»çƒ¦ã€‚ è¿˜éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸è¦åœ¨å‘½ä»¤è¡Œé»˜è®¤çš„ã€ŒSystem32ã€ç›®å½•ä¸­ init é¡¹ç›®ï¼ä¼šæœ‰å„ç§æƒé™é™åˆ¶å¯¼è‡´ä¸èƒ½è¿è¡Œï¼ ç„¶åè¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼š âœ cd ProjectName æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä»¥è¿è¡Œ Android é¡¹ç›®ï¼š âœ react-native run-android æ‰§è¡Œçš„è¿‡ç¨‹ä¸­ä¼šå¼¹å‡ºä¸€ä¸ª Node çª—å£ï¼Œä¸èƒ½å…³é—­è¿™ä¸ªçª—å£ï¼Œå¦åˆ™ç¨‹åºå°†ä¸èƒ½æ‰§è¡Œã€‚ è¿™æ˜¯ç¨‹åºåœ¨ Node ä¸­æ‰§è¡Œç¼–è¯‘ã€æ‰“åŒ…ã€è½¬ç  JavaScript æ–‡ä»¶çš„å·¥å…·ã€‚ å¯ä»¥çœ‹åˆ°ï¼Œå®ƒè¿è¡Œåœ¨ 8081 ç«¯å£ä¸Šï¼Œå¯èƒ½ä¼šæœ‰æŸäº›æ€æ¯’è½¯ä»¶ï¼Œæ¯”å¦‚ã€McAfeeã€ï¼Œä¹Ÿä¼šå ç”¨è¯¥ç«¯å£ï¼Œè¿™ç§æƒ…å†µä¸‹ç¨‹åºæ˜¯æ— æ³•æ­£å¸¸è¿è¡Œçš„ï¼Œæ‰€ä»¥è¦åœæ­¢ç›¸å…³å ç”¨ç«¯å£çš„è½¯ä»¶ã€‚ ç„¶åç­‰å¾…å‘½ä»¤æ‰§è¡Œï¼Œç›´åˆ°æœ€åçœ‹åˆ°æœ‰ä¸”ä»…æœ‰ã€ŒNo connected devices!ã€çš„é”™è¯¯æ—¶ï¼Œå°±ä»£è¡¨ä¸‡äº‹ä¿±å¤‡ï¼ŒApp å·²ç»ç¼–è¯‘å¥½äº†ï¼Œåªæ˜¯æ²¡æœ‰æ‰¾åˆ°å¯ä»¥å®‰è£…çš„è®¾å¤‡ã€‚ ä¸è¦è¢«ä¸‹æ–¹çš„çº¢å­—æ‰€è¿·æƒ‘ï¼Œå®ƒçœ‹èµ·æ¥åƒæ˜¯æŠ¥é”™ï¼Œè€Œä¸”æœ‰æç¤º FAILEDï¼Œå…¶å®å¹¶æ²¡æœ‰ä»€ä¹ˆä¿¡æ¯é‡ï¼Œåªæ˜¯ä¸€ä¸ªä¸€èˆ¬æ€§çš„æç¤ºï¼Œå®ƒå¹¶ä¸æ˜¯ä»»ä½•é”™è¯¯çš„å…·ä½“åŸå› ï¼Œä¸ç®¡ä»»ä½•æŠ¥é”™ï¼Œéƒ½ä¼šè¹¦å‡ºè¿™å‡ è¡Œçº¢å­—ã€‚ æœ€åå°±å¯ä»¥è¿çœŸæœºè¿è¡Œäº†ã€‚ åŒæ ·çš„æ­¥éª¤ï¼Œä¸è¿‡åœ¨çœŸæœºè¿è¡Œä¼šé‡åˆ°ä¸¤ç§æƒ…å†µã€‚ åœ¨ä½äº Android 5.0 çš„è®¾å¤‡ä¸Šè¿è¡Œå¯èƒ½ä¼šå‡ºç°æŠ¥é”™ï¼Œå¦‚å›¾æ‰€ç¤ºï¼š æˆ‘å°è¯•æŒ‰ç…§ç½‘ä¸Šçš„å„ç§æ–¹æ³•è¿›è¡Œè°ƒæ•´ï¼Œæ‰‹åŠ¨ä¿®æ”¹ç«¯å£ç­‰ï¼Œä½†ç›®å‰ä»æ²¡æœ‰è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å¦å¤–åœ¨ã€Android Studioã€ä¸­ä¹Ÿæ— æ³•æ­£å¸¸è¿è¡Œç¨‹åºã€‚ ä½†æ˜¯åœ¨é«˜äº Android 5.0 çš„çœŸæœºä¸Šè¿è¡Œåˆ™æ²¡æœ‰ä»»ä½•é—®é¢˜ã€‚ å½“å‡ºç°ä¸Šé¢è¿™ä¸ªé¡µé¢çš„æ—¶å€™ï¼Œå°±è¯æ˜é¡¹ç›®æ­£å¸¸è¿è¡Œäº†ã€‚ å‚è€ƒå†…å®¹ï¼šReact Native ä¸­æ–‡ç½‘ ","link":"https://LiarrDev.github.io/post/Set-up-React-Native-Development-Environment-on-Windows/"},{"title":"è·å–æ‰‹æœºåº”ç”¨ ICON çš„æ–¹æ³•","content":"ä¸€ç›´å¾ˆå–œæ¬¢å¾®åšè¡¨æƒ…çš„é‚£ä¸¤åªç‹—ï¼ŒçœŸçš„å¾ˆå½¢è±¡åœ°è¡¨è¾¾å‡ºä¸å±‘ï¼Œå¤§æ¦‚è¿™ä¹Ÿæ˜¯è¯„è®ºé‡Œçš„å‹å†›ç‰¹å–œæ¬¢ä½¿ç”¨çš„åŸå› ä¹‹ä¸€å§ã€‚ äºæ˜¯å°±å¾ˆæƒ³æŠŠå®ƒä»¬éƒ½è½¬ä¸ºå¾®ä¿¡è¡¨æƒ…åŒ…ï¼Œå¯æƒœæœäº†å¥½ä¹…éƒ½æ²¡æ‰¾åˆ°é«˜æ¸…çš„å›¾ç‰‡ã€‚ ç„¶åçªå‘å¥‡æƒ³ï¼Œè¿™äº›è¡¨æƒ…æœ¬æ¥å°±å†…ç½®åœ¨ App å†…ï¼Œè€Œè½¯ä»¶å®‰è£…åŒ… APK æ–‡ä»¶å®è´¨ä¸Šä¹Ÿæ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œé‚£æˆ‘èƒ½ä¸èƒ½è§£å‹å®ƒæ¥è·å–é«˜æ¸…åŸå›¾å‘¢ï¼Ÿ æœºæ™ºå¦‚æˆ‘ï¼Œå¼€æã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦ä»å®‰å“çš„åº”ç”¨å¸‚åœºä¸ŠæŠŠè½¯ä»¶å®‰è£…åŒ…ä¸‹è½½åˆ°ç”µè„‘ã€‚ ä»»ä½•ä¸€ä¸ªåº”ç”¨å¸‚åœºéƒ½æ˜¯å¯ä»¥çš„ï¼Œæ¯”å¦‚ã€Google Playã€ã€ã€è±Œè±†èšã€ç­‰ï¼Œæˆ‘è¿™é‡Œé€‰æ‹©çš„æ˜¯ä»ã€å°ç±³åº”ç”¨å•†åº—ã€ä¸‹è½½ã€‚ ä¸‹è½½å®Œæˆåï¼Œå³å¯ä»¥è·å¾—ä¸€ä¸ª APK æ–‡ä»¶ã€‚ ç„¶åéœ€è¦ä¿®æ”¹æ–‡ä»¶æ ¼å¼ä¸ºå‹ç¼©æ–‡ä»¶ ZIPï¼Œç›´æ¥æŠŠåç¼€æ”¹ä¸ºã€Œ.zipã€å³å¯ã€‚ æ¥ç€è§£å‹è¿™ä¸ªå‹ç¼©æ–‡ä»¶ã€‚Windows 10 ç³»ç»Ÿçš„ã€æ–‡ä»¶èµ„æºç®¡ç†å™¨ã€æ˜¯å…·æœ‰è§£å‹æ–‡ä»¶åŠŸèƒ½çš„ï¼Œå¦å¤–ä¹Ÿå¯ä»¥ä½¿ç”¨ã€WinRARã€ã€ã€7-Zipã€ç­‰å·¥å…·è¿›è¡Œè§£å‹ã€‚ è§£å‹å®Œä¹‹åä¼šå¾—åˆ°ä¸€å¤§å †æ–‡ä»¶ï¼Œä¸è¦æ€•ï¼Œåªéœ€è¦æ‰“å¼€åä¸ºã€Œresã€çš„æ–‡ä»¶å¤¹å³å¯ï¼Œå…¶ä»–æ–‡ä»¶å¯ä»¥åˆ é™¤æˆ–è‡ªè¡Œå¤„ç½®ã€‚ æ‰“å¼€ã€Œresã€æ–‡ä»¶å¤¹åä¹Ÿä¼šå¾—åˆ°å¾ˆå¤šæ–‡ä»¶å¤¹ï¼Œä¸€èˆ¬è¡¨æƒ…ä¼šæ”¾åœ¨ã€Œdrawableã€é›†åˆçš„æ–‡ä»¶å¤¹ä¸‹ã€‚ æ–‡ä»¶æ¯”è¾ƒå¤šï¼Œå¯ä»¥æ…¢æ…¢æ‰¾ã€‚ å½“ç„¶ä½ ä¹Ÿå¯ä»¥ç›´æ¥æœç´¢ã€Œdogeã€ç›´æ¥æŸ¥è¯¢åˆ°è¿™åªç‹—ã€‚ å¦‚æœä½ çš„ç³»ç»Ÿä¸æ”¯æŒç›´æ¥æŸ¥çœ‹ WebP æ ¼å¼çš„å›¾ç‰‡ï¼Œé‚£ä¹ˆæ‰¾èµ·æ¥ä¼šååˆ†éº»çƒ¦ï¼Œè¿˜æ˜¯ç”¨æœç´¢åŠŸèƒ½æ¯”è¾ƒæ–¹ä¾¿ã€‚ WebP æ ¼å¼æ˜¯ Google å¼€å‘çš„ä¸€ç§æ—¨åœ¨åŠ å¿«å›¾ç‰‡åŠ è½½é€Ÿåº¦çš„å›¾ç‰‡æ ¼å¼ã€‚å› æ­¤ï¼Œåªè¦ä½¿ç”¨ Chrome å†…æ ¸çš„æµè§ˆå™¨éƒ½å¯ä»¥æ‰“å¼€ã€‚ æ¥ç€ç›´æ¥æŠŠè¿™ä¸ª WebP æ–‡ä»¶å‘é€åˆ°æ‰‹æœºå¹¶æ·»åŠ åˆ°å¾®ä¿¡å³å¯ã€‚ ç°åœ¨çš„æ™ºèƒ½æ‰‹æœºåŸºæœ¬éƒ½èƒ½å¤Ÿè¯†åˆ«å¹¶æ‰“å¼€ WebP æ–‡ä»¶ï¼Œè‹¥ä¸èƒ½æ‰“å¼€ï¼Œå¯ä»¥å…ˆä½¿ç”¨æ ¼å¼è½¬æ¢å·¥å…·æŠŠå®ƒè½¬ä¸º PNG æ ¼å¼ã€‚ æ·»åŠ è¡¨æƒ…åï¼Œè·Ÿç½‘ä¸Šé‚£äº›æ¨¡ç³Šçš„å›¾ç›¸æ¯”ç®€ç›´è·ŸåŠ äº†ç¾é¢œä¸€æ ·ã€‚ æœå¯»è¿‡ç¨‹ä¸­è¿˜æœ‰å…¶ä»–æ”¶è·ï¼Œè·Ÿè¿™æ¬¡ä¸»é¢˜å‘¼åº”ï¼Œè·å–è½¯ä»¶çš„ ICONã€‚ è¿™å¯¹è½¯ä»¶ UI è®¾è®¡çš„åŒå­¦å¯èƒ½å°±æ¯”è¾ƒæœ‰å¸®åŠ©äº†ï¼Œçœ‹åˆ°å…¶ä»–è½¯ä»¶æœ‰å¥½çš„ ICONï¼Œç»ˆäºä¸ç”¨è‡ªå·±è®¾è®¡æˆ–è€…å…¨ç½‘æœç´ æäº†ï¼Œä¸‹ä¸ªå®‰è£…åŒ…ç›´æ¥ã€Œå€Ÿã€å°±å¯ä»¥ã€‚ æˆ‘ä»¬åš App å¼€å‘çš„ä¹Ÿå¯ä»¥ç›´æ¥æ‹¿è¿‡æ¥ç”¨ï¼Œçœäº‹ã€‚ ","link":"https://LiarrDev.github.io/post/How-to-Get-Icons-of-Android-App/"},{"title":"æ—¶é—´å·®ç®—æ³•","content":"ä»¥å‰åœ¨å­¦æ ¡åšè¯¾ç¨‹è®¾è®¡çš„æ—¶å€™ï¼Œæœ‰ä¸¤ä¸ªç®—æ³•ç‰¹åˆ«æœ‰è¶£ï¼Œåœ¨è¿™é‡Œç•™ä¸ªåº•ï¼Œä»¥å¤‡ä¸æ—¶ä¹‹éœ€ã€‚ ç¬¬ä¸€ä¸ªç®—æ³•æ˜¯è‡ªåŠ¨è·å–æœ¬åœ°å½“å‰æ—¶é—´çš„ç®—æ³•ï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥ã€‚ç”±äºå„ç§ä¸åŒè¯­è¨€è·å–çš„æ–¹æ³•å„ä¸ç›¸åŒï¼Œè¿™é‡Œä¸åšä»‹ç»ï¼Œä¸Šç½‘æœä¸€ä¸‹å³å¯ã€‚ ç¬¬äºŒä¸ªç®—æ³•æ˜¯æ—¶é—´å·®ç®—æ³•ã€‚åƒå¾ˆå¤šè¯¾ç¨‹è®¾è®¡ä¸€èˆ¬éƒ½æã€Œåœè½¦åœºç®¡ç†ç³»ç»Ÿã€ã€ã€Œå›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿã€ä¹‹ç±»çš„éœ€è¦è®¡ç®—æ—¶é—´å·®çš„ç³»ç»Ÿï¼Œè¿™ä¸ªç®—æ³•å°±ååˆ†é‡è¦äº†ã€‚ å³ä½¿åˆ°äº†åˆ¶ä½œåœ¨çº¿å•†åŸç­‰é«˜çº§ç³»ç»Ÿæ—¶ï¼Œä¹Ÿæ˜¯éœ€è¦è®¡ç®—æ—¶é—´å·®çš„ï¼Œæ¯•ç«Ÿåƒæ·˜å®çš„è®¢å•ç³»ç»Ÿä¹Ÿæ˜¯è¦è®¡ç®— 15 å¤©è‡ªåŠ¨æ”¶è´§çš„ã€‚ Talk is cheap, show you the code! public static double TimeDiff(int startYear, int startMonth, int startDay, int startHour, int startMinute, int endYear, int endMonth, int endDay, int endHour, int endMinute) { int y, m, d; int Y, M, D; int Day, Hour, Minute; double time; m = (startMonth + 9) % 12; // ç”¨äºåˆ¤æ–­æ—¥æœŸæ˜¯å¦å¤§äº 3 æœˆï¼ˆ2 æœˆæ˜¯åˆ¤æ–­é—°å¹´çš„æ ‡è¯†ï¼‰ï¼Œè¿˜ç”¨äºçºªå½•åˆ° 3 æœˆçš„é—´éš”æœˆæ•° y = startYear - m / 10; // å¦‚æœæ˜¯ 1 æœˆå’Œ 2 æœˆï¼Œåˆ™ä¸åŒ…æ‹¬å½“å‰å¹´,å› ä¸ºæ˜¯è®¡ç®—åˆ° 0 å¹´ 3 æœˆ 1 æ—¥çš„å¤©æ•° d = 365 * y + y / 4 - y / 100 + y / 400 + (m * 306 + 5) / 10 + (startDay - 1); // 365 * y æ˜¯ä¸ç®—é—°å¹´å¤šå‡ºé‚£ä¸€å¤©çš„å¤©æ•°ï¼›y / 4 - y / 100 + y / 400 æ˜¯åŠ æ‰€æœ‰é—°å¹´å¤šå‡ºçš„é‚£ä¸€å¤©ï¼›(m * 306 + 5) / 10 ç”¨äºè®¡ç®—å½“å‰æœˆåˆ° 3 æœˆ 1 æ—¥é—´çš„å¤©æ•°ï¼Œ306 = 365 - 31 - 28ï¼ˆ1 æœˆå’Œ 2 æœˆï¼‰ï¼Œ5 æ˜¯å…¨å¹´ä¸­ä¸æ˜¯ 31 å¤©æœˆä»½çš„ä¸ªæ•°ï¼›startDay - 1 ç”¨äºè®¡ç®—å½“å‰æ—¥åˆ° 1 æ—¥çš„é—´éš”å¤©æ•° M = (endMonth + 9) % 12; Y = endYear - M / 10; D = 365 * Y + Y / 4 - Y / 100 + Y / 400 + (M * 306 + 5) / 10 + (endDay - 1); Day = D - d; Hour = 24 * Day + endHour - startHour; if (endMinute - startMinute &lt; 0) { Hour--; Minute = endMinute + 60 - startMinute; } else { Minute = endMinute - startMinute; } time = (double) Hour + ((double) Minute) / 60; return time; } å› ä¸ºæ¯ä¸ªæœˆçš„å¤©æ•°ä¸åŒï¼Œå› æ­¤é‡‡ç”¨ç›´æ¥ç›¸å‡çš„æ–¹æ³•æ˜æ˜¾æ˜¯ä¸åˆç†çš„ã€‚ è¯¥ç®—æ³•æ€»ä½“æ€æƒ³æ˜¯è®¡ç®—ç»™å®šæ—¥æœŸåˆ° 0 å¹´ 3 æœˆ 1 æ—¥çš„å¤©æ•°ï¼Œç„¶åç›¸å‡ï¼Œè·å–å¤©æ•°çš„é—´éš”ã€‚ å³é‡‡å–ä¸€ä¸ªå‚ç…§ç‚¹ï¼Œç„¶åè®¡ç®—ä¸¤ä¸ªæ—¶é—´åˆ°åŒä¸€å‚ç…§ç‚¹çš„æ—¶é—´å·®ï¼Œå†ç›¸å‡è·å¾—å¤©æ•°çš„é—´éš”ã€‚ ç”±äºæŠ˜ç®—çš„å•ä½æ˜¯å¤©æ•°ï¼Œå› æ­¤ D - d åˆ™å¯è·å¾—å¤©æ•°å·®ã€‚ å°æ—¶å·®çš„è®¡ç®—é‡Œç”¨åˆ°äº†å¤©æ•°ä½œä¸ºå€Ÿä½ï¼Œå¦‚æœå¤©æ•°ä¸è¶³ 1 å¤©ï¼Œå³ 24 * Day ä¸º 0ï¼Œåˆ™æ²¡æœ‰å€Ÿä½ã€‚ åŒæ ·ï¼Œåœ¨åˆ†é’Ÿå·®çš„è®¡ç®—ä¸­ï¼Œå¦‚æœå·®å°äº 0ï¼Œåˆ™éœ€å‘å°æ—¶å€Ÿä½ã€‚ è¿™é‡Œåªç²¾ç¡®åˆ°åˆ†é’Ÿçš„è®¡ç®—ï¼Œå¹¶ä¸”æœ€ç»ˆæŠŠç»“æœè½¬ä¸ºä»¥å°æ—¶ä¸ºå•ä½çš„æµ®ç‚¹æ•°ã€‚ å„ä½å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´ç²¾ç¡®åº¦å’Œå•ä½ã€‚ æ—¶é—´å·®ç®—æ³•ä¸€èˆ¬å’Œè‡ªåŠ¨è·å–æ—¶é—´çš„ç®—æ³•ä¸€åŒä½¿ç”¨ï¼Œè¯¾ç¨‹è®¾è®¡ä¸­å¯è§†æƒ…å†µé‡‡ç”¨æ‰‹åŠ¨è¾“å…¥æ—¶é—´çš„æ–¹å¼ï¼Œä½†è‡ªåŠ¨è·å–æœ¬åœ°æ—¶é—´ç›¸å¯¹æ¥è¯´æ›´æ¥è¿‘åº”ç”¨å±‚é¢ï¼Œè€Œè¿™ä¹Ÿæ°å¥½æ˜¯è¯¾ç¨‹è®¾è®¡ä¸­çš„ä¸€ä¸ªé‡è¦è¯„åˆ†ç‚¹ã€‚ ","link":"https://LiarrDev.github.io/post/Time-Difference-Algorithm/"},{"title":"å¸¸ç”¨æ­£åˆ™è¡¨è¾¾å¼","content":"å¾ˆå¤šä¸å¤ªæ‡‚æ­£åˆ™çš„æœ‹å‹ï¼Œåœ¨é‡åˆ°éœ€è¦ç”¨æ­£åˆ™æ ¡éªŒæ•°æ®æ—¶ï¼Œå¾€å¾€æ˜¯åœ¨ç½‘ä¸Šå»æ‰¾å¾ˆä¹…ï¼Œç»“æœæ‰¾æ¥çš„è¿˜æ˜¯ä¸å¾ˆç¬¦åˆè¦æ±‚ã€‚æ‰€ä»¥æˆ‘æœ€è¿‘æŠŠå¼€å‘ä¸­å¸¸ç”¨çš„ä¸€äº›æ­£åˆ™è¡¨è¾¾å¼æ•´ç†äº†ä¸€ä¸‹ï¼Œåœ¨è¿™é‡Œåˆ†äº«ä¸€ä¸‹ã€‚ç»™è‡ªå·±ç•™ä¸ªåº•ï¼Œä¹Ÿç»™æœ‹å‹ä»¬åšä¸ªå‚è€ƒã€‚ æ­£åˆ™è¡¨è¾¾å¼ï¼Œåˆç§°è§„åˆ™è¡¨è¾¾å¼ã€‚ï¼ˆè‹±è¯­ï¼šRegular Expressionï¼Œåœ¨ä»£ç ä¸­å¸¸ç®€å†™ä¸º regexã€regexp æˆ– REï¼‰ï¼Œè®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªæ¦‚å¿µã€‚æ­£åˆ™è¡¨é€šå¸¸è¢«ç”¨æ¥æ£€ç´¢ã€æ›¿æ¢é‚£äº›ç¬¦åˆæŸä¸ªæ¨¡å¼ï¼ˆè§„åˆ™ï¼‰çš„æ–‡æœ¬ã€‚ æ ¡éªŒæ•°å­—çš„è¡¨è¾¾å¼ æ•°å­—ï¼š^[0-9]*$ n ä½çš„æ•°å­—ï¼š^\\d{n}$ è‡³å°‘ n ä½çš„æ•°å­—ï¼š^\\d{n,}$ m ~ n ä½çš„æ•°å­—ï¼š^\\d{m,n}$ é›¶å’Œéé›¶å¼€å¤´çš„æ•°å­—ï¼š^(0|[1-9][0-9]*)$ éé›¶å¼€å¤´çš„æœ€å¤šå¸¦ä¸¤ä½å°æ•°çš„æ•°å­—ï¼š^([1-9][0-9]*)+(.[0-9]{1,2})?$ å¸¦ 1 ~ 2 ä½å°æ•°çš„æ­£æ•°æˆ–è´Ÿæ•°ï¼š^(\\-)?\\d+(\\.\\d{1,2})?$ æ­£æ•°ã€è´Ÿæ•°ã€å’Œå°æ•°ï¼š^(\\-|\\+)?\\d+(\\.\\d+)?$ æœ‰ä¸¤ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{2})?$ æœ‰ 1 ~ 3 ä½å°æ•°çš„æ­£å®æ•°ï¼š^[0-9]+(.[0-9]{1,3})?$ éé›¶çš„æ­£æ•´æ•°ï¼š^[1-9]\\d*$ æˆ– ^([1-9][0-9]*){1,3}$ æˆ– ^\\+?[1-9][0-9]*$ éé›¶çš„è´Ÿæ•´æ•°ï¼š^\\-[1-9][]0-9&quot;*$ æˆ– ^-[1-9]\\d*$ éè´Ÿæ•´æ•°ï¼š^\\d+$ æˆ– ^[1-9]\\d*|0$ éæ­£æ•´æ•°ï¼š^-[1-9]\\d*|0$ æˆ– ^((-\\d+)|(0+))$ éè´Ÿæµ®ç‚¹æ•°ï¼š^\\d+(\\.\\d+)?$ æˆ– ^[1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*|0?\\.0+|0$ éæ­£æµ®ç‚¹æ•°ï¼š^((-\\d+(\\.\\d+)?)|(0+(\\.0+)?))$ æˆ– ^(-([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*))|0?\\.0+|0$ æ­£æµ®ç‚¹æ•°ï¼š^[1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*$ æˆ– ^(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*))$ è´Ÿæµ®ç‚¹æ•°ï¼š^-([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*)$ æˆ– ^(-(([0-9]+\\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\\.[0-9]+)|([0-9]*[1-9][0-9]*)))$ æµ®ç‚¹æ•°ï¼š^(-?\\d+)(\\.\\d+)?$ æˆ– ^-?([1-9]\\d*\\.\\d*|0\\.\\d*[1-9]\\d*|0?\\.0+|0)$ æ ¡éªŒå­—ç¬¦çš„è¡¨è¾¾å¼ æ±‰å­—ï¼š^[\\u4e00-\\u9fa5]{0,}$ è‹±æ–‡å’Œæ•°å­—ï¼š^[A-Za-z0-9]+$ æˆ– ^[A-Za-z0-9]{4,40}$ é•¿åº¦ä¸º 3 ~ 20 çš„æ‰€æœ‰å­—ç¬¦ï¼š^.{3,20}$ ç”± 26 ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z]+$ ç”± 26 ä¸ªå¤§å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Z]+$ ç”± 26 ä¸ªå°å†™è‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[a-z]+$ ç”±æ•°å­—å’Œ 26 ä¸ªè‹±æ–‡å­—æ¯ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^[A-Za-z0-9]+$ ç”±æ•°å­—ã€26 ä¸ªè‹±æ–‡å­—æ¯æˆ–è€…ä¸‹åˆ’çº¿ç»„æˆçš„å­—ç¬¦ä¸²ï¼š^\\w+$ æˆ– ^\\w{3,20}$ ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—åŒ…æ‹¬ä¸‹åˆ’çº¿ï¼š^[\\u4E00-\\u9FA5A-Za-z0-9_]+$ ä¸­æ–‡ã€è‹±æ–‡ã€æ•°å­—ä½†ä¸åŒ…æ‹¬ä¸‹åˆ’çº¿ç­‰ç¬¦å·ï¼š^[\\u4E00-\\u9FA5A-Za-z0-9]+$ æˆ– ^[\\u4E00-\\u9FA5A-Za-z0-9]{2,20}$ å¯ä»¥è¾“å…¥å«æœ‰ ^%&amp;',;=?$\\&quot; ç­‰å­—ç¬¦ï¼š[^%&amp;',;=?$\\x22]+ ç¦æ­¢è¾“å…¥å«æœ‰ ~ çš„å­—ç¬¦ï¼š[^~\\x22]+ ç‰¹æ®Šéœ€æ±‚è¡¨è¾¾å¼ Email åœ°å€ï¼š^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$ åŸŸåï¼š[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.? Internet URLï¼š[a-zA-z]+://[^\\s]* æˆ– ^http://([\\w-]+\\.)+[\\w-]+(/[\\w-./?%&amp;=]*)?$ æ‰‹æœºå·ç ï¼š^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$ ç”µè¯å·ç ï¼ˆ&quot;XXX-XXXXXXX&quot;ã€&quot;XXXX-XXXXXXXX&quot;ã€&quot;XXX-XXXXXXX&quot;ã€&quot;XXX-XXXXXXXX&quot;ã€&quot;XXXXXXX&quot; å’Œ &quot;XXXXXXXXï¼‰ï¼š^(\\(\\d{3,4}-)|\\d{3.4}-)?\\d{7,8}$ å›½å†…ç”µè¯å·ç ï¼ˆ0511-4405222ã€021-87888822ï¼‰ï¼š\\d{3}-\\d{8}|\\d{4}-\\d{7} èº«ä»½è¯å·ï¼ˆ15 ä½ã€18 ä½æ•°å­—ï¼‰ï¼š^\\d{15}|\\d{18}$ çŸ­èº«ä»½è¯å·ç ï¼ˆæ•°å­—ã€å­—æ¯ X ç»“å°¾ï¼‰ï¼š^([0-9]){7,18}(x|X)?$ æˆ– ^\\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$ å¸å·æ˜¯å¦åˆæ³•ï¼ˆå­—æ¯å¼€å¤´ï¼Œå…è®¸ 5 ~ 16 å­—èŠ‚ï¼Œå…è®¸å­—æ¯æ•°å­—ä¸‹åˆ’çº¿ï¼‰ï¼š^[a-zA-Z][a-zA-Z0-9_]{4,15}$ å¯†ç ï¼ˆä»¥å­—æ¯å¼€å¤´ï¼Œé•¿åº¦åœ¨ 6 ~ 18 ä¹‹é—´ï¼Œåªèƒ½åŒ…å«å­—æ¯ã€æ•°å­—å’Œä¸‹åˆ’çº¿ï¼‰ï¼š^[a-zA-Z]\\w{5,17}$ å¼ºå¯†ç ï¼ˆå¿…é¡»åŒ…å«å¤§å°å†™å­—æ¯å’Œæ•°å­—çš„ç»„åˆï¼Œä¸èƒ½ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦ï¼Œé•¿åº¦åœ¨8-10ä¹‹é—´ï¼‰ï¼š^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$ æ—¥æœŸæ ¼å¼ï¼š^\\d{4}-\\d{1,2}-\\d{1,2} ä¸€å¹´çš„ 12 ä¸ªæœˆï¼ˆ01 ~ 09 å’Œ 1 ~ 12)ï¼š^(0?[1-9]|1[0-2])$ ä¸€ä¸ªæœˆçš„ 31 å¤©ï¼ˆ01 ~ 09 å’Œ 1 ~ 31)ï¼š^((0?[1-9])|((1|2)[0-9])|30|31)$ XML æ–‡ä»¶ï¼š^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\\\.[x|X][m|M][l|L]$ ä¸­æ–‡å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š[\\u4e00-\\u9fa5] åŒå­—èŠ‚å­—ç¬¦ï¼š[^\\x00-\\xff] ï¼ˆåŒ…æ‹¬æ±‰å­—åœ¨å†…ï¼Œå¯ä»¥ç”¨æ¥è®¡ç®—å­—ç¬¦ä¸²çš„é•¿åº¦ï¼šä¸€ä¸ªåŒå­—èŠ‚å­—ç¬¦é•¿åº¦è®¡2ï¼ŒASCIIå­—ç¬¦è®¡1ï¼‰ ç©ºç™½è¡Œçš„æ­£åˆ™è¡¨è¾¾å¼ï¼š\\n\\s*\\r ï¼ˆå¯ä»¥ç”¨æ¥åˆ é™¤ç©ºç™½è¡Œï¼‰ HTML æ ‡è®°çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š&lt;(\\S*?)[^&gt;]*&gt;.*?&lt;/\\1&gt;|&lt;.*? /&gt; ï¼ˆç½‘ä¸Šæµä¼ çš„ç‰ˆæœ¬å¤ªç³Ÿç³•ï¼Œä¸Šé¢è¿™ä¸ªä¹Ÿä»…ä»…èƒ½éƒ¨åˆ†ï¼Œå¯¹äºå¤æ‚çš„åµŒå¥—æ ‡è®°ä¾æ—§æ— èƒ½ä¸ºåŠ›ï¼‰ é¦–å°¾ç©ºç™½å­—ç¬¦çš„æ­£åˆ™è¡¨è¾¾å¼ï¼š^\\s*|\\s*$ æˆ– (^\\s*)|(\\s*$) ï¼ˆå¯ä»¥ç”¨æ¥åˆ é™¤è¡Œé¦–è¡Œå°¾çš„ç©ºç™½å­—ç¬¦ï¼ŒåŒ…æ‹¬ç©ºæ ¼ã€åˆ¶è¡¨ç¬¦ã€æ¢é¡µç¬¦ç­‰ç­‰ï¼Œéå¸¸æœ‰ç”¨çš„è¡¨è¾¾å¼ï¼‰ è…¾è®¯ QQ å·ï¼š[1-9][0-9]{4,} ï¼ˆè…¾è®¯ QQ å·ä» 10000 å¼€å§‹ï¼‰ ä¸­å›½é‚®æ”¿ç¼–ç ï¼š[1-9]\\d{5}(?!\\d) ï¼ˆä¸­å›½é‚®æ”¿ç¼–ç ä¸º 6 ä½æ•°å­—ï¼‰ IP åœ°å€ï¼š\\d+\\.\\d+\\.\\d+\\.\\d+ ï¼ˆæå– IP åœ°å€æ—¶æœ‰ç”¨ï¼‰ IP åœ°å€ï¼š((?:(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d)\\\\.){3}(?:25[0-5]|2[0-4]\\\\d|[01]?\\\\d?\\\\d)) å¤§æ¦‚å°±è¿™ä¹ˆå¤šäº†ï¼ŒçŸ¥é“æœ‰è¿™ä¸ªä¸œè¥¿æ€»ä¼šçœäº‹ä¸€ç‚¹ã€‚ ç½‘ä¸Šè¿˜æœ‰åœ¨çº¿æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•å·¥å…·ï¼Œå¯ä»¥æ ¡éªŒè‡ªå·±å†™çš„è¡¨è¾¾å¼ã€‚ æ­£åˆ™è¡¨è¾¾å¼çš„å­¦ä¹ å¯å‚è€ƒã€æ­£åˆ™è¡¨è¾¾å¼30åˆ†é’Ÿå…¥é—¨æ•™ç¨‹ã€ã€‚ ","link":"https://LiarrDev.github.io/post/Common-Regular-Expressions/"},{"title":"Greatest Common Divisor","content":"æœ€å¤§å…¬çº¦æ•°æ˜¯åœ¨å¾ˆå°çš„æ—¶å€™å°±å­¦è¿‡çš„ä¸œè¥¿ï¼Œä¼¼ä¹æ—¥å¸¸ç”Ÿæ´»çš„åº”ç”¨ä¹Ÿä¸å¹¿æ³›ï¼Œå¤§å¤šæ•°åªåº”ç”¨åœ¨ææ–™ä½¿ç”¨ç‡æœ€å¤§åŒ–ç­‰é—®é¢˜ä¸Šï¼Œä½†æ˜¯ç®—æ³•å´ä¸è§å¾—é«˜æ•ˆã€‚ é‚£ä¹ˆæ±‚æœ€å¤§å…¬çº¦æ•°æœ‰å“ªäº›ç®—æ³•å‘¢ï¼Ÿ Qï¼šè¦æ±‚æ–¹æ³•ä¼ ä¸¤ä¸ªæ­£æ•´å‹å‚æ•°ï¼Œè¿”å›å€¼å°±æ˜¯ä»–ä»¬çš„æœ€å¤§å…¬çº¦æ•°ï¼Œå°½å¯èƒ½ä¿è¯æ€§èƒ½ æš´åŠ›æšä¸¾æ³• public static int getGreatestCommonDivisor(int numberA, int numberB) { int smallNumber = numberA &lt; numberB ? numberA : numberB; int bigNumber = numberA &gt;= numberB ? numberA : numberB; if (bigNumber % smallNumber == 0) { return smallNumber; } int greatestCommonDivisor = 1; for (int i = 2; i &lt;= smallNumber / 2; i++) { if (numberA % i == 0 &amp;&amp; numberB % i == 0) { greatestCommonDivisor = i; } } return greatestCommonDivisor; } æ€è·¯ååˆ†ç®€å•ï¼Œä½¿ç”¨æš´åŠ›æšä¸¾çš„æ–¹æ³•ï¼Œè¯•å›¾å¯»æ‰¾åˆ°ä¸€ä¸ªåˆé€‚çš„æ•´æ•° iï¼Œçœ‹çœ‹è¿™ä¸ªæ•´æ•°èƒ½å¦è¢«ä¸¤ä¸ªæ•´å‹å‚æ•° numberA å’Œ numberB åŒæ—¶æ•´é™¤ã€‚ è¿™ä¸ªæ•´æ•° i ä» 2 å¼€å§‹å¾ªç¯ç´¯åŠ ï¼Œä¸€ç›´ç´¯åŠ åˆ° numberA å’Œ numberB ä¸­è¾ƒå°çš„å‚æ•°çš„ä¸€åŠä¸ºæ­¢ã€‚å¾ªç¯ç»“æŸåï¼Œä¸Šä¸€æ¬¡å¯»æ‰¾åˆ°çš„èƒ½å¤Ÿè¢«ä¸¤æ•°æ•´é™¤çš„æœ€å¤§ i å€¼ï¼Œå°±æ˜¯ä¸¤æ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚ è¿™æ ·è™½ç„¶å¯ä»¥å¾—åˆ°æ­£ç¡®ç»“æœï¼Œä½†æ•ˆç‡å´æ¯”è¾ƒä½ã€‚æ¯”å¦‚ä¼ å…¥ä¸¤ä¸ªå‚æ•° 10000 å’Œ 10001ï¼Œç”¨æ­¤æ–¹æ³•å°±éœ€è¦å¾ªç¯ 10000/2-1=4999 æ¬¡ï¼ è¾—è½¬ç›¸é™¤æ³• è¾—è½¬ç›¸é™¤æ³•ï¼Œåˆåæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼ˆEuclidean algorithmï¼‰ï¼Œæ˜¯å¤å¸Œè…Šæ•°å­¦å®¶æ¬§å‡ é‡Œå¾—å‘æ˜çš„ï¼Œç›®çš„æ˜¯æ±‚å‡ºä¸¤ä¸ªæ­£æ•´æ•°çš„æœ€å¤§å…¬çº¦æ•°ã€‚å®ƒæ˜¯å·²çŸ¥æœ€å¤è€çš„ç®—æ³•ï¼Œå¯è¿½æº¯è‡³å…¬å…ƒå‰ 300 å¹´å‰ã€‚ è¿™æ¡ç®—æ³•åŸºäºä¸€ä¸ªå®šç†ï¼šä¸¤ä¸ªæ­£æ•´æ•° a å’Œ bï¼ˆa&gt;bï¼‰ï¼Œå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°ç­‰äº a é™¤ä»¥ b çš„ä½™æ•° c å’Œ b ä¹‹é—´çš„æœ€å¤§å…¬çº¦æ•°ã€‚ æ¯”å¦‚ï¼š10 å’Œ 25ï¼Œ25 é™¤ä»¥ 10 å•† 2 ä½™ 5ï¼Œé‚£ä¹ˆ 10 å’Œ 25 çš„æœ€å¤§å…¬çº¦æ•°ï¼Œç­‰åŒäº 10 å’Œ 5 çš„æœ€å¤§å…¬çº¦æ•°ã€‚ æœ‰äº†è¿™æ¡å®šç†ï¼Œæ±‚æœ€å¤§å…¬çº¦æ•°å°±ç®€å•äº†ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨é€’å½’çš„æ–¹æ³•æ¥æŠŠé—®é¢˜é€æ­¥ç®€åŒ–ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè®¡ç®—å‡º a é™¤ä»¥ b çš„ä½™æ•° cï¼ŒæŠŠé—®é¢˜è½¬åŒ–æˆæ±‚å‡º b å’Œ c çš„æœ€å¤§å…¬çº¦æ•°ï¼›ç„¶åè®¡ç®—å‡º b é™¤ä»¥ c çš„ä½™æ•° dï¼ŒæŠŠé—®é¢˜è½¬åŒ–æˆæ±‚å‡º c å’Œ d çš„æœ€å¤§å…¬çº¦æ•°ï¼›å†ç„¶åè®¡ç®—å‡º c é™¤ä»¥ d çš„ä½™æ•° eï¼ŒæŠŠé—®é¢˜è½¬åŒ–æˆæ±‚å‡º d å’Œ e çš„æœ€å¤§å…¬çº¦æ•°â€¦â€¦ ä»¥æ­¤ç±»æ¨ï¼Œé€æ¸æŠŠä¸¤ä¸ªè¾ƒå¤§æ•´æ•°ä¹‹é—´çš„è¿ç®—ç®€åŒ–æˆä¸¤ä¸ªè¾ƒå°çš„æ•´æ•°ä¹‹é—´çš„è¿ç®—ï¼Œç›´åˆ°ä¸¤ä¸ªæ•°å¯ä»¥æ•´é™¤ï¼Œæˆ–è€…å…¶ä¸­ä¸€ä¸ªæ•°å‡å°‘åˆ° 1 ä¸ºæ­¢ã€‚ public static int getGreatestCommonDivisor(int numberA, int numberB) { int result = 1; if (numberA &gt; numberB) { result = gcd(numberA, numberB); } else { result = gcd(numberB, numberA); } return result; } // é€’å½’è®¡ç®—æœ€å¤§å…¬çº¦æ•° private static int gcd(int a, int b) { if (a % b == 0) { return b; } else { return gcd(b, a % b); } } ä¸è¿‡ä¸€ä¸ªæ–°é—®é¢˜äº§ç”Ÿäº†ï¼Œå½“ä¸¤ä¸ªæ•´å‹æ•°è¾ƒå¤§æ—¶ï¼Œåš a%b å–æ¨¡è¿ç®—çš„æ€§èƒ½ä¼šæ¯”è¾ƒä½ã€‚ æ›´ç›¸å‡æŸæœ¯ æ›´ç›¸å‡æŸæœ¯ï¼Œå‡ºè‡ªä¸­å›½å¤ä»£çš„ã€Šä¹ç« ç®—æœ¯ã€‹ï¼Œä¹Ÿæ˜¯ä¸€ç§æ±‚æœ€å¤§å…¬çº¦æ•°çš„ç®—æ³•ã€‚ åŸç†æ›´åŠ ç®€å•ï¼šä¸¤ä¸ªæ­£æ•´æ•° a å’Œ bï¼ˆa&gt;bï¼‰ï¼Œå®ƒä»¬çš„æœ€å¤§å…¬çº¦æ•°ç­‰äº a-b çš„å·®å€¼ c å’Œè¾ƒå°æ•° b çš„æœ€å¤§å…¬çº¦æ•°ã€‚ æ¯”å¦‚ï¼š10 å’Œ 25 ï¼Œ25 å‡å» 10 çš„å·®æ˜¯ 15ï¼Œé‚£ä¹ˆ 10 å’Œ 25 çš„æœ€å¤§å…¬çº¦æ•°ï¼Œç­‰åŒäº 10 å’Œ 15 çš„æœ€å¤§å…¬çº¦æ•°ã€‚ ç”±æ­¤ï¼Œæˆ‘ä»¬åŒæ ·å¯ä»¥é€šè¿‡é€’å½’æ¥ç®€åŒ–é—®é¢˜ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬å…ˆè®¡ç®—å‡º a å’Œ b çš„å·®å€¼ cï¼ˆå‡è®¾ a&gt;bï¼‰ï¼ŒæŠŠé—®é¢˜è½¬åŒ–æˆæ±‚å‡º b å’Œ c çš„æœ€å¤§å…¬çº¦æ•°ï¼›ç„¶åè®¡ç®—å‡º c å’Œ b çš„å·®å€¼ dï¼ˆå‡è®¾ c&gt;dï¼‰ï¼ŒæŠŠé—®é¢˜è½¬åŒ–æˆæ±‚å‡º b å’Œ d çš„æœ€å¤§å…¬çº¦æ•°ï¼›å†ç„¶åè®¡ç®—å‡º b å’Œ d çš„å·®å€¼ eï¼ˆå‡è®¾ b&gt;dï¼‰ï¼ŒæŠŠé—®é¢˜è½¬åŒ–æˆæ±‚å‡º d å’Œ e çš„æœ€å¤§å…¬çº¦æ•°â€¦â€¦ ä»¥æ­¤ç±»æ¨ï¼Œé€æ¸æŠŠä¸¤ä¸ªè¾ƒå¤§æ•´æ•°ä¹‹é—´çš„è¿ç®—ç®€åŒ–æˆä¸¤ä¸ªè¾ƒå°æ•´æ•°ä¹‹é—´çš„è¿ç®—ï¼Œç›´åˆ°ä¸¤æ•°å¯ä»¥ç›¸ç­‰ä¸ºæ­¢ï¼Œæœ€å¤§å…¬çº¦æ•°å°±æ˜¯æœ€ç»ˆç›¸ç­‰çš„ä¸¤ä¸ªæ•°ã€‚ public static int gcd(int numberA, int numberB) { if (numberA == numberB) { return numberA; } else if (numberA &lt; numberB) { return gcd(numberB - numberA, numberA); } else { return gcd(numberA - numberB, numberB); } } æ›´ç›¸å‡æŸæœ¯é¿å…äº†å¤§æ•´æ•°å–æ¨¡çš„æ€§èƒ½é—®é¢˜ï¼Œå·²ç»è¶Šæ¥è¶Šæ¥è¿‘æœ€ä¼˜äº†ï¼Œä½†æ˜¯ï¼Œä¾é ä¸¤æ•°æ±‚å·®çš„æ–¹å¼æ¥é€’å½’ï¼Œè¿ç®—çš„æ¬¡æ•°è‚¯å®šè¿œå¤§äºè¾—è½¬ç›¸é™¤æ³•çš„å–æ¨¡æ–¹å¼ã€‚å› æ­¤ï¼Œæ›´ç›¸å‡æŸæœ¯æ˜¯ä¸ç¨³å®šçš„ç®—æ³•ï¼Œå½“ä¸¤æ•°ç›¸å·®æ‚¬æ®Šæ—¶ï¼Œæ¯”å¦‚è®¡ç®— 10000 å’Œ 1ï¼Œå°±è¦é€’å½’ 9999 æ¬¡ã€‚ æ›´ç›¸å‡æŸæœ¯ä¸ç§»ä½ç»“åˆ æœ‰ä»€ä¹ˆæ–¹æ³•ï¼Œå¯ä»¥æ—¢é¿å…å¤§æ•´æ•°å–æ¨¡ï¼Œåˆèƒ½å°½å¯èƒ½å‡å°‘è¿ç®—æ¬¡æ•°å‘¢ï¼Ÿ æœ€ä¼˜æ–¹æ³•â€”â€”æŠŠè¾—è½¬ç›¸é™¤æ³•å’Œæ›´ç›¸å‡æŸæœ¯çš„ä¼˜åŠ¿ç»“åˆèµ·æ¥ï¼Œåœ¨æ›´ç›¸å‡æŸæœ¯çš„åŸºç¡€ä¸Šä½¿ç”¨ç§»ä½è¿ç®—ã€‚ ä¼—æ‰€å‘¨çŸ¥ï¼Œç§»ä½è¿ç®—çš„æ€§èƒ½éå¸¸å¿«ã€‚å¯¹äºç»™å®šçš„æ­£æ•´æ•°aå’Œbï¼Œä¸éš¾å¾—åˆ°å¦‚ä¸‹çš„ç»“è®ºï¼ˆå…¶ä¸­ gcb(a, b) çš„æ„æ€æ˜¯ a å’Œ b çš„æœ€å¤§å…¬çº¦æ•°å‡½æ•°ï¼‰ï¼š å½“ a å’Œ b å‡ä¸ºå¶æ•°ï¼Œgcb(a, b) = 2 * gcb(a/2, b/2) = 2 * gcb(a&gt;&gt;1, b&gt;&gt;1); å½“ a ä¸ºå¶æ•°ï¼Œb ä¸ºå¥‡æ•°ï¼Œgcb(a, b) = gcb(a/2, b) = gcb(a&gt;&gt;1, b); å½“ a ä¸ºå¥‡æ•°ï¼Œb ä¸ºå¶æ•°ï¼Œgcb(a, b) = gcb(a, b/2) = gcb(a, b&gt;&gt;1); å½“ a å’Œ b å‡ä¸ºå¥‡æ•°ï¼Œåˆ©ç”¨æ›´ç›¸å‡æŸæœ¯è¿ç®—ä¸€æ¬¡ï¼Œgcb(a, b) = gcb(b, a-b)ï¼Œæ­¤æ—¶ a-b å¿…ç„¶æ˜¯å¶æ•°ï¼Œåˆå¯ä»¥ç»§ç»­è¿›è¡Œç§»ä½è¿ç®—ã€‚ æ¯”å¦‚è®¡ç®— 10 å’Œ 25 çš„æœ€å¤§å…¬çº¦æ•°çš„æ­¥éª¤å¦‚ä¸‹ï¼š æ•´æ•° 10 é€šè¿‡ç§»ä½ï¼Œå¯ä»¥è½¬æ¢æˆæ±‚ 5 å’Œ 25 çš„æœ€å¤§å…¬çº¦æ•° åˆ©ç”¨æ›´ç›¸å‡æŸæœ¯ï¼Œè®¡ç®—å‡º 25-5=20ï¼Œè½¬æ¢æˆæ±‚ 5 å’Œ 20 çš„æœ€å¤§å…¬çº¦æ•° æ•´æ•° 20 é€šè¿‡ç§»ä½ï¼Œå¯ä»¥è½¬æ¢æˆæ±‚ 5 å’Œ 10 çš„æœ€å¤§å…¬çº¦æ•° æ•´æ•° 10 é€šè¿‡ç§»ä½ï¼Œå¯ä»¥è½¬æ¢æˆæ±‚ 5 å’Œ 5 çš„æœ€å¤§å…¬çº¦æ•° åˆ©ç”¨æ›´ç›¸å‡æŸæœ¯ï¼Œå› ä¸ºä¸¤æ•°ç›¸ç­‰ï¼Œæ‰€ä»¥æœ€å¤§å…¬çº¦æ•°æ˜¯ 5 åœ¨ä¸¤æ•°æ¯”è¾ƒå°çš„æ—¶å€™ï¼Œæš‚æ—¶çœ‹ä¸å‡ºè®¡ç®—æ¬¡æ•°çš„ä¼˜åŠ¿ï¼Œå½“ä¸¤æ•°è¶Šå¤§ï¼Œè®¡ç®—æ¬¡æ•°çš„èŠ‚çœå°±è¶Šæ˜æ˜¾ã€‚ public static int gcd(int numberA, int numberB) { if (numberA == numberB) { return numberA; } else if (numberA &lt; numberB) { return gcd(numberB, numberA); // ä¿è¯å‚æ•° numberA æ°¸è¿œå¤§äºç­‰äºå‚æ•° numberBï¼Œå‡å°‘ä»£ç é‡ } else { // å’Œ 1 åšæŒ‰ä½ä¸è¿ç®—ï¼Œåˆ¤æ–­å¥‡å¶ if (!numberA&amp;1 &amp;&amp; !numberB&amp;1) { return gcd(numberA &gt;&gt; 1, numberB &gt;&gt; 1) &lt;&lt; 1; } else if (!numberA&amp;1 &amp;&amp; numberB&amp;1) { return gcd(numberA &gt;&gt; 1, numberB); } else if (numberA&amp;1 &amp;&amp; !numberB&amp;1) { return gcd(numberA, numberB &gt;&gt; 1); } else { return gcd(numberA, numberA - numberB); } } } æ€»ç»“ä¸Šè¿°æ‰€æœ‰ç®—æ³•çš„æ—¶é—´å¤æ‚åº¦ æš´åŠ›æšä¸¾æ³•ï¼š æ—¶é—´å¤æ‚åº¦æ˜¯ O(min(a, b)))ã€‚ è¾—è½¬ç›¸é™¤æ³•ï¼š æ—¶é—´å¤æ‚åº¦ä¸å¤ªå¥½è®¡ç®—ï¼Œå¯ä»¥è¿‘ä¼¼ä¸º O(log(max(a, b)))ï¼Œä½†æ˜¯å–æ¨¡è¿ç®—æ€§èƒ½è¾ƒå·®ã€‚ æ›´ç›¸å‡æŸæœ¯ï¼š é¿å…äº†å–æ¨¡è¿ç®—ï¼Œä½†æ˜¯ç®—æ³•æ€§èƒ½ä¸ç¨³å®šï¼Œæœ€åæ—¶é—´å¤æ‚åº¦ä¸º O(max(a, b)))ã€‚ æ›´ç›¸å‡æŸæœ¯ä¸ç§»ä½ç»“åˆï¼š ä¸ä½†é¿å…äº†å–æ¨¡è¿ç®—ï¼Œè€Œä¸”ç®—æ³•æ€§èƒ½ç¨³å®šï¼Œæ—¶é—´å¤æ‚åº¦ä¸º O(log(max(a, b)))ã€‚ å†™åœ¨åé¢ æ–¹æ³•çš„å‚æ•°é»˜è®¤å¿…å®šæ˜¯æ­£æ•´æ•°ï¼Œæ‰€ä»¥åœ¨ä»£ç ä¸­çœå»äº†åˆæ³•æ€§æ£€æŸ¥ã€‚ æ–‡ä¸­æè¿°çš„æ›´ç›¸å‡æŸæœ¯æ˜¯ç®€åŒ–äº†çš„æ–¹å¼ã€‚åœ¨ä¹ç« ç®—æœ¯åŸæ–‡ä¸­å¤šäº†ä¸€æ­¥éªŒè¯ï¼šå¦‚æœä¸¤æ•°éƒ½æ˜¯å¶æ•°ï¼Œè®¡ç®—å·®å€¼ä¹‹å‰ä¼šé¦–å…ˆè®©ä¸¤ä¸ªæ•°éƒ½æŠ˜åŠï¼Œä½¿å¾—è®¡ç®—æ¬¡æ•°æ›´å°‘ã€‚è¿™ç§æ–¹æ³•åšåˆ°äº†éƒ¨åˆ†ä¼˜åŒ–ï¼Œä½†å¤äººä¼¼ä¹æ²¡æƒ³åˆ°ä¸€å¥‡ä¸€å¶çš„æƒ…å†µä¹Ÿæ˜¯å¯ä»¥ä¼˜åŒ–çš„ã€‚ ","link":"https://LiarrDev.github.io/post/Greatest-Common-Divisor/"}]}